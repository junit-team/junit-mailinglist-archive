{
    "numMessagesInTopic": 2, 
    "nextInTime": 23874, 
    "senderId": "J4lWNL1EpgJV2j1yNlKSqvSBikpeQzRId07r3TWq-bFj76Ud8KU8mRXMWMf7ro1qXYxTid_hcDsrHTo", 
    "systemMessage": true, 
    "subject": "Testing of OSGi declarative services", 
    "from": "&quot;.&quot; &lt;tesco@...&gt;", 
    "authorName": ".", 
    "msgSnippet": "Hi, I m not able to test a OSGi declarative service with a JUnit Plugin Test in Eclipse. Although all necessary bundles (especially the Service, the Consumer ", 
    "msgId": 23873, 
    "topicId": 23873, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 527614618, 
    "messageBody": "<div id=\"ygrps-yiv-1432668028\">Hi,<br/>\n<br/>\nI&#39;m not able to test a OSGi declarative service with a JUnit Plugin Test <br/>\nin Eclipse.<br/>\n<br/>\nAlthough all necessary bundles (especially the Service, the Consumer <br/>\nwith the JUnit Test class, org.eclipse.equinox.ds, <br/>\norg.eclipse.equinox.util, org.eclipse.jdt.junit.runtime and <br/>\norg.eclipse.pde.junit.runtime) are added to the Run Configuration of the <br/>\nPlugin Test and the bind/unbind methods are defined in the test class it <br/>\ncomes to an Null Pointer Exception (the bind method seems to be not <br/>\nexecuted), if I access the Service attribute (e.g. public static <br/>\nIMyService myService) in a JUnit Test method.<br/>\n<br/>\nAccording to this site <br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/7161338/using-osgi-declarative-services-in-the-context-of-a-junit-test\">http://stackoverflow.com/questions/7161338/using-osgi-declarative-services-in-the-context-of-a-junit-test</a> <br/>\nthe reason for this exception is that the OSGi framework is in a race <br/>\ncondition with the JUnit tests runner context. The solution there to use <br/>\na Count Down Latch that waits in a @Before method until the needed <br/>\nservice (that should be tested) is binded, seems to be not working for <br/>\nme. In my case the await() method blocks infinitely, so the test will be <br/>\nnever executed. On the other hand, if I define a maximum time to wait, <br/>\ne.g. await(10, TimeUnit.SECONDS), it comes after this time again to the <br/>\nNull Pointer Exception.<br/>\n<br/>\nWhat is the correct way to test a OSGi declarative service with JUnit?<br/>\n<br/>\nAny help is appreciated.<br/>\n<br/>\nRegards,<br/>\nRene</div>", 
    "prevInTime": 23872, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1335622761", 
    "canDelete": false, 
    "nextInTopic": 23884, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDRGOUJGQzY5LjEwMDA0MDlAZ214LmluZm8+"
    }
}