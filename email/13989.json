{
    "numMessagesInTopic": 3, 
    "nextInTime": 13990, 
    "senderId": "ZRv-Nnw54aPC-B0YK1Hkv52ktEn64T9s2I1qxjuRICYr7KELFvjkOcrFrmwLui_o62txrbduwR1TwXZtQIzgNWlcv-z_yH0", 
    "systemMessage": true, 
    "subject": "Re: [junit] Advice on TDD&#39;ing a POJO that uses a web service", 
    "from": "Al Rathon &lt;new_berlin@...&gt;", 
    "authorName": "Al Rathon", 
    "msgSnippet": "Dan, I suggest you use the Marigold test framework (version 0.9) at http://sourceforge.net/projects/marigold . It appears to be well suited for testing the", 
    "msgId": 13989, 
    "profile": "new_berlin", 
    "topicId": 13970, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 91554192, 
    "messageBody": "<div id=\"ygrps-yiv-1744821996\">Dan,<br/>\n<br/>\nI suggest you use the Marigold test framework (version<br/>\n0.9) at <a rel=\"nofollow\" target=\"_blank\" href=\"http://sourceforge.net/projects/marigold\">http://sourceforge.net/projects/marigold</a> . It<br/>\nappears to be well suited for testing the type of<br/>\napplication you&#39;ve created. <br/>\n<br/>\nBtw, if there is a WSDL available for the web service,<br/>\nyou do not have to create stubs. Follow the example<br/>\nincluded in the Marigold download for your test.<br/>\n<br/>\nCheers,<br/>\nAR<br/>\n<br/>\n--- etl_dan &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:etl_dan@...\">etl_dan@...</a>&gt; wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Hi!<br/>\n&gt; <br/>\n&gt; I&#39;m working on a few projects that will obtain data<br/>\n&gt; from a web service<br/>\n&gt; using JAX-RPC.  To get my feet wet, I&#39;m building a<br/>\n&gt; project that will<br/>\n&gt; get the weather forecast from the NDFDXML web<br/>\n&gt; service at weather.gov<br/>\n&gt; and used Axis to generate a client stub. <br/>\n&gt; (<a rel=\"nofollow\" target=\"_blank\" href=\"http://weather.gov/xml/)\">http://weather.gov/xml/)</a><br/>\n&gt; <br/>\n&gt; I am doing OK so far, but I wondered if someone<br/>\n&gt; would mind checking to<br/>\n&gt; see if I&#39;m going too far or in the wrong direction?<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; My first approach is to have a service POJO that<br/>\n&gt; handles all<br/>\n&gt; communication with the web service via the generated<br/>\n&gt; stub classes and<br/>\n&gt; parses response data into more digestible data<br/>\n&gt; objects.<br/>\n&gt; <br/>\n&gt; Going the test-first route, I started writing tests<br/>\n&gt; for this POJO<br/>\n&gt; service, called NOAAWeatherService.  My first gut<br/>\n&gt; was to write a happy<br/>\n&gt; path test to see that the class correctly passes the<br/>\n&gt; right arguments.<br/>\n&gt;  To do this, I realized that if my web services<br/>\n&gt; consumer object<br/>\n&gt; actually obtained the stub directly, it would be<br/>\n&gt; hard for my tests to<br/>\n&gt; substitute in mocks.  I created a method setProxy()<br/>\n&gt; which allows tests<br/>\n&gt; and a dependency injection container like Spring to<br/>\n&gt; wire it up.  (Here<br/>\n&gt; I pass an object that implements PortType interface<br/>\n&gt; generated by Axis&#39;<br/>\n&gt; WSDL2Java tool)<br/>\n&gt; <br/>\n&gt; My next wince came when I wondered what my mock web<br/>\n&gt; service stub<br/>\n&gt; implementation could return - the NDFDXML web<br/>\n&gt; service at weather.gov<br/>\n&gt; returns their specially prepared XML as a response. <br/>\n&gt; My fake object<br/>\n&gt; would need to return well-formatted XML data that<br/>\n&gt; could be correctly<br/>\n&gt; processe!  So, I decided that this class would have<br/>\n&gt; too many<br/>\n&gt; responsibilities on its own -- communicating with<br/>\n&gt; the web service, and<br/>\n&gt; parsing the XML results.  So I created a setParser()<br/>\n&gt; method which I<br/>\n&gt; could fake for these tests and supply a real parser<br/>\n&gt; for production.<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Am I testing at too high a level here, or is this<br/>\n&gt; the right way to go?<br/>\n&gt;   Based on this test, it seems like I&#39;m not testing<br/>\n&gt; a whole lot -<br/>\n&gt; since the object under test will probably just<br/>\n&gt; delegate to other<br/>\n&gt; objects.<br/>\n&gt; <br/>\n&gt; Thanks for the advice!<br/>\n&gt; <br/>\n&gt; -Dan<br/>\n&gt; --<br/>\n&gt; <br/>\n&gt; <br/>\n&gt;     public void testGetCurrentConditions_HappyPath()<br/>\n&gt; {<br/>\n&gt;         NOAAWeatherService service = new<br/>\n&gt; NOAAWeatherService();<br/>\n&gt;         <br/>\n&gt;         final String webServiceResponse = &quot;Test<br/>\n&gt; string&quot;;<br/>\n&gt;         final double latitude = 30.5d;<br/>\n&gt;         final double longitude = -70.0d;<br/>\n&gt; <br/>\n&gt;         // Set a fake proxy to verify the right<br/>\n&gt; arguments are passed<br/>\n&gt;         service.setProxy(new NdfdXMLStub() {<br/>\n&gt;             // NDFDgen is a weather.gov method to<br/>\n&gt; get forecast data<br/>\n&gt;             public String NDFDgen(BigDecimal<br/>\n&gt; latitude, BigDecimal<br/>\n&gt; longitude, String product, Calendar startTime,<br/>\n&gt; Calendar endTime,<br/>\n&gt; WeatherParametersType weatherParameters) throws<br/>\n&gt; RemoteException {<br/>\n&gt;                 assertEquals(latitude,<br/>\n&gt; latitude.doubleValue(), 0.01);<br/>\n&gt;                 assertEquals(longitude,<br/>\n&gt; longitude.doubleValue(),<br/>\n&gt; 0.01);<br/>\n&gt;                 ...  // Check ?all? the web service<br/>\n&gt; parameters? <br/>\n&gt;                 return webServiceResponse;<br/>\n&gt;             }<br/>\n&gt;         });<br/>\n&gt;         <br/>\n&gt;         // Secondly, create a fake response parser<br/>\n&gt; so<br/>\n&gt;         // our tests don&#39;t have to create valid<br/>\n&gt; XML...<br/>\n&gt;         // we&#39;re just testing that our code is<br/>\n&gt; interacting<br/>\n&gt;         // with the web service correctly...<br/>\n&gt;  <br/>\n&gt;         final WeatherData expected = new<br/>\n&gt; WeatherData();<br/>\n&gt;         service.setNdfdXMLResponseParser(new<br/>\n&gt; NdfdXMLResponseParser() {<br/>\n&gt;             public WeatherData[] parseNdfdGen(String<br/>\n&gt; xml) {<br/>\n&gt;                 assertEquals(webServiceResponse,<br/>\n&gt; xml);<br/>\n&gt;                 WeatherData[] response = new<br/>\n&gt; WeatherData[1];<br/>\n&gt;                 response[0] = expected;<br/>\n&gt;                 return response;<br/>\n&gt;             }<br/>\n&gt;         });<br/>\n&gt;         <br/>\n&gt;         <br/>\n&gt;         assertEquals(expected,<br/>\n&gt; service.getCurrentConditions(latitude,<br/>\n&gt; longitude));<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt;  <br/>\n&gt; Yahoo! Groups Links<br/>\n&gt; <br/>\n&gt; <br/>\n&gt;     <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; <br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n<br/>\n<br/>\n </span></blockquote>__________________________________________________<br/>\nDo You Yahoo!?<br/>\nTired of spam?  Yahoo! Mail has the best spam protection around <br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://mail.yahoo.com\">http://mail.yahoo.com</a></div>", 
    "prevInTime": 13988, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1119292333", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 13981, 
    "headers": {
        "inReplyToHeader": "PGQ5Mm05OStqZm9nQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIwMDUwNjIwMTgzMjE0LjIxNTY1LnFtYWlsQHdlYjUxNDAzLm1haWwueWFob28uY29tPg=="
    }
}