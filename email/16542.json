{
    "numMessagesInTopic": 4, 
    "nextInTime": 16543, 
    "senderId": "H9XVtGWN8-mUimdUCINwwbFeTf3ktzKb2X4yCi-WR8HySdRcYNS8asQP_dgAmQFmMwg_ah561em0zxigiz04ot-ido9fQ53dkFJfeNK7F3nnvbafpw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Newbie question - Testing Applets", 
    "from": "jason r tibbetts &lt;tibbettj@...&gt;", 
    "authorName": "jason r tibbetts", 
    "msgSnippet": "... Two of your three test methods don t test scenarios that would ever exist in the real world. You ll never really put the applet in a JFrame, so toss", 
    "msgId": 16542, 
    "profile": "tibbettj_at_verdi_sra_com", 
    "topicId": 16540, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 224061497, 
    "messageBody": "<div id=\"ygrps-yiv-1344179255\">Anna Skawinska wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; Hi guys,<br/>\n&gt; <br/>\n&gt; The reason I started to learn JUnit and Java in general is that I&#39;ve<br/>\n&gt; just begun my internship and I&#39;m going to write unit tests for an<br/>\n&gt; existing application, developed by &quot;real&quot; programmers :)<br/>\n&gt; <br/>\n&gt; The application I&#39;m going to work on first is a Java applet, so I&#39;ve<br/>\n&gt; focused on finding out how to use JUnit to test them. Having done some<br/>\n&gt; experiments, I&#39;ve tried to find some sample projects to show me if I<br/>\n&gt; just do it the right way, but unfortunately I haven&#39;t found much.<br/>\n&gt; <br/>\n&gt; That&#39;s why I&#39;d be extremely grateful if someone will just take a look<br/>\n&gt; at what I&#39;ve written and tell me if I have the right idea of using<br/>\n&gt; JUnit to test applet-based applications and if I&#39;ll be able to test<br/>\n&gt; real, functional applets this way in the future.<br/>\n<br/>\n </span></blockquote>Two of your three test methods don&#39;t test scenarios that would ever <br/>\nexist in the real world. You&#39;ll never really put the applet in a JFrame, <br/>\nso toss appletNotNull() and frameContentPaneIncludesApplet(). The third <br/>\ntest method, appletComponentsCountOK(), is reasonable, but <br/>\nunderspecified, as it doesn&#39;t test whether the applet&#39;s content pane <br/>\ncontains a JLabel with the name that you gave it.<br/>\n<br/>\nFor real-world applets, you should consider the following:<br/>\n<br/>\n* Refactor the applet so that it&#39;s a thin shell around the content and <br/>\nthe business logic that acts on the content. In other words, create a <br/>\nclass that handles all of the layout, then pass an instance of this <br/>\nclass to the applet&#39;s setContentPane(). This has at least two advantages:<br/>\n1) the standalone component can then be tested using one of the Swing <br/>\ntesting tools, such as JFCUnit, Abbot & Costello, etc.<br/>\n2) the standalone component can be dropped into a JFrame to create a <br/>\nstandalone version of your application. In my experience, it&#39;s much, <br/>\nmuch faster to develop a standalone app than an applet, especially if <br/>\nthat applet has to be deployed to a Web server (as opposed to the <br/>\nappletrunner) in order to confirm your changes. And if deployment of the <br/>\napplet is via a .war or .ear, then your time savings are even greater.<br/>\n<br/>\n* Applets have several getters for external information, and most <br/>\nreal-world applets call one or more of these. These would be difficult, <br/>\nif not impossible, to test without jumping through several hoops. For <br/>\nexample, your test&#39;s before() method may have to do something like this:<br/>\n<br/>\nApplet app = new AppletClass() {<br/>\n<br/>\n   public String getAppletInfo() { return &quot;info&quot;; }<br/>\n<br/>\n   public getAppletContext() { return new CustomAppletContext(); }<br/>\n<br/>\n   public URL getCodeBase() {<br/>\n     try {<br/>\n       return new URL(&quot;file:///my/codebase&quot;);<br/>\n     } catch (MalformedURLException mux) {<br/>\n       return null;<br/>\n   }<br/>\n<br/>\n   // etc.<br/>\n}<br/>\n<br/>\nSome of these, like the ApplicationContext, are rather rich interfaces <br/>\nthat would be a pain in the a$$ to mock out if they have to do anything <br/>\nmeaningful.<br/>\n<br/>\nIt would be much, much easier to factor out the applet logic, per the <br/>\nfirst bullet-point above, into standalone components that can take some <br/>\nof this information in the form of something like properties. For <br/>\nexample, say your (signed) applet needs a URL for connecting to a remote <br/>\ndatabase, and this URL is specified in a &lt;param&gt; tag inside the &lt;applet&gt; <br/>\ntag on the HTML page. The applet&#39;s init() will read the URL from the <br/>\napplet context and pass it to the factored-out code, like so:<br/>\n<br/>\npublic class AppletClass extends JApplet {<br/>\n   public void init() {<br/>\n     String dbUrlStr = getParameter(&quot;db.url&quot;);<br/>\n     JPanel content = new ApplicationPanel(dbUrlStr);<br/>\n     setContentPane(content);<br/>\n   }<br/>\n}<br/>\n<br/>\nA standalone app or a test would get the URL in a different way:<br/>\n<br/>\n@test public void constructAppPanelWithValidUrl() {<br/>\n   String urlStr = &quot;http://my.db.url&quot;;<br/>\n   JPanel content = new ApplicationPanel(dbUrlStr);<br/>\n   // assert that the connection is valid, etc.<br/>\n}<br/>\n<br/>\nThis response has been long enough. I&#39;ll stop now.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; //-----------------------------------------------------------<br/>\n&gt; //  AppletClass.java - simple applet from &quot;Thinking in Java&quot;<br/>\n&gt; //-----------------------------------------------------------<br/>\n&gt; import javax.swing.*;<br/>\n&gt; <br/>\n&gt; public class AppletClass extends JApplet {<br/>\n&gt; \tpublic void init() {<br/>\n&gt;         getContentPane().add(new JLabel(&quot;Applet!&quot;));<br/>\n&gt; \t}<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; //-----------------------------------------------------------<br/>\n&gt; //  AppletClassTest.java - what I&#39;ve written<br/>\n&gt; //-----------------------------------------------------------<br/>\n&gt; <br/>\n&gt; import javax.swing.JApplet;<br/>\n&gt; import junit.framework.JUnit4TestAdapter;<br/>\n&gt; // (and so on...)<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; public class AppletClassTest {<br/>\n&gt; \tJApplet applet;<br/>\n&gt; \tJFrame frame;<br/>\n&gt; \t<br/>\n&gt; \t@Before public void before(){<br/>\n&gt; \t\tapplet = new AppletClass();<br/>\n&gt;         <br/>\n&gt;          frame = new JFrame(&quot;AppletClass!&quot;);<br/>\n&gt;         // To close the application:<br/>\n&gt;         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br/>\n&gt;         frame.getContentPane().add(applet);<br/>\n&gt;         frame.setSize(100,50);<br/>\n&gt;         <br/>\n&gt;         applet.init();<br/>\n&gt;         applet.start();<br/>\n&gt;         <br/>\n&gt; \t}<br/>\n&gt; \t<br/>\n&gt; \t@After public void after(){<br/>\n&gt; \t\tapplet.stop();<br/>\n&gt; \t\tapplet.destroy();<br/>\n&gt; \t}<br/>\n&gt; \t<br/>\n&gt; \t@Test public void appletNotNull(){<br/>\n&gt; \t\tAssert.assertNotNull(&quot;Hey, the applet reference is null!&quot;, applet);\t\t<br/>\n&gt; \t}<br/>\n&gt; \t<br/>\n&gt; \t@Test public void frameContentPaneIncludesApplet(){<br/>\n&gt; \t\tComponent[] tbl = frame.getContentPane().getComponents();\t<br/>\n&gt; \t\tboolean result = false;<br/>\n&gt; \t\t<br/>\n&gt; \t\t//search for the applet<br/>\n&gt; \t\tfor (int i=0; i&lt;tbl.length; i++)<br/>\n&gt; \t\t\tif ( tbl[i].equals(applet) ) {<br/>\n&gt; \t\t\t\tresult=true;<br/>\n&gt; \t\t\t\tbreak;<br/>\n&gt; \t\t\t}<br/>\n&gt; \t\tAssert.assertEquals(true, result);\t\t<br/>\n&gt; \t}<br/>\n&gt; \t<br/>\n&gt; \t@Test public void appletComponentsCountOK(){\t\t<br/>\n&gt; \t\tAssert.assertEquals(1,applet.getContentPane().getComponentCount());\t\t<br/>\n&gt; \t}<br/>\n&gt; \t<br/>\n&gt;     public static junit.framework.Test suite() {<br/>\n&gt;     \t<br/>\n&gt;     \treturn new JUnit4TestAdapter(AppletClassTest.class);<br/>\n&gt;     }\t<br/>\n&gt; } </span></blockquote></div>", 
    "prevInTime": 16541, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1145543759", 
    "canDelete": false, 
    "nextInTopic": 16543, 
    "prevInTopic": 16540, 
    "headers": {
        "inReplyToHeader": "PGUyODB0bSthc202QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQ0NDc5QzRGLjkwNjA4MDJAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "referencesHeader": "PGUyODB0bSthc202QGVHcm91cHMuY29tPg=="
    }
}