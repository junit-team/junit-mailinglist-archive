{
    "topicId": 1308, 
    "postDate": "991352360", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Keith Ray&quot; &lt;keith.ray@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "TQK9OfHYX2rmnCkIyfg7S8coAvtqs9YtzyvEISv5u_jS2AAShgw9gv_h3OgQRDTkRI1gsu3zhDRekYnEZVmC1jQ3UeUUOw", 
    "nextInTime": 1359, 
    "userId": 0, 
    "prevInTime": 1357, 
    "prevInTopic": 1352, 
    "headers": {
        "messageIdInHeader": "PEQ5RjZCOURBQkE0Q0FFNEI5Mjg1MDI1MkM1MjM4M0FCNEY0NzRDQGV4LWVuZy1jb3JwPg=="
    }, 
    "authorName": "Keith Ray", 
    "numMessagesInTopic": 17, 
    "msgSnippet": "(responding to messages quoted below) Using Mock objects helps you write de-coupled code... so instead of hard-coding class A to use and/or create an instance", 
    "contentTrasformed": false, 
    "msgId": 1358, 
    "nextInTopic": 1359, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;Keith.Ray@...&gt;\r\nX-Sender: Keith.Ray@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_1_3); 31 May 2001 23:39:30 -0000\r\nReceived: (qmail 42529 invoked from network); 31 May 2001 23:39:29 -0000\r\nReceived: from unknown (10.1.10.27) by l9.egroups.com with QMQP; 31 May 2001 23:39:29 -0000\r\nReceived: from unknown (HELO FCEXGW02.efi.com) (192.68.228.136) by mta2 with SMTP; 31 May 2001 23:39:28 -0000\r\nReceived: from mail pickup service by FCEXGW02.efi.com with Microsoft SMTPSVC; Thu, 31 May 2001 16:42:08 -0700\r\nReceived: from ex-imc2-corp.efi.com ([10.10.12.116]) by FCEXGW02.efi.com with Microsoft SMTPSVC(5.0.2195.2966); Thu, 31 May 2001 16:42:01 -0700\r\nReceived: by ex-imc2-corp.efi.com with Internet Mail Service (5.5.2653.19) id &lt;L3ZBCQC7&gt;; Thu, 31 May 2001 16:39:21 -0700\r\nMessage-ID: &lt;D9F6B9DABA4CAE4B92850252C52383AB4F474C@ex-eng-corp&gt;\r\nTo: &quot;junit@yahoogroups.com&quot; &lt;junit@yahoogroups.com&gt;\r\nsubject: RE: Method Chains, was Re: Testing private methods\r\nDate: Thu, 31 May 2001 16:39:20 -0700\r\nMIME-Version: 1.0\r\nX-Mailer: Internet Mail Service (5.5.2653.19)\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200\r\nContent-Type: multipart/alternative;\tboundary=&quot;----_=_NextPart_001_01C0EA2A.EA521DB0&quot;\r\nReturn-Path: &lt;Keith.Ray@...&gt;\r\nX-OriginalArrivalTime: 31 May 2001 23:42:01.0531 (UTC) FILETIME=[4A2CB0B0:01C0EA2B]\r\nFrom: &quot;Keith Ray&quot; &lt;keith.ray@...&gt;\r\n\r\n\r\n------_=_NextPart_001_01C0EA2A.EA521DB0\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\n\r\n(responding to messages quoted below)\n\nUsing Mock objects helps you write de-coupled code... so instead of\nhard-coding class A to use and/or create an instance of class B, you code\nclass A to refer to the B object via an interface that class B implements,\nand if A is supposed to create an instance of B, you rewrite class A to make\nit easy to substitute...\n\ninstead of:                            do this:\n-----------                            --------\n1. calling &#39;new B&#39; directly...         call &#39;new B&#39; indirectly.\n\n2. A getting &#39;B&#39; from another class... have &#39;B&#39; passed into your class.\n\nFor an example of 1...\n\noriginal class under test:\npublic class A\n{\n  public f()\n  {\n    b = new B();\n    b.doSomething();\n  }\n}\n\nmodified class under test:\npublic class A\n{\n  public f()\n  {\n    Binterface b = makeBinstance();\n    b.doSomething();\n  }\n  protected Binterface makeBinstance()\n  {\n     return new B();\n  }\n}\nin your test code:\npublic class TestA extends TestCase\n{\n  class MockB extends Binterface\n  {\n    bool myDoSomethingWasCalled = false;\n    public void doSomething()\n    {\n       myDoSomethingWasCalled = true;\n    }\n  }\n  MockB myB;\n  class Aprime extends A\n  {\n    protected Binterface makeBinstance()\n    {\n       myB = new MockB();\n       return myB;\n    }\n  }\n  public testAcallsB() throws Exception\n  {\n    A aUnderTest = new Aprime();\n    aUnderTest.f();\n    assertEquals( true, myB.myDoSomethingWasCalled );\n  }\n  // etc...\n}\n\n-----Original Message-----\nFrom: Matt Caswell &lt;m.caswell@...&gt;\nSubject: RE: Method Chains, was Re: Testing private methods\n\nHow does this work in practice? Do you need to change your ClassLoader to\nload Mock B instead of B? If not how would create a suite of tests - one\nwhich tests real B, and one which tests A using Mock B?\n\nThanks\n\nMatt\n\n-----Original Message-----\nFrom: ghouston@...\nTo: junit@yahoogroups.com\nSent: 30/05/01 20:09\nSubject: [junit] Method Chains, was Re: Testing private methods\n\nIf your method chains are too long, use Mock objects to limit the \ndepth of interaction.\n\nexample...\n\nA calls B, B then calls C,  C then calls E.  E returns to C, C \nreturns to B, B returns to A.\n\nif you want to just test A, then create a Mock of B.  The Mock of B \nwill just validate it was called, and return.  In the test, replace B \nwith Mock B.  So the test looks like...\n\nA calls Mock B, Mock B returns to A\n\nThis way you are only testing A and it&#39;s interaction with B.  It also \nhelps with maintiance of your unit tests.  Without the Mock B, \nanytime C or E changes, you are likely to need to change your test.  \nWith the mock object, the test is no longer dependent of C and E.\n\n- Greg\n\n\r\n------_=_NextPart_001_01C0EA2A.EA521DB0\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2//EN&quot;&gt;\n&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;META HTTP-=\r\nEQUIV=3D&quot;Content-Type&quot; CONTENT=3D&quot;text/html; charset=3Diso-8859-1&quot;&gt;\n&lt;META N=\r\nAME=3D&quot;Generator&quot; CONTENT=3D&quot;MS Exchange Server version 5.5.2653.12&quot;&gt;\n&lt;TITL=\r\nE&gt;RE: Method Chains, was Re: Testing private methods&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&lt;BODY&gt;=\r\n\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;(responding to messages quoted below)&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;=\r\nFONT SIZE=3D2&gt;Using Mock objects helps you write de-coupled code... so inst=\r\nead of hard-coding class A to use and/or create an instance of class B, you=\r\n code class A to refer to the B object via an interface that class B implem=\r\nents, and if A is supposed to create an instance of B, you rewrite class A =\r\nto make it easy to substitute...&lt;/FONT&gt;&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;instead of:&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=\r\nnbsp;&nbsp; do this:&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;-----------&nbsp;&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----=\r\n----&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;1. calling &#39;new B&#39; directly...&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call &#39;new B&#39; indirectly.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P=\r\n&gt;&lt;FONT SIZE=3D2&gt;2. A getting &#39;B&#39; from another class... have &#39;B&#39; passed into=\r\n your class.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;For an example of 1...&lt;/FONT&gt;\n&lt;=\r\n/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;original class under test:&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2=\r\n&gt;public class A&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;{&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp=\r\n; public f()&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&=\r\nnbsp;&nbsp;&nbsp; b =3D new B();&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbs=\r\np; b.doSomething();&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZ=\r\nE=3D2&gt;}&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;modified class under test:&lt;/FONT&gt;\n&lt;B=\r\nR&gt;&lt;FONT SIZE=3D2&gt;public class A&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;{&lt;/FONT&gt;\n&lt;BR&gt;&lt;FON=\r\nT SIZE=3D2&gt;&nbsp; public f()&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; {&lt;/FONT&gt;\n&lt;BR&gt;=\r\n&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp; Binterface b =3D makeBinstance();&lt;/FONT&gt;\n=\r\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp; b.doSomething();&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZ=\r\nE=3D2&gt;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; protected Binterface makeBi=\r\nnstance()&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbs=\r\np;&nbsp;&nbsp;&nbsp; return new B();&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; }&lt;/FO=\r\nNT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;}&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;in your test code:&lt;/FONT=\r\n&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;public class TestA extends TestCase&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT S=\r\nIZE=3D2&gt;{&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; class MockB extends Binterface&lt;/=\r\nFONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nb=\r\nsp; bool myDoSomethingWasCalled =3D false;&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;=\r\n&nbsp;&nbsp; public void doSomething()&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbs=\r\np;&nbsp; {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m=\r\nyDoSomethingWasCalled =3D true;&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp=\r\n; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; Moc=\r\nkB myB;&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; class Aprime extends A&lt;/FONT&gt;\n&lt;BR&gt;=\r\n&lt;FONT SIZE=3D2&gt;&nbsp; {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp; protec=\r\nted Binterface makeBinstance()&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;=\r\n {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myB =3D n=\r\new MockB();&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =\r\nreturn myB;&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT=\r\n SIZE=3D2&gt;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; public testAcallsB() th=\r\nrows Exception&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2=\r\n&gt;&nbsp;&nbsp;&nbsp; A aUnderTest =3D new Aprime();&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D=\r\n2&gt;&nbsp;&nbsp;&nbsp; aUnderTest.f();&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;=\r\n&nbsp; assertEquals( true, myB.myDoSomethingWasCalled );&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT S=\r\nIZE=3D2&gt;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; // etc...&lt;/FONT&gt;\n&lt;BR&gt;&lt;FON=\r\nT SIZE=3D2&gt;}&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;-----Original Message-----&lt;/FON=\r\nT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;From: Matt Caswell &lt;m.caswell@...&gt;&lt;=\r\n/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;Subject: RE: Method Chains, was Re: Testing priva=\r\nte methods&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;How does this work in practice? D=\r\no you need to change your ClassLoader to&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;load Moc=\r\nk B instead of B? If not how would create a suite of tests - one&lt;/FONT&gt;\n&lt;BR=\r\n&gt;&lt;FONT SIZE=3D2&gt;which tests real B, and one which tests A using Mock B?&lt;/FO=\r\nNT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;Thanks&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;Matt&lt;/FON=\r\nT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;-----Original Message-----&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=\r\n=3D2&gt;From: ghouston@...&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;To: junit@yahoogroups=\r\n.com&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;Sent: 30/05/01 20:09&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=\r\n=3D2&gt;Subject: [junit] Method Chains, was Re: Testing private methods&lt;/FONT&gt;=\r\n\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;If your method chains are too long, use Mock objec=\r\nts to limit the &lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;depth of interaction.&lt;/FONT&gt;\n&lt;/P=\r\n&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;example...&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;A calls B, B=\r\n then calls C,&nbsp; C then calls E.&nbsp; E returns to C, C &lt;/FONT&gt;\n&lt;BR&gt;&lt;F=\r\nONT SIZE=3D2&gt;returns to B, B returns to A.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;i=\r\nf you want to just test A, then create a Mock of B.&nbsp; The Mock of B &lt;/F=\r\nONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;will just validate it was called, and return.&nbsp;=\r\n In the test, replace B &lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;with Mock B.&nbsp; So th=\r\ne test looks like...&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;A calls Mock B, Mock B =\r\nreturns to A&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;This way you are only testing A=\r\n and it&#39;s interaction with B.&nbsp; It also &lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;help=\r\ns with maintiance of your unit tests.&nbsp; Without the Mock B, &lt;/FONT&gt;\n&lt;BR=\r\n&gt;&lt;FONT SIZE=3D2&gt;anytime C or E changes, you are likely to need to change yo=\r\nur test.&nbsp; &lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;With the mock object, the test is=\r\n no longer dependent of C and E.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;- Greg&lt;/FON=\r\nT&gt;\n&lt;/P&gt;\n\n&lt;/BODY&gt;\n&lt;/HTML&gt;\r\n------_=_NextPart_001_01C0EA2A.EA521DB0--\r\n\n", 
    "subject": "RE: Method Chains, was Re: Testing private methods"
}