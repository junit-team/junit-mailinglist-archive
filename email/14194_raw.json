{
    "numMessagesInTopic": 1, 
    "nextInTime": 14195, 
    "senderId": "C39gpssIZ0KE-RBJEcQHbhMv0cSTEqJXdwg2OaRbIjE4X1tzmW9ZlzDSWcAA28BiE0QvSde0XmbvzECZK7IiOMVjtLSU", 
    "systemMessage": true, 
    "subject": "already tried to authenticate..., but still receiving: HTTP/1.1 401 Unauthorized", 
    "from": "&quot;Ho-Ki Au&quot; &lt;hoki.au@...&gt;", 
    "authorName": "Ho-Ki Au", 
    "msgSnippet": "I was trying to write some cactus tests to test an ejb which required authentication.  The application server used was jboss-4.0.2, with the tomcat 5 web", 
    "msgId": 14194, 
    "rawEmail": "Return-Path: &lt;hoki.au@...&gt;\r\nReceived: (qmail 59897 invoked from network); 21 Jul 2005 19:34:56 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m32.grp.scd.yahoo.com with QMQP; 21 Jul 2005 19:34:56 -0000\r\nReceived: from unknown (HELO n13a.bulk.scd.yahoo.com) (66.94.237.24)\n  by mta3.grp.scd.yahoo.com with SMTP; 21 Jul 2005 19:34:54 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.6] by n13.bulk.scd.yahoo.com with NNFMP; 21 Jul 2005 19:34:49 -0000\r\nReceived: from [66.218.66.68] by mailer6.bulk.scd.yahoo.com with NNFMP; 21 Jul 2005 19:34:44 -0000\r\nX-Sender: hoki.au@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 96709 invoked from network); 20 Jul 2005 10:23:15 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m23.grp.scd.yahoo.com with QMQP; 20 Jul 2005 10:23:15 -0000\r\nReceived: from unknown (HELO n9a.bulk.scd.yahoo.com) (66.94.237.43)\n  by mta2.grp.scd.yahoo.com with SMTP; 20 Jul 2005 10:23:15 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.1] by n9.bulk.scd.yahoo.com with NNFMP; 20 Jul 2005 10:22:31 -0000\r\nReceived: from [66.218.66.84] by mailer1.bulk.scd.yahoo.com with NNFMP; 20 Jul 2005 10:22:31 -0000\r\nDate: Wed, 20 Jul 2005 10:22:29 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;dbl8l5+n0t1@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 7281\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: &quot;Ho-Ki Au&quot; &lt;hoki.au@...&gt;\r\nSubject: already tried to authenticate..., but still receiving: HTTP/1.1 401 Unauthorized\r\nX-Yahoo-Group-Post: member; u=183475683; y=Ed0sO__OZ2xdFmOLuyN_7HiuPakj2EFfgOthGxOPIirO7Q\r\nX-Yahoo-Profile: sfqb8\r\nX-eGroups-Approved-By: nails762 &lt;jbrains@...&gt; via web; 21 Jul 2005 19:34:41 -0000\r\n\r\nI was trying to write some cactus tests to test an ejb which required\nauthentication.  The application server used was jboss-4.0.2, with the\ntomcat 5 web container.  I followed the instructions documented on the\nofficial cactus web site and created a protected\nServletRedirectorSecure servlet to do it.  When I ran the tests, I got\nan error message like:\n   [cactus]\n-----------------------------------------------------------------\n   [cactus] Running tests against JBoss 4.0.2\n   [cactus]\n-----------------------------------------------------------------\n   [cactus] (httpclient.HttpMethodBase           2543) Already tried\nto authenticate with &#39;localhost:8080&#39; authentication realm at\nlocalhost, but still receiving: HTTP/1.1 401 Unauthorized\n   [cactus] (httpclient.HttpMethodBase           2543) Already tried\nto authenticate with &#39;localhost:8080&#39; authentication realm at\nlocalhost, but still receiving: HTTP/1.1 401 Unauthorized\n   [cactus] Testsuite: com.saybot.directory.DirectoryTest\n   [cactus] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0.251 sec\n   [cactus]\n   [cactus] Testcase: testBasicAuthentication took 0.2 sec\n   [cactus]    Caused an ERROR\n   [cactus] Failed to get the test results at\n[http://localhost:8080/directory/ServletRedirectorSecure]\n   [cactus] org.apache.cactus.util.ChainedRuntimeException: Failed to\nget the test results at\n[http://localhost:8080/directory/ServletRedirectorSecure]\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody0(DefaultHttpClient.java:92)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody1$advice(DefaultHttpClient.java:306)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest(DefaultHttpClient.java)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runWebTest(HttpProtocolHandler.java:159)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody0(HttpProtocolHandler.java:80)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody1$advice(HttpProtocolHandler.java:306)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest(HttpProtocolHandler.java)\n   [cactus]    at\norg.apache.cactus.internal.client.ClientTestCaseCaller.runTest(ClientTestCaseCaller.java:144)\n   [cactus]    at\norg.apache.cactus.internal.AbstractCactusTestCase.runBareClient(AbstractCactusTestCase.java:215)\n   [cactus]    at\norg.apache.cactus.internal.AbstractCactusTestCase.runBare(AbstractCactusTestCase.java:133)\n   [cactus] org.apache.cactus.internal.client.ParsingException: Not a\nvalid response [401 Unauthorized]\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.callGetResult(DefaultHttpClient.java:211)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody0(DefaultHttpClient.java:87)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody1$advice(DefaultHttpClient.java:306)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest(DefaultHttpClient.java)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runWebTest(HttpProtocolHandler.java:159)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody0(HttpProtocolHandler.java:80)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody1$advice(HttpProtocolHandler.java:306)\n   [cactus]    at\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest(HttpProtocolHandler.java)\n   [cactus]    at\norg.apache.cactus.internal.client.ClientTestCaseCaller.runTest(ClientTestCaseCaller.java:144)\n   [cactus]    at\norg.apache.cactus.internal.AbstractCactusTestCase.runBareClient(AbstractCactusTestCase.java:215)\n   [cactus]    at\norg.apache.cactus.internal.AbstractCactusTestCase.runBare(AbstractCactusTestCase.java:133)\n   [cactus]\n   [cactus] Testcase: testBasicAuthentication\n\nThat was when I used maven to run the test.  I got the same error when\nI ran java\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner from shell.\n\nMy web.xml was like:\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web\nApplication 2.3//EN&quot;\n                        &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;&gt;\n&lt;web-app&gt;\n   &lt;filter&gt;\n       &lt;filter-name&gt;FilterRedirector&lt;/filter-name&gt;\n      \n&lt;filter-class&gt;org.apache.cactus.server.FilterTestRedirector&lt;/filter-class&gt;\n   &lt;/filter&gt;\n   &lt;filter-mapping&gt;\n       &lt;filter-name&gt;FilterRedirector&lt;/filter-name&gt;\n       &lt;url-pattern&gt;/test/filterRedirector.jsp&lt;/url-pattern&gt;\n   &lt;/filter-mapping&gt;\n   &lt;servlet&gt;\n       &lt;servlet-name&gt;ServletRedirector&lt;/servlet-name&gt;\n      \n&lt;servlet-class&gt;org.apache.cactus.server.ServletTestRedirector&lt;/servlet-class&gt;\n   &lt;/servlet&gt;\n   &lt;servlet&gt;\n       &lt;servlet-name&gt;SerletRedirectorSecure&lt;/servlet-name&gt;\n      \n&lt;servlet-class&gt;org.apache.cactus.server.ServletTestRedirector&lt;/servlet-class&gt;\n   &lt;/servlet&gt;\n   &lt;servlet&gt;\n       &lt;servlet-name&gt;JspRedirector&lt;/servlet-name&gt;\n       &lt;jsp-file&gt;/jspRedirector.jsp&lt;/jsp-file&gt;\n   &lt;/servlet&gt;\n   &lt;servlet-mapping&gt;\n       &lt;servlet-name&gt;ServletRedirector&lt;/servlet-name&gt;\n       &lt;url-pattern&gt;/ServletRedirector&lt;/url-pattern&gt;\n   &lt;/servlet-mapping&gt;\n   &lt;servlet-mapping&gt;\n       &lt;servlet-name&gt;SerletRedirectorSecure&lt;/servlet-name&gt;\n       &lt;url-pattern&gt;/ServletRedirectorSecure&lt;/url-pattern&gt;\n   &lt;/servlet-mapping&gt;\n   &lt;servlet-mapping&gt;\n       &lt;servlet-name&gt;JspRedirector&lt;/servlet-name&gt;\n       &lt;url-pattern&gt;/JspRedirector&lt;/url-pattern&gt;\n   &lt;/servlet-mapping&gt;\n   &lt;security-constraint&gt;\n       &lt;web-resource-collection&gt;\n           &lt;web-resource-name&gt;Cactus Test Redirector&lt;/web-resource-name&gt;\n           &lt;url-pattern&gt;/ServletRedirectorSecure&lt;/url-pattern&gt;\n       &lt;/web-resource-collection&gt;\n       &lt;auth-constraint&gt;\n           &lt;role-name&gt;User&lt;/role-name&gt;\n       &lt;/auth-constraint&gt;\n   &lt;/security-constraint&gt;\n   &lt;login-config&gt;\n       &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n   &lt;/login-config&gt;\n   &lt;security-role&gt;\n       &lt;role-name&gt;User&lt;/role-name&gt;\n   &lt;/security-role&gt;\n&lt;/web-app&gt;\n\nmy test was just to test if I could get the principal in the test.  It\ndidn&#39;t even call any ejb:\n   public void beginBasicAuthentication(WebRequest request) {\n       request.setRedirectorName(&quot;ServletRedirectorSecure&quot;);\n       request.setAuthentication(new BasicAuthentication(&quot;tester1&quot;,\n       &quot;tester1&quot;));\n   }\n\n   public void testBasicAuthentication() {\n       assertEquals(&quot;tester1&quot;, request.getUserPrincipal().getName());\n       assertEquals(&quot;tester1&quot;, request.getRemoteUser());\n       assertTrue(request.isUserInRole(&quot;User&quot;));\n   }\n\nThe server-side test log didn&#39;t show any error.  Can someone help me\nwith this please?\n\nWhen I used a browser to go to url\nhttp://localhost:8080/directory/ServletRedirectorSecure?Cactus_Service=RUN_TEST\nit popped up a dialog to ask me for username and password.  I entered\n&quot;tester1&quot;, &quot;tester1&quot;, and it went to a blank page.  So that was\ncorrect.  It didn&#39;t show me 401 error.\n\nYour help is much appreciated.\n\n--\n-hoki\n\n\n\n\n\n", 
    "profile": "sfqb8", 
    "topicId": 14194, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 183475683, 
    "prevInTime": 14193, 
    "contentTrasformed": false, 
    "postDate": "1121854949", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGRibDhsNStuMHQxQGVHcm91cHMuY29tPg=="
    }
}