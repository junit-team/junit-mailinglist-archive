{
    "numMessagesInTopic": 8, 
    "nextInTime": 19935, 
    "senderId": "yGSrxu4DggOOL_TCiAw_OUB5tejyjFzUTkGgG_5uudBtd6HjW7E_CKS1xzuOL97-emh3rNUwqrQEjzzAcG8BeKWlGaLZb78N4oAzY_n0rYY", 
    "systemMessage": false, 
    "subject": "Re: [junit] Test Dependencies", 
    "from": "Stephen Smith &lt;steve@...&gt;", 
    "authorName": "Stephen Smith", 
    "msgSnippet": "Hi Arash, Let s get back to your original point of the problem is fetching the data from db is complicated and these tests I am talking about is to test the", 
    "msgId": 19934, 
    "topicId": 19923, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 231973488, 
    "messageBody": "<div id=\"ygrps-yiv-449892690\">Hi Arash,<br/>\n<br/>\nLet&#39;s get back to your original point of &quot;the problem is fetching the data from db is complicated and these tests I am <br/>\ntalking about is to test the overall functionality of the system and also test the hibernate DAO objects; that&#39;s why I <br/>\nprefer to use the database data to run the test&quot;. You&#39;re talking about two different things. Firstly, why is fetching <br/>\nthe data complicated? Stored procedures or referential integrity rules enforced at the RDBMS level? I would argue such <br/>\ninternal database logic is not the concern of your unit tests.<br/>\n<br/>\nIf tests take a long time to run, that&#39;s a smell to me. If a test takes more than one second to run, it puts me off <br/>\nrunning it as frequently as I should. I advocate testing how you use third party APIs, not the APIs themselves... so in <br/>\nthe case of Hibernate I would have mocked tests asserting the calls to Hibernate, and tests checking my HBM file to <br/>\nverify how I have configured Hibernate.<br/>\n<br/>\nYou can use a mocking API such as JMock2 (www.jmock.org) to test the _behaviour_ of your DAO rather than its _state_, <br/>\ni.e. &quot;is the expected SQL query sent to the database with all the correct parameters?&quot; or &quot;are the expected calls made <br/>\nto Hibernate in the right order?&quot; My DAO would use the Dependency Injection pattern to provide a Hibernate <br/>\nSessionFactory interface.<br/>\n<br/>\npublic interface MyDAO {<br/>\n   public void setSessionFactory(SessionFactory sessionFactory);<br/>\n   public MyPOJO querySomething();<br/>\n   public void updateSomething();<br/>\n   public void deleteSomething();<br/>\n}<br/>\n<br/>\nThis allows for a mock implementation of SessionFactory in your tests, and the &quot;real&quot; implementation of SessionFactory <br/>\nin your production code. My tests would then assert that the expected Hibernate method calls are made and/or the <br/>\nexpected SQL is sent to the RDBMS.... and the tests would be much quicker (no external resources to hit) and be much <br/>\neasier to read (no need for complicated setup/teardown code).<br/>\n<br/>\nYou also referred to testing the overall functionality of the system - I would say that is beyond the scope of a unit <br/>\ntest, and that mocking is less applicable in those circumstances.<br/>\n<br/>\nCheers<br/>\n<br/>\nSteve<br/>\n<br/>\n---<br/>\nStephen Smith, MEng (Wales).<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.stephen-smith.co.uk/\">http://www.stephen-smith.co.uk/</a><br/>\n<br/>\nArash Bizhan zadeh wrote:<br/>\n<blockquote><span title=\"qreply\"> &gt; <br/>\n&gt; <br/>\n&gt; You are right. The tests takes a long while to run and is really<br/>\n&gt; frustrating, but I could not come up with a solution.<br/>\n&gt; <br/>\n&gt; Maybe I am missing something here. The logic in the database is rather<br/>\n&gt; complicated and the accuracy of queries is one of the most important thing<br/>\n&gt; in the application. Now my question is how can I mock hibernate in a way<br/>\n&gt; that to test accuracy of my query? I would appreciate any advise here.<br/>\n&gt; <br/>\n&gt; Regards,<br/>\n&gt; Arash<br/>\n&gt; <br/>\n&gt; On 9/28/07, Stephen Smith &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:steve@...\">steve@...</a> <br/>\n&gt; &lt;mailto:steve%40stephen-smith.co.uk&gt;&gt; wrote:<br/>\n&gt;  &gt;<br/>\n&gt;  &gt; Hi,<br/>\n&gt;  &gt;<br/>\n&gt;  &gt; I consider myself more of a mockist TDD practitioner than a classicist<br/>\n&gt;  &gt; these days - I would strongly advocate mocking to<br/>\n&gt;  &gt; keep your tests fast and simple. Why test a third party application such<br/>\n&gt;  &gt; as Hibernate? That&#39;s not your job, surely?<br/>\n&gt;  &gt;<br/>\n&gt;  &gt; If you want to test your classes which use Hibernate, mock the actual<br/>\n&gt;  &gt; Hibernate classes within your code and write some<br/>\n&gt;  &gt; behaviour driven tests, e.g. &quot;my fetch method calls Hibernate with this<br/>\n&gt;  &gt; HQL&quot;. That way you ensure you&#39;re using Hibernate<br/>\n&gt;  &gt; in the right way.<br/>\n&gt;  &gt;<br/>\n&gt;  &gt; I&#39;d also advocate writing tests against your Hibernate config... test<br/>\n&gt;  &gt; _how_ you use a third party application like<br/>\n&gt;  &gt; Spring or Hibernate, but not the third party application itself.<br/>\n&gt;  &gt;<br/>\n&gt;  &gt; S<br/>\n&gt;  &gt;<br/>\n&gt;  &gt; ---<br/>\n&gt;  &gt; Stephen Smith, MEng (Wales).<br/>\n&gt;  &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.stephen-smith.co.uk/\">http://www.stephen-smith.co.uk/</a> &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.stephen-smith.co.uk/\">http://www.stephen-smith.co.uk/</a>&gt;<br/>\n&gt;  &gt;<br/>\n&gt;  &gt; Arash Bizhan zadeh wrote:<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt; Hi,<br/>\n&gt;  &gt; &gt; I understand that using of mock object is ideal, but the problem is<br/>\n&gt;  &gt; fetching<br/>\n&gt;  &gt; &gt; the data from db is complicated and these tests I am talking about <br/>\n&gt; is to<br/>\n&gt;  &gt; &gt; test the overall functionality of the system and also test the <br/>\n&gt; hibernate<br/>\n&gt;  &gt; DAO<br/>\n&gt;  &gt; &gt; objects; that&#39;s why I prefer to use the database data to run the test.<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt; Regards,<br/>\n&gt;  &gt; &gt; Arash<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt; On 9/25/07, Ilya Zelker &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:i.zelker@...\">i.zelker@...</a> <br/>\n&gt; &lt;mailto:i.zelker%40gtisoft.com&gt; &lt;i.zelker%40gtisoft.com&gt;<br/>\n&gt;  &gt; &gt; &lt;mailto:i.zelker% &lt;i.zelker%25&gt;40gtisoft.com&gt;&gt; wrote:<br/>\n&gt;  &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt; One solution to consider is to use &quot;mock&quot; objects. You can try one of<br/>\n&gt;  &gt; &gt; &gt; the mocking frameworks, i.e jmock.<br/>\n&gt;  &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt; Ilya<br/>\n&gt;  &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt; Arash Bijanzadeh wrote:<br/>\n&gt;  &gt; &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt; &gt; I have a problem with the test dependencies. The application is a<br/>\n&gt;  &gt; &gt; &gt; &gt; database backed application and I want to test the db <br/>\n&gt; functionality.<br/>\n&gt;  &gt; &gt; &gt; &gt; For this purpose, first thing to be done is database populating<br/>\n&gt;  &gt; which<br/>\n&gt;  &gt; &gt; &gt; &gt; itself is a test suite. Is there any way to specify the order or<br/>\n&gt;  &gt; tests<br/>\n&gt;  &gt; &gt; &gt; &gt; in Junit? Or any other solution which suits this kind of scenarios?<br/>\n&gt;  &gt; &gt; &gt; &gt; Thanks in advance,<br/>\n&gt;  &gt; &gt; &gt; &gt; Arash<br/>\n&gt;  &gt; &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt;  &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt; &gt;<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt; --<br/>\n&gt;  &gt; &gt; You can not depend on your eyes when your imagination is out of focus.<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt; ----------------------------------------------------------<br/>\n&gt;  &gt; &gt;<br/>\n&gt;  &gt; &gt; No virus found in this incoming message.<br/>\n&gt;  &gt; &gt; Checked by AVG Free Edition.<br/>\n&gt;  &gt; &gt; Version: 7.5.488 / Virus Database: 269.13.30/1025 - Release Date:<br/>\n&gt;  &gt; 23/09/2007 13:53<br/>\n&gt;  &gt;<br/>\n&gt;  &gt;<br/>\n&gt; <br/>\n&gt; -- <br/>\n&gt; You can not depend on your eyes when your imagination is out of focus.<br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ------------------------------------------------------------------------<br/>\n&gt; <br/>\n&gt; No virus found in this incoming message.<br/>\n&gt; Checked by AVG Free Edition. <br/>\n&gt; Version: 7.5.488 / Virus Database: 269.13.33/1036 - Release Date: 28/09/2007 15:40 </span></blockquote></div>", 
    "prevInTime": 19933, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1191087010", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 19933, 
    "headers": {
        "inReplyToHeader": "PDI4NTZiMjlkMDcwOTI4MjExMnAzYzY1ZWVmMnM1MzczNmU4Zjg0YmRmNzkzQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDQ2RkU4QkEyLjUwMDAzMDdAc3RlcGhlbi1zbWl0aC5jby51az4=", 
        "referencesHeader": "PGZkYmpnYit2aXY3QGVHcm91cHMuY29tPgkgPGUwZjdhODI1YjVjYjVkMTg0M2NhZGNlYWRhMjZkZmJhNDZmOTgwZmJAMTkyLjE2OC4xMDAuMTU+CSA8Mjg1NmIyOWQwNzA5MjYwNzE4ajM1NmNhY2U2bWZjNzVjNjkwN2E0NzVlM2JAbWFpbC5nbWFpbC5jb20+CSA8NDZGQ0E0NjkuODAxMDRAc3RlcGhlbi1zbWl0aC5jby51az4gPDI4NTZiMjlkMDcwOTI4MjExMnAzYzY1ZWVmMnM1MzczNmU4Zjg0YmRmNzkzQG1haWwuZ21haWwuY29tPg=="
    }
}