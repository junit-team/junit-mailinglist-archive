{
    "numMessagesInTopic": 7, 
    "nextInTime": 7482, 
    "senderId": "uBAxhA3glbCrSDyoPgsHNVznHoV4lA8rfSz2ktZLJ-YUugpEfZrWVcXtH_RAwZ4J0G-SjczmpEY", 
    "systemMessage": false, 
    "subject": "Re: [junit] Factory adaptor approach", 
    "from": "john.link@...", 
    "authorName": "john.link@gmx.net", 
    "msgSnippet": "... I would only go down this road if no other option seems to be feasible. I ve never had to mock out a singleton for testing during the last two years. I ", 
    "msgId": 7481, 
    "profile": "jlinkyh", 
    "topicId": 7358, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 34183400, 
    "messageBody": "<div id=\"ygrps-yiv-2045703984\"><blockquote><span title=\"ireply\">&gt; &gt; My concern is twofold:<br/>\n&gt; &gt; a) You bring testing logic into your production code. It&#39;s reasonable<br/>\n&gt; &gt; to change your design to make it more testable but weaving testing<br/>\n&gt; &gt; *logic* into production code feels strange to me.<br/>\n&gt; <br/>\n&gt; A good point.  What do you think about the comment at the end, whereby<br/>\n&gt; the factory would have only three static methods:<br/>\n&gt; <br/>\n&gt; public Factory getInstance();<br/>\n&gt; protected void setOverrideFactory(Factory testFactory);<br/>\n&gt; protected void clearOverrideFactory();<br/>\n&gt; <br/>\n&gt; This should limit the test specific code to the getInstance method,<br/>\n<br/>\n </span></blockquote>I would only go down this road if no other option seems to be feasible. I&#39;ve<br/>\nnever had to mock out a singleton for testing during the last two years. I<br/>\nmade it a rule to always hand in the factory to the object which needs it.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; b) Having more than just one or two of those static factories raises<br/>\n&gt; &gt; chances to forget about initializing all override values in setUp and<br/>\n&gt; &gt; clearing them again in tearDown.<br/>\n&gt; <br/>\n&gt; I agree, a &quot;code smell&quot; is too many factories.  Two or three is a good<br/>\n&gt; threshold number, I think.<br/>\n<br/>\n </span></blockquote>IMO the problem is not in the factories but in the *static* factories, i.e.<br/>\nsingletons. If you really need a singleton try to live with a single one<br/>\n(PNI) which then might be the access point to several &quot;global&quot; objects. And make<br/>\nvery very sure that your global objects are read-only.<br/>\n<br/>\nJohannes<br/>\n<br/>\n-- <br/>\n+++ GMX - Mail, Messaging & more  <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.gmx.net\">http://www.gmx.net</a> +++<br/>\nBitte l√§cheln! Fotogalerie online mit GMX ohne eigene Homepage!</div>", 
    "prevInTime": 7480, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1049356420", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 7450, 
    "headers": {
        "messageIdInHeader": "PDY5ODUuMTA0OTM1NjQyMEB3d3c0OS5nbXgubmV0Pg==", 
        "referencesHeader": "PDIwMDMwNDAyMTczNDQ1LjE0MDE1LnFtYWlsQHdlYjgwNDA1Lm1haWwueWFob28uY29tPg=="
    }
}