{
    "numMessagesInTopic": 12, 
    "nextInTime": 22366, 
    "senderId": "WUt5f0KLvD0AV9mshCUE8oczTrIWQT22lQW3yRq3TQPpe85QtyXFwSI14Ta12eGSqZWE69W0QaScemjaJp0MMISzAehGKM8oTn7oSg_WUpKEF_-TgmYQ", 
    "systemMessage": false, 
    "subject": "Theories Usability", 
    "from": "&quot;Loritsch, Berin C.&quot; &lt;berin.loritsch@...&gt;", 
    "authorName": "Loritsch, Berin C.", 
    "msgSnippet": "Thanks everyone for helping me work through the testing challenge I wanted to address.  I ve written a rudimentary ClassCollector that lets me specify a base", 
    "msgId": 22365, 
    "rawEmail": "Return-Path: &lt;prvs=1646670307=berin.loritsch@...&gt;\r\nX-Sender: prvs=1646670307=berin.loritsch@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 76590 invoked from network); 5 Feb 2010 20:27:18 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m3.grp.sp2.yahoo.com with QMQP; 5 Feb 2010 20:27:18 -0000\r\nX-Received: from unknown (HELO mnbm01-relay1.mnb.gd-ais.com) (137.100.120.43)\n  by mta2.grp.sp2.yahoo.com with SMTP; 5 Feb 2010 20:27:18 -0000\r\nX-Received: from ([160.207.224.15])\n\tby mnbm01-relay1.mnb.gd-ais.com with SMTP  id 5202712.244331631;\n\tFri, 05 Feb 2010 14:27:02 -0600\r\nX-Received: from vaff01-mail01.ad.gd-ais.com ([10.13.13.20]) by mnbm01-fes01.ad.gd-ais.com with Microsoft SMTPSVC(6.0.3790.3959);\n\t Fri, 5 Feb 2010 14:27:02 -0600\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nDate: Fri, 5 Feb 2010 15:27:01 -0500\r\nMessage-ID: &lt;75F5ED8A5A553646A46E00E6EC854FA30378C76B@...-ais.com&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: Theories Usability\r\nThread-Index: AcqmoZKmOFBi32mWShya+sE0Yc7erA==\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReturn-Path: Berin.Loritsch@...\r\nX-OriginalArrivalTime: 05 Feb 2010 20:27:02.0361 (UTC) FILETIME=[933C0490:01CAA6A1]\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Loritsch, Berin C.&quot; &lt;berin.loritsch@...&gt;\r\nSubject: Theories Usability\r\nX-Yahoo-Group-Post: member; u=428096731; y=J9xTWyYRF8TANH9dkHQJL0W5alE_9xw1zPteP5NJHu5AJJnM\r\nX-Yahoo-Profile: bloritsch\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nThanks everyone for helping me work through the testing challenge I wanted to address.  I&#39;ve written a rudimentary ClassCollector that lets me specify a base package, what base classes I need, any annotations I need applied, etc.  I supplimented that with a BeanAttributes class that will collect all the attributes (setters/getters) on the class.  It&#39;s working very well.  Unfortunately, there are a few shortcomings with this approach:\n\n1. I cannot easily determine what the actual data point combination was that caused the failure.  I have to write those values out to System.out because the test failure does not do that for me.\n\n2. It stops on the very first failure, hiding many more failures that may still be lurking beneath the service.\n\n3. The theory is the only line shown in the test report, so there is no way to differentiate runs which would handle the above concerns.\n\nWhat I would really like to see is that a new test name for each combination of data points.  For example if you had a @Theory named &quot;checkAddWorks&quot; that took two parameters and the data points [1,2] then I&#39;d like to see a set of test names that look like this in the test report:\n\ncheckAddWorks(1,1)\ncheckAddWorks(1,2)\ncheckAddWorks(2,2)\n\nThat will address all of the shortcomings I identified.\n\nMy code looks like this:\n\n@RunWith(Theories.class)\nclass TestMyTrackableContract {\n    @DataPoints\n    BeanAttribute[] collectAllAttributesToTest() {\n        ClassCollector collector = new ClassCollector();\n        collector.within(&quot;com.mycompany.incident.model&quot;).assignableTo(Trackable.class);\n        Collection&lt;Class&lt;?&gt;&gt; matchedClasses = collector.recurse().collect();\n\n        List&lt;BeanAttribute&gt; attributes = new ArrayList&lt;BeanAttribute&gt;();\n\t\t\n        for (Class&lt;?&gt; trackable : matchedClasses) {\n            attributes.addAll(BeanAttribute.collectFrom(trackable));\n        }\n\t\t\n        return attributes.toArray(new BeanAttribute[attributes.size()]);\n    }\n\n    @Theory\n    public void checkSideEffectsOnAssign() throws Exception {\n        // This is designed to ensure that setters/getters work in concert\n        // and that setters set the appropriate message is sent\n        if ( ! beanAttribute.hasSetter() || ! beanAttribute.hasGetter() ) return;\n        beanAttribute.assertBalanced();\n\n        Trackable entity = beanAttribute.getEntityAs(Trackable.class);\n        // Unfortunately needed to determine when things go bad\n        System.out.format(&quot;Testing %s&#92;n&quot;, beanAttribute);\n\t\t\n        Object original = beanAttribute.getValue();\n        Object testValue = beanAttribute.generateTestValue(original);\n\t\t\n        // Ensure the setter works as expected\n        beanAttribute.setValue(testValue);\n        assertEquals(testValue, beanAttribute.getValue());\n\t\t\n        // Ensure properties are set and events were properly\n        Properties changes = entity.getChanges();\n        assertEquals( String.valueOf(testValue),\n            changes.getProperty(beanAttribute.getAttribute()));\n        assertEquals( String.valueOf(original),\n            changes.getProperty(beanAttribute.getAttribute() + &quot;.old&quot;));\n    }\n}\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "bloritsch", 
    "topicId": 22365, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 428096731, 
    "prevInTime": 22364, 
    "contentTrasformed": false, 
    "postDate": "1265401621", 
    "canDelete": false, 
    "nextInTopic": 22376, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NkJAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg=="
    }
}