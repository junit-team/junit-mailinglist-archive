{
    "numMessagesInTopic": 32, 
    "nextInTime": 16231, 
    "senderId": "g1lJXLfOrdxWdfPpRuaDQyKz8d0WmyVSRNIzG-nDEGLr-zd7iyqugy3Mv-RChH3e4I-q3HYRXCoP4pyTjAbpwGMxD-4NYw", 
    "systemMessage": true, 
    "subject": "Re: [junit] JUnit Anti-patterns", 
    "from": "Joe Schmetzer &lt;joe@...&gt;", 
    "authorName": "Joe Schmetzer", 
    "msgSnippet": "... Hmmmm... I understand the distinction, but personally I find that sticking to this rule in the case of unexpected exceptions makes it *harder* to figure", 
    "msgId": 16230, 
    "profile": "copabella", 
    "topicId": 16150, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 238072118, 
    "messageBody": "<div id=\"ygrps-yiv-990414067\">On Fri, 2006-02-24 at 11:09 -0500, jason r tibbetts wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; Joe Schmetzer wrote:<br/>\n&gt; &gt; &quot;CÃ©dric Beust â™&quot; &quot; &lt;cbeust@...&gt; wrote:<br/>\n&gt; &gt;&gt;Joe Schmetzer wrote:<br/>\n&gt; &gt;&gt;&gt;I&#39;ve just updated the JUnit Anti-patterns page I maintain at<br/>\n&gt; &gt;&gt;&gt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.exubero.com/junit/antipatterns.html.\">http://www.exubero.com/junit/antipatterns.html.</a> I&#39;d be interested in<br/>\n&gt; &gt;&gt;&gt;any feedback, if people want to suggest additions or improvements.<br/>\n&gt;&gt;&gt;<br/>\n&gt; &gt;&gt;Also, it seems to me your recommended pattern for code that must<br/>\n&gt; &gt; throw an<br/>\n&gt; &gt; <br/>\n&gt; &gt;&gt;exception (&quot;don&#39;t catch it and declare the exception in the throws<br/>\n&gt; &gt;&gt;statement&quot;) goes against common practice.  Plus, it will cause JUnit to<br/>\n&gt; &gt;&gt;report an Error instead of a Failure, although this distinction is<br/>\n&gt; &gt;&gt;thankfully going away with JUnit4.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;A more common way to address this problem is to catch the exception<br/>\n&gt; &gt; and do a fail().<br/>\n&gt; &gt; <br/>\n&gt; &gt; Hi Cédric,<br/>\n&gt; &gt; <br/>\n&gt; &gt; I would argue that explicitly calling fail is less useful than<br/>\n&gt; &gt; propagating the exception outside of the test method, mainly because<br/>\n&gt; &gt; the stack trace is lost. I&#39;ve been caught a number of times myself<br/>\n&gt; &gt; when a test failed because of an unexpected exception, but it was<br/>\n&gt; &gt; non-trivial to track down the line that caused the exception. The<br/>\n&gt; &gt; stack trace will show this information directly, any good JUnit test<br/>\n&gt; &gt; runners will display the stack trace. IDEs will even take you to the<br/>\n&gt; &gt; line of code, as well.<br/>\n&gt; <br/>\n&gt; I agree completely with Cedric. Failures and errors are intended to be <br/>\n&gt; very different beasts, and this difference is highlighted in various <br/>\n&gt; test result reporting tools (e.g. Maven&#39;s test result page, <br/>\n&gt; CruiseControl&#39;s listing, etc.). Failures indicate a problem with the <br/>\n&gt; class under test; errors indicate a problem with the test itself. That <br/>\n&gt; makes it a lot easier to figure out what needs to be fixed.<br/>\n<br/>\n </span></blockquote>Hmmmm... I understand the distinction, but personally I find that<br/>\nsticking to this rule in the case of unexpected exceptions makes it<br/>\n*harder* to figure out what needs to be fixed.<br/>\n<br/>\nIn the case of unexpected exceptions, we&#39;re not really interested in the<br/>\nfact that a piece of code *might* throw an exception, but rather that a<br/>\ncall produces an expected result. For example:<br/>\n<br/>\npublic void testCalculation() throws CalculationException {<br/>\n    processer.calculate();<br/>\n    assertEquals(&quot;Calculation wrong&quot;, 42, processor.getResult());<br/>\n}<br/>\n<br/>\nIn this example, I&#39;m not really interested that the calculate() method<br/>\nmight throw an exception, I&#39;m only testing the result for this test<br/>\ncase. However, if something does go wrong, JUnit will very elegantly<br/>\nhandle the exception and report the exact location of the source of the<br/>\nexception. CruiseControl will display the entire stack trace. Eclipse<br/>\nwill even let me click on the JUnit view to bring up the exact source<br/>\ncode (I imagine other IDEs are the same?). This is exactly what I want,<br/>\nas it helps me get to the source of the problem without any extra<br/>\neffort.<br/>\n<br/>\nHowever, if I insist on catching the exception just so I can fail the<br/>\nunit test, the test becomes twice as complex, and I no longer get the<br/>\nstack trace unless I explicitly log it somewhere. The above example now<br/>\nbecomes:<br/>\n<br/>\npublic void testCalculation() {<br/>\n    try {<br/>\n        processer.calculate();<br/>\n        assertEquals(&quot;Calculation wrong&quot;, 42, processor.getResult());<br/>\n    }<br/>\n    catch(CalculationException ex) {<br/>\n        fail(&quot;Calculation caused exception&quot;);<br/>\n    }<br/>\n}<br/>\n<br/>\nIn this case, CruiseControl no longer shows the stack trace, and Eclipse<br/>\ncannot take me to the code that caused the exception. I now have to do<br/>\nextra work to track down the problem. Even if I do log the exception<br/>\nsomewhere, it won&#39;t appear in the usual places in the various JUnit<br/>\nreporting utilities.<br/>\n<br/>\nOK, one last appeal: I&#39;m going to try calling to a higher authority (hi<br/>\nMike), and quote the FAQ:<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://junit.sourceforge.net/doc/faq/faq.htm#tests_8\">http://junit.sourceforge.net/doc/faq/faq.htm#tests_8</a><br/>\n<br/>\nThis is essentially the same advice I give in the anti-patterns article<br/>\nat<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.exubero.com/junit/antipatterns.html#Catching_Unexpected_Exceptions\">http://www.exubero.com/junit/antipatterns.html#Catching_Unexpected_Exceptions</a><br/>\n<br/>\nIn summary, I guess I&#39;m less interested in the distinction in whether<br/>\nthe test case is wrong, or the code under test is wrong. Rather, I&#39;m<br/>\nconcerned that *something* is wrong, and I want to fix it as quick as<br/>\npossible.<br/>\n<br/>\nAnyway... I&#39;ve got a lot of really good feedback out of this thread. I&#39;m<br/>\ngoing to start trying to update the article again. Thanks, everyone.<br/>\n<br/>\nCheers!<br/>\n-- <br/>\nJoe Schmetzer .:. Renaissance Developer .:. <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.exubero.com/\">http://www.exubero.com/</a></div>", 
    "prevInTime": 16229, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1140815704", 
    "canDelete": false, 
    "nextInTopic": 16241, 
    "prevInTopic": 16228, 
    "headers": {
        "inReplyToHeader": "PDQzRkYyRkJFLjYwMDA3MDJAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "messageIdInHeader": "PDExNDA4MTU3MDQuMTI2NzMuMTEyLmNhbWVsQHNpcml1cz4=", 
        "referencesHeader": "PGR0aWc2bSs1ODdlQGVHcm91cHMuY29tPiAgPDQzRkYyRkJFLjYwMDA3MDJAdmVyZGkuaWlzZC5zcmEuY29tPg=="
    }
}