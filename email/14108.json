{
    "numMessagesInTopic": 9, 
    "nextInTime": 14109, 
    "senderId": "zJEbx2NTMi5B5r2mTI8rYtRjasoAtAORirkZqNLBwBD9_X53N92TYrF8jhjsNv8YTJ_u53qQ22QfVj79zYHgZvbCKlbgSv3EGms", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing Methods with Random Numbers", 
    "from": "James Abley &lt;james.abley@...&gt;", 
    "authorName": "James Abley", 
    "msgSnippet": "... DoubleGenerator in as a parameter, to the method or to the constructor, so that the inside knowledge part becomes public. Otherwise it all seems reasonable", 
    "msgId": 14108, 
    "profile": "taboozizi", 
    "topicId": 14105, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 212683928, 
    "messageBody": "<div id=\"ygrps-yiv-1170503029\">On 09/07/05, Michael &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:mkoss917@...\">mkoss917@...</a>&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt;  Hi. I was brainstorming and idea on the drive home from work tonight<br/>\n&gt; and realized I didn&#39;t know how to test something. This didn&#39;t come as<br/>\n&gt; a major shock, but I think I have an idea for a solution and I would<br/>\n&gt; like some devil&#39;s advocates :)<br/>\n&gt; <br/>\n&gt; Suppose the following class:<br/>\n&gt; <br/>\n&gt; public class SomeClass {<br/>\n&gt; public boolean doSomething(double x, double y) {<br/>\n&gt; double a = Math.random();<br/>\n&gt; double b = Math.random();<br/>\n&gt; return (x+a) &gt; (y+b);<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Writing a test case for this is next to impossible because you do not<br/>\n&gt; know the results of the method beforehand. But what if there were an<br/>\n&gt; interface:<br/>\n&gt; <br/>\n&gt; public interface DoubleGenerator { public double nextDouble(); }<br/>\n&gt; <br/>\n&gt; that SomeClass depends on.<br/>\n&gt; <br/>\n&gt; public class SomeClass {<br/>\n&gt; private DoubleGenerator doubleGenerator;<br/>\n&gt; //setter method<br/>\n&gt; <br/>\n&gt; public boolean doSomething(double x, double y) {<br/>\n&gt; double a = doubleGenerator.nextDouble();<br/>\n&gt; double b = doubleGenerator.nextDouble();<br/>\n&gt; return (x+a) &gt; (y+b);<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; The implementation of DoubleGenerator in production code could be a<br/>\n&gt; wrapper around Math.random() and a testing implementation could allow<br/>\n&gt; you to set the sequence of doubles to return.<br/>\n&gt; <br/>\n&gt; You could also use java.util.Random instead of DoubleGenerator and<br/>\n&gt; subclass it to allow setting of the sequence, but I don&#39;t like having<br/>\n&gt; all the extra methods when SomeClass only needs one of them. However,<br/>\n&gt; having the extra methods allows for flexibility later. Opinions?<br/>\n&gt; <br/>\n&gt; Also, is setting a DoubleGenerator with two doubles good practice? For<br/>\n&gt; now, doSomething() needs two doubles, but it may need three or four<br/>\n&gt; later. Is this &quot;inside knowledge&quot; bad practice when writing tests?<br/>\n&gt; <br/>\n&gt; Thanks for your opinions.<br/>\n&gt; <br/>\n&gt; Michael.<br/>\n&gt; <br/>\n&gt; You should remove part of the &#39;inside knowledge&#39; aspect by passing the <br/>\n </span></blockquote>DoubleGenerator in as a parameter, to the method or to the constructor, so <br/>\nthat the inside knowledge part becomes public. Otherwise it all seems <br/>\nreasonable enough.<br/>\n<br/>\nJames<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 14107, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1120982249", 
    "canDelete": false, 
    "nextInTopic": 14116, 
    "prevInTopic": 14105, 
    "headers": {
        "inReplyToHeader": "PGRhbjlzNitpY25pQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIzZmNlOGU2MDUwNzEwMDA1NzI0NWNkNGMzQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGRhbjlzNitpY25pQGVHcm91cHMuY29tPg=="
    }
}