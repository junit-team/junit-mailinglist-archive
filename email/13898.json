{
    "numMessagesInTopic": 5, 
    "nextInTime": 13899, 
    "senderId": "ZtuYMrg-dccZhXszAXLO7MpaG4C4VL34kg3BSllSxbYNRRdqc-jfqId-pjaJLmjbo4YbdvDa1pT7LIui5s6OGWmFNyo", 
    "systemMessage": true, 
    "subject": "Re: [junit] Testing ugly broken code", 
    "from": "Ray V &lt;ttftestrayv@...&gt;", 
    "authorName": "Ray V", 
    "msgSnippet": "... Thanks for the tips.  You hit on my exact problem: wanting to make changes to understand what the code is doing, but then having a chicken and egg problem", 
    "msgId": 13898, 
    "profile": "ttftestrayv", 
    "topicId": 13893, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 67398113, 
    "messageBody": "<div id=\"ygrps-yiv-1421350603\"><blockquote><span title=\"ireply\">&gt; Ray V wrote:<br/>\n&gt; &gt; I&#39;m going through the process right now of adding<br/>\n&gt; test<br/>\n&gt; &gt; cases, but as I write them I&#39;m constantly fighting<br/>\n&gt; the<br/>\n&gt; &gt; urge to fix stuff.  My question: is it better to<br/>\n&gt; write<br/>\n&gt; &gt; all the tests first, then go back to fixing what&#39;s<br/>\n&gt; &gt; broken, or to fix the bugs and &quot;smelly&quot; code as<br/>\n&gt; you go?<br/>\n&gt; <br/>\n&gt; Michael Feather&#39;s &quot;Working Effectively with Legacy<br/>\n&gt; Code&quot; is what you want... :)<br/>\n&gt; <br/>\n&gt; However, here&#39;s one recommendation: make the<br/>\n&gt; changes, so you can learn what <br/>\n&gt; the code does better. Then, _rollback_ your changes,<br/>\n&gt; so that you have the <br/>\n&gt; smelly code again. Write tests with your new<br/>\n&gt; understanding, and use these <br/>\n&gt; tests to both protect and guide you in your<br/>\n&gt; improvements. (Michael calls <br/>\n&gt; this technique &quot;Scratch Refactoring&quot;)<br/>\n<br/>\n </span></blockquote>Thanks for the tips.  You hit on my exact problem:<br/>\nwanting to make changes to understand what the code is<br/>\ndoing, but then having a chicken and egg problem with<br/>\nbugs that show up later.<br/>\n<br/>\nSo far I&#39;ve been largely guessing at what the code<br/>\ndoes  by doing a line-by-line audit and then poking at<br/>\nit through my unit tests.  The most drastic change<br/>\nI&#39;ve made so far has been to provide a toString() for<br/>\nthe value objects; other than that I&#39;ve pretty much<br/>\nleft the code alone and fought the urge to modify.<br/>\n<br/>\nScratch refactoring could fit the bill in some of the<br/>\nmore knotted up areas though.  Funny, I hadn&#39;t<br/>\nconsidered making changes and then rolling them<br/>\nback...  makes good sense, thanks for the suggestion.<br/>\n<br/>\n<br/>\n__________________________________________________<br/>\nDo You Yahoo!?<br/>\nTired of spam?  Yahoo! Mail has the best spam protection around <br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://mail.yahoo.com\">http://mail.yahoo.com</a></div>", 
    "prevInTime": 13897, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1118551878", 
    "canDelete": false, 
    "nextInTopic": 13903, 
    "prevInTopic": 13895, 
    "headers": {
        "inReplyToHeader": "PDQyQUE5QTY5LjEwNDA4MDJAdHdhc2luay5uZXQ+", 
        "messageIdInHeader": "PDIwMDUwNjEyMDQ1MTE4LjI5NzQ5LnFtYWlsQHdlYjYwNzE3Lm1haWwueWFob28uY29tPg=="
    }
}