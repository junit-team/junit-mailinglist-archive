{
    "numMessagesInTopic": 8, 
    "nextInTime": 18730, 
    "senderId": "BBrHt3EphDcjkIrPzgAFvBayNWK6tEEGo23Fui3BVCArqY-f8CWgcWte70rRdXj41WOIF7TZ5deq8qIFnfq4jbk9KNF0hY1dt23tZBOYYQ", 
    "systemMessage": false, 
    "subject": "Re: Custom Runner Delegation", 
    "from": "&quot;gabrielcooper&quot; &lt;gabriel.cooper@...&gt;", 
    "authorName": "gabrielcooper", 
    "msgSnippet": "... parents? ... I probably could have come up with a slightly shorter example by shortening NameAwareTestClassRunner, but ... it s pretty darn short as it is", 
    "msgId": 18729, 
    "rawEmail": "Return-Path: &lt;gabriel.cooper@...&gt;\r\nReceived: (qmail 27915 invoked by uid 7800); 12 Jan 2007 16:06:17 -0000\r\nX-Sender: gabriel.cooper@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 70512 invoked from network); 12 Jan 2007 15:11:17 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m38.grp.scd.yahoo.com with QMQP; 12 Jan 2007 15:11:17 -0000\r\nReceived: from unknown (HELO n8c.bullet.sp1.yahoo.com) (69.147.64.170)\n  by mta4.grp.scd.yahoo.com with SMTP; 12 Jan 2007 15:11:17 -0000\r\nReceived: from [216.252.122.216] by n8.bullet.sp1.yahoo.com with NNFMP; 12 Jan 2007 15:10:22 -0000\r\nReceived: from [66.218.69.1] by t1.bullet.sp1.yahoo.com with NNFMP; 12 Jan 2007 15:10:22 -0000\r\nReceived: from [66.218.66.80] by t1.bullet.scd.yahoo.com with NNFMP; 12 Jan 2007 15:10:22 -0000\r\nDate: Fri, 12 Jan 2007 15:10:20 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;eo88cs+panr@...&gt;\r\nIn-Reply-To: &lt;4f7da6b90701110826t75087211n668e8ba1030c0b7e@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;gabrielcooper&quot; &lt;gabriel.cooper@...&gt;\r\nSubject: Re: Custom Runner Delegation\r\nX-Yahoo-Group-Post: member; u=294114387; y=67zrRIixJPKUf76zbx04oX0L34YPr0pGPFWU5lmaOtdMKXSWDFKVEw\r\nX-Yahoo-Profile: gabrielcooper\r\nX-eGroups-Approved-By: ddoss_2006 &lt;didoss@...&gt; via email; 12 Jan 2007 16:06:17 -0000\r\n\r\n--- In junit@yahoogroups.com, &quot;David Saff&quot; &lt;saff@...&gt; wrote:\n&gt;\n&gt; Gabriel,\n&gt;=\r\n \n&gt; On 1/10/07, gabrielcooper &lt;gabriel.cooper@...&gt; wrote:\n&gt; &gt; What runner s=\r\nhould it use if none is specified in the subclass? The\n&gt; &gt; default &quot;TestCla=\r\nssRunner&quot; or the parent class&#39;s &quot;MyCustomRunner&quot;?\n&gt; &gt;\n&gt; &gt; Currently it uses=\r\n the default runner rather than its parents&#39; custom\n&gt; &gt; one. Would it make =\r\nsense to have runners be inherited from their\nparents?\n&gt; \n&gt; Yes, it would, =\r\nand the current implementation should--there&#39;s even a\n&gt; passing test that s=\r\nays it does.  Hmm...\n&gt; \n&gt; Could you simplify and post a failing test to hel=\r\np us figure out the\n&gt; problem you&#39;re having?  Thanks,\n&gt; \n&gt;    David Saff\n&gt;\n=\r\n\nI probably could have come up with a slightly shorter example by\nshortenin=\r\ng NameAwareTestClassRunner, but ... it&#39;s pretty darn short as\nit is and act=\r\nually serves a purpose, so I left it at a whopping 54 lines. \n\nThe gist her=\r\ne is that Bar, superclass to Foo, specifies a custom\nrunner (NameAware). An=\r\n @Test verifies that the Listener really is\nworking here. \n\nThen inside Foo=\r\n, we have the same @Test. Per previous conversation\nhere, in theory it shou=\r\nld run correctly here as well, but does not.\nThe Listener is not, well, lis=\r\ntening.\n\n// Foo.java\nimport static junit.framework.Assert.assertEquals;\n\nim=\r\nport org.junit.Test;\n\npublic class Foo extends Bar {\n\t@Test\n\tpublic void te=\r\nstName() {\n\t\t// fails\n\t\tassertEquals(&quot;testName&quot;,example);\n\t}\n}\n\n// Bar.java=\r\n\nimport static junit.framework.Assert.assertEquals;\nimport org.junit.Before=\r\n;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\n\n@RunWith(NameAwa=\r\nreTestClassRunner.class)\npublic class Bar {\n\tString example;\n\n\t@Before\n\tpub=\r\nlic void setUp() {\n\t\texample =3D NameAwareTestClassRunner.getTestName();\n\t}=\r\n\n\n\t@Test\n\tpublic void testName() {\n\t\t// succeeds\n\t\tassertEquals(&quot;testName&quot;,=\r\nexample);\n\t}\n}\n\n// NameAwareTesetClassRunner.java\nimport org.junit.internal=\r\n.runners.InitializationError;\nimport org.junit.internal.runners.TestClassRu=\r\nnner;\nimport org.junit.runner.Description;\nimport org.junit.runner.notifica=\r\ntion.RunListener;\nimport org.junit.runner.notification.RunNotifier;\n\npublic=\r\n class NameAwareTestClassRunner extends TestClassRunner {\n\tpublic NameAware=\r\nTestClassRunner(Class&lt;?&gt; klass) throws\nInitializationError {\n\t\tsuper(klass)=\r\n;\n\t}\n\n\tprivate static String testName;\n\t\n\tprotected static String getName()=\r\n {\n\t\treturn testName;\n\t}\n\t\n\tprotected static void setName(final String name=\r\n) {\n\t\ttestName =3D name;\n\t}\n\t\n\tprotected static String getTestName() {\n\t\tif=\r\n (testName =3D=3D null)\n\t\t\treturn null;\n\t\t\n\t\tint last =3D testName.indexOf(=\r\n&#39;(&#39;);\n\t\tif (last &lt; 0)\n\t\t\tlast =3D testName.length() + 1;\n\t\treturn testName.=\r\nsubstring(0, last);\n\t}\n\t\n\tprivate static class NameListener extends RunList=\r\nener {\n\t\t/** Record start of tests, not suites */\n\t\tpublic void testStarted=\r\n(Description description) throws Exception {\n\t\t\tSystem.err.println(&quot; STARTE=\r\nD: &quot; + description.getDisplayName());\n\t\t\tsetName(description.isTest() ? des=\r\ncription.getDisplayName() : null);\n\t\t}\n\t\t\n\t\tpublic void testFinished(Descri=\r\nption description) throws Exception {\n\n\t\t\tSystem.err.println(&quot;FINISHED: &quot; +=\r\n description.getDisplayName());\n\t\t\tif (getName() !=3D null)\n\t\t\t\tif (getName=\r\n().equals(description.getDisplayName()))\n\t\t\t\t\tsetName(null);\n\t\t\t\telse\n\t\t\t\t\t=\r\nthrow new Exception(&quot;DAMMIT! - test name mismatch&quot;);\n\t\t}\n\t}\n\n\tpublic void r=\r\nun(final RunNotifier notifier) {\n\t\tnotifier.addListener(new NameListener())=\r\n;\n\t\tsuper.run(notifier);\n\t}\n}\n\n\n\n", 
    "profile": "gabrielcooper", 
    "topicId": 18695, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 294114387, 
    "prevInTime": 18728, 
    "contentTrasformed": false, 
    "postDate": "1168614620", 
    "canDelete": false, 
    "nextInTopic": 18740, 
    "prevInTopic": 18708, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MDcwMTExMDgyNnQ3NTA4NzIxMW42NjhlOGJhMTAzMGMwYjdlQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGVvODhjcytwYW5yQGVHcm91cHMuY29tPg=="
    }
}