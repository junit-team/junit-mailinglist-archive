{
    "topicId": 3350, 
    "postDate": "1006885017", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Michael Silverstein&quot; &lt;msilverstein@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "1Stu0ceJkvxYL1Ky4d5r4aZ4nQlsXZEleHR7yebrZ9vOrYc-d5lQJnW7MshVJQprlzkAy677l0fR7W-C8egVJ2Qogr5GZEGv_Bg_gNWR_PcTZG3ffjaJjC_X", 
    "nextInTime": 3351, 
    "userId": 0, 
    "prevInTime": 3349, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PE5EQkJKRUZLTURHRklCRUtLRUxFQ0VCT0RKQUEubXNpbHZlcnN0ZWluQHNpbHZlcm1hcmsuY29tPg=="
    }, 
    "authorName": "Michael Silverstein", 
    "numMessagesInTopic": 19, 
    "msgSnippet": "Problem statement ... I am adding some additional profiling and metrics to JUnit test execution. In order to do this I need to plug in to JUnit in such a way", 
    "contentTrasformed": false, 
    "msgId": 3350, 
    "nextInTopic": 3351, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;msilverstein@...&gt;\r\nX-Sender: msilverstein@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_0_1); 27 Nov 2001 18:24:39 -0000\r\nReceived: (qmail 6574 invoked from network); 27 Nov 2001 18:24:39 -0000\r\nReceived: from unknown (216.115.97.172)\n  by m9.grp.snv.yahoo.com with QMQP; 27 Nov 2001 18:24:39 -0000\r\nReceived: from unknown (HELO mail7.nc.rr.com) (24.93.67.54)\n  by mta2.grp.snv.yahoo.com with SMTP; 27 Nov 2001 18:24:40 -0000\r\nReceived: from kenetiks.net ([24.163.47.10]) by mail7.nc.rr.com  with Microsoft SMTPSVC(5.5.1877.687.68);\n\t Tue, 27 Nov 2001 13:24:28 -0500\r\nReceived: from 63.86.212.130 ([63.86.212.130]) by kenetiks.net (WinRoute Pro 4.1) with SMTP; Tue, 27 Nov 2001 13:26:21 -0500\r\nReply-To: &lt;msilverstein@...&gt;\r\nTo: &lt;junit-devel@...&gt;,\n\t&lt;junit@yahoogroups.com&gt;\r\nSubject: Making JUnit more pluggable for add-ons\r\nDate: Tue, 27 Nov 2001 13:16:57 -0500\r\nMessage-ID: &lt;NDBBJEFKMDGFIBEKKELECEBODJAA.msilverstein@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)\r\nImportance: Normal\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.00.3018.1300\r\nReturn-Path: msilverstein@...\r\nFrom: &quot;Michael Silverstein&quot; &lt;msilverstein@...&gt;\r\n\r\n\nProblem statement\n-----------------\nI am adding some additional profiling and metrics to JUnit test execution.\nIn order to do this I need to plug in to JUnit in such a way as to perform\nsome operations before and after test execution, and to extend the test\nresults to contain the new metrics. Presently the framework does not allow\nme to do this without altering it.\n\nProcess\n-------\nI can either graft a new branch on to the JUnit source tree that contains\nvarious extensions built in and give it a new name (like JUnit XYZ or\nwhatever) or provide some tweaks to the present framework that satisfy my\nneeds in the hope they are accepted as part of the next version. The purpose\nof this email is to start a discussion about this so that whatever changes\nare necessary fit in with the architectural spirit of JUnit and are suitable\nfor inclusion in a base release. If possible, I&#39;d like to wrap this up and\nmake it publicly available by the end of the year.\n\nNote: I realize test cases are the recognized currency for articulating new\nfunctionality, so once there is agreement in principle to an approach, I can\nprovide test cases to provide more detail.\n\nWrapping test execution\n-----------------------\nI need to be able to start profiling immediately before a user test starts\nand end profiling immediately afterward. One approach is to wrap the user\ntest class that is presently instantiated in\njunit.runner.BaseTestRunner.getTest(String) with a TestDecorator subclass\ninstance that manages profiling during test execution. Creating the\ndecorator sounds like a job for factory method [Gamma95].\n\nExtending the results\n---------------------\nThis is presently not easy because all the various test runners (subclasses\nof BaseTestRunner) implement their own createTestResult() method, where the\nreference to the TestResult class is hard coded. I&#39;d like to be able to\nspecify that dynamically as well. This also sounds like a job for factory\nmethod [Gamma95].\n\nToward a unified pluggable configuration approach\n-------------------------------------------------\nA possible approach is to employ the abstract factory pattern [Gamma95]\nwhere the concrete factory class contains factory methods for the above\nclasses and others, is specified in the preferences file or elsewhere. This\nsort of architectural change would substantially enable the sort of\npluggability that I&#39;m after.\n\nSome questions and observations about the framework\n---------------------------------------------------\nHaving spent some time digging into JUnit I have the following questions and\ncomments:\n\n- The preferences file is read in more than one place:\n  - junit.runner.BaseTestRunner.readPreferences()\n  - junit.runner.TestCaseClassLoader.readExcludedPackages()\n  I could be wrong but it seems like this is redundant execution, especially\nsince the preferences is kept in a static variable.\n\n- The preferences (junit.runner.BaseTestRunner.fPreferences) is static. It\nstrikes me that this hampers testability of the framework because it makes\nit difficult to isolate the framework preferences from the preferences for\ninstances of framework classes under test.\n\n- The TestResult class provides semantics for running and stopping tests.\nThis seems like a stretch for a results class, which I would imagine is\nprimarily a container for execution metrics and other downstream\ninformation.\n\n- The TestRunner variants are very tied to presentation layer. I see this\nhas been discussed at length in the past so I won&#39;t belabor it.\n\n- It seems that since all the methods in junit.framework.Assert are static\nand it does not hold any state, there is really no need to make this class\nthe root of all tests, except for the convenience of not prefixing assertion\nmethods with &#39;junit.framework.Assert&#39;. I&#39;m sure I&#39;m missing something here.\n\nReferences\n----------\n[Gamma95] Erich Gamma et al. &quot;Design Patterns - Elements of Rusable\nObject-Oriented Software&quot;, Addison-Wesley, Reading, MA, 1995.\n\n^^^^^^^^^^^^^^^^^^^^^^^^^\nMike Silverstein\nSilverMark, Inc.\nThe object testing company\nhttp://www.silvermark.com\n\n\n\n", 
    "subject": "Making JUnit more pluggable for add-ons"
}