{
    "numMessagesInTopic": 8, 
    "nextInTime": 9512, 
    "senderId": "x648NzZcgTZ0fEaTqGbb6XV4yZmq135Ic7VknuXy4AtZWgOjB12ywWnHx1d5U_qrgmlqQEkBe05PQmgQDaQwNigbtqvttf6CSWI", 
    "systemMessage": false, 
    "subject": "Re: [junit] How to test threaded method?", 
    "from": "Kevin Klinemeier &lt;zipwow@...&gt;", 
    "authorName": "Kevin Klinemeier", 
    "msgSnippet": "This might be one of those cases where your unit testing is identifying a feature you ll want later.  Your programs will probably also be interested in finding", 
    "msgId": 9511, 
    "rawEmail": "Return-Path: &lt;zipwow@...&gt;\r\nReceived: (qmail 90262 invoked by uid 7800); 26 Sep 2003 17:51:42 -0000\r\nX-Sender: zipwow@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 69441 invoked from network); 25 Sep 2003 23:23:07 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m18.grp.scd.yahoo.com with QMQP; 25 Sep 2003 23:23:07 -0000\r\nReceived: from unknown (HELO web80509.mail.yahoo.com) (66.218.79.79)\n  by mta2.grp.scd.yahoo.com with SMTP; 25 Sep 2003 23:23:07 -0000\r\nMessage-ID: &lt;20030925232307.2577.qmail@...&gt;\r\nReceived: from [207.14.29.3] by web80509.mail.yahoo.com via HTTP; Thu, 25 Sep 2003 16:23:07 PDT\r\nDate: Thu, 25 Sep 2003 16:23:07 -0700 (PDT)\r\nSubject: Re: [junit] How to test threaded method?\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;F7B16EB8984B14409ACB015F1326BB661FF2A8@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nFrom: Kevin Klinemeier &lt;zipwow@...&gt;\r\nX-Yahoo-Group-Post: member; u=82914509\r\nX-Yahoo-Profile: zipwow\r\nX-eGroups-Approved-By: nails762 &lt;jbrains@...&gt; via email; 26 Sep 2003 17:51:42 -0000\r\n\r\nThis might be one of those cases where your unit testing is identifying\na feature you&#39;ll want later.  Your programs will probably also be\ninterested in finding out if/when this action is finished.\n\nThat said, I&#39;d change your method to return the thread that it created.\nIf your application really doesn&#39;t care, it doesn&#39;t have to store it,\nbut your unit test can then call createdThread.yield(timeout)...\n\nKevin\n--- Kris Henderson &lt;khenderson@...&gt; wrote:\n&gt; I have a method that when called creates a thread and does all its\n&gt; work\n&gt; in the new thread.  It looks kind of like this:\n&gt; \n&gt; public void doSomething()\n&gt; {\n&gt;     Thread requestThread = new Thread()\n&gt;     {\n&gt;         public void run()\n&gt;         {\n&gt;             fireStartEvent();\n&gt; \n&gt;             //do some stuff that takes a long time\n&gt; \n&gt;             fireDoneEvent();\n&gt;         }\n&gt;     };\n&gt;     requestThread.start();\n&gt; }\n&gt; \n&gt; I would like to test this method to make sure it sends the correct\n&gt; events in the correct order and that the EventObject contains the\n&gt; correct data.\n&gt; \n&gt; So I wrote a test that looks like this:\n&gt; \n&gt; \n&gt; public void testDoSomething()\n&gt; {\n&gt;     m_eventCount = 0;\n&gt;     final MockService service = new MockService();\n&gt;     service.addOperationListener(new OperationAdapter()\n&gt;     {\n&gt;         public void operationUpdate(OperationEvent event)\n&gt;         {\n&gt;             m_eventCount += 1;\n&gt;         }\n&gt;     });\n&gt;         \n&gt;     service.doSomething();\n&gt;                 \n&gt;     assertEquals(2, m_eventCount);\n&gt; }\n&gt; \n&gt; My test fails because it reaches the assertEquals before all the\n&gt; events\n&gt; can be fired.  If I add a call to Thread.sleep after the call to\n&gt; doSomething() then the test succeeds.  Does anyone know a better way\n&gt; to\n&gt; test this so I don&#39;t have to add a call to Thread.sleep?\n&gt; \n&gt; Thanks,\n&gt; Kris\n&gt; \n\n\n__________________________________\nDo you Yahoo!?\nThe New Yahoo! Shopping - with improved product search\nhttp://shopping.yahoo.com\n\n", 
    "profile": "zipwow", 
    "topicId": 9506, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 82914509, 
    "prevInTime": 9510, 
    "contentTrasformed": false, 
    "postDate": "1064532187", 
    "canDelete": false, 
    "nextInTopic": 9512, 
    "prevInTopic": 9510, 
    "headers": {
        "inReplyToHeader": "PEY3QjE2RUI4OTg0QjE0NDA5QUNCMDE1RjEzMjZCQjY2MUZGMkE4QEFUTDFWRVhDMDA1LnVzZG9tMDA0LnRjby50Yz4=", 
        "messageIdInHeader": "PDIwMDMwOTI1MjMyMzA3LjI1NzcucW1haWxAd2ViODA1MDkubWFpbC55YWhvby5jb20+"
    }
}