{
    "numMessagesInTopic": 6, 
    "nextInTime": 17194, 
    "senderId": "ebbZUJJ4GDyeklg2I-zKdPnh4AVN6_8F6OIAiFSad5q0TcJGR_6Jwa5zzNPK6wCei620tVpYrmMcSh5WRt5xHE2C4d4XOF4wjQVsdQpqJqALKz_2", 
    "systemMessage": false, 
    "subject": "Re: [junit] Test Run Directory", 
    "from": "&quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;", 
    "authorName": "Joakim Ohlrogge", 
    "msgSnippet": "You can set the working directory for JUnit using this property (just googled, haven t tried it) maven.junit.dir Yes The directory to invoke the VM in.", 
    "msgId": 17193, 
    "profile": "j0hlrogge", 
    "topicId": 17169, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 261856052, 
    "messageBody": "<div id=\"ygrps-yiv-319157568\">You can set the working directory for JUnit using this property (just<br/>\ngoogled, haven&#39;t tried it)<br/>\n<br/>\nmaven.junit.dir Yes The directory to invoke the VM in. (ignored if fork is<br/>\ndisabled). The default value is ${basedir}.<br/>\nI agree with previous posters that you should try to move away from having<br/>\nyour tests write to disk.<br/>\nWhat is the reason for those diskwrites? I tend to use this pattern when<br/>\nwriting to files from my classes to make them easier to test and to remove<br/>\nthe concern of worriying about how to obtain a stream from all classes but<br/>\nthe factories.<br/>\n<br/>\n<br/>\npublic interface StreamFactory {<br/>\n    public OutputStream (string name);<br/>\n}<br/>\n<br/>\npublic class SomeClassThatNeedToWriteToStreams {<br/>\n    private final StreamFactory streamFactory;<br/>\n<br/>\n    public SomeClassThatNeedToWriteToStreams (StreamFactory streamFactory) {<br/>\n         this.streamFactory = streamFactory;<br/>\n    }<br/>\n<br/>\n    public SomeClassThatNeedToWriteToStreams () {<br/>\n         this(new FileSystemStreamFactory())<br/>\n   }<br/>\n}<br/>\n<br/>\nI usually don&#39;t have the default constructor since I like to inject this<br/>\nkind of resources (i think it is inline with what Andreas suggested) but I<br/>\nput it there to show that you can...<br/>\nWith this pattern you can mock the streamfactory to return<br/>\nByteArrayOutputStreams from your tests. By doing that you can assert on the<br/>\ncontents of the stream after a test is run, guarantee a clean state without<br/>\nhaving to clean your filesystem in your tests, run your tests faster. Also<br/>\nif you inject the streams you can easially add bufferedStreams etc without<br/>\nchanging the class under test (there should only be one reason for a class<br/>\nto change, SRP).<br/>\n<br/>\nIf you write only text to the files then use Writer and StringWriter in the<br/>\nsame way.<br/>\n<br/>\nI hope that you or someone else find this infomration useful.<br/>\nGood luck!<br/>\n/Joakim Ohlrogge<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 7/24/06, Ole Ersoy &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:ole_ersoy@...\">ole_ersoy@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt;   Thanks Andreas - I&#39;m a little bit of a purist when it<br/>\n&gt; comes to keeping the code as clean and simple as<br/>\n&gt; possible, so I try not to put code in components that<br/>\n&gt; is only there for the sake of testing.<br/>\n&gt;<br/>\n&gt; In the end, unless there&#39;s some Maven magic here, I&#39;ll<br/>\n&gt; probably just let maven create and clean the<br/>\n&gt; directories in the root project directory, since<br/>\n&gt; there&#39;s no conflict between the directories created<br/>\n&gt; and the project directories.<br/>\n&gt;<br/>\n&gt; In the long run it would be really great to be able to<br/>\n&gt; trick the test into running in src/test/output though.<br/>\n&gt; I would think there would be a System parameter or<br/>\n&gt; something to enable this...<br/>\n&gt;<br/>\n&gt; Thanks again,<br/>\n&gt; - Ole<br/>\n&gt;<br/>\n&gt; --- Andreas Guther &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:Andreas.Guther@...\">Andreas.Guther@...</a>&lt;Andreas.Guther%40markettools.com&gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt; wrote:<br/>\n&gt;<br/>\n&gt; &gt; Ole,<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; I am not sure if you can do that in Maven. But I<br/>\n&gt; &gt; think it might be<br/>\n&gt; &gt; worth thinking about passing in the base folder to<br/>\n&gt; &gt; your class under test<br/>\n&gt; &gt; (Dependency Injection Pattern) rather than having<br/>\n&gt; &gt; the class computing<br/>\n&gt; &gt; it. In situations like that I sometime use in my<br/>\n&gt; &gt; class under test a<br/>\n&gt; &gt; setter method for a base folder that I only use in a<br/>\n&gt; &gt; test environment.<br/>\n&gt; &gt; The class under test checks if the folder is already<br/>\n&gt; &gt; set, if not, it<br/>\n&gt; &gt; does the standard behavior in computing the current<br/>\n&gt; &gt; folder, etc. You<br/>\n&gt; &gt; could have a check for null and since the setter<br/>\n&gt; &gt; method is not used in<br/>\n&gt; &gt; production, the variable would be null in<br/>\n&gt; &gt; production.<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Andreas<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Andreas Guther<br/>\n&gt; &gt;<br/>\n&gt; &gt; www.markettools.com<br/>\n&gt; &gt;<br/>\n&gt; &gt; Ph. (415) 957-2092<br/>\n&gt; &gt;<br/>\n&gt; &gt; ________________________________<br/>\n&gt; &gt;<br/>\n&gt; &gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt;<br/>\n&gt; &gt; [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt;] On Behalf Of<br/>\n&gt; &gt; David Saff<br/>\n&gt; &gt; Sent: Monday, July 24, 2006 4:24 AM<br/>\n&gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt;<br/>\n&gt; &gt; Subject: Re: [junit] Test Run Directory<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Ole,<br/>\n&gt; &gt;<br/>\n&gt; &gt; Is there a maven forum that you could ask this in?<br/>\n&gt; &gt; You may luck out and<br/>\n&gt; &gt; find a maven guru here, but...<br/>\n&gt; &gt;<br/>\n&gt; &gt; Good luck,<br/>\n&gt; &gt;<br/>\n&gt; &gt; David Saff<br/>\n&gt; &gt;<br/>\n&gt; &gt; P.S. Would it make sense right now to take a note to<br/>\n&gt; &gt; at some time<br/>\n&gt; &gt; redesign your component so that the dependency on<br/>\n&gt; &gt; the current working<br/>\n&gt; &gt; directory is well-encapsulated?<br/>\n&gt; &gt;<br/>\n&gt; &gt; ole_ersoy wrote:<br/>\n&gt; &gt; &gt; Hi,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Does anyone know whether I can specify which<br/>\n&gt; &gt; directory<br/>\n&gt; &gt; &gt; a junit test will run in.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Let me elaborate a little.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I&#39;m using Maven to run the tests, but in this case<br/>\n&gt; &gt; I want the<br/>\n&gt; &gt; &gt; test to think that it is running in a directory<br/>\n&gt; &gt; &quot;src/test/output&quot;<br/>\n&gt; &gt; &gt; relative to the directory that the tests are<br/>\n&gt; &gt; launced from.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; In other words I want the JUnit test to think it<br/>\n&gt; &gt; is being run from<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; $basedir/src/test/output, when I&#39;m really running<br/>\n&gt; &gt; it from $basedir.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; The component I&#39;m testing creates directories, so<br/>\n&gt; &gt; my end goal is to<br/>\n&gt; &gt; &gt; have that component create the directories<br/>\n&gt; &gt; relative to<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; $basedir/src/test/output<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Thanks,<br/>\n&gt; &gt; &gt; - Ole<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been<br/>\n&gt; &gt; removed]<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt; __________________________________________________<br/>\n&gt; Do You Yahoo!?<br/>\n&gt; Tired of spam? Yahoo! Mail has the best spam protection around<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://mail.yahoo.com\">http://mail.yahoo.com</a><br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 17192, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1153816898", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 17190, 
    "headers": {
        "inReplyToHeader": "PDIwMDYwNzI0MjEwMTMwLjc5NTk0LnFtYWlsQHdlYjYwNzE0Lm1haWwueWFob28uY29tPg==", 
        "messageIdInHeader": "PGI5ZWU1ZTQxMDYwNzI1MDE0MXU1MzNlMDM4MHU3ZDNhN2FhMjE2ZGY4NThAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDNGQjA4RDZBMjFCM0VDNEQ4NzQ5RUY2RDlFNjI2Mjc4NDgzRjdGQFdEQ0NQTUFJTDAxLm1hcmtldHRvb2xzLmNvbT4JIDwyMDA2MDcyNDIxMDEzMC43OTU5NC5xbWFpbEB3ZWI2MDcxNC5tYWlsLnlhaG9vLmNvbT4="
    }
}