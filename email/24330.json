{
    "numMessagesInTopic": 30, 
    "nextInTime": 24331, 
    "senderId": "1p2iC9Xgse3lG3DbA2HFsAJI-55xEIImLr26jgDD0z9rBwKU2DPFKkFG4MMp43L2elDwM3MN-4paj_KoHRhc3BD2bg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Feedback requested: Impending changes to RunListener", 
    "from": "David Saff &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Hi, all. Kevin, thank you very much for the summary document.  I think that a JUnit-specific annotation, which is not name-confusable with a standard like", 
    "msgId": 24330, 
    "profile": "saffatgoogle", 
    "topicId": 24274, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 525765722, 
    "messageBody": "<div id=\"ygrps-yiv-2116107836\">Hi, all.<br/>\n<br/>\nKevin, thank you very much for the summary document.  I think that a<br/>\nJUnit-specific annotation, which is not name-confusable with a standard<br/>\nlike @ThreadSafe, seems to be a pretty clear winner.  If we feel strongly<br/>\nthat it should remain consonant with @ThreadSafe, we could make it a static<br/>\ninner annotation, and reference it as @....  That might<br/>\nalso have the advantage of making clear that it&#39;s a single-purpose<br/>\nannotation (I&#39;d rather not, at this point, start speculatively figuring out<br/>\nwhat other interfaces might try to pun meanings onto a general-purpose<br/>\nThreadSafe annotation)<br/>\n<br/>\nI&#39;m a little curious about the third-party library implementation.  Let&#39;s<br/>\nsay I write a package FooTest which is compiled against JUnit 4.12, and it<br/>\ncontains a FooListener I&#39;d like to mark threadsafe.  A client wants to use<br/>\nit with JUnit 4.11 (she knows she won&#39;t get the concurrent performance<br/>\nboost, but wants it to just work).  The document seems to assume that if<br/>\nFooListener has a RunListener.TheadSafe annotation, then our client won&#39;t<br/>\nhave a problem (unless, likely, she actually tries to instantiate all of<br/>\nthe annotations from FooListener in her own code).  However, the document<br/>\nassumes that declaring a marker interface ThreadSafeRunListener _would_<br/>\nbreak the client.  Is that true?  Does FooListener fail at bytecode<br/>\nverification because the verifier wants to make sure that it implements all<br/>\nof ThreadSafeRunListener&#39;s methods?<br/>\n<br/>\nThanks,<br/>\n<br/>\n   David<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Thu, Feb 14, 2013 at 7:10 AM, tibord47 &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:tibord47@...\">tibord47@...</a>&gt; wrote:<br/>\n<br/>\n&gt; **<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Hi All,<br/>\n&gt;<br/>\n&gt; I am open for declaring @ThreadSafe in JUnit bundle due to the reasons<br/>\n&gt; like the other artifacts are project or person specific in Maven central<br/>\n&gt; and license issues.<br/>\n&gt;<br/>\n&gt; But I am not open for @Concurrent. The @ThreadSafe is the strongest<br/>\n&gt; terminology. One day if we will have both, it will be just confusing.<br/>\n&gt;<br/>\n&gt; If we now take over Stephen&#39;s class javadoc, we have to copy the Apache<br/>\n&gt; License.<br/>\n&gt;<br/>\n&gt; I think we do not have to follow the jcip either Stephan&#39;s definition of<br/>\n&gt; thread-safety in the annotation. We can follow the general definition &quot;to<br/>\n&gt; be free of data race conditions&quot;. Simply see the wikipedia. And what this<br/>\n&gt; definition really means has to be specified in the class which allows<br/>\n&gt; thread-safety treatments.<br/>\n&gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/1999122/how-to-define-threadsafe\">http://stackoverflow.com/questions/1999122/how-to-define-threadsafe</a><br/>\n&gt;<br/>\n&gt; Therefore the RunListener has to say in javadoc that it can be annotated<br/>\n&gt; @ThreadSafe if its use pattern satisfies reasonable expectations of thread<br/>\n&gt; safety. So RunListener allows using this annotation.<br/>\n&gt;<br/>\n&gt; Now we can talk about these expectations. I think they will be these and<br/>\n&gt; maybe you can add yours:<br/>\n&gt;<br/>\n&gt; + If RunListener is created in T1, values in the variables initialized by<br/>\n&gt; the constructor which are (indirectly) read in public methods have proper<br/>\n&gt; visibility;<br/>\n&gt; + All public methods in RunListener can be called in T2, or more threads<br/>\n&gt; at the same time;<br/>\n&gt; + RunListener must not achieve non-deterministic nor invalid state.<br/>\n&gt;<br/>\n&gt; What is your opinion about this approach?<br/>\n&gt;<br/>\n&gt; Cheers,<br/>\n&gt; Tibor<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Kevin Cooney wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; I don&#39;t think we should use a re-packaged implementation of<br/>\n&gt; &gt; jcip-annotations. Creating a new &quot;clean room&quot; implementation just so we<br/>\n&gt; can<br/>\n&gt; &gt; use one annotation in JUnit seems to violate KISS.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Although I am the one who originally suggested we use ThreadSafe from<br/>\n&gt; &gt; jcip-annotations, I no longer feel that way.<br/>\n&gt; &gt;<br/>\n&gt; &gt; I think we should either have a JUnit-specific annotation or a create an<br/>\n&gt; &gt; abstract subclass of RunListener. If we create our own annotation, I<br/>\n&gt; &gt; strongly feel that it should not be named ThreadSafe (see my comments in<br/>\n&gt; &gt; the Google docs page for more details)<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://docs.google.com/document/d/1OeE5OUKgtkKHeQuA7bKldBTk-yQ83bH6BHokwifCPrE/edit#\">https://docs.google.com/document/d/1OeE5OUKgtkKHeQuA7bKldBTk-yQ83bH6BHokwifCPrE/edit#</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; -- Kevin<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Wed, Feb 13, 2013 at 4:18 PM, tibord47 wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; **<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Hi Stephen,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; The correct groupId is com.github.stephenc.jcip.<br/>\n&gt; &gt; &gt; I already intalled and used the junit lib 4.12-snapshot in other<br/>\n&gt; project.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; The text in @ThreadSafe is similar to the one in original jcip.<br/>\n&gt; &gt; &gt; Although i would omit mentioning modifier &quot;public&quot; since the all<br/>\n&gt; problem<br/>\n&gt; &gt; &gt; of thread safety is in fields which are read or write in critical<br/>\n&gt; &gt; &gt; section=methods/constructor. So the modifier may not necessarily be<br/>\n&gt; public.<br/>\n&gt; &gt; &gt; It can be also protected, etc.<br/>\n&gt; &gt; &gt; So better not to mention any modifier in the text.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Let&#39;s wait for other repliers and then to make a new deployment.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Cheers,<br/>\n&gt; &gt; &gt; Tibor<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Stephen Connolly wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; To allow for the removal of licensing concerns, I have clean-room<br/>\n&gt; reverse<br/>\n&gt; &gt; &gt; &gt; engineered the jcip-annotations as well:<br/>\n&gt; &gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/stephenc/jcip-annotations\">https://github.com/stephenc/jcip-annotations</a><br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Should be available from Central in the next 1-8 hours<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; com.github.stephenc<br/>\n&gt; &gt; &gt; &gt; jcip-annotations<br/>\n&gt; &gt; &gt; &gt; 1.0-1<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; This should be a drop in replacement for<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; net.jcip<br/>\n&gt; &gt; &gt; &gt; jcip-annotations<br/>\n&gt; &gt; &gt; &gt; 1.0<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; But if it isn&#39;t please let me know and I can fix and roll a 1.0-2<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; On 13 February 2013 09:17, Stephen Connolly<br/>\n&gt; &gt; &gt; &gt; wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; On 13 February 2013 01:17, Kevin Cooney wrote:<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; On Tue, Feb 12, 2013 at 2:14 PM, tibord47 wrote:<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt; **<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt; Hi all,<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt; ok, so in that case the standard javax annotations cannot be<br/>\n&gt; used.<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt; Other options are jcip and proprietary one.<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; There are a few other options that were suggested. I&#39;ve summarized<br/>\n&gt; &gt; &gt; them<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; all here:<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://docs.google.com/document/d/1OeE5OUKgtkKHeQuA7bKldBTk-yQ83bH6BHokwifCPrE/edit#\">https://docs.google.com/document/d/1OeE5OUKgtkKHeQuA7bKldBTk-yQ83bH6BHokwifCPrE/edit#</a><br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; Feel free to add comments if I missed something. If you don&#39;t<br/>\n&gt; have a<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; Google account (or even if you do) feel free to continue to<br/>\n&gt; comment<br/>\n&gt; &gt; &gt; here.<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt; I vote for jcip since the license allows us to use a dependency.<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; Stephen indicated a concern with the jcip-annotations license.<br/>\n&gt; &gt; &gt; Hopefully<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; he (or someone else with a concern) can explain why the license is<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; problematic.<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; I indicated that there may be a concern with the license and you&#39;d<br/>\n&gt; &gt; &gt; want to<br/>\n&gt; &gt; &gt; &gt; &gt; check.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; We had (at former employers) an issue with the findbugs annotations<br/>\n&gt; &gt; &gt; &gt; &gt; (LGPL), so I created<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/stephenc/findbugs-annotationsas\">https://github.com/stephenc/findbugs-annotationsas</a><br/>\n&gt; &gt; &gt; &gt; &gt; a clean-room reverse engineered implementation (Apache License v2)<br/>\n&gt; of<br/>\n&gt; &gt; &gt; the<br/>\n&gt; &gt; &gt; &gt; &gt; same annotations specification.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; We weren&#39;t using the jcip-annotations, so those were not subject<br/>\n&gt; to the<br/>\n&gt; &gt; &gt; &gt; &gt; lawyers reviewing.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt; -- Kevin<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;&gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 24329, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1360859904", 
    "canDelete": false, 
    "nextInTopic": 24332, 
    "prevInTopic": 24324, 
    "headers": {
        "inReplyToHeader": "PGtmaWs3YysxNjZnQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBTHJ3LVB4bmExYjlUKzdEeW9EUUhiVkxLeXFXX2loNVNVZi1zYU9lOHRTTXItOHBCd0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGtmaWs3YysxNjZnQGVHcm91cHMuY29tPg=="
    }
}