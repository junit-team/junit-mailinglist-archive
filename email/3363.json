{
    "numMessagesInTopic": 19, 
    "nextInTime": 3364, 
    "senderId": "U6T0_dxfnj7-l6uF5z4UF_LVscLbZazkfJvNI0l-zZYa4T6pjfXsx45r6f30fu6O_yZBT5uK-D-ZNYA_2fYITNpQlQKti1uiiHDjW3iyg8D3i6Ntqmf7F0QU", 
    "systemMessage": false, 
    "subject": "RE: [junit] RE: [Junit-devel] Making JUnit more pluggable for add-ons", 
    "from": "&quot;Michael Silverstein&quot; &lt;msilverstein@...&gt;", 
    "authorName": "Michael Silverstein", 
    "msgSnippet": "I am using the Java Platform Debugger Architecture (JPDA) (http://java.sun.com/products/jpda/) APIs to launch and connect to another VM that will then run the", 
    "msgId": 3363, 
    "topicId": 3350, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-1055811752\">I am using the Java Platform Debugger Architecture (JPDA)<br/>\n(<a rel=\"nofollow\" target=\"_blank\" href=\"http://java.sun.com/products/jpda/)\">http://java.sun.com/products/jpda/)</a> APIs to launch and connect to another<br/>\nVM that will then run the test under &#39;instrumentation&#39;. The way JPDA works<br/>\nis that the launching VM then gets notified via callbacks of various events<br/>\nin the launched VM, such as method entry, exceptions, etc. This is the<br/>\nmechanism that most Java debuggers use, with the exception of VisualAge<br/>\nJava, which provides its own (far, far better) VM instrumentation scheme.<br/>\nI&#39;ve got all the code together that does this. What I need is a generic<br/>\nmechanism for threading this behavior into JUnit test execution that does<br/>\nnot require changes to the base code and does not require changes to the way<br/>\npeople already use JUnit (apart from a preference setting somewhere). I<br/>\nsuspect a scheme like this might be of use in other JUnit extensions and<br/>\nvariations.<br/>\n<br/>\nThe TestCaseProxy class you mentioned sounds a lot like using a decorator in<br/>\nthat it decorates test execution behavior with the additional behavior of<br/>\nlaunching and running the test on an instrumented VM. So I do think we&#39;re<br/>\nthinking alike.<br/>\n<br/>\n^^^^^^^^^^^^^^^^^^^^^^^^^<br/>\nMike Silverstein<br/>\nSilverMark, Inc.<br/>\nThe object testing company<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.silvermark.com\">http://www.silvermark.com</a><br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; -----Original Message-----<br/>\n&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a>]<br/>\n&gt; Sent: Tuesday, November 27, 2001 4:15 PM<br/>\n&gt; To: Junit@Yahoogroups. Com<br/>\n&gt; Cc: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-devel@...\">junit-devel@...</a><br/>\n&gt; Subject: Re: [junit] RE: [Junit-devel] Making JUnit more pluggable for<br/>\n&gt; add-ons<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; I&#39;m a little confused. If you are using an instrumented VM, why would you<br/>\n&gt; want the TestRunner to launch it? Don&#39;t you normally launch the TestRunner<br/>\n&gt; from within a VM?<br/>\n&gt;<br/>\n&gt; java junit.textui.TestRunner<br/>\n&gt;<br/>\n&gt; becomes:<br/>\n&gt;<br/>\n&gt; myvm junit.textui.TestRunner<br/>\n&gt;<br/>\n&gt; It&#39;s easy enough to use an &lt;exec&gt; statement in ANT or use ANT&#39;s extension<br/>\n&gt; mechanism to have it use a different VM for your unit test target.<br/>\n&gt;<br/>\n&gt; Are you looking to have the TestRunner run in a different VM from the<br/>\n&gt; testcases? In that case, a good generic mechansim would be to have a<br/>\n&gt; TestCaseProxy or some such which causes a test case to be invoked in a<br/>\n&gt; different VM. I have had to do something like that in the past for a<br/>\n&gt; client&#39;s project. The TestCaseProxy invoked a set of tests in a remote VM<br/>\n&gt; via RMI. Unfortunately, this was using a different test harness and the<br/>\n&gt; code is not available to me now.<br/>\n&gt;<br/>\n&gt; On Tue, 27 Nov 2001, Michael Silverstein wrote:<br/>\n&gt;<br/>\n&gt; &gt; &lt; at the request of several people, I&#39;m continuing to<br/>\n&gt; cross-post. Anyway,<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-devel@...\">junit-devel@...</a> seems to have a lot of noise<br/>\n&gt; from build<br/>\n&gt; &gt; updates that are probably not interesting to most people and would<br/>\n&gt; &gt; discourage them from subscribing &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; ....<br/>\n&gt; &gt;<br/>\n&gt; &gt; In <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.geocrawler.com/archives/3/8174/2001/7/0/6256758/\">http://www.geocrawler.com/archives/3/8174/2001/7/0/6256758/</a><br/>\n&gt; there is a<br/>\n&gt; &gt; description of a TestRunListener interface that would<br/>\n&gt; accomplish what I need<br/>\n&gt; &gt; for being notified when a test starts and ends. The thing I<br/>\n&gt; didn&#39;t mention<br/>\n&gt; &gt; is that for the purpose of profiling I will be launching the test in an<br/>\n&gt; &gt; instrumented VM, so I need to completely override the present<br/>\n&gt; test execution<br/>\n&gt; &gt; scheme.<br/>\n&gt; &gt;<br/>\n&gt; &gt; At first blush, one might approach this by implementing a new TestRunner<br/>\n&gt; &gt; that launches an instrumented VM, but I would have to do this<br/>\n&gt; several times<br/>\n&gt; &gt; to support each TestRunner presentation, which is not<br/>\n&gt; practical.  That&#39;s why<br/>\n&gt; &gt; I proposed a simple decorator, because it requires the least<br/>\n&gt; rework of the<br/>\n&gt; &gt; existing architecture (simplest thing that could possibly work). Perhaps<br/>\n&gt; &gt; once the model and view have been sufficiently separated, the TestRunner<br/>\n&gt; &gt; approach will become more practical.<br/>\n&gt; &gt;<br/>\n&gt; &gt; ^^^^^^^^^^^^^^^^^^^^^^^^^<br/>\n&gt; &gt; Mike Silverstein<br/>\n&gt; &gt; SilverMark, Inc.<br/>\n&gt; &gt; The object testing company<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.silvermark.com\">http://www.silvermark.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; -----Original Message-----<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Problem statement<br/>\n&gt; &gt; &gt; -----------------<br/>\n&gt; &gt; &gt; I am adding some additional profiling and metrics to JUnit<br/>\n&gt; test execution.<br/>\n&gt; &gt; &gt; In order to do this I need to plug in to JUnit in such a way<br/>\n&gt; as to perform<br/>\n&gt; &gt; &gt; some operations before and after test execution, and to<br/>\n&gt; extend the test<br/>\n&gt; &gt; &gt; results to contain the new metrics. Presently the framework<br/>\n&gt; does not allow<br/>\n&gt; &gt; &gt; me to do this without altering it.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Process<br/>\n&gt; &gt; &gt; -------<br/>\n&gt; &gt; &gt; I can either graft a new branch on to the JUnit source tree<br/>\n&gt; that contains<br/>\n&gt; &gt; &gt; various extensions built in and give it a new name (like JUnit XYZ or<br/>\n&gt; &gt; &gt; whatever) or provide some tweaks to the present framework<br/>\n&gt; that satisfy my<br/>\n&gt; &gt; &gt; needs in the hope they are accepted as part of the next version.<br/>\n&gt; &gt; &gt; The purpose<br/>\n&gt; &gt; &gt; of this email is to start a discussion about this so that<br/>\n&gt; whatever changes<br/>\n&gt; &gt; &gt; are necessary fit in with the architectural spirit of JUnit and<br/>\n&gt; &gt; &gt; are suitable<br/>\n&gt; &gt; &gt; for inclusion in a base release. If possible, I&#39;d like to<br/>\n&gt; wrap this up and<br/>\n&gt; &gt; &gt; make it publicly available by the end of the year.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Note: I realize test cases are the recognized currency for<br/>\n&gt; &gt; &gt; articulating new<br/>\n&gt; &gt; &gt; functionality, so once there is agreement in principle to an<br/>\n&gt; &gt; &gt; approach, I can<br/>\n&gt; &gt; &gt; provide test cases to provide more detail.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Wrapping test execution<br/>\n&gt; &gt; &gt; -----------------------<br/>\n&gt; &gt; &gt; I need to be able to start profiling immediately before a<br/>\n&gt; user test starts<br/>\n&gt; &gt; &gt; and end profiling immediately afterward. One approach is to<br/>\n&gt; wrap the user<br/>\n&gt; &gt; &gt; test class that is presently instantiated in<br/>\n&gt; &gt; &gt; junit.runner.BaseTestRunner.getTest(String) with a<br/>\n&gt; TestDecorator subclass<br/>\n&gt; &gt; &gt; instance that manages profiling during test execution. Creating the<br/>\n&gt; &gt; &gt; decorator sounds like a job for factory method [Gamma95].<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Extending the results<br/>\n&gt; &gt; &gt; ---------------------<br/>\n&gt; &gt; &gt; This is presently not easy because all the various test runners<br/>\n&gt; &gt; &gt; (subclasses<br/>\n&gt; &gt; &gt; of BaseTestRunner) implement their own createTestResult() method,<br/>\n&gt; &gt; &gt; where the<br/>\n&gt; &gt; &gt; reference to the TestResult class is hard coded. I&#39;d like to<br/>\n&gt; be able to<br/>\n&gt; &gt; &gt; specify that dynamically as well. This also sounds like a job<br/>\n&gt; for factory<br/>\n&gt; &gt; &gt; method [Gamma95].<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Toward a unified pluggable configuration approach<br/>\n&gt; &gt; &gt; -------------------------------------------------<br/>\n&gt; &gt; &gt; A possible approach is to employ the abstract factory pattern<br/>\n&gt; [Gamma95]<br/>\n&gt; &gt; &gt; where the concrete factory class contains factory methods for<br/>\n&gt; the above<br/>\n&gt; &gt; &gt; classes and others, is specified in the preferences file or<br/>\n&gt; &gt; &gt; elsewhere. This<br/>\n&gt; &gt; &gt; sort of architectural change would substantially enable the sort of<br/>\n&gt; &gt; &gt; pluggability that I&#39;m after.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Some questions and observations about the framework<br/>\n&gt; &gt; &gt; ---------------------------------------------------<br/>\n&gt; &gt; &gt; Having spent some time digging into JUnit I have the following<br/>\n&gt; &gt; &gt; questions and<br/>\n&gt; &gt; &gt; comments:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; - The preferences file is read in more than one place:<br/>\n&gt; &gt; &gt;   - junit.runner.BaseTestRunner.readPreferences()<br/>\n&gt; &gt; &gt;   - junit.runner.TestCaseClassLoader.readExcludedPackages()<br/>\n&gt; &gt; &gt;   I could be wrong but it seems like this is redundant execution,<br/>\n&gt; &gt; &gt; especially<br/>\n&gt; &gt; &gt; since the preferences is kept in a static variable.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; - The preferences (junit.runner.BaseTestRunner.fPreferences)<br/>\n&gt; is static. It<br/>\n&gt; &gt; &gt; strikes me that this hampers testability of the framework<br/>\n&gt; because it makes<br/>\n&gt; &gt; &gt; it difficult to isolate the framework preferences from the<br/>\n&gt; preferences for<br/>\n&gt; &gt; &gt; instances of framework classes under test.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; - The TestResult class provides semantics for running and<br/>\n&gt; stopping tests.<br/>\n&gt; &gt; &gt; This seems like a stretch for a results class, which I would<br/>\n&gt; imagine is<br/>\n&gt; &gt; &gt; primarily a container for execution metrics and other downstream<br/>\n&gt; &gt; &gt; information.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; - The TestRunner variants are very tied to presentation<br/>\n&gt; layer. I see this<br/>\n&gt; &gt; &gt; has been discussed at length in the past so I won&#39;t belabor it.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; - It seems that since all the methods in<br/>\n&gt; junit.framework.Assert are static<br/>\n&gt; &gt; &gt; and it does not hold any state, there is really no need to<br/>\n&gt; make this class<br/>\n&gt; &gt; &gt; the root of all tests, except for the convenience of not<br/>\n&gt; &gt; &gt; prefixing assertion<br/>\n&gt; &gt; &gt; methods with &#39;junit.framework.Assert&#39;. I&#39;m sure I&#39;m missing<br/>\n&gt; &gt; &gt; something here.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; References<br/>\n&gt; &gt; &gt; ----------<br/>\n&gt; &gt; &gt; [Gamma95] Erich Gamma et al. &quot;Design Patterns - Elements of Rusable<br/>\n&gt; &gt; &gt; Object-Oriented Software&quot;, Addison-Wesley, Reading, MA, 1995.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; ^^^^^^^^^^^^^^^^^^^^^^^^^<br/>\n&gt; &gt; &gt; Mike Silverstein<br/>\n&gt; &gt; &gt; SilverMark, Inc.<br/>\n&gt; &gt; &gt; The object testing company<br/>\n&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.silvermark.com\">http://www.silvermark.com</a><br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; _______________________________________________<br/>\n&gt; &gt; &gt; Junit-devel mailing list<br/>\n&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:Junit-devel@...\">Junit-devel@...</a><br/>\n&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://lists.sourceforge.net/lists/listinfo/junit-devel\">https://lists.sourceforge.net/lists/listinfo/junit-devel</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to<br/>\n </span></blockquote><a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n </span></blockquote>--<br/>\nEric Vought<br/>\nChief Technical Officer - QLUE Consulting, Inc.<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a> toll-free: 888-771-3538  RTP area: 919-816-9901<br/>\n<br/>\n<br/>\n<br/>\nTo unsubscribe from this group, send an email to:<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n<br/>\n<br/>\nYour use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a></div>", 
    "prevInTime": 3362, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1006901087", 
    "canDelete": false, 
    "nextInTopic": 3364, 
    "prevInTopic": 3362, 
    "headers": {
        "inReplyToHeader": "PFBpbmUuTE5YLjQuMzAuMDExMTI3MTU1MDQ4MC4xODg4Ny0xMDAwMDBAYnJhaW4ucWx1ZS1sYW4+", 
        "messageIdInHeader": "PE5EQkJKRUZLTURHRklCRUtLRUxFT0VDQ0RKQUEubXNpbHZlcnN0ZWluQHNpbHZlcm1hcmsuY29tPg=="
    }
}