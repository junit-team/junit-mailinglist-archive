{
    "numMessagesInTopic": 23, 
    "nextInTime": 9732, 
    "senderId": "5xe4DhCmEbwmCTkla5Z5FZOVNbKbhHmbWr2d2HcIn2PUJpvZ6XVXBLYTjQoUByzk2ovjsLZMJ9jLXJ16NeaR7Lk7DkUO2xzOFoEUrQ", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: How to test private methods, its urgent", 
    "from": "Malcolm Sparks &lt;malcolm@...&gt;", 
    "authorName": "Malcolm Sparks", 
    "msgSnippet": "Making a private method protected can have undesirable effects since it changes the contract between classes and subclasses. These subclasses can be outside", 
    "msgId": 9731, 
    "profile": "xsumeman", 
    "topicId": 9699, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139420845, 
    "messageBody": "<div id=\"ygrps-yiv-918533510\">Making a private method &#39;protected&#39; can have undesirable effects<br/>\nsince it changes the contract between classes and subclasses. These<br/>\nsubclasses can be outside your control, since they can belong in any<br/>\npackage, even other organization&#39;s packages.<br/>\n<br/>\nA useful compromise it to promote the methods to a lesser degree and<br/>\nmake them &#39;package&#39; methods, not protected methods:<br/>\n<br/>\nFor example, change ...<br/>\n<br/>\nprivate int y() {...}<br/>\n<br/>\nto ...<br/>\n<br/>\nint() {...}<br/>\n<br/>\nrather than ...<br/>\n<br/>\nprotected int() {...}<br/>\n<br/>\nThis change does not allow subclasses to override the methods<br/>\nand keeps the methods private with respect to the package. Yes, this is<br/>\na compromise because it breaks encapsulation but the breakage is locally<br/>\nconstrained. In reality this is an acceptable compromise.<br/>\n<br/>\nThis means that your tests must now belong in the same package as your<br/>\ncode, but this has a positive side-effect of documenting the<br/>\ncorrespondence between tests and code. The tests can now access all your<br/>\npackage members and fields.<br/>\n<br/>\nFinally, you usually want to separate your code from tests. Rather<br/>\nthan locate the tests in a different package, locate them in a separate<br/>\ncode base. Compile the source code-base first, then compile the test<br/>\ncode base with the source code-base classes in the classpath.<br/>\n<br/>\nFor example:<br/>\n<br/>\n/home/msparks/myproject/src/com/congreve/util/List.java<br/>\n/home/msparks/myproject/test/com/congreve/util/ListTest.java<br/>\n<br/>\nRather than use private by default, use the default modifier by default.<br/>\nThat should be easy to remember ;). You can use private on occasions<br/>\nwhen you really want something to be private to a class, and<br/>\ninaccessible to anything in the same package. I&#39;ve found these occasions<br/>\nto be rare.<br/>\n<br/>\nAnyway, I&#39;ve found this to be a useful development pattern. I know lots<br/>\nof others that use the same approach, so consider it &#39;tried and tested&#39;.<br/>\nYou might find it useful.<br/>\n<br/>\nMalcolm<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Fri, 2003-10-17 at 17:03, Kris Henderson wrote:<br/>\n&gt; &gt; -----Original Message-----<br/>\n&gt; &gt; From: Michael Silverstein [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:msilverstein@...\">msilverstein@...</a>] <br/>\n&gt; &gt; Sent: Thursday, October 16, 2003 6:50 PM<br/>\n&gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; Here&#39;s an example of what I mean:<br/>\n&gt; &gt; <br/>\n&gt; &gt; Let&#39;s assume we have class MyClass that implements interface<br/>\n&gt; &gt; MyInterface, with methods:<br/>\n&gt; &gt; public int x(){<br/>\n&gt; &gt;   // return an answer based on y() and z() <br/>\n&gt; &gt; }<br/>\n&gt; &gt; private int y() {...}<br/>\n&gt; &gt; private int z() {...}<br/>\n&gt; &gt; <br/>\n&gt; &gt; And Interface MyInterface with method:<br/>\n&gt; &gt; public int x()<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; In your example, shouldn&#39;t y() and z() be protected instead of public or<br/>\n&gt; private?  This way clients can still override y() and z(), and call them<br/>\n&gt; from the subclass, but they can not be invoked from outside the class.<br/>\n&gt; <br/>\n&gt; Keeping this on topic, the protected methods shouldn&#39;t be very difficult<br/>\n&gt; to test.  The test can create a MockMyClass that overrides y() and z()<br/>\n&gt; but change the modifier from protected to public.<br/>\n&gt; <br/>\n&gt; Something like this:<br/>\n&gt; <br/>\n&gt; public class MyClass<br/>\n&gt; {<br/>\n&gt;     public MyClass()<br/>\n&gt;     {<br/>\n&gt;         super();<br/>\n&gt;     }<br/>\n&gt;     <br/>\n&gt;     public int x()<br/>\n&gt;     {<br/>\n&gt;     \treturn y() + z();<br/>\n&gt;     }<br/>\n&gt;     <br/>\n&gt;     protected int y()<br/>\n&gt;     {<br/>\n&gt;     \treturn 8;<br/>\n&gt;     }<br/>\n&gt;     <br/>\n&gt;     protected int z()<br/>\n&gt;     {<br/>\n&gt;     \treturn 73;<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Use MockMyClass in the test to test y and z instead of MyClass.<br/>\n&gt; <br/>\n&gt; public class MockMyClass extends MyClass<br/>\n&gt; {<br/>\n&gt;     public MockMyClass()<br/>\n&gt;     {<br/>\n&gt;         super();<br/>\n&gt;     }<br/>\n&gt;     <br/>\n&gt;     public int y()<br/>\n&gt;     {<br/>\n&gt;     \treturn super.y();<br/>\n&gt;     }<br/>\n&gt;     <br/>\n&gt;     public int z()<br/>\n&gt;     {<br/>\n&gt;     \treturn super.z();<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; MyClass2 could look something like this:<br/>\n&gt; public class MyClass2 extends MyClass<br/>\n&gt; {<br/>\n&gt;     public MyClass2()<br/>\n&gt;     {<br/>\n&gt;         super();<br/>\n&gt;     }<br/>\n&gt;     <br/>\n&gt;     protected int q()<br/>\n&gt;     {<br/>\n&gt;     \treturn 23;<br/>\n&gt;     }<br/>\n&gt;     <br/>\n&gt;     public int x()<br/>\n&gt;     {<br/>\n&gt;     \treturn y() + z() + q();<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Kris<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n-- <br/>\nMalcolm Sparks<br/>\nCongreve Computing<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.congreve.com\">http://www.congreve.com</a> </span></blockquote></div>", 
    "prevInTime": 9730, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1066728211", 
    "canDelete": false, 
    "nextInTopic": 9733, 
    "prevInTopic": 9725, 
    "headers": {
        "inReplyToHeader": "PEY3QjE2RUI4OTg0QjE0NDA5QUNCMDE1RjEzMjZCQjY2ODgxODlFQEFUTDFWRVhDMDA1LnVzZG9tMDA0LnRjby50Yz4=", 
        "messageIdInHeader": "PDEwNjY3MjgyMDkuMzQ4OC4zNi5jYW1lbEBsdXRoaWVuLmNvbmdyZXZlLmNvbT4=", 
        "referencesHeader": "CSA8RjdCMTZFQjg5ODRCMTQ0MDlBQ0IwMTVGMTMyNkJCNjY4ODE4OUVAQVRMMVZFWEMwMDUudXNkb20wMDQudGNvLnRjPg=="
    }
}