{
    "numMessagesInTopic": 2, 
    "nextInTime": 24696, 
    "senderId": "932tWlpnf2MXgueAG3x6s95OdD1nQprwWZDF7XvcatFYCweT3Y62sn68DcawLZd0oRe3AQIq30nxIKjeGpaJgkzuVA", 
    "systemMessage": false, 
    "subject": "Re: [junit] JDBCException &quot;next&quot; Exception would be nice to output to screen", 
    "from": "David Saff &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "This would be a great use for a Rule: class ShowNextExceptions extends TestRule { Statement apply(Statement s, Description d) { try { s.evaluate(); } catch", 
    "msgId": 24695, 
    "profile": "saffatgoogle", 
    "topicId": 24694, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 525765722, 
    "messageBody": "<div id=\"ygrps-yiv-11332522\"><div dir=\"ltr\">This would be a great use for a Rule:<div><br></div><div>class ShowNextExceptions extends TestRule {</div><div>  Statement apply(Statement s, Description d) {<br></div><div>    try {</div><div>      s.evaluate();</div><div>    } catch (SQLException e) {</div><div>      // FullSQLException does whatever is needed to get all the <span style=\"font-size:12.8px;\">getNextException&#39;s</span></div><div>      throw FullSQLException(e);</div><div>    }</div><div>  }</div><div>}</div><div><br></div><div>public class MyTest {</div><div>   @Rule public TestRule t = new ShowNextExceptions();</div><div><br></div><div>   ...</div><div>}</div><div><br></div><div>David Saff</div></div><div class=\"ygrps-yiv-11332522gmail_extra\"><br><blockquote><span title=\"qreply\"> <div class=\"ygrps-yiv-11332522gmail_quote\">On Mon, Sep 14, 2015 at 5:49 PM, Roger Pack <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:rogerdpack2@...\">rogerdpack2@...</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-11332522gmail_quote\" style=\"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p>Hello.<br>\n<br>\nFeature request with regard to uncaught exceptions:<br>\n<br>\nToday with certain junit failures, you might get this output to the screen:<br>\n<br>\norg.hibernate.exception.ConstraintViolationException: could not perform addBatch<br>\nat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:129)<br>\nat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)<br>\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)<br>\nat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:114)<br>\nat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.doExecuteBatch(BatchingBatch.java:101)<br>\nat org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.execute(AbstractBatchImpl.java:149)<br>\nat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.getBatch(JdbcCoordinatorImpl.java:187)<br>\nat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3059)<br>\nat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3523)<br>\nat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88)<br>\nat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:393)<br>\nat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:385)<br>\nat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:301)<br>\nat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:339)<br>\nat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)<br>\nat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1240)<br>\nat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:404)<br>\nat org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)<br>\nat org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)<br>\nat org.familysearch.digitalarchive.presdb.TapeDB.commitAndClose(TapeDB.java:439)<br>\nat org.familysearch.digitalarchive.presdb.TapeDB.saveOrUpdateMigrationTapeTransfer(TapeDB.java:144)<br>\nat org.familysearch.digitalarchive.presdb.TapeDBTest.canSaveTapeTransferWithGroupDones(TapeDBTest.java:899)<br>\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)<br>\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)<br>\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)<br>\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)<br>\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)<br>\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)<br>\nat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)<br>\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)<br>\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)<br>\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)<br>\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)<br>\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)<br>\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)<br>\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)<br>\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)<br>\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)<br>\nat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)<br>\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)<br>\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)<br>\nat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)<br>\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)<br>\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)<br>\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)<br>\nat com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)<br>\nCaused by: java.sql.BatchUpdateException: Batch entry 0 insert into<br>\nMigrationGroups (XXX) values (&#39;YYY&#39;) was aborted.  Call<br>\ngetNextException to see the cause.<br>\nat org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handleError(AbstractJdbc2Statement.java:2740)<br>\nat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1891)<br>\nat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:405)<br>\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeBatch(AbstractJdbc2Statement.java:2889)<br>\nat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:2465)<br>\nat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:110)<br>\n... 48 more<br>\n<br>\nThis is OK, but it would be nice to (in the case of SQLException)<br>\niterate over the &quot;next&quot; exceptions as well, so we could see the cause<br>\nmore easily:<br>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/SQLException.html#getNextException()\">http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/SQLException.html#getNextException()</a><br>\n(So basically iterate over both causes and &quot;next&quot; exceptions, in this<br>\nparticular case).<br>\nCheers!<br>\n-roger-<br>\nrelated: <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/15848359/call-getnextexception-to-see-the-cause-how-to-make-hibernate-jpa-show-the-db\">http://stackoverflow.com/questions/15848359/call-getnextexception-to-see-the-cause-how-to-make-hibernate-jpa-show-the-db</a><br>\n<br>\nPS yahoo groups for the mailing list? That is pretty hard to join for<br>\nthose not using yahoo accounts, you may want to consider an<br>\nalternative...<br>\n</p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br></span></blockquote></div>\n</div>", 
    "prevInTime": 24694, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1442332657", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 24694, 
    "headers": {
        "inReplyToHeader": "PENBTDFRZFdjdmRpQk9RUCt0VUxmTFJBdWVmK0xpNmctVFVLRV9uRGY9bngydGRQTXNud0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBTHJ3LVB6cDBlK3QrOTlRckVFMjVXOXBpdDd0PWd3TkctNnU1aXhoams3bmgyTjUwZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBTDFRZFdjdmRpQk9RUCt0VUxmTFJBdWVmK0xpNmctVFVLRV9uRGY9bngydGRQTXNud0BtYWlsLmdtYWlsLmNvbT4="
    }
}