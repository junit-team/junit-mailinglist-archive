{
    "numMessagesInTopic": 12, 
    "nextInTime": 23978, 
    "senderId": "FOiN1dzLjTQs9__qMLt9BzSzwmKm8GOyLEHcG-PMQiN6XnTks4ul29M4nJF6rhC4ArlStmkthO5Oe4DWP9Np1aae11v4583ft4Gwr7PW-oE", 
    "systemMessage": false, 
    "subject": "Re: [junit] Tests starting before Logback initialisation complete when run in parallel", 
    "from": "Brett Delle Grazie &lt;bdellegrazie@...&gt;", 
    "authorName": "Brett Delle Grazie", 
    "msgSnippet": "Hi David, ... Thanks David, I ll look into doing that. ... -- Best Regards, Brett Delle Grazie", 
    "msgId": 23977, 
    "topicId": 23967, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 79191679, 
    "messageBody": "<div id=\"ygrps-yiv-1407804913\">Hi David,<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 4 September 2012 19:24, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:saff@...\">saff@...</a>&gt; wrote:<br/>\n&gt; Brett,<br/>\n&gt;<br/>\n&gt; There&#39;s currently not a good single way to do what you want.  There&#39;s<br/>\n&gt; current conversation on the github repo about how to do it in a future<br/>\n&gt; version, but there&#39;s no great first-step answer.<br/>\n&gt;<br/>\n&gt; One possibility is to add a @BeforeClass or @ClassRule to each of your<br/>\n&gt; tests that would, in a thread-safe way, check if your initialization has<br/>\n&gt; already been performed, and if not, do it.  I know that&#39;s not a great<br/>\n&gt; solution.<br/>\n<br/>\nThanks David, I&#39;ll look into doing that.<br/>\n<br/>\n&gt;<br/>\n&gt;    David Saff<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; On Mon, Sep 3, 2012 at 3:51 PM, Brett Delle Grazie &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:bdellegrazie@...\">bdellegrazie@...</a>&gt;wrote:<br/>\n&gt;<br/>\n&gt;&gt; **<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; Hi,<br/>\n&gt;&gt;<br/>\n&gt;&gt; I&#39;m using JUnit 4.10 with Maven 3.0.4, Surefire 2.12.3, JDK 1.6.0_35<br/>\n&gt;&gt; on Windows 7<br/>\n&gt;&gt; Surefire is configured with parallel=methods and threadCount=10<br/>\n&gt;&gt; For logging, I&#39;m using SLF4J to Logback, initialised by default method<br/>\n&gt;&gt; (i.e. configuration file logback-test.xml is on the test classpath)<br/>\n&gt;&gt;<br/>\n&gt;&gt; I have an order of initialisation problem in that:<br/>\n&gt;&gt; (1) Some unit tests test classes that use commons-logging (and logback<br/>\n&gt;&gt; via jcl-slf4j) but are ending up with<br/>\n&gt;&gt; Null loggers.<br/>\n&gt;&gt; (2) jcl-slf4j is not initialised _until_ those classes are called.<br/>\n&gt;&gt;<br/>\n&gt;&gt; If I disable parallelism the code works correctly, implying an order<br/>\n&gt;&gt; of initialisation issue.<br/>\n&gt;&gt;<br/>\n&gt;&gt; According to the most recent FAQ on Junit.org (Section 5, #3) I could<br/>\n&gt;&gt; use @BeforeClass and @AfterClass at the class<br/>\n&gt;&gt; level but I&#39;m talking about at the global level, something that needs<br/>\n&gt;&gt; to be executed even if only a single test is run.<br/>\n&gt;&gt;<br/>\n&gt;&gt; What is the correct method to add global, one-time, setup / tear-down<br/>\n&gt;&gt; hooks? In this case they would need to execute and<br/>\n&gt;&gt; complete (i.e. blocking) before any parallel tests are run.<br/>\n&gt;&gt; Is it simplest to override the Runner and initialise the logging in code<br/>\n&gt;&gt; there?<br/>\n&gt;&gt;<br/>\n&gt;&gt; Thanks,<br/>\n&gt;&gt;<br/>\n&gt;&gt; Best Regards,<br/>\n&gt;&gt;<br/>\n&gt;&gt; Brett<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n<br/>\n-- <br/>\nBest Regards,<br/>\n<br/>\nBrett Delle Grazie </span></blockquote></div>", 
    "prevInTime": 23976, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1346840368", 
    "canDelete": false, 
    "nextInTopic": 23978, 
    "prevInTopic": 23976, 
    "headers": {
        "inReplyToHeader": "PENBTHJ3LVB3d0FHczZfX053WEdma2lHXy1McD1RRFlwZXlDaS1iPXJLcTlYLXQzZFZxUUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBQ0xEMD02N1lUMTFxOTUxdmlhWHNtQkorTExzcm89M01TMXUyZGI3cW9ya3hIK1JNUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBQ0xEMD02eERHZ3B4RWFiK00yaFlDRnlEd3VDVVNnLXF5YS1MQ1lxanhjOU9abXpKQUBtYWlsLmdtYWlsLmNvbT4JPENBTHJ3LVB3d0FHczZfX053WEdma2lHXy1McD1RRFlwZXlDaS1iPXJLcTlYLXQzZFZxUUBtYWlsLmdtYWlsLmNvbT4="
    }
}