{
    "numMessagesInTopic": 52, 
    "nextInTime": 4557, 
    "senderId": "ZqaZQONZajYIJ7ZtPDMDLCsO45UGSq6cd3p_IFPATYEauaOMOp4Ie1m-RfvMTiwQwwhylIzR7uEuy2iWEq3Unko2lB-uXL7rmuepMemo2WEViNED", 
    "systemMessage": false, 
    "subject": "Re: [junit] testing private methods", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... [Not a reply to the poster, but to the group.] OK, folks. I have never given a satisfactory reason why you should listen to JUnit when it tells you that it", 
    "msgId": 4556, 
    "profile": "nails762", 
    "topicId": 3179, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "messageBody": "<div id=\"ygrps-yiv-1165105054\"><blockquote><span title=\"ireply\">&gt;Ives Aerts wrote:<br/>\n&gt;<br/>\n&gt; &gt; On Fri, Mar 29, 2002 at 01:37:41PM -0600, David Stagner wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt;&gt;If you want to test private methods directly, you must run your<br/>\n&gt; &gt;&gt;tests as inner classes.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Not entirely true.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Since JDK1.2, reflection can be used to circumvent the<br/>\n&gt; &gt; protected/private/package private access control mechanism; provided<br/>\n&gt; &gt; that the client wishing to do so has a<br/>\n&gt; &gt; ReflectPermission(&quot;suppressAccessChecks&quot;) permission.<br/>\n&gt; &gt;<br/>\n&gt; &gt; See java.lang.class.getDeclaredMethods(),<br/>\n&gt; &gt;     java.lang.reflect.Method and<br/>\n&gt; &gt;     java.lang.reflect.AccessibleObject.<br/>\n&gt;<br/>\n&gt;From: David Stagner &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:dstagner@...\">dstagner@...</a>&gt;<br/>\n&gt;<br/>\n&gt;Does this solve the problem, though? &lt;snip /&gt;<br/>\n&gt;It still smells to me. It just changes the smell of wanting to violate<br/>\n&gt;object access controls rules to the smell of a bunch of complex<br/>\n&gt;indirection for a simple method call. Of course, one could argue that<br/>\n&gt;i&#39;m being fundamentalist and preoccupied with methodology rather than<br/>\n&gt;JUnit. But a How without a Why is a smell too, and a horribly common<br/>\n&gt;smell in programming.<br/>\n<br/>\n </span></blockquote>[Not a reply to the poster, but to the group.]<br/>\n<br/>\nOK, folks. I have never given a satisfactory reason why you should listen to <br/>\nJUnit when it tells you that it wants your methods to be public, rather than <br/>\nprivate. Try this explanation on for size:<br/>\n<br/>\nYou have a class Outer with about three or four private methods. The methods <br/>\nhave arisen from some coding activity -- perhaps refactoring, perhaps a <br/>\ndesire to keep implementation details hidden. Now you have found a bug in <br/>\nyour code, so you&#39;d like to test a private method on its own. Surely *it* is <br/>\nthe source of your problems.<br/>\n<br/>\nWell, since the main behavior of Outer is correct, but some implementation <br/>\ndetail has a problem, likely your private method doesn&#39;t quite fit inside <br/>\nOuter. If it were truly meant to be in Outer, the fact that it fails would <br/>\nmean that Outer is intrinsically broken; however, you feel like Outer <br/>\nessentially works, except for this little detail.<br/>\n<br/>\nSince the private method doesn&#39;t really fit in Outer, you imagine that it&#39;s <br/>\npart of a small class Inner &quot;hiding inside&quot; Outer. Create the class Inner, <br/>\nmove the private method into it and now the method is either package-scope <br/>\nor public. If it is package scope, then put tests into the same package <br/>\nusing the parallel source tree technique people around here suggest. (I&#39;ve <br/>\nnever used it before, so I&#39;ll have to try it out to see whether I like it.) <br/>\nIf it is public scope, then put the tests anywhere you like.<br/>\n<br/>\nIn summary, by wanting to test an implementation detail on its own, you are <br/>\nidentifying a part of the class that really represents a very lightweight <br/>\ncollaborator of that class. (Think about it for a while.) At that moment, <br/>\nyou have made the implicit design decision that the method belongs <br/>\nelsewhere. As soon as you do that, it becomes easier to test. Notice that <br/>\n&quot;easier to test&quot; and &quot;feature envy&quot; are mutually opposing forces.<br/>\n<br/>\nComments?<br/>\n<br/>\nJ. B. Rainsberger<br/>\nPresident, Diaspar Software Services<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com\">http://www.diasparsoftware.com</a><br/>\nLet&#39;s build software that people understand<br/>\n<br/>\n<br/>\n_________________________________________________________________<br/>\nGet your FREE download of MSN Explorer at <a rel=\"nofollow\" target=\"_blank\" href=\"http://explorer.msn.com/intl.asp.\">http://explorer.msn.com/intl.asp.</a></div>", 
    "prevInTime": 4555, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1017773696", 
    "canDelete": false, 
    "nextInTopic": 4558, 
    "prevInTopic": 4553, 
    "headers": {
        "messageIdInHeader": "PEY4NUM5czdSb3lUNUJEb1hoclMwMDAwYTdkMUBob3RtYWlsLmNvbT4="
    }
}