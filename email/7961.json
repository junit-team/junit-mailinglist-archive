{
    "numMessagesInTopic": 31, 
    "nextInTime": 7962, 
    "senderId": "J-TvuMzIPnAaOe51DkM9s-WGjyj_gmWRqISbJmPRpcY0N4tjMRsZCmeO6HrgJMpzgsPuJlLXcZpe6NbumuHNjMqrrw3BSjdH", 
    "systemMessage": false, 
    "subject": "Re: question about Assert.assertEquals", 
    "from": "&quot;cyril3b2&quot; &lt;cyril@...&gt;", 
    "authorName": "cyril3b2", 
    "msgSnippet": "Dear all, Thanks a lot fort your help, I understand now why I was wrong. Thanks again, Best, Cyr.- ... code ... equals ... to ... a ... would ... its ... ", 
    "msgId": 7961, 
    "profile": "cyril3b2", 
    "topicId": 7948, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 130494949, 
    "messageBody": "<div id=\"ygrps-yiv-1352774020\">Dear all,<br/>\n<br/>\nThanks a lot fort your help, I understand now why I was wrong.<br/>\nThanks again,<br/>\n<br/>\nBest,<br/>\nCyr.-<br/>\n<br/>\n-- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Kevin Klinemeier &lt;zipwow@y...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; --- &quot;J. B. Rainsberger&quot; &lt;jbrains@r...&gt; wrote:<br/>\n&gt; &gt; I read your conclusion to be that it is therefore all right to <br/>\n </span></blockquote>code<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; equals() in such a way as to report falsely that two objects are<br/>\n&gt; &gt; equal, because there&#39;s no way to make a superclass and subclass<br/>\n&gt; &gt; follow the equals() contract. Is that what you are saying? <br/>\n&gt; <br/>\n&gt; Well, kind of.  What I&#39;m saying is that when you&#39;re subclassing <br/>\n </span></blockquote>equals<br/>\n<blockquote><span title=\"ireply\"> &gt; from anywhere but Object, you have to decide which way you want it <br/>\n </span></blockquote>to<br/>\n<blockquote><span title=\"ireply\"> &gt; break.<br/>\n&gt; <br/>\n&gt; &gt; If it is,<br/>\n&gt; &gt; then I think it&#39;s all the more important to implement equals() in <br/>\n </span></blockquote>a<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; failsafe way, since Bloch claims (and I don&#39;t doubt him, but I <br/>\n </span></blockquote>would<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; need to think about it) that a subclass with more attributes than <br/>\n </span></blockquote>its<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; superclass cannot be equal to it.<br/>\n&gt; <br/>\n&gt; I think this is the confusion... What he&#39;s said is that you cannot<br/>\n&gt; override equals without breaking either symmetry or transitivity <br/>\n </span></blockquote>(which<br/>\n<blockquote><span title=\"ireply\"> &gt; is what I&#39;m interpreting you to mean when you say &#39;in a failsafe <br/>\n </span></blockquote>way&#39;).<br/>\n<blockquote><span title=\"ireply\"> &gt;  <br/>\n&gt; <br/>\n&gt; You can write a subclass that reports itself equal to the <br/>\n </span></blockquote>superclass. <br/>\n<blockquote><span title=\"ireply\"> &gt; In fact, you can&#39;t avoid it, and that&#39;s the problem.<br/>\n&gt; <br/>\n&gt; If you use the instanceof approach, then (as you point out) you&#39;re<br/>\n&gt; breaking symmetry.<br/>\n&gt; <br/>\n&gt; However, if you go with a different approach, say ignoring the added<br/>\n&gt; characteristic, you break transitivity.  Bloch&#39;s example from <br/>\n </span></blockquote>Effective<br/>\n<blockquote><span title=\"ireply\"> &gt; Java has a ColoredPoint that has a new attribute color.  <br/>\n </span></blockquote>ColoredPoints<br/>\n<blockquote><span title=\"ireply\"> &gt; need to be different if they&#39;re different colors.  But what happens<br/>\n&gt; when they&#39;re compared to regular Points?<br/>\n&gt; <br/>\n&gt; instanceof approach (breaks symmetry)<br/>\n&gt; <br/>\n&gt; public boolean equals(Object o) {<br/>\n&gt;   if (o ! instanceof ColoredPoint) {<br/>\n&gt;      return false;<br/>\n&gt;   }...<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; I think this is the one you&#39;re warning about.  If you have a Point <br/>\n </span></blockquote>and<br/>\n<blockquote><span title=\"ireply\"> &gt; a ColoredPoint of the same coordinates:<br/>\n&gt; <br/>\n&gt; point.equals(coloredPoint)  (true)<br/>\n&gt; coloredPoint.equals(point)  (false)<br/>\n&gt; <br/>\n&gt; So, how do you fix that?  Do you special-case the subclass?<br/>\n&gt; <br/>\n&gt; public boolean equals(Object o) {<br/>\n&gt;   if (o instanceof Point) {<br/>\n&gt;      //do color-blind comparison<br/>\n&gt;   }...<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; This gives you equals for both cases, but consider the following <br/>\n </span></blockquote>with a<br/>\n<blockquote><span title=\"ireply\"> &gt; red, blue, and uncolored point:<br/>\n&gt; <br/>\n&gt; bluePoint.equals(point);  (true)<br/>\n&gt; point.equals(redPoint); (true)<br/>\n&gt; bluePoint.equals(redPoint) (false)<br/>\n&gt; <br/>\n&gt; This breaks transitivity (if x=y and y=z, then x = z must be true).<br/>\n&gt; <br/>\n&gt; I guess if you change the equals clause of Point to return false for<br/>\n&gt; ColoredPoints you can solve this, but then you&#39;re polluting your<br/>\n&gt; superclass equals method with knowledge of each subclass.<br/>\n&gt; <br/>\n&gt; So, in summary, I&#39;m saying that if you subclass an equals for <br/>\n </span></blockquote>anything<br/>\n<blockquote><span title=\"ireply\"> &gt; but Object, you&#39;re going to break it.  Be sure that you break it in <br/>\n </span></blockquote>a<br/>\n<blockquote><span title=\"ireply\"> &gt; way that you expect.  Does that make sense?<br/>\n&gt; <br/>\n&gt; Oh, Bloch recommends that in this case you &quot;favor composition over<br/>\n&gt; inheritence&quot;, and have ColoredPoint not extend Point, but pass <br/>\n </span></blockquote>through<br/>\n<blockquote><span title=\"ireply\"> &gt; all the common methods to Point, and provide a view method called<br/>\n&gt; asPoint().  I haven&#39;t thought through the ramifications of that.<br/>\n&gt; <br/>\n&gt; Lastly, for the original poster, before J.B. reminds me of it:  be <br/>\n </span></blockquote>sure<br/>\n<blockquote><span title=\"qreply\"> &gt; you override hashCode as well, or funny things will happen in your<br/>\n&gt; maps.<br/>\n&gt; <br/>\n&gt; -Kevin<br/>\n&gt; <br/>\n&gt; __________________________________<br/>\n&gt; Do you Yahoo!?<br/>\n&gt; The New Yahoo! Search - Faster. Easier. Bingo.<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://search.yahoo.com\">http://search.yahoo.com</a> </span></blockquote></div>", 
    "prevInTime": 7960, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1052293908", 
    "canDelete": false, 
    "nextInTopic": 7962, 
    "prevInTopic": 7956, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwNTA3MDAwODUwLjIzNjU4LnFtYWlsQHdlYjgwNTEwLm1haWwueWFob28uY29tPg==", 
        "messageIdInHeader": "PGI5YWR1aythYWxuQGVHcm91cHMuY29tPg=="
    }
}