{
    "numMessagesInTopic": 20, 
    "nextInTime": 23700, 
    "senderId": "g4wT4HwAKwA-Z2kgngJTGdE4SBcTPhIK_hwEYguTAAf57Kihk5PwZmSRGpyloYVgCCZGvB2FNXQHijvACzq0Ue99_iw", 
    "systemMessage": false, 
    "subject": "Re: [junit] UI tests in Eclipse on MAC", 
    "from": "Dale Emery &lt;dale@...&gt;", 
    "authorName": "Dale Emery", 
    "msgSnippet": "Hi Shaun, You re calling methods that are described as not threadsafe. That is, while your method is running on one thread, some other thread (the Swing", 
    "msgId": 23699, 
    "profile": "dhemery@ymail.com", 
    "topicId": 23594, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 5352550, 
    "messageBody": "<div id=\"ygrps-yiv-95263756\">Hi Shaun,<br/>\n<br/>\nYou&#39;re calling methods that are described as not threadsafe. That is, while your method is running on one thread, some other thread (the Swing &quot;event&quot; thread) might come along and fiddle with the same component you&#39;re fiddling with.<br/>\n<br/>\nI wonder if that&#39;s part of the problem. If it is, the way to solve the problem is to invoke the non-threadsafe methods via SwingUtilities.invokeLater() or SwingUtilities.invokeAndWait().<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://download.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater(\">http://download.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater(</a>java.lang.Runnable)<br/>\n<br/>\nDale<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Sep 23, 2011, at 10:28 AM, shca08_junit wrote:<br/>\n<br/>\n&gt; <br/>\n&gt; Mac OS 10.6.8<br/>\n&gt; Eclipse Helios<br/>\n&gt; JDK 1.6_26<br/>\n&gt; <br/>\n&gt; import java.awt.AWTException;<br/>\n&gt; import java.awt.Robot;<br/>\n&gt; import java.awt.event.ActionEvent;<br/>\n&gt; import java.awt.event.ActionListener;<br/>\n&gt; import java.awt.event.InputEvent;<br/>\n&gt; <br/>\n&gt; import javax.swing.JButton;<br/>\n&gt; import javax.swing.JFrame;<br/>\n&gt; import javax.swing.JOptionPane;<br/>\n&gt; <br/>\n&gt; import junit.framework.TestCase;<br/>\n&gt; <br/>\n&gt; public class FrameTest extends TestCase<br/>\n&gt; {<br/>\n&gt; JFrame frame;<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public void setUp()<br/>\n&gt; {<br/>\n&gt; frame = new JFrame();<br/>\n&gt; frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br/>\n&gt; JButton btn = new JButton(&quot;click&quot;);<br/>\n&gt; btn.addActionListener(new ActionListener()<br/>\n&gt; {<br/>\n&gt; @Override<br/>\n&gt; public void actionPerformed(ActionEvent e)<br/>\n&gt; {<br/>\n&gt; JOptionPane.showMessageDialog(frame, &quot;Hello&quot;);<br/>\n&gt; }<br/>\n&gt; });<br/>\n&gt; frame.add(btn);<br/>\n&gt; frame.pack();<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public void testShowFrame() throws AWTException<br/>\n&gt; {<br/>\n&gt; frame.setVisible(true);<br/>\n&gt; frame.setExtendedState(JFrame.ICONIFIED);<br/>\n&gt; frame.setExtendedState(JFrame.MAXIMIZED_BOTH);<br/>\n&gt; Robot robot = new Robot();<br/>\n&gt; robot.delay(2000);<br/>\n&gt; robot.mouseMove(500, 500);<br/>\n&gt; robot.delay(2000);<br/>\n&gt; robot.mousePress(InputEvent.BUTTON1_MASK);<br/>\n&gt; robot.mouseRelease(InputEvent.BUTTON1_MASK);<br/>\n&gt; robot.delay(2000);<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; If you add a main() method and run as an App, it works. If you run it as a JUnit testcase, it works. But if you run it as a plugin test (which requires it to be in a plugin project) using the default args, it always fails (in diff ways). Removing the args and any unnecessary plugins gets it mostly working. However, a couple other things don&#39;t always work - like trying to select submenus.<br/>\n&gt; <br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Marc Philipp &lt;mphilipp82@...&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Can you please provide a minimal non-working example?<br/>\n&gt; &gt; <br/>\n&gt; &gt; Am 22.09.2011 um 17:12 schrieb shca08_junit &lt;jacsmit09@...&gt;:<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; Hi Marc,<br/>\n&gt; &gt; <br/>\n&gt; &gt; Our app uses OSGi - so the different components are plugins. The only way to<br/>\n&gt; &gt; test it is to use JUnit plugin tests.<br/>\n&gt; &gt; <br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Marc Philipp &lt;mphilipp82@&gt; wrote:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Shaun,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; since you seem to be using FEST you must be using Swing not SWT, right?<br/>\n&gt; &gt; Why would you want to run such a test as a JUnit plugin test?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Marc<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Am 15.09.2011 um 16:58 schrieb shca08_junit:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Hi Dale,<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Thanks for your reply. Ok so I wrote a simple test that shows a JFrame<br/>\n&gt; &gt; and uses Java Robot to click on it. Works fine run in Eclipse on Mac as an<br/>\n&gt; &gt; application or JUnit test but fails when run as JUnit plugin test. Frame<br/>\n&gt; &gt; would show 1 out of 5 or so times. Removing all unneeded plugins resulted in<br/>\n&gt; &gt; frame always being shown but the click never seems to happen.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; I also tried Window Licker and the included Calculator test(s) - same<br/>\n&gt; &gt; thing... runs as a JUnit Test but fails as a JUnit Plugin Test. One time the<br/>\n&gt; &gt; frame was shown, but nothing happened (so the test failed). The other times,<br/>\n&gt; &gt; the frame didn&#39;t even show. Tried removing all VM args and unnecessary<br/>\n&gt; &gt; plugins.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Is this related to the args that Eclipse uses to run plugin tests on<br/>\n&gt; &gt; Mac? Or the core plugins included to run the tests? Or...?<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Shaun.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Dale Emery &lt;dale@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Hi whoever you are,<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Hi - thanks for your reply. I&#39;m actually using Alex Ruiz&#39;s FEST for<br/>\n&gt; &gt; our testing and it works quite well on Windows. With or without FEST on the<br/>\n&gt; &gt; Mac, I can&#39;t seem to get any UI tests to run. The initial frame/window comes<br/>\n&gt; &gt; up in some cases but I can&#39;t do much more than that. When running JUnit<br/>\n&gt; &gt; tests (again with or without FEST), I don&#39;t even see the frame.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; I&#39;ve gone through what docs there are for FEST and have read the<br/>\n&gt; &gt; blog/article but I can&#39;t figure it out.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; I&#39;ve used FEST to test Swing code on a toy project:<br/>\n&gt; &gt; &gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/dhemery/towers.dead\">https://github.com/dhemery/towers.dead</a><br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Later I restarted the project and used WindowLicker instead:<br/>\n&gt; &gt; &gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/dhemery/Towers\">https://github.com/dhemery/Towers</a><br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; It&#39;s been a while since I visited either project, but I think the<br/>\n&gt; &gt; (few) UI tests run. Neither version of the code does much, so there aren&#39;t<br/>\n&gt; &gt; many UI tests. The older one (which uses FEST) has more features and tests.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; I wrote all of this code on Macs running Snow Leopard and Eclipse<br/>\n&gt; &gt; Ganymede. I haven&#39;t tried it on Lion or Helios.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Dale<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; --<br/>\n&gt; &gt; &gt; &gt; &gt; Dale Emery<br/>\n&gt; &gt; &gt; &gt; &gt; Consultant to software teams and leaders<br/>\n&gt; &gt; &gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://dhemery.com\">http://dhemery.com</a><br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; <br/>\n<br/>\n--<br/>\nDale Emery<br/>\nConsultant to software teams and leaders<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://dhemery.com\">http://dhemery.com</a><br/>\n<br/>\n<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 23698, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1316802902", 
    "canDelete": false, 
    "nextInTopic": 23700, 
    "prevInTopic": 23698, 
    "headers": {
        "inReplyToHeader": "PGo1aWZqOSttcWdwQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDZGRkEwNDhDLTQyMzctNEQ5RC04OTU3LUFCNzgwOEQwQzRCNEBkaGVtZXJ5LmNvbT4=", 
        "referencesHeader": "PGo1aWZqOSttcWdwQGVHcm91cHMuY29tPg=="
    }
}