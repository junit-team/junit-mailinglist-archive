{
    "numMessagesInTopic": 10, 
    "nextInTime": 24635, 
    "senderId": "h-AAUdLACiQbraCUkDmnAyAgsoM4Q45raMY7XwkFFOLBPs_uz6rYrgTnv4Ue5_sX_CMn7Z3mnuK1Jg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Decoupling JUnit and Hamcrest", 
    "from": "nat.pryce@...", 
    "authorName": "", 
    "msgSnippet": "Hi.  Nat Pryce here... I m hoping that the hamcrest-junit project will be able to alleviate the risks you (rightly) are worried about.  In fact that s why", 
    "msgId": 24634, 
    "profile": "nat_pryce", 
    "topicId": 24625, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 216973656, 
    "messageBody": "<div id=\"ygrps-yiv-1285329971\">Hi. &nbsp;Nat Pryce here...<div><br></div><div>I&#39;m hoping that the hamcrest-junit project will be able to alleviate the risks you (rightly) are worried about. &nbsp;In fact that&#39;s why we&#39;re writing it.</div><div><br></div><div>Some background...</div><div><br></div><div>Hamcrest offers three levels of API:</div><div><br></div><div>1) An API used by libraries that want to parametrise behaviour by a predicate and be able to describe failed matches (the Matcher interface and StringDescription class).</div><div>2) An API used to implement new Matchers (various abstract classes that implement Matcher)</div><div>3) A library of compositional matchers, and syntactic sugar (factory functions) for making expressions that compose matchers easy to read.</div><div><br></div><div>API 1 has been very stable. &nbsp;Since it was defined in 2001 (or thereabouts) it has been changed twice: repackaged when factored out of jMock and gained the describeMismatch method on the Matcher interface. Thanks to API 2 we were able to add the&nbsp;describeMismatch method&nbsp;without breaking code that implemented Matcher. &nbsp;API 3 has been&nbsp;much more volatile, due to some historical poor design decisions and mistakes about generic type bounds. &nbsp;We want to change the library and deprecate/delete badly defined matchers, and reorganise matchers for collections, strings, etc. into a more consistent structure.</div><div><br></div><div>JUnit uses all three APIs. &nbsp;It calls out to API 1 in the assertThat and assumeThat methods. It stores a reference to a Matcher in the AssumptionViolatedException. It uses API 2 to define its own matcher classes. And it uses matchers from API 3 internally.</div><div><br></div><div>The hamcrest-junit library reduces coupling between Hamcrest and JUnit. &nbsp;It only uses public JUnit classes and it doesn&#39;t pass any Hamcrest types to those classes (only Strings). &nbsp;JUnit&#39;s public API has been very stable over the years, and hamcrest-junit should therefore remain compatible with future versions of JUnit 4 with no further changes.</div><div><br></div><div>So the main worry is the compatibility with future versions of Hamcrest. &nbsp;Similarly, I plan to reduce how much hamcrest-junit uses API 3 &amp; 2 and try to use mostly the Matcher interface.</div><div><br></div><div>If JUnit then removes hamcrest from its internal implementation, then hopefully we end up with two libraries that can work together, but with a much smaller, more stable interface between them.</div><div><br></div><div>As soon as it is required (when Hamcrest 2.0.0.0-RC1 or JUnit-4.13 is released) I intend to set up a Travis build matrix to report compatibility among hamcrest, and junit versions.</div><div class=\"ygrps-yiv-1285329971ygroups-quoted\"><br><br>---In junit@yahoogroups.com, &lt;stefan@...&gt; wrote :<br><br><div id=\"ygrps-yiv-1285329971ygrps-yiv-607405558\">\nHi,<br>\n<br>\nI&#39;m not a developer of junit nor hamcrest and I don&#39;t feel the pain\nof the tight integration of junit and hamcrest that &quot;prevents both\nfrom moving on&quot; but I&#39;m a heavy user of both.<br>\nI don&#39;t think it&#39;s a good idea to separate the hamcrest integration\nfrom junit into it&#39;s own library.<br>\n<br>\nAt the moment JUnit dictates the hamcrest version to be used but\nalso guarantees compatibility with this version.<br>\nWith the new library hamcrest developers will dictate the junit\nversion that is compatible with a specific hamcrest release. This is\nonly a change in responsibility but has no benefits.<br>\n<br>\nOf course there is also the opportunity to provide a broader range\nof compatible versions. But this opportunity also means more work\nfor the maintainers and slower adoption by users. JUnit 4.12 uses\nhamcrest 1.3. What if JUnit moves on to 4.13, 4.14 and hamcrest\nreleases 2.0 and 2.1 respectively. Will there be a version which is\ncompatible with hamcrest 2.1 and JUnit 4.13? Will there be a version\nwhich is compatible with JUnit 4.14 and hamcrest 1.3?<br>\n<br>\nAs a developer who want&#39;s to use JUnit 4.14 - <b>how do I know\nwhich hamcrest-junit-integration version to use? What will stop me\nfrom using a wrong version?</b> For example I might be tempted to\nupdate JUnit to 4.14 but forget to update\nhamcrest-junit-integration. There might be changes of the behaviour\nof JUnit that might cause some of my tests to pass always although\nthey should fail. On the other hand: JUnit 4.14 might be binary\nincompatible to JUnit 4.12 - where to look for the right version of\nhamcrest-junit-integration?<br>\n<br>\nIf hamcrest moves on to 2.0 - which could be binary incompatible to\n1.3 due to the major version change (haven&#39;t checked) - <b>how long\nwill hamcrest 1.3 be supported with latest JUnit versions by\nhamcrest-junit-integration?</b> I&#39;m asking because we also use\nJMock which depends on hamcrest as well. If I update to an\nincompatible 2.0 I need also an update of JMock....<br>\n(( Actually I cannot update JMock without big effort because there\nwas an incompatible change from 2.5.1 to 2.6 .... ))<br>\n<br>\nOn the other hand this will slow down speed for adoption of new\nJUnit versions because we have to wait until a new\nhamcrest-junit-integration version is out or at least someone has\nbuilt the appropriate version with latest JUnit release and verified\nunit tests are still passing. It will also increase the effort\nnecessary to try JUnit release candidates or snapshots in real\nprojects (because I also have to checkout and build the integration\nlibrary myself to be sure there is no problem with that... and if\nthere is a problem I need to fix it myself or stop using latest\nJUnit release candidate).<br>\n<br>\n----<br>\nIMHO decoupling JUnit and hamcrest has more drawbacks than benefits.\nAlthough I see it can be a chance for hamcrest to move on. I don&#39;t\nthink JUnit as a project will profit that much. JUnit users might\nhave a broader choice of compatible hamcrest versions but this\nrequires some effort (of the maintainers of\nhamcrest-junit-integration). I think this might only work well for\nJUnit users if the JUnit team commits to that integration project\nand is able to push out new releases of the\nhamcrest-junit-integration together with new JUnit releases.<br>\n<br>\n<br>\nRegards,<br>\nStefan<br>\n<br>\n<br><div class=\"ygrps-yiv-1285329971ygrps-yiv-607405558moz-cite-prefix\">Am 07.01.2015 um 08:31 schrieb Stefan\nBirkner <a rel=\"nofollow\" class=\"ygrps-yiv-1285329971ygrps-yiv-607405558moz-txt-link-abbreviated\" target=\"_blank\" href=\"mailto:mail@...\">mail@...</a> [junit]:<br></div><blockquote><span title=\"qreply\"> <blockquote><span class=\"ygrps-yiv-1285329971\">  <span>&nbsp;</span><div id=\"ygrps-yiv-1285329971ygrps-yiv-607405558ygrp-text\"><p>FYI: Nat Pryce took a first step for decoupling JUnit and\nHamcrest:<br>\n<a rel=\"nofollow\" class=\"ygrps-yiv-1285329971ygrps-yiv-607405558moz-txt-link-freetext\" target=\"_blank\" href=\"http://natpryce.com/articles/000806.html\">http://natpryce.com/articles/000806.html</a><br></p></div></span></blockquote> \n<br>\n</span></blockquote></div></div></div>", 
    "prevInTime": 24633, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1421104854", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 24633, 
    "headers": {
        "inReplyToHeader": "PDU0QUVFQ0EwLjgwMTA5MDVAY3lwaG9yaWEubmV0Pg==", 
        "messageIdInHeader": "PG05MWtzbStxdHNka3ZAWWFob29Hcm91cHMuY29tPg==", 
        "referencesHeader": "PENBSGhZVko1OGN1NU1DS3FkYVZmR3E2OVI2MDI2Z2tOVUZBNVBDNFJrRms0TmFlU2lSQUBtYWlsLmdtYWlsLmNvbT4JPDU0QUVFQ0EwLjgwMTA5MDVAY3lwaG9yaWEubmV0Pg=="
    }
}