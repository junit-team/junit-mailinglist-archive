{
    "numMessagesInTopic": 4, 
    "nextInTime": 15707, 
    "senderId": "5jbepLbHVde7ZTv6-_-rb2V3lGor_MbtYveDKhPMfxAgzqzlwXk8F57NCmf72M1RkkBWd5G5PiUlyRwKRtJ6LfG8HuiQssh-4AZwxdaSzaD5ebR9KA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Class.getClassLoader().getResourceAsStream() fails in GUI test runners?", 
    "from": "jason r tibbetts &lt;tibbettj@...&gt;", 
    "authorName": "jason r tibbetts", 
    "msgSnippet": "... I solved it myself. The problem was that an absolute resource path like: /users/me/some/properties/file/path.properties works fine when for the", 
    "msgId": 15706, 
    "rawEmail": "Return-Path: &lt;tibbettj@...&gt;\r\nX-Sender: tibbettj@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 59742 invoked from network); 16 Dec 2005 16:12:04 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m22.grp.scd.yahoo.com with QMQP; 16 Dec 2005 16:12:04 -0000\r\nReceived: from unknown (HELO mailhost2.sra.com) (163.252.31.55)\n  by mta5.grp.scd.yahoo.com with SMTP; 16 Dec 2005 16:12:04 -0000\r\nReceived: from verdi.iisd.sra.com ([163.252.29.9]) by mailhost2.sra.com with Microsoft SMTPSVC(6.0.3790.211);\n\t Fri, 16 Dec 2005 11:07:23 -0500\r\nReceived: from [163.252.3.3] (exaiphnes [163.252.3.3])\n\tby verdi.iisd.sra.com (8.9.3p2/8.9.3) with ESMTP id LAA03116\n\tfor &lt;junit@yahoogroups.com&gt;; Fri, 16 Dec 2005 11:07:21 -0500 (EST)\r\nMessage-ID: &lt;43A2E639.3050407@...&gt;\r\nDate: Fri, 16 Dec 2005 11:07:21 -0500\r\nUser-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.7) Gecko/20040517\r\nX-Accept-Language: en-US, en, ja, ko\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;43A1876A.1050603@...&gt;\r\nIn-Reply-To: &lt;43A1876A.1050603@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nReturn-Path: tibbettj@...\r\nX-OriginalArrivalTime: 16 Dec 2005 16:07:23.0192 (UTC) FILETIME=[CCBD7B80:01C6025A]\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: jason r tibbetts &lt;tibbettj@...&gt;\r\nReply-To: tibbettj@...\r\nSubject: Re: [junit] Class.getClassLoader().getResourceAsStream() fails in\n GUI test runners?\r\nX-Yahoo-Group-Post: member; u=224061497; y=vYt_2g_VOBqydYdcFo52-VrCR6DyJmDiHLY6UNrK7Nh7C1sezYnFmdueDe8rd-65tLoD8g\r\nX-Yahoo-Profile: tibbettj_at_verdi_sra_com\r\n\r\njason r tibbetts wrote:\n&gt; I&#39;m trying to test a class that loads a properties file in a special \n&gt; way. Because this class can be used in servlets (where \n&gt; this.getClass().getResourceAsStream() doesn&#39;t work, because of \n&gt; classloader issues) as well as in ordinary contexts, it takes a Class \n&gt; argument in its constructor. This Class&#39;s class loader is used to get \n&gt; the resource, as in\n&gt; \n&gt;    public Foo(Class cls, String propFilePath) {\n&gt;      ClassLoader loader = cls.getClassLoader();\n&gt;      InputStream in = loader.getResourceAsStream(propFilePath);\n&gt;    }\n&gt; \n&gt; It&#39;s usually sufficient for the caller to simply pass in \n&gt; this.getClass(). It&#39;s sufficient enough for the TestCase that tests it, \n&gt; anyway, /except/ when the test is run in the GUI TestRunner, or in code \n&gt; coverage tools like jcoverage and EMMA. In all three cases, the tests \n&gt; fail because the loader.getResourceAsStream() call returns null. The \n&gt; TestCase&#39;s setUp() constructs the Foo by passing in the TestCase&#39;s own \n&gt; class, as in:\n&gt; \n&gt;    foo = new Foo(this.getClass(), &quot;some/path&quot;);\n&gt; \n&gt; Other tests that load properties (in the usual way, via \n&gt; this.getClass.getResourceAsStream()) work just fine in all scenarios.\n&gt; \n&gt; I&#39;ve read the JUnit FAQ, mailing list archives, J.B.&#39;s book, the \n&gt; jcoverage and EMMA docs, etc., all to no avail. I know that the JUnit \n&gt; GUI test runners do use a custom classloader, but the custom \n&gt; functionality in that classloader don&#39;t appear to be relevant here. Nor \n&gt; do I want to add Foo&#39;s package to the excluded.properties, because \n&gt; that&#39;s a package that I&#39;m actively testing.\n\nI solved it myself. The problem was that an absolute resource path like:\n\n   /users/me/some/properties/file/path.properties\n\nworks fine when for the command-line tester, Ant &lt;test&gt;, and Maven test. \nBut the Swing TestRunner and code coverage tools don&#39;t resolve the \nleading &#39;/&#39; correctly, so they expect a path like:\n\n   users/me/some/properties/file/path.properties\n\nI don&#39;t know why, but I&#39;m particularly embarassed by this because it&#39;s \nnot a testing problem at all--I encountered it months ago when I first \nused this Foo class in a servlet. If I&#39;d just looked at my own old code, \nI&#39;d&#39;ve found the answer right away.\n\nBut I /still/ don&#39;t understand why I can&#39;t use the leading slash.\n\n", 
    "profile": "tibbettj_at_verdi_sra_com", 
    "topicId": 15698, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 224061497, 
    "prevInTime": 15705, 
    "contentTrasformed": false, 
    "postDate": "1134749241", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 15705, 
    "headers": {
        "inReplyToHeader": "PDQzQTE4NzZBLjEwNTA2MDNAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "messageIdInHeader": "PDQzQTJFNjM5LjMwNTA0MDdAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "referencesHeader": "PDQzQTE4NzZBLjEwNTA2MDNAdmVyZGkuaWlzZC5zcmEuY29tPg=="
    }
}