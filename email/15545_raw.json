{
    "numMessagesInTopic": 21, 
    "nextInTime": 15546, 
    "senderId": "F7IMpmW1LuPDeNspJle1EtTWYOLb2WeFB1bGefb5PNtGFFWGoVRh4nI_Q-hU8QaWKe6HfSOPhYYAybQToB37iVfVhyMaeflI", 
    "systemMessage": false, 
    "subject": "RE: [junit] Expected exception pitfall and pattern", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Jon, I can see the potential problem, but I ve never experienced it so I m not inclined to add anything to the framework to deal with it. The two workarounds I", 
    "msgId": 15545, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 15178 invoked from network); 28 Nov 2005 21:14:55 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m27.grp.scd.yahoo.com with QMQP; 28 Nov 2005 21:14:55 -0000\r\nReceived: from unknown (HELO smtpauth02.mail.atl.earthlink.net) (209.86.89.62)\n  by mta4.grp.scd.yahoo.com with SMTP; 28 Nov 2005 21:14:55 -0000\r\nReceived: from [67.131.9.243] (helo=T42)\n\tby smtpauth02.mail.atl.earthlink.net with asmtp (Exim 4.34)\n\tid 1EgqKt-0006w2-5Z\n\tfor junit@yahoogroups.com; Mon, 28 Nov 2005 16:14:55 -0500\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nDate: Mon, 28 Nov 2005 13:14:51 -0800\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;US-ASCII&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Mailer: Microsoft Office Outlook, Build 11.0.5510\r\nIn-Reply-To: &lt;6EAA8AD82D7EBF478CCE262FA32C6C6401B56A1A@...&gt;\r\nX-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180\r\nthread-index: AcXz+89fSk7EJssrQfCnDECvKPM3AAAYVpSA\r\nMessage-ID: &lt;E1EgqKt-0006w2-5Z@...&gt;\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d4786da3a8623eb9ff684cb45d0bfac7513c3ed4c694d0fabcf7350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Kent Beck&quot; &lt;kentb@...&gt;\r\nSubject: RE: [junit] Expected exception pitfall and pattern\r\nX-Yahoo-Group-Post: member; u=173198504; y=nKeqcwa49q7iZstXa3DeGr-hF-Ls-lHRY_iynMQhDgvFRGNN\r\nX-Yahoo-Profile: kentlbeck\r\n\r\nJon,\n\nI can see the potential problem, but I&#39;ve never experienced it so I&#39;m not\ninclined to add anything to the framework to deal with it. The two\nworkarounds I can see are to write the try/catch yourself or (in the case\nbelow) to move the Account creation to a @Before method. The following test\nwon&#39;t have the problem you note:\n\nAccount account;\n\n@Before public void createAccount() {\n  account= new Account(10);\n}\n\n@Test(expected= IllegalArgumentException.class) public void\nillegalWithdrawl() {\n  account.withdrawCash(-1);\n} \n\nSincerely yours,\n\nKent Beck\nThree Rivers Institute\n\n&gt; -----Original Message-----\n&gt; From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On \n&gt; Behalf Of Jon Skeet\n&gt; Sent: Monday, November 28, 2005 1:12 AM\n&gt; To: junit@yahoogroups.com\n&gt; Subject: [junit] Expected exception pitfall and pattern\n&gt; \n&gt; There is a problem with the @Test(expected=...) pattern which I&#39;m sure\n&gt; has been noted elsewhere. Namely, it covers up problems if \n&gt; the expected\n&gt; exception is thrown at an unexpected point. The desired behaviour is\n&gt; really a try/catch around one particular line of code. For instance:\n&gt; \n&gt; @Test(expected=IllegalArgumentException.class)\n&gt; public void test()\n&gt; {\n&gt;     Account f = new Account(10);\n&gt;     f.withdrawCash(20);\n&gt; }\n&gt; \n&gt; is equivalent to:\n&gt; \n&gt; try\n&gt; {\n&gt;     Account f = new Account(10);\n&gt;     f.withdrawCash(20);\n&gt;     fail(&quot;Expected exception&quot;);\n&gt; }\n&gt; catch (IllegalArgumentException e)\n&gt; {\n&gt; }\n&gt; \n&gt; instead of the desired:\n&gt; \n&gt; Account f = new Account(10);\n&gt; try\n&gt; {\n&gt;     f.withdrawCash(20);\n&gt;     fail(&quot;Expected exception&quot;);    \n&gt; }\n&gt; catch (IllegalArgumentException e)\n&gt; {\n&gt; }\n&gt; \n&gt; \n&gt; Now, there is a way around this (other than writing the code\n&gt; &quot;long-hand&quot;) - by keeping a flag which is checked during \n&gt; tear-down, and\n&gt; only set immediately before the last line of the code:\n&gt; \n&gt; @Test(expected=IllegalArgumentException.class)\n&gt; public void test()\n&gt; {\n&gt;     exceptionFlag.clear();\n&gt;     Account f = new Account(10);\n&gt;     execeptionFlag.set();\n&gt;     f.withdrawCash(20);\n&gt; }\n&gt; \n&gt; If this were only used when the test had an expected \n&gt; exception, it could\n&gt; be cleared on set-up.\n&gt; \n&gt; I *suspect* there&#39;s no point in making this part of the framework\n&gt; itself, but I just wondered whether anyone else had been \n&gt; thinking about\n&gt; it. It&#39;s never *actually* bitten me (as far as I&#39;m aware) when using\n&gt; NUnit, but it&#39;s always been a slight source of concern.\n&gt;  \n&gt; Jon Skeet\n&gt; Senior Software Engineer\n&gt; CLEARSWIFT\n&gt; The MIMEsweeper Company\n&gt; \n&gt; DDI:               +44 (0) 1189  038  109\n&gt; Mobile:           +44 (0) 7970 158 865\n&gt; Switchboard:   +44 (0) 1189  038  903 \n&gt; Fax:               +44 (0) 1189  039  000      \n&gt; Web: www.clearswift.com \n&gt; \n&gt; Clearswift monitors, controls and protects all its messaging \n&gt; traffic in compliance with its corporate email policy using \n&gt; Clearswift products.\n&gt; Find out more about Clearswift, its solutions and services at \n&gt; http://www.clearswift.com\n&gt; \n&gt; This communication is confidential and may contain privileged \n&gt; information intended solely for the named addressee(s). It \n&gt; may not be used or disclosed except for the purpose for which \n&gt; it has been sent. If you are not the intended recipient, you \n&gt; must not copy, distribute or take any action in reliance on \n&gt; it. Unless expressly stated, opinions in this message are \n&gt; those of the individual sender and not of Clearswift. If you \n&gt; have received this communication in error, please notify \n&gt; Clearswift by emailing support@... quoting the \n&gt; sender and delete the message and any attached documents. \n&gt; Clearswift accepts no liability or responsibility for any \n&gt; onward transmission or use of emails and attachments having \n&gt; left the Clearswift domain.\n&gt; \n&gt; This footnote confirms that this email message has been swept \n&gt; by MIMEsweeper for Content Security threats, including \n&gt; computer viruses.\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; ------------------------ Yahoo! Groups Sponsor \n&gt; --------------------~--&gt; \n&gt; Get fast access to your favorite Yahoo! Groups. Make Yahoo! \n&gt; your home page\n&gt; http://us.click.yahoo.com/dpRU5A/wUILAA/yQLSAA/5cFolB/TM\n&gt; --------------------------------------------------------------\n&gt; ------~-&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n&gt; \n&gt; \n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 15536, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 15544, 
    "contentTrasformed": false, 
    "postDate": "1133212491", 
    "canDelete": false, 
    "nextInTopic": 15549, 
    "prevInTopic": 15540, 
    "headers": {
        "inReplyToHeader": "PDZFQUE4QUQ4MkQ3RUJGNDc4Q0NFMjYyRkEzMkM2QzY0MDFCNTZBMUFAR0VNSU5JLkVVUk9QRS5DTEVBUlNXSUZULkNPTT4=", 
        "messageIdInHeader": "PEUxRWdxS3QtMDAwNncyLTVaQHNtdHBhdXRoMDIubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4="
    }
}