{
    "numMessagesInTopic": 12, 
    "nextInTime": 23977, 
    "senderId": "otLDIOO3y3zYHYVWACgFXq0tjj1V6FMUWa22W3LFx8-7WSQnPZ9MhCWpoifTFRfqTGYEk4eSwC3mCYfuIzPIHMBkvA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Tests starting before Logback initialisation complete when run in parallel", 
    "from": "David Saff &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Brett, There s currently not a good single way to do what you want.  There s current conversation on the github repo about how to do it in a future version,", 
    "msgId": 23976, 
    "profile": "saffatgoogle", 
    "topicId": 23967, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 525765722, 
    "messageBody": "<div id=\"ygrps-yiv-752922999\">Brett,<br/>\n<br/>\nThere&#39;s currently not a good single way to do what you want.  There&#39;s<br/>\ncurrent conversation on the github repo about how to do it in a future<br/>\nversion, but there&#39;s no great first-step answer.<br/>\n<br/>\nOne possibility is to add a @BeforeClass or @ClassRule to each of your<br/>\ntests that would, in a thread-safe way, check if your initialization has<br/>\nalready been performed, and if not, do it.  I know that&#39;s not a great<br/>\nsolution.<br/>\n<br/>\n   David Saff<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Mon, Sep 3, 2012 at 3:51 PM, Brett Delle Grazie &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:bdellegrazie@...\">bdellegrazie@...</a>&gt;wrote:<br/>\n<br/>\n&gt; **<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Hi,<br/>\n&gt;<br/>\n&gt; I&#39;m using JUnit 4.10 with Maven 3.0.4, Surefire 2.12.3, JDK 1.6.0_35<br/>\n&gt; on Windows 7<br/>\n&gt; Surefire is configured with parallel=methods and threadCount=10<br/>\n&gt; For logging, I&#39;m using SLF4J to Logback, initialised by default method<br/>\n&gt; (i.e. configuration file logback-test.xml is on the test classpath)<br/>\n&gt;<br/>\n&gt; I have an order of initialisation problem in that:<br/>\n&gt; (1) Some unit tests test classes that use commons-logging (and logback<br/>\n&gt; via jcl-slf4j) but are ending up with<br/>\n&gt; Null loggers.<br/>\n&gt; (2) jcl-slf4j is not initialised _until_ those classes are called.<br/>\n&gt;<br/>\n&gt; If I disable parallelism the code works correctly, implying an order<br/>\n&gt; of initialisation issue.<br/>\n&gt;<br/>\n&gt; According to the most recent FAQ on Junit.org (Section 5, #3) I could<br/>\n&gt; use @BeforeClass and @AfterClass at the class<br/>\n&gt; level but I&#39;m talking about at the global level, something that needs<br/>\n&gt; to be executed even if only a single test is run.<br/>\n&gt;<br/>\n&gt; What is the correct method to add global, one-time, setup / tear-down<br/>\n&gt; hooks? In this case they would need to execute and<br/>\n&gt; complete (i.e. blocking) before any parallel tests are run.<br/>\n&gt; Is it simplest to override the Runner and initialise the logging in code<br/>\n&gt; there?<br/>\n&gt;<br/>\n&gt; Thanks,<br/>\n&gt;<br/>\n&gt; Best Regards,<br/>\n&gt;<br/>\n&gt; Brett<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 23975, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1346783073", 
    "canDelete": false, 
    "nextInTopic": 23977, 
    "prevInTopic": 23967, 
    "headers": {
        "inReplyToHeader": "PENBQ0xEMD02eERHZ3B4RWFiK00yaFlDRnlEd3VDVVNnLXF5YS1MQ1lxanhjOU9abXpKQUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBTHJ3LVB3d0FHczZfX053WEdma2lHXy1McD1RRFlwZXlDaS1iPXJLcTlYLXQzZFZxUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBQ0xEMD02eERHZ3B4RWFiK00yaFlDRnlEd3VDVVNnLXF5YS1MQ1lxanhjOU9abXpKQUBtYWlsLmdtYWlsLmNvbT4="
    }
}