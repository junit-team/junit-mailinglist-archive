{
    "numMessagesInTopic": 3, 
    "nextInTime": 14798, 
    "senderId": "V5lCKPehmILsUZo81dQmrAaLPYIcgUTt7vd1jio4d_9XzueC9u-blLWpLcGxEQG0sM-Uf9ylAd6lNOxsRpebT--bqSkw2quVnqL8hhapYMw", 
    "systemMessage": true, 
    "subject": "How to aggregate differences instead of asserting just the first difference ?", 
    "from": "&quot;tomj_33&quot; &lt;tomjbr.16324861@...&gt;", 
    "authorName": "tomj_33", 
    "msgSnippet": "For example, if I will parse two files and compare row by row, I would like to see all the differences and not just the first difference. Another situation", 
    "msgId": 14797, 
    "profile": "tomj_33", 
    "topicId": 14797, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 237428311, 
    "messageBody": "<div id=\"ygrps-yiv-1201100321\">For example, if I will parse two files and compare row by row, I <br/>\nwould like to see all the differences and not just the first <br/>\ndifference.<br/>\nAnother situation might be when you want to compare all elements in <br/>\nsome collection, and not just want to see the values of the first <br/>\nfailures.<br/>\n<br/>\nIf there is no good solution within JUnit itself, then maybe there is <br/>\nsome extension ?<br/>\nI started writing some code below, just to illustrate the idea.<br/>\nBut instead of trying to improve this code of mine, which probably <br/>\nwould be to reinvent the wheel, I would prefer to reuse some good <br/>\nexisting code.<br/>\n<br/>\nFor example, when I iterate these Strings and compare each pair of <br/>\nitems normally with JUnit:<br/>\nnew String[][] {<br/>\n\t\t\tnew String[]{&quot;abc&quot;, &quot;abcd&quot;},<br/>\n\t\t\tnew String[]{&quot;def&quot;, &quot;def&quot;},<br/>\n\t\t\tnew String[]{&quot;ghi&quot;, &quot;gghi&quot;},<br/>\n\t\t\tnew String[]{&quot;jkl&quot;, &quot;jkl&quot;}<br/>\n};<br/>\nthen the result will be like this:<br/>\njunit.framework.ComparisonFailure: my message expected:&lt;...&gt; but <br/>\nwas:&lt;...d&gt;<br/>\n\tat junit.framework.Assert.assertEquals(Assert.java:81)<br/>\n<br/>\n<br/>\nHowever, I would instead like this kind of output message:<br/>\njunit.framework.AssertionFailedError: <br/>\n-----------------------<br/>\nmy title<br/>\n<br/>\nItemNumber 1<br/>\nExpected: abc<br/>\nActual:   abcd<br/>\n<br/>\nItemNumber 3<br/>\nExpected: ghi<br/>\nActual:   gghi<br/>\n<br/>\nThe number of items with failures was: 2<br/>\n-----------------------<br/>\n expected:&lt;0&gt; but was:&lt;2&gt;<br/>\n\tat junit.framework.Assert.fail(Assert.java:47)<br/>\n\tat junit.framework.Assert.failNotEquals(Assert.java:282)<br/>\n\tat junit.framework.Assert.assertEquals(Assert.java:64)<br/>\n\tat junit.framework.Assert.assertEquals(Assert.java:201)<br/>\n<br/>\n<br/>\nHere is the code that produced this output:<br/>\n(but I would like to find a better existing framework for this kind <br/>\nof comparisons)<br/>\n<br/>\npublic class AggregatingFailuresTest extends TestCase {<br/>\n<br/>\n\tprivate String[][] getStringArrayOfArrays()<br/>\n\t{<br/>\n\t\t// Of course this method usually is in the class <br/>\n\t\t// under test but for simplicity I just put it here <br/>\n\t\treturn new String[][] {<br/>\n\t\t\t\tnew String[]{&quot;abc&quot;, &quot;abcd&quot;},<br/>\n\t\t\t\tnew String[]{&quot;def&quot;, &quot;def&quot;},<br/>\n\t\t\t\tnew String[]{&quot;ghi&quot;, &quot;gghi&quot;},<br/>\n\t\t\t\tnew String[]{&quot;jkl&quot;, &quot;jkl&quot;}<br/>\n\t\t};<br/>\n\t}<br/>\n\t<br/>\n\tpublic void testGetStringArrayOfArrays() {<br/>\n\t\tAssertionsAggregator oAssertionsAggregator = new <br/>\nAssertionsAggregator(&quot;my title&quot;);<br/>\n\t\tString[][] arrayOfArrays = getStringArrayOfArrays();<br/>\n\t\tString[] a;<br/>\n\t\tfor (int i = 0; i &lt; arrayOfArrays.length; i++) {<br/>\n\t\t\ta = arrayOfArrays[i];<br/>\n\t\t\toAssertionsAggregator.assertEquals(&quot;my <br/>\nmessage&quot;, a[0], a[1]);<br/>\n\t\t\t//assertEquals(&quot;my message&quot;, a[0], a[1]);<br/>\n\t\t}<br/>\n\t\toAssertionsAggregator.doAssertion();<br/>\n\t}<br/>\n\t<br/>\n}<br/>\n<br/>\npublic class AssertionsAggregator {<br/>\n\t\tprivate int itemNumber = 0;<br/>\n\t\tprivate int numberOfItemsWhichAreNotEqual = 0;<br/>\n\t<br/>\n\t\tprivate static final String LINE_WITH_HYPHENS = &quot;-----<br/>\n------------------&quot;;<br/>\n\t\tprivate static final String LINEBREAK = &quot;&#92;n&quot;;<br/>\n\t<br/>\n\t\tprivate StringBuffer messageBuffer = new StringBuffer<br/>\n();<br/>\n\t\t<br/>\n\t\tpublic AssertionsAggregator(String title)<br/>\n\t\t{<br/>\n\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\tmessageBuffer.append(LINE_WITH_HYPHENS);<br/>\n\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\tmessageBuffer.append(title);<br/>\n\t\t\tmessageBuffer.append(LINEBREAK);\t<br/>\n\t\t\t\t<br/>\n\t\t}<br/>\n\t\t<br/>\n<br/>\n\t\tpublic void assertEquals(String message, String <br/>\nexpected, String actual)<br/>\n\t\t{<br/>\n\t\t\titemNumber++;<br/>\n\t\t\tif(!expected.equals(actual))<br/>\n\t\t\t{<br/>\n\t\t\t\tnumberOfItemsWhichAreNotEqual++;<br/>\n\t\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\t\tmessageBuffer.append(&quot;ItemNumber &quot; + <br/>\nitemNumber);<br/>\n\t\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\t\tmessageBuffer.append(&quot;Expected: &quot; + <br/>\nexpected);<br/>\n\t\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\t\tmessageBuffer.append(&quot;Actual:   &quot; + <br/>\nactual);<br/>\n\t\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\t}\t\t\t<br/>\n\t\t\t<br/>\n\t\t}<br/>\n<br/>\n\t\tpublic void doAssertion() {<br/>\n\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\tmessageBuffer.append(&quot;The number of items <br/>\nwith failures was: &quot; + numberOfItemsWhichAreNotEqual);<br/>\n\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\tmessageBuffer.append(LINE_WITH_HYPHENS);<br/>\n\t\t\tmessageBuffer.append(LINEBREAK);<br/>\n\t\t\tAssert.assertEquals(messageBuffer.toString(), <br/>\n0, numberOfItemsWhichAreNotEqual);<br/>\n\t\t}<br/>\n\t<br/>\n}</div>", 
    "prevInTime": 14796, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1126708418", 
    "canDelete": false, 
    "nextInTopic": 14798, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGRnOWNjMis2aXVtQGVHcm91cHMuY29tPg=="
    }
}