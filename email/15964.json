{
    "numMessagesInTopic": 74, 
    "nextInTime": 15965, 
    "senderId": "4TJwWDkU2f9yGvQHH0OzXR4mdY6PQ3OgYoDkhjJ7KqkocpaQegRcUcvzlJJOP94xH88y6vUjYYJK82TGpgLugyzxN85eFLifq_psFw", 
    "systemMessage": false, 
    "subject": "Re: Observations from a production use of JUnit4", 
    "from": "&quot;Ben Maurer&quot; &lt;bmaurer@...&gt;", 
    "authorName": "Ben Maurer", 
    "msgSnippet": "... I thought @RunWith was optional and that you did not have to set it on all classes with tests ... I don t think user programs have the knowledge needed to", 
    "msgId": 15964, 
    "profile": "benjamindavidmaurer", 
    "topicId": 15891, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 256083789, 
    "messageBody": "<div id=\"ygrps-yiv-4946776\">--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;Kent Beck&quot; &lt;kentb@...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, David Saff &lt;saff@m...&gt; wrote:<br/>\n&gt; &gt; &gt; Ben Maurer wrote:<br/>\n&gt; &gt; &gt; &gt; Ant XML output<br/>\n&gt; &gt; &gt; &gt; --------------<br/>\n&gt; &gt; &gt; &gt; [...]<br/>\n&gt; &gt; &gt; &gt; However, in rc2, it looks like:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &lt;testcase classname=&quot;junit.framework.JUnit4TestAdapterCache$2$1&quot; <br/>\n&gt; &gt; &gt; &gt; name=&quot;unknown&quot; time=&quot;0.018&quot;&gt;&lt;/testcase&gt;<br/>\n&gt; &gt; &gt; That doesn&#39;t look good, does it?  If my initial guess as to <br/>\n&gt; &gt; this bug&#39;s <br/>\n&gt; &gt; &gt; source is correct, this will be easily fixed (back to rc1&#39;s<br/>\n&gt; &gt; behavior, at <br/>\n&gt; &gt; &gt; least) soon.<br/>\n&gt; &gt; <br/>\n&gt; &gt; Ok, that&#39;s good. That will at least allow me to upgrade ;-). It&#39;d be<br/>\n&gt; &gt; ideal if we could set the classname to the &quot;real&quot; class name.<br/>\n&gt; &gt; <br/>\n&gt; &gt; Btw, on the topic of JUnit3 tool compat: is it possible to make is so<br/>\n&gt; &gt; we don&#39;t have to write:<br/>\n&gt; &gt; <br/>\n&gt; &gt;         public static junit.framework.Test suite()<br/>\n&gt; &gt;         {<br/>\n&gt; &gt;                 return new<br/>\n&gt; &gt; junit.framework.JUnit4TestAdapter(HashtableTest.class);<br/>\n&gt; &gt;         }<br/>\n&gt; &gt; <br/>\n&gt; &gt; *if* we are using the JUnit4 version of the tools. The logic could be<br/>\n&gt; &gt; something like:<br/>\n&gt; &gt; <br/>\n&gt; &gt; if (I am asked to run a junit3 test on something) {<br/>\n&gt; &gt;    if (any methods have the @Test annotation) {<br/>\n&gt; &gt;       use junit4 behavior<br/>\n&gt; &gt;    }<br/>\n&gt; &gt; <br/>\n&gt; &gt;    fallback<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; If this was done and the classname was set correctly, I think we could<br/>\n&gt; &gt; simulate almost full compat (for simple cases) with junit3 <br/>\n&gt; &gt; based tools.<br/>\n&gt; &gt; <br/>\n&gt; &gt; If you get both/either of these in cvs, I&#39;d be happy to test them out.<br/>\n&gt; <br/>\n&gt; The tip-off that you are dealing with a JUnit 4 test is a class with<br/>\n&gt; @RunWith. A class containing a method with @Test has a @RunWith by<br/>\n&gt; implication.<br/>\n<br/>\n </span></blockquote>I thought @RunWith was optional and that you did not have to set it on<br/>\nall classes with tests<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; &gt; &gt; Stack Trace Filtering<br/>\n&gt; &gt; &gt; &gt; ---------------------<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; The stack trace from junit messages have always been filed with<br/>\n&gt; &gt; junit.*<br/>\n&gt; &gt; &gt; &gt; traces. Ant filters these out. However, now there are <br/>\n&gt; &gt; org.junit things<br/>\n&gt; &gt; &gt; &gt; slipping through. Also, tests with a timeout, have many<br/>\n&gt; &gt; &gt; &gt; java.util.concurrent frames in them. Why leave this kind of<br/>\n&gt; &gt; filtering up<br/>\n&gt; &gt; &gt; &gt; to each tool? JUnit should filter out the frames it knows <br/>\n&gt; &gt; are from it.<br/>\n&gt; &gt; &gt; &gt; This would make command line output look nicer. I think NUnit does<br/>\n&gt; &gt; this.<br/>\n&gt; &gt; &gt; This is tricky.  The JUnit API actually reports the Exception<br/>\n&gt; &gt; objects to <br/>\n&gt; &gt; &gt; the tools, which are then responsible for displaying / <br/>\n&gt; &gt; parsing stack <br/>\n&gt; &gt; &gt; traces.  I don&#39;t know that there&#39;s anything we could do to make <br/>\n&gt; &gt; &gt; pre-JUnit 4 tools automatically filter the org.junit lines, but we<br/>\n&gt; &gt; might <br/>\n&gt; &gt; &gt; look at something for the future.<br/>\n&gt; &gt; <br/>\n&gt; &gt; There&#39;s a setStackTrace in Throwable that looks promising. Granted,<br/>\n&gt; &gt; this is a bit of a hack, but having the org.junit lines in the test<br/>\n&gt; &gt; results gets really, really annoying. At the very least we should<br/>\n&gt; &gt; export a polished method that takes care of this.<br/>\n&gt; <br/>\n&gt; It seems to me that stack filtering is a user interface responsibility.<br/>\n&gt; Every time we get into the formatting business we regret it (see<br/>\n&gt; ComparisonFailure for an example).<br/>\n<br/>\n </span></blockquote>I don&#39;t think user programs have the knowledge needed to do this. For<br/>\nexample, if I have a junit test like junit&#39;s one that actually<br/>\nexecutes junit inside the test, it will screw up. Also, because of the<br/>\n timeout behavior, we&#39;ll introduce stuff from java.util.concurrent<br/>\ninto the trace, which means we have to figure out *exactly* which<br/>\nmethods there need excluding. In general, this is fragile. JUnit can<br/>\neasily get a stack trace from the method that calls user-code. This<br/>\nwould at least allow a tool to find out exactly what frames needed to<br/>\nbe killed.<br/>\n<br/>\n-- Ben</div>", 
    "prevInTime": 15963, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1139016016", 
    "canDelete": false, 
    "nextInTopic": 15965, 
    "prevInTopic": 15963, 
    "headers": {
        "inReplyToHeader": "PEUxRjR1NW8tMDAwMHl4LVJRQHNtdHBhdXRoMDcubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4=", 
        "messageIdInHeader": "PGRzMHZnZyt1MDNoQGVHcm91cHMuY29tPg=="
    }
}