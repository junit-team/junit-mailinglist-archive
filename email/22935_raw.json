{
    "numMessagesInTopic": 8, 
    "nextInTime": 22936, 
    "senderId": "7wkZ8oCojoZ2uTUilotH8JT_sB-jSxbAk71QZpsrOwrTV_9uk29NvwLz06jf637SrNyIIOjnU1UT1tp5I4Zak3Z6Aok6", 
    "systemMessage": false, 
    "subject": "Re: [junit] Common Test Runner for JVM", 
    "from": "Bill Venners &lt;bill@...&gt;", 
    "authorName": "Bill Venners", 
    "msgSnippet": "Hi Esko, David, ... them is that is that you can make a progress bar that gives feedback to the user as the tests run. That s a really nice feature in GUI test", 
    "msgId": 22935, 
    "rawEmail": "Return-Path: &lt;bill@...&gt;\r\nReceived: (qmail 78166 invoked by uid 7800); 13 Sep 2010 15:42:54 -0000\r\nX-Sender: bill@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 62144 invoked from network); 13 Sep 2010 15:36:15 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m7.grp.sp2.yahoo.com with QMQP; 13 Sep 2010 15:36:15 -0000\r\nX-Received: from unknown (HELO mail-ew0-f51.google.com) (209.85.215.51)\n  by mta2.grp.sp2.yahoo.com with SMTP; 13 Sep 2010 15:36:14 -0000\r\nX-Received: by ewy21 with SMTP id 21so3418735ewy.24\n        for &lt;junit@yahoogroups.com&gt;; Mon, 13 Sep 2010 08:36:13 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.216.10.5 with SMTP id 5mr4383406weu.81.1284392173236; Mon, 13\n Sep 2010 08:36:13 -0700 (PDT)\r\nX-Received: by 10.216.80.130 with HTTP; Mon, 13 Sep 2010 08:36:13 -0700 (PDT)\r\nIn-Reply-To: &lt;AANLkTin4AXk8BGcbXGfm68KQFzLqbVzk+m22CrcUgRt1@...&gt;\r\nReferences: &lt;4C8BFDE7.3010603@...&gt;\n\t&lt;AANLkTin4AXk8BGcbXGfm68KQFzLqbVzk+m22CrcUgRt1@...&gt;\r\nDate: Mon, 13 Sep 2010 08:36:13 -0700\r\nMessage-ID: &lt;AANLkTim11ORO68irFhHrVCBvqH8vK9BQG26wiUxWd9Zd@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Bill Venners &lt;bill@...&gt;\r\nSubject: Re: [junit] Common Test Runner for JVM\r\nX-Yahoo-Group-Post: member; u=416990097; y=lnWNj8qg1e0UaxRdTmsVQPVT4GR6-7aqx-jbY3AOWI9dHKQrRdo\r\nX-Yahoo-Profile: billvenners\r\nContent-Type: text/plain\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Approved-By: dsaff &lt;david@...&gt; via email; 13 Sep 2010 15:42:54 -0000\r\n\r\nHi Esko, David,\n\nOn Mon, Sep 13, 2010 at 7:09 AM, David Saff &lt;david@...=\r\nt&gt; wrote:\n\n&gt;\n&gt;\n&gt; Esko,\n&gt;\n&gt; This is a lot to absorb all at once. I&#39;d love to=\r\n go down the list and\n&gt; see what makes sense outside JUnit vs. inside JUnit=\r\n. I notice that a\n&gt; number of the issues you&#39;re tackling are mostly about I=\r\nDE\n&gt; integration--I wonder if thinking about the interface you wish IDEs\n&gt; =\r\nwould talk to, and then getting at least one IDE to agree to it, would\n&gt; be=\r\n a good approach. I&#39;ve tackled a few of your questions below--going\n&gt; deep =\r\non one of them, of your choice, might be the most productive way\n&gt; forward,=\r\n rather than trying to hit all of them at once.\n&gt;\n&gt; David Saff\n&gt;\n&gt;\n&gt; On Sat=\r\n, Sep 11, 2010 at 6:08 PM, Esko Luontola &lt;esko.luontola@...&lt;esko.luon=\r\ntola%40gmail.com&gt;&gt;\n&gt; wrote:\n&gt; &gt; I&#39;ll soon start writing a new test runner -=\r\n a common test runner for the\n&gt; &gt; JVM, codename CTR4J. It will provide a su=\r\nperset of JUnit&#39;s test runner&#39;s\n&gt; &gt; features, while at the same time overco=\r\nming some of JUnit&#39;s limitations\n&gt; &gt; and helping integration with developme=\r\nnt tools. I would like to hear\n&gt; &gt; your opinions on this project.\n&gt; &gt;\n&gt; &gt;\n&gt;=\r\n &gt;        MOTIVATION\n&gt; &gt;\n&gt; &gt; JUnit&#39;s test runner - especially the org.junit=\r\n.runner.RunWith annotation\n&gt; &gt; - has been very successful in providing a co=\r\nmmon interface for running\n&gt; &gt; tests from multiple testing frameworks. If a=\r\n testing framework provides\n&gt; &gt; a org.junit.runner.Runner implementation, e=\r\nvery Java build tool and IDE\n&gt; &gt; will automatically support the framework.\n=\r\n&gt; &gt;\n&gt; &gt; However with the rise of Scala testing frameworks (Specs, ScalaTest=\r\n,\n&gt; &gt; Specsy - the last one being written by me), some limitations of JUnit=\r\n&#39;s\n&gt; &gt; test runner are coming to the fore:\n&gt; &gt;\n&gt; &gt; - JUnit makes an implici=\r\nt assumption that all tests are known before any\n&gt; &gt; test code is executed.=\r\n For example IntelliJ IDEA calls\n&gt; &gt; Runner.getDescription() before calling=\r\n Runner.run() and has problems if\n&gt; &gt; the descriptions change during test e=\r\nxecution. But in the Scala testing\n&gt; &gt; frameworks, in order to achieve a co=\r\nncise syntax, test declarations are\n&gt; &gt; implemented as method calls in the =\r\nclass constructor, which means that\n&gt; &gt; at least some of the test code must=\r\n be executed before it is known that\n&gt; &gt; what tests there are.\n&gt;\n&gt; There ar=\r\ne advantages to the &quot;declare everything before running\n&gt; anything&quot; requirem=\r\nent from JUnit, but I agree that it also makes some\n&gt; things very difficult=\r\n. I&#39;d love to see a standard way to address this\n&gt; within JUnit.\n&gt;\n&gt; I thin=\r\nk the main advantage to being able to count the tests before you run\nthem i=\r\ns that is that you can make a progress bar that gives feedback to the\nuser =\r\nas the tests run. That&#39;s a really nice feature in GUI test runners that\nis =\r\nlost if you can&#39;t count tests in advance. It would be possible to make\nthe =\r\nadvance test count an optional feature, but then when tests can&#39;t be\ncounte=\r\nd, you couldn&#39;t show a progress bar. And I think that would be a\npretty big=\r\n loss.\n\nThe downside of the requirement is it becomes difficult to use the =\r\nsame\ntoken all the way down nested closures (like you use &quot;&gt;&gt;&quot; in Specsy). =\r\nIf you\nuse a different character to denote leaf nodes, then  those leaf nod=\r\nes (the\ntests) can be counted (and their names known, etc.) before they are=\r\n run.\nThat&#39;s what I do in ScalaTest. The other thing you can do is run all =\r\ntest\ncode at construction time, and just store results to be reported later=\r\n. I\nthink that&#39;s what Eric Torreborre does in Specs, because he also uses t=\r\nhe\nsame &quot;&gt;&gt;&quot; or &quot;in&quot; token all the way down.\n\nThis is a design tradeoff, an=\r\nd I think the world wants to keep their\nprogress bar and can live with the =\r\nabove two approaches to nested closures\nin Scala test code.\n\n\n&gt; &gt; - JUnit d=\r\noesn&#39;t know the concept of nested tests. It knows the concept\n&gt; &gt; of suites=\r\n containing suites, but not &quot;test methods&quot; which contain other\n&gt; &gt; &quot;test me=\r\nthods&quot;. But at least Specs and Specsy allow organizing tests\n&gt; &gt; into unlim=\r\nitedly nested closures. For them this limitation means that\n&gt; &gt; IDEs are no=\r\nt able to show the right mental model of what is really\n&gt; &gt; happening durin=\r\ng test execution, which makes understanding test output\n&gt; &gt; harder.\n&gt;\n&gt; In =\r\nterms of IDE integration, JUnit just reports a tree of\n&gt; Descriptions, and =\r\nresults against them. Runners are free to structure\n&gt; these trees however t=\r\nhey wish. Have you run into IDE limitations for\n&gt; displaying/interacting wi=\r\nth these trees?\n&gt;\n&gt; I would question the need for nesting tests. I can easi=\r\nly see the benefit\nof nesting closures in test code. Several traits in Scal=\r\naTest do that, but\nthe model I use in ScalaTest is that each leaf node is o=\r\nne test. The\nclosures surrounding the leaf nodes are descriptions, not test=\r\ns themselves.\nI would think you and Eric could  adopt that approach in Spec=\r\ns and Specsy\nwithout much trouble.\n\nBill\n\n\n&gt; &gt; - There is an implicit assum=\r\nption that test names are the same as method\n&gt; &gt; names, and that the tests =\r\nare implemented as methods. For example in\n&gt; &gt; IntelliJ IDEA it&#39;s possible =\r\nto navigate from the test results into test\n&gt; &gt; methods. But with the Scala=\r\n frameworks this is not possible, because the\n&gt; &gt; test names to not corresp=\r\nond any method declaration (and a string search\n&gt; &gt; is not 100% reliable be=\r\ncause the test name could be generated\n&gt; &gt; dynamically or there could be mu=\r\nltiple tests with the same name; at\n&gt; &gt; least Specsy allows duplicate names=\r\n).\n&gt;\n&gt; That assumption is in the IDE&#39;s. It&#39;s a useful one, but it&#39;s neither=\r\n\n&gt; required nor assumed by JUnit itself.\n&gt;\n&gt;\n&gt; &gt; There are also some other =\r\nlimitations which affect all Java testing\n&gt; &gt; frameworks:\n&gt; &gt;\n&gt; &gt; - When a =\r\ntest prints something, IntelliJ IDEA collects what is printed\n&gt; &gt; to stdout=\r\n and stderr, so that when you select a test in the test\n&gt; &gt; results, it wil=\r\nl show only what that test printed. This is very useful\n&gt; &gt; for debugging w=\r\nith println-statements. But because there is no\n&gt; &gt; synchronization between=\r\n the test runner and the IDE which reads the\n&gt; &gt; stdout/err, IDEA doesn&#39;t a=\r\nlways associate what a test printed with the\n&gt; &gt; correct test, especially w=\r\nhen the tests are very fast.\n&gt;\n&gt; &gt; - No built-in support for executing the =\r\ntests in parallel. Third-party\n&gt; &gt; tools are needed for it.\n&gt;\n&gt; We&#39;ve taken=\r\n several stabs at this. The biggest hurdle is how to\n&gt; extend the test-defi=\r\nnition language: while many tests can be\n&gt; parallelized without cost, and t=\r\nest writers should not depend on\n&gt; order, they currently might depend on on=\r\nly test being written at the\n&gt; time.\n&gt;\n&gt; &gt; Possibly because of being faced =\r\nwith the above limitations, at least\n&gt; &gt; Specs, ScalaTest and TestNG have i=\r\nmplemented their own test runners.\n&gt; &gt; This in turn means that the IDEs nee=\r\nd to support each test runner\n&gt; &gt; individually, which results in varying le=\r\nvels of quality and features\n&gt; &gt; between the integration with different tes=\r\nt runners. For example, at\n&gt; &gt; least some time ago, IDEA&#39;s Scala plugin did=\r\n not support automatically\n&gt; &gt; finding all Specs tests in the project and e=\r\nxecuting them.\n&gt;\n&gt; Test discovery seems to be yet another feature of a comm=\r\non IDE interface.\n&gt;\n&gt;\n&gt;\n&gt; &gt; There is also code duplication inside and betwe=\r\nen all IDEs, build tools\n&gt; &gt; and CI servers because they have had to write =\r\ncode to keep track of the\n&gt; &gt; test execution state, and that needs to be re=\r\npeated for each test runner.\n&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;        THE PROJECT\n&gt; &gt;\n&gt; &gt; I&#39;ll =\r\nsoon start writing a test runner to solve the above mentioned\n&gt; &gt; limitatio=\r\nns and to ease the integration with build tools, IDEs, CI\n&gt; &gt; servers etc. =\r\nThe license will be Apache License 2.0. I&#39;m also thinking\n&gt; &gt; of making thi=\r\ns not only open source, but also &quot;open development&quot;, by\n&gt; &gt; screencasting s=\r\nimilar to http://jamesshore.com/Blog/Lets-Play/\n&gt; &gt;\n&gt; &gt; What the test runne=\r\nr will provide to testing frameworks, is a superset\n&gt; &gt; of the features pro=\r\nvided by these JUnit classes: RunWith, Runner,\n&gt; &gt; Description, RunNotifier=\r\n. The API will be a bit more generic and with\n&gt; &gt; new abstractions, in orde=\r\nr to support for example nested tests.\n&gt; &gt;\n&gt; &gt; What the test runner will pr=\r\novide to IDEs, build tools and CI servers,\n&gt; &gt; is a library for launching t=\r\nhe tests in a new VM instance, monitoring\n&gt; &gt; the test execution status, co=\r\nllecting the test results and what was\n&gt; &gt; printed to stdout/err etc. The t=\r\nools just need to configure the\n&gt; &gt; classpath and choose which tests to run=\r\n (e.g. using file name patters).\n&gt; &gt; I will also provide a reference implem=\r\nentation of an UI for running the\n&gt; &gt; tests, because running tests as part =\r\nof the TDD cycle is too important a\n&gt; &gt; feature for its usability to be lef=\r\nt in the hands of programmers without\n&gt; &gt; interaction design skills.\n&gt; &gt;\n&gt; =\r\n&gt; What the test runner will provide to users, is running tests from all\n&gt; &gt;=\r\n testing frameworks (which support this runner or JUnit&#39;s test runner) in\n&gt;=\r\n &gt; one suite, running them in parallel on multiple CPU cores (I&#39;ll tackle\n&gt;=\r\n &gt; parallelization over multiple machines as a separate project, probably\n&gt;=\r\n &gt; as a commercial tool), integration with every development tool on the\n&gt; =\r\n&gt; JVM (I intend to contact all tool vendors and gather requirements from\n&gt; =\r\n&gt; them to ease the integration) and reliability (backwards compatiblity is\n=\r\n&gt; &gt; very important to me, and I plan on making it possible for each tool\n&gt; =\r\n&gt; vendor to write integration tests, which will be run as part of the test\n=\r\n&gt; &gt; runner&#39;s development builds, to detect any breaking changes).\n&gt; &gt;\n&gt; &gt; S=\r\no, I would like to ask for your opinion on this project. Here are some\n&gt; &gt; =\r\nquestions:\n&gt; &gt;\n&gt; &gt; - Do you find this useful?\n&gt; &gt;\n&gt; &gt; - If you had the poss=\r\nibility to rewrite JUnit&#39;s test runner, without\n&gt; &gt; having to think about b=\r\nackwards compatibility, what would you do\n&gt; &gt; differently? @RunWith&#39;s javad=\r\noc says: &quot;We added this feature late in\n&gt; &gt; development. While it seems pow=\r\nerful we expect the runner API to change\n&gt; &gt; as we learn how people really =\r\nuse it. Some of the classes that are\n&gt; &gt; currently internal will likely be =\r\nrefined and become public.&quot;\n&gt; &gt;\n&gt; &gt; - What do you think would be a good nam=\r\ne for the project? One suggestion\n&gt; &gt; is CTR4J (actually named similar to S=\r\nLF4J) which is googleable, but\n&gt; &gt; perhaps not very pronounceable or memora=\r\nble.\n&gt; &gt;\n&gt; &gt; - What would be a good name for the annotation which correspon=\r\nds\n&gt; &gt; @RunWith? Its name needs to be different to be googleable and to mak=\r\ne it\n&gt; &gt; easy to annotate a class with both JUnit&#39;s and this test runner&#39;s\n=\r\n&gt; &gt; annotation.\n&gt; &gt;\n&gt; &gt; - Any other thoughts?\n&gt; &gt;\n&gt; &gt; --\n&gt; &gt; Esko Luontola\n=\r\n&gt; &gt; www.orfjackal.net\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; ------------------------------------\n&gt; &gt;\n=\r\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;  \n&gt;\n\n\n\n-- \nBill Venners\nArtima, I=\r\nnc.\nhttp://www.artima.com\n\n\n[Non-text portions of this message have been re=\r\nmoved]\n\n\n", 
    "profile": "billvenners", 
    "topicId": 22933, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 416990097, 
    "prevInTime": 22934, 
    "contentTrasformed": false, 
    "postDate": "1284392173", 
    "canDelete": false, 
    "nextInTopic": 22936, 
    "prevInTopic": 22934, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGluNEFYazhCR2NiWEdmbTY4S1FGekxxYlZ6ayttMjJDcmNVZ1J0MUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGltMTFPUk82OGlyRmhIclZDQnZxSDh2SzlCUUcyNndpVXhXZDlaZEBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDRDOEJGREU3LjMwMTA2MDNAZ21haWwuY29tPgk8QUFOTGtUaW40QVhrOEJHY2JYR2ZtNjhLUUZ6THFiVnprK20yMkNyY1VnUnQxQG1haWwuZ21haWwuY29tPg=="
    }
}