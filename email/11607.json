{
    "numMessagesInTopic": 22, 
    "nextInTime": 11608, 
    "senderId": "k__JSdoN3WzJew8sdsd3gKdoY5aU67XYpUyESZW0eN7Cb1yy5OHYUxR0ItvMCYQ5QQ63udZXPIrvqenwsKz1jbo_-lcjjb3kTtDqgD2TwA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Using JMock, example of the after() MatchBuilder?", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... Yes. Since it s just a stub, it s set up simply to return your value. ... Invoke verify() at the end of the your test /and/ set the expectation to at", 
    "msgId": 11607, 
    "profile": "nails762", 
    "topicId": 11604, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "messageBody": "<div id=\"ygrps-yiv-1918490232\">cliftonccraig wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; I am trying to learn JMock and apply it to my unit testing. I&#39;m having<br/>\n&gt; trouble setting up some of the expectations. For example, I want to<br/>\n&gt; set an expectation that a certain method be called exactly 5 times and<br/>\n&gt; set the return value for each invocation. Upon reading the docs I see<br/>\n&gt; an unclear example of how to do this with the onConsecutiveCalls()<br/>\n&gt; stub. So I&#39;ve come up with the following code on my mockController to<br/>\n&gt; expect no more than 5 calls to the same nextDataModel method. (I threw<br/>\n&gt; in the RuntimeException to stop excessive calls on what works pretty<br/>\n&gt; much like an iterator. The real object doesn&#39;t throw on excessive calls.)<br/>\n&gt; <br/>\n&gt; mockParserController.expects(atLeastOnce()).method(&quot;nextDataModel&quot;)<br/>\n&gt;                 .withNoArguments()<br/>\n&gt;                 .will(onConsecutiveCalls(<br/>\n&gt;                         returnValue(stubbedZipcodeModel),<br/>\n&gt;                         returnValue(stubbedBusnpartModel),<br/>\n&gt;                         returnValue(stubbedAddressModel),<br/>\n&gt;                         onConsecutiveCalls(<br/>\n&gt;                                 returnValue(stubbedCustomerModel),<br/>\n&gt;                                 returnValue(null),<br/>\n&gt;                                 throwException(new<br/>\n&gt; DTPRuntimeException(&quot;No more DataModels available in the stream.&quot;))<br/>\n&gt;                         )<br/>\n&gt;                 ));<br/>\n&gt; <br/>\n&gt; It looks pretty good. But what I&#39;m wondering is if this logic mandates<br/>\n&gt; the method to be called 5 times or if it just set provisions for 5<br/>\n&gt; invocations. <br/>\n<br/>\n </span></blockquote>Yes. Since it&#39;s just a stub, it&#39;s set up simply to return your value.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; I&#39;m thinking the latter. If so then how do I force the<br/>\n&gt; mock to check for exactly 5 invocations (and throw if less than 5)?  <br/>\n<br/>\n </span></blockquote>Invoke verify() at the end of the your test /and/ set the expectation to <br/>\n&quot;at least five calls&quot; and not &quot;at least once&quot;, as you&#39;re doing now. (I <br/>\ndon&#39;t know the precise syntax.)<br/>\n<br/>\nSo change what you pass to expects(), then be sure to invoke verify() at <br/>\nthe end of the test.<br/>\n-- <br/>\nJ. B. Rainsberger,<br/>\nDiaspar Software Services<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com\">http://www.diasparsoftware.com</a> :: +1 416 791-8603<br/>\nLet&#39;s write software that people understand</div>", 
    "prevInTime": 11606, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1090344950", 
    "canDelete": false, 
    "nextInTopic": 11608, 
    "prevInTopic": 11604, 
    "headers": {
        "inReplyToHeader": "PGNkamtkZytvMDZwQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQwRkQ1N0Y2LjEwOTA4MDBAcm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGNkamtkZytvMDZwQGVHcm91cHMuY29tPg=="
    }
}