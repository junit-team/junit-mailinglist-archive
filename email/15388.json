{
    "numMessagesInTopic": 2, 
    "nextInTime": 15389, 
    "senderId": "2dm3Jz9pFir3pfZDQX7eQ6aPOlUlMOrhbQ3Jk07EFLMYlXwEI_3PkGR9bFA4RqDN5uAmBUE5eaYzmBJZNa2edA", 
    "systemMessage": false, 
    "subject": "Re: [junit] repeat test permutations for variants of the test object", 
    "from": "David Saff &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Have you looked at the Parameterized Test Case pattern from JUnit Recipes, by J. B. Rainsberger?  It may resolve the problem of having lots of subclasses", 
    "msgId": 15388, 
    "profile": "dsaff", 
    "topicId": 15375, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "messageBody": "<div id=\"ygrps-yiv-333030789\">Have you looked at the Parameterized Test Case pattern from JUnit <br/>\nRecipes, by J. B. Rainsberger?  It may resolve the problem of having <br/>\nlots of subclasses hanging around, although you won&#39;t be able to easily <br/>\nrun just one of the Adapter/Engine combos.  Good luck,<br/>\n<br/>\n    David Saff<br/>\n<br/>\nshmuelakahn wrote:<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; I hope this question doesn&#39;t sound too confused, I&#39;m pretty new to<br/>\n&gt; Java and Junit...<br/>\n&gt;<br/>\n&gt; I have a single Engine class, that wraps a [JavaSpaces] Storage<br/>\n&gt; container for objects, with a standard API of read, write, delete,<br/>\n&gt; etc. This Engine comes in four different forms (as set by two<br/>\n&gt; constructor boolean parameters), that modify its&#39; low-level behavior.<br/>\n&gt; This Engine references two Adapter classes. These Adapters modify the<br/>\n&gt; behavior of the Engine, but aren&#39;t directly related to it&#39;s main<br/>\n&gt; function, so aren&#39;t part of it&#39;s API. The first Adapter is a Lock<br/>\n&gt; object with lock, unlock and isLocked methods, when the Engine is<br/>\n&gt; locked is prevents write and delete operations. The other Adapter is a<br/>\n&gt; generic Control object for other operations. The Adapter objects have<br/>\n&gt; no meaning without reference to an Engine object.<br/>\n&gt;<br/>\n&gt; ** It is these Adapter classes that I want to test. **<br/>\n&gt;<br/>\n&gt; Each Adapter Class has its&#39; own AdapterTest TestCase class set of<br/>\n&gt; tests. The thing is, that I want to perform each set of test four<br/>\n&gt; times, using an Adapter &quot;hitched&quot; to each of the different Engine<br/>\n&gt; configurations. Initially I thought to extend the two basic<br/>\n&gt; AdapterTest classes, leaving the derived classes to create the Engine<br/>\n&gt; instance to run the tests with, and then run those extended classes,<br/>\n&gt; but that gives me [at least] ten classes with much duplicate code and<br/>\n&gt; seems rather clunky. Is there any way to refactor the Engine creation<br/>\n&gt; or whatever, in order to achieve a more elegant solution, or a perhaps<br/>\n&gt; completely different solution to this repeat-test issue?<br/>\n&gt;<br/>\n&gt; The following is a much simplified code listing. The problem is, that<br/>\n&gt; this code, only tests one of the four variations on the Engine object,<br/>\n&gt; while I need to test all four. In order for the tests to be<br/>\n&gt; automatically runnable, I can&#39;t pass in any parameters to the test<br/>\n&gt; classes. So I&#39;m looking for another way to do this, other than having<br/>\n&gt; to create four derived classes for each Adapter TestCase, with a<br/>\n&gt; different implementation of setup().<br/>\n&gt;<br/>\n&gt; And ideas or pointers, folks?<br/>\n&gt;<br/>\n&gt; class EngineLock {<br/>\n&gt;     protected Engine m_engine;<br/>\n&gt;<br/>\n&gt;     public EngineLock      (Engine engine) {...}<br/>\n&gt;     public boolean lock    () {...}<br/>\n&gt;     public boolean unlock  () {...}<br/>\n&gt;     public boolean isLocked() {...}<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; class EngineControl {<br/>\n&gt;     protected Engine m_engine;<br/>\n&gt;<br/>\n&gt;     public EngineControl       (Engine engine) {...}<br/>\n&gt;     public boolean doSomething () {...}<br/>\n&gt;     public boolean doOtherThing() {...}<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; class Engine {<br/>\n&gt;     protected final boolean m_persistent;<br/>\n&gt;     protected final boolean m_redundant;<br/>\n&gt;     protected EngineLock    m_lock;<br/>\n&gt;     protected EngineControl m_controller;<br/>\n&gt;<br/>\n&gt;     public Engine (boolean persistent, boolean redundant) {<br/>\n&gt;         m_lock       = new EngineLock (this);<br/>\n&gt;         m_controller = new EngineControl (this);<br/>\n&gt;         //...<br/>\n&gt;     }<br/>\n&gt;     public boolean read   (Object template) {...}<br/>\n&gt;     public boolean write  (Object template) {...}<br/>\n&gt;     public boolean delete (Object template) {...}<br/>\n&gt;<br/>\n&gt;     EngineLock     getLock    () { return m_lock; }<br/>\n&gt;     EngineControl  getControl () { return mcontroller; }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; And then we have the TestCase classes, which both create Engine<br/>\n&gt; instances as part of their setup, and then use the Adapter of that<br/>\n&gt; engine in the tests.<br/>\n&gt;<br/>\n&gt; class TestEngineLock extends TestCase {<br/>\n&gt;     protected Engine     m_engine;<br/>\n&gt;     protected EngineLock m_lock;<br/>\n&gt;<br/>\n&gt;     protected void setUp() {<br/>\n&gt;         m_engine = new Engine (true, true); // &lt;&lt;== engine for test.<br/>\n&gt;         m_lock   = m_engine.getLock();      // &lt;&lt;== test object.<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     public void testEngineLock() {...}<br/>\n&gt;     public void testLock      () {...}<br/>\n&gt;     public void testUnlock    () {...}<br/>\n&gt;     public void testIsLocked  () {...}<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; class TestEngineControl extends TestCase {<br/>\n&gt;     protected Engine        m_engine;<br/>\n&gt;     protected EngineControl m_controller;<br/>\n&gt;<br/>\n&gt;     protected void setUp() {<br/>\n&gt;         m_engine = new Engine (true, true); // &lt;&lt;== engine for test.<br/>\n&gt;         m_controller = m_engine.getControl(); // &lt;&lt;== test object.<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     public void testEngineControl() {...}<br/>\n&gt;     public void testDoSomething  () {...}<br/>\n&gt;     public void testDoOtherThing () {...}<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------------------------------------------<br/>\n&gt; YAHOO! GROUPS LINKS<br/>\n&gt;<br/>\n&gt;     *  Visit your group &quot;junit &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://groups.yahoo.com/group/junit\">http://groups.yahoo.com/group/junit</a>&gt;&quot;<br/>\n&gt;       on the web.<br/>\n&gt;        <br/>\n&gt;     *  To unsubscribe from this group, send an email to:<br/>\n&gt;        <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;       &lt;mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a>?subject=Unsubscribe&gt;<br/>\n&gt;        <br/>\n&gt;     *  Your use of Yahoo! Groups is subject to the Yahoo! Terms of<br/>\n&gt;       Service &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt;.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------------------------------------------<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 15387, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1131688542", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 15375, 
    "headers": {
        "inReplyToHeader": "PGRrcHVtMCtiaG0zQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQzNzQzMjVFLjkwOTA5MDdAbWl0LmVkdT4=", 
        "referencesHeader": "PGRrcHVtMCtiaG0zQGVHcm91cHMuY29tPg=="
    }
}