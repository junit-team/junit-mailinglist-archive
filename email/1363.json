{
    "numMessagesInTopic": 17, 
    "nextInTime": 1364, 
    "senderId": "QCvc7Oj7QpLiKv8HQQkHnNm3OoBcgNma1Qq_X_YAoqrx9nDFvZVzbeLVknHgOpcok0PKNIW5CQ", 
    "systemMessage": false, 
    "subject": "Method Chains, was Re: Testing private methods", 
    "from": "ghouston@...", 
    "authorName": "ghouston@iss.net", 
    "msgSnippet": "There are several was to get Mock objects into your production code: 1. Parameters As Mr Freeman shows, you use parameters to pass the Mock into the class that", 
    "msgId": 1363, 
    "topicId": 1308, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-13411519\">There are several was to get Mock objects into your production code:<br/>\n<br/>\n1. Parameters <br/>\n<br/>\nAs Mr Freeman shows, you use parameters to pass the Mock into the <br/>\nclass that calls it.<br/>\n<br/>\n2 Reflection<br/>\n<br/>\nIf B is referenced in a field of A, you can use reflection to modify <br/>\nA and replace B with it&#39;s Mock.<br/>\n<br/>\n3 Mole Pattern<br/>\n<br/>\nSubclass A, and use the subclass to setup the Mock.  [I call this <br/>\ndesign the &quot;Mole Pattern&quot;]<br/>\n<br/>\n4 Strategy Pattern<br/>\n<br/>\nUse a Strategy design pattern.<br/>\n<br/>\n5 Dynamic Proxy<br/>\n<br/>\nIf the B is an implementation of an Interface, you can use a Dynamic <br/>\nProxy (new feature of Java 1.3b).  The Mock would be an <br/>\nInvocationHandler, instead of a twin of B.<br/>\n<br/>\n6 Classloader<br/>\n<br/>\nUse a classloader to load the Mock instead of the real class.<br/>\n<br/>\n---<br/>\n<br/>\nThere may be other options, but these are the ones I&#39;ve heard of.  <br/>\nPersonally, I&#39;ve used everything except #6.  Options #1 (parameters) <br/>\nand #2 (reflection) are my favorites.  They are usually the easiest <br/>\nto implement and understand.  For #2, I&#39;ve used the <br/>\nPrivilegedAccessor.java [posted by Mr DiIorio] to make the reflection <br/>\nwork simple.<br/>\n<br/>\nI&#39;ve never seen anyone use #6 (classloaders), I think it would be fun <br/>\nto try.<br/>\n<br/>\n- Greg<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In junit@y..., &quot;Steve Freeman&quot; &lt;steve@m...&gt; wrote:<br/>\n&gt; RE: Method Chains, was Re: Testing private methodsAlternatively, <br/>\n&gt; change from:<br/>\n&gt; <br/>\n&gt; public class A {<br/>\n&gt;   public void f() {<br/>\n&gt;     b = new B();<br/>\n&gt;     b.doSomething();<br/>\n&gt;   }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; to:<br/>\n&gt; <br/>\n&gt; public class A {<br/>\n&gt;   public void f(B b) {<br/>\n&gt;     b.doSomething(aValue());<br/>\n&gt;   }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; The test then becomes:<br/>\n&gt; <br/>\n&gt; public class TestA {<br/>\n&gt;   public void testF() {<br/>\n&gt;     A anA = new A(aValue);<br/>\n&gt;     MockB mockB = new MockB();<br/>\n&gt;     mockB.setExpectedSomething(aValue);<br/>\n&gt; <br/>\n&gt;     a.f(mockB);<br/>\n&gt; <br/>\n&gt;     mockB.verify();<br/>\n&gt;   }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; We have found that changing to a style where you pass behaviours <br/>\naround, rather than data, avoids things like subclassing production <br/>\ncode in a test and pushes the code to flexing in the &#39;right&#39; kinda <br/>\nways. If you can figure out what to pass in and what to verify, then <br/>\nthe rest of the test usually falls out.<br/>\n&gt; <br/>\n&gt; Steve </span></blockquote></div>", 
    "prevInTime": 1362, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "991402865", 
    "canDelete": false, 
    "nextInTopic": 1364, 
    "prevInTopic": 1359, 
    "headers": {
        "inReplyToHeader": "PDAwMWEwMWMwZWEzMCRkNDUxNDZjMCRmNGUyN2JkNUBnYXRld2F5Pg==", 
        "messageIdInHeader": "PDlmODYxaCt1Zm5lQGVHcm91cHMuY29tPg=="
    }
}