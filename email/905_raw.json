{
    "topicId": 901, 
    "postDate": "986432991", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "mrettig@...", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "P1p0XX7rvSgsiJ_FxgHfKmUi-SW7-6ouSkrsKL3L8F8SFxuUgGhaOR4_yNd4Iww_HT1z5Zq7idatjtQ", 
    "nextInTime": 906, 
    "userId": 0, 
    "prevInTime": 904, 
    "prevInTopic": 904, 
    "headers": {
        "messageIdInHeader": "PE9GRjgzNjBFMkYuRTBFRTdGOTYtT044NjI1NkEyNS4wMDA0M0UwREB0aG91Z2h0d29ya3MuY29tPg=="
    }, 
    "authorName": "mrettig@homemail.com", 
    "numMessagesInTopic": 5, 
    "msgSnippet": "chelck wrote:  If I don t do anything the errors print out on the console as tracebacks, but they don t get recorded in the TestResult and its hard to", 
    "contentTrasformed": false, 
    "msgId": 905, 
    "nextInTopic": 909, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;MichaelRettig@...&gt;\r\nX-Sender: MichaelRettig@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_1_1); 5 Apr 2001 01:00:19 -0000\r\nReceived: (qmail 72953 invoked from network); 5 Apr 2001 01:00:17 -0000\r\nReceived: from unknown (10.1.10.26) by l10.egroups.com with QMQP; 5 Apr 2001 01:00:17 -0000\r\nReceived: from unknown (HELO mother.thoughtworks.com) (204.178.39.204) by mta1 with SMTP; 5 Apr 2001 01:00:17 -0000\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] How can I test async callbacks?\r\nMIME-Version: 1.0\r\nX-Mailer: Lotus Notes Release 5.0.6a  January 17, 2001\r\nMessage-ID: &lt;OFF8360E2F.E0EE7F96-ON86256A25.00043E0D@...&gt;\r\nDate: Wed, 4 Apr 2001 20:09:51 -0500\r\nX-MIMETrack: Serialize by Router on Mother/ThoughtWorks.COM/US(Release 5.0.6a |January 17, 2001) at 04/04/2001 08:08:40 PM, Serialize complete at 04/04/2001 08:08:41 PM, Serialize by Router on Mother/ThoughtWorks.COM/US(Release 5.0.6a |January 17, 2001) at 04/04/2001 08:08:41 PM\r\nContent-Type: multipart/alternative; boundary=&quot;=_alternative 0005F51586256A25_=&quot;\r\nX-eGroups-From: MichaelRettig@...\r\nFrom: mrettig@...\r\n\r\n\r\n--=_alternative 0005F51586256A25_=\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\n\r\nchelck wrote:\n&lt;snip&gt;\nIf I don&#39;t do anything the errors print out on the\nconsole as tracebacks, but they don&#39;t get recorded in the TestResult and \nits\nhard to tell where they came from. Callbacks are obects with two methods:\nok() and error(). Ideally I&#39;d like to define a TestCallback which can have\nasserts and fails in it.\n&lt;/snip&gt;\n\nI&#39;m assuming you are multithreading somewhere.\n\nCan you wait for the thread to finish before you exit the method?\n\nYou should be able to setup a callback as a separate thread. Just launch \nthe thread, wait for it to terminate, then ask the thread for the results \nof the callback. The only problem would be if you have callbacks that \nnever come back. In this case you will need a timeout period, so you are \nsure your tests will always run.\n\npublic void testWithData() {\n                                  CallBackThread callBack = new \nCallBackThread();\n                                 callBack.start();\n                                 m_model.getData(callBack);\n                                 callBack.join();\n                                 callBack.assertSuccess();\n                 }\n\npublic class CallBackThread extends Thread{\nprivate isWaitingForCallBack = true;\nprivate Object data;\nprivate Throwable failure;\n.......\n        public void run(){\n                while(isWaitingForCallBack){\n                        this.sleep(10);\n                }\n        }\n public void ok(Object result) {data = result;isWaitingForCallBack = \nfalse;}\n public void error(Throwable t) {failure = t;isWaitingForCallBack = \nfalse;}\n public void assertSuccess(){ \n                if(failure != null)\n                        throw failure;\n                assertNotNull(data);\n        }\n...\n}\n\n\n\nRegards,\n\nMike\r\n--=_alternative 0005F51586256A25_=\r\nContent-Type: text/html; charset=&quot;us-ascii&quot;\r\n\r\n\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;chelck wrote:&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&lt;snip&gt;&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;If I don&#39;t do anything the errors print out on the&lt;br&gt;\nconsole as tracebacks, but they don&#39;t get recorded in the TestResult and its&lt;br&gt;\nhard to tell where they came from. Callbacks are obects with two methods:&lt;br&gt;\nok() and error(). Ideally I&#39;d like to define a TestCallback which can have&lt;br&gt;\nasserts and fails in it.&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&lt;/snip&gt;&lt;/font&gt;\n&lt;br&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;I&#39;m assuming you are multithreading somewhere.&lt;/font&gt;\n&lt;br&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;Can you wait for the thread to finish before you exit the method?&lt;/font&gt;\n&lt;br&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;You should be able to setup a callback as a separate thread. Just launch the thread, wait for it to terminate, then ask the thread for the results of the callback. The only problem would be if you have callbacks that never come back. In this case you will need a timeout period, so you are sure your tests will always run.&lt;/font&gt;\n&lt;br&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;public void testWithData() {&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CallBackThread callBack = new CallBackThread();&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;callBack.start();&lt;br&gt;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;m_model.getData(callBack);&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;callBack.join();&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;callBack.assertSuccess();&lt;br&gt;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;/font&gt;\n&lt;br&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;public class CallBackThread extends Thread{&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;private isWaitingForCallBack = true;&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;private Object data;&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;private Throwable failure;&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;.......&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; public void run(){&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(isWaitingForCallBack){&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.sleep(10);&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; }&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp;public void ok(Object result) {data = result;isWaitingForCallBack = false;}&lt;br&gt;\n public void error(Throwable t) {failure = t;isWaitingForCallBack = false;}&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp;public void assertSuccess(){ &lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(failure != null)&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw failure;&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assertNotNull(data);&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;Courier New&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; }&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;...&lt;/font&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;}&lt;/font&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;Regards,&lt;/font&gt;\n&lt;br&gt;\n&lt;br&gt;&lt;font size=2 face=&quot;sans-serif&quot;&gt;Mike&lt;/font&gt;\r\n--=_alternative 0005F51586256A25_=--\r\n\n", 
    "subject": "Re: [junit] How can I test async callbacks?"
}