{
    "topicId": 15902, 
    "postDate": "1138730623", 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "from": "Ian Darwin &lt;ian@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "iEtf2LFoL_r53G1kJPTUSliv5f5j0XGdIZPXo76XTDwRNPVCeQniWT8Wzvt53-yaUnNMwBzvkKzwrbHEHVbftEw5xWw7", 
    "nextInTime": 15903, 
    "userId": 23529957, 
    "prevInTime": 15901, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDQzREZBNjdGLjUwODA1MDhAZGFyd2luc3lzLmNvbT4="
    }, 
    "authorName": "Ian Darwin", 
    "numMessagesInTopic": 3, 
    "msgSnippet": "I m trying to write a test runner for a new subframework that will read an arbitrary number of tests from a little language scripting file, and I m trying ", 
    "contentTrasformed": false, 
    "msgId": 15902, 
    "nextInTopic": 15906, 
    "systemMessage": true, 
    "rawEmail": "Return-Path: &lt;ian@...&gt;\r\nReceived: (qmail 1557 invoked from network); 31 Jan 2006 22:16:49 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m30.grp.scd.yahoo.com with QMQP; 31 Jan 2006 22:16:49 -0000\r\nReceived: from unknown (HELO n4a.bullet.scd.yahoo.com) (66.94.237.38)\n  by mta7.grp.scd.yahoo.com with SMTP; 31 Jan 2006 22:16:48 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.66.58] by n4.bullet.scd.yahoo.com with NNFMP; 31 Jan 2006 22:12:20 -0000\r\nReceived: from [66.218.66.78] by t7.bullet.scd.yahoo.com with NNFMP; 31 Jan 2006 22:12:18 -0000\r\nX-Sender: ian@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 66947 invoked from network); 31 Jan 2006 18:05:53 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m25.grp.scd.yahoo.com with QMQP; 31 Jan 2006 18:05:53 -0000\r\nReceived: from unknown (HELO darwinsys.com) (209.135.104.16)\n  by mta8.grp.scd.yahoo.com with SMTP; 31 Jan 2006 18:05:52 -0000\r\nReceived: from [192.168.100.2] (daroad-vpn.darwinsys.com [192.168.100.2])\n\tby darwinsys.com (8.13.4/8.12.11) with ESMTP id k0VI4PcB000132;\n\tTue, 31 Jan 2006 13:04:26 -0500 (EST)\r\nMessage-ID: &lt;43DFA67F.5080508@...&gt;\r\nDate: Tue, 31 Jan 2006 13:03:43 -0500\r\nUser-Agent: Mozilla Thunderbird 1.0.7 (X11/20051203)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Ian Darwin &lt;ian@...&gt;\r\nSubject: junit 3.8 Test/TestResult interaction - reality check\r\nX-Yahoo-Group-Post: member; u=23529957\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: vbossica &lt;vladimir@...&gt; via web; 31 Jan 2006 22:12:18 -0000\r\n\r\nI&#39;m trying to write a test runner for a new &quot;subframework&quot; that will \nread an arbitrary\nnumber of tests from a &quot;little language&quot; scripting file, and I&#39;m trying \nto write this as a Test class\n(my framework will be released as open source when it is working).\n\nI started with the assumption that if the framework calls a Test&#39;s \ncountTestCases\nit will next call its run() method once and let it run all the tests, \nand that it expects the\ntest to call results.startTest(this) and endTest(this).  So this is a \ngloss of my test: is this\nat all the right approach?\n\n// DO NOT JUST COPY THIS CODE, IT DOES NOT WORK YET\npublic class MyTest implements Test {\n\n        private String name = &quot;TestRunner&quot;;\n        final static int MAX = 10;\n\n        public int countTestCases() {\n                return MAX;\n        }\n        public void run(TestResult result) {\n                System.out.printf(&quot;MyTest.run(%s)%n&quot;, this);\n                for (int i = 0; i &lt; MAX; i++) {\n                        if (result.shouldStop())\n                                return;\n                        // Do Nothing Slowly(tm), to simulate reading a \ntest from the file\n                        // and running it...\n                        try {    \n                                Thread.sleep(250);   // so I can see the \ngauge moving...\n                        } catch (InterruptedException e) {\n                        }\n                       \n                        result.startTest(this);\n\n                        if (i == 6) {\n                                System.out.println(&quot;ADDING FAILURE&quot;);\n                                result.addFailure(this,\n                                    new AssertionFailedError(&quot;boo hoo&quot;));\n                        } else {\n                                if (i == 9) {\n                                        result.addError(this,\n                                    new RuntimeException(&quot;wah&quot;));\n                                }\n                        }\n                        result.endTest(this);\n                }\n        }\n\n\nI looked around and couldn&#39;t find commentary describing if I am doing \nthis correctly, but\ntextui.TextRunner.doRun would appear to confirm that I am not violating \nany assumptions.\n\nWhen I run this under e.g., the Eclipse testrunner, the gauge moves, and \nturns red at the\nexpected time, but the Failure is replicated through all remaining \ninvocations of that Test.\nThe default testresult implementation adds smth like &quot;new \nTestFailure(test, exc)&quot; to a\nVector, so the non-uniqueness problem seems to be rooted deeper down.\n\nAs well, clicking on a failure itself results in a popup about test \nclass not found in project.\n\nMore detailed code is attached in case anyone has time to look. Or wants \nto play.\n\nThanks\nIan Darwin\n\n\n  ----------\n\npackage regress;\n\nimport junit.framework.Test;\nimport junit.framework.TestSuite;\n\npublic class AllTests {\n\n\tpublic static Test suite() {\n\t\tTestSuite suite = new TestSuite(&quot;Test for default package&quot;);\n\t\t//$JUnit-BEGIN$\n\t\tsuite.addTest(new MyTest(&quot;one&quot;));\n\t\tsuite.addTest(new MyTest(&quot;Two&quot;));\n\t\t//$JUnit-END$\n\t\treturn suite;\n\t}\n\n}\n\n\n  ----------\n\npackage regress;\n\nimport junit.framework.AssertionFailedError;\nimport junit.framework.Test;\nimport junit.framework.TestResult;\n\n/**\n * Skeleton for how pageunit will run multiple testcases from\n * within one Test class. Thanks for Jonathan Fuerth of sqlpower.ca\n * for the idea on how to set this up.\n * &lt;br/&gt;\n * In this version it sort of works, but:\n * &lt;br/&gt;Once a test has failed, subsequent tests report the same failure;\n * &lt;br/&gt;Clicking on the failures pops up a dialog about &quot;test class not\n * found in project...&quot;\n * @author Ian Darwin\n */\npublic class MyTest implements Test {\n\t\n\tprivate String name = &quot;TestRunner&quot;;\n\tfinal static int MAX = 10;\n\tpublic MyTest(String name) {\n\t\tthis.name=name;\n\t\tSystem.out.printf(&quot;MyTest.MyTest(%s)%n&quot;, name);\n\t}\n\tpublic MyTest() {\n\t\tthis(&quot;NoName&quot;);\n\t}\n\tpublic int countTestCases() {\n\t\treturn MAX;\n\t}\n\tint i = 0;\n\tpublic void run(TestResult result) {\n\t\tSystem.out.printf(&quot;MyTest.run(%s)%n&quot;, this);\n\t\tfor (; i &lt; MAX; i++) {\n\t\t\tif (result.shouldStop())\n\t\t\t\treturn;\n\t\t\tSystem.out.println(&quot;MyTest.run(), i = &quot; + i);\n\t\t\ttry {\n\t\t\t\tThread.sleep(250);\n\t\t\t} catch (InterruptedException e) {\n\t\t\t\t// canthappen\n\t\t\t}\n\t\t\tSystem.out.println(&quot;MyTest.run(): start test&quot;);\n\t\t\tresult.startTest(this);\n\t\t\t\n\t\t\tif (i == 6) {\n\t\t\t\tSystem.out.println(&quot;ADDING FAILURE&quot;);\n\t\t\t\tresult.addFailure(this, new AssertionFailedError(&quot;boo hoo&quot;));\n\t\t\t} else {\n\t\t\t\tif (i == 9) {\n\t\t\t\t\tresult.addError(this, new RuntimeException(&quot;wah&quot;));\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.endTest(this);\n\t\t}\n\t}\n\t\n\t@Override\n\tpublic String toString() {\n\t\treturn getName();\n\t}\n\tpublic String getName() {\n\t\treturn name + i;\n\t}\n}\n\n\n\n[Non-text portions of this message have been removed]\n\n\n\n\n", 
    "subject": "junit 3.8 Test/TestResult interaction - reality check"
}