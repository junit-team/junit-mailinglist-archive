{
    "numMessagesInTopic": 8, 
    "nextInTime": 21530, 
    "senderId": "EopTBi_0eykkaq6b_qgJRf0mLuhDE3i98ewo65_TM0g4vTDLwzbOokt64oMBwQs4_jmhLcQVo_Zk5vHw2VQP_IwYcnORTEvk", 
    "systemMessage": true, 
    "subject": "Re: execute code upon failed test in junit 4", 
    "from": "&quot;mykro76&quot; &lt;danieljcarr@...&gt;", 
    "authorName": "mykro76", 
    "msgSnippet": "Hi David, If the scope within catchFailure() can access variables and methods of the enclosing MykroTest instance then yes, that would work very well. Out of", 
    "msgId": 21529, 
    "rawEmail": "Return-Path: &lt;danieljcarr@...&gt;\r\nReceived: (qmail 34935 invoked from network); 23 Apr 2009 01:47:06 -0000\r\nReceived: from unknown (98.137.34.46)\n  by m2.grp.sp2.yahoo.com with QMQP; 23 Apr 2009 01:47:06 -0000\r\nReceived: from unknown (HELO n12c.bullet.sp1.yahoo.com) (69.147.64.111)\n  by mta3.grp.sp2.yahoo.com with SMTP; 23 Apr 2009 01:47:06 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1240451212; bh=yVN3ed5HORqTttkcXUrguWfmXlpHUqkg79uigIE5kWA=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:Date:To:Message-ID:In-Reply-To:User-Agent:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-Yahoo-Newman-Property:X-Originating-IP:X-eGroups-Msg-Info:X-Yahoo-Post-IP:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:Sender:X-eGroups-Approved-By:X-eGroups-Auth; b=paLrORBj7MJHj/6Hfc28dd8CWR52+IAI51avyQG9L31dgcEzg0gmQ2mqD3/X4sSK5Dje35UgDjAAmvIOA1phekrA4ZAfo/4DW6YlFqsHmhHQeTKzDUGY17GqV20BNlUi\r\nReceived: from [69.147.65.151] by n12.bullet.sp1.yahoo.com with NNFMP; 23 Apr 2009 01:46:52 -0000\r\nReceived: from [98.137.34.35] by t5.bullet.mail.sp1.yahoo.com with NNFMP; 23 Apr 2009 01:46:52 -0000\r\nX-Sender: danieljcarr@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 47847 invoked from network); 22 Apr 2009 20:29:24 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m3.grp.sp2.yahoo.com with QMQP; 22 Apr 2009 20:29:24 -0000\r\nX-Received: from unknown (HELO n15c.bullet.sp1.yahoo.com) (69.147.64.120)\n  by mta1.grp.sp2.yahoo.com with SMTP; 22 Apr 2009 20:29:24 -0000\r\nX-Received: from [69.147.65.171] by n15.bullet.sp1.yahoo.com with NNFMP; 22 Apr 2009 09:32:55 -0000\r\nX-Received: from [98.137.34.73] by t13.bullet.mail.sp1.yahoo.com with NNFMP; 22 Apr 2009 09:16:52 -0000\r\nDate: Wed, 22 Apr 2009 09:08:16 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;gsmmq0+5hnk@...&gt;\r\nIn-Reply-To: &lt;4f7da6b90904210635k7a3457b3ubdb88f1bf9e4a6fa@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;mykro76&quot; &lt;danieljcarr@...&gt;\r\nSubject: Re: execute code upon failed test in junit 4\r\nX-Yahoo-Group-Post: member; u=208318621; y=TaJawM-uxEVKJZ44wwFqmMf6ciJ9t6sHs6zgUlkav4uJWg\r\nX-Yahoo-Profile: mykro76\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 23 Apr 2009 01:46:51 -0000\r\n\r\nHi David,\n\nIf the scope within catchFailure() can access variables and meth=\r\nods of the enclosing MykroTest instance then yes, that would work very well=\r\n.\n\nOut of curiosity, did you decide against a simple @OnFail annotation onl=\r\ny because it can&#39;t pass Throwable?  So are you thinking of @Decorator becom=\r\ning a broader platform to support additional event classes with various par=\r\nameters?\n\nSorry if I&#39;m off track here - I had to google up on the pattern!\n=\r\n\n\nP.S. - I&#39;m working on the custom Runner/Listener as suggested, and it pro=\r\nmptly got a little messy:\n\npublic class MyTestFailedListener extends RunLis=\r\ntener {\n\tpublic void testFailure(Failure failure) throws java.lang.Exceptio=\r\nn {\n\t\t// How to access the Test from here?\n\t}\n}\n\nAt best I can try to disse=\r\nct Failure.getDescription().getDisplayName() to figure out the Test instanc=\r\ne ... ugh.  Is there a way to access the Runner or the Test from the Listen=\r\ner?\n\nThanks and regards!\n\n--- In junit@yahoogroups.com, David Saff &lt;david@.=\r\n..&gt; wrote:\n&gt;\n&gt; Mykro, all,\n&gt; \n&gt; Here&#39;s the syntax I&#39;m playing with for 4.7:=\r\n\n&gt; \n&gt; public class MykroTest {\n&gt; \t@Decorator public OnFail noticeFailures =\r\n=3D new OnFail() {\n&gt; \t\tpublic void catchFailure(Throwable t) {\n&gt; \t\t\tdumpCac=\r\nheAppenderToConsoleAppender();\n&gt; \t\t}\n&gt; \t};\n&gt; \n&gt; \t//...\n&gt; }\n&gt; \n&gt; Would that =\r\ndo what you need?\n&gt; \n&gt; On Fri, Apr 17, 2009 at 2:02 AM, mykro76 &lt;danieljcar=\r\nr@...&gt; wrote:\n&gt; &gt; I&#39;m using Junit 4 annotations, @Before, @After, @Test, et=\r\nc. =A0I can&#39;t find a way to execute code only when a test fails. =A0 In ess=\r\nence, an @OnFail annotation. =A0Is this possible?\n&gt; &gt; The only solutions I&#39;=\r\nve seen posted in this list were for Junit3, or involved setting a success =\r\nflag at the end of *every* test. =A0Neither of which is very appealing.\n&gt; &gt;=\r\n Backstory: I created a CacheAppender for log4j which stores large volumes =\r\nof DEBUG level logging. =A0ERROR, WARN, INFO etc continue to go to the defa=\r\nult ConsoleAppender in realtime. =A0If the test fails, I want to dump the c=\r\nontents of CacheAppender to the ConsoleAppender. =A0If the test succeeds I =\r\nwant to discard this extra logging. =A0 Is there a better way I could be do=\r\ning this?\n&gt; &gt; Thanks!\n\n\n\n", 
    "profile": "mykro76", 
    "topicId": 21515, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 208318621, 
    "prevInTime": 21528, 
    "contentTrasformed": false, 
    "postDate": "1240391296", 
    "canDelete": false, 
    "nextInTopic": 21536, 
    "prevInTopic": 21527, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MDkwNDIxMDYzNWs3YTM0NTdiM3ViZGI4OGYxYmY5ZTRhNmZhQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGdzbW1xMCs1aG5rQGVHcm91cHMuY29tPg=="
    }
}