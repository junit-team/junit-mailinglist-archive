{
    "numMessagesInTopic": 3, 
    "nextInTime": 2067, 
    "senderId": "BlcdfVGBDOJ2cgFnZR6VTSJHUgMTbAEkEzRKJ5ZlX6TNsn8J4Qz4uQzwPAgYHOS2AZfsxOQ8U0t4XZzD27L79hw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Digest Number 238", 
    "from": "Frank Enos &lt;fenos@...&gt;", 
    "authorName": "Frank Enos", 
    "msgSnippet": "Hi Erik; It gets stranger. In trying to write a simple set of test cases, I discovered that the problem only exists if the exception is thrown from a class", 
    "msgId": 2066, 
    "topicId": 2066, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-937388680\">Hi Erik;<br/>\nIt gets stranger. In trying to write a simple set of test cases, I <br/>\ndiscovered that the problem only exists if the exception is thrown from a <br/>\nclass named &quot;PersistenceManager&quot; (or PersistenceManager2...).That is, I <br/>\ncan&#39;t catch an exception in a test method in Junit if that exception is <br/>\nthrown by a class named PersistenceManager. Renaming the class <br/>\n&quot;PersistManager&quot; causes the expected behavior. I&#39;m also unable to duplicate <br/>\nthe persistence manager problem on a Win2k machine (I&#39;m working on Solaris) <br/>\nso I&#39;m assuming that it has to do with my environment, although my initial <br/>\nsuspicion that there was some conflicting &quot;PersistenceManager&quot; on my <br/>\nclasspath has shown to be fruitless.<br/>\n<br/>\nIf it turns out to be something more interesting than a conflict in my <br/>\nenvironment, I&#39;ll post some test cases; for now, thanks for pointing me in <br/>\nthe direction of a solution.<br/>\n<br/>\nFrank<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt;    Date: Sun, 22 Jul 2001 09:48:59 -0700<br/>\n&gt;    From: &quot;Erik Meade&quot; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:emeade@...\">emeade@...</a>&gt;<br/>\n&gt;Subject: RE: Re: Junit manipulating exceptions<br/>\n&gt;<br/>\n&gt;Frank,<br/>\n&gt;<br/>\n&gt;Can you write up a TestCase illustrating this?<br/>\n&gt;<br/>\n&gt;--<br/>\n&gt;Erik Meade             <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:emeade@...\">emeade@...</a><br/>\n&gt;Senior Consultant      Object Mentor, Inc.<br/>\n&gt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.junit.org\">http://www.junit.org</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; &gt; -----Original Message-----<br/>\n&gt; &gt; From: Frank Enos [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:fenos@...\">fenos@...</a>]<br/>\n&gt; &gt; Sent: Saturday, July 21, 2001 8:39 AM<br/>\n&gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; &gt; Subject: [junit] Re: Junit manipulating exceptions<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Hi Jason. Thanks for responding.<br/>\n&gt; &gt;<br/>\n&gt; &gt; It&#39;s definitely not reaching the catch block. The assertions aren&#39;t being<br/>\n&gt; &gt; checked, and even adding a System.out.println(&quot;help me&quot;) or what<br/>\n&gt; &gt; have you,<br/>\n&gt; &gt; or a System.exit(); to the catch block has no effect. For some reason the<br/>\n&gt; &gt; catch block is not catching the SQLException, even though if I catch the<br/>\n&gt; &gt; superclass Exception (as in my example testBadWrite2()), e.getClass()<br/>\n&gt; &gt; returns the expected java.sql.SQLException. One of my initial<br/>\n&gt; &gt; thoughts was<br/>\n&gt; &gt; that perhaps the Exception was being held somewhere in a Collection when<br/>\n&gt; &gt; the test methods are executed (there&#39;s a lot of reflection going on, and<br/>\n&gt; &gt; I&#39;m not sure I know exactly what&#39;s happening) and implicitly upcast to<br/>\n&gt; &gt; Exception, but the attempt to cast the caught Exception to SQLException<br/>\n&gt; &gt; throws a ClassCastException. I&#39;m mystified.<br/>\n&gt; &gt;<br/>\n&gt; &gt; BTW, toString(), when called on a subclass of Throwable returns the<br/>\n&gt; &gt; concatenation of : the full name of the class, &quot;: &quot;, and the result of<br/>\n&gt; &gt; getMessage(). If the Throwable was created without a message, it simply<br/>\n&gt; &gt; returns  the name of the class.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Take care.<br/>\n&gt; &gt; Frank<br/>\n&gt; &gt; &gt;________________________________________________________________________<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;Message: 9<br/>\n&gt; &gt; &gt;    Date: Fri, 20 Jul 2001 16:24:45 -0400<br/>\n&gt; &gt; &gt;    From: &quot;Jason Rogers&quot; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jason.rogers@...\">jason.rogers@...</a>&gt;<br/>\n&gt; &gt; &gt;Subject: RE: Junit manipulating exceptions?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;Frank,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;Are you sure that it isn&#39;t getting into the catch block?  Also, I didn&#39;t<br/>\n&gt; &gt; &gt;know that e.toString() returned the same thing as<br/>\n&gt; &gt; e.getMessage().  Is that<br/>\n&gt; &gt; &gt;so?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;-Jason<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;     &gt; -----Original Message-----<br/>\n&gt; &gt; &gt;     &gt; From: Frank Enos [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:fenos@...\">fenos@...</a>]<br/>\n&gt; &gt; &gt;     &gt; Sent: Friday, July 20, 2001 3:13 PM<br/>\n&gt; &gt; &gt;     &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; &gt; &gt;     &gt; Subject: [junit] Junit manipulating exceptions?<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; I&#39;ve provided coded examples below. My basic question is<br/>\n&gt; &gt; &gt;     &gt; this: Does Junit<br/>\n&gt; &gt; &gt;     &gt; (3.7) manipulate exceptions in some way that would<br/>\n&gt; &gt; &gt;     &gt; prevent an exception<br/>\n&gt; &gt; &gt;     &gt; from being caught in a normal try/catch block? The<br/>\n&gt; &gt; &gt;     &gt; behavior I&#39;m seeing is<br/>\n&gt; &gt; &gt;     &gt; that if I attempt to catch the specific exception thrown<br/>\n&gt; &gt; &gt;     &gt; by a method (e.g.<br/>\n&gt; &gt; &gt;     &gt; catch (java.sql.SQLException e), the catch block fails to<br/>\n&gt; &gt; &gt;     &gt; catch it and<br/>\n&gt; &gt; &gt;     &gt; Junit logs it as an error. If I use catch (Exception e),<br/>\n&gt; &gt; &gt;     &gt; the exception is<br/>\n&gt; &gt; &gt;     &gt; caught as I would expect. I find that I can call<br/>\n&gt; &gt; &gt;     &gt; getClass() on the caught<br/>\n&gt; &gt; &gt;     &gt; Exception and that it returns the expected SQLException,<br/>\n&gt; &gt; &gt;     &gt; whereas using<br/>\n&gt; &gt; &gt;     &gt; instanceof fails.<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; Examples (behaves the same using other methods throwing<br/>\n&gt; &gt; &gt;     &gt; other exception types)<br/>\n&gt; &gt; &gt;     &gt; methods are from:<br/>\n&gt; &gt; &gt;     &gt; public class PersistenceTest extends TestCase {...}<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt;    public static void main(String[] args) {<br/>\n&gt; &gt; &gt;     &gt;   try {<br/>\n&gt; &gt; &gt;     &gt;        PersistenceManager.singleton().write(&quot;insert into<br/>\n&gt; &gt; &gt;     &gt; noSuchTable<br/>\n&gt; &gt; &gt;     &gt; values(&#39;junk&#39;)&quot;);<br/>\n&gt; &gt; &gt;     &gt;     System.out.println(&quot;No exception writing to<br/>\n&gt; &gt; &gt;     &gt; non-existent table&quot;);<br/>\n&gt; &gt; &gt;     &gt;   } catch (SQLException e) {<br/>\n&gt; &gt; &gt;     &gt;     System.out.println(e.getClass().toString());<br/>\n&gt; &gt; &gt;     &gt;   }<br/>\n&gt; &gt; &gt;     &gt;    }<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; If I simply invoke this main()  method which I have added<br/>\n&gt; &gt; &gt;     &gt; to the test<br/>\n&gt; &gt; &gt;     &gt; class, it behaves as expected, printing the expected name<br/>\n&gt; &gt; &gt;     &gt; of the class and<br/>\n&gt; &gt; &gt;     &gt; exiting normally.<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt;    public void testBadWrite() {<br/>\n&gt; &gt; &gt;     &gt;   try {<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; PersistenceManager.singleton().write(&quot;insert into noSuchTable<br/>\n&gt; &gt; &gt;     &gt; values(&#39;hey&#39;)&quot;);<br/>\n&gt; &gt; &gt;     &gt;           fail(&quot;No exception writing to non-existent table&quot;);<br/>\n&gt; &gt; &gt;     &gt;   } catch (SQLException e) {<br/>\n&gt; &gt; &gt;     &gt;     assertTrue(e.toString().indexOf(&quot;ORA-00942&quot;) &gt; -1);<br/>\n&gt; &gt; &gt;     &gt;   }<br/>\n&gt; &gt; &gt;     &gt;    }<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; This test method fails to catch the SQLException, passing<br/>\n&gt; &gt; &gt;     &gt; it upwards and<br/>\n&gt; &gt; &gt;     &gt; logging an error.<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; The following test passes, however:<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt;    public void testBadWrite2() {<br/>\n&gt; &gt; &gt;     &gt;   try {<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; PersistenceManager.singleton().write(&quot;insert into noSuchTable<br/>\n&gt; &gt; &gt;     &gt; values(&#39;hey&#39;)&quot;);<br/>\n&gt; &gt; &gt;     &gt;           fail(&quot;No exception writing to non-existent table&quot;);<br/>\n&gt; &gt; &gt;     &gt;   } catch (Exception e) {<br/>\n&gt; &gt; &gt;     &gt;     assertEquals(&quot;java.sql.SQLException&quot;, e.getClass().getName())<br/>\n&gt; &gt; &gt;     &gt;     assertTrue(e.toString().indexOf(&quot;ORA-00942&quot;) &gt; -1);<br/>\n&gt; &gt; &gt;     &gt;   }<br/>\n&gt; &gt; &gt;     &gt;    }<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt; &gt;     &gt; What am I missing?<br/>\n&gt; &gt; &gt;     &gt; Thanks,<br/>\n&gt; &gt; &gt;     &gt; Frank<br/>\n&gt; &gt; &gt;     &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt; &gt; </span></blockquote></div>", 
    "prevInTime": 2065, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "995915868", 
    "canDelete": false, 
    "nextInTopic": 2067, 
    "prevInTopic": 0, 
    "headers": {
        "inReplyToHeader": "PDk5NTg4MzEzNy40MzIuMTU2NjMubDEwQHlhaG9vZ3JvdXBzLmNvbT4=", 
        "messageIdInHeader": "PDUuMS4wLjE0LjAuMjAwMTA3MjMxNDI5MjYuMDIzYjNiZTBAbWFpbC5tbmguY29tPg=="
    }
}