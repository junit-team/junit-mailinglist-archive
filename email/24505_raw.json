{
    "numMessagesInTopic": 11, 
    "nextInTime": 24506, 
    "senderId": "4eK-887WaRxGOYSKZ6sYlfe25i4nzpoNdz-TZzYJhqYqf1jZCkkVzHjGuLsrZTonwSOv1bFtHLlaQ6e6Z47n4f8Lh0irUupLcFeMG0lgFMKJHwaAU_ZqM_h1PcvUeA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Is it possible to have write NonBlocking Junit tests", 
    "from": "=?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "Here is a different approach that doesn t involve any blocking: http://beust.com/weblog/2005/02/01/testing-asynchronous-code/ -- Cédric ... Here is a", 
    "msgId": 24505, 
    "rawEmail": "Return-Path: &lt;cbeust@...&gt;\r\nX-Sender: cbeust@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 25176 invoked by uid 102); 11 Apr 2014 00:07:06 -0000\r\nX-Received: from unknown (HELO mtaq4.grp.bf1.yahoo.com) (10.193.84.143)\n  by m17.grp.bf1.yahoo.com with SMTP; 11 Apr 2014 00:07:06 -0000\r\nX-Received: (qmail 4776 invoked from network); 11 Apr 2014 00:07:06 -0000\r\nX-Received: from unknown (HELO mail-ob0-f178.google.com) (209.85.214.178)\n  by mtaq4.grp.bf1.yahoo.com with SMTP; 11 Apr 2014 00:07:06 -0000\r\nX-Received: by mail-ob0-f178.google.com with SMTP id wp18so5206440obc.23\n        for &lt;junit@yahoogroups.com&gt;; Thu, 10 Apr 2014 17:07:06 -0700 (PDT)\r\nX-Received: by 10.182.81.39 with SMTP id w7mr4556387obx.56.1397174825997; Thu,\n 10 Apr 2014 17:07:05 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.182.247.99 with HTTP; Thu, 10 Apr 2014 17:06:45 -0700 (PDT)\r\nIn-Reply-To: &lt;CAFYH9Bqro5jJfeqHsuYaoA2G+fEQ3KuUamAYCE4xxdpwDUP5RQ@...&gt;\r\nReferences: &lt;li6ctj+h5l6qk@...&gt; &lt;CAKi4273twX35iRgMg95Lyw+pBHprsBQRqo1tcLa+Cx4HFT3wrw@...&gt;\n &lt;CAFYH9Bqro5jJfeqHsuYaoA2G+fEQ3KuUamAYCE4xxdpwDUP5RQ@...&gt;\r\nDate: Thu, 10 Apr 2014 17:06:45 -0700\r\nX-Google-Sender-Auth: kvK2yq-Y7GpyTkiZSZ2dxkx3o34\r\nMessage-ID: &lt;CAOphgJDWOAoMSkni5Z-4ffuwM3L1pTdxYRKz9DfmF7ktihnq2Q@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: multipart/alternative; boundary=047d7b2e437e3175e504f6b91d3d\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: =?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;\r\nSubject: Re: [junit] Is it possible to have write NonBlocking Junit tests\r\nX-Yahoo-Group-Post: member; u=31449770; y=26z3r0RuFlxdNq9bGKQvAEhC96qWYvbeRSMWT8gCF2Ub\r\nX-Yahoo-Profile: cbeust\r\n\r\n\r\n--047d7b2e437e3175e504f6b91d3d\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHere is a different approach that doesn&#39;t involve any blocking:\n\nhttp://beu=\r\nst.com/weblog/2005/02/01/testing-asynchronous-code/\n\n\n-- \nC=E9dric\n\n\n\nOn Th=\r\nu, Apr 10, 2014 at 12:17 PM, Neil Swingler &lt;neil@...&gt; wrote:\n\n&gt;\n&gt;\n&gt;=\r\n Bah sent an incomplete example by accident. Here is the whole message\n&gt;\n&gt; =\r\nUse a SettableFuture from guava. To borrow Colin&#39;s example\n&gt;\n&gt; @Test\n&gt; publ=\r\nic void testAsync() throws Exception {\n&gt;  final SettableFuture&lt;Message&gt; fut=\r\nure =3D SettableFuture.create();\n&gt; someAsyncCode(new Handler() {\n&gt;  public =\r\nvoid handle(Message message) {\n&gt;                             future.set(mes=\r\nsage);\n&gt; }\n&gt; });\n&gt;   assertThat(future.get(), is(something));\n&gt; }\n&gt;\n&gt; - Nei=\r\nl\n&gt;\n&gt;\n&gt; On 10 April 2014 18:32, Colin Vipurs &lt;zodiaczx6@...&gt; wrote:\n&gt;=\r\n\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; You could use a locking mechanism shared between your test and ha=\r\nndler so\n&gt;&gt; that progress continues as quick as possible and then put an ov=\r\nerall\n&gt;&gt; timeout on your test in the event of failure.\n&gt;&gt;\n&gt;&gt; Something like=\r\n this should work just fine:\n&gt;&gt;\n&gt;&gt; @Test\n&gt;&gt; public void testAsync() throws =\r\nException {\n&gt;&gt;  final Semaphore lock =3D new Semaphore(0);\n&gt;&gt; someAsyncCode=\r\n(new Handler() {\n&gt;&gt; public void handle() {\n&gt;&gt;  // put your assertions in he=\r\nre\n&gt;&gt; lock.release();\n&gt;&gt; }\n&gt;&gt;  });\n&gt;&gt;  lock.acquire();\n&gt;&gt;  }\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; On Th=\r\nu, Apr 10, 2014 at 4:21 PM, &lt;abhijeet.kushe@...&gt; wrote:\n&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt; I am writing a Junit tests for Amqp Message Listener.This is how the\n&gt;&gt;&gt; =\r\ntest is written.I send a message to a exchange and introduce a delay of 1s\n=\r\n&gt;&gt;&gt; (assuming that the listener will do its job within that time frame).Thi=\r\ns\n&gt;&gt;&gt; approach slows down the build process as there 15-20 tests like these=\r\n which\n&gt;&gt;&gt; take a minimum of 20 seconds to execute.Is there a way in which =\r\nI can do\n&gt;&gt;&gt; this is a non blocking way.For pass a call handler which verif=\r\nies the tests\n&gt;&gt;&gt; after the listener does it job.Something like Actors migh=\r\nt be internally\n&gt;&gt;&gt; used\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; --\n&gt;&gt; Maybe she awoke to see the r=\r\noommate&#39;s boyfriend swinging from the\n&gt;&gt; chandelier wearing a boar&#39;s head.\n=\r\n&gt;&gt;\n&gt;&gt; Something which you, I, and everyone else would call &quot;Tuesday&quot;, of\n&gt;&gt;=\r\n course.\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt; \n&gt;\n\r\n--047d7b2e437e3175e504f6b91d3d\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div dir=3D&quot;ltr&quot;&gt;Here is a different approach that doesn&#39;t involve any =\r\nblocking:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=3D&quot;http://beust.com/weblog/2005/02/01/=\r\ntesting-asynchronous-code/&quot;&gt;http://beust.com/weblog/2005/02/01/testing-asyn=\r\nchronous-code/&lt;/a&gt;&lt;br&gt;\n\n&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_extr=\r\na&quot;&gt;&lt;br clear=3D&quot;all&quot;&gt;&lt;div&gt;--&nbsp;&lt;div&gt;C=E9dric&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;br&gt;&lt;br=\r\n&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Thu, Apr 10, 2014 at 12:17 PM, Neil Swingler=\r\n &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:neil@...&quot; target=3D&quot;_blank=\r\n&quot;&gt;neil@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote class=3D&quot;gmail_quot=\r\ne&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;=\r\n\n\n\n\n\n\n\n\n\n        \n\n\n\n\n&lt;div&gt;\n\n\n\n\n\n&lt;br&gt;&lt;br&gt;\n\n\n\n\n&lt;div dir=3D&quot;ltr&quot;&gt;Bah sent an =\r\nincomplete example by accident. Here is the whole message&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;di=\r\nv&gt;&lt;div class=3D&quot;&quot;&gt;&lt;span style=3D&quot;font-family:arial,sans-serif;font-size:12.=\r\n800000190734863px&quot;&gt;Use a SettableFuture from guava. To borrow Colin&#39;s e=\r\nxample&lt;/span&gt;&lt;div style=3D&quot;font-family:arial,sans-serif;font-size:12.800000=\r\n190734863px&quot;&gt;\n\n\n&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=3D&quot;font-family:arial,sans-serif;=\r\nfont-size:12.800000190734863px&quot;&gt;&lt;div dir=3D&quot;ltr&quot;&gt;&lt;div class=3D&quot;&quot;&gt;&lt;div&gt;&lt;div&gt;=\r\n&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;@Test&lt;/div&gt;&lt;div&gt;&lt;span style=3D=\r\n&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;public void testAsync() throws Exception {&lt;/=\r\ndiv&gt;\n\n\n&lt;/div&gt;&lt;/div&gt;&lt;div class=3D&quot;&quot;&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap=\r\n&quot;&gt;\t\t&lt;/span&gt;final SettableFuture&lt;Message&gt; future =3D SettableFuture.cr=\r\neate();&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;someAsyncCo=\r\nde(new Handler() {&lt;/div&gt;\n\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t&lt;/sp=\r\nan&gt;public void handle(Message message) {&lt;/div&gt;\n&lt;/div&gt;&lt;div&gt;&nbsp; &nbsp; &nb=\r\nsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &=\r\nnbsp; future.set(message);&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t=\r\n\t\t&lt;/span&gt;} &nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/sp=\r\nan&gt;});&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;\n\n\n&lt;di=\r\nv&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;w=\r\nhite-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;assertThat(future.get(), is(something));&lt;/div=\r\n&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;}&lt;/div&gt;&lt;span class=3D&quot;HO=\r\nEnZb&quot;&gt;&lt;font color=3D&quot;#888888&quot;&gt;&lt;div&gt;\n\n&lt;br&gt;&lt;/div&gt;&lt;div&gt;\n- Neil&lt;/div&gt;&lt;/font&gt;&lt;/s=\r\npan&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=\r\n=3D&quot;gmail_quote&quot;&gt;&lt;div class=3D&quot;&quot;&gt;On 10 April 2014 18:32, Colin Vipurs &lt;span=\r\n dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:zodiaczx6@...&quot; target=3D&quot;_blank&quot;&gt;z=\r\nodiaczx6@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;\n\n\n&lt;/div&gt;&lt;div&gt;&lt;div class=3D&quot;h5&quot;=\r\n&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:1=\r\npx #ccc solid;padding-left:1ex&quot;&gt;\n\n\n\n\n\n\n        \n\n\n\n\n&lt;div&gt;\n\n\n\n\n\n&lt;br&gt;&lt;br&gt;\n\n\n\n=\r\n\n&lt;div dir=3D&quot;ltr&quot;&gt;You could use a locking mechanism shared between your tes=\r\nt and handler so that progress continues as quick as possible and then put =\r\nan overall timeout on your test in the event of failure.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div=\r\n&gt;\n\n\n\nSomething like this should work just fine:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;d=\r\niv&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;@Test&lt;/div&gt;&lt;div&gt;&lt;span style=\r\n=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;public void testAsync() throws Exception =\r\n{&lt;/div&gt;\n\n\n\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;final Semapho=\r\nre lock =3D new Semaphore(0);&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap=\r\n&quot;&gt;\t\t&lt;/span&gt;someAsyncCode(new Handler() {&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-spa=\r\nce:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;public void handle() {&lt;/div&gt;\n\n\n\n&lt;div&gt;&lt;span style=3D&quot;=\r\nwhite-space:pre-wrap&quot;&gt;\t\t\t\t&lt;/span&gt;// put your assertions in here&lt;/div&gt;&lt;div&gt;&lt;=\r\nspan style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t\t&lt;/span&gt;lock.release();&lt;/div&gt;&lt;div&gt;&lt;s=\r\npan style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;} &nbsp;&lt;/div&gt;\n&lt;div&gt;&lt;span styl=\r\ne=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;});&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-spac=\r\ne:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/sp=\r\nan&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;lock.acquire();=\r\n&lt;/div&gt;\n\n\n\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/=\r\ndiv&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On T=\r\nhu, Apr 10, 2014 at 4:21 PM,  &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:abhij=\r\neet.kushe@...&quot; target=3D&quot;_blank&quot;&gt;abhijeet.kushe@...&lt;/a&gt;&gt;&lt;/sp=\r\nan&gt; wrote:&lt;br&gt;\n\n\n\n&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .=\r\n8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n\n\n&lt;u&gt;&lt;/u&gt;\n\n\n\n\n\n\n\n\n\n \n&lt;div=\r\n&gt;\n&lt;span&gt;&nbsp;&lt;/span&gt;\n\n\n&lt;div&gt;\n  &lt;div&gt;\n\n\n    &lt;div&gt;\n      \n      \n      &lt;p&gt;&lt;s=\r\npan style=3D&quot;font-family:Arial,&#39;Liberation Sans&#39;,&#39;DejaVu Sans&#=\r\n39;,sans-serif;font-size:14px&quot;&gt;I am writing a Junit tests for Amqp Message =\r\nListener.This is how the test is written.I send a message to a exchange and=\r\n introduce a delay of 1s (assuming that the listener will do its job within=\r\n that time frame).This approach slows down the build process as there 15-20=\r\n tests like these which take a minimum of 20 seconds to execute.Is there a =\r\nway in which I can do this is a non blocking way.For pass a call handler wh=\r\nich verifies the tests after the listener does it job.Something like Actors=\r\n might be internally used&lt;/span&gt;&lt;/p&gt;\n\n\n\n\n\n    &lt;/div&gt;\n     \n\n    \n    &lt;div s=\r\ntyle=3D&quot;color:#fff;min-height:0&quot;&gt;&lt;/div&gt;\n\n\n&lt;/div&gt;\n\n\n\n  \n\n\n\n\n\n\n&lt;/div&gt;&lt;/div&gt;&lt;/=\r\nblockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br clear=3D&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;&lt;font col=\r\nor=3D&quot;#888888&quot;&gt;-- &lt;br&gt;Maybe she awoke to see the roommate&#39;s boyfriend s=\r\nwinging from the chandelier wearing a boar&#39;s head.&lt;br&gt;\n&lt;br&gt;Something wh=\r\nich you, I, and everyone else would call &quot;Tuesday&quot;, of course.\n&lt;/=\r\nfont&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;\n\n\n\n\n\n\n&lt;br&gt;\n\n\n&lt;br&gt;\n\n\n\n\n&lt;div width=3D&quot;1&quot; style=3D&quot;col=\r\nor:white;clear:both&quot;&gt;&lt;/div&gt;\n\n\n\n&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;=\r\nbr&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=3D&quot;h5&quot;&gt;\n\n\n\n\n\n\n&lt;br&gt;\n\n\n&lt;br&gt;\n\n\n\n\n&lt;div width=3D&quot;1&quot; sty=\r\nle=3D&quot;color:white;clear:both&quot;&gt;&lt;/div&gt;\n\n\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;\n\r\n--047d7b2e437e3175e504f6b91d3d--\r\n\n", 
    "profile": "cbeust", 
    "topicId": 24500, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 31449770, 
    "prevInTime": 24504, 
    "contentTrasformed": false, 
    "postDate": "1397174805", 
    "canDelete": false, 
    "nextInTopic": 24506, 
    "prevInTopic": 24504, 
    "headers": {
        "inReplyToHeader": "PENBRllIOUJxcm81akpmZXFIc3VZYW9BMkcrZkVRM0t1VWFtQVlDRTR4eGRwd0RVUDVSUUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBT3BoZ0pEV09Bb01Ta25pNVotNGZmdXdNM0wxcFRkeFlSS3o5RGZtRjdrdGlobnEyUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGxpNmN0aitoNWw2cWtAWWFob29Hcm91cHMuY29tPiA8Q0FLaTQyNzN0d1gzNWlSZ01nOTVMeXcrcEJIcHJzQlFScW8xdGNMYStDeDRIRlQzd3J3QG1haWwuZ21haWwuY29tPiA8Q0FGWUg5QnFybzVqSmZlcUhzdVlhb0EyRytmRVEzS3VVYW1BWUNFNHh4ZHB3RFVQNVJRQG1haWwuZ21haWwuY29tPg=="
    }
}