{
    "numMessagesInTopic": 7, 
    "nextInTime": 7504, 
    "senderId": "QkVvLm2zdoYJs32P-9CB4lChVeQtNzFtlSW-mVT7NcApg-zoPYuVJGeJ61iNFrSspAeAxePK3kyrSWofjFqcN_VIkhjxiBephTU", 
    "systemMessage": false, 
    "subject": "RE: [junit] Junit and EJBs", 
    "from": "John Lindwall &lt;jlindwall@...&gt;", 
    "authorName": "John Lindwall", 
    "msgSnippet": "We wanted to build a suite of unit tests for our session beans.  We looked at Cactus and played with it a bit and were put off by some of the effort involved", 
    "msgId": 7503, 
    "profile": "jlindwall", 
    "topicId": 7330, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 68206578, 
    "messageBody": "<div id=\"ygrps-yiv-959698455\">We wanted to build a suite of unit tests for our session beans.  We looked at Cactus and played with it a bit and were put off by some of the effort involved in making it work.  You have to address various client vs server deployment issues, it seems confusiong wrt what code is executed in the client vs the server ,etc.<br/>\n <br/>\nWe decided not to devote that level of effort to Cactus just yet and instead are writing unit tests that act as clients to the session beans and testing them in that manner using the normal test runner.<br/>\n <br/>\nIt&#39;s not clear to me what the disadvantages are to this approach.  Comments?<br/>\n <br/>\nJohn<br/>\n<br/>\n-----Original Message-----<br/>\nFrom: Jeff Nielsen [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jeff.nielsen@...\">jeff.nielsen@...</a>]<br/>\nSent: Tuesday, April 01, 2003 9:16 PM<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSubject: Re: [junit] Junit and EJBs<br/>\n<br/>\n<br/>\nHere our some suggestions based on the way we test our EJB code.<br/>\n<br/>\n1. Test all of the logic in the code outside of the container.  For example,<br/>\nyour actual EJB class can delegate all of the processing to a handler, which<br/>\ncan be instantiated directly by the test.<br/>\n<br/>\n2. Use the &quot;Cactus&quot; add-on to JUnit to write/run in-container tests that<br/>\nexercise the EJB plumbing.  Then you can just use HTTP for the test runner<br/>\nto communicate with the EJB container, which is less of a hassle.<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> ----- Original Message -----<br/>\nFrom: &quot;Frank Burough&quot; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:fburough@...\">fburough@...</a>&gt;<br/>\nTo: &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;<br/>\nSent: Monday, March 31, 2003 3:11 PM<br/>\nSubject: Re: [junit] Junit and EJBs<br/>\n<br/>\n<br/>\n&gt; Hi--<br/>\n&gt;<br/>\n&gt; I am still tearing my hair out trying to exercise EJBs with JUnit. Any<br/>\n&gt; further insights or help would be greatly appreciated.<br/>\n&gt; Based on Alan&#39;s comments (in the included message below), I have set a<br/>\n&gt; security manager, created a policy file and pointed my codebse to the<br/>\n&gt; directory containing my class files. I now get a<br/>\n&gt; &quot;javax.naming.CommunicationException [Root exception is<br/>\n&gt; java.rmi.ServerException: RemoteException occurred in server thread;<br/>\n&gt; nested exception is:<br/>\n&gt;         java.rmi.UnmarshalException: error unmarshalling arguments;<br/>\n&gt; nested exception is:<br/>\n&gt;         java.net.MalformedURLException: no protocol:<br/>\n&gt; /home/fburough/simplebean/workspace/com/javapro/ejb]&quot;<br/>\n&gt;<br/>\n&gt; message when I run JUnit.<br/>\n&gt;<br/>\n&gt; Here is the code that sets up my test:<br/>\n&gt;       if(System.getSecurityManager() == null)<br/>\n&gt;           System.setSecurityManager(new RMISecurityManager());<br/>\n&gt;       Properties properties = new Properties();<br/>\n&gt;       properties.put(Context.INITIAL_CONTEXT_FACTORY,<br/>\n&gt;                    &quot;org.jnp.interfaces.NamingContextFactory&quot;);<br/>\n&gt;       properties.put(Context.PROVIDER_URL,<br/>\n&gt; &quot;file:///home/fburough/simplebean/workspace&quot;);<br/>\n&gt;<br/>\n&gt;       try {<br/>\n&gt;           // Get an initial context<br/>\n&gt;           InitialContext jndiContext = new InitialContext(properties);<br/>\n&gt;<br/>\n&gt;           // Get a reference to the Bean<br/>\n&gt;           Object ref  = jndiContext.lookup(&quot;StringProcessor&quot;);<br/>\n&gt;           StringProcessorHome home = (StringProcessorHome)<br/>\n&gt;                PortableRemoteObject.narrow (ref,<br/>\nStringProcessorHome.class);<br/>\n&gt;   }<br/>\n&gt; The error occurs on the call to PortableRemoteObject.narrow.<br/>\n&gt;<br/>\n&gt; I have tried to load the EJB from the bean container and get errors as<br/>\n&gt; well:<br/>\n&gt; 1) Changed the Context.PROVIDER_URL to be &quot;localhost:1099&quot;<br/>\n&gt; 2) Remove the &quot;-Djava.rmi.server.codebase=&quot; line from the java startup<br/>\n&gt;<br/>\n&gt; The error I get then is: java.lang.ClassCastException<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Any suggestions? I hate to give up on JUnit because it works so well for<br/>\n&gt; the other testing I need to do. But how to test those EJBs is still a<br/>\n&gt; problem.<br/>\n&gt;<br/>\n&gt; Thanks,<br/>\n&gt;<br/>\n&gt; Frank<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; On Tue, 2003-03-25 at 00:56, Alan Zimmerman wrote:<br/>\n&gt;<br/>\n&gt; &gt; I am able to run the tests with the addition of the following code to<br/>\n&gt; &gt; the setup of the test,<br/>\n&gt; &gt;<br/>\n&gt; &gt; if (System.getSecurityManager() == null) {<br/>\n&gt; &gt;   System.setSecurityManager(new RMISecurityManager());<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; as well as adding the following parameters to the java startup<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;jvmarg<br/>\nline=&quot;-Djava.security.policy=${security.policy} -Djava.rmi.server.codebase=$<br/>\n{rmi.server.codebase}&quot;/&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; The ${security.policy} macro points to a java.policy file giving all<br/>\n&gt; &gt; permissions, and the ${rmi.server.codebase} points to the directory<br/>\n&gt; &gt; the .class files end up in.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Hope this helps<br/>\n&gt; &gt;<br/>\n&gt; &gt; Alan Zimmerman<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Mon, Mar 24, 2003 at 11:28:37AM -0500, Frank Burough wrote:<br/>\n&gt; &gt; &gt; I am attempting to access an EJB from a JUnit test. I use the<br/>\nidentical<br/>\n&gt; &gt; &gt; logic in the JUnit test case as I do in a standalone application.<br/>\n&gt; &gt; &gt; However, when I run the test I get the error:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; javax.naming.CommunicationException.  Root exception is<br/>\n&gt; &gt; &gt; java.lang.ClassNotFoundException: com.javapro.ejb.StringProcessorHome<br/>\n&gt; &gt; &gt; (no security manager: RMI class loader disabled)<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Is there any way around this, so I can do some tests which require<br/>\n&gt; &gt; &gt; connecting to an EJB? If not, I could use any suggestions on<br/>\nintegration<br/>\n&gt; &gt; &gt; testing applications that require access to EJBs.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Here is the code I use to set up access to the EJB:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;    Properties properties = new Properties();<br/>\n&gt; &gt; &gt;     properties.put(Context.INITIAL_CONTEXT_FACTORY,<br/>\n&gt; &gt; &gt; &quot;org.jnp.interfaces.NamingContextFactory&quot;);<br/>\n&gt; &gt; &gt;     properties.put(Context.PROVIDER_URL, &quot;localhost:1099&quot;);<br/>\n&gt; &gt; &gt;     properties.put(Context.URL_PKG_PREFIXES,<br/>\n&gt; &gt; &gt; &quot;org.jboss.naming:org.jnp.interfaces&quot;);<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;     InitialContext jndiContext = new InitialContext(properties);<br/>\n&gt; &gt; &gt;     System.out.println(&quot;Trying to lookup StringProcessor&quot;);<br/>\n&gt; &gt; &gt;     Object ref = jndiContext.lookup(&quot;StringProcessor&quot;);<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; The error occurs on the call to lookup.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Thanks for your help,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Frank<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Your use of Yahoo! Groups is subject to<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt; <br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt; <br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;       Yahoo! Groups Sponsor<br/>\n&gt;             ADVERTISEMENT<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n<br/>\nYahoo! Groups Sponsor\t<br/>\n<br/>\nADVERTISEMENT<br/>\n &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://rd.yahoo.com/M=246920.2960106.4328965.1728375/D=egroupweb/S=1705006905:HM/A=1513703/R=0/*http://www.gotomypc.com/u/tr/yh/cpm/grp/300_06F/g22lp?Target=mm/g22lp.tmpl\">http://rd.yahoo.com/M=246920.2960106.4328965.1728375/D=egroupweb/S=1705006905:HM/A=1513703/R=0/*http://www.gotomypc.com/u/tr/yh/cpm/grp/300_06F/g22lp?Target=mm/g22lp.tmpl</a>&gt; \t<br/>\n  &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://us.adserver.yahoo.com/l?M=246920.2960106.4328965.1728375/D=egroupmail/S=:HM/A=1513703/rand=457544340\">http://us.adserver.yahoo.com/l?M=246920.2960106.4328965.1728375/D=egroupmail/S=:HM/A=1513703/rand=457544340</a>&gt; \t<br/>\n<br/>\nTo unsubscribe from this group, send an email to:<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n<br/>\n<br/>\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt; . <br/>\n<br/>\n<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 7502, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1049409666", 
    "canDelete": false, 
    "nextInTopic": 7506, 
    "prevInTopic": 7403, 
    "headers": {
        "messageIdInHeader": "PEIxNUY1QkY1NUIwOEQ1MTFCQjE3MDBCMEQwNjg3QjQ2MDEzRUVDNkVAeGlmaW5lMDEueGlmaW4uY29tPg=="
    }
}