{
    "numMessagesInTopic": 41, 
    "nextInTime": 6916, 
    "senderId": "EQxGN8ftS0L_EK35TTXvbRtWNTbxkFnQlZ1S6SKT6bcAP8IQs4LkvrCXFWq4CTYasvMrdTN8D6-tshYAXINC1lObCdRP6Of3wRItzzMEIllVLL1m", 
    "systemMessage": false, 
    "subject": "RE: [junit] Programmer Tests and the Database", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "Can you write this up with an example? This would be a useful thing to have in the ol library. So said  Jason Rogers  on  2/7/2003 -------------------- ... ", 
    "msgId": 6915, 
    "profile": "nails762", 
    "topicId": 6711, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "messageBody": "<div id=\"ygrps-yiv-1903342674\">Can you write this up with an example? This would be a useful thing to<br/>\nhave in the ol&#39; library.<br/>\n<br/>\nSo said  Jason Rogers  on  2/7/2003 --------------------<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;OK, I am stepping into this one late, and I haven&#39;t read everything<br/>\n </span></blockquote>but<br/>\n<blockquote><span title=\"ireply\"> &gt;I just saw this talk on ResourceBundles and SQL statements, etc. and<br/>\n&gt;thought I could offer some input.<br/>\n&gt;<br/>\n&gt;We tend to make objects that represent the database access, why not in<br/>\n&gt;this case?  Make objects that represent the selects, inserts, etc.,<br/>\n&gt;leverage the package structure of Java, and then you effectively have<br/>\n&gt;all of your SQL in one place.<br/>\n&gt;<br/>\n&gt;On my current project we use a hierarchy of Query objects that do all<br/>\n </span></blockquote>of<br/>\n<blockquote><span title=\"ireply\"> &gt;our selects, and a heirarchy of Records that do inserts, updates,<br/>\n&gt;deletes, etc.  Queries return Records, Records are given to model<br/>\n </span></blockquote>layer<br/>\n<blockquote><span title=\"ireply\"> &gt;objects for construction (which requires a fair amount of discipline<br/>\n </span></blockquote>on<br/>\n<blockquote><span title=\"ireply\"> &gt;the team so as not to allow the model layer to muck with the<br/>\n </span></blockquote>persistence<br/>\n<blockquote><span title=\"ireply\"> &gt;layer).  It couldn&#39;t be any simpler...  There are two places to look<br/>\n </span></blockquote>for<br/>\n<blockquote><span title=\"ireply\"> &gt;changing SQL, and there are extensive functional tests on the objects<br/>\n&gt;that represent the database actions.<br/>\n&gt;<br/>\n&gt;Here&#39;s a snippet:<br/>\n&gt;***********************************************************************<br/>\n </span></blockquote>*<br/>\n<blockquote><span title=\"ireply\"> &gt;***<br/>\n&gt;DatabaseConnection.allRecords(Query query) {<br/>\n&gt;    DatabaseConnectionPool connectionPool =<br/>\n&gt;        DatabaseConnectionPool.getInstanceForDatabase(this);<br/>\n&gt;    <br/>\n&gt;    try {<br/>\n&gt;        Connection connection = connectionPool.getConnection();<br/>\n&gt;        Statement statement = connection.createStatement();<br/>\n&gt;        ResultSet resultSet =<br/>\n&gt;statement.executeQuery(query.queryString());<br/>\n&gt;<br/>\n&gt;        try {<br/>\n&gt;            return query.process(resultSet);<br/>\n&gt;        } catch (SQLException e) {<br/>\n&gt;    .<br/>\n&gt;    .<br/>\n&gt;    .<br/>\n&gt;}<br/>\n&gt;<br/>\n&gt;Query.allRecords(DatabaseConnection databaseConnection) {<br/>\n&gt;    RecordsList results = database.allRecords(this);<br/>\n&gt;    return results;<br/>\n&gt;}<br/>\n&gt;Query.exactlyOneRecord(DatabaseConnection databaseConnection) {<br/>\n&gt;    Record results = database.exactlyOneRecord(this);<br/>\n&gt;    return results;<br/>\n&gt;}<br/>\n&gt;***********************************************************************<br/>\n </span></blockquote>*<br/>\n<blockquote><span title=\"ireply\"> &gt;***<br/>\n&gt;<br/>\n&gt;The public API on Query is allRecords(DatabaseConnection),<br/>\n&gt;exactlyOneRecord(DatabaseConnection), process(ResultSet), and<br/>\n&gt;queryString().  As you can see we use a DoubleDispatch operation: we<br/>\n </span></blockquote>ask<br/>\n<blockquote><span title=\"ireply\"> &gt;the Query for a Record or RecordList, it turns and asks the<br/>\n&gt;DatabaseConnection for the appropriate thing, the DatabaseConnection<br/>\n&gt;turns back around and asks the Query to process the ResultSet it just<br/>\n&gt;got from a java.sql.Connection.  It&#39;s clean, you can now have objects<br/>\n&gt;representing your SQL, and it all is stuck in one package structure<br/>\n </span></blockquote>(or<br/>\n<blockquote><span title=\"ireply\"> &gt;at most a few) and not just strewn throughout the codebase.<br/>\n&gt;<br/>\n&gt;I hope that will help in the discussion.<br/>\n&gt;<br/>\n&gt;=jason<br/>\n&gt;[:question | ^One] <br/>\n&gt;-----Original Message-----<br/>\n&gt;From: J. B. Rainsberger [mailto:jbr@...] <br/>\n&gt;Sent: Friday, February 07, 2003 10:03 AM<br/>\n&gt;To: junit@yahoogroups.com; junit@yahoogroups.com<br/>\n&gt;Subject: Re: [junit] Programmer Tests and the Database<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;Amen, sir.<br/>\n&gt;<br/>\n&gt;So said  Bob Koss  on  2003-02-07 --------------------<br/>\n&gt;<br/>\n&gt;&gt;On 2/7/03 12:34 AM, &quot;Curt Sampson&quot; &lt;yahoo_sucks@...&gt; wrote:<br/>\n&gt;&gt;<br/>\n&gt;&gt;&gt; On Thu, 6 Feb 2003, J. B. Rainsberger wrote:<br/>\n&gt;&gt;&gt; <br/>\n&gt;&gt;&gt;&gt; Pushing every SQL statement you use out to a ResourceBundle (or<br/>\n&gt;other<br/>\n&gt;&gt;&gt;&gt; metadata file) is a good idea.<br/>\n&gt;&gt;&gt; <br/>\n&gt;&gt;&gt; Eww! I know this tends to be a bit of a personal preference, but I<br/>\n&gt;far<br/>\n&gt;&gt;&gt; prefer to keep my code together when I can. If a statement is used<br/>\n&gt;in<br/>\n&gt;&gt;&gt; only one place, keeping it where it&#39;s used makes the code much<br/>\n&gt;easier to<br/>\n&gt;&gt;&gt; read, because you don&#39;t have to go chasing off into some other file<br/>\n&gt;to<br/>\n&gt;&gt;&gt; find out what SQL statement is being executed.<br/>\n&gt;&gt;&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;That&#39;s probably true if the SQL never has to change. If the schema<br/>\n&gt;changes,<br/>\n&gt;&gt;I find it more convenient to go to one known place instead of having<br/>\n&gt;to<br/>\n&gt;&gt;search my entire app for possible changes.<br/>\n&gt;&gt;<br/>\n&gt;&gt;-- <br/>\n&gt;&gt;Robert Koss, Ph.D.     | Training, Mentoring, Contract Development<br/>\n&gt;&gt;Senior Consultant      | Object Oriented Design, C++, Java<br/>\n&gt;&gt;www.objectmentor.com   | Extreme Programming<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;------------------------ Yahoo! Groups Sponsor<br/>\n&gt;---------------------~--&gt;<br/>\n&gt;&gt;Get 128 Bit SSL Encryption!<br/>\n&gt;&gt;http://us.click.yahoo.com/LIgTpC/vN2EAA/xGHJAA/5cFolB/TM<br/>\n&gt;&gt;---------------------------------------------------------------------~<br/>\n </span></blockquote>-<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;To unsubscribe from this group, send an email to:<br/>\n&gt;&gt;junit-unsubscribe@yahoogroups.com<br/>\n&gt;&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;Your use of Yahoo! Groups is subject to<br/>\n&gt;http://docs.yahoo.com/info/terms/<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;J. B. Rainsberger,<br/>\n&gt;President, Diaspar Software Services<br/>\n&gt;Let&#39;s write software that people understand.<br/>\n&gt;http://www.diasparsoftware.com/<br/>\n&gt;telephone: +1 416 791-8603<br/>\n&gt;All correspondence (c) 2002 Diaspar Software Services.<br/>\n&gt;If you want to use it, just ask; don&#39;t steal.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;To unsubscribe from this group, send an email to:<br/>\n&gt;junit-unsubscribe@yahoogroups.com<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. <br/>\n&gt;<br/>\n&gt;---<br/>\n&gt;Outgoing mail is certified Virus Free.<br/>\n&gt;Checked by AVG anti-virus system (http://www.grisoft.com).<br/>\n&gt;Version: 6.0.438 / Virus Database: 246 - Release Date: 1/7/2003<br/>\n&gt; <br/>\n&gt;<br/>\n&gt;<br/>\n&gt;------------------------ Yahoo! Groups Sponsor<br/>\n </span></blockquote>---------------------~--&gt;<br/>\n<blockquote><span title=\"ireply\"> &gt;Get 128 Bit SSL Encryption!<br/>\n&gt;http://us.click.yahoo.com/LIgTpC/vN2EAA/xGHJAA/5cFolB/TM<br/>\n&gt;---------------------------------------------------------------------~-<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;To unsubscribe from this group, send an email to:<br/>\n&gt;junit-unsubscribe@yahoogroups.com<br/>\n&gt; <br/>\n&gt;<br/>\n&gt;Your use of Yahoo! Groups is subject to<br/>\n </span></blockquote>http://docs.yahoo.com/info/terms/<br/>\n<br/>\n<br/>\nJ. B. Rainsberger,<br/>\nPresident, Diaspar Software Services<br/>\nLet&#39;s write software that people understand.<br/>\nhttp://www.diasparsoftware.com/<br/>\ntelephone: +1 416 791-8603<br/>\nAll correspondence (c) 2002 Diaspar Software Services.<br/>\nIf you want to use it, just ask; don&#39;t steal.</div>", 
    "prevInTime": 6914, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1044736645", 
    "canDelete": false, 
    "nextInTopic": 6916, 
    "prevInTopic": 6914, 
    "headers": {
        "inReplyToHeader": "PDAwMDcwMWMyY2VlOSRmNTAzNmYyMCQ5MTljZDY4ZEBSSElOTz4=", 
        "messageIdInHeader": "PDIwMDMwMjA4MTUzNzI1MDkwMy4wNDhDQzFFRkBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "referencesHeader": "PDAwMDcwMWMyY2VlOSRmNTAzNmYyMCQ5MTljZDY4ZEBSSElOTz4="
    }
}