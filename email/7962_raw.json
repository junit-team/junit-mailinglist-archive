{
    "numMessagesInTopic": 31, 
    "nextInTime": 7963, 
    "senderId": "f6KzcQN6F07kYuc5sOk47Ge_CyHbrpKSIFooeOSnDJS2dicRlQ1F8Gt_isppgCeEIqzR-CbmcBDUFpVVWi2aiW_vVabTp0cFr3lkihYD1w", 
    "systemMessage": false, 
    "subject": "Re: [junit] question about Assert.assertEquals", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... Sure I can: I compare class objects. Two objects are equal iff their class objects are equal and their respective values are equal. In this case, the", 
    "msgId": 7962, 
    "rawEmail": "Return-Path: &lt;jbrains@...&gt;\r\nX-Sender: jbrains@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_6); 7 May 2003 13:39:05 -0000\r\nReceived: (qmail 20751 invoked from network); 7 May 2003 13:39:03 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m13.grp.scd.yahoo.com with QMQP; 7 May 2003 13:39:03 -0000\r\nReceived: from unknown (HELO fep03-mail.bloor.is.net.cable.rogers.com) (66.185.86.73)\n  by mta3.grp.scd.yahoo.com with SMTP; 7 May 2003 13:39:02 -0000\r\nReceived: from quincy ([199.243.252.154])\n          by fep03-mail.bloor.is.net.cable.rogers.com\n          (InterMail vM.5.01.05.12 201-253-122-126-112-20020820) with ESMTP\n          id &lt;20030507133901.CXBI7344.fep03-mail.bloor.is.net.cable.rogers.com@quincy&gt;\n          for &lt;junit@yahoogroups.com&gt;; Wed, 7 May 2003 09:39:01 -0400\r\nMessage-ID: &lt;200305070939010318.02D30592@...&gt;\r\nIn-Reply-To: &lt;20030507000850.23658.qmail@...&gt;\r\nReferences: &lt;20030507000850.23658.qmail@...&gt;\r\nX-Mailer: Calypso Version 3.30.00.00 (4)\r\nDate: Wed, 07 May 2003 09:39:01 -0400\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] question about Assert.assertEquals\r\nMime-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Authentication-Info: Submitted using SMTP AUTH LOGIN at fep03-mail.bloor.is.net.cable.rogers.com from [199.243.252.154] using ID &lt;jbrains@...&gt; at Wed, 7 May 2003 09:39:01 -0400\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;\r\nReply-To: jbr@...\r\nX-Yahoo-Group-Post: member; u=127224993\r\nX-Yahoo-Profile: nails762\r\n\r\n&gt;You can write a subclass that reports itself equal to the superclass. \n&gt;In=\r\n fact, you can&#39;t avoid it, and that&#39;s the problem.\n\nSure I can: I compare c=\r\nlass objects. Two objects are equal iff their class objects are equal and t=\r\nheir respective values are equal. In this case, the subclass cannot equal t=\r\nhe superclass.\n\n&gt;If you use the instanceof approach, then (as you point out=\r\n) you&#39;re\n&gt;breaking symmetry.\n\nYou&#39;re also breaking equals.\n\n&gt;However, if yo=\r\nu go with a different approach, say ignoring the added\n&gt;characteristic, you=\r\n break transitivity.  Bloch&#39;s example from Effective\n&gt;Java has a ColoredPoi=\r\nnt that has a new attribute color.  ColoredPoints\n&gt;need to be different if =\r\nthey&#39;re different colors.  But what happens\n&gt;when they&#39;re compared to regul=\r\nar Points?\n\nIf color distinguishes ColoredPoint objects, then a Point can n=\r\never be equal to a ColoredPoint. Comparing class objects removes that probl=\r\nem.\n\nIf a Point could have a default color for the purposes of comparison, =\r\nthen a Point would be a ColoredPoint. (I would declare Point as abstract at=\r\n that point.)\n\nIf a ColoredPoint&#39;s color didn&#39;t matter for equals, then Col=\r\noredPoint could inherit Point#equals and that&#39;s all.\n\n&gt;I guess if you chang=\r\ne the equals clause of Point to return false for\n&gt;ColoredPoints you can sol=\r\nve this, but then you&#39;re polluting your\n&gt;superclass equals method with know=\r\nledge of each subclass.\n\nNo you aren&#39;t. If you check class objects, then a =\r\nPoint is never equal to anything other than a Point without knowing specifi=\r\ncally what other class we are comparing it to.\n\n&gt;So, in summary, I&#39;m saying=\r\n that if you subclass an equals for anything\n&gt;but Object, you&#39;re going to b=\r\nreak it.  Be sure that you break it in a\n&gt;way that you expect.  Does that m=\r\nake sense?\n\nNo, because it isn&#39;t true.\n\nConsider the template code:\n\npublic=\r\n boolean equals(Object other) {\n    if (other !=3D null && getClass() =3D=\r\n=3D other.getClass()) {\n        MyClass that =3D (MyClass) other;\n        /=\r\n/ compare fields or whatever you like\n    }\n    else {\n        return false=\r\n;\n    }\n}\n\nI claim that this implementation of equals fully supports the co=\r\nntract of Object#equals, including the subclass/superclass case. If you thi=\r\nnk that is false, then please show us a test consistent with the contract o=\r\nf Object#equals that this implementation does not pass.\n\n&gt;Oh, Bloch recomme=\r\nnds that in this case you &quot;favor composition over\n&gt;inheritence&quot;, and have C=\r\noloredPoint not extend Point, but pass through\n&gt;all the common methods to P=\r\noint, and provide a view method called\n&gt;asPoint().  I haven&#39;t thought throu=\r\ngh the ramifications of that.\n\nIf it makes sense to view a ColoredPoint as =\r\na plain Point, then this is a good idea; otherwise, it is not.\n\n&gt;Lastly, fo=\r\nr the original poster, before J.B. reminds me of it:  be sure\n&gt;you override=\r\n hashCode as well, or funny things will happen in your\n&gt;maps.\n\nAbsolutely! =\r\nThe universal hashCode algorithm is &quot;return 0;&quot;. If you need the object to =\r\nbe a Map key, then write a better hashCode algorithm.\n\nTake care.\n\n\nJ. B. R=\r\nainsberger,\nPresident, Diaspar Software Services\nLet&#39;s write software that =\r\npeople understand.\nhttp://www.diasparsoftware.com/\ntelephone: +1 416 791-86=\r\n03\n\n\n", 
    "profile": "nails762", 
    "topicId": 7948, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "prevInTime": 7961, 
    "contentTrasformed": false, 
    "postDate": "1052314741", 
    "canDelete": false, 
    "nextInTopic": 7963, 
    "prevInTopic": 7961, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwNTA3MDAwODUwLjIzNjU4LnFtYWlsQHdlYjgwNTEwLm1haWwueWFob28uY29tPg==", 
        "messageIdInHeader": "PDIwMDMwNTA3MDkzOTAxMDMxOC4wMkQzMDU5MkBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "referencesHeader": "PDIwMDMwNTA3MDAwODUwLjIzNjU4LnFtYWlsQHdlYjgwNTEwLm1haWwueWFob28uY29tPg=="
    }
}