{
    "numMessagesInTopic": 3, 
    "nextInTime": 1076, 
    "senderId": "EwsrsqTE6wPUC2QLva3CxOYdTYi80sfbPfEqWxcRX7UyEQ3HnLFptdUQ1WbIFcyQGj_4rycdnL8", 
    "systemMessage": false, 
    "subject": "Re: On extending JUnit with AspectJ...", 
    "from": "kumar@...", 
    "authorName": "kumar@bigfoot.com", 
    "msgSnippet": "Dear All, Firstly i was happy to see david s detailed mail on this problem, i hv been facing a similar issue, and was wondering how to go about it, i hv", 
    "msgId": 1075, 
    "topicId": 1073, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-929798131\">Dear All,<br/>\n<br/>\nFirstly i was happy to see david&#39;s detailed mail on this problem, <br/>\n<br/>\ni hv been facing a similar issue, and was wondering how to go about <br/>\nit, i hv started using junitee ,or the servlet that comes along with <br/>\nthat... my server side unit tests are deployed as part of the server <br/>\nprocess. <br/>\n<br/>\nI would love to be able to test it from client classes? <br/>\nIs it possible to make my test programs run in the same server vm??<br/>\nbut not be part of the weblogic server process??? Most of the tests <br/>\nare server side ejb- test programs.<br/>\n<br/>\n<br/>\nProblem::<br/>\nI am on weblogic 5 everytime i change my unit tests i hv to restart <br/>\nweblogic, weblogic 6 is supposed to have a dynamic classloader, that <br/>\nreloads ordinary java classes,  but is there a simpler solution, than <br/>\nmigrating??.. and getting all the travails of weblogic 6.<br/>\n<br/>\nhow does one de-couple the unit tests from the server & make them <br/>\nseparate, and easily changeable..<br/>\n<br/>\nI was wondering if you have found a solution / work around for the <br/>\nsame?<br/>\n<br/>\nHope to hear from you folks,<br/>\n<br/>\nMany thanks Once again,<br/>\n<br/>\nregards<br/>\nKrishna Kumar<br/>\n(Singapore)<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In junit@y..., David Li &lt;david@d...&gt; wrote:<br/>\n&gt; Hi,<br/>\n&gt; <br/>\n&gt;   I think I just found a solution to my long time problem with <br/>\nJUnit. We<br/>\n&gt; do development mostly on server side components and most of these <br/>\nserver<br/>\n&gt; side classes need to run with the server context properly setup. <br/>\n&gt; <br/>\n&gt;   Setting up these server contxt often involve using specialized<br/>\n&gt; classloader to load the class. Using JUnit&#39;s native test runner <br/>\noften<br/>\n&gt; conflict with these classloader. ;( <br/>\n&gt; <br/>\n&gt;   We end up have to write our implementation of TestRunner for each <br/>\nof<br/>\n&gt; these environment and we often have to implement all three <br/>\nTestRunners.<br/>\n&gt; The work is tedious and this makes tracking new version of JUnit a <br/>\nlot<br/>\n&gt; harder. :(<br/>\n&gt; <br/>\n&gt;   There doesn&#39;t seem to be a good Object Oriented Java based <br/>\nsolution to<br/>\n&gt; this problem. The problem of having to adapt each TestRunner to <br/>\nspecific<br/>\n&gt; environment will requires extending all three TestRunner at the same<br/>\n&gt; time and have to call the class different names. <br/>\n&gt; <br/>\n&gt;   Aspect Oriented Programming (www.aspectj.org) seem to solve this<br/>\n&gt; problem elegantly. The following is a quick sample codes on adapting<br/>\n&gt; Log4J into JUnit which extending all three TestRunner in one file. <br/>\n&gt; <br/>\n&gt;   The problem: We use Log4J in our components and JUnit to unit <br/>\ntest of<br/>\n&gt; the components. The problem is that Log4J need to be initialized at<br/>\n&gt; least once from the main method. Doing it in a OO way will require <br/>\nus to<br/>\n&gt; extending all three TestRunner to something like <br/>\n&gt; <br/>\n&gt; public class TestRunnerWithLog4J extends junit.awtui.TestRunner<br/>\n&gt; {<br/>\n&gt;     public static void main(String[] args) {<br/>\n&gt;         Log4J_INIT_CODES_HERE;<br/>\n&gt;         super.main(args);<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt;   Second problem we are having is that we need to document the fact <br/>\nand<br/>\n&gt; make our developers aware what TestRunner to be use with what <br/>\nframework.<br/>\n&gt; We now have three versions of TestRunner:<br/>\n&gt; <br/>\n&gt; TestRunnerWithEnhydra, TestRunnerWithOzone and TestRunnerWithLog4. <br/>\n&gt; <br/>\n&gt; In this case, Ozone uses Log4J as well. The list grows very fast <br/>\nand the<br/>\n&gt; extensions codes become a big tangled codes and maintaince hell!<br/>\n&gt; <br/>\n&gt; AspectJ seems to provide a very elegant solution to this. The <br/>\nfollowing<br/>\n&gt; is my first try to use AspectJ to solve this problem:<br/>\n&gt; <br/>\n&gt; ---<br/>\n&gt; package junit.aspect;<br/>\n&gt; <br/>\n&gt; aspect Log4JRunner {<br/>\n&gt; <br/>\n&gt;     pointcut runnerMain():<br/>\n&gt;         executions(public static void<br/>\n&gt; junit.awtui.TestRunner.main(String[])) ||<br/>\n&gt;         executions(public static void<br/>\n&gt; junit.textui.TestRunner.main(String[])) ||<br/>\n&gt;         executions(public static void<br/>\n&gt; junit.swingui.TestRunner.main(String[]));<br/>\n&gt; <br/>\n&gt;     before(): runnerMain() {<br/>\n&gt;         org.apache.log4j.BasicConfigurator.configure();<br/>\n&gt;        <br/>\n&gt; org.apache.log4j.Category.getRoot().setPriority<br/>\n(org.apache.log4j.Priority.DEBUG);<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; ---<br/>\n&gt; <br/>\n&gt; This aspect simply extending the main method in each TestRunner to<br/>\n&gt; properly initialize the Log4J. This extension gives three main<br/>\n&gt; advantages:<br/>\n&gt; <br/>\n&gt; 1. No modification to the original JUnit codes<br/>\n&gt; 2. No messy subclass of TestRunner to maintaine.<br/>\n&gt; 3. No special documents for each TestRunner for each environment.<br/>\n&gt; <br/>\n&gt; I&#39;d like to get the opinion of the JUnit users and developers on <br/>\nusing<br/>\n&gt; AOP as the extension proramming for JUnit.<br/>\n&gt; <br/>\n&gt; Thanks.<br/>\n&gt; <br/>\n&gt; David Li<br/>\n&gt; DigitalSesame </span></blockquote></div>", 
    "prevInTime": 1074, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "988718348", 
    "canDelete": false, 
    "nextInTopic": 1076, 
    "prevInTopic": 1073, 
    "headers": {
        "inReplyToHeader": "PDNBRURCQkIzLjQ0MTlBNThDQGRpZ2l0YWxzZXNhbWUuY29tPg==", 
        "messageIdInHeader": "PDljbThlYyszdDUxQGVHcm91cHMuY29tPg=="
    }
}