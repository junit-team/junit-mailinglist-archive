{
    "numMessagesInTopic": 13, 
    "nextInTime": 16344, 
    "senderId": "VJEC6C2TjitI3q2qmnU1ZJ3-Tyi7wOis7f2BjMBtnum4Vbp7gJshbjp6NVWeMO3r-8wvqqIBLGmIlojdGxQCY7QCKFgxqfGC", 
    "systemMessage": true, 
    "subject": "Re: Testing Abstract Classes", 
    "from": "&quot;j0hlrogge&quot; &lt;j0hlrogge@...&gt;", 
    "authorName": "j0hlrogge", 
    "msgSnippet": "I discovered another way recently of testing abstract classes when developing some functionality in rMock http://rmock.sf.net. I generally agree with Davids(?)", 
    "msgId": 16343, 
    "rawEmail": "Return-Path: &lt;j0hlrogge@...&gt;\r\nReceived: (qmail 47961 invoked from network); 17 Mar 2006 13:42:14 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m21.grp.scd.yahoo.com with QMQP; 17 Mar 2006 13:42:14 -0000\r\nReceived: from unknown (HELO n10a.bullet.scd.yahoo.com) (66.94.237.44)\n  by mta6.grp.scd.yahoo.com with SMTP; 17 Mar 2006 13:42:14 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.4] by n10.bullet.scd.yahoo.com with NNFMP; 17 Mar 2006 13:40:17 -0000\r\nReceived: from [66.218.66.82] by t4.bullet.scd.yahoo.com with NNFMP; 17 Mar 2006 13:40:17 -0000\r\nX-Sender: j0hlrogge@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 16276 invoked from network); 16 Mar 2006 09:43:57 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m32.grp.scd.yahoo.com with QMQP; 16 Mar 2006 09:43:57 -0000\r\nReceived: from unknown (HELO n31a.bullet.scd.yahoo.com) (209.73.160.90)\n  by mta5.grp.scd.yahoo.com with SMTP; 16 Mar 2006 09:43:57 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.1] by n31.bullet.scd.yahoo.com with NNFMP; 16 Mar 2006 09:43:54 -0000\r\nReceived: from [66.218.66.80] by t1.bullet.scd.yahoo.com with NNFMP; 16 Mar 2006 09:43:54 -0000\r\nDate: Thu, 16 Mar 2006 09:43:54 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;dvbc0q+m8uq@...&gt;\r\nIn-Reply-To: &lt;44122639.3080401@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;j0hlrogge&quot; &lt;j0hlrogge@...&gt;\r\nSubject: Re: Testing Abstract Classes\r\nX-Yahoo-Group-Post: member; u=256158327; y=AOhmGnaxjJ4yZXYpFzkGpU5-8Ps1xisUns7_mL1YtjrOo0nA\r\nX-Yahoo-Profile: j0hlrogge\r\nX-eGroups-Approved-By: geektank &lt;yahoo-m@...&gt; via web; 17 Mar 2006 13:40:15 -0000\r\n\r\nI discovered another way recently of testing abstract classes when\ndevelopi=\r\nng some functionality in rMock http://rmock.sf.net.\n\nI generally agree with=\r\n Davids(?) approach, to separate abstract\nclasses into concrete and interaf=\r\nces and use interaction based\ntesting. Sometimes you are at the mercy of an=\r\nother framework and you\nmay still need to do it with the abstract base clas=\r\ns aproach. For\nthose cases I found the following to be useful:\n\nrMock suppo=\r\nrts an intercept method that allows you selectively check\ninteractions on c=\r\noncrete classes. The reason we inmplemented it:\n\npublic void testCloesesStr=\r\ningReader() {\n   Reader reader =3D (Reader)intercept(StringReader.class, ne=\r\nw   \nObject[]{&quot;string to be read&quot;}, &quot;reader&quot;);\n\n   reader.close(); // expec=\r\nt close to be called once\n   modify().forward(); // forward the call to the=\r\n intercepted class\n\n   startVerification(); // change state to verify\n\n   r=\r\neaderUser.useReader(reader);\n}\n\nThe above test would fail if readerUser did=\r\n not call close() on the\nreader, other than that the reader works as any St=\r\nringReader.\n\nintercept actually subclasses the class it intercepts so it ca=\r\nn be\nused as a replacement for an anonymous class (since it is subclassing\n=\r\nthe abstract class the class can be instantiated by intercept). In\neach tes=\r\ntMethod you then can modify the classes behaviour, something\nthat would req=\r\nuire several different subclasses or logic in the\nsubclass to accomodate fo=\r\nr all the tests you need to to.\n\nIn our case we wanted to create a subclass=\r\n of TestCase that would be\nable to run a strategy in runBare. This testcase=\r\n is for the JUnit 3.x\nplatform, below we test that it behaves as it should =\r\nif the subclass\nreturns a valid strategy and that it gives a nice exception=\r\n if the\nsubclass (incorectly) returns null as a strategy:\n\n\npublic class Te=\r\nstAbstractStrategyTestCase extends RMockTestCase {\n\tprivate AbstractStrateg=\r\nyTestCase abstractStrategyTestCase;\n\n\tprotected void setUp() throws Excepti=\r\non {\n\t\tsuper.setUp();\n//\n// Intercept subclasses the intercepted class, so =\r\nabstract classes can\nbe tested using\n// intercept without subclassing them.=\r\n\n//\n\t\tabstractStrategyTestCase =3D (AbstractStrategyTestCase)\nintercept(Abs=\r\ntractStrategyTestCase.class, new Object[]{&quot;test&quot;},\n&quot;abstractStrategyTestCas=\r\ne&quot;);\n\t\t\n\t}\n\t\n\tpublic void testTestRunsStrategy() throws Throwable {\n\t      =\r\n  // since we passed &quot;test&quot; to the constructor we expect &quot;test&quot;\nto be passe=\r\nd to the createStrategyMethod\n   \t        TestStep strategy =3D\nabstractStr=\r\nategyTestCase.createStrategy(&quot;test&quot;);\n                // a mock is automati=\r\ncally created for us and we\nexpect rMock to run it.\n\t\tstrategy.run();\n\t\t\n\t\t=\r\nstartVerification(); // stop setting up, start verifying\n\t\t\n               =\r\n // now run the test\n\t\tabstractStrategyTestCase.runBare();\n\t}\n\t\n\tpublic voi=\r\nd testTestNoStrategy() throws Throwable {\n\t\t\n                // using the s=\r\name class as above but chaning its\nbehaviour without\n                // add=\r\ning complex parameters that are used only for\ntesting.\n                // I=\r\nn this case we tell the implementStrategyMethod to\nreturn null.\n           =\r\n     abstractStrategyTestCase.createStrategy(&quot;test&quot;);\n\t\tmodify().returnValu=\r\ne(null);\n\t\t\n\t\tstartVerification();\n\t\t\n                // This is a quite ne=\r\nw feature in rMock, here we\nexpect an exception to be thrown as a result of=\r\n running some code\nafter this row.\n\t\texpectThatExceptionThrown(is.instanceO=\r\nf(RMockInternalError.class));\n\t\tabstractStrategyTestCase.runBare();\n\t}\n}\n\n\n=\r\n\n\n\n\n", 
    "profile": "j0hlrogge", 
    "topicId": 16293, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 256158327, 
    "prevInTime": 16342, 
    "contentTrasformed": false, 
    "postDate": "1142502234", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 16327, 
    "headers": {
        "inReplyToHeader": "PDQ0MTIyNjM5LjMwODA0MDFAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PGR2YmMwcSttOHVxQGVHcm91cHMuY29tPg=="
    }
}