{
    "numMessagesInTopic": 5, 
    "nextInTime": 13899, 
    "senderId": "TesQ5bWb7wgJH54Y2gvFOPgHQ3PlV8HO2rg6iuWDKooJsjMJBkDxIJl8-fl551sVJ7CE4jlfvZJlr5XmLsFpgskoYoI", 
    "systemMessage": true, 
    "subject": "Re: [junit] Testing ugly broken code", 
    "from": "Ray V &lt;ttftestrayv@...&gt;", 
    "authorName": "Ray V", 
    "msgSnippet": "... Thanks for the tips.  You hit on my exact problem: wanting to make changes to understand what the code is doing, but then having a chicken and egg problem", 
    "msgId": 13898, 
    "rawEmail": "Return-Path: &lt;ttftestrayv@...&gt;\r\nReceived: (qmail 99122 invoked from network); 13 Jun 2005 12:35:37 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m29.grp.scd.yahoo.com with QMQP; 13 Jun 2005 12:35:37 -0000\r\nReceived: from unknown (HELO n27.bulk.scd.yahoo.com) (66.94.237.56)\n  by mta6.grp.scd.yahoo.com with SMTP; 13 Jun 2005 12:35:37 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.66.58] by n27.bulk.scd.yahoo.com with NNFMP; 13 Jun 2005 12:34:32 -0000\r\nReceived: from [66.218.66.84] by mailer7.bulk.scd.yahoo.com with NNFMP; 13 Jun 2005 12:34:31 -0000\r\nX-Sender: ttftestrayv@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 26855 invoked from network); 12 Jun 2005 04:51:19 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m29.grp.scd.yahoo.com with QMQP; 12 Jun 2005 04:51:19 -0000\r\nReceived: from unknown (HELO web60717.mail.yahoo.com) (209.73.178.205)\n  by mta6.grp.scd.yahoo.com with SMTP; 12 Jun 2005 04:51:19 -0000\r\nReceived: (qmail 29751 invoked by uid 60001); 12 Jun 2005 04:51:18 -0000\r\nMessage-ID: &lt;20050612045118.29749.qmail@...&gt;\r\nReceived: from [64.81.245.43] by web60717.mail.yahoo.com via HTTP; Sat, 11 Jun 2005 21:51:18 PDT\r\nDate: Sat, 11 Jun 2005 21:51:18 -0700 (PDT)\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;42AA9A69.1040802@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=iso-8859-1\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Ray V &lt;ttftestrayv@...&gt;\r\nSubject: Re: [junit] Testing ugly broken code\r\nX-Yahoo-Group-Post: member; u=67398113; y=NdBLMdQOfvJX55xAfkGs9FrWbpzwKiyJ9zgRci15ZmXxUi3FWR4\r\nX-Yahoo-Profile: ttftestrayv\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: vbossica &lt;vladimir@...&gt; via web; 13 Jun 2005 12:34:30 -0000\r\n\r\n&gt; Ray V wrote:\n&gt; &gt; I&#39;m going through the process right now of adding\n&gt; test\n&gt; &gt; cases, but as I write them I&#39;m constantly fighting\n&gt; the\n&gt; &gt; urge to fix stuff.  My question: is it better to\n&gt; write\n&gt; &gt; all the tests first, then go back to fixing what&#39;s\n&gt; &gt; broken, or to fix the bugs and &quot;smelly&quot; code as\n&gt; you go?\n&gt; \n&gt; Michael Feather&#39;s &quot;Working Effectively with Legacy\n&gt; Code&quot; is what you want... :)\n&gt; \n&gt; However, here&#39;s one recommendation: make the\n&gt; changes, so you can learn what \n&gt; the code does better. Then, _rollback_ your changes,\n&gt; so that you have the \n&gt; smelly code again. Write tests with your new\n&gt; understanding, and use these \n&gt; tests to both protect and guide you in your\n&gt; improvements. (Michael calls \n&gt; this technique &quot;Scratch Refactoring&quot;)\n\nThanks for the tips.  You hit on my exact problem:\nwanting to make changes to understand what the code is\ndoing, but then having a chicken and egg problem with\nbugs that show up later.\n\nSo far I&#39;ve been largely guessing at what the code\ndoes  by doing a line-by-line audit and then poking at\nit through my unit tests.  The most drastic change\nI&#39;ve made so far has been to provide a toString() for\nthe value objects; other than that I&#39;ve pretty much\nleft the code alone and fought the urge to modify.\n\nScratch refactoring could fit the bill in some of the\nmore knotted up areas though.  Funny, I hadn&#39;t\nconsidered making changes and then rolling them\nback...  makes good sense, thanks for the suggestion.\n\n\n__________________________________________________\nDo You Yahoo!?\nTired of spam?  Yahoo! Mail has the best spam protection around \nhttp://mail.yahoo.com \n\n\n\n", 
    "profile": "ttftestrayv", 
    "topicId": 13893, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 67398113, 
    "prevInTime": 13897, 
    "contentTrasformed": false, 
    "postDate": "1118551878", 
    "canDelete": false, 
    "nextInTopic": 13903, 
    "prevInTopic": 13895, 
    "headers": {
        "inReplyToHeader": "PDQyQUE5QTY5LjEwNDA4MDJAdHdhc2luay5uZXQ+", 
        "messageIdInHeader": "PDIwMDUwNjEyMDQ1MTE4LjI5NzQ5LnFtYWlsQHdlYjYwNzE3Lm1haWwueWFob28uY29tPg=="
    }
}