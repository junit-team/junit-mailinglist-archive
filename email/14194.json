{
    "numMessagesInTopic": 1, 
    "nextInTime": 14195, 
    "senderId": "_XhUTiONxC-wDhPqYiUumiORGN0eC0xWA23YJrhOnemLQgZlY-iQVM_tkUPEcHm8taV8uHGstCLNRBVjcQfdFQocW77b", 
    "systemMessage": true, 
    "subject": "already tried to authenticate..., but still receiving: HTTP/1.1 401 Unauthorized", 
    "from": "&quot;Ho-Ki Au&quot; &lt;hoki.au@...&gt;", 
    "authorName": "Ho-Ki Au", 
    "msgSnippet": "I was trying to write some cactus tests to test an ejb which required authentication.  The application server used was jboss-4.0.2, with the tomcat 5 web", 
    "msgId": 14194, 
    "profile": "sfqb8", 
    "topicId": 14194, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 183475683, 
    "messageBody": "<div id=\"ygrps-yiv-318051470\">I was trying to write some cactus tests to test an ejb which required<br/>\nauthentication.  The application server used was jboss-4.0.2, with the<br/>\ntomcat 5 web container.  I followed the instructions documented on the<br/>\nofficial cactus web site and created a protected<br/>\nServletRedirectorSecure servlet to do it.  When I ran the tests, I got<br/>\nan error message like:<br/>\n   [cactus]<br/>\n-----------------------------------------------------------------<br/>\n   [cactus] Running tests against JBoss 4.0.2<br/>\n   [cactus]<br/>\n-----------------------------------------------------------------<br/>\n   [cactus] (httpclient.HttpMethodBase           2543) Already tried<br/>\nto authenticate with &#39;localhost:8080&#39; authentication realm at<br/>\nlocalhost, but still receiving: HTTP/1.1 401 Unauthorized<br/>\n   [cactus] (httpclient.HttpMethodBase           2543) Already tried<br/>\nto authenticate with &#39;localhost:8080&#39; authentication realm at<br/>\nlocalhost, but still receiving: HTTP/1.1 401 Unauthorized<br/>\n   [cactus] Testsuite: com.saybot.directory.DirectoryTest<br/>\n   [cactus] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0.251 sec<br/>\n   [cactus]<br/>\n   [cactus] Testcase: testBasicAuthentication took 0.2 sec<br/>\n   [cactus]    Caused an ERROR<br/>\n   [cactus] Failed to get the test results at<br/>\n[<a rel=\"nofollow\" target=\"_blank\" href=\"http://localhost:8080/directory/ServletRedirectorSecure%5d\">http://localhost:8080/directory/ServletRedirectorSecure%5d</a><br/>\n   [cactus] org.apache.cactus.util.ChainedRuntimeException: Failed to<br/>\nget the test results at<br/>\n[<a rel=\"nofollow\" target=\"_blank\" href=\"http://localhost:8080/directory/ServletRedirectorSecure%5d\">http://localhost:8080/directory/ServletRedirectorSecure%5d</a><br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody0(DefaultHttpClient.java:92)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody1$advice(DefaultHttpClient.java:306)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest(DefaultHttpClient.java)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runWebTest(HttpProtocolHandler.java:159)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody0(HttpProtocolHandler.java:80)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody1$advice(HttpProtocolHandler.java:306)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest(HttpProtocolHandler.java)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.ClientTestCaseCaller.runTest(ClientTestCaseCaller.java:144)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.AbstractCactusTestCase.runBareClient(AbstractCactusTestCase.java:215)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.AbstractCactusTestCase.runBare(AbstractCactusTestCase.java:133)<br/>\n   [cactus] org.apache.cactus.internal.client.ParsingException: Not a<br/>\nvalid response [401 Unauthorized]<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.callGetResult(DefaultHttpClient.java:211)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody0(DefaultHttpClient.java:87)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest_aroundBody1$advice(DefaultHttpClient.java:306)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.DefaultHttpClient.doTest(DefaultHttpClient.java)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runWebTest(HttpProtocolHandler.java:159)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody0(HttpProtocolHandler.java:80)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest_aroundBody1$advice(HttpProtocolHandler.java:306)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.connector.http.HttpProtocolHandler.runTest(HttpProtocolHandler.java)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.client.ClientTestCaseCaller.runTest(ClientTestCaseCaller.java:144)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.AbstractCactusTestCase.runBareClient(AbstractCactusTestCase.java:215)<br/>\n   [cactus]    at<br/>\norg.apache.cactus.internal.AbstractCactusTestCase.runBare(AbstractCactusTestCase.java:133)<br/>\n   [cactus]<br/>\n   [cactus] Testcase: testBasicAuthentication<br/>\n<br/>\nThat was when I used maven to run the test.  I got the same error when<br/>\nI ran java<br/>\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner from shell.<br/>\n<br/>\nMy web.xml was like:<br/>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br/>\n&lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web<br/>\nApplication 2.3//EN&quot;<br/>\n                        &quot;<a rel=\"nofollow\" target=\"_blank\" href=\"http://java.sun.com/dtd/web-app_2_3.dtd&quot;\">http://java.sun.com/dtd/web-app_2_3.dtd&quot;</a>&gt;<br/>\n&lt;web-app&gt;<br/>\n   &lt;filter&gt;<br/>\n       &lt;filter-name&gt;FilterRedirector&lt;/filter-name&gt;<br/>\n      <br/>\n&lt;filter-class&gt;org.apache.cactus.server.FilterTestRedirector&lt;/filter-class&gt;<br/>\n   &lt;/filter&gt;<br/>\n   &lt;filter-mapping&gt;<br/>\n       &lt;filter-name&gt;FilterRedirector&lt;/filter-name&gt;<br/>\n       &lt;url-pattern&gt;/test/filterRedirector.jsp&lt;/url-pattern&gt;<br/>\n   &lt;/filter-mapping&gt;<br/>\n   &lt;servlet&gt;<br/>\n       &lt;servlet-name&gt;ServletRedirector&lt;/servlet-name&gt;<br/>\n      <br/>\n&lt;servlet-class&gt;org.apache.cactus.server.ServletTestRedirector&lt;/servlet-class&gt;<br/>\n   &lt;/servlet&gt;<br/>\n   &lt;servlet&gt;<br/>\n       &lt;servlet-name&gt;SerletRedirectorSecure&lt;/servlet-name&gt;<br/>\n      <br/>\n&lt;servlet-class&gt;org.apache.cactus.server.ServletTestRedirector&lt;/servlet-class&gt;<br/>\n   &lt;/servlet&gt;<br/>\n   &lt;servlet&gt;<br/>\n       &lt;servlet-name&gt;JspRedirector&lt;/servlet-name&gt;<br/>\n       &lt;jsp-file&gt;/jspRedirector.jsp&lt;/jsp-file&gt;<br/>\n   &lt;/servlet&gt;<br/>\n   &lt;servlet-mapping&gt;<br/>\n       &lt;servlet-name&gt;ServletRedirector&lt;/servlet-name&gt;<br/>\n       &lt;url-pattern&gt;/ServletRedirector&lt;/url-pattern&gt;<br/>\n   &lt;/servlet-mapping&gt;<br/>\n   &lt;servlet-mapping&gt;<br/>\n       &lt;servlet-name&gt;SerletRedirectorSecure&lt;/servlet-name&gt;<br/>\n       &lt;url-pattern&gt;/ServletRedirectorSecure&lt;/url-pattern&gt;<br/>\n   &lt;/servlet-mapping&gt;<br/>\n   &lt;servlet-mapping&gt;<br/>\n       &lt;servlet-name&gt;JspRedirector&lt;/servlet-name&gt;<br/>\n       &lt;url-pattern&gt;/JspRedirector&lt;/url-pattern&gt;<br/>\n   &lt;/servlet-mapping&gt;<br/>\n   &lt;security-constraint&gt;<br/>\n       &lt;web-resource-collection&gt;<br/>\n           &lt;web-resource-name&gt;Cactus Test Redirector&lt;/web-resource-name&gt;<br/>\n           &lt;url-pattern&gt;/ServletRedirectorSecure&lt;/url-pattern&gt;<br/>\n       &lt;/web-resource-collection&gt;<br/>\n       &lt;auth-constraint&gt;<br/>\n           &lt;role-name&gt;User&lt;/role-name&gt;<br/>\n       &lt;/auth-constraint&gt;<br/>\n   &lt;/security-constraint&gt;<br/>\n   &lt;login-config&gt;<br/>\n       &lt;auth-method&gt;BASIC&lt;/auth-method&gt;<br/>\n   &lt;/login-config&gt;<br/>\n   &lt;security-role&gt;<br/>\n       &lt;role-name&gt;User&lt;/role-name&gt;<br/>\n   &lt;/security-role&gt;<br/>\n&lt;/web-app&gt;<br/>\n<br/>\nmy test was just to test if I could get the principal in the test.  It<br/>\ndidn&#39;t even call any ejb:<br/>\n   public void beginBasicAuthentication(WebRequest request) {<br/>\n       request.setRedirectorName(&quot;ServletRedirectorSecure&quot;);<br/>\n       request.setAuthentication(new BasicAuthentication(&quot;tester1&quot;,<br/>\n       &quot;tester1&quot;));<br/>\n   }<br/>\n<br/>\n   public void testBasicAuthentication() {<br/>\n       assertEquals(&quot;tester1&quot;, request.getUserPrincipal().getName());<br/>\n       assertEquals(&quot;tester1&quot;, request.getRemoteUser());<br/>\n       assertTrue(request.isUserInRole(&quot;User&quot;));<br/>\n   }<br/>\n<br/>\nThe server-side test log didn&#39;t show any error.  Can someone help me<br/>\nwith this please?<br/>\n<br/>\nWhen I used a browser to go to url<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://localhost:8080/directory/ServletRedirectorSecure?Cactus_Service=RUN_TEST\">http://localhost:8080/directory/ServletRedirectorSecure?Cactus_Service=RUN_TEST</a><br/>\nit popped up a dialog to ask me for username and password.  I entered<br/>\n&quot;tester1&quot;, &quot;tester1&quot;, and it went to a blank page.  So that was<br/>\ncorrect.  It didn&#39;t show me 401 error.<br/>\n<br/>\nYour help is much appreciated.<br/>\n<br/>\n--<br/>\n-hoki</div>", 
    "prevInTime": 14193, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1121854949", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGRibDhsNStuMHQxQGVHcm91cHMuY29tPg=="
    }
}