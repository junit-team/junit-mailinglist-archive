{
    "numMessagesInTopic": 14, 
    "nextInTime": 22888, 
    "senderId": "gEao_Iht6frNbD_PoFlBBw0bZAGyjjIL5twLtmw0mgWthTIN5x0xt_9tlXhiZ8DLmMqaBFl5rCLONK-C31fXQJ7x", 
    "systemMessage": false, 
    "subject": "Re: [junit] More example JUnit code", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "... @BeforeClass only works on static values, and should be matched with an @AfterClass.  It is very rare to see @BeforeClass used for set-up of lightweight", 
    "msgId": 22887, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 81146 invoked from network); 23 Aug 2010 13:52:06 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m6.grp.sp2.yahoo.com with QMQP; 23 Aug 2010 13:52:06 -0000\r\nX-Received: from unknown (HELO mail-gy0-f174.google.com) (209.85.160.174)\n  by mta2.grp.sp2.yahoo.com with SMTP; 23 Aug 2010 13:52:06 -0000\r\nX-Received: by gyd8 with SMTP id 8so2234296gyd.5\n        for &lt;junit@yahoogroups.com&gt;; Mon, 23 Aug 2010 06:52:06 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.90.25.14 with SMTP id 14mr3401185agy.42.1282571516418; Mon, 23\n Aug 2010 06:51:56 -0700 (PDT)\r\nX-Received: by 10.91.53.20 with HTTP; Mon, 23 Aug 2010 06:51:56 -0700 (PDT)\r\nIn-Reply-To: &lt;AANLkTi=wwf8Tfi-y1Uaqaw4jJhERKo_JKdLBcZfOwAEs@...&gt;\r\nReferences: &lt;AANLkTikv4gPxGg-hCw+svedTeYebT+k9wRNXZEFdwFTE@...&gt;\n\t&lt;AANLkTimHBRFMs6agA+jHUNSXCpR5rxN5TfvvruQz2wTb@...&gt;\n\t&lt;AANLkTimv6ah8drxKtaxDkFrZFJEta-eKHSqgFkmPfoXS@...&gt;\n\t&lt;AANLkTi=wwf8Tfi-y1Uaqaw4jJhERKo_JKdLBcZfOwAEs@...&gt;\r\nDate: Mon, 23 Aug 2010 09:51:56 -0400\r\nX-Google-Sender-Auth: PCq27AHIx-Oye1IiRSxPScQLb30\r\nMessage-ID: &lt;AANLkTin6Vup4_g5-gHekRazM0xvhR2Eb5TXMYHM0y3EZ@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nFrom: David Saff &lt;david@...&gt;\r\nSubject: Re: [junit] More example JUnit code\r\nX-Yahoo-Group-Post: member; u=341876227; y=YgFSNViLw6vX0GcOKbteboFgNpfBIZYvNNV93nZJ5Sg\r\nX-Yahoo-Profile: dsaff\r\n\r\n2010/8/22 C=C3=A9dric Beust =E2=99=94 &lt;cedric@...&gt;:\n&gt; Simon,\n&gt;\n&gt; Actu=\r\nally, I was wrong: using @BeforeClass will break your tests. Since JUnit\n&gt; =\r\nreinstantiates a brand new class before each test method, only the first\n&gt; =\r\nmethod will get the correct values for these fields. Subsequent methods wil=\r\nl\n&gt; see null.\n\n@BeforeClass only works on static values, and should be matc=\r\nhed with\nan @AfterClass.  It is very rare to see @BeforeClass used for set-=\r\nup\nof lightweight data values.\n\n&gt; Anyway, these values are constants, so th=\r\ney should be static final. Which\n&gt; solves the problem and also gets rid of =\r\n@Before and @After.\n&gt;\n&gt; About the fields: what bothers me with this approac=\r\nh is that you&#39;re exposing\n&gt; a lot of fields to all your test methods and th=\r\ney only use a very small\n&gt; subset of these. In effect, fields are like glob=\r\nal variables and they make\n&gt; it harder for someone coming to improve your c=\r\nlass to understand exactly\n&gt; what fields are okay to modify and which tests=\r\n need to be updated as well. I\n&gt; like to keep the data needed by each test =\r\nmethod as local as possible to\n&gt; avoid this kind of problem.\n&gt;\n&gt; Parameteri=\r\nzed tests help a lot with this kind of locality, and they turn out\n&gt; to be =\r\na great match for this particular problem.\n&gt;\n&gt; With all this in mind, here =\r\nis my version (TestNG syntax, porting to JUnit\n&gt; is left as an exercise to =\r\nthe reader):\n&gt;\n&gt; public class FractionTest {\n&gt;\n&gt; =C2=A0// A few useful cons=\r\ntants\n&gt; =C2=A0private static final Fraction F_1_1 =3D new Fraction(1, 1);\n&gt;=\r\n =C2=A0private static final Fraction F_1_2 =3D new Fraction(1, 2);\n&gt; =C2=A0=\r\nprivate static final Fraction F_1_3 =3D new Fraction(1, 3);\n&gt; =C2=A0private=\r\n static final Fraction F_2_1 =3D new Fraction(2, 1);\n&gt;\n&gt; =C2=A0/**\n&gt; =C2=A0=\r\n * The data set used to verify reduction, the last parameter of each\n&gt; =C2=\r\n=A0 * row is the expected value.\n&gt; =C2=A0 */\n&gt; =C2=A0@DataProvider\n&gt; =C2=A0=\r\npublic Object[][] reduceData() {\n&gt; =C2=A0 =C2=A0return new Object[][] {\n&gt; =\r\n=C2=A0 =C2=A0 =C2=A0new Object[] { F_1_1, F_1_1 },\n&gt; =C2=A0 =C2=A0 =C2=A0ne=\r\nw Object[] { new Fraction(2, 2), F_1_1 },\n&gt; =C2=A0 =C2=A0 =C2=A0new Object[=\r\n] { new Fraction(4, 2), F_2_1 },\n&gt; =C2=A0 =C2=A0 =C2=A0// ...\n&gt; =C2=A0 =C2=\r\n=A0};\n&gt; =C2=A0}\n&gt;\n&gt; =C2=A0@Test(dataProvider =3D &quot;reduceData&quot;)\n&gt; =C2=A0publ=\r\nic void verifyReduce(Fraction input, Fraction expected) {\n&gt; =C2=A0 =C2=A0As=\r\nsert.assertEquals(input.reduce(), expected);\n&gt; =C2=A0}\n&gt;\n&gt; =C2=A0/**\n&gt; =C2=\r\n=A0 * The data set used to verify multiplication, the last parameter of eac=\r\nh\n&gt; =C2=A0 * row is the expected value after rediction\n&gt; =C2=A0 */\n&gt; =C2=A0=\r\n@DataProvider\n&gt; =C2=A0public Object[][] multiplicationData() {\n&gt; =C2=A0 =C2=\r\n=A0return new Object[][] {\n&gt; =C2=A0 =C2=A0 =C2=A0new Object[] { F_1_1, F_1_=\r\n1, F_1_1 },\n&gt; =C2=A0 =C2=A0 =C2=A0new Object[] { new Fraction(2, 2), new Fr=\r\naction(3, 2), new Fraction(3,\n&gt; 2) },\n&gt; =C2=A0 =C2=A0 =C2=A0// ...\n&gt; =C2=A0=\r\n =C2=A0};\n&gt; =C2=A0}\n&gt;\n&gt; =C2=A0@Test(dataProvider =3D &quot;multiplicationData&quot;)\n=\r\n&gt; =C2=A0public void verifyReduce(Fraction f1, Fraction f2, Fraction expecte=\r\nd) {\n&gt; =C2=A0 =C2=A0// Assuming that multiply() will call reduce() before r=\r\neturning its\n&gt; result\n&gt; =C2=A0 =C2=A0Assert.Equals(f1.multiply(f2), expecte=\r\nd);\n&gt; =C2=A0 =C2=A0Assert.Equals(f2.multiply(f1), expected);\n&gt; =C2=A0}\n&gt; }\n=\r\n\nI&#39;d replace your 49 lines of code with these 17, without loss of\nextensibi=\r\nlity or coverage:\n\npublic class FractionTest {\n private Fraction f(int num,=\r\n int denom) {\n   return new Fraction(num, denom);\n }\n\n @Test public void re=\r\nduce() {\n   assertEquals(f(1, 1), f(1, 1).reduce());\n   assertEquals(f(1, 1=\r\n), f(2, 2).reduce());\n   assertEquals(f(2, 1), f(4, 2).reduce());\n }\n\n @Tes=\r\nt public void multiply() {\n   // Assuming that multiply() will call reduce(=\r\n) before returning its result\n   assertEquals(f(1, 1), f(1, 1).multiply(f(1=\r\n, 1)));\n   assertEquals(f(3, 2), f(2, 2).multiply(f(3, 2)));\n }\n}\n\n   David=\r\n Saff\n\n&gt;\n&gt; You can probably see how parameterized tests improve the localit=\r\ny of your\n&gt; tests and how adding values to extend the coverage is trivial.\n=\r\n&gt;\n&gt; Also note that this is a great example of how misleading code coverage =\r\ncan\n&gt; be: you would get 100% test coverage if you only returned 1 data set =\r\nin each\n&gt; data provider, but your tests would be very poor. Adding values t=\r\no your data\n&gt; provider will do nothing for your code coverage but it will c=\r\nonsiderably\n&gt; improve the quality of your tests.\n&gt;\n&gt; --\n&gt; C=C3=A9dric\n&gt;\n&gt;\n&gt;=\r\n On Sun, Aug 22, 2010 at 6:11 PM, Simon Chappell &lt;\n&gt; simonpeterchappell@gma=\r\nil.com&gt; wrote:\n&gt;\n&gt;&gt; Cedric,\n&gt;&gt;\n&gt;&gt; Good points.\n&gt;&gt;\n&gt;&gt; 1. I&#39;m not used to the=\r\n @BeforeClass. I will make that change, as it is a\n&gt;&gt; better fit.\n&gt;&gt; 2. The=\r\n assigning of nulls is just to emphasize cleaning up after yourself.\n&gt;&gt; I\n&gt;=\r\n&gt; agree that it&#39;s technically unnecessary.\n&gt;&gt; 3. Let me think about the par=\r\nameterized thing. I think for eight values,\n&gt;&gt; with their descriptive names=\r\n, it brings more value leaving them as they\n&gt;&gt; are,\n&gt;&gt; although I may chang=\r\ne where they are defined.\n&gt;&gt;\n&gt;&gt; Thank you for you considered points. Hopefu=\r\nlly this will help us all\n&gt;&gt; sharpen\n&gt;&gt; our JUnit writing.\n&gt;&gt;\n&gt;&gt; Simon\n&gt;&gt;\n&gt;=\r\n&gt;\n&gt;&gt; 2010/8/22 C=C3=A9dric Beust =E2=99=94 &lt;cedric@...&gt;\n&gt;&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n=\r\n&gt;&gt; &gt; Hi Simon,\n&gt;&gt; &gt;\n&gt;&gt; &gt; A few quick questions/remarks:\n&gt;&gt; &gt;\n&gt;&gt; &gt; - Why do =\r\nyou initialize the fractions in @Before and not @BeforeClass,\n&gt;&gt; &gt; since yo=\r\nu don&#39;t seem to ever modify them?\n&gt;&gt; &gt; - Why assigning them to null in @Aft=\r\ner?\n&gt;&gt; &gt; - Given the nature of your tests, I would probably use parameteriz=\r\ned\n&gt;&gt; &gt; tests to supply only the data that each test needs instead of makin=\r\ng\n&gt;&gt; these\n&gt;&gt; &gt; eight fields available to all the test methods all the time=\r\n.\n&gt;&gt; &gt;\n&gt;&gt; &gt; --\n&gt;&gt; &gt; C=C3=A9dric\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; On Sun, Aug 22, 2010 at 3:47=\r\n PM, Simon Chappell &lt;\n&gt;&gt; &gt; simonpeterchappell@... &lt;simonpeterchappell=\r\n%40gmail.com&gt;&gt; wrote:\n&gt;&gt; &gt;\n&gt;&gt; &gt; &gt; Following up on my previous offering of e=\r\nxample JUnit code, I have\n&gt;&gt; pushed\n&gt;&gt; &gt; a\n&gt;&gt; &gt; &gt; project called Fraction t=\r\no GitHub. This implements classic mathematical\n&gt;&gt; &gt; &gt; fractions and was wri=\r\ntten in a test first manner and has documented\n&gt;&gt; unit\n&gt;&gt; &gt; &gt; tests to help=\r\n those learning JUnit see one style (my style!) of test\n&gt;&gt; &gt; &gt; implementati=\r\non.\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt; The code may be found at:\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt; http://github.com=\r\n/simonpeter/Fraction\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt; I hope that you find it useful.\n&gt;&gt; &gt; &gt;\n&gt;=\r\n&gt; &gt; &gt; Simon\n&gt;&gt; &gt; &gt; (one of the JUnit mailing list moderators)\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt;=\r\n --\n&gt;&gt; &gt; &gt; simonpeter.org | simonpeter.com | newlife-upc.org\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt;\n=\r\n&gt;&gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt;\n=\r\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt; ------------------------------------\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt; Yahoo! Gro=\r\nups Links\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; --\n&gt;&gt; &gt; C=C3=A9dric\n&gt;&gt; &gt;\n&gt;&gt;=\r\n &gt; [Non-text portions of this message have been removed]\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt;\n=\r\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; --\n&gt;&gt; simonpeter.org | simonpeter.com | newlife-upc.org\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; [=\r\nNon-text portions of this message have been removed]\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; ----------=\r\n--------------------------\n&gt;&gt;\n&gt;&gt; Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt; --\n&gt;=\r\n C=C3=A9dric\n&gt;\n&gt;\n&gt; [Non-text portions of this message have been removed]\n&gt;\n=\r\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n=\r\n\n", 
    "profile": "dsaff", 
    "topicId": 22880, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "prevInTime": 22886, 
    "contentTrasformed": false, 
    "postDate": "1282571516", 
    "canDelete": false, 
    "nextInTopic": 22888, 
    "prevInTopic": 22885, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGluNlZ1cDRfZzUtZ0hla1Jhek0weHZoUjJFYjVUWE1ZSE0weTNFWkBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PEFBTkxrVGlrdjRnUHhHZy1oQ3crc3ZlZFRlWWViVCtrOXdSTlhaRUZkd0ZURUBtYWlsLmdtYWlsLmNvbT4JPEFBTkxrVGltSEJSRk1zNmFnQStqSFVOU1hDcFI1cnhONVRmdnZydVF6MndUYkBtYWlsLmdtYWlsLmNvbT4JPEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4JPEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4="
    }
}