{
    "numMessagesInTopic": 43, 
    "nextInTime": 19654, 
    "senderId": "os1Dfkqz2Y3A5iu0Bi51xhPpge3WrFv72zWig9mPPrdtZ5IYIgM-GUSeCRjj8EsT1sZ7nMtbeGxAa83E0iOC2pRfJ1Tsa-ZL52JRqc9CiJmE9Qc6LA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing singleton patterns", 
    "from": "jason r tibbetts &lt;tibbettj@...&gt;", 
    "authorName": "jason r tibbetts", 
    "msgSnippet": "Pat, ... I don t see any mention yet in this thread of the simplest solution of them all: put all of the singleton s implementation in a non-singleton abstract", 
    "msgId": 19653, 
    "rawEmail": "Return-Path: &lt;tibbettj@...&gt;\r\nX-Sender: tibbettj@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 84837 invoked from network); 30 Jul 2007 14:12:54 -0000\r\nReceived: from unknown (66.218.66.70)\n  by m36.grp.scd.yahoo.com with QMQP; 30 Jul 2007 14:12:54 -0000\r\nReceived: from unknown (HELO mailhost2.sra.com) (163.252.31.55)\n  by mta12.grp.scd.yahoo.com with SMTP; 30 Jul 2007 14:12:54 -0000\r\nReceived: from verdi.iisd.sra.com ([163.252.29.9]) by mailhost2.sra.com with Microsoft SMTPSVC(6.0.3790.1830);\n\t Mon, 30 Jul 2007 10:01:54 -0400\r\nReceived: from [127.0.0.1] (fs5-01453.sra.com [163.252.3.155])\n\tby verdi.iisd.sra.com (8.13.7/8.13.7) with ESMTP id l6UE1sjc012676\n\tfor &lt;junit@yahoogroups.com&gt;; Mon, 30 Jul 2007 10:01:54 -0400\r\nMessage-ID: &lt;46ADEF51.8060407@...&gt;\r\nDate: Mon, 30 Jul 2007 10:01:53 -0400\r\nUser-Agent: Thunderbird 1.5.0.12 (Windows/20070509)\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;46AB416C.2040400@...&gt;\r\nIn-Reply-To: &lt;46AB416C.2040400@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nReturn-Path: tibbettj@...\r\nX-OriginalArrivalTime: 30 Jul 2007 14:01:54.0833 (UTC) FILETIME=[2F9F5010:01C7D2B2]\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: jason r tibbetts &lt;tibbettj@...&gt;\r\nSubject: Re: [junit] Testing singleton patterns\r\nX-Yahoo-Group-Post: member; u=224061497; y=5zdKbN56eeIxSKrvIFmfqamQOXWwA1UGw69VWp2oKB7LZxrtadZ7qhXfjzrx1UcZ1-gQaA\r\nX-Yahoo-Profile: tibbettj_at_verdi_sra_com\r\n\r\nPat,\n\n&gt; This may be a bit off charter, but I&#39;ve been reading some well argued\n&gt; articles that have names such as &quot;Why is Singleton evil?&quot; and at the top\n&gt; of the list are troubles that the singleton pattern causes for unit\n&gt; testing. (which is on topic.)\n&gt; \n&gt; The usual suggestions for rewriting the code are offered, such as using\n&gt; a factory class to allocate/create objects, and always always just\n&gt; returning the one and only.\n&gt; \n&gt; So far, so good. But, the Factory class has to keep a store of\n&gt; anti-singletons. And the usual call is something like\n&gt; AntiSingleton anAnti = Factory.createAntiSingleton();\n&gt; \n&gt; Which is used statically, and implies that the Factory is a singleton so\n&gt; its cache of AntiSingletons can be kept in one and only one store.\n&gt; \n&gt; I&#39;m not seeing how changing the Singleton class to a class that needs\n&gt; the singleton Factory class has done anything. We&#39;ve still got a\n&gt; singleton, and so all arguments that there is implied coupling, and bad\n&gt; karma for testing still hold.\n\nI don&#39;t see any mention yet in this thread of the simplest solution of \nthem all: put all of the singleton&#39;s implementation in a non-singleton \nabstract base class, then subclass it as a singleton. The abstract base \nclass can be subclassed separately for testing. In other words,\n\n// abstract base class\npublic abstract class Foo {\n   protected Foo() { }\n\n   public String getBar() { return &quot;bar!&quot;; }\n}\n\n// singleton implementation\npublic final class TheOneTrueFoo extends Foo {\n   private TheOneTrueFoo() { super(); }\n\n   public static Foo getInstance() { return foo; }\n\n   private final static Foo = new TheOneTrueFoo();\n}\n\n// test-only implementation\npublic final class TestFoo {\n   public TestFoo() { super(); }\n}\n\nVoila! The 3 statements in the singleton implementation go untested, but \nall of the rest of Foo can be tested normally.\n\n\n", 
    "profile": "tibbettj_at_verdi_sra_com", 
    "topicId": 19636, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 224061497, 
    "prevInTime": 19652, 
    "contentTrasformed": false, 
    "postDate": "1185804113", 
    "canDelete": false, 
    "nextInTopic": 19654, 
    "prevInTopic": 19647, 
    "headers": {
        "inReplyToHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg==", 
        "messageIdInHeader": "PDQ2QURFRjUxLjgwNjA0MDdAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "referencesHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg=="
    }
}