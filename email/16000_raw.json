{
    "numMessagesInTopic": 6, 
    "nextInTime": 16001, 
    "senderId": "lnLoSCdBBOrT1gv0NTO4arEJxg0bcQdAB5VCrHnCCHEOIWkaeVxiizGyDeTscq1brGdZHI6vV1ONuHLr2FgkjV3C147gvMjb", 
    "systemMessage": false, 
    "subject": "RE: [junit] Reliability of Timeout", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Ben, I know this might be difficult, but is it possible to provide a reliably failing test case that demonstrates the problems you are having? Timeouts that", 
    "msgId": 16000, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 81171 invoked from network); 7 Feb 2006 03:35:51 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m13.grp.scd.yahoo.com with QMQP; 7 Feb 2006 03:35:51 -0000\r\nReceived: from unknown (HELO smtpauth04.mail.atl.earthlink.net) (209.86.89.64)\n  by mta8.grp.scd.yahoo.com with SMTP; 7 Feb 2006 03:35:51 -0000\r\nReceived: from [67.131.9.243] (helo=T42)\n\tby smtpauth04.mail.atl.earthlink.net with asmtp (Exim 4.34)\n\tid 1F6Jdp-0001tL-Qx\n\tfor junit@yahoogroups.com; Mon, 06 Feb 2006 22:35:46 -0500\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nDate: Mon, 6 Feb 2006 19:35:40 -0800\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Mailer: Microsoft Office Outlook, Build 11.0.5510\r\nThread-Index: AcYqwfaLsaDWB6FATP25CMWUcDRVlAApCUNQ\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180\r\nIn-Reply-To: &lt;ds6av5+iqk9@...&gt;\r\nMessage-ID: &lt;E1F6Jdp-0001tL-Qx@...&gt;\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d478f6de188fdd142d4ee54bf7c8a79faa346ec0b4205462ca69350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Kent Beck&quot; &lt;kentb@...&gt;\r\nSubject: RE: [junit] Reliability of Timeout\r\nX-Yahoo-Group-Post: member; u=173198504; y=sVY1vtbv5yJ8NTt8nRGI8jfXmex38tqw64fLUMH6b-XMpK71\r\nX-Yahoo-Profile: kentlbeck\r\n\r\nBen,\n\nI know this might be difficult, but is it possible to provide a reliably\nfailing test case that demonstrates the problems you are having? Timeouts\nthat are less than the maximum GC pause will always be unreliable. Might\nthat be the cause of the instability you see?\n\nKent Beck\nThree Rivers Institute\n\n&gt; -----Original Message-----\n&gt; From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On \n&gt; Behalf Of Ben Maurer\n&gt; Sent: Sunday, February 05, 2006 6:06 PM\n&gt; To: junit@yahoogroups.com\n&gt; Subject: [junit] Reliability of Timeout\n&gt; \n&gt; Hey guys,\n&gt; \n&gt; On the junit4 I am using for the the testing server described in a\n&gt; previous email, I&#39;m noticing that the support for timeouts can be less\n&gt; than fully reliable. My server has an OS level protection system that\n&gt; kicks in a ulimit-like functionality in Windows to protect against\n&gt; failures in Java. However, the down-side of this failsafe is that it\n&gt; makes it impossible to recover junit information.\n&gt; \n&gt; I think this is due to the way junit aborts threads:\n&gt; \n&gt; boolean terminated = service.awaitTermination(timeout,\n&gt; \tTimeUnit.MILLISECONDS);\n&gt; \tif (!terminated)\n&gt; \t\tservice.shutdownNow();\n&gt; \n&gt; By tracing through the java code, it seems that the shutdownNow method\n&gt; ends up calling thread.interrupt. This *only* aborts the thread if it\n&gt; is caught in a sleep/wait/etc. In my case, the thread stays in some\n&gt; cpu intensive loop, causing other tests to timeout, or possibly\n&gt; causing a kick-in of the OS level protection.\n&gt; \n&gt; A few options that I can see:\n&gt; \n&gt; - Provide an option to call .stop on non-responsive threads. My\n&gt; understanding is that stop uses the same method that the GC does to\n&gt; suspend threads.\n&gt; \n&gt; - Set the priority of a run-away thread to be as low as possible to\n&gt; minimize damage.\n&gt; \n&gt; - In the Assert api, poll (every N calls) for a command to stop. If\n&gt; the program in question is slow (but not completely out of control),\n&gt; this may allow junit to safely stop.\n&gt; \n&gt; In any case, if the functionaliy of the timeout api can&#39;t be correct\n&gt; for most programs, I&#39;m not exactly sure what value it provides.\n&gt; \n&gt; -- Ben\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 15970, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 15999, 
    "contentTrasformed": false, 
    "postDate": "1139283340", 
    "canDelete": false, 
    "nextInTopic": 16013, 
    "prevInTopic": 15970, 
    "headers": {
        "inReplyToHeader": "PGRzNmF2NStpcWs5QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PEUxRjZKZHAtMDAwMXRMLVF4QHNtdHBhdXRoMDQubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4="
    }
}