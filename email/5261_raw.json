{
    "numMessagesInTopic": 67, 
    "nextInTime": 5262, 
    "senderId": "_BhhlNSl-ne8-kUb13RdRf5200DznC1vmMD_HfyTOeTjvkN8MbmGMfwILlsEilAbYNUwDyTNnOj7cvld4rakkXrfbeownYLK8UhJQNVgnaY", 
    "systemMessage": false, 
    "subject": "design issue", 
    "from": "Boris Garbuzov &lt;boris_garbuzov@...&gt;", 
    "authorName": "Boris Garbuzov", 
    "msgSnippet": "Can somebody suggest on some issue of JUnit API usage or test case design? Sorry for a long appendix code. The essence is that I want to start some application", 
    "msgId": 5261, 
    "rawEmail": "Return-Path: &lt;boris_garbuzov@...&gt;\r\nReceived: (qmail 14352 invoked from network); 26 Jun 2002 17:39:53 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m14.grp.scd.yahoo.com with QMQP; 26 Jun 2002 17:39:52 -0000\r\nReceived: from unknown (HELO n5.grp.scd.yahoo.com) (66.218.66.89)\n  by mta1.grp.scd.yahoo.com with SMTP; 26 Jun 2002 17:39:52 -0000\r\nX-eGroups-Return: boris_garbuzov@...\r\nReceived: from [66.218.67.152] by n5.grp.scd.yahoo.com with NNFMP; 26 Jun 2002 17:39:52 -0000\r\nX-eGroups-Approved-By: geektank &lt;emeade@...&gt; via web; 26 Jun 2002 17:39:51 -0000\r\nX-Sender: boris_garbuzov@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_3_2); 26 Jun 2002 17:20:14 -0000\r\nReceived: (qmail 11580 invoked from network); 26 Jun 2002 17:20:14 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m5.grp.scd.yahoo.com with QMQP; 26 Jun 2002 17:20:14 -0000\r\nReceived: from unknown (HELO web20414.mail.yahoo.com) (66.163.169.90)\n  by mta3.grp.scd.yahoo.com with SMTP; 26 Jun 2002 17:20:14 -0000\r\nMessage-ID: &lt;20020626172014.77948.qmail@...&gt;\r\nReceived: from [64.251.92.67] by web20402.mail.yahoo.com via HTTP; Wed, 26 Jun 2002 10:20:14 PDT\r\nDate: Wed, 26 Jun 2002 10:20:14 -0700 (PDT)\r\nSubject: design issue\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;C450D96664CBD31182B600A0C97668B16480B2@CASE052&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nFrom: Boris Garbuzov &lt;boris_garbuzov@...&gt;\r\nX-Yahoo-Group-Post: member; u=117045670\r\nX-Yahoo-Profile: boris_garbuzov\r\n\r\nCan somebody suggest on some issue of JUnit API usage\nor test case design? Sorry for a long appendix code.\nThe essence is that I want to start some application\nonce in VM session and run all my test methods\nafterwards. I could not find sufficient place to put\nmy initial call \nClientMain.main (null);\nFirst I tried setUp(), but it is called before every\ntest method. Then I tried to implement TestListener to\nuse startTest() method. It in turn was not obvious,\nand you can see the indirect tricks I had to use with\nrun() method and result class, please suggest me\neasier way. But anyways it did not help as startTest()\nwas also called before every test method (what is the\ndifference?) Then I finally used static counters.\nPlease suggest me proper solution. \n\n\n\n\n\n------------------------------------------------------------\npackage com.imc.testutil;\n\n// log4j\nimport org.apache.log4j.PropertyConfigurator;\nimport org.apache.log4j.Logger;\n// junit\nimport junit.framework.Test;\nimport junit.framework.TestCase;\nimport junit.framework.TestResult;\nimport junit.framework.AssertionFailedError;\nimport junit.framework.TestListener;\n\n\n/**\nThis is intended wrapper for all imc test cases.\n&lt;p&gt;\nHere we \n&lt;ol&gt;\n\t&lt;li&gt;configure logger from properties file\n\t&lt;li&gt;add TestListener\n\t&lt;li&gt;count test method calls\n\t&lt;li&gt;distinguish first test method call for child to\nput all settings called once per suite\n\t&lt;li&gt;do some dummy loggings of method calls\n&lt;/ol&gt;\n&lt;/p&gt;\n&lt;p&gt;\nWe experience the following design difficulties,\nderiving either from JUnit API imperfection\nor our poor usage of the latter, namely:\n&lt;ol&gt;\n\t&lt;li&gt;It was not obvious how to add TestListener. \n\tThen we needed to overwrite run() method which does\nnot seem proper way. \n\t&lt;li&gt;The listener being added, we discover startTest()\nmethod to have unexpected functionality.\n\tWe need the place to put code called once per suite. \n\tInstead, startTest() is called before every testXXX()\nmethod just like setUp()\n\tThen what is the difference?\n\tLikewise we could use setUp(), statically counting\ncalls \n\tand implement firstSetUp().\n&lt;/ol&gt;\n@since on 10 June 2002\n@author Boris Garbuzov\n */\npublic class ImcTestCase \n\textends TestCase \n\t// second listener after TestRunner in the JVM\nprocess\n\timplements TestListener\n{\n\n\t/*\n\tWe can use log befoe or in first constructor. \n\t*/\n\tstatic\n\t{\n\t\tPropertyConfigurator.configure(&quot;log4j.properties&quot;);\n\t}\n\n    /** this flag is static because testrunner create\nnew instance of\n     * of this class for every testXXX method. This\nflag is needed to fire \n     * method firstStartTest() only one time. This\nmethod is famous for operations\n     * that needs only one time. Look at method\nrun(TestResult ..)\n\t @deprecated. currentStartTestIndex is used instead\n     */\n    //private static boolean isStartTestFirst = false;\n\n\t/** \n\tgeneralizes the idea of isStartTestFirst\n\tchecked and incremented in startTest()\n\tand published in getCurrentStartTestIndex\n\tIt is good to police the usage\n\tso that this variable could be only incremented, and\nnot voluntarily reset. \n\t*/\n\tprivate static int currentStartTestIndex = 0;\n\n\t/** \n\tJUnit after TestRunner calls this constructor \n\twith name = testXxxx - the current test method \n\t*/\n\tpublic ImcTestCase (String name)\n\t{\n\t\tsuper(name);\n\t\t//createResult().addListener (this); // does not\nhelp\n\t\tgetDefaultLogger().info(&quot;instance created with name\n= &quot; + name);\n\t}\n    \n\t/**\n\tExtension Test code calls this method for casual\nlogging needs. \n\tThis should not add much overhead. \n\tLogger does quick lookup by name.\n\tThat is why we get rid of the field. \n\t*/\n\tprotected Logger getDefaultLogger()\n\t{\n\t\treturn Logger.getLogger (getName());\n\t}\n\n\t/**\n\t* Overide\n\t* Runs the test case and collects the results in\nTestResult.\n\t* And adds this class as TestListener \n\tIs it the only way?\n\tMay be &quot;createResult().addListener (this)&quot; whould\nsuffice?\n\t*/\n\tpublic void run(TestResult result) \n\t{\n\t\tresult.addListener(this);\n\t\tsuper.run (result);\n\t} \n    \n\t/** implements startTest interface method\n\tchildren can add here call of original application to\nbe tested\n\tFor the child class it is desirable to call this\nsuper first\n\tin case of overwriting to prevent obuse. \n\t*/\n    public void startTest(Test test)\n    {\n\t\tgetDefaultLogger().info(&quot;Start test &quot; + getName());\n\t\tcurrentStartTestIndex++;\n\t\t// moved from run()\n\t\tif(currentStartTestIndex == 1)\n\t\t{\n\t\t\tfirstStartTest();\n\t\t}\n    }\n    \n    /** implements addFailure interface method\n    */\n    public void addFailure(Test test,\nAssertionFailedError assertionFailedError)\n    {\n\t\tgetDefaultLogger().error(\nassertionFailedError.getMessage() );\n    }\n    \n    /** implements endTest interface method\n    */\n    public void endTest(Test test)\n    {\n\t\tgetDefaultLogger().info(&quot;Finish test &quot; + getName());\n    }\n    \n    /** implements TestLister\n\tHere we just log the fact of invokation and print the\nerror.\n\tThe children can overwrite it adding sensible stuff. \n    */\n    public void addError(Test test, Throwable\nthrowable)\n    {\n\t\tgetDefaultLogger().error(throwable.getMessage());\n    }\n\t\n\t/**  \n\t@since June 2002 for children to override it\n\tcalling original application once per suite\n\tThe child should not necessarily call this super,\n\tbut it does not hurt too. \n\t*/\n    public void firstStartTest()\n    {\n\t\tgetDefaultLogger().info (&quot;&#92;r&#92;n\nIncTestCase.firstStartTest() is called &#92;r&#92;n&quot;);\n    }    \n\n\t/**  \n\tpublishes current index of test method running\n\t*/\n    public int getCurrentStartTestIndex()\n    {\n\t\treturn currentStartTestIndex;\n    }    \n}\n\n\n\n\n\n-------------------------------------------------------\npackage com.imc.mymailloop.demo.boris2.test4;\n\n// jdk\nimport javax.swing.JFrame;\nimport java.awt.Rectangle;\nimport java.awt.Robot;\nimport java.awt.event.InputEvent;\nimport java.awt.Color;\n// junit\nimport com.imc.testutil.TestChartView;\nimport com.imc.testutil.ImcTestCase;\nimport junit.framework.Test;\n// jemmy\nimport org.netbeans.jemmy.operators.JDialogOperator;\nimport\norg.netbeans.jemmy.operators.AbstractButtonOperator;\nimport org.netbeans.jemmy.operators.JFrameOperator;\nimport org.netbeans.jemmy.operators.JMenuBarOperator;\n// log4j\nimport org.apache.log4j.Logger;\n// ours\nimport com.imc.mymailloop.demo.boris2.ClientMain;\n\n/**\n \n */\npublic class AppTest \n\textends ImcTestCase \n{\n    // this is timeout betwean test operations\n    private static int SHOW_TIMEOUT = 2000;\n\n\t/** \n\tdefined first and then used in test methods\n\t*/    \n\tprivate JFrameOperator jframeMain = null;\n\n    /** Creates new AppTest */\n    public AppTest(String name) \n    {\n        super(name);\n    }\n\n    /**\n\toverrides JUnit&#39;s default\n\tcalled before every test method\n\t2 times in our case\n\t*/\n    public void setUp()\n\t\tthrows Exception\n    {\n        // gets main frame      \n        jframeMain = new JFrameOperator(&quot;Try it&quot;);\n    }\n\n\t/**\n\toverwrites super&#39;s\n\tPut here call of initial app instead of RunTests\n\t*/\n\tpublic void firstStartTest()\n\t{\n\t\tsuper.firstStartTest(); // just for logging\n\t\t// otherwise we can put this to static area. \n\t\tClientMain.main (null);\n\t}\n\n\t/**\n\tfirst test method\n\t&lt;ol&gt;\n\t&lt;li&gt;It finds Help|About menu,\n\t&lt;li&gt;Pusles it,\n\t&lt;li&gt;Finds About dialog\n\t&lt;li&gt;Finds OK button on it\n\t&lt;li&gt;Pushes it. \n\t&lt;li&gt;Does sofisticated logging on the way. \n\t&lt;/ol&gt;\n\t*/\n\tpublic void testMenu()\n\t{\n\t\t// stuff\n\t}\n    \n\n}\n\n\n__________________________________________________\nDo You Yahoo!?\nYahoo! - Official partner of 2002 FIFA World Cup\nhttp://fifaworldcup.yahoo.com\n\n\n", 
    "profile": "boris_garbuzov", 
    "topicId": 5186, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 117045670, 
    "prevInTime": 5260, 
    "contentTrasformed": false, 
    "postDate": "1025112014", 
    "canDelete": false, 
    "nextInTopic": 5262, 
    "prevInTopic": 5260, 
    "headers": {
        "inReplyToHeader": "PEM0NTBEOTY2NjRDQkQzMTE4MkI2MDBBMEM5NzY2OEIxNjQ4MEIyQENBU0UwNTI+", 
        "messageIdInHeader": "PDIwMDIwNjI2MTcyMDE0Ljc3OTQ4LnFtYWlsQHdlYjIwNDE0Lm1haWwueWFob28uY29tPg=="
    }
}