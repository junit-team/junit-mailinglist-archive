{
    "numMessagesInTopic": 12, 
    "nextInTime": 15175, 
    "senderId": "4Ir-lGUQRtx5XjYor-UeoeZ7S8R8_P86ElwPS-pqvVU_W-biryU7dVWc0BgAa3At-FJr2boqoZuob4frVCuC5bSicdE", 
    "systemMessage": false, 
    "subject": "Re: [junit] Counting assertions", 
    "from": "Eugene Kuleshov &lt;eu@...&gt;", 
    "authorName": "Eugene Kuleshov", 
    "msgSnippet": "Good point. So, for those who are interested, here is the shortened version of the aspect: public aspect AssertionCounter percflow(testMethodExecution()) { ", 
    "msgId": 15174, 
    "rawEmail": "Return-Path: &lt;eu@...&gt;\r\nX-Sender: eu@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 48451 invoked from network); 17 Oct 2005 13:58:53 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m26.grp.scd.yahoo.com with QMQP; 17 Oct 2005 13:58:53 -0000\r\nReceived: from unknown (HELO god.md.pp.ru) (64.56.237.27)\n  by mta4.grp.scd.yahoo.com with SMTP; 17 Oct 2005 13:58:53 -0000\r\nReceived: from [192.168.168.10] (helo=[177.129.248.119])\n\tby god.md.pp.ru with esmtpsa (SSLv3:AES256-SHA:256)\n\t (Exim 4.50 #1)\n\tid 1ERVVs-0006zi-05\n\tfor junit@yahoogroups.com; Mon, 17 Oct 2005 09:58:52 -0400\r\nMessage-ID: &lt;4353AE1A.8020702@...&gt;\r\nDate: Mon, 17 Oct 2005 09:58:50 -0400\r\nUser-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;23fce8e60510160655k1c38667fl@...&gt;\t &lt;20051016144916.58296.qmail@...&gt;\t &lt;b86b6a9c0510161810g7c5c5114odcc467ac2b94de53@...&gt;\t &lt;43531B77.30501@...&gt; &lt;b86b6a9c0510162318t11e72f5egbcb558562e6f0cc3@...&gt; &lt;4353539F.8080203@...&gt; &lt;43536408.6010904@...&gt;\r\nIn-Reply-To: &lt;43536408.6010904@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-Score: -5.9 (-----)\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Eugene Kuleshov &lt;eu@...&gt;\r\nSubject: Re: [junit] Counting assertions\r\nX-Yahoo-Group-Post: member; u=150395705; y=v6uV-Ypa0-q0VzydrqKWG9dSequHBwi2_zhX7_bz-EZhkOVt\r\nX-Yahoo-Profile: ekuleshov\r\n\r\n\n  Good point. So, for those who are interested, here is the shortened \nversion of the aspect:\n\npublic aspect AssertionCounter percflow(testMethodExecution()) {\n  private int counter = 0;\n\n  public pointcut testMethodExecution() :\n      execution(void Test+.test*());\n\n  public pointcut assertCall() :\n      cflow(testMethodExecution()) &&\n      call(void Assert+.assert*(..));\n \n  after() returning() : testMethodExecution() {\n    Assert.assertTrue(&quot;No assertions had been called&quot;, counter==0);\n  }\n\n  before() : assertCall() {\n    counter++;\n  }\n \n}\n\n\n\nAlexandru Popescu wrote:\n\n&gt; &gt;&gt;&gt; Cdric, I actually thought you&#39;d suggest aspect for this. :-)\n&gt; &gt;&gt; I was, but somebody beat me to it :-)\n&gt; &gt;&gt; And indeed, I believe AOP is the best way to add this feature, as\n&gt; &gt;&gt; your code shows.\n&gt; &gt;&gt;\n&gt; &gt; By the way, do you think that using ThreadLocal like this is the\n&gt; &gt; right way? Or it is better and more performant (?) to use some\n&gt; &gt; introduction advice? I am afraid that second option will be too\n&gt; &gt; thread-sensitive...\n&gt; &gt;\n&gt; &gt; It would be cool to be able to stick some attributes to the\n&gt; &gt; execution context (somehow similar to attrs that can be added to\n&gt; &gt; http request in a Servlet spec). Unfortunately neither AspectJ or\n&gt; &gt; AOP Alliance provide such API.\n&gt;\n&gt;  guess that using a percflow aspect will remove the need for\n&gt;  ThreadLocal usage.\n\n", 
    "profile": "ekuleshov", 
    "topicId": 2160, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 150395705, 
    "prevInTime": 15173, 
    "contentTrasformed": false, 
    "postDate": "1129557530", 
    "canDelete": false, 
    "nextInTopic": 15175, 
    "prevInTopic": 15172, 
    "headers": {
        "inReplyToHeader": "PDQzNTM2NDA4LjYwMTA5MDRAZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDQzNTNBRTFBLjgwMjA3MDJAbWQucHAucnU+", 
        "referencesHeader": "PDIzZmNlOGU2MDUxMDE2MDY1NWsxYzM4NjY3ZmxAbWFpbC5nbWFpbC5jb20+CSA8MjAwNTEwMTYxNDQ5MTYuNTgyOTYucW1haWxAd2ViMzU2MTAubWFpbC5tdWQueWFob28uY29tPgkgPGI4NmI2YTljMDUxMDE2MTgxMGc3YzVjNTExNG9kY2M0NjdhYzJiOTRkZTUzQG1haWwuZ29vZ2xlLmNvbT4JIDw0MzUzMUI3Ny4zMDUwMUBtZC5wcC5ydT4gPGI4NmI2YTljMDUxMDE2MjMxOHQxMWU3MmY1ZWdiY2I1NTg1NjJlNmYwY2MzQG1haWwuZ29vZ2xlLmNvbT4gPDQzNTM1MzlGLjgwODAyMDNAbWQucHAucnU+IDw0MzUzNjQwOC42MDEwOTA0QGdtYWlsLmNvbT4="
    }
}