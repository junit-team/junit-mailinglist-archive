{
    "numMessagesInTopic": 1, 
    "nextInTime": 18573, 
    "senderId": "4QkpnsTvS8OpOhjSWpF1grtbkj84fIqSRL4js3dCA7rN0vm-aXSauzQdJIw6HXFDK0Cagy69z95TXoK-DCoWcoGvYUfTcwmRrEnozv8boV7qWQk", 
    "systemMessage": true, 
    "subject": "Re [junit] Test a remote server", 
    "from": "&quot;Andrew McDonagh&quot; &lt;andrewmcdonagh@...&gt;", 
    "authorName": "Andrew McDonagh", 
    "msgSnippet": "Hi, So I m still not sure if you mean you want to Unit test or System test, using the JUnit framework. I m going to show how I would   Unit Test    the code,", 
    "msgId": 18572, 
    "rawEmail": "Return-Path: &lt;andrewmcdonagh@...&gt;\r\nReceived: (qmail 44823 invoked from network); 22 Dec 2006 14:14:28 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m30.grp.scd.yahoo.com with QMQP; 22 Dec 2006 14:14:28 -0000\r\nReceived: from unknown (HELO n7c.bullet.sp1.yahoo.com) (69.147.64.167)\n  by mta9.grp.scd.yahoo.com with SMTP; 22 Dec 2006 14:14:28 -0000\r\nReceived: from [216.252.122.216] by n7.bullet.sp1.yahoo.com with NNFMP; 22 Dec 2006 14:13:36 -0000\r\nReceived: from [66.218.69.5] by t1.bullet.sp1.yahoo.com with NNFMP; 22 Dec 2006 14:13:36 -0000\r\nReceived: from [66.218.66.68] by t5.bullet.scd.yahoo.com with NNFMP; 22 Dec 2006 14:13:36 -0000\r\nX-Sender: andrewmcdonagh@...\r\nX-Apparently-To: Junit@yahoogroups.com\r\nReceived: (qmail 54296 invoked from network); 21 Dec 2006 00:46:57 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m28.grp.scd.yahoo.com with QMQP; 21 Dec 2006 00:46:57 -0000\r\nReceived: from unknown (HELO ug-out-1314.google.com) (66.249.92.174)\n  by mta9.grp.scd.yahoo.com with SMTP; 21 Dec 2006 00:46:56 -0000\r\nReceived: by ug-out-1314.google.com with SMTP id e2so2233596ugf\n        for &lt;Junit@yahoogroups.com&gt;; Wed, 20 Dec 2006 16:45:45 -0800 (PST)\r\nReceived: by 10.78.200.3 with SMTP id x3mr5275372huf.1166641255069;\n        Wed, 20 Dec 2006 11:00:55 -0800 (PST)\r\nReceived: by 10.78.181.18 with HTTP; Wed, 20 Dec 2006 11:00:54 -0800 (PST)\r\nMessage-ID: &lt;35c507d30612201100r5a655e2coab83aa5ef4823670@...&gt;\r\nDate: Wed, 20 Dec 2006 19:00:55 +0000\r\nTo: Junit@yahoogroups.com\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nX-eGroups-Msg-Info: 2:2:2:0\r\nFrom: &quot;Andrew McDonagh&quot; &lt;andrewmcdonagh@...&gt;\r\nSubject: Re [junit] Test a remote server\r\nX-Yahoo-Group-Post: member; u=283773244; y=p2Qip753tryXJcgOGZ0xnD83XOdAlOKOXzNIChaLbBTCsbv31B-76w\r\nX-Yahoo-Profile: andy_ipaccess\r\nX-Yahoo-Marked-Not-Spam: \r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: mark_l_salter &lt;marksalter@...&gt; via web; 22 Dec 2006 14:13:35 -0000\r\n\r\nHi,\n\nSo I&#39;m still not sure if you mean you want to Unit test or System\ntest, using the JUnit framework.\n\nI&#39;m going to show how I would   Unit Test    the code, using JUnit.....\n\n\nThe code as it stands, makes unit testing difficult because of the use\nof Singletons, static methods and raw Corba or RMi objects.  So I&#39;m\ngoing to refactor it somewhat to make it testable.  Making it testable\nusually makes the design more flexible, finer grained and loosely\ncoupled - all good things.\n\nFirst step - move the property setting code into its own class - then\ntest it there instead of inside the main() method.  This is because\nthe main() method has calls to a singleton and creates CORBA objects,\nwhich I can&#39;t easily get around, as this code is inside the static\n&#39;main()&#39; method.  If this code lived inside an instance method of\nServer, then I could inject a mock object for these.\n\nSo, here&#39;s the main method, with the MTT Host and UUID property\nsetting code moved into a new class. The new class&#39;s method also only\nknows about normal Java classes (InetAddress) instead of being coupled\nto the VestUUID class - this makes unit testing really easy!!!!\n\n\n public static void main(String[] args) {\n    if (args.length &gt;= 1) {\n      try {\n        // set the initial environment\n        AnotherServer.getInstance().setEnvironment();\n\n        Server obj = Server.getInstance();\n\n        _serverUUID = new VespUuid(args[0]);\n\n        InetAddress inetAddress = _serverUUID.getInetAddress();\n        SystemPropertyConfigurator.setMttHostProperty(inetAddress,\nServer._serverUUID.getPort());\n\n        if (args.length &gt;= 2) {\n          SystemPropertyConfigurator.setOrbUuidProperty(args[1]);\n        }\n      } catch (Exception e) {\n        // todo...\n        throw new RuntimeException(e);\n      }\n    }\n  }\n\n\nHere&#39;s the new class......(as it currently stands)\n\n\nimport java.net.InetAddress;\n\npublic class SystemPropertyConfigurator {\n\n  static void setMttHostProperty(InetAddress inetAddress, String port) {\n    StringBuffer sb = new StringBuffer(inetAddress.toString());\n    sb.delete(0, 1);\n    sb.append(&quot;:&quot;);\n    sb.append(port);\n\n    String sInetAddress = sb.toString();\n    System.setProperty(VespConfigParams.MTT_INSTANCE_HOST_PROPERTY,\nsInetAddress);\n  }\n\n\n\n  static void setOrbUuidProperty(String uuid) {\n    System.setProperty(VespConfigParams.ORB_UUID_PROPERTY, uuid);\n  }\n\n}\n\n\n\n\nAnd now here&#39;s its unit test!!!!!!!!!!! (these run and pass in my eclipse)\n\n\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\nimport junit.framework.TestCase;\n\npublic class SystemPropertyConfiguratorTest extends TestCase {\n\n  public void testMttHostPropertySetWithoutFirstLetter() throws\nUnknownHostException {\n    InetAddress address = InetAddress.getByName(&quot;localhost&quot;);\n\n    SystemPropertyConfigurator.setMttHostProperty(address, &quot;8080&quot;);\n\n    String actualProperty =\nSystem.getProperty(VespConfigParams.MTT_INSTANCE_HOST_PROPERTY);\n\n    String expectedProperty = &quot;ocalhost/127.0.0.1:8080&quot;;\n\n    assertNotNull(&quot;Property not found!&quot;, actualProperty);\n    assertEquals(&quot;Wrong property value!&quot;, expectedProperty, actualProperty);\n  }\n\n\n public void testOrbUuidPropertySet() {\n   SystemPropertyConfigurator.setOrbUuidProperty(&quot;a UUID!&quot;);\n\n   String actualProperty =\nSystem.getProperty(VespConfigParams.ORB_UUID_PROPERTY);\n\n   assertNotNull(&quot;Property not found!&quot;, actualProperty);\n   assertEquals(&quot;Wrong property value!&quot;, &quot;a UUID!&quot;, actualProperty);\n }\n\n}\n\n\n\n\nNow, as things stand, I may decide to not unit test the &#39;main()&#39;\nmethod in Server class at all, as all its doing is calling others to\ndo things, I might rely upon the normal System and integeration tests\nto test it.  Or I may decide to refactor the Server class as well, to\nallow me to make the main() method more testable (which will involve\nsimilar techniques as I&#39;ve shown here).  The choice comes down as\nalways to one of time vs payback.\n\nHopefully this is enough to get you started in thinking baout how to\nchange your design slightly, to enable unit testing of the code,\nwithout having to have real corba, networks, files, dbs, etc around.\n\nFeel free to ask for more help...\n\nAndrew\n\n\n\n\n\n&quot;avinash anand&quot; &lt;avinash_anand@...&gt;\nSent by: junit@yahoogroups.com\n\n15-Dec-2006 14:23\nPlease respond to junit@yahoogroups.com\n\nTojunit@yahoogroups.com\ncc\nSubjectRe: [junit] Test a remote server\n\n\n\n\n\n\nHi\nPosting the real .java file would not be possible for me but I am\nwritting a sample java file which will be doing the same (You can say\nits a prototype of it.)\n\nclass server{\nprivate DBConnection _dbconnectoin;\nprivate server _serverinstance = null;\nprivate static VespAlarmService _alarmService;\nprivate static VespUuid _serverUUID;\nprivate server(){\n_alarmService = VespAlarmServiceImpl.getInstance();\n}\npublic static server getInstance(){\nif (null == _servernstance){\n_serverinstance = new server();\n}\nreturn _serverinstance;\n}\npublic static void main(String[] args){\nif (args.length &gt;= 1){\ntry {\n//set the initial environment\nAnotherServer.getInstance().setEnvironment();\nserver obj = server.getInstance();\n_serverUUID = new VespUuid(args[0]);\nStringBuffer sb = new StringBuffer(_serverUUID.getInetAddress().toString());\nsb.delete(0, 1);\nsb.append(&quot;:&quot;);\nsb.append(_serverUUID.getPort());\nString sInetAddress = sb.toString();\nSystem.setProperty(VespConfigParams.MTT_INSTANCE_HOST_PROPERTY, sInetAddress);\nif(args.length &gt;= 2) {\nSystem.setProperty(VespConfigParams.ORB_UUID_PROPERTY, args[1]);\n}\nvoid startserver ()\n{\n}\nvoid stopserver()\n{\n}\nvoid isserverready()\n{\n}\nvoid generatevespAlarm()\n{\n}\n}\n\nThis is how the main class looks. There are many other supporting JAVA\nfiles for this main server. It uses a JNI layer to talk to the native\ncode. Which is implemented elesewhere.\n\nFor it to run in the actul enviroment, it uses a wrapper .exe which\ncalls an xml file where all the server properties are listed in the\nmain method the location of .class files are specified which are\nalready compiled and put in the java&#92;lib folder in the form of .jar.\nHere is the snippet of xml file where the exe tries to read it.\n\n&lt;stringProperty property=&quot;jloader.server.main.class&quot; displayName=&quot;Main\nclass&quot; default=&quot;com/xyz/server/testing&quot; enabled=&quot;false&quot;\nadvanced=&quot;true&quot; /&gt;\n\nWhat I am trying is to write a JUnit test suite for this Java based\nserver, which will be running in the form of an .exe. And my test\ncases will be running in eclipse.\n\nHope the entire thing might make the picture a bit clear.\n\nThanks\nAvinash\n\n----- Original Message ----\nFrom: &quot;andrew.p.mcdonagh@...&quot; &lt;andrew.p.mcdonagh@...&gt;\nTo: junit@yahoogroups.com\nSent: Friday, 15 December, 2006 7:25:14 PM\nSubject: Re: [junit] Test a remote server\n\nHi,\n\nNot sure why your Java app does not use Java&#39;s corba ability (a good Java\nORB being http://www.jacorb. org/ ), instead of JNI...\n\nAnyway, onto your real question, how do I test the code that is dependant\nupon the other servers?\n\nAs you are asking on the JUnit list I take it you mean Unit test?\nNot System or Integration testing?\n\nIf so, then you will find unit testing much simpler and (imo) better, if\nnone of your unit tests need to access any file, network, database or UI.\nThis means they run very fast. Once you figure out how to do them, you\nshould be able to write lots of them , quickly too.\n\nWe could just give you some simple examples, but I tend to find it better\nto show you how to unit test one of your classes that depend on corba or\nsome other system, by using one of your real classes. So, please post\n(just one) class and we&#39;ll knock up a unit test for it.\n\nRegards\n\nAndrew\n\n&quot;avinash anand&quot; &lt;avinash_anand@ yahoo.co. uk&gt;\nSent by: junit@yahoogroups. com\n15-Dec-2006 09:04\nPlease respond to junit@yahoogroups. com\n\nTo\njunit@yahoogroups. com\ncc\n\nSubject\n[junit] Test a remote server\n\nHi Group\nGreetings to all. These days I am writting test suit for a CORBA CRM. Let\nme first introduce the system.\n\nThere is a central ORB server and many other servers which talk to each\nother through vesp. ORB being the central one. Entire code base is in C++.\nI have to test a new server introduced in the system which is written in\nJava. This new server talks to the rest through JNI. As a matter of Fact\nnone of the servers can run independently, they neccesirily have to log\ninto the central kit and report to the the central ORB server. After\nvalidation stuff the server starts working.\n\nEven this new Java based server uses an executable file to work\n(Jloader.exe written in c++)\n\nThis .exe loads various .dll files in the system and in its main method\ncalls the compiled .class files. This is the way how system functions.\n\nMy problem is that when I will write a JUnit test case in IDE (eclipse)\nwhich would operate on the actual code which has 99% dependency and cannot\nbe tested isolated. Is there any way to test this server code while it is\nworking under the live system and the test suite running in the eclipse\nIDE.\n\nHELP !!!\n\nThanks\nAvinash\n\n____________ _________ _________ _________ _________ _________ _\nNow you can scan emails quickly with a reading pane. Get the new Yahoo!\nMail. http://uk.docs. yahoo.com/ nowyoucan. html\n\n[Non-text portions of this message have been removed]\n\n[Non-text portions of this message have been removed]\n\n\n\n\n__________________________________________________________\nAll new Yahoo! Mail &quot;The new Interface is stunning in its simplicity\nand ease of use.&quot; - PC Magazine\nhttp://uk.docs.yahoo.com/nowyoucan.html\n\n[Non-text portions of this message have been removed]\n\n\n\n\n", 
    "profile": "andy_ipaccess", 
    "topicId": 18572, 
    "spamInfo": {
        "reason": "2", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 283773244, 
    "prevInTime": 18571, 
    "contentTrasformed": false, 
    "postDate": "1166641255", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDM1YzUwN2QzMDYxMjIwMTEwMHI1YTY1NWUyY29hYjgzYWE1ZWY0ODIzNjcwQG1haWwuZ21haWwuY29tPg=="
    }
}