{
    "numMessagesInTopic": 1, 
    "nextInTime": 19428, 
    "senderId": "r7Z2B04HAnfME1NmzAW9jHAQl5TUwkX7DvMfPU4IsVVrsQnLaIbFy8EuxJjXRtBKxpvQKArqQASRW47PiXpyYvinJ6BNog", 
    "systemMessage": false, 
    "subject": "Asking how to test class with collaboration to a static method", 
    "from": "slawalata &lt;slawalata@...&gt;", 
    "authorName": "slawalata", 
    "msgSnippet": "Greetings, I am trying to find how I can test a class which has collaboration with a singleton or static class. I have attached the source code in this email.", 
    "msgId": 19427, 
    "rawEmail": "Return-Path: &lt;Sanga.Lawalata@...&gt;\r\nReceived: (qmail 19111 invoked by uid 7800); 6 Jun 2007 15:00:40 -0000\r\nX-Sender: Sanga.Lawalata@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 89144 invoked from network); 6 Jun 2007 13:42:12 -0000\r\nReceived: from unknown (66.218.66.68)\n  by m43.grp.scd.yahoo.com with QMQP; 6 Jun 2007 13:42:12 -0000\r\nReceived: from unknown (HELO c3po.jamba.net) (81.19.200.44)\n  by mta11.grp.scd.yahoo.com with SMTP; 6 Jun 2007 13:42:09 -0000\r\nReceived: from BERWNEXCN02.jcorp.ad.jamba.net (berwnexcn02.jcorp.ad.jamba.net [10.35.12.219])\n\tby c3po.jamba.net (Postfix) with ESMTP id DE4494C150\n\tfor &lt;junit@yahoogroups.com&gt;; Wed,  6 Jun 2007 15:49:52 +0200 (CEST)\r\nReceived: from berwnexmb01.jcorp.ad.jamba.net ([10.35.12.221]) by BERWNEXCN02.jcorp.ad.jamba.net with Microsoft SMTPSVC(6.0.3790.1830);\n\t Wed, 6 Jun 2007 15:41:30 +0200\r\nReceived: from 10.35.29.20 ([10.35.29.20]) by berwnexmb01.jcorp.ad.jamba.net ([10.35.12.221]) with Microsoft Exchange Server HTTP-DAV ;\n Wed,  6 Jun 2007 13:41:30 +0000\r\nReceived: from berslawalata-lx1 by berwnexmb01.jcorp.ad.jamba.net; 06 Jun 2007 15:45:25 +0200\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain\r\nContent-Transfer-Encoding: 7bit\r\nDate: Wed, 06 Jun 2007 15:45:25 +0200\r\nMessage-Id: &lt;1181137525.15355.19.camel@...&gt;\r\nMime-Version: 1.0\r\nX-Mailer: Evolution 2.6.1 \r\nX-OriginalArrivalTime: 06 Jun 2007 13:41:30.0606 (UTC) FILETIME=[639E98E0:01C7A840]\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: slawalata &lt;slawalata@...&gt;\r\nSubject: Asking how to test class with collaboration to a static method\r\nX-Yahoo-Group-Post: member; u=313521597; y=HKxeqrTnzbvgZUfntn3ou7kg5PqWR1eeqJZgfUs1VyAsfdQo\r\nX-Yahoo-Profile: k4mpret77\r\nX-eGroups-Approved-By: ddoss_2006 &lt;didoss@...&gt; via email; 6 Jun 2007 15:00:40 -0000\r\n\r\nGreetings,\n\nI am trying to find how I can test a class which has collaboration with\na singleton or static class.\n\nI have attached the source code in this email. I have read many papers\nin google and mostly they says that single ton is ugly etc :) but i must\ntest it and no other way.\n\nI want to test OrderBusinessDelegate.isPossible() (a singleton class)\nwhich has collaboration with another static class method\nProductDelegate.getOderByPno()\n\nI try to isolate the OrderBusinessDelegate and change the\nProductDelegate with MockProductDelegate and still it doesnt work like I\nexpect.\n\nThis is the output \n\n[code]\n0    [main] DEBUG Order.OrderBusinessDelegate  - returning\nProductDelegate\n2    [main] DEBUG Order.ProductDelegate  - getOrderByPno from\nProductDelegate\n2    [main] DEBUG TestOrderDelegate  - isPossible() : 1 &lt;-&gt;\nOrderBusinessDelegate\n3    [main] DEBUG Order.MockOrderBusinessDelegate  -\nMockOrderBusinessdelegate is instanciated\n3    [main] DEBUG Order.MockOrderBusinessDelegate  - returning\nMockProductDelegate\n3    [main] DEBUG Order.ProductDelegate  - getOrderByPno from\nProductDelegate\n3    [main] DEBUG TestOrderDelegate  - isPossible() : 1 &lt;-&gt;\nMockOrderBusinessDelegate\n[/code]\n\nif ProductDelegate.getOderByPno() and\nMockProductDelegate.getOderByPno() are changed into non static, i get\nthe expected result (inheritance)\n\n[code]\n0    [main] DEBUG Order.OrderBusinessDelegate  - returning\nProductDelegate\n2    [main] DEBUG Order.ProductDelegate  - getOrderByPno from\nProductDelegate\n2    [main] DEBUG TestOrderDelegate  - isPossible() : 1 &lt;-&gt;\nOrderBusinessDelegate\n3    [main] DEBUG Order.MockOrderBusinessDelegate  -\nMockOrderBusinessdelegate is instanciated\n3    [main] DEBUG Order.MockOrderBusinessDelegate  - returning\nMockProductDelegate\n3    [main] DEBUG Order.MockProductDelegate  - getOrderByPno from\nMockProductDelegate\n3    [main] DEBUG TestOrderDelegate  - isPossible() : 10 &lt;-&gt;\nMockOrderBusinessDelegate\n[/code]\n\n\nI know it is not related with how to use JUnit but maybe someone has\nalready some experience how to test this unit or class. And later I can\nuse JUnit to perform automatic testing.\n\nThanks for any advices and responds\n\nbest regards\nsanga lawalata\n\nbelows are the java codes :\n\nTestOrderDelegate.java\n[code]\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.PropertyConfigurator;\n\nimport Order.MockOrderBusinessDelegate;\nimport Order.OrderBusinessDelegate;\n\n\npublic class TestOrderDelegate {\n\n\tprivate static Logger logger =\nLogger.getLogger(TestOrderDelegate.class);\n\t\n\tpublic static void main (String[] args){\n\n\t\tPropertyConfigurator.configure(&quot;src/log4j.properties&quot;);\n\t\t\t\n\t\t//1.\n\t\tOrderBusinessDelegate orderDelegate =\nOrderBusinessDelegate.getInstance();\n\t\tlogger.debug(&quot;isPossible() : &quot;+orderDelegate.isPossible()+&quot; &lt;-&gt;\n&quot;+orderDelegate.toString());\n\t\t\n\t\t\n\t\t//2.\n\t\tOrderBusinessDelegate mockOrderDelegate =\nMockOrderBusinessDelegate.getInstance();\t\t\n\t\tif (mockOrderDelegate instanceof MockOrderBusinessDelegate) {\n\t\t\tMockOrderBusinessDelegate new_name = (MockOrderBusinessDelegate)\nmockOrderDelegate;\n\t\t\tlogger.debug(&quot;isPossible() : &quot;+mockOrderDelegate.isPossible()+&quot; &lt;-&gt;\n&quot;+mockOrderDelegate.toString());\n\t\t}else logger.debug(&quot;new_name is not MockOrderDelegate&quot;);\n\t\t\n\t\t\n\t}\n\t\n}\n[/code]\n\nOrderBusinessDelegate.java\n[code]\npackage Order;\n\nimport org.apache.log4j.Logger;\n\npublic class OrderBusinessDelegate {\n\n\tprivate static Logger logger =\nLogger.getLogger(OrderBusinessDelegate.class);\n\t\n\tprivate static OrderBusinessDelegate instance = null;\n\n\tprotected OrderBusinessDelegate() {\n\t\tsuper();\n\t}\n\n\tpublic static synchronized OrderBusinessDelegate getInstance() {\n\t\tif (instance == null) {\n\t\t\tinstance = new OrderBusinessDelegate();\n\t\t}\n\t\treturn instance;\n\t}\n\t\n\t\t\n\tpublic int isPossible(){\n\t\treturn getProductDelegate().getOderByPno();\n\t}\n\t\n\tpublic String toString(){\n\t\treturn &quot;OrderBusinessDelegate&quot;;\n\t}\n\t\n\tpublic ProductDelegate getProductDelegate(){\n\t\tlogger.debug(&quot;returning ProductDelegate&quot;);\n\t\treturn new ProductDelegate();\n\t}\n}\n[/code]\n\nMockOrderBusinessDeleate.java\n[code]\npackage Order;\n\nimport org.apache.log4j.Logger;\n\npublic class MockOrderBusinessDelegate extends OrderBusinessDelegate {\n\n\tprivate static Logger logger = Logger\n\t\t\t.getLogger(MockOrderBusinessDelegate.class);\n\n\tprivate static MockOrderBusinessDelegate instance = null;\n\n\tprivate MockOrderBusinessDelegate() {\n\t\tlogger.debug(&quot;MockOrderBusinessdelegate is instanciated&quot;);\n\t}\n\n\tpublic static synchronized OrderBusinessDelegate getInstance() {\n\t\tif (instance == null) {\n\t\t\tinstance = new MockOrderBusinessDelegate();\n\t\t}\n\t\treturn instance;\n\t}\n\n\tpublic ProductDelegate getProductDelegate() {\n\t\tlogger.debug(&quot;returning MockProductDelegate&quot;);\n\t\treturn new MockProductDelegate();\n\t}\n\t\n\tpublic String toString(){\n\t\treturn &quot;MockOrderBusinessDelegate&quot;;\n\t}\n\n}\n[/code]\n\nProductDelegate.java\n[code]\npackage Order;\n\nimport org.apache.log4j.Logger;\n\npublic class ProductDelegate {\n\t\n\tprivate static Logger logger = Logger.getLogger(ProductDelegate.class);\n\t\n\tpublic  int getOderByPno() {\n\t\tlogger.debug(&quot;getOrderByPno from ProductDelegate&quot;);\n\t\treturn 1;\n\t}\n\n}\n[/code]\n\nMockProductDelegate.java\n[code]\npackage Order;\n\nimport org.apache.log4j.Logger;\n\nimport sun.awt.motif.MPopupMenuPeer;\nimport sun.security.jca.GetInstance;\n\npublic class MockProductDelegate  extends ProductDelegate{\n\n\tprivate static Logger logger =\nLogger.getLogger(MockProductDelegate.class);\n\n\t\n\tpublic  int getOderByPno() {\n\t\tlogger.debug(&quot;getOrderByPno from MockProductDelegate&quot;);\n\t\treturn 10;\n\t}\n}\n[/code]\n\n", 
    "profile": "k4mpret77", 
    "topicId": 19427, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 313521597, 
    "prevInTime": 19426, 
    "contentTrasformed": false, 
    "postDate": "1181137525", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDExODExMzc1MjUuMTUzNTUuMTkuY2FtZWxAbG9jYWxob3N0LmxvY2FsZG9tYWluPg=="
    }
}