{
    "numMessagesInTopic": 4, 
    "nextInTime": 21949, 
    "senderId": "Nw7KbAOlgla4zAPUVOIpYxl3sygIDgIr4AyzNyEbM00bzvqJ_u8h5ff2LQbEtmvf_OeUskLgHgNe4HF1sFZZJLHiMOBC", 
    "systemMessage": true, 
    "subject": "Re: [junit] Reading property files fails when running from Ant / \tClasspath not set", 
    "from": "Mike Forsberg &lt;bigmike@...&gt;", 
    "authorName": "Mike Forsberg", 
    "msgSnippet": "My first suggestion is to run ant with the -v command option.  This will list the command line execution to the junit call.  (I think :) ) Once you have the", 
    "msgId": 21948, 
    "profile": "bigmike_f", 
    "topicId": 21946, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89428055, 
    "messageBody": "<div id=\"ygrps-yiv-1278311541\">My first suggestion is to run ant with the -v command option.  This<br/>\nwill list the command line execution to the junit call.  (I think :) )<br/>\n<br/>\nOnce you have the command line execution you should be able to see the issue.<br/>\n<br/>\nIf not, don&#39;t hesitate to reply to the thread.<br/>\n<br/>\nBig Mike<br/>\n<br/>\nP.S.  I always try and fix ant issues by running them by using the<br/>\ncommand line outside of eclipse.  For me, it takes a variable out of<br/>\nthe equation.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Sun, Sep 27, 2009 at 7:18 AM, Sampo Niskanen &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:sampo.niskanen@...\">sampo.niskanen@...</a>&gt; wrote:<br/>\n&gt; Hi,<br/>\n&gt;<br/>\n&gt; I&#39;m having trouble running my JUnit tests from an Ant script, and<br/>\n&gt; haven&#39;t been able to find any solution in the FAQ or on the net.<br/>\n&gt; Though the classpath is set so that Junit finds my class files, the<br/>\n&gt; classes themselved cannot find my build.properties file which is read<br/>\n&gt; as runtime.<br/>\n&gt;<br/>\n&gt; I have a file &quot;build.properties&quot; in my main project directory, which<br/>\n&gt; contains e.g. the software version number.  This is automatically<br/>\n&gt; loaded by a class that is used by my unit test.  In Eclipse if I<br/>\n&gt; directly run the test, it fails, but after selecting Run<br/>\n&gt; configurations and adding the project root directory to the classpath<br/>\n&gt; it runs fine.<br/>\n&gt;<br/>\n&gt; I&#39;ve tried multiple ways of adding the base directory also to the<br/>\n&gt; JUnit classpath (in a separate classpath that is referenced and as an<br/>\n&gt; explicit classpath in the &lt;junit&gt; task), but every time it fails to<br/>\n&gt; find the property file.  I&#39;ve also tried copying the property file<br/>\n&gt; into the directory in which the base and/or test classes are compiled<br/>\n&gt; (and from which JUnit successfully runs the tests), but it cannot find<br/>\n&gt; it even then.<br/>\n&gt;<br/>\n&gt; I added a line<br/>\n&gt;<br/>\n&gt;        System.out.println(&quot;TEST CLASSPATH: &quot; +<br/>\n&gt; System.getProperty(&quot;java.class.path&quot;));<br/>\n&gt;<br/>\n&gt; to the beginning of my test method to print out the current classpath.<br/>\n&gt;  When running from Eclipse the classpath contains the base directory,<br/>\n&gt; but when running from Ant it does not, it contains only Ant-related<br/>\n&gt; jars.  It therefore seems that even though the classpath is set<br/>\n&gt; correctly to find the classes (and removing the paths causes all tests<br/>\n&gt; to fail), the classpath is not propagated to the running system.  Does<br/>\n&gt; JUnit use for example a custom class loader, which could cause this<br/>\n&gt; kind of behavior?  I&#39;ve tested both forking and non-forking mode<br/>\n&gt; without avail.<br/>\n&gt;<br/>\n&gt; Below is the classpath printed by the tests and excerpts from the Ant<br/>\n&gt; build file.  The entire build file and test suite can be checked out<br/>\n&gt; from Subversion as instructed at<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://openrocket.sourceforge.net/download.html\">http://openrocket.sourceforge.net/download.html</a><br/>\n&gt;<br/>\n&gt; Thanks for any help!<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Best regards,<br/>\n&gt;   Sampo Niskanen<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; The output when running the test from Eclipse:<br/>\n&gt;<br/>\n&gt; TEST CLASSPATH:<br/>\n&gt; /home/sampo/Projects/OpenRocket:/home/sampo/Projects/OpenRocket/bin:/home/sampo/Projects/OpenRocket/lib/miglayout15-swing.jar:/home/sampo/Projects/libs/jfreechart-1.0.13/lib/jcommon-1.0.16.jar:/home/sampo/Projects/libs/jfreechart-1.0.13/lib/jfreechart-1.0.13.jar:/home/sampo/Projects/OpenRocket/extra-lib/RXTXcomm.jar:/home/sampo/eclipse/plugins/org.junit4_4.3.1/junit.jar:/home/sampo/eclipse/configuration/org.eclipse.osgi/bundles/165/1/.cp/:/home/sampo/eclipse/configuration/org.eclipse.osgi/bundles/163/1/.cp/:/home/sampo/eclipse/configuration/org.eclipse.osgi/bundles/164/1/.cp/<br/>\n&gt;<br/>\n&gt; and from Ant:<br/>\n&gt;<br/>\n&gt; TEST CLASSPATH:<br/>\n&gt; /usr/share/ant/lib/ant-launcher.jar:/usr/share/java/xmlParserAPIs.jar:/usr/share/java/xercesImpl.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-launcher.jar:/usr/share/ant/lib/ant-trax.jar:/usr/share/ant/lib/ant-apache-bsf.jar:/usr/share/ant/lib/catalina5.5-ant.jar:/usr/share/ant/lib/ant.jar:/usr/share/ant/lib/ant-apache-log4j.jar:/usr/share/ant/lib/junit.jar:/usr/share/ant/lib/ant-commons-net.jar:/usr/share/ant/lib/ant-javamail.jar:/usr/share/ant/lib/ant-antlr.jar:/usr/share/ant/lib/ant-jsch.jar:/usr/share/ant/lib/tomcat5.5-jkstatus-ant.jar:/usr/share/ant/lib/ant-jdepend.jar:/usr/share/ant/lib/jsch.jar:/usr/share/ant/lib/bcel.jar:/usr/share/ant/lib/ant-apache-bcel.jar:/usr/share/ant/lib/ant-apache-oro.jar:/usr/share/ant/lib/ant-nodeps.jar:/usr/share/ant/lib/ant-commons-logging.jar:/usr/share/ant/lib/ant-jmf.jar:/usr/share/ant/lib/ant-apache-regexp.jar:/usr/share/ant/lib/ant-swing.jar:/usr/share/ant/lib/junit4.jar:/usr/share/ant/lib/ant-apache-resolver.jar:/usr/!<br/>\n&gt;  share/ant/lib/catalina5.5-ant-jmx.jar:/usr/lib/jvm/java-6-sun-1.6.0.16/lib/tools.jar<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Excerpts from build.xml:<br/>\n&gt;<br/>\n&gt;        &lt;!-- Classpath definitions --&gt;<br/>\n&gt;        &lt;path id=&quot;classpath&quot;&gt;<br/>\n&gt;                &lt;fileset dir=&quot;${lib.dir}&quot; includes=&quot;**/*.jar&quot;/&gt;<br/>\n&gt;        &lt;/path&gt;<br/>\n&gt;<br/>\n&gt;        &lt;path id=&quot;test-classpath&quot;&gt;<br/>\n&gt;                &lt;path refid=&quot;classpath&quot;/&gt;<br/>\n&gt;                &lt;pathelement location=&quot;${basedir}&quot;/&gt;<br/>\n&gt;                &lt;pathelement location=&quot;${build-test.dir}&quot;/&gt;<br/>\n&gt;                &lt;pathelement location=&quot;${classes.dir}&quot;/&gt;<br/>\n&gt;                &lt;pathelement location=&quot;${ant.library.dir}/junit4.jar&quot;/&gt;<br/>\n&gt;        &lt;/path&gt;<br/>\n&gt;<br/>\n&gt; ...<br/>\n&gt;<br/>\n&gt;        &lt;!--  Unit tests  --&gt;<br/>\n&gt;        &lt;target name=&quot;unittest&quot; description=&quot;Execute unit tests&quot; depends=&quot;build&quot;&gt;<br/>\n&gt;                &lt;echo&gt;Building unit tests&lt;/echo&gt;<br/>\n&gt;                &lt;mkdir dir=&quot;${build-test.dir}&quot;/&gt;<br/>\n&gt;                &lt;javac srcdir=&quot;${src-test.dir}&quot; destdir=&quot;${build-test.dir}&quot;<br/>\n&gt; classpathref=&quot;test-classpath&quot;/&gt;<br/>\n&gt;<br/>\n&gt;                &lt;echo&gt;Running unit tests&lt;/echo&gt;<br/>\n&gt;                &lt;mkdir dir=&quot;tmp/rawtestoutput&quot;/&gt;<br/>\n&gt;                &lt;junit printsummary=&quot;true&quot; failureproperty=&quot;junit.failure&quot;&gt;<br/>\n&gt;                        &lt;classpath&gt;<br/>\n&gt;                                &lt;path refid=&quot;test-classpath&quot;/&gt;<br/>\n&gt;                                &lt;path location=&quot;${basedir}&quot;/&gt;<br/>\n&gt;                        &lt;/classpath&gt;<br/>\n&gt;                        &lt;batchtest todir=&quot;tmp/rawtestoutput&quot;&gt;<br/>\n&gt;                                &lt;fileset dir=&quot;${build-test.dir}&quot;&gt;<br/>\n&gt;                                        &lt;include name=&quot;**/*Test*.class&quot; /&gt;<br/>\n&gt;                                        &lt;exclude name=&quot;Test.class&quot; /&gt;<br/>\n&gt;                                &lt;/fileset&gt;<br/>\n&gt;                                &lt;formatter type=&quot;xml&quot;/&gt;<br/>\n&gt;                        &lt;/batchtest&gt;<br/>\n&gt;                &lt;/junit&gt;<br/>\n&gt;                &lt;junitreport todir=&quot;tmp&quot;&gt;<br/>\n&gt;                        &lt;fileset dir=&quot;tmp/rawtestoutput&quot;/&gt;<br/>\n&gt;                        &lt;report todir=&quot;tmp/test-reports&quot;/&gt;<br/>\n&gt;                &lt;/junitreport&gt;<br/>\n&gt;                &lt;fail if=&quot;junit.failure&quot; message=&quot;Unit test(s) failed.  See reports!&quot;/&gt;<br/>\n&gt;        &lt;/target&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt;   Sampo Niskanen   &lt;=&gt;   <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.iki.fi/sampo.niskanen/\">http://www.iki.fi/sampo.niskanen/</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21947, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1254111187", 
    "canDelete": false, 
    "nextInTopic": 21952, 
    "prevInTopic": 21946, 
    "headers": {
        "inReplyToHeader": "PGJjYTJkOWVhMDkwOTI3MDUxOHY0MzFiZDMxOXU2NDBhYWRlZTQ2YWQzNmEyQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGE1MjdmZGRmMDkwOTI3MjExM3Y3NjM4NzlmN3M4ZDFiNDQwMWFhZTYyMjgwQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGJjYTJkOWVhMDkwOTI3MDUxOHY0MzFiZDMxOXU2NDBhYWRlZTQ2YWQzNmEyQG1haWwuZ21haWwuY29tPg=="
    }
}