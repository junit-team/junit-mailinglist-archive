{
    "numMessagesInTopic": 20, 
    "nextInTime": 15343, 
    "senderId": "B65FEhZQjayJwULIWWeQTEZsHlWYGwmcEPYFddOXV3xJw4LzczJ2oZK7gNb0k4nwt5M_WAdhp0RDvVW1gVfMllkf3nUPL5UCziGYeeYGoRMd_mKvym3JSw9_Rg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Private method throws an exception", 
    "from": "Andrew McDonagh &lt;yahoogroups@...&gt;", 
    "authorName": "Andrew McDonagh", 
    "msgSnippet": "... This Extract and Override mechanism is a great tool for finding and then exposing the seam into which we can inject new behavior (ala Mocks/Fakes). But", 
    "msgId": 15342, 
    "profile": "andy_ipaccess", 
    "topicId": 15264, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 234174584, 
    "messageBody": "<div id=\"ygrps-yiv-1837833780\">Mitch Christensen wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;In my case, I know exactly what the problem is.  The private method relies on external resources that are not available during unit testing (i.e. Torque/DBMS).<br/>\n&gt;<br/>\n&gt; <br/>\n&gt;<br/>\n&gt;My question was not how to find an unknown failure, but how to eliminate a known failure caused by an external dependency buried inside a private method.<br/>\n&gt;<br/>\n&gt; <br/>\n&gt;<br/>\n&gt;For public/protected method dependencies, I extend the class under test and override and simplify those methods.  Unfortunately, this doesnâ€™t work for private methods.<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n </span></blockquote>This &#39;Extract and Override&#39; mechanism is a great tool for finding and <br/>\nthen exposing the seam into which we can inject new behavior (ala <br/>\nMocks/Fakes). But you do want to be careful not to over use it, else <br/>\nyour code base will contain lots of large classes that area further <br/>\nextended all over the place just to fake something. <br/>\n<br/>\nWith legacy apps, its especially important when you a tree of 2 or more <br/>\nclasses, where the lowest encapsulated instance of a class uses some <br/>\nexternal resource that you need to substitute - you end up having to <br/>\nExtract and Over ride methods on each class just to inject into this <br/>\nlowest one.<br/>\n<br/>\ntestableTop --uses--&gt;testableMiddle--uses--&gt;testableBottom.<br/>\n<br/>\nThe legacy apps (IME) tend to couple classes like the trio above, rather <br/>\nthan use abstractions (Interfaces or Abstract Classes), where as with <br/>\nTDDed designs I tend to see each class being coupled to interfaces only <br/>\nand using IoC, DiJ, DiV etc techniques.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt;<br/>\n&gt;I think the answer is to refactor the private method to support some form of dependency injection so I can insert mock objects that eliminate the exception.<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n </span></blockquote>Agreed - though the you could also use dependency inversion - so instead <br/>\nof having a means injecting or having the class under test instantiate <br/>\nand/or use the external resource, you could change it so that it asks <br/>\nsomeone else (not one of its own instance factory methods) for an <br/>\ninstance - An AbstractFactory - production one does as is current, test <br/>\nabstract factory returns a fake.<br/>\n<br/>\nThis way, eve with the usual legacy coupling shown above, our Bottom <br/>\nclass can be safely (untested) refactored to use a singleton abstract <br/>\nFactory to return an object, rather than NEWing one itself.<br/>\n<br/>\nThen should this Bottom class be inadvertently used when testing any <br/>\nother class within the system, we have a simple and effective means of <br/>\ncontrolling it during testing.<br/>\n<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt;<br/>\n&gt;My question was whether they may be a better/more efficient approach?<br/>\n&gt;<br/>\n&gt; <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n </span></blockquote>different, rather than better/ more efficient design approaches.<br/>\nAndy<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt;Thanks again for your help.<br/>\n&gt;<br/>\n&gt;-Mitch<br/>\n&gt;<br/>\n&gt; <br/>\n&gt;  <br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 15341, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1130973941", 
    "canDelete": false, 
    "nextInTopic": 15353, 
    "prevInTopic": 15340, 
    "headers": {
        "inReplyToHeader": "PDIwMDUxMTAyMTUzMi5qQTJGV05ZbzAwNTE2N0BpLTE5NC0xMDYtNTYtMzMuZnJlZWRvbTJzdXJmLm5ldD4=", 
        "messageIdInHeader": "PDQzNjk0QUY1LjcwNjA5MDFAYW5kcmV3bWNkb25hZ2guZjJzLmNvbT4=", 
        "referencesHeader": "PDIwMDUxMTAyMTUzMi5qQTJGV05ZbzAwNTE2N0BpLTE5NC0xMDYtNTYtMzMuZnJlZWRvbTJzdXJmLm5ldD4="
    }
}