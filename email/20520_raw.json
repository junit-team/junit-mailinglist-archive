{
    "numMessagesInTopic": 21, 
    "nextInTime": 20521, 
    "senderId": "Xm2xI-q72mOnXmOD4QyA40fuASOrVV1Wif_10pgnmxicff4Vyz4lr4Eks7lfqiId_e9xuXoJNOvKb9QteOCZ4M7AatId2-qe3FDYbjbgxyA5", 
    "systemMessage": true, 
    "subject": "Re: [junit] Re: What is expected behavior on Assert.assertEquals on Number object?", 
    "from": "Nattapong Sirilappanich &lt;natta@...&gt;", 
    "authorName": "Nattapong Sirilappanich", 
    "msgSnippet": "Actually, my point here is i m expecting org.junit.Assert.assertEquals(Object obj1, Object obj2) to call its obj1.equals(obj2) or something like this. However,", 
    "msgId": 20520, 
    "rawEmail": "Return-Path: &lt;natta@...&gt;\r\nReceived: (qmail 74252 invoked from network); 6 Jun 2008 11:24:56 -0000\r\nReceived: from unknown (66.218.67.96)\n  by m50.grp.scd.yahoo.com with QMQP; 6 Jun 2008 11:24:56 -0000\r\nReceived: from unknown (HELO n24b.bullet.sp1.yahoo.com) (209.131.38.235)\n  by mta17.grp.scd.yahoo.com with SMTP; 6 Jun 2008 11:24:56 -0000\r\nReceived: from [216.252.122.219] by n24.bullet.sp1.yahoo.com with NNFMP; 06 Jun 2008 11:24:56 -0000\r\nReceived: from [209.73.164.86] by t4.bullet.sp1.yahoo.com with NNFMP; 06 Jun 2008 11:24:56 -0000\r\nReceived: from [66.218.66.88] by t8.bullet.scd.yahoo.com with NNFMP; 06 Jun 2008 11:24:56 -0000\r\nX-Sender: natta@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 28622 invoked from network); 6 Jun 2008 04:34:06 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m52.grp.scd.yahoo.com with QMQP; 6 Jun 2008 04:34:06 -0000\r\nX-Received: from unknown (HELO e23smtp04.au.ibm.com) (202.81.18.173)\n  by mta17.grp.scd.yahoo.com with SMTP; 6 Jun 2008 04:33:47 -0000\r\nX-Received: from sd0109e.au.ibm.com (d23rh905.au.ibm.com [202.81.18.225])\n\tby e23smtp04.au.ibm.com (8.13.1/8.13.1) with ESMTP id m564WtIf010033\n\tfor &lt;junit@yahoogroups.com&gt;; Fri, 6 Jun 2008 14:32:55 +1000\r\nX-Received: from d23av04.au.ibm.com (d23av04.au.ibm.com [9.190.235.139])\n\tby sd0109e.au.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m564bpXE290002\n\tfor &lt;junit@yahoogroups.com&gt;; Fri, 6 Jun 2008 14:37:51 +1000\r\nX-Received: from d23av04.au.ibm.com (loopback [127.0.0.1])\n\tby d23av04.au.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m564Xei3009336\n\tfor &lt;junit@yahoogroups.com&gt;; Fri, 6 Jun 2008 14:33:40 +1000\r\nX-Received: from d23m0130.th.ibm.com (thnco01.th.ibm.com [9.187.161.79])\n\tby d23av04.au.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m564XZ8a009222\n\tfor &lt;junit@yahoogroups.com&gt;; Fri, 6 Jun 2008 14:33:37 +1000\r\nIn-Reply-To: &lt;g29c4l+mgfo@...&gt;\r\nTo: junit@yahoogroups.com\r\nCc: Suwit Srivilairith &lt;suwits@...&gt;\r\nX-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006\r\nMessage-ID: &lt;OFF0F85730.9CF821E9-ON47257460.00187669-47257460.00190AF7@...&gt;\r\nDate: Fri, 6 Jun 2008 11:34:33 +0700\r\nX-MIMETrack: Serialize by Router on d23m0130/23/M/IBM(Release 7.0.2FP2HF300 | September\n 14, 2007) at 06/06/2008 11:34:37\r\nMIME-Version: 1.0\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Nattapong Sirilappanich &lt;natta@...&gt;\r\nSubject: Re: [junit] Re: What is expected behavior on Assert.assertEquals on Number\n object?\r\nX-Yahoo-Group-Post: member; u=348330670; y=zC_XvhfLFWV00UqrvlU_HRBCeGR93wzch2B01XrOqgS02Q\r\nX-Yahoo-Profile: nat_tul\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 06 Jun 2008 11:24:53 -0000\r\n\r\n\n\n\n\n\nActually, my point here is i&#39;m expecting\norg.junit.Assert.assertEquals(Object obj1, Object obj2) to call its\nobj1.equals(obj2) or something like this.\nHowever, the outcome surprise me.\nAssertion success but obj1.equals(obj2) return false.\n\nWhat&#39;s going on inside assertEquals() operation?\nIs this what it&#39;s suppose to be?\n\nBest regards,\nNattapong Sirilappanich\nEngineer, National Language Development - GCoC & TSC Thailand\nSoftware Group, IBM Thailand Co., Ltd.\nNational Phone: 02-273-4715, Fax: 02-619-2030\nInternational Phone: +66 2 273 4715, Fax: +66 2 619 2030\ne-mail: natta@...\n\n\n                                                                           \n             &quot;Roger Glover&quot;                                                \n             &lt;glover_roger@yah                                             \n             oo.com&gt;                                                    To \n             Sent by:                  junit@yahoogroups.com               \n             junit@yahoogroups                                          cc \n             .com                                                          \n                                                                   Subject \n                                       [junit] Re: What is expected        \n             06/06/2008 01:43          behavior on Assert.assertEquals on  \n                                       Number object?                      \n                                                                           \n             Please respond to                                             \n             junit@yahoogroups                                             \n                   .com                                                    \n                                                                           \n                                                                           \n\n\n\n\n                                                                                    \n                                                                                    \n                                                                                    \n                                                                                    \n                                                                                    \n                                                                                    \n --- In junit@yahoogroups.com, &quot;J. B. Rainsberger&quot; &lt;jbrains762@...&gt;                 \n wrote:                                                                             \n On Jun 3, 2008, at 22:41 , Nattapong Sirilappanich wrote:                          \n Hi,                                                                                \n                                                                                    \n When i try to make an assertion on Number object, e.g. Double the                  \n result always assertion successful. Even i try to compare by                       \n                                                                                    \n org.junit.Assert.assertEquals(123456789.345,123456789.34)                          \n                                                                                    \n it still success. (I&#39;m expecting failure)                                          \n This is not a good way to compare floating point numbers. You should               \n actually use:                                                                      \n                                                                                    \n Assert.assertEquals(expected, actual, delta)                                       \n                                                                                    \n where expected and actual are as in the form you did use, but there is a           \n third &quot;delta&quot; argument (also a double). This argument provides a                   \n tolerance value by which to judge &quot;equality&quot;. basically the assertion              \n fails if:                                                                          \n                                                                                    \n Math.abs(expected - actual) &gt; delta                                                \n                                                                                    \n Thus, working from your failing example:                                           \n                                                                                    \n Assert.assertEquals(123456789.345, 123456789.34, 0.5); // PASS                     \n Assert.assertEquals(123456789.345, 123456789.34, 0.0005); // FAIL                  \n                                                                                    \n By the way, this usage really makes the name of the method a misnomer.             \n It should really be called &quot;assertClose&quot; (as in &quot;close, but no cigar&quot;,             \n not &quot;close the door; it&#39;s cold&quot;). But that should be okay if you are               \n using double the way it is meant to be used, because, as the old saying            \n goes, close only counts in horseshoes, hand grenades, and limited                  \n precision floating point operations.                                               \n                                                                                    \n In other words, the idea is that after even a few operations (or even              \n after none in some cases) it is unreasonable to expect floating point              \n quantities to be exactly equal to their unlimited precision real number            \n counterparts (even when an exact match exists). So you aim for &quot;close&quot;             \n instead. &quot;How close can you get&quot; is itself a black art that combines               \n roughly equal portions of operation counting, number magnitude tracking,           \n operation order tracking, and wild-ass guessing.                                   \n                                                                                    \n Now back to the problem at hand. Just for grins I compiled Nattapong&#39;s             \n original assert under a J2SE 1.4 compiler and it gave a syntax error,              \n saying that essentially that the third double argument was missing. It             \n appears that this is one of those rare-but-not-rare-enough cases when              \n autoboxing is actually working against you.                                        \n                                                                                    \n And now J.B.&#39;s response...                                                         \n Weird. assertEquals() appears only to compare the whole parts.                     \n                                                                                    \n public class DoubleTest {                                                          \n @Test                                                                              \n public void unequalDoubleValueObjectsShouldBeUnequal() {                           \n Assert.assertFalse(new Double(3).equals(new Double(4)));                           \n Assert.assertFalse(new Double(3.1d).equals(new Double(3.2d)));                     \n Assert.assertFalse(new Double(123456789.345d).equals(new                           \n Double(123456789.34d)));                                                           \n So far so good...                                                                  \n Assert.assertEquals(new Double(123456789.345d), new                                \n Double(123456789.34d));                                                            \n When compiled under J2SE 1.4 the above assertEquals() fails. So, once              \n again, I suspect autoboxing is the culprit. In this case I suspect the             \n Doubles are being &quot;unboxed&quot; into longs, since there is a two-long                  \n assertEquals() but not a two-double assertEquals().                                \n Assert.assertEquals(new Double(3.1d), new Double(3.2d));                           \n Same with the above.                                                               \n Assert.assertEquals(new Double(3), new Double(4));                                 \n Same with the above, but if I am right this one fails (as J.B. noted)              \n because the                                                                        \n integral parts are different, so you get different longs.                          \n }                                                                                  \n }                                                                                  \n                                                                                    \n Only the last assertion fails.                                                     \n This behavior makes me wonder if in Nattapong&#39;s original case the                  \n primitive doubles are being boxed into object Doubles which are, in                \n turn, being unboxed into primitive longs. If that is not what is                   \n happening, something even stranger is going on. Either way, I don&#39;t like           \n it.                                                                                \n                                                                                    \n -- Roger Glover                                                                    \n Object Partners, Inc.                                                              \n                                                                                    \n [Non-text portions of this message have been removed]                              \n                                                                                    \n                                                                                    \n                                                                                    \n \n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "nat_tul", 
    "topicId": 20513, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 348330670, 
    "prevInTime": 20519, 
    "contentTrasformed": false, 
    "postDate": "1212726873", 
    "canDelete": false, 
    "nextInTopic": 20521, 
    "prevInTopic": 20519, 
    "headers": {
        "inReplyToHeader": "PGcyOWM0bCttZ2ZvQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PE9GRjBGODU3MzAuOUNGODIxRTktT040NzI1NzQ2MC4wMDE4NzY2OS00NzI1NzQ2MC4wMDE5MEFGN0B0aC5pYm0uY29tPg=="
    }
}