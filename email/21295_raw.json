{
    "numMessagesInTopic": 22, 
    "nextInTime": 21296, 
    "senderId": "6W2jFXqkg42X380gjkMOxvHIwUyIBiuwegQSYqusJdPWFqDx4IkkGs7l_kAAopuFK03hAgk4WRAAg-tjTu1P8ZkvKRY", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: Runner for non static inner class in JUnit 4.x", 
    "from": "&quot;kentb&quot; &lt;kentb@...&gt;", 
    "authorName": "kentb", 
    "msgSnippet": "Duh, you re right. I ll run it next time before opening my mouth in public. Thanks. Kent _____ From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On", 
    "msgId": 21295, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 19775 invoked from network); 15 Jan 2009 15:27:31 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m53.grp.scd.yahoo.com with QMQP; 15 Jan 2009 15:27:31 -0000\r\nX-Received: from unknown (HELO elasmtp-masked.atl.sa.earthlink.net) (209.86.89.68)\n  by mta15.grp.scd.yahoo.com with SMTP; 15 Jan 2009 15:27:31 -0000\r\nX-Received: from [71.210.2.125] (helo=kentspavilion)\n\tby elasmtp-masked.atl.sa.earthlink.net with esmtpa (Exim 4.67)\n\t(envelope-from &lt;kentb@...&gt;)\n\tid 1LNU80-0005Pe-L8\n\tfor junit@yahoogroups.com; Thu, 15 Jan 2009 10:27:30 -0500\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;822161AE16634CB9A6D08CF931FEE677@kentspavilion&gt; &lt;gkmram+v01o@...&gt;\r\nDate: Thu, 15 Jan 2009 07:27:19 -0800\r\nMessage-ID: &lt;6DAEE296DE554FF38F9670928F27CF54@kentspavilion&gt;\r\nMIME-Version: 1.0\r\nX-Mailer: Microsoft Office Outlook 11\r\nThread-Index: Acl26Wrq/wA9mnbaTgOaE8SY+w/M5QAPDcxA\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579\r\nIn-Reply-To: &lt;gkmram+v01o@...&gt;\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d478e6c433f677873d40117dfed867c86748db9e0889ce4f8b9d350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 2:2:2:0:1\r\nFrom: &quot;kentb&quot; &lt;kentb@...&gt;\r\nReply-To: &lt;kentb@...&gt;\r\nSubject: RE: [junit] Re: Runner for non static inner class in JUnit 4.x\r\nX-Yahoo-Group-Post: member; u=173198504; y=oBiz6_B43g8uNcxfoF5cRKrL35znvAD9jEoMG8nDrlyLuOqN\r\nX-Yahoo-Profile: kentlbeck\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nDuh, you&#39;re right. I&#39;ll run it next time before opening my mouth in public.\nThanks.\n \nKent\n\n  _____  \n\nFrom: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of\ntuomaskarkkainenri\nSent: Thursday, January 15, 2009 12:15 AM\nTo: junit@yahoogroups.com\nSubject: [junit] Re: Runner for non static inner class in JUnit 4.x\n\n\n\nKent,\n\nI am not sure what you mean.\n\nThe test I posted starts passing if my original patch is applied, or\nthe feature is implemented another way for example in AnnotatedBuilder.\n\nThe test below can however be made to pass without implementing the\nfeature completely. I am not sure if it is timely to write those\nother tests yet. Most prominently, the test doesn&#39;t check that the\nRunner is filtered with a proper method name filter. However the\nfiltering is likely to be a side effect of the most straightforward\nway of implementing the feature.\n\nBr,\nTuomas\n\n--- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, &quot;kentb&quot;\n&lt;kentb@...&gt; wrote:\n&gt;\n&gt; Tuomas,\n&gt; \n&gt; This is most of the way to what I was looking for. Can you take one more\n&gt; step and write a test which fails currently but would succeed if the\nfeature\n&gt; outlined below were present?\n&gt; \n&gt; Cheers,\n&gt; \n&gt; Kent Beck\n&gt; Three Rivers Institute\n&gt; \n&gt; _____ \n&gt; \n&gt; From: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com\n[mailto:junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com] On Behalf\nOf\n&gt; tuomaskarkkainenri\n&gt; Sent: Tuesday, January 06, 2009 2:52 PM\n&gt; To: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com\n&gt; Subject: [junit] Re: Runner for non static inner class in JUnit 4.x\n&gt; \n&gt; \n&gt; \n&gt; Kent,\n&gt; \n&gt; essentially:\n&gt; \n&gt; @Test\n&gt; public void findsRunnerFromDeclaringClass() {\n&gt; final Request request= Request.method(NonStaticInnerClass.class,\n&gt; &quot;methodName&quot;);\n&gt; Assert.assertThat(request.getRunner(), Is.is(FakeRunner.class));\n&gt; }\n&gt; \n&gt; @RunWith(FakeRunner.class)\n&gt; public static class DeclaringClass {\n&gt; \n&gt; public class NonStaticInnerClass {\n&gt; }\n&gt; }\n&gt; \n&gt; public static class FakeRunner extends Runner {\n&gt; public FakeRunner(final Class&lt;?&gt; testClass) {\n&gt; }\n&gt; \n&gt; @Override\n&gt; public Description getDescription() {\n&gt; return Description.EMPTY;\n&gt; }\n&gt; \n&gt; @Override\n&gt; public void run(final RunNotifier notifier) {\n&gt; }\n&gt; }\n&gt; \n&gt; as Eclipse enters JUnit4 from:\n&gt; org.eclipse.jdt.internal.junit4.runner.JUnit4TestMethodReference\n&gt; constructor with a call to: Request.method(clazz, methodName)\n&gt; \n&gt; best regards,\n&gt; tuomas\n&gt; \n&gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, &quot;kentb&quot;\n&gt; &lt;kentb@&gt; wrote:\n&gt; &gt;\n&gt; &gt; PMFBI, but another way to ask that question is: what is the first test\n&gt; you&#39;d\n&gt; &gt; like to see pass that doesn&#39;t yet pass?\n&gt; &gt;\n&gt; &gt; Cheers,\n&gt; &gt;\n&gt; &gt; Kent\n&gt; &gt;\n&gt; &gt; _____\n&gt; &gt;\n&gt; &gt; From: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com\n&gt; [mailto:junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com] On\nBehalf\n&gt; Of\n&gt; &gt; David Saff\n&gt; &gt; Sent: Tuesday, January 06, 2009 8:12 AM\n&gt; &gt; To: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com\n&gt; &gt; Subject: Re: [junit] Re: Runner for non static inner class in JUnit\n&gt; 4.x\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; On Tue, Jan 6, 2009 at 6:27 AM, tuomaskarkkainenri &lt;\n&gt; &gt; tuomaskarkkainenri@ &lt;mailto:tuomaskarkkainenri%40yahoo.com&gt; yahoo.com&gt;\n&gt; &gt; wrote:\n&gt; &gt;\n&gt; &gt; &gt; there are no hooks for JDave to\n&gt; &gt; &gt; attach to before the discovery of the runner.\n&gt; &gt;\n&gt; &gt; Let&#39;s push on that. What would be the ideal hook here?\n&gt; &gt;\n&gt; &gt; David Saff\n&gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; br,\n&gt; &gt; &gt; Tuomas\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com,\n&gt; &quot;David\n&gt; &gt; Saff&quot; david@ wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Do you think the overall ease of use to people who need this\n&gt; feature\n&gt; &gt; &gt; will be\n&gt; &gt; &gt; &gt; worth a 20% increase in complexity for everyone who needs to\n&gt; &gt; &gt; understand the\n&gt; &gt; &gt; &gt; default running rules?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; David Saff\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; On Wed, Dec 31, 2008 at 3:08 AM, tuomaskarkkainenri &lt;\n&gt; &gt; &gt; &gt; tuomaskarkkainenri@ wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; hey David,\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; i uploaded the patch as a file,\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; http://f1.grp.\n&gt; &gt;\n&gt; &lt;http://f1.grp.\n&gt;\n&lt;http://f1.grp.\n&lt;http://f1.grp.yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2Pq\n&gt; yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2Pq\n&gt; &gt; yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMT&#92;\n&gt; D2Pq\n&gt; &gt;\n&gt;\nfQBWFNQwiqbje7jxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstatici&#92;\n&gt; nner\n&gt; &gt; classes.patch&gt;\n&gt; &gt;\n&gt;\nyahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2PqfQBWFNQwiqb&#92;\n&gt; je7j\n&gt; &gt;\n&gt;\nxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstaticinnerclasses.pat&#92;\n&gt; ch\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; or if that link is relative to my session it&#39;s\n&gt; &gt; &gt; &gt; &gt; nonstaticinnerclasses.patch under files here in Yahoo Groups.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; in JUnit4 speak:\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; public class RegularJunit4 {\n&gt; &gt; &gt; &gt; &gt; public class NonStaticInnerClass {\n&gt; &gt; &gt; &gt; &gt; @Test\n&gt; &gt; &gt; &gt; &gt; public void testMethod() {\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; running testMethod() is not possible since NonStaticInnerClass\n&gt; cannot\n&gt; &gt; &gt; &gt; &gt; be instantiated from the outside.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; in JDave:\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; @RunWith(JDaveRunner.class)\n&gt; &gt; &gt; &gt; &gt; public static class ASpec extends Specification&lt;Void&gt; {\n&gt; &gt; &gt; &gt; &gt; public class AContext {\n&gt; &gt; &gt; &gt; &gt; public void aBehavior() {}\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; AContext is instantiated by SpecRunner which JDaveRunner\n&gt; delegates to.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; When I run this with current JUnit,\n&gt; &gt; &gt; &gt; &gt; AllDefaultPossibilitiesBuilder#runnerForClass(final Class&lt;?&gt;\n&gt; &gt; &gt; &gt; &gt; testClass) picks out the @RunWith annotation and uses that to\n&gt; run my\n&gt; &gt; &gt; &gt; &gt; spec(test class).\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; However if I want to run just a single behavior (test method)\n&gt; from\n&gt; &gt; &gt; &gt; &gt; this spec for example from Eclipse. Eclipse tells JUnit to run\n&gt; class\n&gt; &gt; &gt; &gt; &gt; ASpec.AContext and method aBehavior JUnit then sees what builder\n&gt; it\n&gt; &gt; &gt; &gt; &gt; should use for AContext, and doesn&#39;t find the annotation there\n&gt; and\n&gt; &gt; &gt; &gt; &gt; tries to use the regular JUnit4 builder and since it&#39;s a JDave\n&gt; spec it\n&gt; &gt; &gt; &gt; &gt; fails to run.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; What I want to do is: in case AllDefaultPossibilitiesBuilder\n&gt; notices\n&gt; &gt; &gt; &gt; &gt; that the TestClass is a non-static member class, which it has no\n&gt; &gt; &gt; &gt; &gt; chance of being able run anyway, it checks whether the declaring\n&gt; class\n&gt; &gt; &gt; &gt; &gt; of the testclass would be able to run it instead.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; In the case of JDave, the declaring class would have the\n&gt; @RunWith\n&gt; &gt; &gt; &gt; &gt; annotation, and with the Filter created by FilterRequest, JDave\n&gt; can\n&gt; &gt; &gt; &gt; &gt; then choose which Context and Spec it should actually allow to\n&gt; run.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; br,\n&gt; &gt; &gt; &gt; &gt; Tuomas\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com,\n&gt; &quot;David\n&gt; &gt; Saff&quot; &lt;david@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; JDave is cool. I&#39;m not 100% clear what you want to do, and I\n&gt; don&#39;t\n&gt; &gt; &gt; &gt; &gt; see the\n&gt; &gt; &gt; &gt; &gt; &gt; patch. Could you perhaps include a small test case as inline\n&gt; text?\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; David Saff\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; On Tue, Dec 30, 2008 at 10:27 AM, tuomaskarkkainenri &lt;\n&gt; &gt; &gt; &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; I participate in JDave (http://jdave. &lt;http://jdave.\n&gt; &lt;http://jdave. &lt;http://jdave.org&gt; org&gt; org&gt;\n&gt; org). A\n&gt; &gt; BDD framework\n&gt; &gt; &gt; for Java\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; that takes advantage of JUnit for example for Eclipse\n&gt; integration.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; We have tests in non-static inner classes of our test\n&gt; classes.\n&gt; &gt; &gt; These\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; run wonderfully using the @RunWith annotation and our own\n&gt; runner.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; however, for individual tests, this doesn&#39;t work. What I\n&gt; would\n&gt; &gt; &gt; like\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; to do is that AllDefaultPossibilitiesBuilder would check\n&gt; &gt; &gt; whether or\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; not the test class is a non static member class. if it is,\n&gt; then I\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; would grab the runner of the declaring class instead.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; I made a patch implementing this. I will try to attach it.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt;\n&gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt;\n&gt; \n&gt; [Non-text portions of this message have been removed]\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; [Non-text portions of this message have been removed]\n&gt;\n\n\n\n \n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 21238, 
    "spamInfo": {
        "reason": "2", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 21294, 
    "contentTrasformed": false, 
    "postDate": "1232033239", 
    "canDelete": false, 
    "nextInTopic": 21336, 
    "prevInTopic": 21291, 
    "headers": {
        "inReplyToHeader": "PGdrbXJhbSt2MDFvQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDZEQUVFMjk2REU1NTRGRjM4Rjk2NzA5MjhGMjdDRjU0QGtlbnRzcGF2aWxpb24+", 
        "referencesHeader": "PDgyMjE2MUFFMTY2MzRDQjlBNkQwOENGOTMxRkVFNjc3QGtlbnRzcGF2aWxpb24+IDxna21yYW0rdjAxb0BlR3JvdXBzLmNvbT4="
    }
}