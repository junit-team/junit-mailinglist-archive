{
    "numMessagesInTopic": 5, 
    "nextInTime": 15367, 
    "senderId": "5FrmrIKItzD1Sx875CGf7Z9-OySUSjE-I1NMn2pqLnLQZnvI9IGVssbyXKZShXrCKJBh4nKCXH2UTloZ4LE8w9d637iyXSswkGlafc40GAU", 
    "systemMessage": false, 
    "subject": "Running Only Testable classes with Ant/JUnit task", 
    "from": "&quot;cliftonccraig&quot; &lt;cliftonccraig@...&gt;", 
    "authorName": "cliftonccraig", 
    "msgSnippet": "Hello, This may sound like more of a novice question but I need to know what the best practice is for running all of my tests and ONLY my testable classes with", 
    "msgId": 15366, 
    "rawEmail": "Return-Path: &lt;cliftonccraig@...&gt;\r\nX-Sender: cliftonccraig@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 93694 invoked from network); 7 Nov 2005 20:05:18 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m27.grp.scd.yahoo.com with QMQP; 7 Nov 2005 20:05:18 -0000\r\nReceived: from unknown (HELO n5a.bulk.scd.yahoo.com) (66.94.237.39)\n  by mta3.grp.scd.yahoo.com with SMTP; 7 Nov 2005 20:05:17 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.66.59] by n5.bulk.scd.yahoo.com with NNFMP; 07 Nov 2005 20:03:00 -0000\r\nReceived: from [66.218.66.70] by mailer8.bulk.scd.yahoo.com with NNFMP; 07 Nov 2005 20:02:59 -0000\r\nDate: Mon, 07 Nov 2005 20:02:59 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;dkobtj+7acg@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;cliftonccraig&quot; &lt;cliftonccraig@...&gt;\r\nSubject: Running Only Testable classes with Ant/JUnit task\r\nX-Yahoo-Group-Post: member; u=190580959; y=nzXYZkh5PqHzK5tp9S83MOiuG4FDLHW3jDcThivOWQI1PKcwzVmFHQ\r\nX-Yahoo-Profile: cliftonccraig\r\n\r\nHello,\n\nThis may sound like more of a novice question but I need to know wh=\r\nat\nthe best practice is for running all of my tests and ONLY my testable\ncl=\r\nasses with the Ant Junit task. What I mean is this. I tried using\nthe batch=\r\ntest task which is severely limited. It only does a directory\nscan over my =\r\ntest source to pick up the test classes. The problem is\nsometimes I may inc=\r\nlude abstract classes under that umbrella for\nconveniece methods and they g=\r\net picked up too. Also there is no\ngarauntee that the source and class file=\r\ns will be one for one. (Eg.\nnested classes would go unnoticed as well as so=\r\nurce files that\ndon&#39;t/can&#39;t compile to a equivalent named class.) I would f=\r\neel alot\nbetter if I could filter the .class files instead of the source an=\r\nd\npull out only the classes that are TESTABLE. That is, classes that\nbegin =\r\nor end with &quot;Test&quot; and have at least one public no-arg method\nbeginning wit=\r\nh &quot;test&quot;. \n\nSo I plugged in DirectorySuiteBuilder from the junit addons pro=\r\nject\nand added some custom code to accomplish this. My custom code, a class=\r\n\nnamed DirectoryScannerSuiteBuilder, is included below. The problem\nwith th=\r\nat approach, while it is a lot more  accurate, is that the\njunitreport task=\r\n now lumps all tests under my custom\nDirectoryScannerSuiteBuilder class nam=\r\ne without separating out the\ndetail. So my question is what would the best =\r\napproach be? Should I\nstop being anal and just go with the batchtest approa=\r\nch and stop\nincluding abstracts under the test source directory? (Incedenta=\r\nlly\nthat&#39;s what I&#39;m resoting to now.) Or is there a more elaborate\nsolution=\r\n sort of like a best of breed between the two approaches I&#39;ve\ntried so far?=\r\n\n\nThanx in advance,\nCliff\n\nMy Code below:\n\npackage com.ice.junit.ext;\n\nimpo=\r\nrt junit.framework.Test;\nimport junit.framework.TestSuite;\nimport junitx.ut=\r\nil.DirectorySuiteBuilder;\nimport junitx.util.TestFilter;\n\nimport java.io.Fi=\r\nle;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Modifier;\nimp=\r\nort java.util.Properties;\n\n/**\n * Created by IntelliJ IDEA.\n * User: Clifto=\r\nnCraig\n * Date: Nov 5, 2004\n * Time: 8:02:36 AM\n * Copywright Nov 5, 2004\n =\r\n*/\npublic class DirectoryScannerSuiteBuilder extends TestSuite\n{\n    static=\r\n Properties props;\n    public static final String KEY_TESTS_DIR =3D &quot;tests.=\r\ndir&quot;;\n    static boolean debug;\n    public static final String KEY_SELECTOR=\r\n_DEBUG =3D &quot;selector.debug&quot;;\n\n    public static Properties getProps()\n    {=\r\n\n        if(null=3D=3Dprops) props =3D System.getProperties();\n        retu=\r\nrn props;\n    }\n\n    public DirectoryScannerSuiteBuilder()\n    {\n    }\n\n   =\r\n public String getName()\n    {\n        return &quot;All Tests&quot;;\n    }\n\n    priva=\r\nte static void setDebug()\n    {\n        if(props.containsKey(KEY_SELECTOR_D=\r\nEBUG))\n        {\n            final String debugProp =3D\nprops.getProperty(K=\r\nEY_SELECTOR_DEBUG);\n            try\n            {\n                debug =3D=\r\n stringAsBooleanValue(debugProp);\n            }\n            catch(IllegalAr=\r\ngumentException e)\n            {\n                throw new IllegalArgumentE=\r\nxception(KEY_SELECTOR_DEBUG\n+ &quot; is set to a non boolean value &quot; + debugProp=\r\n);\n            }\n        }\n    }\n\n    private static boolean stringAsBoolea=\r\nnValue(final String str){\n        if(str.equalsIgnoreCase(&quot;yes&quot;) || str.equ=\r\nalsIgnoreCase(&quot;true&quot;)\n                || str.equalsIgnoreCase(&quot;on&quot;)) return=\r\n true;\n        else if(str.equalsIgnoreCase(&quot;no&quot;) ||\nstr.equalsIgnoreCase(&quot;=\r\nfalse&quot;)\n                || str.equalsIgnoreCase(&quot;off&quot;)) return false;\n     =\r\n   else throw new IllegalArgumentException(&quot;Invalid boolean value\n&quot; + str);=\r\n\n    }\n\n    public static void setProps(Properties props)\n    {\n        Dir=\r\nectoryScannerSuiteBuilder.props =3D props;\n    }\n\n    public static Test su=\r\nite()\n    {\n        File dir =3D new File(getProps().getProperty(KEY_TESTS_=\r\nDIR));\n        setDebug();\n        debug(&quot;Running tests in &quot; + dir);\n      =\r\n  try\n        {\n            final Test suite =3D new DirectorySuiteBuilder(=\r\n\n                                new TestFilter()\n                         =\r\n       {\n                                    public boolean include(Class a=\r\nClass)\n                                    {\n                              =\r\n          final boolean include =3D\nfalse=3D=3DModifier.isAbstract(aClass.g=\r\netModifiers()) &&\nhasTestableMethods(aClass);\n                             =\r\n           if(! include) {\n                                            debu=\r\ng(&quot;Rejecting &quot; +\naClass.getName());\n                                       =\r\n }\n                                        return include;\n                =\r\n                    }\n\n                                    public boolean i=\r\nnclude(String\nclassName)\n                                    {\n            =\r\n                            String name =3D\nclassName.substring(className.l=\r\nastIndexOf(File.separatorChar) +\n1).toLowerCase();\n                        =\r\n                final boolean include =3D\nname.startsWith(&quot;test&quot;) || name.e=\r\nndsWith(&quot;test&quot;);\n                                        if(! include)\n    =\r\n                                        debug(&quot;Rejecting &quot; +\nclassName);\n  =\r\n                                      return include;\n                     =\r\n               }\n                                }\n                        =\r\n).suite(dir);\n            debug(&quot;Found &quot; + suite.countTestCases() + &quot; test =\r\ncases.&quot;);\n            ((TestSuite) suite).setName(&quot;All Tests&quot;);\n           =\r\n return suite;\n        }\n        catch(Exception e)\n        {\n            t=\r\nhrow new RuntimeException(&quot;Could not build test suite.&quot;,e);\n        }\n    }=\r\n\n\n    private static void debug(final String msg){\n        if(debug) System=\r\n.out.println(msg);\n    }\n\n    private static boolean hasTestableMethods(Cla=\r\nss aClass)\n    {\n        Method[] methods =3D aClass.getDeclaredMethods();\n=\r\n        for(int i =3D 0; i &lt; methods.length; i++)\n        {\n            if(=\r\n methods[i].getName().startsWith(&quot;test&quot;)\n                && 0=3D=3Dmethods[=\r\ni].getParameterTypes().length\n                && Modifier.isPublic(methods[=\r\ni].getModifiers()) )\nreturn true;\n        }\n        return false;\n    }\n}\n\n=\r\n\n\n\n", 
    "profile": "cliftonccraig", 
    "topicId": 15366, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190580959, 
    "prevInTime": 15365, 
    "contentTrasformed": false, 
    "postDate": "1131393779", 
    "canDelete": false, 
    "nextInTopic": 15374, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGRrb2J0ais3YWNnQGVHcm91cHMuY29tPg=="
    }
}