{
    "topicId": 1308, 
    "postDate": "991407089", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Mike Clark &lt;mike@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "0FiETmyoygZcbRE_jfy9qz6BafV9i77-0rxTmLC3U17Jp75D4C_gp230Og4CFz4JEnk9LAKden9HYDkYv57Y5EOwLNUspQ", 
    "nextInTime": 1366, 
    "userId": 0, 
    "prevInTime": 1364, 
    "prevInTopic": 1364, 
    "headers": {
        "messageIdInHeader": "PDNCMTdBQkYxLjYwMTAzMDZAY2xhcmt3YXJlLmNvbT4=", 
        "referencesHeader": "PDI5Qzg0Q0YyNUQwM0Q1MTE5RkNGMDA5MDI3QjY3QjVBNzQwNzZDQEVYQ0hBTkdFMT4="
    }, 
    "authorName": "Mike Clark", 
    "numMessagesInTopic": 17, 
    "msgSnippet": "Just an observation, but it seems that option 6 could be achieved simply by placing the mock classes in a separate, but parallel, package directory structure", 
    "contentTrasformed": false, 
    "msgId": 1365, 
    "nextInTopic": 1366, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;mike@...&gt;\r\nX-Sender: mike@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_1_3); 1 Jun 2001 14:52:15 -0000\r\nReceived: (qmail 8581 invoked from network); 1 Jun 2001 14:51:34 -0000\r\nReceived: from unknown (10.1.10.26) by l8.egroups.com with QMQP; 1 Jun 2001 14:51:34 -0000\r\nReceived: from unknown (HELO dodo.mail.pas.earthlink.net) (207.217.120.99) by mta1 with SMTP; 1 Jun 2001 14:51:34 -0000\r\nReceived: from clarkware.com (dialup-64.156.34.166.Dial1.Denver1.Level3.net [64.156.34.166]) by dodo.mail.pas.earthlink.net (8.9.3/8.9.3) with ESMTP id HAA19347 for &lt;junit@yahoogroups.com&gt;; Fri, 1 Jun 2001 07:51:50 -0700 (PDT)\r\nMessage-ID: &lt;3B17ABF1.6010306@...&gt;\r\nDate: Fri, 01 Jun 2001 08:51:29 -0600\r\nOrganization: Clarkware Consulting\r\nUser-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US; m18) Gecko/20010131 Netscape6/6.01\r\nX-Accept-Language: en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] Method Chains, was Re: Testing private methods\r\nReferences: &lt;29C84CF25D03D5119FCF009027B67B5A74076C@EXCHANGE1&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Mike Clark &lt;mike@...&gt;\r\n\r\nJust an observation, but it seems that option 6 could be achieved simply \nby placing the mock classes in a separate, but parallel, package \ndirectory structure as the &quot;real&quot; classes and then placing the mock \ndirectory structure ahead of the real directory structure in the CLASSPATH.\n\nFor example...\n\n   /projects/src/com/xyz/\n   /projects/src/mock/com/xyz/\n\nCLASSPATH=/projects/src/mock:/projects/src\n\n From the perspective of the classloader, the mock objects *are* the \nreal objects.\n\nMike\n\n-- \nMike Clark\nClarkware Consulting, Inc.\nCustom Software Architecture, Design,\nDevelopment, and Performance Consulting\nhttp://www.clarkware.com\n\nMatt Caswell wrote:\n\n&gt; Very interesting. It seems to me that you could use 1-5 in certain\n&gt; circumstances. However I think I would be reluctant to change the way my\n&gt; code was implemented just so that I could test it, as some of the other\n&gt; posts on this topic have suggested you should do. Option 6 looks like it\n&gt; could have a lot of potential - I would think it would work in almost all\n&gt; scenarios without requiring that you write your implementation code in a\n&gt; specifc way. I agree - it definately looks like a fun thing to try and do!\n&gt; \n&gt; Matt\n&gt; \n&gt; -----Original Message-----\n&gt; From: ghouston@...\n&gt; To: junit@yahoogroups.com\n&gt; Sent: 01/06/01 14:41\n&gt; Subject: [junit] Method Chains, was Re: Testing private methods\n&gt; \n&gt; \n&gt; There are several was to get Mock objects into your production code:\n&gt; \n&gt; 1. Parameters \n&gt; \n&gt; As Mr Freeman shows, you use parameters to pass the Mock into the \n&gt; class that calls it.\n&gt; \n&gt; 2 Reflection\n&gt; \n&gt; If B is referenced in a field of A, you can use reflection to modify \n&gt; A and replace B with it&#39;s Mock.\n&gt; \n&gt; 3 Mole Pattern\n&gt; \n&gt; Subclass A, and use the subclass to setup the Mock.  [I call this \n&gt; design the &quot;Mole Pattern&quot;]\n&gt; \n&gt; 4 Strategy Pattern\n&gt; \n&gt; Use a Strategy design pattern.\n&gt; \n&gt; 5 Dynamic Proxy\n&gt; \n&gt; If the B is an implementation of an Interface, you can use a Dynamic \n&gt; Proxy (new feature of Java 1.3b).  The Mock would be an \n&gt; InvocationHandler, instead of a twin of B.\n&gt; \n&gt; 6 Classloader\n&gt; \n&gt; Use a classloader to load the Mock instead of the real class.\n&gt; \n&gt; ---\n&gt; \n&gt; There may be other options, but these are the ones I&#39;ve heard of.  \n&gt; Personally, I&#39;ve used everything except #6.  Options #1 (parameters) \n&gt; and #2 (reflection) are my favorites.  They are usually the easiest \n&gt; to implement and understand.  For #2, I&#39;ve used the \n&gt; PrivilegedAccessor.java [posted by Mr DiIorio] to make the reflection \n&gt; work simple.\n&gt; \n&gt; I&#39;ve never seen anyone use #6 (classloaders), I think it would be fun \n&gt; to try.\n&gt; \n&gt; - Greg\n&gt; \n&gt; \n&gt; --- In junit@y..., &quot;Steve Freeman&quot; &lt;steve@m...&gt; wrote:\n&gt; \n&gt;&gt; RE: Method Chains, was Re: Testing private methodsAlternatively, \n&gt;&gt; change from:\n&gt;&gt; \n&gt;&gt; public class A {\n&gt;&gt;   public void f() {\n&gt;&gt;     b = new B();\n&gt;&gt;     b.doSomething();\n&gt;&gt;   }\n&gt;&gt; }\n&gt;&gt; \n&gt;&gt; to:\n&gt;&gt; \n&gt;&gt; public class A {\n&gt;&gt;   public void f(B b) {\n&gt;&gt;     b.doSomething(aValue());\n&gt;&gt;   }\n&gt;&gt; }\n&gt;&gt; \n&gt;&gt; The test then becomes:\n&gt;&gt; \n&gt;&gt; public class TestA {\n&gt;&gt;   public void testF() {\n&gt;&gt;     A anA = new A(aValue);\n&gt;&gt;     MockB mockB = new MockB();\n&gt;&gt;     mockB.setExpectedSomething(aValue);\n&gt;&gt; \n&gt;&gt;     a.f(mockB);\n&gt;&gt; \n&gt;&gt;     mockB.verify();\n&gt;&gt;   }\n&gt;&gt; }\n&gt;&gt; \n&gt;&gt; We have found that changing to a style where you pass behaviours \n&gt; \n&gt; around, rather than data, avoids things like subclassing production \n&gt; code in a test and pushes the code to flexing in the &#39;right&#39; kinda \n&gt; ways. If you can figure out what to pass in and what to verify, then \n&gt; the rest of the test usually falls out.\n&gt; \n&gt;&gt; Steve\n&gt; \n&gt; \n&gt; \n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;  \n&gt; \n&gt; Your use of Yahoo! Groups is subject to\n&gt; http://docs.yahoo.com/info/terms/ \n&gt; \n&gt; \n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;  \n&gt; \n&gt; Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ \n\n\n", 
    "subject": "Re: [junit] Method Chains, was Re: Testing private methods"
}