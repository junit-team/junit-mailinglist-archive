{
    "numMessagesInTopic": 5, 
    "nextInTime": 21575, 
    "senderId": "lVvaQ8PbsFKM4VS-4bYdU1sX5ocj3l_cBNkDHpaBMAVZ4hoEDUPv4V87n94P2PMmNM5JnKPno_Sfp5PdfiglRLPU_yQWaA88f1A", 
    "systemMessage": false, 
    "subject": "Re: [junit] ClassNotFoundException, sometimes", 
    "from": "James Abley &lt;james.abley@...&gt;", 
    "authorName": "James Abley", 
    "msgSnippet": "... Try the verbose and debug output mode of ant to see if you get more information?", 
    "msgId": 21574, 
    "profile": "taboozizi", 
    "topicId": 21571, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 212683928, 
    "messageBody": "<div id=\"ygrps-yiv-360667895\">2009/5/6 David Rush &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a>&gt;:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt;<br/>\n&gt; David:<br/>\n&gt;<br/>\n&gt; I created Foo.java, which simply has a main method that creates an exception<br/>\n&gt; object from the 3rd-party library and prints it out:<br/>\n&gt;<br/>\n&gt; import com.esri.sde.sdk.client.*;<br/>\n&gt; public class Foo {<br/>\n&gt; public static void main(String[] args) {<br/>\n&gt; System.out.println(&quot;Foo&quot;);<br/>\n&gt; SeException ex = new SeWarningException(&quot;Testing&quot;);<br/>\n&gt; System.out.println(&quot;ex = &quot;+ex);<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; and a foo task in my build.xml<br/>\n&gt;<br/>\n&gt; &lt;target name=&quot;foo&quot; depends=&quot;compile&quot;&gt;<br/>\n&gt; &lt;java classname=&quot;Foo&quot; classpathref=&quot;test.classpath&quot; /&gt;<br/>\n&gt; &lt;/target&gt;<br/>\n&gt;<br/>\n&gt; It does not exhibit the puzzling behavior. I can run &quot;ant foo&quot; multiple<br/>\n&gt; times in succession without problems. I added &quot;compile.tests&quot; to &quot;depends&quot;<br/>\n&gt; in the foo task, and it makes no difference (I can still run foo multiple<br/>\n&gt; times in a row without problems).<br/>\n&gt;<br/>\n&gt; If I do this from the command line:<br/>\n&gt; ant clean<br/>\n&gt; ant test<br/>\n&gt; ant test<br/>\n&gt;<br/>\n&gt; I get a failure on the 2nd &quot;ant test&quot;.<br/>\n&gt; If I do this:<br/>\n&gt; ant clean<br/>\n&gt; ant foo<br/>\n&gt; ant test<br/>\n&gt; ant foo<br/>\n&gt;<br/>\n&gt; I get a failure on the &quot;ant test&quot; (ant compile and both runs of ant foo work<br/>\n&gt; fine).<br/>\n&gt;<br/>\n&gt; compile.tests is this:<br/>\n&gt;<br/>\n&gt; &lt;target name=&quot;compile.tests&quot; depends=&quot;compile&quot;&gt;<br/>\n&gt; &lt;mkdir dir=&quot;build/classes&quot; /&gt;<br/>\n&gt; &lt;javac<br/>\n&gt; srcdir=&quot;src_tests&quot;<br/>\n&gt; destdir=&quot;build/classes&quot;<br/>\n&gt; classpathref=&quot;test.classpath&quot;<br/>\n&gt; debug=&quot;on&quot; debuglevel=&quot;lines,vars,source&quot;<br/>\n&gt; deprecation=&quot;yes&quot;<br/>\n&gt;&gt;<br/>\n&gt; &lt;!--<br/>\n&gt; &lt;compilerarg value=&quot;-Xlint:all&quot;/&gt;<br/>\n&gt; --&gt;<br/>\n&gt; &lt;compilerarg value=&quot;-Xmaxerrs&quot;/&gt; &lt;compilerarg value=&quot;${error_count.max}&quot;/&gt;<br/>\n&gt; &lt;compilerarg value=&quot;-Xmaxwarns&quot;/&gt; &lt;compilerarg<br/>\n&gt; value=&quot;${warning_count.max}&quot;/&gt;<br/>\n&gt; &lt;compilerarg value=&quot;-version&quot;/&gt;<br/>\n&gt; &lt;/javac&gt;<br/>\n&gt; &lt;/target&gt;<br/>\n&gt;<br/>\n&gt; David<br/>\n<br/>\n </span></blockquote>Try the verbose and debug output mode of ant to see if you get more information?<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt;<br/>\n&gt; David Saff wrote:<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; I&#39;d be suspicious of what &quot;compile.tests&quot; is doing. If you create a<br/>\n&gt;&gt; short main() class that depends on the class in question, and an ant<br/>\n&gt;&gt; target that runs it, do you see the same behavior?<br/>\n&gt;&gt;<br/>\n&gt;&gt; David Saff<br/>\n&gt;&gt;<br/>\n&gt;&gt; On Tue, May 5, 2009 at 4:27 PM, David Rush &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a><br/>\n&gt;&gt; &lt;mailto:david%40rushtone.com&gt;&gt; wrote:<br/>\n&gt;&gt;&gt; I&#39;m working on setting up some junit test cases for an application<br/>\n&gt;&gt; that&#39;s been around a while. I have some tests running via ant, but I<br/>\n&gt;&gt; have a strange situation.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; When use &quot;ant clean&quot; to delete all the compiled classes, then &quot;ant<br/>\n&gt;&gt; test&quot; (which depends on the compile task, so it&#39;ll compile before it<br/>\n&gt;&gt; runs the tests) to run the junit tests (via the junit ant task), it<br/>\n&gt;&gt; works fine. The code compiles and the junit tests work.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; However, if I immediately run &quot;ant test&quot; to re-run the junit tests, it<br/>\n&gt;&gt; fails with a NoClassDefFoundError, complaining about not being able to<br/>\n&gt;&gt; find a particular class in a 3rd-party library I&#39;m using. The correct<br/>\n&gt;&gt; .jar file for the library is in the classpath.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; If I do &quot;ant clean&quot;, then &quot;ant test&quot; it works.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; Any ideas?<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; Here&#39;s the &quot;test&quot; snippet from my ant script:<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; &lt;target name=&quot;test&quot; depends=&quot;compile.tests&quot; description=&quot;Runs JUnit<br/>\n&gt;&gt; tests&quot;&gt;<br/>\n&gt;&gt;&gt; &lt;junit printsummary=&quot;false&quot; haltonfailure=&quot;true&quot; showoutput=&quot;true&quot;&gt;<br/>\n&gt;&gt;&gt; &lt;classpath refid=&quot;test.classpath&quot;/&gt;<br/>\n&gt;&gt;&gt; &lt;formatter type=&quot;brief&quot; usefile=&quot;false&quot;/&gt;<br/>\n&gt;&gt;&gt; &lt;batchtest&gt;<br/>\n&gt;&gt;&gt; &lt;fileset dir=&quot;build/classes&quot; includes=&quot;**/*.class&quot;/&gt;<br/>\n&gt;&gt;&gt; &lt;/batchtest&gt;<br/>\n&gt;&gt;&gt; &lt;/junit&gt;<br/>\n&gt;&gt;&gt; &lt;/target&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; David<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; ------------------------------------<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; Yahoo! Groups Links<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21573, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1241702663", 
    "canDelete": false, 
    "nextInTopic": 21576, 
    "prevInTopic": 21573, 
    "headers": {
        "inReplyToHeader": "PDRBMDFEMzIzLjUwNDAyMDVAcnVzaHRvbmUuY29tPg==", 
        "messageIdInHeader": "PDIzZmNlOGU2MDkwNTA3MDYyNG02MzQ1OTAyMXVmYzMwZDIyNWE1MjY3MmI5QG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDRBMDBBMTRDLjUwNjAzMDZAcnVzaHRvbmUuY29tPgkgPDRmN2RhNmI5MDkwNTA2MDYyMGs1OWQ0MWRjNXAxZWIyOWMyMjlkZTc0ZGEzQG1haWwuZ21haWwuY29tPgkgPDRBMDFEMzIzLjUwNDAyMDVAcnVzaHRvbmUuY29tPg=="
    }
}