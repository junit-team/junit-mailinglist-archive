{
    "numMessagesInTopic": 12, 
    "nextInTime": 18552, 
    "senderId": "BuKuraY01zDZce7DkkXWjImnx118P8FhRI36sDHrWgQUAzVwEWWv_Whm_x63lzGEWa1CTGx9GsRzTag40vTu5jnDki3upoOeEtYGWzr8Weg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Test a remote server", 
    "from": "Stephen Smith &lt;steve@...&gt;", 
    "authorName": "Stephen Smith", 
    "msgSnippet": "Hi Avinash, Andrew has given an excellent analysis of your problem. It should be relatively easy to write a TestCase for the below class without having to", 
    "msgId": 18551, 
    "topicId": 18546, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 231973488, 
    "messageBody": "<div id=\"ygrps-yiv-331997939\">Hi Avinash,<br/>\n<br/>\nAndrew has given an excellent analysis of your problem. It should be <br/>\nrelatively easy to write a TestCase for the below class without having <br/>\nto worry about JNI, CORBA, or any XML-based configuration.<br/>\n<br/>\nWorking solely from the example you&#39;ve given below (and resisting the <br/>\ntemptation to discuss refactoring the class to make it more testable <br/>\n_before_ writing a test case) I can see a whole host of TestCase <br/>\ncandidates here, such as:<br/>\n<br/>\n01. testMainWithServerConfigParametersCreatesReadyServer - by directly <br/>\ncalling Server#main(String []) and using Assert#assertTrue on <br/>\nServer#isServerReady (or similar) we would be able to test if server <br/>\nconfiguration is successful. Such a test would also help by design by <br/>\nmaking us ask questions along the lines of &quot;What constitutes a ready <br/>\nserver? Configured correctly? Started?&quot;<br/>\n<br/>\n02. testGetInstanceAlwaysReturnsSameInstance - by using <br/>\nAssert#assertSame we can check that the Singleton design pattern is <br/>\nbeing enforced correctly. I&#39;m sorely tempted to suggest binning the <br/>\nSingleton pattern (is &quot;only one connection to the server at any one <br/>\ntime&quot; an explicit intention?), but refactoring before we&#39;ve finished our <br/>\nTestCase would be a bit naughty.<br/>\n<br/>\n03. testIsServerStarted/testIsServerStopped - these are <br/>\nself-explanatory, although they do bring us back to the question of <br/>\nready vs. started again.<br/>\n<br/>\nOne strategy that would be very helpful here would be mocking - there <br/>\nare plenty of articles online related to mocking in JUnit, and some <br/>\npretty good books as well.<br/>\n<br/>\nCheers,<br/>\n<br/>\nSteve.<br/>\n<br/>\n--<br/>\nStephen Smith, MEng (Wales).<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.stephen-smith.co.uk/\">http://www.stephen-smith.co.uk/</a><br/>\n<br/>\navinash anand wrote:<br/>\n<blockquote><span title=\"qreply\"> &gt; <br/>\n&gt; <br/>\n&gt; Hi<br/>\n&gt; Posting the real .java file would not be possible for me but I am <br/>\n&gt; writting a sample java file which will be doing the same (You can say <br/>\n&gt; its a prototype of it.)<br/>\n&gt; <br/>\n&gt; class server{<br/>\n&gt; private DBConnection _dbconnectoin;<br/>\n&gt; private server _serverinstance = null;<br/>\n&gt; private static VespAlarmService _alarmService;<br/>\n&gt; private static VespUuid _serverUUID;<br/>\n&gt; private server(){<br/>\n&gt; _alarmService = VespAlarmServiceImpl.getInstance();<br/>\n&gt; }<br/>\n&gt; public static server getInstance(){<br/>\n&gt; if (null == _servernstance){<br/>\n&gt; _serverinstance = new server();<br/>\n&gt; }<br/>\n&gt; return _serverinstance;<br/>\n&gt; }<br/>\n&gt; public static void main(String[] args){<br/>\n&gt; if (args.length &gt;= 1){<br/>\n&gt; try {<br/>\n&gt; //set the initial environment<br/>\n&gt; AnotherServer.getInstance().setEnvironment();<br/>\n&gt; server obj = server.getInstance();<br/>\n&gt; _serverUUID = new VespUuid(args[0]);<br/>\n&gt; StringBuffer sb = new StringBuffer(_serverUUID.getInetAddress().toString());<br/>\n&gt; sb.delete(0, 1);<br/>\n&gt; sb.append(&quot;:&quot;);<br/>\n&gt; sb.append(_serverUUID.getPort());<br/>\n&gt; String sInetAddress = sb.toString();<br/>\n&gt; System.setProperty(VespConfigParams.MTT_INSTANCE_HOST_PROPERTY, <br/>\n&gt; sInetAddress);<br/>\n&gt; if(args.length &gt;= 2) {<br/>\n&gt; System.setProperty(VespConfigParams.ORB_UUID_PROPERTY, args[1]);<br/>\n&gt; }<br/>\n&gt; void startserver ()<br/>\n&gt; {<br/>\n&gt; }<br/>\n&gt; void stopserver()<br/>\n&gt; {<br/>\n&gt; }<br/>\n&gt; void isserverready()<br/>\n&gt; {<br/>\n&gt; }<br/>\n&gt; void generatevespAlarm()<br/>\n&gt; {<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; This is how the main class looks. There are many other supporting JAVA <br/>\n&gt; files for this main server. It uses a JNI layer to talk to the native <br/>\n&gt; code. Which is implemented elesewhere.<br/>\n&gt; <br/>\n&gt; For it to run in the actul enviroment, it uses a wrapper .exe which <br/>\n&gt; calls an xml file where all the server properties are listed in the main <br/>\n&gt; method the location of .class files are specified which are already <br/>\n&gt; compiled and put in the java&#92;lib folder in the form of .jar. Here is the <br/>\n&gt; snippet of xml file where the exe tries to read it.<br/>\n&gt; <br/>\n&gt; &lt;stringProperty property=&quot;jloader.server.main.class&quot; displayName=&quot;Main <br/>\n&gt; class&quot; default=&quot;com/xyz/server/testing&quot; enabled=&quot;false&quot; advanced=&quot;true&quot; /&gt;<br/>\n&gt; <br/>\n&gt; What I am trying is to write a JUnit test suite for this Java based <br/>\n&gt; server, which will be running in the form of an .exe. And my test cases <br/>\n&gt; will be running in eclipse.<br/>\n&gt; <br/>\n&gt; Hope the entire thing might make the picture a bit clear.<br/>\n&gt; <br/>\n&gt; Thanks<br/>\n&gt; Avinash<br/>\n&gt; <br/>\n&gt; ----- Original Message ----<br/>\n&gt; From: &quot;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:andrew.p.mcdonagh@...\">andrew.p.mcdonagh@...</a> &lt;mailto:andrew.p.mcdonagh%40gsk.com&gt;&quot; <br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:andrew.p.mcdonagh@...\">andrew.p.mcdonagh@...</a> &lt;mailto:andrew.p.mcdonagh%40gsk.com&gt;&gt;<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:junit%40yahoogroups.com&gt;<br/>\n&gt; Sent: Friday, 15 December, 2006 7:25:14 PM<br/>\n&gt; Subject: Re: [junit] Test a remote server<br/>\n&gt; <br/>\n&gt; Hi,<br/>\n&gt; <br/>\n&gt; Not sure why your Java app does not use Java&#39;s corba ability (a good Java<br/>\n&gt; ORB being <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.jacorb\">http://www.jacorb</a> org/ ), instead of JNI...<br/>\n&gt; <br/>\n&gt; Anyway, onto your real question, how do I test the code that is dependant<br/>\n&gt; upon the other servers?<br/>\n&gt; <br/>\n&gt; As you are asking on the JUnit list I take it you mean Unit test?<br/>\n&gt; Not System or Integration testing?<br/>\n&gt; <br/>\n&gt; If so, then you will find unit testing much simpler and (imo) better, if<br/>\n&gt; none of your unit tests need to access any file, network, database or UI.<br/>\n&gt; This means they run very fast. Once you figure out how to do them, you<br/>\n&gt; should be able to write lots of them , quickly too.<br/>\n&gt; <br/>\n&gt; We could just give you some simple examples, but I tend to find it better<br/>\n&gt; to show you how to unit test one of your classes that depend on corba or<br/>\n&gt; some other system, by using one of your real classes. So, please post<br/>\n&gt; (just one) class and we&#39;ll knock up a unit test for it.<br/>\n&gt; <br/>\n&gt; Regards<br/>\n&gt; <br/>\n&gt; Andrew<br/>\n&gt; <br/>\n&gt; &quot;avinash anand&quot; &lt;avinash_anand@ yahoo.co. uk&gt;<br/>\n&gt; Sent by: junit@yahoogroups. com<br/>\n&gt; 15-Dec-2006 09:04<br/>\n&gt; Please respond to junit@yahoogroups. com<br/>\n&gt; <br/>\n&gt; To<br/>\n&gt; junit@yahoogroups. com<br/>\n&gt; cc<br/>\n&gt; <br/>\n&gt; Subject<br/>\n&gt; [junit] Test a remote server<br/>\n&gt; <br/>\n&gt; Hi Group<br/>\n&gt; Greetings to all. These days I am writting test suit for a CORBA CRM. Let<br/>\n&gt; me first introduce the system.<br/>\n&gt; <br/>\n&gt; There is a central ORB server and many other servers which talk to each<br/>\n&gt; other through vesp. ORB being the central one. Entire code base is in C++.<br/>\n&gt; I have to test a new server introduced in the system which is written in<br/>\n&gt; Java. This new server talks to the rest through JNI. As a matter of Fact<br/>\n&gt; none of the servers can run independently, they neccesirily have to log<br/>\n&gt; into the central kit and report to the the central ORB server. After<br/>\n&gt; validation stuff the server starts working.<br/>\n&gt; <br/>\n&gt; Even this new Java based server uses an executable file to work<br/>\n&gt; (Jloader.exe written in c++)<br/>\n&gt; <br/>\n&gt; This .exe loads various .dll files in the system and in its main method<br/>\n&gt; calls the compiled .class files. This is the way how system functions.<br/>\n&gt; <br/>\n&gt; My problem is that when I will write a JUnit test case in IDE (eclipse)<br/>\n&gt; which would operate on the actual code which has 99% dependency and cannot<br/>\n&gt; be tested isolated. Is there any way to test this server code while it is<br/>\n&gt; working under the live system and the test suite running in the eclipse<br/>\n&gt; IDE.<br/>\n&gt; <br/>\n&gt; HELP !!!<br/>\n&gt; <br/>\n&gt; Thanks<br/>\n&gt; Avinash<br/>\n&gt; <br/>\n&gt; ____________ _________ _________ _________ _________ _________ _<br/>\n&gt; Now you can scan emails quickly with a reading pane. Get the new Yahoo!<br/>\n&gt; Mail. <a rel=\"nofollow\" target=\"_blank\" href=\"http://uk.docs\">http://uk.docs</a> yahoo.com/ nowyoucan. html<br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; __________________________________________________________<br/>\n&gt; All new Yahoo! Mail &quot;The new Interface is stunning in its simplicity and <br/>\n&gt; ease of use.&quot; - PC Magazine<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://uk.docs.yahoo.com/nowyoucan.html\">http://uk.docs.yahoo.com/nowyoucan.html</a> <br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://uk.docs.yahoo.com/nowyoucan.html\">http://uk.docs.yahoo.com/nowyoucan.html</a>&gt;<br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ------------------------------------------------------------------------<br/>\n&gt; <br/>\n&gt; No virus found in this incoming message.<br/>\n&gt; Checked by AVG Free Edition.<br/>\n&gt; Version: 7.5.432 / Virus Database: 268.15.19/587 - Release Date: 14/12/2006 19:28 </span></blockquote></div>", 
    "prevInTime": 18550, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1166297844", 
    "canDelete": false, 
    "nextInTopic": 18555, 
    "prevInTopic": 18548, 
    "headers": {
        "inReplyToHeader": "PDIwMDYxMjE1MTQyMzI4LjgwMDkwLnFtYWlsQHdlYjI2NzEyLm1haWwudWtsLnlhaG9vLmNvbT4=", 
        "messageIdInHeader": "PDQ1ODQ0QUY0LjQwNjA1MDJAc3RlcGhlbi1zbWl0aC5jby51az4=", 
        "referencesHeader": "PDIwMDYxMjE1MTQyMzI4LjgwMDkwLnFtYWlsQHdlYjI2NzEyLm1haWwudWtsLnlhaG9vLmNvbT4="
    }
}