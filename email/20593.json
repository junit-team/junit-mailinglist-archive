{
    "numMessagesInTopic": 8, 
    "nextInTime": 20594, 
    "senderId": "sGGZq28Bydb7buBJ72mqqzZWNvRzUfFyzz9FVV8ZWWYy2As982ChFZ-uh2uazjHwRDu359OBUtsw0yA6hlG61TcuUV7tNhL9", 
    "systemMessage": false, 
    "subject": "RE: [junit] Testing code that depends on today&#39;s date", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "I wouldn t think first of making the Calendar (a thing that makes Dates) a global variable (i.e. singleton ). I d rather pass it everywhere it is needed. ", 
    "msgId": 20593, 
    "profile": "kentlbeck", 
    "topicId": 20590, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "messageBody": "<div id=\"ygrps-yiv-2066057613\">I wouldn&#39;t think first of making the Calendar (a thing that makes Dates) a<br/>\nglobal variable (i.e. &quot;singleton&quot;). I&#39;d rather pass it everywhere it is<br/>\nneeded.<br/>\n <br/>\nCheers,<br/>\n <br/>\nKent Beck<br/>\nThree Rivers Institute<br/>\n<br/>\n  _____  <br/>\n<br/>\nFrom: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of Per<br/>\nJacobsson<br/>\nSent: Tuesday, June 17, 2008 9:17 PM<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSubject: RE: [junit] Testing code that depends on today&#39;s date<br/>\n<br/>\n<br/>\n<br/>\nThat would work, but I wouldn&#39;t be really happy about going back to the old<br/>\nsingleton factory pattern. It may just be the best fit for this case though.<br/>\n/ Per<br/>\n________________________________________<br/>\nFrom: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com<br/>\n[junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com] On Behalf Of<br/>\nAndrew McDonagh [andrewmcdonagh@ &lt;mailto:andrewmcdonagh%40gmail.com&gt;<br/>\ngmail.com]<br/>\nSent: Tuesday, June 17, 2008 4:20 PM<br/>\nTo: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com<br/>\nSubject: Re: [junit] Testing code that depends on today&#39;s date<br/>\n<br/>\nHi,<br/>\n<br/>\nIf you use the Abstract Factory pattern to create the Date() object<br/>\ninstance, instead of calling new Date() yourself or passing it around,<br/>\nthen the production TodaysDateConcreteFactory can simply :<br/>\n<br/>\nreturn new Date();<br/>\n<br/>\nWhereas during your unit or functional tests, you use a<br/>\nMockTodaysDateConcreteFactory object, which returns what ever you want<br/>\n<br/>\nreturn expectedDate;<br/>\n<br/>\nHope this helps<br/>\n<br/>\nAndrew<br/>\n<br/>\n2008/6/17 Per Jacobsson &lt;perjacobsson@ &lt;mailto:perjacobsson%40eharmony.com&gt;<br/>\neharmony.com&lt;mailto:perjacobsson%40eharmony.com&gt;&gt;:<br/>\n<blockquote><span title=\"ireply\"> &gt; Hi,<br/>\n&gt; This has been annoying me for a while and I can&#39;t think of a clean<br/>\n </span></blockquote>solution<br/>\n<blockquote><span title=\"ireply\"> &gt; for it. Hope this makes sense: I have some code that returns different<br/>\n&gt; results depending on what today&#39;s date is (the number of days since a user<br/>\n&gt; first registered, etc). The simple approach is to just create a new<br/>\n </span></blockquote>instance<br/>\n<blockquote><span title=\"ireply\"> &gt; of java.util.Date whenever I need to know the current date, but that tends<br/>\n&gt; to make both unit and automated functional testing difficult.<br/>\n&gt;<br/>\n&gt; I&#39;m currently injecting today&#39;s date into the classes that need it, and<br/>\n </span></blockquote>then<br/>\n<blockquote><span title=\"ireply\"> &gt; the tests can just use a static date. It gets pretty ugly though, a lot of<br/>\n&gt; times this date has to be dragged along deep into the domain model.<br/>\n&gt;<br/>\n&gt; An alternative would be to take the old school approach and have a static<br/>\n&gt; factory that everything that needs to know today&#39;s date calls, and allow<br/>\n </span></blockquote>the<br/>\n<blockquote><span title=\"ireply\"> &gt; unit tests to override with a test date. Of course, then you run into all<br/>\n&gt; the other issues that dependency injection solves.<br/>\n&gt;<br/>\n&gt; Any thoughts?<br/>\n&gt; Thanks,<br/>\n&gt; / Per<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n <br/>\n<br/>\n<br/>\n </span></blockquote>[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 20592, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1213763623", 
    "canDelete": false, 
    "nextInTopic": 20594, 
    "prevInTopic": 20592, 
    "headers": {
        "inReplyToHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDMwOTE5NkBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPg==", 
        "messageIdInHeader": "PDAwZGIwMWM4ZDBmYyQ3ZTJiOTJlMCQ0MDAwYThjMEBrZW50c3BhdmlsaW9uPg==", 
        "referencesHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPiw8MzVjNTA3ZDMwODA2MTcxNjIwcDI4MWU1ZjJjdjZiYTBkYTE3YTYwYTllYjZAbWFpbC5nbWFpbC5jb20+IDw4NjBENDdGODkwNEY2MDQxQUVFRTU1RjlCNjg0NjY3RjE2MkQzMDkxOTZARVhDSEFOR0UtVlMxLmVoYXJtb255LmNvbT4="
    }
}