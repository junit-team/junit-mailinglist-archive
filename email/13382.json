{
    "numMessagesInTopic": 8, 
    "nextInTime": 13383, 
    "senderId": "BvKx7sGc3PxCqNiYzEgZ-rubg6IzQxLJStJGbgaj4Nqzl3eeggaRkNuaBDt5NGIPFWfMwcaqoRcFzcXGNHWzfuXp8FfbgF1S4GovU26BoFlzOMrh", 
    "systemMessage": true, 
    "subject": "Re: Anyone use JUnit with Ant and Apache Digester?", 
    "from": "&quot;paolovalladolid&quot; &lt;paolovalladolid@...&gt;", 
    "authorName": "paolovalladolid", 
    "msgSnippet": "Not really. I had originally worked under the assumption that my Java application would be invoked with the XML file dropped (by an _external_ process) into my", 
    "msgId": 13382, 
    "profile": "paolovalladolid", 
    "topicId": 13362, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 152066959, 
    "messageBody": "<div id=\"ygrps-yiv-42029662\">Not really.<br/>\n<br/>\nI had originally worked under the assumption that my Java application<br/>\nwould be invoked with the XML file dropped (by an _external_ process)<br/>\ninto my classpath.  As previously described, the 5 or so variations of<br/>\ncalls to getResource()/getResourceAsStream() that I tried worked great<br/>\nwhen the application was invoked by calling the application&#39;s main()<br/>\nmethod directly, but did not work at all when called by JUnit&#39;s<br/>\nTestRunner.<br/>\n<br/>\nI understand the disadvantages of using a File object vs. using<br/>\ngetResourceXXX().  But as I mentioned previously, the XML data file is<br/>\ngoing to be dropped at some predetermined C:&#92; folder, without any<br/>\nguarantee as to where my application will be installed, as it is going<br/>\nto be integrated into a larger, multi-application process.<br/>\n<br/>\nThanks for the informative article, however.<br/>\n<br/>\nPaolo<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, jc &lt;john.cavacas@g...&gt; wrote:<br/>\n&gt; Well, that may explain your problems. When using getResource() or<br/>\n&gt; getResourceAsStream() you have to be conserned about where you are<br/>\n&gt; calling that code from. Have a look at this old JavaWorld article, it<br/>\n&gt; explains the issues well:<br/>\n&gt; <br/>\n&gt;<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.javaworld.com/javaworld/javaqa/2003-08/01-qa-0808-property.html\">http://www.javaworld.com/javaworld/javaqa/2003-08/01-qa-0808-property.html</a><br/>\n&gt; <br/>\n&gt; /jc<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; On 4/29/05, paolovalladolid &lt;paolovalladolid@y...&gt; wrote:<br/>\n&gt; &gt; As it turns out I now have no choice but to use the method of creating<br/>\n&gt; &gt; a File object from my &quot;loadFile&quot; String and calling<br/>\n&gt; &gt; myDigester.parse(fileObj) on it, because the file is to be loaded by<br/>\n&gt; &gt; an external process into another folder that is not guaranteed to be<br/>\n&gt; &gt; in the classpath.<br/>\n&gt; &gt; <br/>\n&gt; &gt; I had loadFile = &quot;mydata.xml&quot; when I was trying to parse it from my<br/>\n&gt; &gt; classpath with getResource()/getResourceAsStream().<br/>\n&gt; &gt; <br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, jc &lt;john.cavacas@g...&gt; wrote:<br/>\n&gt; &gt; &gt; Nah don&#39;t do that :)<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; What is the value of &quot;loadFile&quot; when running under Junit and when<br/>\n&gt; &gt; &gt; running from the command line?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I&#39;ve never had a problem loading files from the classpath with<br/>\nJunit.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; On 4/27/05, paolovalladolid &lt;paolovalladolid@y...&gt; wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &quot;loadFile&quot; is a String holding the name of the XML file to be<br/>\nparsed<br/>\n&gt; &gt; &gt; &gt; by Digester.  My Ant script copies it into the classes folder.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; MyClass has its own main() method.  When I invoke MyClass via<br/>\na call<br/>\n&gt; &gt; &gt; &gt; from the command line (embedded in a Windows bat file),<br/>\nMyClass find<br/>\n&gt; &gt; &gt; &gt; the file just fine.  When MyClass is invoked by TestMyClass<br/>\n(running<br/>\n&gt; &gt; &gt; &gt; under JUnit), it cannot find the XML file.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; In my searches of this group archive and the Web, I have seen<br/>\n&gt; &gt; &gt; &gt; references to JUnit&#39;s custom ClassLoader and how it has trouble<br/>\n&gt; &gt; &gt; &gt; finding files in the classpath, but no solutions/workarounds.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; I guess for now I can try reading files via streams from File<br/>\nobjects<br/>\n&gt; &gt; &gt; &gt; instead of using getResource() or getResourceAsStream().<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Paolo<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, jc &lt;john.cavacas@g...&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; What is the value of &quot;loadFile&quot;? Is &quot;loadFile&quot; in your<br/>\nclasspath?<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; jc<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; On 4/26/05, paolovalladolid &lt;paolovalladolid@y...&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; So far I have tried the following variations:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\nThread.currentThread().getContextClassLoader().getResourceAsStream(loadFile);<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; TestMyJUnitTest.class.getResourceAsStream(loadFile);<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; this.getClass().getResourceAsStream(loadFile);<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; MyClass.class.getResourceAsStream(loadFile);<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; getClass().getClassLoader().getResourceAsStream(loadFile);<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; None of these produce a non-null InputStream object for the<br/>\n&gt; &gt; Digester<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; to work with.  I have verified that Ant properly copies all<br/>\n&gt; &gt; the XML<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; files I want Digester to parse into my classes.ant tree.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; What else do I need to look at?<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; <br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; </span></blockquote></div>", 
    "prevInTime": 13381, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1115044536", 
    "canDelete": false, 
    "nextInTopic": 13403, 
    "prevInTopic": 13376, 
    "headers": {
        "inReplyToHeader": "PDYxZWRlNDdhMDUwNDI5MTAyNjM3MmM0ZDRhQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGQ1NWRybytrbDdvQGVHcm91cHMuY29tPg=="
    }
}