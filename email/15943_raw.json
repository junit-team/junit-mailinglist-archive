{
    "numMessagesInTopic": 74, 
    "nextInTime": 15944, 
    "senderId": "7DnXyTHkMll6z9stqpx_X4LfbmKPepNdkkRuelcNmSmwOq2Cd_3lh7MYq6CFgxZ2Twkr-hcbhpZovM80HOF65kfObxHaGUFu", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: Observations from a production use of JUnit4", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Ben, Once again, thanks for the comments. Responses below. Kent Beck Three Rivers Institute ... The tip-off that you are dealing with a JUnit 4 test is a class", 
    "msgId": 15943, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 65667 invoked from network); 3 Feb 2006 06:13:43 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m26.grp.scd.yahoo.com with QMQP; 3 Feb 2006 06:13:43 -0000\r\nReceived: from unknown (HELO smtpauth07.mail.atl.earthlink.net) (209.86.89.67)\n  by mta9.grp.scd.yahoo.com with SMTP; 3 Feb 2006 06:13:43 -0000\r\nReceived: from [67.131.9.243] (helo=T42)\n\tby smtpauth07.mail.atl.earthlink.net with asmtp (Exim 4.34)\n\tid 1F4u5o-0000yx-RQ\n\tfor junit@yahoogroups.com; Fri, 03 Feb 2006 01:06:49 -0500\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nDate: Thu, 2 Feb 2006 22:06:45 -0800\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Mailer: Microsoft Office Outlook, Build 11.0.5510\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180\r\nIn-Reply-To: &lt;drm049+u72n@...&gt;\r\nThread-Index: AcYl4+9Y0O5JMCrJQ/i7SnXj4ix+YABt6vvw\r\nMessage-ID: &lt;E1F4u5o-0000yx-RQ@...&gt;\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d478f163fcb230b04ce9cae9281ab35c75adcf237d2e9d14885d350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Kent Beck&quot; &lt;kentb@...&gt;\r\nSubject: RE: [junit] Re: Observations from a production use of JUnit4\r\nX-Yahoo-Group-Post: member; u=173198504; y=RGNz1f4fGwme_PMuS_0cblByA9SWvVYHh7gt8lTmDWmdZ9Xq\r\nX-Yahoo-Profile: kentlbeck\r\n\r\nBen,\n\nOnce again, thanks for the comments. Responses below.\n\nKent Beck\nThree Rivers Institute \n\n&gt; -----Original Message-----\n&gt; From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On \n&gt; Behalf Of Ben Maurer\n&gt; Sent: Monday, January 30, 2006 1:23 PM\n&gt; To: junit@yahoogroups.com\n&gt; Subject: [junit] Re: Observations from a production use of JUnit4\n&gt; \n&gt; Hey,\n&gt; \n&gt; --- In junit@yahoogroups.com, David Saff &lt;saff@m...&gt; wrote:\n&gt; &gt; Ben Maurer wrote:\n&gt; &gt; &gt; Ant XML output\n&gt; &gt; &gt; --------------\n&gt; &gt; &gt; [...]\n&gt; &gt; &gt; However, in rc2, it looks like:\n&gt; &gt; &gt;\n&gt; &gt; &gt; &lt;testcase classname=&quot;junit.framework.JUnit4TestAdapterCache$2$1&quot; \n&gt; &gt; &gt; name=&quot;unknown&quot; time=&quot;0.018&quot;&gt;&lt;/testcase&gt;\n&gt; &gt; That doesn&#39;t look good, does it?  If my initial guess as to \n&gt; this bug&#39;s \n&gt; &gt; source is correct, this will be easily fixed (back to rc1&#39;s\n&gt; behavior, at \n&gt; &gt; least) soon.\n&gt; \n&gt; Ok, that&#39;s good. That will at least allow me to upgrade ;-). It&#39;d be\n&gt; ideal if we could set the classname to the &quot;real&quot; class name.\n&gt; \n&gt; Btw, on the topic of JUnit3 tool compat: is it possible to make is so\n&gt; we don&#39;t have to write:\n&gt; \n&gt;         public static junit.framework.Test suite()\n&gt;         {\n&gt;                 return new\n&gt; junit.framework.JUnit4TestAdapter(HashtableTest.class);\n&gt;         }\n&gt; \n&gt; *if* we are using the JUnit4 version of the tools. The logic could be\n&gt; something like:\n&gt; \n&gt; if (I am asked to run a junit3 test on something) {\n&gt;    if (any methods have the @Test annotation) {\n&gt;       use junit4 behavior\n&gt;    }\n&gt; \n&gt;    fallback\n&gt; }\n&gt; \n&gt; If this was done and the classname was set correctly, I think we could\n&gt; simulate almost full compat (for simple cases) with junit3 \n&gt; based tools.\n&gt; \n&gt; If you get both/either of these in cvs, I&#39;d be happy to test them out.\n\nThe tip-off that you are dealing with a JUnit 4 test is a class with\n@RunWith. A class containing a method with @Test has a @RunWith by\nimplication.\n\n&gt; \n&gt; &gt; &gt; Stack Trace Filtering\n&gt; &gt; &gt; ---------------------\n&gt; &gt; &gt;\n&gt; &gt; &gt; The stack trace from junit messages have always been filed with\n&gt; junit.*\n&gt; &gt; &gt; traces. Ant filters these out. However, now there are \n&gt; org.junit things\n&gt; &gt; &gt; slipping through. Also, tests with a timeout, have many\n&gt; &gt; &gt; java.util.concurrent frames in them. Why leave this kind of\n&gt; filtering up\n&gt; &gt; &gt; to each tool? JUnit should filter out the frames it knows \n&gt; are from it.\n&gt; &gt; &gt; This would make command line output look nicer. I think NUnit does\n&gt; this.\n&gt; &gt; This is tricky.  The JUnit API actually reports the Exception\n&gt; objects to \n&gt; &gt; the tools, which are then responsible for displaying / \n&gt; parsing stack \n&gt; &gt; traces.  I don&#39;t know that there&#39;s anything we could do to make \n&gt; &gt; pre-JUnit 4 tools automatically filter the org.junit lines, but we\n&gt; might \n&gt; &gt; look at something for the future.\n&gt; \n&gt; There&#39;s a setStackTrace in Throwable that looks promising. Granted,\n&gt; this is a bit of a hack, but having the org.junit lines in the test\n&gt; results gets really, really annoying. At the very least we should\n&gt; export a polished method that takes care of this.\n\nIt seems to me that stack filtering is a user interface responsibility.\nEvery time we get into the formatting business we regret it (see\nComparisonFailure for an example).\n\n&gt; \n&gt; &gt; &gt; @Test(expected=) traces\n&gt; &gt; &gt; -----------------------\n&gt; &gt; &gt;\n&gt; &gt; &gt; When you have an expected exception, and another one gets \n&gt; thrown, the\n&gt; &gt; &gt; error trace doesn&#39;t contain the bad exception. You only get:\n&gt; &gt; &gt;\n&gt; &gt; &gt; java.lang.AssertionError: Unexpected exception, \n&gt; &gt; &gt; expected&lt;java.util.NoSuchElementException&gt; but \n&gt; &gt; &gt; was&lt;java.lang.NullPointerException&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; Having the trace of the bad exception would help TAs debug student\n&gt; code. \n\nDoes the following test capture what you mean? In other words, an Exception\nis thrown in JUnit the cause of which is the exception thrown by the test\ncase. Once again, UIs can format this however they want to.\n\n\tpublic static class Unexpected {\n\t\t@Test(expected= Exception.class) public void expected()\nthrows Exception {\n\t\t\tthrow new Error();\n\t\t}\n\t}\n\t@Test public void unexpected() {\n\t\tResult result= JUnitCore.runClasses(Unexpected.class);\n\t\tFailure failure= result.getFailures().get(0);\n\t\tString message= failure.getMessage();\n\t\tassertTrue(message.contains(&quot;expected&lt;java.lang.Exception&gt;\nbut was&lt;java.lang.Error&gt;&quot;));\n\t\tassertEquals(Error.class,\nfailure.getException().getCause().getClass());\n\t}\n\n&gt; \n&gt; Thanks. This also comes up with timeouts. It&#39;d be really cool to have\n&gt; a stacktrace from where the thread was hung.\n\nCan you turn this into a test case? That would help me with the\nimplementation.\n\nSincerely yours,\n\nKent Beck\nThree Rivers Institute\n\n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 15891, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 15942, 
    "contentTrasformed": false, 
    "postDate": "1138946805", 
    "canDelete": false, 
    "nextInTopic": 15944, 
    "prevInTopic": 15942, 
    "headers": {
        "inReplyToHeader": "PGRybTA0OSt1NzJuQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PEUxRjR1NW8tMDAwMHl4LVJRQHNtdHBhdXRoMDcubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4="
    }
}