{
    "numMessagesInTopic": 19, 
    "nextInTime": 21255, 
    "senderId": "KmVSqDRzRXb_-TBl3qPYFgwPypkczkxLa3HpwF-SrUAPBnmkqLADm_m3aeqZwsXocJ1yD-j4qQb91szVy4eF6WLtuMQ", 
    "systemMessage": false, 
    "subject": "RE: [junit] Priority of Assertion?", 
    "from": "&quot;kentb&quot; &lt;kentb@...&gt;", 
    "authorName": "kentb", 
    "msgSnippet": "Another way to look at this is to free ourselves from the fetters of Java syntax and semantics for a moment and imagine what we d like to say about thrown", 
    "msgId": 21254, 
    "profile": "kentlbeck", 
    "topicId": 21230, 
    "spamInfo": {
        "reason": "4", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "messageBody": "<div id=\"ygrps-yiv-159187320\">Another way to look at this is to free ourselves from the fetters of Java<br/>\nsyntax and semantics for a moment and imagine what we&#39;d like to say about<br/>\nthrown exceptions, then map that back as best we can to the real programming<br/>\nlanguage. I think I&#39;d like to say something like:<br/>\n <br/>\nArrayIndexOutOfBoundsException isThrownBy new int[0][0]<br/>\n <br/>\nThis is the essential information in the situation--an exception, an<br/>\nexpression, and the declaration that the expression throws the exception.<br/>\nNow the game becomes how little noise do you need to add to get to<br/>\nsyntactically correct Java. There is no one right answer.<br/>\n <br/>\nCheers,<br/>\n <br/>\nKent Beck<br/>\nThree Rivers Institute<br/>\n<br/>\n  _____  <br/>\n<br/>\nFrom: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of<br/>\nJoakim Ohlrogge<br/>\nSent: Monday, January 05, 2009 6:22 AM<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSubject: Re: [junit] Priority of Assertion?<br/>\n<br/>\n<br/>\n<br/>\nIn rMock we used the following contruct:<br/>\n<br/>\npublic void testSomething() {<br/>\n&lt;code that we don&#39;t expect to throw an exception&gt;<br/>\nexpectThatExceptionThrown(isInstanceOf(SomeException.class));<br/>\n&lt;code that we expect to throw an exception&gt;<br/>\n}<br/>\n<br/>\nI think that idea is what Charlies assertThrows suggestion hinted towards.<br/>\n<br/>\nWhile this freedom can be abused it allows to precisely pinpoint what should<br/>\nthrow an exception. Also, you could do all kind of hamcrest checks on the<br/>\nexception instance that is not possible to do with annotations. The<br/>\nunderlying implementation in the rMock-case is that<br/>\nexpectThatExceptionThrows primes the framework with an expection that any<br/>\nexception is checked against before the exception is rethrown as an error<br/>\n(if the check passes the Exception is expected and not rethrown).<br/>\n<br/>\nJusr my 5 cents :)<br/>\n<br/>\nOn Wed, Dec 31, 2008 at 4:43 AM, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a><br/>\n&lt;mailto:david%40saff.net&gt; &gt; wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Ilja,<br/>\n&gt;<br/>\n&gt; Thanks for thinking this through.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; &gt; In my view, the behavior is in fact an artifact of an implementation<br/>\n&gt; &gt; detail - namely that asserts indicate failures by throwing an<br/>\n&gt; &gt; exception.<br/>\n&gt;<br/>\n&gt; I don&#39;t know that I can get behind this. This test is always going to<br/>\n </span></blockquote>pass:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; @Test public void avoidThePainfulTruth() {<br/>\n&gt; try {<br/>\n&gt; assertTrue(false);<br/>\n&gt; } catch (Exception e) {<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; I can&#39;t think of a better way than exceptions to implement assertions, and<br/>\n&gt; I<br/>\n&gt; can&#39;t think of a way to hide that fact from users in all cases.<br/>\n&gt;<br/>\n&gt; David Saff<br/>\n&gt;<br/>\n&gt; On Tue, Dec 30, 2008 at 11:18 AM, Ilja Preuß &lt;iljapreuss@googlema<br/>\n </span></blockquote>&lt;mailto:iljapreuss%40googlemail.com&gt; il.com&lt;iljapreuss%40googlemail.com&gt;<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;wrote:<br/>\n&gt;<br/>\n&gt; &gt; Kent, I agree that it is expected behavior, technically. I think you<br/>\n&gt; &gt; could also make an argument that it would be better if the behavior<br/>\n&gt; &gt; was different.<br/>\n&gt; &gt;<br/>\n&gt; &gt; In my view, the behavior is in fact an artifact of an implementation<br/>\n&gt; &gt; detail - namely that asserts indicate failures by throwing an<br/>\n&gt; &gt; exception. It could be made the case that JUnit &quot;should&quot; report those<br/>\n&gt; &gt; failing asserts as failing asserts, not as unexpected exceptions.<br/>\n&gt; &gt; Basically, the current behavior masks the true test failure.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Frankly, I have a hunch that the best solution to this problem<br/>\n&gt; &gt; actually is to split the test in two, that is, to not mix &quot;expected&quot;<br/>\n&gt; &gt; and &quot;assert&quot; in the same test method.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Cheers, Ilja<br/>\n&gt; &gt;<br/>\n&gt; &gt; 2008/12/30 kentb &lt;kentb@earthlink. &lt;mailto:kentb%40earthlink.net&gt; net<br/>\n </span></blockquote>&lt;kentb%40earthlink.net&gt; &lt;kentb%<br/>\n<blockquote><span title=\"ireply\"> &gt; 40earthlink.net&gt;&gt;:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; Yosef,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; The behavior you describe is what I would expect to see. In the test,<br/>\n&gt; you<br/>\n&gt; &gt; &gt; declared that an ArrayIndexOutOfBounds exception would be thrown. It<br/>\n&gt; was<br/>\n&gt; &gt; not<br/>\n&gt; &gt; &gt; thrown, so the test fails. The error message says that the &quot;wrong&quot;<br/>\n&gt; &gt; exception<br/>\n&gt; &gt; &gt; that was thrown was an AssertionError, which is generated by the<br/>\n&gt; &gt; &gt; assertTrue(false). The &quot;expected=...&quot; means that a test can fail if no<br/>\n&gt; &gt; &gt; exception is thrown or if the wrong exception is thrown.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Regards,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Kent Beck<br/>\n&gt; &gt; &gt; Three Rivers Institute<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; _____<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; From: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com<br/>\n </span></blockquote>&lt;junit%40yahoogroups.com&gt; &lt;junit%<br/>\n<blockquote><span title=\"ireply\"> &gt; 40yahoogroups.com&gt; [mailto:<br/>\n&gt; &gt; junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com<br/>\n </span></blockquote>&lt;junit%40yahoogroups.com&gt; &lt;junit%40yahoogroups.com&gt;]<br/>\n<blockquote><span title=\"ireply\"> &gt; On Behalf Of<br/>\n&gt; &gt; &gt; yosefshariat<br/>\n&gt; &gt; &gt; Sent: Tuesday, December 30, 2008 1:10 AM<br/>\n&gt; &gt; &gt; To: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com<br/>\n </span></blockquote>&lt;junit%40yahoogroups.com&gt; &lt;junit%<br/>\n<blockquote><span title=\"ireply\"> &gt; 40yahoogroups.com&gt;<br/>\n&gt; &gt; &gt; Subject: [junit] Priority of Assertion?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Hi<br/>\n&gt; &gt; &gt; I use &quot;@Test(expected = AnyClassException.class&quot;) and one<br/>\n&gt; &gt; &gt; &quot;assertTrue(false)&quot; together for example following code:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; @Test(expected = ArrayIndexOutOfBoundsException.class)<br/>\n&gt; &gt; &gt; public void test()<br/>\n&gt; &gt; &gt; {<br/>\n&gt; &gt; &gt; String s[] = new String[]{&quot;1&quot;};<br/>\n&gt; &gt; &gt; assertTrue(false);<br/>\n&gt; &gt; &gt; System.out.println(s[10]);<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I expect to see an assertion but I see following error:<br/>\n&gt; &gt; &gt; java.lang.Exception: Unexpected exception,<br/>\n&gt; &gt; &gt; expected&lt;java.lang.ArrayIndexOutOfBoundsException&gt; but<br/>\n&gt; &gt; &gt; was&lt;java.lang.AssertionError&gt;..<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; In your opinion, this test must be Assertion or Exception.<br/>\n&gt; &gt; &gt; In &quot;JUnit&quot; we cannot use &quot;@Test(expected = AnyClassException.class&quot;)<br/>\n&gt; &gt; &gt; and Assertion together at the same time.<br/>\n&gt; &gt; &gt; In my opinion this test must be failed for &quot;assertion&quot; and not for<br/>\n&gt; &gt; &gt; ArrayIndexOutOfBoundsException.<br/>\n&gt; &gt; &gt; Is this a bug in JUnit or my test is wrong and shouldn&#39;t use two item<br/>\n&gt; &gt; &gt; together?<br/>\n&gt; &gt; &gt; Tanks.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt; <br/>\n&gt;<br/>\n<br/>\n </span></blockquote>-- <br/>\n-----------------------------------------------------<br/>\nJoakim Ohlrogge<br/>\nAgical AB<br/>\nVästerlånggatan 79, 2 tr<br/>\n111 29 Stockholm, SWEDEN<br/>\n<br/>\nMobile: +46-708-754004<br/>\nBlog: johlrogge.wordpress.com<br/>\nE-mail: joakim.ohlrogge@ &lt;mailto:joakim.ohlrogge%40agical.se&gt; agical.se<br/>\n<br/>\n[Non-text portions of this message have been removed]<br/>\n<br/>\n<br/>\n<br/>\n <br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 21253, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1231171455", 
    "canDelete": false, 
    "nextInTopic": 21255, 
    "prevInTopic": 21253, 
    "headers": {
        "inReplyToHeader": "PGI5ZWU1ZTQxMDkwMTA1MDYyMWoxMDc4Y2VmOG44ZWM3MGUwNjhjMWU2ODI5QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PEEyNTU2QTI3Mzc0NTRGQzhBQzRDQkNGQzdERkRGMjMzQGtlbnRzcGF2aWxpb24+", 
        "referencesHeader": "PGdqY29oNCthNnY1QGVHcm91cHMuY29tPiA8QjZEMTU5NzE5RDk3NDMwQ0I5REQ2Q0M0REI1RjBEQzJAa2VudHNwYXZpbGlvbj4gPGZiYTI5Njk3MDgxMjMwMDgxOGk0ZDkyMGRiNG80MzIxYWI3ZGM2ZGNhYjE0QG1haWwuZ21haWwuY29tPiA8NGY3ZGE2YjkwODEyMzAxOTQzazNkZmE3Y2JicDg5NjU2N2I1NGE3NTZlNjRAbWFpbC5nbWFpbC5jb20+IDxiOWVlNWU0MTA5MDEwNTA2MjFqMTA3OGNlZjhuOGVjNzBlMDY4YzFlNjgyOUBtYWlsLmdtYWlsLmNvbT4="
    }
}