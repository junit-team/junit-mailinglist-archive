{
    "numMessagesInTopic": 15, 
    "nextInTime": 6748, 
    "senderId": "pau4LcwMRnqbqG4T_Piz0EU5reblecLOY5n8JtgX5CKbfRy0e-tSscvpzQCluknnWP6kj3makYLJ-7XHc65GYiuxncu7FGQk37M6ECgTiWSyl1QB", 
    "systemMessage": false, 
    "subject": "Re: [junit] ** How to test objects that depend on other  objects with mock objects **", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "So said  tobemligado   on  2003-01-26 ... 1. Create a new, public constructor. Make the value a constructor parameter. 2. Have the", 
    "msgId": 6747, 
    "profile": "nails762", 
    "topicId": 6743, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "messageBody": "<div id=\"ygrps-yiv-1352272120\">So said  tobemligado &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jasbell@...\">jasbell@...</a>&gt;  on  2003-01-26<br/>\n--------------------<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;I have a singleton called &quot;ConfigManager&quot;, where in its constructor <br/>\n&gt;it reads in a bunch of files from a directory and creates objectsfrom <br/>\n&gt;the files.  I am doing this because I want to say &quot;ConfigManager is <br/>\n&gt;not valid until these other objects have also been successfully <br/>\n&gt;created&quot;.  <br/>\n&gt;<br/>\n&gt;I want the &quot;ConfigManager&quot; to be able to read a directory full <br/>\n&gt;of &quot;bad files&quot; in some test scenarios, a directory full of &quot;good <br/>\n&gt;files&quot; in other test scenarios, and a directory full of &quot;good and bad <br/>\n&gt;files&quot; in yet other test scenarios.  Ultimately, the program will <br/>\n&gt;have to handle &quot;good and bad files&quot;,<br/>\n&gt;<br/>\n&gt;My problem is that I need to &quot;trick&quot; the &quot;ConfigManager&quot; into using <br/>\n&gt;the three directories in different test scenarios, but I dont want to <br/>\n&gt;alter the fact that all objects are created in &quot;ConfigManager&#39;s&quot; <br/>\n&gt;constructor.  Here is what is in the constructor for the <br/>\n&gt;singleton &quot;ConfigManager&quot;:<br/>\n&gt;----------------------------------------------------<br/>\n&gt;String basePath = ServiceResources.CONFIG_FILE_DIRECTORY;<br/>\n&gt;setBaseDirectory(basePath);<br/>\n&gt;loadAllFilesFound(getBaseDirectory());<br/>\n&gt;loadConfigFilesFound(getAllFilesFoundList());<br/>\n&gt;ArrayList configList = createConfigurations(getConfigFilesFound());<br/>\n&gt;TriggerManager tm = TriggerManager.getInstance();<br/>\n&gt;ArrayList triggerList = tm.createTriggers(configList);<br/>\n&gt;tm.registerTriggers(triggerList);<br/>\n&gt;----------------------------------------------------<br/>\n&gt;<br/>\n&gt;How can I switch the CONFIG_FILE_DIRECTORY value for testing when its <br/>\n&gt;in the constructor? <br/>\n<br/>\n </span></blockquote>1. Create a new, public constructor. Make the value a constructor<br/>\nparameter.<br/>\n2. Have the private/protected no-argument constructor delegate to the<br/>\nnew constructor passing in the default (production) values.<br/>\n3. Test through the new constructor.<br/>\n<br/>\nIf people ask for the singleton instance, then they get the production<br/>\ninstance. If people use the other constructor, then they have to<br/>\nprovide the necessary data for the ConfigManager to work on.<br/>\n<br/>\nDone.<br/>\n<br/>\nQ: Why is ConfigManager a singleton?<br/>\n<br/>\nGoogle &quot;Use your singletons wisely&quot;. Read it and let me know if it<br/>\nchanges your mind to use a singleton.<br/>\n<br/>\n<br/>\nJ. B. Rainsberger,<br/>\nPresident, Diaspar Software Services<br/>\nLet&#39;s write software that people understand.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com/\">http://www.diasparsoftware.com/</a><br/>\ntelephone: +1 416 791-8603<br/>\nAll correspondence (c) 2002 Diaspar Software Services.<br/>\nIf you want to use it, just ask; don&#39;t steal.</div>", 
    "prevInTime": 6746, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1043611648", 
    "canDelete": false, 
    "nextInTopic": 6749, 
    "prevInTopic": 6743, 
    "headers": {
        "inReplyToHeader": "PGIxMHV0aCtudjQzQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIwMDMwMTI2MTUwNzI4MDI1OS4wMDgyMTgyM0BzbXRwLnltLnBodWIubmV0LmNhYmxlLnJvZ2Vycy5jb20+", 
        "referencesHeader": "PGIxMHV0aCtudjQzQGVHcm91cHMuY29tPg=="
    }
}