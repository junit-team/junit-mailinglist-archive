{
    "numMessagesInTopic": 3, 
    "nextInTime": 13990, 
    "senderId": "gQUQC_cHDTEnIEXO1KuTlzgtMO2PyBoPff1cQYkegEtLrH0Tc-Ln_CA2MDHpogQdC8_e9LHwXsyqQRsbbDWq1qUpL3ct5HM", 
    "systemMessage": true, 
    "subject": "Re: [junit] Advice on TDD&#39;ing a POJO that uses a web service", 
    "from": "Al Rathon &lt;new_berlin@...&gt;", 
    "authorName": "Al Rathon", 
    "msgSnippet": "Dan, I suggest you use the Marigold test framework (version 0.9) at http://sourceforge.net/projects/marigold . It appears to be well suited for testing the", 
    "msgId": 13989, 
    "rawEmail": "Return-Path: &lt;new_berlin@...&gt;\r\nReceived: (qmail 60952 invoked from network); 21 Jun 2005 16:41:04 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m26.grp.scd.yahoo.com with QMQP; 21 Jun 2005 16:41:04 -0000\r\nReceived: from unknown (HELO n24.bulk.scd.yahoo.com) (66.94.237.53)\n  by mta1.grp.scd.yahoo.com with SMTP; 21 Jun 2005 16:41:04 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.6] by n24.bulk.scd.yahoo.com with NNFMP; 21 Jun 2005 16:41:02 -0000\r\nReceived: from [66.218.66.69] by mailer6.bulk.scd.yahoo.com with NNFMP; 21 Jun 2005 16:41:02 -0000\r\nX-Sender: new_berlin@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 10919 invoked from network); 20 Jun 2005 18:33:20 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m26.grp.scd.yahoo.com with QMQP; 20 Jun 2005 18:33:20 -0000\r\nReceived: from unknown (HELO web51403.mail.yahoo.com) (206.190.38.182)\n  by mta6.grp.scd.yahoo.com with SMTP; 20 Jun 2005 18:33:19 -0000\r\nReceived: (qmail 21569 invoked by uid 60001); 20 Jun 2005 18:32:14 -0000\r\nMessage-ID: &lt;20050620183214.21565.qmail@...&gt;\r\nReceived: from [66.238.104.62] by web51403.mail.yahoo.com via HTTP; Mon, 20 Jun 2005 11:32:13 PDT\r\nDate: Mon, 20 Jun 2005 11:32:13 -0700 (PDT)\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;d92m99+jfog@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=iso-8859-1\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Al Rathon &lt;new_berlin@...&gt;\r\nSubject: Re: [junit] Advice on TDD&#39;ing a POJO that uses a web service\r\nX-Yahoo-Group-Post: member; u=91554192; y=KUrHlpahA5KUyPFniP0hp5F4hdCdFPsZZRQjmA2thqEDh-jkQQ\r\nX-Yahoo-Profile: new_berlin\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: vbossica &lt;vladimir@...&gt; via web; 21 Jun 2005 16:41:02 -0000\r\n\r\nDan,\n\nI suggest you use the Marigold test framework (version\n0.9) at http://sourceforge.net/projects/marigold . It\nappears to be well suited for testing the type of\napplication you&#39;ve created. \n\nBtw, if there is a WSDL available for the web service,\nyou do not have to create stubs. Follow the example\nincluded in the Marigold download for your test.\n\nCheers,\nAR\n\n--- etl_dan &lt;etl_dan@...&gt; wrote:\n\n&gt; Hi!\n&gt; \n&gt; I&#39;m working on a few projects that will obtain data\n&gt; from a web service\n&gt; using JAX-RPC.  To get my feet wet, I&#39;m building a\n&gt; project that will\n&gt; get the weather forecast from the NDFDXML web\n&gt; service at weather.gov\n&gt; and used Axis to generate a client stub. \n&gt; (http://weather.gov/xml/)\n&gt; \n&gt; I am doing OK so far, but I wondered if someone\n&gt; would mind checking to\n&gt; see if I&#39;m going too far or in the wrong direction?\n&gt; \n&gt; \n&gt; My first approach is to have a service POJO that\n&gt; handles all\n&gt; communication with the web service via the generated\n&gt; stub classes and\n&gt; parses response data into more digestible data\n&gt; objects.\n&gt; \n&gt; Going the test-first route, I started writing tests\n&gt; for this POJO\n&gt; service, called NOAAWeatherService.  My first gut\n&gt; was to write a happy\n&gt; path test to see that the class correctly passes the\n&gt; right arguments.\n&gt;  To do this, I realized that if my web services\n&gt; consumer object\n&gt; actually obtained the stub directly, it would be\n&gt; hard for my tests to\n&gt; substitute in mocks.  I created a method setProxy()\n&gt; which allows tests\n&gt; and a dependency injection container like Spring to\n&gt; wire it up.  (Here\n&gt; I pass an object that implements PortType interface\n&gt; generated by Axis&#39;\n&gt; WSDL2Java tool)\n&gt; \n&gt; My next wince came when I wondered what my mock web\n&gt; service stub\n&gt; implementation could return - the NDFDXML web\n&gt; service at weather.gov\n&gt; returns their specially prepared XML as a response. \n&gt; My fake object\n&gt; would need to return well-formatted XML data that\n&gt; could be correctly\n&gt; processe!  So, I decided that this class would have\n&gt; too many\n&gt; responsibilities on its own -- communicating with\n&gt; the web service, and\n&gt; parsing the XML results.  So I created a setParser()\n&gt; method which I\n&gt; could fake for these tests and supply a real parser\n&gt; for production.\n&gt; \n&gt; \n&gt; Am I testing at too high a level here, or is this\n&gt; the right way to go?\n&gt;   Based on this test, it seems like I&#39;m not testing\n&gt; a whole lot -\n&gt; since the object under test will probably just\n&gt; delegate to other\n&gt; objects.\n&gt; \n&gt; Thanks for the advice!\n&gt; \n&gt; -Dan\n&gt; --\n&gt; \n&gt; \n&gt;     public void testGetCurrentConditions_HappyPath()\n&gt; {\n&gt;         NOAAWeatherService service = new\n&gt; NOAAWeatherService();\n&gt;         \n&gt;         final String webServiceResponse = &quot;Test\n&gt; string&quot;;\n&gt;         final double latitude = 30.5d;\n&gt;         final double longitude = -70.0d;\n&gt; \n&gt;         // Set a fake proxy to verify the right\n&gt; arguments are passed\n&gt;         service.setProxy(new NdfdXMLStub() {\n&gt;             // NDFDgen is a weather.gov method to\n&gt; get forecast data\n&gt;             public String NDFDgen(BigDecimal\n&gt; latitude, BigDecimal\n&gt; longitude, String product, Calendar startTime,\n&gt; Calendar endTime,\n&gt; WeatherParametersType weatherParameters) throws\n&gt; RemoteException {\n&gt;                 assertEquals(latitude,\n&gt; latitude.doubleValue(), 0.01);\n&gt;                 assertEquals(longitude,\n&gt; longitude.doubleValue(),\n&gt; 0.01);\n&gt;                 ...  // Check ?all? the web service\n&gt; parameters? \n&gt;                 return webServiceResponse;\n&gt;             }\n&gt;         });\n&gt;         \n&gt;         // Secondly, create a fake response parser\n&gt; so\n&gt;         // our tests don&#39;t have to create valid\n&gt; XML...\n&gt;         // we&#39;re just testing that our code is\n&gt; interacting\n&gt;         // with the web service correctly...\n&gt;  \n&gt;         final WeatherData expected = new\n&gt; WeatherData();\n&gt;         service.setNdfdXMLResponseParser(new\n&gt; NdfdXMLResponseParser() {\n&gt;             public WeatherData[] parseNdfdGen(String\n&gt; xml) {\n&gt;                 assertEquals(webServiceResponse,\n&gt; xml);\n&gt;                 WeatherData[] response = new\n&gt; WeatherData[1];\n&gt;                 response[0] = expected;\n&gt;                 return response;\n&gt;             }\n&gt;         });\n&gt;         \n&gt;         \n&gt;         assertEquals(expected,\n&gt; service.getCurrentConditions(latitude,\n&gt; longitude));\n&gt;     }\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt;     junit-unsubscribe@yahoogroups.com\n&gt; \n&gt;  \n&gt; \n&gt; \n&gt; \n\n\n__________________________________________________\nDo You Yahoo!?\nTired of spam?  Yahoo! Mail has the best spam protection around \nhttp://mail.yahoo.com \n\n\n\n", 
    "profile": "new_berlin", 
    "topicId": 13970, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 91554192, 
    "prevInTime": 13988, 
    "contentTrasformed": false, 
    "postDate": "1119292333", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 13981, 
    "headers": {
        "inReplyToHeader": "PGQ5Mm05OStqZm9nQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIwMDUwNjIwMTgzMjE0LjIxNTY1LnFtYWlsQHdlYjUxNDAzLm1haWwueWFob28uY29tPg=="
    }
}