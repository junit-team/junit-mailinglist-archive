{
    "numMessagesInTopic": 13, 
    "nextInTime": 18229, 
    "senderId": "DXCgBf1Tug9IbFE-PtJZY2KbNyEkoxadsEHmsY0Li5sFaXbxPo9wwhoml-uM7x27PoCZQifEGwLaNt_TJxZBHwr8m6Uc5ZKNXsTHonnSibuVA5u_", 
    "systemMessage": false, 
    "subject": "Re: [junit] Junit testing MBeans", 
    "from": "&quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;", 
    "authorName": "Joakim Ohlrogge", 
    "msgSnippet": "The subclass technique can also be tested with rMock using intercept. Then rMock automatically subclasses the bean for you so that you can control what it", 
    "msgId": 18228, 
    "rawEmail": "Return-Path: &lt;joakim.ohlrogge@...&gt;\r\nX-Sender: joakim.ohlrogge@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 76651 invoked from network); 26 Oct 2006 20:17:14 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m28.grp.scd.yahoo.com with QMQP; 26 Oct 2006 20:17:14 -0000\r\nReceived: from unknown (HELO ug-out-1314.google.com) (66.249.92.174)\n  by mta2.grp.scd.yahoo.com with SMTP; 26 Oct 2006 20:17:13 -0000\r\nReceived: by ug-out-1314.google.com with SMTP id 72so414217ugd\n        for &lt;junit@yahoogroups.com&gt;; Thu, 26 Oct 2006 13:16:10 -0700 (PDT)\r\nReceived: by 10.78.200.3 with SMTP id x3mr3531814huf;\n        Thu, 26 Oct 2006 13:16:10 -0700 (PDT)\r\nReceived: by 10.78.147.18 with HTTP; Thu, 26 Oct 2006 13:16:09 -0700 (PDT)\r\nMessage-ID: &lt;b9ee5e410610261316r3bdd78bbva41984afa1ea1953@...&gt;\r\nDate: Thu, 26 Oct 2006 22:16:09 +0200\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;4540A2EB.4020403@...&gt;\r\nMIME-Version: 1.0\r\nReferences: &lt;20061025230807.23819.qmail@...&gt;\n\t &lt;4540A2EB.4020403@...&gt;\r\nX-Google-Sender-Auth: 14c8f0958f5a022a\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nX-eGroups-From: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nFrom: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nReply-To: joakim.ohlrogge@...\r\nSubject: Re: [junit] Junit testing MBeans\r\nX-Yahoo-Group-Post: member; u=261856052; y=Kk_NtWnsEyGmOAgOQ08D5Bs1F6GtPY65HCTR5zm_Cb78R9EJ\r\nX-Yahoo-Profile: j0hlrogge\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nThe subclass technique can also be tested with rMock using intercept. Then\nrMock automatically subclasses the bean for you so that you can control what\nit returns. It would look something like this:\n\nprivate MyMBean myInterceptedMBean;\n\nprotected void setUp() {\n    myInterceptedMBean = (MyMBean)intercept(MyMBean.class, &quot;someMBean&quot;);\n}\n\npublic void testInterceptStateString() {\n      // record an expectation to getStateString and modify it&#39;s return\nvalue\n      myInterceptedMBean.getStateString();\n      modify().multiplicity(expect.atLeastOnce()).returnValue(&quot;My\nstateString&quot;);\n\n      startVerification();\n\n      assertThat(myInterceptedMBean.getStateString(), is.eq(&quot;My\nstateString&quot;);\n}\n\npublic void testInterceptStateStringDifferentValue() {\n      // record an expectation to getStateString and modify it&#39;s return\nvalue\n      myInterceptedMBean.getStateString();\n      modify().multiplicity(expect.atLeastOnce()).returnValue(&quot;My other\nstateString&quot;);\n\n      startVerification();\n\n      assertThat(myInterceptedMBean.getStateString(), is.eq(&quot;My other\nstateString&quot;);\n}\n\n\nThe benefit here is that you don&#39;t need to create a subclass and it&#39;s easy\nto modify the state-string in other testcases, just set up new values and\ntest away.The downside is that it becomes a bit more magical what is going\non..\nJames Carr blogged about this technique lately here:\nhttp://blog.james-carr.org/?p=32\n\nJust another option to consider. I hope this is interesting.\n/J\n\n\nOn 10/26/06, J. B. Rainsberger &lt;jbrains762@...&gt; wrote:\n&gt;\n&gt;   Ravi wrote:\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; My Apologies, I should have put one in before ...\n&gt; &gt;\n&gt; &gt; In the example below, I have shown a method named,\n&gt; &gt; initLocation, you will see this method checks the\n&gt; &gt; state of the MBean before the method proceeds to do\n&gt; &gt; its stuff..\n&gt; &gt;\n&gt; &gt; Please note that this &#39;StateString&#39; is set by JBoss.\n&gt; &gt;\n&gt; &gt; public synchronized String initLocation () {\n&gt; &gt;\n&gt; &gt; /* Check if the StateString has &quot;Started&quot; value.\n&gt; &gt; */\n&gt; &gt; if (!this.getStateString().equals(&quot;Started&quot;))\n&gt; &gt; return &quot;Service currently not started &quot;;\n&gt; &gt; try {\n&gt; &gt; popLocals();\n&gt; &gt; this.running = true;\n&gt; &gt; } catch (Exception e) {\n&gt; &gt; this.running = false;\n&gt; &gt; log.error(&quot;Error invoking popLocals&quot;);\n&gt; &gt; }\n&gt; &gt; }\n&gt; &gt;\n&gt; &gt; &gt;From your reply I get the feeling, I might have to end\n&gt; &gt; up using cactus, as this &#39;StateString&#39; is something\n&gt; &gt; which is set by JBoss.\n&gt;\n&gt; I assume the StateString property is not writable through the public\n&gt; interface of the MBean class?\n&gt;\n&gt; If it /is/ writable, then your test should impersonate JBoss and set it.\n&gt;\n&gt; If it is /not/ writable, then consider using the &quot;subclass to test&quot;\n&gt; technique.\n&gt;\n&gt; public void testDoNotInitializeIfServiceNotStarted() throws Exception {\n&gt; MyMBean mbean = new MyMBean() {\n&gt; protected String getStateString() {\n&gt; return &quot;Stopped&quot;; // Something other than &quot;Started&quot;\n&gt; }\n&gt; };\n&gt;\n&gt; mbean.initLocation();\n&gt; // assert mbean didn&#39;t change to &quot;Started&quot; state...\n&gt; }\n&gt;\n&gt; Something like that.\n&gt; --\n&gt; J. B. (Joe) Rainsberger :: http://www.jbrains.ca\n&gt; Your guide to software craftsmanship\n&gt; JUnit Recipes: Practical Methods for Programmer Testing\n&gt; 2005 Gordon Pask Award for contribution Agile Software Practice\n&gt;  \n&gt;\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "j0hlrogge", 
    "topicId": 18187, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 261856052, 
    "prevInTime": 18227, 
    "contentTrasformed": false, 
    "postDate": "1161893769", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 18221, 
    "headers": {
        "inReplyToHeader": "PDQ1NDBBMkVCLjQwMjA0MDNAZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGI5ZWU1ZTQxMDYxMDI2MTMxNnIzYmRkNzhiYnZhNDE5ODRhZmExZWExOTUzQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDIwMDYxMDI1MjMwODA3LjIzODE5LnFtYWlsQHdlYjUwNjA4Lm1haWwueWFob28uY29tPgkgPDQ1NDBBMkVCLjQwMjA0MDNAZ21haWwuY29tPg=="
    }
}