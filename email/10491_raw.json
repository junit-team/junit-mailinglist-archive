{
    "numMessagesInTopic": 11, 
    "nextInTime": 10492, 
    "senderId": "I2KTG_UudzMdFeylyBpaTRY5TJCk0JvI03xQr7pp8EKjZRrFWnJAFpAxK9xesaNzs3bhOdIQfhZio0wa86Fq_51JDHVIu0ogvIanK2GKazIeMVCCaxhv", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: Problems testing an InputStream", 
    "from": "&quot;Stirling, Scott&quot; &lt;scott.stirling@...&gt;", 
    "authorName": "Stirling, Scott", 
    "msgSnippet": "... Where in the jar is the XML file?  In the jar root?  Or in the package of the class that s retrieving it?  If in the root of the jar, prepend a / to the", 
    "msgId": 10491, 
    "rawEmail": "Return-Path: &lt;scott.stirling@...&gt;\r\nX-Sender: scott.stirling@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 16955 invoked from network); 17 Feb 2004 16:59:10 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m7.grp.scd.yahoo.com with QMQP; 17 Feb 2004 16:59:10 -0000\r\nReceived: from unknown (HELO astonmartin.workscape.net) (63.68.17.253)\n  by mta2.grp.scd.yahoo.com with SMTP; 17 Feb 2004 16:59:10 -0000\r\nReceived: from esafe.workscape.net ([10.32.240.6]) by astonmartin.workscape.net with Microsoft SMTPSVC(5.0.2195.6713);\n\t Tue, 17 Feb 2004 11:59:09 -0500\r\nReceived: from Harley.corp.workscape.net ([IP=10.32.0.237]) by eSafe SMTP Relay 1077036747; Tue Feb 17 12:09:57 2004\r\nReceived: from avanti.corp.workscape.net ([10.16.0.103]) by Harley.corp.workscape.net with Microsoft SMTPSVC(5.0.2195.6713);\n\t Tue, 17 Feb 2004 11:59:07 -0500\r\nX-MIMEOLE: Produced By Microsoft Exchange V6.0.6375.0\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nDate: Tue, 17 Feb 2004 11:59:07 -0500\r\nMessage-ID: &lt;72068298CD99104AAEDE2FDF89AC160D4C4C8C@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [junit] Re: Problems testing an InputStream\r\nThread-Index: AcP1Zci8klDwgrVAS6G1II63WefPBAAATrBgAAHEskA=\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReturn-Path: scott.stirling@...\r\nX-OriginalArrivalTime: 17 Feb 2004 16:59:07.0703 (UTC) FILETIME=[5B3B4470:01C3F577]\r\nX-eGroups-Remote-IP: 63.68.17.253\r\nFrom: &quot;Stirling, Scott&quot; &lt;scott.stirling@...&gt;\r\nSubject: RE: [junit] Re: Problems testing an InputStream\r\nX-Yahoo-Group-Post: member; u=150177187\r\nX-Yahoo-Profile: stirlingdev\r\n\r\n&gt; From: Craig Duncan [mailto:leftymiata@...]\n&gt; \n&gt; My scenario is that=\r\n I have an xml file that is inside a jar.  When I\n&gt; run the unit test insid=\r\ne Eclipse the file is found and the tests run\n&gt; fine.  I even tried removin=\r\ng the jar from Eclipse&#39;s build path to make\n&gt; sure it was not finding the f=\r\nile in some other location.  The test\n&gt; failed without the jar in the path,=\r\n so I am pretty sure the unit test\n&gt; is finding the file in the jar.\n\nWhere=\r\n in the jar is the XML file?  In the jar root?  Or in the package of the cl=\r\nass that&#39;s retrieving it?  If in the root of the jar, prepend a &quot;/&quot; to the =\r\nresource name.  If it&#39;s packaged in the package directory, don&#39;t.\n \n&gt; Now, =\r\nwhen I run the unit tests from ANT I get a NullPointerException\n&gt; because t=\r\nhe InputStream is Null.  I double checked the classpath that\n&gt; is printed o=\r\nut when the unit test runs and the jar file that contains\n&gt; the xml file is=\r\n on the classpath.\n&gt; \n&gt; Here is the code I am using to read in the xml file=\r\n.  It is pretty\n&gt; much the same as the original poster.\n&gt; \n&gt; // Get our sam=\r\nple input file.\n&gt; InputStream is =3D \n&gt; Class.class.getResourceAsStream(&quot;/R=\r\nunPOEngineTest.xml&quot;);\n&gt; InputStreamReader sr =3D new InputStreamReader(is);=\r\n\n\nWhy are you doing Class.class.getResourceAsStream()?  This will resolve t=\r\nhe resource relative to the classloader that the java.lang.Class class is i=\r\nn, which may or may not be the same as the loader your resource is in, depe=\r\nnding on the classloader hierarchy of the containing application (e.g.., Ec=\r\nlipse, JUnit, Ant) and how your jar is loaded.  If everything is all in a s=\r\ntandalone main() app and everything is in the system classpath, then using =\r\nClass.getResourceAsStream() should work, but, in general and especially in =\r\nJ2EE apps, that&#39;s not a portable way to do it.\n\nAs someone else began to sa=\r\ny:\n\n1. Foo.class.getResourceAsStream(&quot;...&quot;); or this.getClass().getResource=\r\nAsStream(&quot;...&quot;);\n\nThis will look for the resource in the same classloader h=\r\nierarchy as the class calling getResourceAsStream().  getSystemResourceAsSt=\r\nream() shouldn&#39;t ever need to be called if you call getResource/AsStream() =\r\nbecause the system classloader will call it under the covers if necessary w=\r\nithout you doing anything.\n\n2. Thread.currentThread().getContextClassLoader=\r\n().getResourceAsStream(&quot;...&quot;);\n\nThis fallback will work for when the callin=\r\ng class and the resource are in a classloader not in the normal classloader=\r\n search hierarchy (hope I explained that right).  I&#39;ve used it when I had a=\r\n system level class (loaded in the system or other high level classloader) =\r\nthat provided a util method for finding resources in potentially any classl=\r\noader.  In order for the system level class to find resources in lower leve=\r\nl classloaders, such as a web app classloader, you have to get the current =\r\nthread (normally a thread spawned by the app server for handling web reques=\r\nts and loading web app classes), get its classloader and retrieve the resou=\r\nrce from there.  This is a fallback since the higher level classloaders sho=\r\nuld get searched first.\n\nScott Stirling\nWorkscape, Inc.\n\n******************=\r\n*****************************************************\nThis message is inten=\r\nded only for the use of the intended recipient and\nmay contain information =\r\nthat is PRIVILEGED and/or CONFIDENTIAL.  If you\nare not the intended recipi=\r\nent, you are hereby notified that any use,\ndissemination, disclosure or cop=\r\nying of this communication is strictly\nprohibited.  If you have received th=\r\nis communication in error, please\ndestroy all copies of this message and it=\r\ns attachments and notify us\nimmediately.\n**********************************=\r\n*************************************\n\n\n", 
    "profile": "stirlingdev", 
    "topicId": 10290, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 150177187, 
    "prevInTime": 10490, 
    "contentTrasformed": false, 
    "postDate": "1077037147", 
    "canDelete": false, 
    "nextInTopic": 10496, 
    "prevInTopic": 10489, 
    "headers": {
        "messageIdInHeader": "PDcyMDY4Mjk4Q0Q5OTEwNEFBRURFMkZERjg5QUMxNjBENEM0QzhDQGF2YW50aS5jb3JwLndvcmtzY2FwZS5uZXQ+"
    }
}