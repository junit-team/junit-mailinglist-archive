{
    "numMessagesInTopic": 12, 
    "nextInTime": 21297, 
    "senderId": "4BPVojm_Vi77nuzzJuKp2wbaZsUkDEi4sm5kDNCHezv-gsowHw0UZZ4obiDNhft0kGnbkeIUrcEoqITyFf0T7aRl1lDdhvfAnRo_9Q", 
    "systemMessage": true, 
    "subject": "Re: JUnit-JPA (Hibernate) - Spring - Struts2 testing howto", 
    "from": "&quot;majkic@...&quot; &lt;majkic@...&gt;", 
    "authorName": "majkic@ymail.com", 
    "msgSnippet": "I did following: 1. Open Run configuration for BankServiceTest under Classpath - Bootstrap Entries - Add JAR s... 2. ...target/ /WEB-INF/lib", 
    "msgId": 21296, 
    "rawEmail": "Return-Path: &lt;majkic@...&gt;\r\nReceived: (qmail 36085 invoked from network); 16 Jan 2009 11:56:45 -0000\r\nReceived: from unknown (66.218.67.97)\n  by m46.grp.scd.yahoo.com with QMQP; 16 Jan 2009 11:56:45 -0000\r\nReceived: from unknown (HELO n32b.bullet.sp1.yahoo.com) (209.131.38.212)\n  by mta18.grp.scd.yahoo.com with SMTP; 16 Jan 2009 11:56:45 -0000\r\nReceived: from [69.147.65.174] by n32.bullet.sp1.yahoo.com with NNFMP; 16 Jan 2009 11:56:45 -0000\r\nReceived: from [66.218.67.100] by t12.bullet.mail.sp1.yahoo.com with NNFMP; 16 Jan 2009 11:56:45 -0000\r\nX-Sender: majkic@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 90479 invoked from network); 16 Jan 2009 11:48:46 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m47.grp.scd.yahoo.com with QMQP; 16 Jan 2009 11:48:46 -0000\r\nX-Received: from unknown (HELO n17c.bullet.sp1.yahoo.com) (69.147.64.126)\n  by mta18.grp.scd.yahoo.com with SMTP; 16 Jan 2009 11:48:46 -0000\r\nX-Received: from [69.147.65.149] by n17.bullet.sp1.yahoo.com with NNFMP; 16 Jan 2009 11:48:46 -0000\r\nX-Received: from [66.218.67.35] by t9.bullet.mail.sp1.yahoo.com with NNFMP; 16 Jan 2009 11:48:46 -0000\r\nDate: Fri, 16 Jan 2009 11:48:46 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;gkps6u+kvpb@...&gt;\r\nIn-Reply-To: &lt;b9ee5e410901120451s728dcd7buc05a66d3157b4c4f@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;majkic@...&quot; &lt;majkic@...&gt;\r\nSubject: Re: JUnit-JPA (Hibernate) - Spring - Struts2 testing howto\r\nX-Yahoo-Group-Post: member; u=369724152; y=v_m59ZzDaykN1cPD_RriNI65zSiekLHwM_0IiS5zfR3tplctrj4vVSiSNg\r\nX-Yahoo-Profile: majkic@...\r\nX-eGroups-Approved-By: mark_l_salter &lt;marksalter@...&gt; via web; 16 Jan 2009 11:56:43 -0000\r\n\r\nI did following:\n1. Open &quot;Run configuration&quot; for BankServiceTest under\n&quot;Cla=\r\nsspath&quot;-&gt;&quot;Bootstrap Entries&quot;-&gt;Add JAR&#39;s...\n2. ...target/&lt;projectname&gt;/WEB-I=\r\nNF/lib opens\n3. I choose persistence-api-1.0.jar\n4. Apply-Run\n\nHey, it work=\r\ns!!! But...\n\n...you must admit that this is pretty ugly solution, because:\n=\r\n\n1. You need to add this persistance-api to every test class &quot;Run\nconfigura=\r\ntion&quot;\n2. Path to persistence-api is at maven&#39;s target folder, which might\nn=\r\not be there all the time (mvn clean)\n3. If I don&#39;t do &quot;mvn test&quot; first, app=\r\nlicaitonContext-test.xml cannot\nbe found.\n\nI don&#39;t understand the following=\r\n: in &quot;Run configuration&quot; there&#39;s\nBootstrap Entries and User Entries. What&#39;s=\r\n the difference? In &quot;User\nEntries&quot; there&#39;s &quot;Maven Dependencies&quot;. Shouldn&#39;t =\r\nthis be enough for my\ntests to access persistance-api-1.0.jar?\n\nIs there an=\r\ny complete (even the simplest one) example showing how to\ntest JPA-Spring-S=\r\ntruts2? I don&#39;t believe that nobody wrote something\nabout this - at last al=\r\nl these technologies and combination of those\nare mainstream - not some exo=\r\ntic  combination.\n\n--- In junit@yahoogroups.com, &quot;Joakim Ohlrogge&quot; &lt;joakim.=\r\nohlrogge@...&gt;\nwrote:\n&gt;\n&gt; Just a longshot, I have not done any JPA-developme=\r\nnt myself but it\n&gt; looks like you have a different version of  the javax.pe=\r\nrsistance\n&gt; API:s when you run eclipse than when you run in maven. Based on=\r\n that\n&gt; assumption my guess is that you are using a different java-version =\r\nin\n&gt; eclipse than in maven. Ie, eclipse runs with java 1.6 and maven runs\n&gt;=\r\n with java 1.5. (Sometimes API:s make it into the java platform between\n&gt; v=\r\nersions that can lead to this kind of conflicts)\n&gt; \n&gt; In eclipse you can ch=\r\neck your launch for junit to see which jre is used.\n&gt; \n&gt; It could also be t=\r\nhe order of jar-files on your classpath. In that\n&gt; case it&#39;s also possible =\r\nto change the order of the jar-files in the\n&gt; properties for your project. =\r\nMake sure the order matches your pom.\n&gt; \n&gt; Just some things to check, could=\r\n help...\n&gt; \n&gt; On Fri, Jan 9, 2009 at 9:49 AM, Marko Majkic &lt;majkic@...&gt; wro=\r\nte:\n&gt; &gt; It seems that applicationContext-test.xml is read, but there&#39;s fail=\r\nure\n&gt; &gt; trace:\n&gt; &gt; java.lang.NoSuchMethodError:\n&gt; &gt;\njavax.persistence.Persi=\r\nstenceContext.properties()[Ljavax/persistence/PersistenceProperty;\n&gt; &gt; at\n&gt;=\r\n &gt;\norg.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcess=\r\nor$PersistenceElement.&lt;init&gt;(PersistenceAnnotationBeanPostProcessor.java:54=\r\n3)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.orm.jpa.support.PersistenceAnnotationBean=\r\nPostProcessor$2.doWith(PersistenceAnnotationBeanPostProcessor.java:376)\n&gt; &gt;=\r\n at\n&gt; &gt;\norg.springframework.util.ReflectionUtils.doWithMethods(ReflectionUt=\r\nils.java:435)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.util.ReflectionUtils.doWithMet=\r\nhods(ReflectionUtils.java:412)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.orm.jpa.suppo=\r\nrt.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(Persisten=\r\nceAnnotationBeanPostProcessor.java:363)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.orm.=\r\njpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDef=\r\ninition(PersistenceAnnotationBeanPostProcessor.java:296)\n&gt; &gt; at\n&gt; &gt;\norg.spr=\r\ningframework.beans.factory.support.AbstractAutowireCapableBeanFactory.apply=\r\nMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:=\r\n745)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.beans.factory.support.AbstractAutowireC=\r\napableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:448)=\r\n\n&gt; &gt; at\n&gt; &gt;\norg.springframework.beans.factory.support.AbstractAutowireCapab=\r\nleBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)\n&gt; &gt; at jav=\r\na.security.AccessController.doPrivileged(Native Method)\n&gt; &gt; at\n&gt; &gt;\norg.spri=\r\nngframework.beans.factory.support.AbstractAutowireCapableBeanFactory.create=\r\nBean(AbstractAutowireCapableBeanFactory.java:380)\n&gt; &gt; at\n&gt; &gt;\norg.springfram=\r\nework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFac=\r\ntory.java:264)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.beans.factory.support.Default=\r\nSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:221)\n&gt;=\r\n &gt; at\n&gt; &gt;\norg.springframework.beans.factory.support.AbstractBeanFactory.doG=\r\netBean(AbstractBeanFactory.java:261)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.beans.f=\r\nactory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)\n&gt; =\r\n&gt; at\n&gt; &gt;\norg.springframework.beans.factory.support.AbstractBeanFactory.getB=\r\nean(AbstractBeanFactory.java:164)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.beans.fact=\r\nory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultList=\r\nableBeanFactory.java:429)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.context.support.Ab=\r\nstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicatio=\r\nnContext.java:729)\n&gt; &gt; at\n&gt; &gt;\norg.springframework.context.support.AbstractA=\r\npplicationContext.refresh(AbstractApplicationContext.java:381)\n&gt; &gt; at sun.r=\r\neflect.NativeMethodAccessorImpl.invoke0(Native Method)\n&gt; &gt; at\n&gt; &gt;\nsun.refle=\r\nct.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n&gt; &gt; at=\r\n\n&gt; &gt;\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccess=\r\norImpl.java:25)\n&gt; &gt; at java.lang.reflect.Method.invoke(Method.java:597)\n&gt; &gt;=\r\n at\n&gt; &gt;\norg.springframework.test.jpa.AbstractJpaTests.runBare(AbstractJpaTe=\r\nsts.java:230)\n&gt; &gt; at junit.framework.TestResult$1.protect(TestResult.java:1=\r\n06)\n&gt; &gt; at junit.framework.TestResult.runProtected(TestResult.java:124)\n&gt; &gt;=\r\n at junit.framework.TestResult.run(TestResult.java:109)\n&gt; &gt; at junit.framew=\r\nork.TestCase.run(TestCase.java:120)\n&gt; &gt; at junit.framework.TestSuite.runTes=\r\nt(TestSuite.java:230)\n&gt; &gt; at junit.framework.TestSuite.run(TestSuite.java:2=\r\n25)\n&gt; &gt; at\n&gt; &gt;\norg.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestRefer=\r\nence.run(JUnit3TestReference.java:130)\n&gt; &gt; at\n&gt; &gt;\norg.eclipse.jdt.internal.=\r\njunit.runner.TestExecution.run(TestExecution.java:38)\n&gt; &gt; at\n&gt; &gt;\norg.eclips=\r\ne.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java=\r\n:460)\n&gt; &gt; at\n&gt; &gt;\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run=\r\nTests(RemoteTestRunner.java:673)\n&gt; &gt; at\n&gt; &gt;\norg.eclipse.jdt.internal.junit.=\r\nrunner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n&gt; &gt; at\n&gt; &gt;\norg.eclip=\r\nse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:19=\r\n6)\n&gt; &gt;\n&gt; &gt; Maven 2 &quot;mvn test&quot; is working fine.\n&gt; &gt;\n&gt; &gt; On Fri, Jan 9, 2009 =\r\nat 12:49 AM, Cenk =EF=BF=BDivici &lt;cenk.civici@...&gt; wrote:\n&gt; &gt;&gt; Hi,\n&gt; &gt;&gt;\n&gt; &gt;=\r\n&gt; What happens when you try to run this in Eclipse ( I am guessing\nthats\n&gt; =\r\n&gt;&gt; what you mean by running alone). Does it fail when it tries to locate\n&gt; =\r\n&gt;&gt; the app context? Is app context xml on the classpath? What error do\n&gt; &gt;&gt;=\r\n you see?\n&gt; &gt;&gt;\n&gt; &gt;&gt; Cheers\n&gt; &gt;&gt; Cenk\n&gt; &gt;&gt;\n&gt; &gt;&gt; On Thu, Jan 8, 2009 at 7:38 =\r\nPM, Marko Majkic &lt;majkic@...&gt; wrote:\n&gt; &gt;&gt;&gt; Thanks for the reference. I did =\r\nsomething that works, but it works\n&gt; &gt;&gt;&gt; only when I do &quot;mvn test&quot;. I canno=\r\nt run test alone.\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; I use AbstractJpaTests and those two &quot;prepari=\r\nng&quot; methods:\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D\n&gt; &gt;&gt;&gt; package net.beotel.=\r\nservice;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; import java.util.List;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; import javax.persis=\r\ntence.EntityManager;\n&gt; &gt;&gt;&gt; import javax.persistence.EntityManagerFactory;\n&gt;=\r\n &gt;&gt;&gt; import javax.persistence.Persistence;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; import net.beotel.mo=\r\ndel.Bank;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; import org.springframework.test.jpa.AbstractJpaTests;=\r\n\n&gt; &gt;&gt;&gt; import org.springframework.transaction.annotation.Transactional;\n&gt; &gt;=\r\n&gt;&gt;\n&gt; &gt;&gt;&gt; public class BankServiceTest extends AbstractJpaTests {\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;=\r\n&gt; private BankServiceImpl bankService =3D new BankServiceImpl() ;\n&gt; &gt;&gt;&gt;\n&gt; &gt;=\r\n&gt;&gt; private static EntityManagerFactory emf;\n&gt; &gt;&gt;&gt; private static EntityMana=\r\nger em;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; public void onSetUp(){\n&gt; &gt;&gt;&gt; emf =3D Persistence.create=\r\nEntityManagerFactory(&quot;testing1&quot;);\n&gt; &gt;&gt;&gt; em =3D emf.createEntityManager();\n&gt;=\r\n &gt;&gt;&gt; em.getTransaction().begin();\n&gt; &gt;&gt;&gt; bankService.setEntityManager(em);\n&gt;=\r\n &gt;&gt;&gt; }\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; public void onTearDown(){\n&gt; &gt;&gt;&gt; em.getTransaction().comm=\r\nit();\n&gt; &gt;&gt;&gt; }\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; public BankService getBankService() {\n&gt; &gt;&gt;&gt; retur=\r\nn bankService;\n&gt; &gt;&gt;&gt; }\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; public BankServiceTest() {\n&gt; &gt;&gt;&gt; super()=\r\n;\n&gt; &gt;&gt;&gt; }\n&gt; &gt;&gt;&gt; protected String[] getConfigLocations() {\n&gt; &gt;&gt;&gt; return new =\r\nString[] {\n&gt; &gt;&gt;&gt; &quot;classpath:applicationContext-test.xml&quot;,\n&gt; &gt;&gt;&gt; };\n&gt; &gt;&gt;&gt; }\n=\r\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; @Transactional\n&gt; &gt;&gt;&gt; public void testAll() throws Exception {\n&gt;=\r\n &gt;&gt;&gt; List&lt;Bank&gt; banks =3D bankService.findAll();\n&gt; &gt;&gt;&gt; int initialCount =3D=\r\n banks.size();\n&gt; &gt;&gt;&gt; Bank bank=3D new Bank();\n&gt; &gt;&gt;&gt; bank.setName(&quot;OTP&quot;);\n&gt; =\r\n&gt;&gt;&gt; bankService.save(bank);\n&gt; &gt;&gt;&gt; assertNotNull(bank.getId());\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; =\r\n}\n&gt; &gt;&gt;&gt; }\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Is there any way=\r\n to run this test alone? Do I have to include\n&gt; &gt;&gt;&gt; &quot;applicationContext-tes=\r\nt.xml&quot; (from the src/test/resources)\nexplicitly\n&gt; &gt;&gt;&gt; in the code? I don&#39;t =\r\nhave to do this with my application (include\n&gt; &gt;&gt;&gt; applicationContext.xml f=\r\nrom the web.xml). Do I have to include\n&gt; &gt;&gt;&gt; explcitly persistence-unit?\n&gt; =\r\n&gt;&gt;&gt;\n&gt; &gt;&gt;&gt; At last, is there any working example (simple) testing some servi=\r\nce\n&gt; &gt;&gt;&gt; (dao) using JPA? Thanks.\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; On Wed, Jan 7, 2009 at 8:58 P=\r\nM, Cenk =EF=BF=BDivici &lt;cenk.civici@...&gt;\n&gt; &gt;&gt;&gt; wrote:\n&gt; &gt;&gt;&gt;&gt; Hi,\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;=\r\n&gt;&gt;&gt; Have you looked at Spring integration testing support?\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; =\r\n&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\nhttp://static.springframework.org/spring/docs/2.5.x/refe=\r\nrence/testing.html#testcontext-framework\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; Spring TestContext l=\r\nets you load an app context, configure\n&gt; &gt;&gt;&gt;&gt; transactions per fixture/meth=\r\nod etc.\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; Cheers\n&gt; &gt;&gt;&gt;&gt; Cenk =EF=BF=BDivici\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; On We=\r\nd, Jan 7, 2009 at 1:39 AM, majkic@... &lt;majkic@...&gt;\n&gt; &gt;&gt;&gt;&gt; wrote:\n&gt; &gt;&gt;&gt;&gt;&gt; Hi=\r\n guys,\n&gt; &gt;&gt;&gt;&gt;&gt; I&#39;m new in the group and I couldn&#39;t find anything on testing=\r\n\n&gt; &gt;&gt;&gt;&gt;&gt; combination in the title.\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; I have applicationContex=\r\nt.xml where EntityManagerFactory is\n&gt; &gt;&gt;&gt;&gt;&gt; configured. Model classes are m=\r\napped using Annotations. My service\n&gt; &gt;&gt;&gt;&gt;&gt; classes (DAO - for example Bank=\r\nImpl) implements interfaces (for\n&gt; &gt;&gt;&gt;&gt;&gt; example Bank). Methods from these =\r\nimplementation are called in\nStruts2\n&gt; &gt;&gt;&gt;&gt;&gt; action classes (injected).\n&gt; &gt;=\r\n&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; How can I configure my tests to be runnable as single tests an=\r\nd as\n&gt; &gt;&gt;&gt;&gt;&gt; Maven2 tests? Is there any simple example - tutorial? Should I=\r\n\nhave\n&gt; &gt;&gt;&gt;&gt;&gt; separate applicationContext-test.xml?\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n=\r\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt; \n&gt; \n&gt; \n&gt; \n&gt; -- \n&gt; --------------------=\r\n---------------------------------\n&gt; Joakim Ohlrogge\n&gt; Agical AB\n&gt; V=EF=BF=\r\n=BDsterl=EF=BF=BDnggatan 79, 2 tr\n&gt; 111 29 Stockholm, SWEDEN\n&gt; \n&gt; Mobile: +=\r\n46-708-754004\n&gt; Blog: johlrogge.wordpress.com\n&gt; E-mail: joakim.ohlrogge@...=\r\n\n&gt;\n\n\n\n", 
    "profile": "majkic@ymail.com", 
    "topicId": 21269, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 369724152, 
    "prevInTime": 21295, 
    "contentTrasformed": false, 
    "postDate": "1232106526", 
    "canDelete": false, 
    "nextInTopic": 21300, 
    "prevInTopic": 21278, 
    "headers": {
        "inReplyToHeader": "PGI5ZWU1ZTQxMDkwMTEyMDQ1MXM3MjhkY2Q3YnVjMDVhNjZkMzE1N2I0YzRmQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGdrcHM2dStrdnBiQGVHcm91cHMuY29tPg=="
    }
}