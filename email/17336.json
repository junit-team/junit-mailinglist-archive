{
    "numMessagesInTopic": 4, 
    "nextInTime": 17337, 
    "senderId": "g2le_Nue8y_kRpaX471P6iBoNNLffL5aTM8RVWm7J-DeUdX5Fe_eVBAhgA2qDywd5hxBJijZlA11somTL63hzHDvsZO0vGD82R6sQjl09sg", 
    "systemMessage": false, 
    "subject": "Re: [junit] newbee: junit 4.1 tests fail", 
    "from": "&quot;Lasse Koskela&quot; &lt;lasse.koskela@...&gt;", 
    "authorName": "Lasse Koskela", 
    "msgSnippet": "Hi Kent, The problem is due to JUnitCoreTest.java using ; as a path separator. Replacing that line with String classPath= ", 
    "msgId": 17336, 
    "profile": "lassekoskela", 
    "topicId": 17131, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190530936, 
    "messageBody": "<div id=\"ygrps-yiv-1801235326\">Hi Kent,<br/>\n<br/>\nThe problem is due to JUnitCoreTest.java using &quot;;&quot; as a path<br/>\nseparator. Replacing that line with<br/>\n<br/>\n\t\tString classPath=<br/>\ngetClass().getClassLoader().getResource(&quot;.&quot;).getFile() +<br/>\nSystem.getProperty(&quot;path.separator&quot;) +<br/>\nSystem.getProperty(&quot;java.class.path&quot;);<br/>\n<br/>\nshould do the trick. And when it does, you might want to extract a<br/>\nmethod there... ;-)<br/>\n<br/>\nAlso, simply reading the InputStream you get from<br/>\nProcess#getInputStream() might not be sufficient for all<br/>\ncases--sometimes, doing that causes the thread to hang forever. The<br/>\n&quot;correct&quot; way to do it would be to read both<br/>\n&quot;Process#getInputStream()&quot; and &quot;Process#getErrorStream()&quot; in separate<br/>\nthreads, having the calling thread &quot;join()&quot; those two, and only then<br/>\ninvoking &quot;Process#waitFor()&quot;.<br/>\n<br/>\nI.e. something like this:<br/>\n<br/>\n<br/>\n\tprivate void consumeOutput(Process process) throws InterruptedException {<br/>\n\t\tInputStream stdout = process.getInputStream();<br/>\n\t\tInputStream stderr = process.getErrorStream();<br/>\n\t\tThread stdoutConsumer = new StreamConsumer(stdout);<br/>\n\t\tThread stderrConsumer = new StreamConsumer(stderr);<br/>\n\t\tstdoutConsumer.start();<br/>\n\t\tstderrConsumer.start();<br/>\n\t\tstdoutConsumer.join();<br/>\n\t\tstderrConsumer.join();<br/>\n\t}<br/>\n\t<br/>\n\tprivate class StreamConsumer extends Thread {<br/>\n\t\tprivate InputStream stream;<br/>\n<br/>\n\t\tpublic StreamConsumer(InputStream stream){<br/>\n\t\t\tthis.stream= stream;<br/>\n\t\t}<br/>\n<br/>\n\t\t@Override<br/>\n\t\tpublic void run() {<br/>\n\t\t\ttry {<br/>\n\t\t\t\tint r = -1;<br/>\n\t\t\t\twhile((r = stream.read()) != -1){<br/>\n\t\t\t\t\tSystem.out.write(r);<br/>\n\t\t\t\t}<br/>\n\t\t\t} catch (IOException e) {<br/>\n\t\t\t\tthrow new RuntimeException(e);<br/>\n\t\t\t}<br/>\n\t\t}\t\t<br/>\n\t}<br/>\n<br/>\n<br/>\nHope this helps,<br/>\n Lasse<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 7/14/06, Kent Beck &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:kentb@...\">kentb@...</a>&gt; wrote:<br/>\n&gt; Patrick,<br/>\n&gt;<br/>\n&gt;  There is already a defect on SourceForge for this. It works on Windows, but<br/>\n&gt;  not on Linux or OS X. If I start a VM on those OSes and the child VM invokes<br/>\n&gt;  System.exit(n), then the parent VM doesn&#39;t necessarily get n back when it<br/>\n&gt;  calls waitFor() on the Process.<br/>\n&gt;<br/>\n&gt;  Does anyone know how to portably communicate a termination code?<br/>\n&gt;<br/>\n&gt;  Regards,<br/>\n&gt;<br/>\n&gt;  Kent Beck<br/>\n&gt;  Three Rivers Institute<br/>\n&gt;<br/>\n&gt;  _____<br/>\n&gt;<br/>\n&gt;  From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of<br/>\n&gt;  Patrick Gundlach<br/>\n&gt;  Sent: Thursday, July 13, 2006 3:40 AM<br/>\n&gt;  To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt;  Subject: [junit] newbee: junit 4.1 tests fail<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;  Hi,<br/>\n&gt;<br/>\n&gt;  I am a complete newbee to junit (and my java is rusted, as well): I<br/>\n&gt;  downloaded junit 4.1 and ran the test, but they fail (see below). Do I<br/>\n&gt;  have to be worried? What am I doing wrong? I Tried on Mac OS X and Linux.<br/>\n&gt;<br/>\n&gt;  Patrick<br/>\n&gt;  --------------------------------------------------<br/>\n&gt;<br/>\n&gt;  java version &quot;1.5.0_06&quot;<br/>\n&gt;  Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-112)<br/>\n&gt;  Java HotSpot(TM) Client VM (build 1.5.0_06-64, mixed mode, sharing)<br/>\n&gt;<br/>\n&gt;  --------------------------------------------------<br/>\n&gt;  CLASSPATH is:<br/>\n&gt;  :/Users/pg/java/junit4.1/junit-4.1.jar<br/>\n&gt;<br/>\n&gt;  --------------------------------------------------<br/>\n&gt;<br/>\n&gt;  ~/java/junit4.1$ java org.junit.runner.JUnitCore org.junit.tests.AllTests<br/>\n&gt;  JUnit version 4.1<br/>\n&gt;  ...............................................I............................<br/>\n&gt;  ............................................................................<br/>\n&gt;  ............................................................................<br/>\n&gt;  ....I.............................E.<br/>\n&gt;  Time: 7,177<br/>\n&gt;  There was 1 failure:<br/>\n&gt;  1) failureCausesExitCodeOf1(org.junit.tests.JUnitCoreTest)<br/>\n&gt;  java.lang.AssertionError: expected:&lt;1&gt; but was:&lt;0&gt;<br/>\n&gt;  at org.junit.Assert.fail(Assert.java:69)<br/>\n&gt;  at org.junit.Assert.failNotEquals(Assert.java:314)<br/>\n&gt;  at org.junit.Assert.assertEquals(Assert.java:94)<br/>\n&gt;  at org.junit.Assert.assertEquals(Assert.java:104)<br/>\n&gt;  at org.junit.tests.JUnitCoreTest.runClass(JUnitCoreTest.java:41)<br/>\n&gt;  at<br/>\n&gt;  org.junit.tests.JUnitCoreTest.failureCausesExitCodeOf1(JUnitCoreTest.java:22<br/>\n&gt;  )<br/>\n&gt;  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>\n&gt;  at<br/>\n&gt;  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39<br/>\n&gt;  )<br/>\n&gt;  at<br/>\n&gt;  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl<br/>\n&gt;  .java:25)<br/>\n&gt;  at java.lang.reflect.Method.invoke(Method.java:585)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.TestMethodRunner.executeMethodBody(TestMethodRunn<br/>\n&gt;  er.java:99)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.TestMethodRunner.runUnprotected(TestMethodRunner.<br/>\n&gt;  java:81)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterR<br/>\n&gt;  unner.java:34)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.TestMethodRunner.runMethod(TestMethodRunner.java:<br/>\n&gt;  75)<br/>\n&gt;  at org.junit.internal.runners.TestMethodRunner.run(TestMethodRunner.java:45)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.TestClassMethodsRunner.invokeTestMethod(TestClass<br/>\n&gt;  MethodsRunner.java:71)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.TestClassMethodsRunner.run(TestClassMethodsRunner<br/>\n&gt;  .java:35)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.<br/>\n&gt;  java:42)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterR<br/>\n&gt;  unner.java:34)<br/>\n&gt;  at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)<br/>\n&gt;  at org.junit.internal.runners.CompositeRunner.run(CompositeRunner.java:29)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.<br/>\n&gt;  java:42)<br/>\n&gt;  at<br/>\n&gt;  org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterR<br/>\n&gt;  unner.java:34)<br/>\n&gt;  at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)<br/>\n&gt;  at org.junit.internal.runners.CompositeRunner.run(CompositeRunner.java:29)<br/>\n&gt;  at org.junit.runner.JUnitCore.run(JUnitCore.java:121)<br/>\n&gt;  at org.junit.runner.JUnitCore.run(JUnitCore.java:100)<br/>\n&gt;  at org.junit.runner.JUnitCore.run(JUnitCore.java:91)<br/>\n&gt;  at org.junit.runner.JUnitCore.runMain(JUnitCore.java:75)<br/>\n&gt;  at org.junit.runner.JUnitCore.main(JUnitCore.java:42)<br/>\n&gt;<br/>\n&gt;  FAILURES!!!<br/>\n&gt;  Tests run: 261, Failures: 1<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;  [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;                   <br/>\n<br/>\n<br/>\n<br/>\n-- <br/>\nLasse Koskela<br/>\nJavaRanch Publisher Contact<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:lasse@...\">lasse@...</a> </span></blockquote></div>", 
    "prevInTime": 17335, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1154988855", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 17135, 
    "headers": {
        "inReplyToHeader": "PDAxOTYwMWM2YTc2NSQzYzczNjlkMCQ2NDAxYThjMEBUNDI+", 
        "messageIdInHeader": "PDM5NzVlMmQxMDYwODA3MTUxNHY2OTRhOGE5MXNhMmQ3MmE1N2Q1NDJiOTViQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PG0yazY2aHNzOHouZnNmQGxldmFuYS5kZT4gPDAxOTYwMWM2YTc2NSQzYzczNjlkMCQ2NDAxYThjMEBUNDI+"
    }
}