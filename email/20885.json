{
    "numMessagesInTopic": 2, 
    "nextInTime": 20886, 
    "senderId": "_aOxpPjpm0P0TT8y-p0rPIJwj2n55jMKgl6n6g3aEGABO0lR7ENSRQnGfd_QaZk488HgxmVS4af-mtjzkFXhF4eRkpI", 
    "systemMessage": false, 
    "subject": "Re: [junit] how to test exception condition", 
    "from": "&quot;David Saff&quot; &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Can you use JUnit 4? David Saff", 
    "msgId": 20885, 
    "profile": "dsaff", 
    "topicId": 20883, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "messageBody": "<div id=\"ygrps-yiv-1374033615\">Can you use JUnit 4?<br/>\n<br/>\n   David Saff<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Tue, Sep 16, 2008 at 5:49 PM, sushil_d10 &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:sushil_d10@...\">sushil_d10@...</a>&gt; wrote:<br/>\n&gt; i am trying to write a test case for the exception scenario.<br/>\n&gt; my code looks as below.<br/>\n&gt;<br/>\n&gt; public ActionForward execute(ActionMapping mapping, ActionForm<br/>\n&gt; actionForm, HttpServletRequest request, HttpServletResponse response)<br/>\n&gt; throws Exception {<br/>\n&gt; ActionForward actionforward =<br/>\n&gt; null;<br/>\n&gt; try{<br/>\n&gt; SimpleDateFormat format =<br/>\n&gt; new SimpleDateFormat(ReportingConstant.DATE_FORMAT);<br/>\n&gt; ReportRequest reportReq =<br/>\n&gt; new ReportRequest();<br/>\n&gt; String distID = request.getParameter(<br/>\n&gt; &quot;distId&quot;);<br/>\n&gt; String beginDate = request.getParameter(<br/>\n&gt; &quot;beginDate&quot;);<br/>\n&gt; String endDate = request.getParameter(<br/>\n&gt; &quot;endDate&quot;);<br/>\n&gt; if(null != beginDate){<br/>\n&gt; reportReq.setBeginDate(format.parse(beginDate));<br/>\n&gt; }<br/>\n&gt; else{<br/>\n&gt; LOG.error(&quot;Begin date not present in the received form &quot;);<br/>\n&gt; throw new ReportingException(&quot;Begin date not present in the received<br/>\n&gt; form&quot;);<br/>\n&gt; }<br/>\n&gt; if(null != endDate){<br/>\n&gt; reportReq.setEndDate(format.parse(endDate));<br/>\n&gt; }<br/>\n&gt; else{<br/>\n&gt; LOG.error(&quot;End date not present in the received form &quot;);<br/>\n&gt; throw new ReportingException(&quot;End date not present in the received<br/>\n&gt; form&quot;);<br/>\n&gt; }<br/>\n&gt; if(null != distID){<br/>\n&gt; reportReq.setDistributorId(distID);<br/>\n&gt; }<br/>\n&gt; else{<br/>\n&gt; LOG.error(&quot;Distributor Id not present in the received form &quot;);<br/>\n&gt; throw new ReportingException(&quot;Distributor Id not present in the<br/>\n&gt; received form &quot;);<br/>\n&gt; }<br/>\n&gt; some code....<br/>\n&gt; }<br/>\n&gt; catch(Exception e){<br/>\n&gt; LOG.error(&quot;Error sending XLS file to the client &quot;,e);<br/>\n&gt; actionforward = mapping.findForward(<br/>\n&gt; &quot;exception&quot;);<br/>\n&gt; }<br/>\n&gt; return actionforward;<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; now i would like to test a execute method for exception i.e. i am<br/>\n&gt; expecting that if the request obj do not have any parameters set then<br/>\n&gt; my code will throw an exception.<br/>\n&gt; and i need to verify that.<br/>\n&gt; my test case method is like..<br/>\n&gt; public void testDownloadXLSReportFailure()throws Exception{<br/>\n&gt; httpServletRequestMock.expects(once())<br/>\n&gt; .method(<br/>\n&gt; &quot;getParameter&quot;)<br/>\n&gt; .with(eq(<br/>\n&gt; &quot;distId&quot;))<br/>\n&gt; .will(returnValue(<br/>\n&gt; null));<br/>\n&gt; request<br/>\n&gt; = (HttpServletRequest)httpServletRequestMock.proxy();<br/>\n&gt; try{<br/>\n&gt; ActionForward forward =<br/>\n&gt; downloadReportAction.execute(actionMapping, reportForm, request,<br/>\n&gt; response);<br/>\n&gt; fail(<br/>\n&gt; &quot;Error ..&quot;);<br/>\n&gt; }<br/>\n&gt; catch(Exception e){<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; org.jmock.core.DynamicMockError: mockHttpServletRequest: unexpected<br/>\n&gt; invocation<br/>\n&gt; Invoked: mockHttpServletRequest.getParameter(&quot;beginDate&quot;)<br/>\n&gt; Allowed:<br/>\n&gt; expected once and has been invoked: getParameter( eq(&quot;distId&quot;) ),<br/>\n&gt; returns null<br/>\n&gt; at org.jmock.core.AbstractDynamicMock.mockInvocation<br/>\n&gt; (AbstractDynamicMock.java:58)<br/>\n&gt; at org.jmock.cglib.CGLIBCoreMock.intercept(CGLIBCoreMock.java:71)<br/>\n&gt; at<br/>\n&gt; $javax.servlet.http.HttpServletRequest$$EnhancerByCGLIB$$7c120c24.getP<br/>\n&gt; arameter(&lt;generated&gt;)<br/>\n&gt; at<br/>\n&gt; com.toro.rebate.reporting.struts.action.DownloadXLSCommercialReportAct<br/>\n&gt; ion.execute(DownloadXLSCommercialReportAction.java:47)<br/>\n&gt; at<br/>\n&gt; com.toro.rebate.reporting.struts.action.DownloadXLSCommercialReportAct<br/>\n&gt; ionTest.testDownloadXLSReportFailure<br/>\n&gt; (DownloadXLSCommercialReportActionTest.java:116)<br/>\n&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>\n&gt; at sun.reflect.NativeMethodAccessorImpl.invoke<br/>\n&gt; (NativeMethodAccessorImpl.java:39)<br/>\n&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke<br/>\n&gt; (DelegatingMethodAccessorImpl.java:25)<br/>\n&gt; at java.lang.reflect.Method.invoke(Method.java:597)<br/>\n&gt; at junit.framework.TestCase.runTest(TestCase.java:154)<br/>\n&gt; at org.jmock.core.VerifyingTestCase.runBare<br/>\n&gt; (VerifyingTestCase.java:39)<br/>\n&gt; at junit.framework.TestResult$1.protect(TestResult.java:106)<br/>\n&gt; at junit.framework.TestResult.runProtected(TestResult.java:124)<br/>\n&gt; at junit.framework.TestResult.run(TestResult.java:109)<br/>\n&gt; at junit.framework.TestCase.run(TestCase.java:118)<br/>\n&gt; at junit.framework.TestSuite.runTest(TestSuite.java:208)<br/>\n&gt; at junit.framework.TestSuite.run(TestSuite.java:203)<br/>\n&gt; at<br/>\n&gt; org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run<br/>\n&gt; (JUnit3TestReference.java:128)<br/>\n&gt; at org.eclipse.jdt.internal.junit.runner.TestExecution.run<br/>\n&gt; (TestExecution.java:38)<br/>\n&gt; at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests<br/>\n&gt; (RemoteTestRunner.java:460)<br/>\n&gt; at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests<br/>\n&gt; (RemoteTestRunner.java:673)<br/>\n&gt; at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run<br/>\n&gt; (RemoteTestRunner.java:386)<br/>\n&gt; at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main<br/>\n&gt; (RemoteTestRunner.java:196)<br/>\n&gt; can sombody tell me how do i chk the exception condition here?<br/>\n&gt;<br/>\n&gt; thanks,<br/>\n&gt; sush<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 20884, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1221615572", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 20883, 
    "headers": {
        "inReplyToHeader": "PGdhcDlraStvMHVmQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDgwOTE2MTgzOW8zMGM4MTMwYXNmNWUwZDMzMDM3MTYyODAwQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGdhcDlraStvMHVmQGVHcm91cHMuY29tPg=="
    }
}