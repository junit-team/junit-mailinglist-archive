{
    "numMessagesInTopic": 8, 
    "nextInTime": 22938, 
    "senderId": "a6Ed8XbHDP1G26YNfkBiL6-A5GfgF8Dja1dd1hhAJNRzPxo91OTwxlzvp0LEwnt3xH0RidjPj2nw-xnsJTcBNaF0", 
    "systemMessage": false, 
    "subject": "Re: [junit] Common Test Runner for JVM", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Esko, There s a lot going on here, and good luck to you.  I m happy to keep talking about this.  However, it will be easier for me (and possibly for the group)", 
    "msgId": 22937, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 92978 invoked from network); 13 Sep 2010 19:34:36 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m11.grp.re1.yahoo.com with QMQP; 13 Sep 2010 19:34:36 -0000\r\nX-Received: from unknown (HELO mail-gy0-f170.google.com) (209.85.160.170)\n  by mta2.grp.re1.yahoo.com with SMTP; 13 Sep 2010 19:34:36 -0000\r\nX-Received: by gyd10 with SMTP id 10so3158353gyd.15\n        for &lt;junit@yahoogroups.com&gt;; Mon, 13 Sep 2010 12:34:35 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.90.84.1 with SMTP id h1mr3005258agb.78.1284406475190; Mon, 13\n Sep 2010 12:34:35 -0700 (PDT)\r\nX-Received: by 10.91.53.20 with HTTP; Mon, 13 Sep 2010 12:34:35 -0700 (PDT)\r\nIn-Reply-To: &lt;4C8E791D.5040704@...&gt;\r\nReferences: &lt;4C8BFDE7.3010603@...&gt;\n\t&lt;AANLkTin4AXk8BGcbXGfm68KQFzLqbVzk+m22CrcUgRt1@...&gt;\n\t&lt;AANLkTim11ORO68irFhHrVCBvqH8vK9BQG26wiUxWd9Zd@...&gt;\n\t&lt;4C8E791D.5040704@...&gt;\r\nDate: Mon, 13 Sep 2010 15:34:35 -0400\r\nX-Google-Sender-Auth: uOZD7WwY1aiVJKUy7nCm5AYV8-U\r\nMessage-ID: &lt;AANLkTi=7QHBBHU98T6L31kXQxEpQLPGtNTc=GXLiLmMC@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nFrom: David Saff &lt;david@...&gt;\r\nSubject: Re: [junit] Common Test Runner for JVM\r\nX-Yahoo-Group-Post: member; u=341876227; y=9n9YhFlCrumwA0uqLrhdECpWlwQlSBjOHS9NW2UvmPE\r\nX-Yahoo-Profile: dsaff\r\n\r\nEsko,\n\nThere&#39;s a lot going on here, and good luck to you.  I&#39;m happy to kee=\r\np\ntalking about this.  However, it will be easier for me (and possibly\nfor =\r\nthe group) to Think Global, Act Local.  Prioritize the list of\nthings you w=\r\nant to be different about your environment, and tackle\nthem one at a time. =\r\n Good luck,\n\n   David Saff\n\nOn Mon, Sep 13, 2010 at 3:18 PM, Esko Luontola =\r\n&lt;esko.luontola@...&gt; wrote:\n&gt;&gt; =A0&gt; I notice that a\n&gt;&gt; =A0&gt; number of =\r\nthe issues you&#39;re tackling are mostly about IDE\n&gt;&gt; =A0&gt; integration\n&gt;\n&gt; Yes=\r\n. In addition to programming I do also interaction design, and\n&gt; usability =\r\nis very important to me. My development process is to first\n&gt; design the UI=\r\n and after that think about what is needed to implement it.\n&gt; Quite many ti=\r\nmes a good user interface affects all levels of the\n&gt; implementation.\n&gt;\n&gt;\n&gt;=\r\n&gt; =A0&gt; I wonder if thinking about the interface you wish IDEs\n&gt;&gt; =A0&gt; would=\r\n talk to, and then getting at least one IDE to agree to it, would\n&gt;&gt; =A0&gt; b=\r\ne a good approach.\n&gt;\n&gt; Yes, that&#39;s what I&#39;m planning. As Linus Torvalds say=\r\ns, &quot;Talk is cheap.\n&gt; Show me the code.&quot;\n&gt;\n&gt; My current plan is to implement=\r\n a minimal set of features, create a UI\n&gt; and integrate it with IntelliJ ID=\r\nEA. Then people can better see what\n&gt; this is all about, and can better dec=\r\nide whether it&#39;s something that\n&gt; they like. I will setup a dedicated maili=\r\nng list and contact the major\n&gt; tool vendors after I have something working=\r\n to show (right now I&#39;m only\n&gt; gauging some interest on JUnit, scala-tools =\r\nand simple-build-tool\n&gt; mailing lists).\n&gt;\n&gt;\n&gt;&gt; I think the main advantage t=\r\no being able to count the tests before\n&gt;&gt; you run\n&gt;&gt; them is that is that y=\r\nou can make a progress bar that gives feedback to the\n&gt;&gt; user as the tests =\r\nrun. That&#39;s a really nice feature in GUI test runners that\n&gt;&gt; is lost if yo=\r\nu can&#39;t count tests in advance. It would be possible to make\n&gt;&gt; the advance=\r\n test count an optional feature, but then when tests can&#39;t be\n&gt;&gt; counted, y=\r\nou couldn&#39;t show a progress bar. And I think that would be a\n&gt;&gt; pretty big =\r\nloss.\n&gt;\n&gt; I&#39;ve thought about that. It&#39;s possible to measure progress at lea=\r\nst on\n&gt; the class level. And within a class, the completion of a class can =\r\nbe\n&gt; approximated as more tests are discovered.\n&gt;\n&gt; I&#39;m also planning on ma=\r\nking the tool remember statistics from previous\n&gt; test runs (and do some cl=\r\nassloader caching of external libraries, to\n&gt; speed up the test runs), so a=\r\nfter the first test run the tool will know\n&gt; quite accurately that how many=\r\n tests there are and how long each of them\n&gt; takes to execute.\n&gt;\n&gt; I&#39;ve als=\r\no thought about some ways to detect which classes are covered by\n&gt; a test, =\r\nwhich information can be used to run first the tests for the\n&gt; recently mod=\r\nified classes. So there might be some features similar to\n&gt; JUnit Max (I ha=\r\nven&#39;t used Max because it&#39;s not available on IntelliJ IDEA).\n&gt;\n&gt;\n&gt;&gt; =A0&gt; In=\r\n terms of IDE integration, JUnit just reports a tree of\n&gt;&gt; =A0&gt; Description=\r\ns, and results against them. Runners are free to structure\n&gt;&gt; =A0&gt; these tr=\r\nees however they wish. Have you run into IDE limitations for\n&gt;&gt; =A0&gt; displa=\r\nying/interacting with these trees?\n&gt;&gt; =A0&gt;\n&gt;&gt; I would question the need for=\r\n nesting tests. I can easily see the benefit\n&gt;&gt; of nesting closures in test=\r\n code. Several traits in ScalaTest do that, but\n&gt;&gt; the model I use in Scala=\r\nTest is that each leaf node is one test. The\n&gt;&gt; closures surrounding the le=\r\naf nodes are descriptions, not tests themselves.\n&gt;&gt; I would think you and E=\r\nric could adopt that approach in Specs and Specsy\n&gt;&gt; without much trouble.\n=\r\n&gt;\n&gt; It would be possible for me to detect the leaf nodes after the tests\n&gt; =\r\nhave been run, but I prefer the UI to show the correct mental model of\n&gt; wh=\r\nat is happening during test runs.\n&gt;\n&gt; To illustrate, here is a partial vers=\r\nion of one of Specsy&#39;s example\n&gt; specs with some println() debug statements=\r\n.\n&gt;\n&gt; @RunWith(classOf[Specsy])\n&gt; class StackSpec extends Spec {\n&gt; =A0 val =\r\nstack =3D new scala.collection.mutable.Stack[String]\n&gt; =A0 println(stack)\n&gt;=\r\n\n&gt; =A0 &quot;When objects have been pushed onto a stack&quot; &gt;&gt; {\n&gt; =A0 =A0 stack.pu=\r\nsh(&quot;pushed first&quot;)\n&gt; =A0 =A0 stack.push(&quot;pushed last&quot;)\n&gt; =A0 =A0 println(st=\r\nack)\n&gt;\n&gt; =A0 =A0 &quot;the object pushed last is popped first&quot; &gt;&gt; {\n&gt; =A0 =A0 =\r\n=A0 val poppedFirst =3D stack.pop()\n&gt; =A0 =A0 =A0 assertThat(poppedFirst, i=\r\ns(&quot;pushed last&quot;))\n&gt; =A0 =A0 =A0 println(stack)\n&gt; =A0 =A0 }\n&gt; =A0 =A0 &quot;the o=\r\nbject pushed first is popped last&quot; &gt;&gt; {\n&gt; =A0 =A0 =A0 stack.pop()\n&gt; =A0 =A0=\r\n =A0 val poppedLast =3D stack.pop()\n&gt; =A0 =A0 =A0 assertThat(poppedLast, is=\r\n(&quot;pushed first&quot;))\n&gt; =A0 =A0 =A0 println(stack)\n&gt; =A0 =A0 }\n&gt; =A0 }\n&gt; }\n&gt;\n&gt; =\r\nTo execute that, Specsy needs to instantiate and run the class two\n&gt; times.=\r\n The first test run will print:\n&gt;\n&gt; Stack()\n&gt; Stack(pushed last, pushed fir=\r\nst)\n&gt; Stack(pushed first)\n&gt;\n&gt; The second test run will print:\n&gt;\n&gt; Stack()\n&gt;=\r\n Stack(pushed last, pushed first)\n&gt; Stack()\n&gt;\n&gt; My vision is that the UI wo=\r\nuld visualize where one test ends and another\n&gt; begins. It would provide th=\r\ne same information as the following examples\n&gt; (but better visualized ;).\n&gt;=\r\n\n&gt; Test run 1:\n&gt;\n&gt; -- &lt;net.orfjackal.specsy.examples.StackSpec&gt;\n&gt; Stack()\n&gt;=\r\n -- =A0 =A0 &lt;When objects have been pushed onto a stack&gt;\n&gt; Stack(pushed las=\r\nt, pushed first)\n&gt; -- =A0 =A0 =A0 =A0 &lt;the object pushed last is popped fir=\r\nst&gt;\n&gt; Stack(pushed first)\n&gt; -- =A0 =A0 =A0 =A0 &lt;/the object pushed last is =\r\npopped first&gt;\n&gt; -- =A0 =A0 &lt;/When objects have been pushed onto a stack&gt;\n&gt; =\r\n-- &lt;/net.orfjackal.specsy.examples.StackSpec&gt;\n&gt;\n&gt; Test run 2:\n&gt;\n&gt; -- &lt;net.o=\r\nrfjackal.specsy.examples.StackSpec&gt;\n&gt; Stack()\n&gt; -- =A0 =A0 &lt;When objects ha=\r\nve been pushed onto a stack&gt;\n&gt; Stack(pushed last, pushed first)\n&gt; -- =A0 =\r\n=A0 =A0 =A0 &lt;the object pushed first is popped last&gt;\n&gt; Stack()\n&gt; -- =A0 =A0=\r\n =A0 =A0 &lt;/the object pushed first is popped last&gt;\n&gt; -- =A0 =A0 &lt;/When obje=\r\ncts have been pushed onto a stack&gt;\n&gt; -- &lt;/net.orfjackal.specsy.examples.Sta=\r\nckSpec&gt;\n&gt;\n&gt; Then when I select &quot;StackSpec&quot; or &quot;When objects have been pushe=\r\nd onto a\n&gt; stack&quot; in the tree of tests shown by the UI, it would show both =\r\nof those\n&gt; test runs, because those tests were included in both of them. Bu=\r\nt if I\n&gt; select &quot;the object pushed last is popped first&quot; then it will show =\r\nonly\n&gt; test run 1, and if I select &quot;the object pushed first is popped last&quot;=\r\n it\n&gt; will show only test run 2.\n&gt;\n&gt;\n&gt;&gt; =A0&gt; That assumption is in the IDE&#39;=\r\ns. It&#39;s a useful one, but it&#39;s neither\n&gt;&gt; =A0&gt; required nor assumed by JUni=\r\nt itself.\n&gt;\n&gt; True. I would like to make that concept explicit, so that the=\r\n testing\n&gt; framework could help the IDE with code navigation.\n&gt;\n&gt;\n&gt;&gt; =A0&gt; W=\r\ne&#39;ve taken several stabs at this. The biggest hurdle is how to\n&gt;&gt; =A0&gt; exte=\r\nnd the test-definition language: while many tests can be\n&gt;&gt; =A0&gt; paralleliz=\r\ned without cost, and test writers should not depend on\n&gt;&gt; =A0&gt; order, they =\r\ncurrently might depend on only test being written at the\n&gt;&gt; =A0&gt; time.\n&gt;\n&gt; =\r\nI&#39;ve been thinking whether to make parallelization enabled by default.\n&gt; =\r\n=A0From a usability point of view, I would prefer to &quot;design for one user&quot;\n=\r\n&gt; (as advocated for example by Alan Cooper) and as such I&#39;m tempted to\n&gt; wr=\r\nite the test runner for programmers who write tests which don&#39;t depend\n&gt; on=\r\n any global state (i.e. I would design it for myself :).\n&gt;\n&gt; For tests whic=\r\nh cannot be executed safely in parallel, my plan is to\n&gt; make it possible t=\r\no annotate the class with @LocallySequential or\n&gt; @GloballySequential. The =\r\nfirst annotation would still allow running\n&gt; tests from other classes in pa=\r\nrallel, but the second annotation would\n&gt; execute this one test class all a=\r\nlone.\n&gt;\n&gt;\n&gt;&gt; =A0&gt; Test discovery seems to be yet another feature of a commo=\r\nn IDE interface.\n&gt;\n&gt; And build tools.\n&gt;\n&gt; One thing that I&#39;m also trying to=\r\n solve, is minor differences between\n&gt; running tests in the IDE vs. running=\r\n them through a build tool. For\n&gt; example IntelliJ IDEA executes all tests =\r\nin the project using the same\n&gt; classpath, but Maven uses the classpath of =\r\nthe module which contains the\n&gt; tests. If two modules use different version=\r\ns of a library (I have one\n&gt; such project), then this difference might be i=\r\nmportant.\n&gt;\n&gt; Also I want to get rid of bugs such as\n&gt; http://youtrack.jetb=\r\nrains.net/issue/IDEA-57696 &quot;IDEA&#39;s JUnit test runner\n&gt; does not run Scala c=\r\nlasses which are annotated with\n&gt; org.junit.runner.RunWith&quot;. Running tests =\r\nis such an important feature,\n&gt; that I don&#39;t want it to have any bugs.\n&gt;\n&gt; =\r\n--\n&gt; Esko Luontola\n&gt; www.orfjackal.net\n&gt;\n&gt;\n&gt; ------------------------------=\r\n------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "dsaff", 
    "topicId": 22933, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "prevInTime": 22936, 
    "contentTrasformed": false, 
    "postDate": "1284406475", 
    "canDelete": false, 
    "nextInTopic": 22938, 
    "prevInTopic": 22936, 
    "headers": {
        "inReplyToHeader": "PDRDOEU3OTFELjUwNDA3MDRAZ21haWwuY29tPg==", 
        "messageIdInHeader": "PEFBTkxrVGk9N1FIQkJIVTk4VDZMMzFrWFF4RXBRTFBHdE5UYz1HWExpTG1NQ0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDRDOEJGREU3LjMwMTA2MDNAZ21haWwuY29tPgk8QUFOTGtUaW40QVhrOEJHY2JYR2ZtNjhLUUZ6THFiVnprK20yMkNyY1VnUnQxQG1haWwuZ21haWwuY29tPgk8QUFOTGtUaW0xMU9STzY4aXJGaEhyVkNCdnFIOHZLOUJRRzI2d2lVeFdkOVpkQG1haWwuZ21haWwuY29tPgk8NEM4RTc5MUQuNTA0MDcwNEBnbWFpbC5jb20+"
    }
}