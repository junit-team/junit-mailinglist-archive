{
    "topicId": 2397, 
    "postDate": "998002206", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Alan Bram&quot; &lt;alan@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "LF7vycOHIvH0uBH1srPxPv74DjAS0D2T4CIcDLJAm1TzreJjCZuQOzxS_LOiBsPSZR4G1R-FG1KNTi-VASfb7TwPdDNeWjLDFA", 
    "nextInTime": 2398, 
    "userId": 0, 
    "prevInTime": 2396, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDAwMTgwMWMxMjZhNSRjYzVlODM5MCQ3NjliYjFkMEBBQlJBTT4="
    }, 
    "authorName": "Alan Bram", 
    "numMessagesInTopic": 6, 
    "msgSnippet": "Hi, I would like some advice on how to organize tests. I seem to find myself facing many instances of the following pattern: I have some sort of service I", 
    "contentTrasformed": false, 
    "msgId": 2397, 
    "nextInTopic": 2398, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;alan@...&gt;\r\nX-Sender: alan@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_3_1); 16 Aug 2001 22:47:10 -0000\r\nReceived: (qmail 10511 invoked from network); 16 Aug 2001 22:47:08 -0000\r\nReceived: from unknown (10.1.10.26)\n  by l8.egroups.com with QMQP; 16 Aug 2001 22:47:08 -0000\r\nReceived: from unknown (HELO rodney.cnchost.com) (207.155.252.4)\n  by mta1 with SMTP; 16 Aug 2001 22:47:08 -0000\r\nReceived: from ABRAM ([208.177.155.118])\n\tby rodney.cnchost.com\n\tid SAA16035; Thu, 16 Aug 2001 18:47:08 -0400 (EDT)\n\t[ConcentricHost SMTP Relay 1.14]\r\nErrors-To: &lt;alan@...&gt;\r\nMessage-ID: &lt;001801c126a5$cc5e8390$769bb1d0@ABRAM&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nSubject: organizing tests, and the setUp() method\r\nDate: Thu, 16 Aug 2001 15:50:06 -0700\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_000_0015_01C1266B.1EFD56C0&quot;\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4522.1200\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200\r\nFrom: &quot;Alan Bram&quot; &lt;alan@...&gt;\r\n\r\n\r\n------=_NextPart_000_0015_01C1266B.1EFD56C0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi,\n\nI would like some advice on how to organize tests. I seem to find myse=\r\nlf facing many instances of the following pattern:\n\nI have some sort of ser=\r\nvice I would like to test. I would like to test a variety of features of th=\r\ne service: we could call them A, B, C, D and E. Now the service can be conf=\r\nigured to operate in various modes.\n\nFor example, I have a service involvin=\r\ng messaging using TCP/IP connections. It can run using either plain, raw TC=\r\nP connections, or alternatively it should work with SSL as well. Virtually =\r\nall of the code doesn&#39;t care which mode it is in (in other words, this dist=\r\ninction is transparent to my code). So of course I simply want to write one=\r\n set of tests to verify the correct operation of features A, B, C, D and E.=\r\n\n\nIt&#39;s even tempting not to bother with running all the tests using both mo=\r\ndes. But to be thorough I want to do so.\n\nNow an organization that seems na=\r\ntural to me is something like this:\n\nclass TcpTests extends TestCase {\n    =\r\npublic void setUp() throws Exception {\n        tcpService =3D new TcpServic=\r\ne();\n        boolean useSSL =3D something;  // ??\n        tcpService.setUse=\r\nSSL(useSSL);\n        tcpService.start();\n    }\n    public void testA() thro=\r\nws Exception { ... }\n    public void testB() throws Exception { ... }\n    .=\r\n...\n    public void testE() throws Exception { ... }\n    public void tearDo=\r\nwn() throws Exception {\n        tcpService.stop();\n    }\n}\n\nHow do I run th=\r\nis set of tests in both modes (first with plain connections, say, and then =\r\nwith SSL connections)?\n\nIs my problem that I have put the wrong sort of thi=\r\nng in the setUp() method?\n\nAnother way that came to mind was to ignore the =\r\nsetUp() and tearDown() routines, and do something like the following:\n\nclas=\r\ns TcpTests extends TestCase {\n    public void testWithoutSSL() {\n        in=\r\nitTcp(false);\n        doASeries();\n    }\n    public void testWithSSL() {\n  =\r\n      initTcp(true);\n        doASeries();\n    }\n    private void initTcp(bo=\r\nolean useSSL) {\n        // as in setUp() of first example\n    }\n    private=\r\n void doASeries() {\n        doFeatureA();\n        doFeatureB();\n        ...=\r\n\n        doFeatureE();\n    }\n}\n \nBesides being somehow aesthetically not pl=\r\neasing, this means that from JUnit&#39;s point of view I have only two tests. I=\r\n feel I should have ten. I guess, also, that if a particular feature fails,=\r\n then all the other features that were to be tested after it will not even =\r\nget tried. That&#39;s obviously not right.\n\nThen the other thing I thought was,=\r\n would this be an appropriate occasion to use a hierarchy of TestCase class=\r\nes? In other words, maybe I go back to the first pattern (above), but make =\r\nit an abstract class. Define an abstract method, called perhaps something l=\r\nike getSSLSetting(). Have setUp() call this method to determine what the se=\r\ntting should be. Now I create two (concrete) subclasses, one for each possi=\r\nble setting of the useSSL flag that I want to test. In the subclasses, the =\r\nonly method I have to define is getSSLSetting(). JUnit sees two different T=\r\nestCase classes (I have to put two different classes into my TestSuite: the=\r\n concrete classes only, of course, not the abstract super-class.) Each of t=\r\nhe two has 5 tests, for a total of 10.\n\nI guess, generalizing this (assumin=\r\ng I have a more complex set of configuration options), I could create any n=\r\number of subclasses representing specific combinations of configuration set=\r\ntings that I want to test.\n\nDoes this seem right? I mean, is this an approp=\r\nriate use of inherritance?\n\nThanks for any advice you can provide.\n\n - Alan=\r\n Bram\n\r\n------=_NextPart_000_0015_01C1266B.1EFD56C0\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; charset=3Diso-8859-1=\r\n&quot;&gt;\n&lt;META content=3D&quot;MSHTML 5.50.4522.1800&quot; name=3DGENERATOR&gt;\n&lt;STYLE&gt;&lt;/STYLE=\r\n&gt;\n&lt;/HEAD&gt;\n&lt;BODY bgColor=3D#ffffff&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Hi,&lt;/FO=\r\nNT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT f=\r\nace=3DArial size=3D2&gt;I would like some advice on how to organize tests. \nI =\r\nseem to find myself facing many instances of the following \npattern:&lt;/FONT&gt;=\r\n&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;I have some sort of service I would like to test. I \nwoul=\r\nd like to test a variety of features of the service: we could call them A, =\r\n\nB, C, D and E. Now the service can be configured to operate in various \nmo=\r\ndes.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV=\r\n&gt;&lt;FONT face=3DArial size=3D2&gt;For example, I have a service involving messag=\r\ning \nusing TCP/IP connections. It can run using either plain, raw TCP conne=\r\nctions, or \nalternatively it should work with SSL as well. Virtually all of=\r\n the code doesn&#39;t \ncare which mode it is in (in other words, this distincti=\r\non is transparent to my \ncode). So of course I simply want to write one set=\r\n of tests to verify the \ncorrect operation of features A, B, C, D and E.&lt;/F=\r\nONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT =\r\nface=3DArial size=3D2&gt;It&#39;s even tempting not to bother with running all \nth=\r\ne tests using both modes. But to be thorough I want to do so.&lt;/FONT&gt;&lt;/DIV&gt;\n=\r\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DAria=\r\nl size=3D2&gt;Now an organization that seems natural to me is \nsomething like =\r\nthis:&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DI=\r\nV&gt;&lt;FONT face=3DArial size=3D2&gt;class TcpTests extends TestCase {&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; public void setUp() t=\r\nhrows \nException {&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial \nsize=3D2&gt;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcpService =3D new \nTcpService();&lt;/F=\r\nONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=\r\nnbsp;&nbsp; boolean \nuseSSL =3D something;&nbsp; // ??&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;F=\r\nONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntcpSe=\r\nrvice.setUseSSL(useSSL);&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntcpService.start();&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;D=\r\nIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT=\r\n face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; public void testA() throws \nExcep=\r\ntion { ... }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbs=\r\np; public void testB() throws \nException { ... }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT fa=\r\nce=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; ....&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3D=\r\nArial size=3D2&gt;&nbsp;&nbsp;&nbsp; public void testE() throws \nException { .=\r\n.. }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; publi=\r\nc void tearDown() throws \nException {&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial =\r\nsize=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntcpService.stop();&lt;/FO=\r\nNT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;}&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial s=\r\nize=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;How do I run t=\r\nhis set of tests in both modes (first \nwith plain connections, say, and the=\r\nn with SSL connections)?&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FO=\r\nNT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Is my problem that I have =\r\nput the wrong sort of \nthing in the setUp() method?&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT=\r\n face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2=\r\n&gt;Another way that came to mind was to ignore the \nsetUp() and tearDown() ro=\r\nutines, and do something like the \nfollowing:&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;clas=\r\ns TcpTests extends TestCase {&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2=\r\n&gt;&nbsp;&nbsp;&nbsp; public void testWithoutSSL() \n{&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT=\r\n face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ninitTcp(=\r\nfalse);&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp; \ndoASeries();&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial si=\r\nze=3D2&gt;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&=\r\nnbsp;&nbsp;&nbsp; public void testWithSSL() \n{&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ninitTcp(true)=\r\n;&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp; \ndoASeries();&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2=\r\n&gt;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&=\r\nnbsp;&nbsp; private void initTcp(boolean \nuseSSL) {&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT=\r\n face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // as in =\r\n\nsetUp() of first example&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nb=\r\nsp;&nbsp;&nbsp; }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp=\r\n;&nbsp; private void doASeries() \n{&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial si=\r\nze=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndoFeatureA();&lt;/FONT&gt;&lt;/DI=\r\nV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp; \ndoFeatureB();&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n...&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial =\r\nsize=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndoFeatureE();&lt;/FONT&gt;&lt;/=\r\nDIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DI=\r\nV&gt;&lt;FONT face=3DArial size=3D2&gt;}&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;&nbsp;&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Besides being som=\r\nehow aesthetically not pleasing, \nthis means that from JUnit&#39;s point of vie=\r\nw I have only two tests. I feel I \nshould have ten. I guess, also, that if =\r\na particular feature fails, then all the \nother features that were to be te=\r\nsted after it will not even get tried. That&#39;s \nobviously not right.&lt;/FONT&gt;&lt;=\r\n/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;Then the other thing I thought was, would this be \nan app=\r\nropriate occasion to use a hierarchy of TestCase classes? In other words, \n=\r\nmaybe I go back to the first pattern (above), but make it an abstract class=\r\n. \nDefine an abstract method, called perhaps something like getSSLSetting()=\r\n. Have \nsetUp() call this method to determine what the setting should be. N=\r\now I create \ntwo (concrete) subclasses, one for each possible setting of th=\r\ne useSSL flag that \nI want to test. In the subclasses, the only method I ha=\r\nve to define is \ngetSSLSetting(). JUnit sees two different TestCase classes=\r\n (I have to put two \ndifferent classes into my TestSuite: the concrete clas=\r\nses only, of course, not \nthe abstract super-class.) Each of the two has 5 =\r\ntests, for a total of \n10.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/=\r\nFONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;I guess, generalizing th=\r\nis (assuming I have a more \ncomplex set of configuration options), I could =\r\ncreate any number of subclasses \nrepresenting specific combinations of conf=\r\niguration settings that I want to \ntest.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DAri=\r\nal size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Does this =\r\nseem right? I mean, is this an \nappropriate use of inherritance?&lt;/FONT&gt;&lt;/DI=\r\nV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DA=\r\nrial size=3D2&gt;Thanks for any advice you can provide.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D=\r\n2&gt;&nbsp;- Alan Bram&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_000_0015_01C1266B.1EFD56C0--\r\n\n", 
    "subject": "organizing tests, and the setUp() method"
}