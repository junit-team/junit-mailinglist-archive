{
    "numMessagesInTopic": 4, 
    "nextInTime": 18517, 
    "senderId": "ERJLiGdPIgIIdZ-LTttB7rqjZ0HR24guICniyZxLjOMy77N-OoOd0Pjdc1ebX5oqJzIg4pYlddz1Lgsp6gTW8CNB1WHO4g", 
    "systemMessage": true, 
    "subject": "Re: [junit] Really Strange Behavior", 
    "from": "Ole Ersoy &lt;ole_ersoy@...&gt;", 
    "authorName": "Ole Ersoy", 
    "msgSnippet": "Hei Bjorn, (Norsk?) Hmmm, good observation! The ResourceSet that I create in the setUp likes be inside the test method, instead of in the setup method. It", 
    "msgId": 18516, 
    "rawEmail": "Return-Path: &lt;ole_ersoy@...&gt;\r\nReceived: (qmail 90871 invoked from network); 7 Dec 2006 16:55:44 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m36.grp.scd.yahoo.com with QMQP; 7 Dec 2006 16:55:44 -0000\r\nReceived: from unknown (HELO n15a.bullet.sp1.yahoo.com) (69.147.64.118)\n  by mta6.grp.scd.yahoo.com with SMTP; 7 Dec 2006 16:55:44 -0000\r\nReceived: from [216.252.122.216] by n15.bullet.sp1.yahoo.com with NNFMP; 07 Dec 2006 16:54:51 -0000\r\nReceived: from [66.218.69.3] by t1.bullet.sp1.yahoo.com with NNFMP; 07 Dec 2006 16:54:51 -0000\r\nReceived: from [66.218.66.79] by t3.bullet.scd.yahoo.com with NNFMP; 07 Dec 2006 16:54:51 -0000\r\nX-Sender: ole_ersoy@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 27220 invoked from network); 7 Dec 2006 15:52:59 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m27.grp.scd.yahoo.com with QMQP; 7 Dec 2006 15:52:59 -0000\r\nReceived: from unknown (HELO web60714.mail.yahoo.com) (209.73.178.217)\n  by mta10.grp.scd.yahoo.com with SMTP; 7 Dec 2006 15:52:59 -0000\r\nReceived: (qmail 96381 invoked by uid 60001); 7 Dec 2006 15:52:23 -0000\r\nX-YMail-OSG: 9SasMFMVM1mvtiPIZN4m19AfzT5ngko9zOcceHdEKsLQR9ReorFS2JrjZsQZLDaANHf1pIGr91q6qKr.5plx_8IXNp9NV1iYCgLXNutybsaVVPSx6L76s5J6sGIG4jTm\r\nReceived: from [24.13.179.233] by web60714.mail.yahoo.com via HTTP; Thu, 07 Dec 2006 07:52:23 PST\r\nDate: Thu, 7 Dec 2006 07:52:23 -0800 (PST)\r\nTo: &quot;Bj�rn&quot; Gustafsson &lt;bjorng@...&gt;, junit@yahoogroups.com\r\nIn-Reply-To: &lt;a3c3e8150612062122x2f3c22ecib3e3207f8441b564@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=iso-8859-1\r\nContent-Transfer-Encoding: 8bit\r\nMessage-ID: &lt;640381.96086.qm@...&gt;\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Ole Ersoy &lt;ole_ersoy@...&gt;\r\nSubject: Re: [junit] Really Strange Behavior\r\nX-Yahoo-Group-Post: member; u=98908154; y=a3O2gnOvOIdCLuA7UvaRDKY68KpJiPFqdMfVZdhftGue1T9L\r\nX-Yahoo-Profile: ole_ersoy\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: shanemingins &lt;shane.mingins@...&gt; via web; 07 Dec 2006 16:54:50 -0000\r\n\r\nHei Bjorn,\n\n(Norsk?)\nHmmm, good observation!\n\nThe ResourceSet that I create in the \nsetUp likes be inside the test method,\ninstead of in the setup method.\n\nIt contains a set of xml resources that\nare loaded using an xml handler.\n\nThe XMLHandler looks up metadata \non an EClass, that is a static instance\nbelonging to an object.\n\nIt looks like the eStaticClass() that returns the \nobject&#39;s EClass is unhappy if there is more than a\nsingle instance of ResourceSet in the JVM.\n\nAnyways - That&#39;s all the bull I can come up with :-)\n\nI&#39;m really just happy I can test now without loosing\nmore hair.\n\nThanks again,\n- Ole\n\n--- Bj�rn Gustafsson &lt;bjorng@...&gt; wrote:\n\n&gt; Hi Ole,\n&gt; \n&gt; I can&#39;t tell specifically from your code, but if it\n&gt; happens at the\n&gt; second test method then it has to do with your\n&gt; setUp() method in some\n&gt; way.  Do your super.setUp(), lookupMojo() or\n&gt; JPackageMojoHelperImpl.createResourceSet() methods\n&gt; produce anything\n&gt; that requires a reinitialization or teardown after a\n&gt; test completes?\n&gt; I would guess there is some static state somewhere\n&gt; in your abstract\n&gt; class or similar that is causing your grief.\n&gt; \n&gt; mvh,\n&gt; Bj�rn\n&gt; \n&gt; On 12/6/06, Ole Ersoy &lt;ole_ersoy@...&gt; wrote:\n&gt; &gt; Hey Guys,\n&gt; &gt;\n&gt; &gt; I&#39;m testing a method.\n&gt; &gt;\n&gt; &gt; When I have the method by itself it tests fine.\n&gt; &gt;\n&gt; &gt; When I put another test in front of it like this:\n&gt; &gt;         public void testCreateResourceSet()\n&gt; &gt;         {\n&gt; &gt;                 //Stub\n&gt; &gt;                 assertTrue(true);\n&gt; &gt;         }\n&gt; &gt;\n&gt; &gt; I get an exception like this:\n&gt; &gt; java.lang.ExceptionInInitializerError\n&gt; &gt;         at\n&gt; &gt;\n&gt;\norg.eclipse.emf.ecore.xml.type.impl.AnyTypeImpl.eStaticClass(AnyTypeImpl.java:83)\n&gt; &gt;         at\n&gt; &gt;\n&gt;\norg.eclipse.emf.ecore.impl.EObjectImpl.eClass(EObjectImpl.java:210)\n&gt; &gt;\n&gt; &gt; ....\n&gt; &gt;\n&gt; &gt; I also get the same exception when testing with\n&gt; Maven,\n&gt; &gt; so I know it is localized to JUnit.\n&gt; &gt;\n&gt; &gt; Has anyone else seen behavior like this?\n&gt; &gt;\n&gt; &gt; I&#39;ll paste the full test case below, in case\n&gt; anyone\n&gt; &gt; wants to look at it further.\n&gt; &gt;\n&gt; &gt; Cheers,\n&gt; &gt; - Ole\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; package org.jpackage.test;\n&gt; &gt;\n&gt; &gt; import java.io.File;\n&gt; &gt; import java.io.IOException;\n&gt; &gt;\n&gt; &gt; import org.apache.maven.artifact.Artifact;\n&gt; &gt; import\n&gt; &gt; org.apache.maven.artifact.factory.ArtifactFactory;\n&gt; &gt; import\n&gt; &gt;\n&gt;\norg.apache.maven.artifact.repository.ArtifactRepository;\n&gt; &gt; import\n&gt; &gt;\n&gt;\norg.apache.maven.artifact.repository.layout.DefaultRepositoryLayout;\n&gt; &gt; import\n&gt; &gt;\n&gt;\norg.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n&gt; &gt; import\n&gt; org.apache.maven.plugin.MojoExecutionException;\n&gt; &gt; import\n&gt; &gt;\n&gt;\norg.apache.maven.plugin.testing.AbstractMojoTestCase;\n&gt; &gt; import org.eclipse.emf.common.util.URI;\n&gt; &gt; import org.eclipse.emf.ecore.resource.Resource;\n&gt; &gt; import org.eclipse.emf.ecore.resource.ResourceSet;\n&gt; &gt; import\n&gt; org.jpackage.impl.JPackageMojoHelperBufferImpl;\n&gt; &gt; import org.jpackage.impl.JPackageMojoImpl;\n&gt; &gt; import org.jpackage.JPackageMojoConstants;\n&gt; &gt; import org.jpackage.impl.JPackageMojoHelperImpl;\n&gt; &gt;\n&gt; &gt; import\n&gt; &gt; com.pyramidetechnologies.emf.utils.EMFUtilities;\n&gt; &gt;\n&gt; &gt; public class JPackageMojoHelperTest extends\n&gt; &gt; AbstractMojoTestCase implements\n&gt; JPackageMojoConstants\n&gt; &gt; {\n&gt; &gt;\n&gt; &gt;         private JPackageMojoImpl mojo = null;\n&gt; &gt;         private ArtifactRepository\n&gt; artifactRepository = null;\n&gt; &gt;         private ResourceSet resourceSet = null;\n&gt; &gt;\n&gt; &gt;         protected void setUp() throws Exception {\n&gt; &gt;\n&gt; &gt;                 // required for mojo lookups to\n&gt; work\n&gt; &gt;                 super.setUp();\n&gt; &gt;\n&gt; &gt;                 File pluginXml = new\n&gt; File(getBasedir(),\n&gt; &gt;                                \n&gt; &quot;src/test/resources/plugin-config.xml&quot;);\n&gt; &gt;                 mojo = (JPackageMojoImpl)\n&gt; lookupMojo(\n&gt; &gt;                                 &quot;xml2spec.mojo&quot;,\n&gt; &gt;                                 &quot;org.jpackage&quot;,\n&gt; &gt;                                 &quot;1.0-SNAPSHOT&quot;,\n&gt; &gt;                                 &quot;generate&quot;,\n&gt; &gt;                                 pluginXml,\n&gt; &gt;                                 false);\n&gt; &gt;\n&gt; &gt;                 resourceSet =\n&gt; &gt; JPackageMojoHelperImpl.createResourceSet();\n&gt; &gt;         }\n&gt; &gt;\n&gt; &gt;         public void testCreateResourceSet()\n&gt; &gt;         {\n&gt; &gt;                 //Stub\n&gt; &gt;                 assertTrue(true);\n&gt; &gt;         }\n&gt; &gt;\n&gt; &gt;         public void testLoadPomResource() throws\n&gt; &gt; MojoExecutionException\n&gt; &gt;         {\n&gt; &gt;                 String artifactId =\n&gt; &quot;apacheds-server-main&quot;;\n&gt; &gt;                 String groupId =\n&gt; &quot;org.apache.directory.server&quot;;\n&gt; &gt;                 String version = &quot;1.5.0-SNAPSHOT&quot;;\n&gt; &gt;\n&gt; &gt;                 ArtifactFactory artifactFactory =\n&gt; &gt; mojo.getArtifactFactory();\n&gt; &gt;                 assertNotNull(artifactFactory);\n&gt; &gt;\n&gt; &gt;                 Artifact pomArtifact =\n&gt; &gt; artifactFactory.createArtifact(groupId,\n&gt; artifactId,\n&gt; &gt;                                 version, null,\n&gt; &quot;pom&quot;);\n&gt; &gt;                 assertNotNull(pomArtifact);\n&gt; &gt;\n&gt; &gt;                 String path = pathOf(pomArtifact);\n&gt; &gt;                 File file = new File(path);\n&gt; &gt;                 assertTrue(file.exists());\n&gt; &gt;\n&gt; &gt;                 pomArtifact.setFile(file);\n&gt; &gt;\n&gt; &gt;                 Resource resource = null;\n&gt; &gt;                 resource =\n&gt; &gt;\n&gt; JPackageMojoHelperImpl.loadPomResource(pomArtifact,\n&gt; &gt; resourceSet);\n&gt; &gt;\n&gt; &gt;                 assertNotNull(resource);\n&gt; &gt;         }\n&gt; &gt;\n&gt; &gt;         private static String pathOf(Artifact\n&gt; artifact)\n&gt; &gt;         {\n&gt; &gt;                 ArtifactRepositoryLayout\n&gt; artifactRepositoryLayout =\n&gt; &gt; new DefaultRepositoryLayout();\n&gt; &gt;                 String artifactPath =\n&gt; &gt; artifactRepositoryLayout.pathOf(artifact);\n&gt; &gt;                 return REPOSITORY_BASE_DIRECTORY +\n&gt; artifactPath;\n&gt; &gt;         }\n&gt; &gt;\n&gt; &gt;         private static String\n&gt; REPOSITORY_BASE_DIRECTORY =\n&gt; &gt; &quot;/home/ole/.m2/repository/&quot;;\n&gt; &gt;\n&gt; &gt; }\n&gt; \n\n\n\n \n____________________________________________________________________________________\nDo you Yahoo!?\nEveryone is raving about the all-new Yahoo! Mail beta.\nhttp://new.mail.yahoo.com\n\n", 
    "profile": "ole_ersoy", 
    "topicId": 18510, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 98908154, 
    "prevInTime": 18515, 
    "contentTrasformed": false, 
    "postDate": "1165506743", 
    "canDelete": false, 
    "nextInTopic": 18517, 
    "prevInTopic": 18515, 
    "headers": {
        "inReplyToHeader": "PGEzYzNlODE1MDYxMjA2MjEyMngyZjNjMjJlY2liM2UzMjA3Zjg0NDFiNTY0QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDY0MDM4MS45NjA4Ni5xbUB3ZWI2MDcxNC5tYWlsLnlhaG9vLmNvbT4="
    }
}