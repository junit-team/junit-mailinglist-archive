{
    "numMessagesInTopic": 7, 
    "nextInTime": 20703, 
    "senderId": "lkIk8AM0Y1QgNWZ1j4ScS2HfPiwdRvIP9lEhorgnwzdYHgH5Umq1rQdDx-hjlKUu8oZhpkdw2VXOko2y-Qcmsc9SE23dBdHVq4nn1JdNXwCOtfky", 
    "systemMessage": false, 
    "subject": "Re: [junit] Newbie wants to take some JUnit group. Some basic questions.", 
    "from": "&quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;", 
    "authorName": "Joakim Ohlrogge", 
    "msgSnippet": "Hi, The problems you describe are problems that are common to run into when unittesting. I found for me that things started to become easier when I finally let", 
    "msgId": 20702, 
    "rawEmail": "Return-Path: &lt;joakim.ohlrogge@...&gt;\r\nX-Sender: joakim.ohlrogge@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 91645 invoked from network); 22 Jul 2008 07:56:23 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m52.grp.scd.yahoo.com with QMQP; 22 Jul 2008 07:56:23 -0000\r\nX-Received: from unknown (HELO nf-out-0910.google.com) (64.233.182.191)\n  by mta15.grp.scd.yahoo.com with SMTP; 22 Jul 2008 07:56:22 -0000\r\nX-Received: by nf-out-0910.google.com with SMTP id c7so551121nfi.23\n        for &lt;junit@yahoogroups.com&gt;; Tue, 22 Jul 2008 00:56:21 -0700 (PDT)\r\nX-Received: by 10.125.151.16 with SMTP id d16mr309395mko.52.1216713381396;\n        Tue, 22 Jul 2008 00:56:21 -0700 (PDT)\r\nX-Received: by 10.125.151.13 with HTTP; Tue, 22 Jul 2008 00:56:21 -0700 (PDT)\r\nMessage-ID: &lt;b9ee5e410807220056r31e6a721sd880a7dc89836425@...&gt;\r\nDate: Tue, 22 Jul 2008 09:56:21 +0200\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;g62neb+55it@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nReferences: &lt;g62neb+55it@...&gt;\r\nX-Google-Sender-Auth: 01218646e03daf3f\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nX-eGroups-From: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nFrom: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nReply-To: joakim.ohlrogge@...\r\nSubject: Re: [junit] Newbie wants to take some JUnit group. Some basic questions.\r\nX-Yahoo-Group-Post: member; u=261856052; y=FBBzf-FxRfQbXGB5c8dZato95bazS65nxBJEDMkOrmcIcahy\r\nX-Yahoo-Profile: j0hlrogge\r\n\r\nHi,\n\nThe problems you describe are problems that are common to run into\nwhe=\r\nn unittesting. I found for me that things started to become easier\nwhen I f=\r\ninally let go and let my tests drive the design. When I say\ndrive the desig=\r\nn I don&#39;t mean &quot;let the tests open up my current\ndesign&quot;. I find that when =\r\nI let the tests drive I am pushed to find\nmore abstractions in order to tes=\r\nt. For instance in your ftp example\nyou can see it as anything that gives y=\r\nou a stream (not saying that\nthis is the best way to go in your particular =\r\ncase but for the sake of\nillustrating). While the ftp connection will need =\r\nstuff like username,\npassword and some URL to give you the stream, to some =\r\npart of the code\nit is just a stream. That part of the code can be tested w=\r\nith any\nstream, like ByteArray[Input/Output]Stream.\n\nYour schedule mechanis=\r\nm, like cron, will send an event at a given\ntime. To some part of the code =\r\nthat is just an event that was\ntriggered by something, if it is actually a =\r\ncron-job then the event\nmight be the application-start. My point is, the ev=\r\nent can be\ntriggered by whatever you like, including your unittests and you=\r\nr code\ndoesn&#39;t need to know (for the most part).\n\nThe actual creation of th=\r\ne FTP stream might require some parameters\nthat may be read from a configur=\r\nationfile, the commandline or\nwhatever. So to some factory of ftp-connectio=\r\nns they are relevant and\nmay be injected or read but to other parts of the =\r\nsystem it&#39;s just a\nfactory (or context, or...).\n\nI find that asking the que=\r\nstion, &quot;what does this code not have to know\nabout?&quot; helps me.\n\nI know that=\r\n what I wrote is not rocket-science and that I&#39;m probably\nkicking in open d=\r\noors but I thought in the worst case I would be the\nonly one learning somet=\r\nhing by kicking them in.\n\nHope this helps anyone.\n/J\n\nOn Mon, Jul 21, 2008 =\r\nat 9:18 PM, serethos_0 &lt;Serethos@...&gt; wrote:\n&gt; Hello!\n&gt;\n&gt; I am an quite =\r\nexperienced programmer but new to the philosophy of unit\n&gt; testing. An issu=\r\ne I want to change.\n&gt; I read some articles and took some orientation on Fra=\r\nnk Westphal&#39;s\n&gt; very good book about that topic. But in practice, I always =\r\nrun into\n&gt; similar problems, which seem to disturb my view of unit testing.=\r\n So\n&gt; some thought and questions I would like to discuss.\n&gt;\n&gt; 1. Recently I=\r\n read that a unit test is no one if you have to touch\n&gt; network, db or file=\r\nsystem. I understand the point that these accesses\n&gt; really can slow the te=\r\nsts down and usually need extra work of\n&gt; configuration, but how to avoid t=\r\nhis?\n&gt; An example of my daily work. I have quite a common task: Fetch some\n=\r\n&gt; xmls from an ftp server, parse the content and map it into db and vice\n&gt; =\r\nversa. So the business logic is quite thin. More important is good\n&gt; except=\r\nion handling and the transport of all data in the right structures.\n&gt;\n&gt; Act=\r\nually the slowdown of a real ftp transport and the configuration\n&gt; and inje=\r\nction overhead of the db-connection is a major drawback. But\n&gt; on the other=\r\n hand I see no good way to mock the behaviour of these\n&gt; endpoints.\n&gt; I cou=\r\nld try to mock a database, but how to test, if an sql-statement\n&gt; is correc=\r\nt (especially for a wider range of queries)?\n&gt; It also is a very hard work =\r\nto write stubs or mocks, which can answer\n&gt; with all error-states an ftp-se=\r\nrver/network can generate (timeout,\n&gt; access denied, authentication etc) to=\r\n test the correct error handling\n&gt; of my code.\n&gt;\n&gt; 2. Another question poin=\r\nts to a basic principle of unit testing: the\n&gt; opening of a class in small =\r\nand public methods. I see an advantage in\n&gt; the possibility to inject every=\r\n aspect of a class (manually or e.g.\n&gt; via spring) and the code can benefit=\r\n from a better readability through\n&gt; a chain of self-explanatory method cal=\r\nls.\n&gt; But in some cases I want to hide implementation details from the user=\r\n.\n&gt; Taking my Importer/Exporter example a second time, it is more a cron\n&gt; =\r\nscript than an application: Doing a defined job in a robust and\n&gt; understan=\r\ndable manner but neither designed as a basis for wide\n&gt; enhancements nor fo=\r\nr ultimate flexibility.\n&gt; So there are methods which start the whole work o=\r\nf an importer over\n&gt; the whole lifecycle (connect, fetch data, map data etc=\r\n). Methods,\n&gt; which are necessary for getting the object in a usable state =\r\n(e.g.\n&gt; connection established) are hidden away. To ensure that there must =\r\nbe\n&gt; the correct state before executing the main task I can lead the user\n&gt;=\r\n with parameterized constructors (e.g. MyImporter(host, port)).\n&gt; To say it=\r\n more generally I think that it is a common way to restrict\n&gt; the use of cl=\r\nasses which need to be handled in correct order because\n&gt; of their state. T=\r\nhis saves a lot of additional exception handling\n&gt; (e.g. executing before c=\r\nonnecting).\n&gt; But following this thought it gets very hard to isolate testi=\r\nng units.\n&gt; Even when I separate the tasks within the class to units (conne=\r\ncting,\n&gt; disconnecting etc) they would be not accessible and would need to =\r\nbe\n&gt; tested from within.\n&gt;\n&gt; This is only a very simple and not a perfect e=\r\nxample but I think my\n&gt; point should be clear. I hope that some of you take=\r\n some time to read\n&gt; it. I really would appreciate some thoughts!\n&gt;\n&gt; \n\n\n\n-=\r\n- \n-----------------------------------------------------\nJoakim Ohlrogge\nAg=\r\nical AB\nV=E4sterl=E5nggatan 79, 2 tr\n111 29 Stockholm, SWEDEN\n\nMobile: +46-=\r\n708-754004\nBlog: johlrogge.wordpress.com\nE-mail: joakim.ohlrogge@...\n=\r\n\n", 
    "profile": "j0hlrogge", 
    "topicId": 20700, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 261856052, 
    "prevInTime": 20701, 
    "contentTrasformed": false, 
    "postDate": "1216713381", 
    "canDelete": false, 
    "nextInTopic": 20703, 
    "prevInTopic": 20701, 
    "headers": {
        "inReplyToHeader": "PGc2Mm5lYis1NWl0QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGI5ZWU1ZTQxMDgwNzIyMDA1NnIzMWU2YTcyMXNkODgwYTdkYzg5ODM2NDI1QG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGc2Mm5lYis1NWl0QGVHcm91cHMuY29tPg=="
    }
}