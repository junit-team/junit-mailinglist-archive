{
    "numMessagesInTopic": 6, 
    "nextInTime": 13160, 
    "senderId": "4SlwKErtiPsFjk2QHKVh_Bx_EVaFokUTRIivguGam_yZB0-nAkpZya7otnyhe8v-CF8sUGJ-lHPlB6RwaWUr7sgjcBXxHP2TCBjKVA", 
    "systemMessage": false, 
    "subject": "Re: Testing DAOs?", 
    "from": "&quot;haefeleuser&quot; &lt;haefeleuser@...&gt;", 
    "authorName": "haefeleuser", 
    "msgSnippet": "The application we write is an ERP software, so it is a little bit different than other applications. ... The data validation rules (ArticleRules.java) look", 
    "msgId": 13159, 
    "profile": "haefeleuser", 
    "topicId": 13132, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 174752849, 
    "messageBody": "<div id=\"ygrps-yiv-1105284766\">The application we write is an ERP software, so it is a little bit<br/>\ndifferent than other applications.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt;What does it mean to test these validation rules? Pretend you could<br/>\n&gt;&gt;do<br/>\n&gt;&gt;it easily; what would the test look like? This will help me<br/>\n&gt;&gt;understand<br/>\n&gt;&gt;enough to respond.<br/>\n<br/>\n </span></blockquote>The data validation rules (ArticleRules.java) look like this for<br/>\nexample (builder pattern):<br/>\n<br/>\n// id<br/>\nbuilder.beginAspect(&quot;id&quot;); // &quot;aspect&quot; means attribute<br/>\n  builder.notNull(); // means mandatory<br/>\n  builder.maxLength(14);<br/>\n  builder.ruleUnique(&quot;id&quot;, ArticleProvider.class);<br/>\nbuilder.endAspect();<br/>\n<br/>\npublic void testIdValidation()<br/>\n{<br/>\n  // A &quot;made&quot; Article is not yet persisted<br/>\n  Article madeArticle = articleData.makeCompleteArticle();<br/>\n  // Convenience method:<br/>\n  checkNotNullValidation(&quot;id&quot;, madeArticle);<br/>\n  // Convenience method:<br/>\n  checkMaxLengthValidation(14, &quot;id&quot;, madeArticle);<br/>\n  // Persist an Article which has the same ID as madeArticle:<br/>\n  articleData.createCompleteArticle();<br/>\n  checkValidation(madeArticle, false, &quot;Validating unique id&quot;);<br/>\n}<br/>\n  <br/>\nLets describe how the convenience methods in the superclass work by<br/>\nusing checkMaxLengthValidation method:<br/>\n- calls setId(14) with reflection<br/>\n- validates Article and expects that there is no validation failure<br/>\nfor &quot;id&quot;<br/>\n- calls setId(15) with reflection<br/>\n- validates Article and expects that there is validation failure for &quot;id&quot;<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt; I generally need to know whether the implementation of the finder<br/>\n&gt;&gt; returns the proper result set, so yes.<br/>\n<br/>\n </span></blockquote>You wrote that in your book. I didn&#39;t read it at the time I wrote this<br/>\nquestion. A great book by the way!<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; - Do you test pre-initializations of business objects<br/>\n&gt; instances (like Article, Customer...)?<br/>\n<br/>\n&gt;&gt; Can you say this differently? I don&#39;t understand it as is.<br/>\n<br/>\n </span></blockquote>Something like this:<br/>\n<br/>\npublic void testInitializationWithDefaultValues()<br/>\n{<br/>\n  CountryFactory factory = countryManager.getCountryFactory();<br/>\n  Country newCountry = factory.getNewCountryInstance();<br/>\n  assertTrue(&quot;Country.isActivated&quot;, newCountry.getIsActivated());<br/>\n  assertFalse(&quot;Country.isMemberOfEu&quot;, newCountry.getIsMemberOfEu());<br/>\n}<br/>\n  <br/>\nWhat do you say about the tests? Are they okay or too much testing?<br/>\n<br/>\nNext comes a test where I need your advise: Is it too much to test it<br/>\nor not?<br/>\n<br/>\n&quot;CountryManager&quot; contains methods for creating, updating and deleting<br/>\nan entity.<br/>\n&quot;CountryProvider&quot; contains methods for finding an entity.<br/>\n<br/>\nThe managers and providers are generated, same as the test below.<br/>\nHowever, the test needs to be completed manually.<br/>\n<br/>\npublic void testCreateUpdateDelete()<br/>\n{<br/>\n  // Create-test:<br/>\n  Country createdCountry = countryData.createCompleteCountry();<br/>\n  assertFalse(&quot;Country.isNew&quot;, createdCountry.isNew());<br/>\n  // TODO If the entity contains other entities, test if the relations<br/>\nhave been set.<br/>\n  // Use assertNotNull(...) for One:One relations.<br/>\n  // Use assertEquals(...) for One:Many relations.<br/>\n<br/>\n  // Update-test:<br/>\n  // TODO Modify an attribute.<br/>\n  Country updatedCountry = countryManager.updateCountry(createdCountry);<br/>\n  // TODO Expect that the update succeeded.<br/>\n  assertEquals(&quot;Country.yourAttribute&quot;,<br/>\ncreatedCountry.getYourAttribute(), updatedCountry.getYourAttribute());<br/>\n     <br/>\n  // Delete-test:<br/>\n  countryManager.deleteCountry(updatedCountry);<br/>\n  try<br/>\n  {<br/>\n      countryProvider.getCountryByKey(updatedCountry.getKey());<br/>\n      fail(&quot;Country has not been deleted successfully&quot;);<br/>\n  }<br/>\n  catch(NoObjectFoundException e)<br/>\n  {<br/>\n      // Its okay. We expect that the deleted entity cannot be found<br/>\nanymore.<br/>\n  }<br/>\n  // TODO If full cascade, test that child entities have been deleted.<br/>\n}<br/>\n<br/>\nToo much or okay?</div>", 
    "prevInTime": 13158, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1111706730", 
    "canDelete": false, 
    "nextInTopic": 13184, 
    "prevInTopic": 13153, 
    "headers": {
        "inReplyToHeader": "PDQyNDJFRTQ2LjYwNzA3MDBAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PGQxdmk5YStxcG4zQGVHcm91cHMuY29tPg=="
    }
}