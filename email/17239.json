{
    "numMessagesInTopic": 10, 
    "nextInTime": 17240, 
    "senderId": "unuV_1rPyCkdVMg7qZPThMyUY_FwwjhwA241ICHqnArZntEra8HX9kNKIRNnflNOpZNJc3WJZnJbH5gatuiL1W0YehcruykNM7vHDW9Rtwf5ZeEj", 
    "systemMessage": false, 
    "subject": "Re: [junit] OT: Streams / Readers/ Writers or files, what do you use and how do you test?", 
    "from": "&quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;", 
    "authorName": "Joakim Ohlrogge", 
    "msgSnippet": "... I like the reader one better aswell, I just had to admit that it is a bit more for the user of the method to keep in mind. I was actually thinking about", 
    "msgId": 17239, 
    "profile": "j0hlrogge", 
    "topicId": 17215, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 261856052, 
    "messageBody": "<div id=\"ygrps-yiv-417381740\"><blockquote><span title=\"ireply\">&gt;  I liked the Reader one best actually. It would be even better if<br/>\n&gt;  BufferedReader implemented Iterable&lt;String&gt; so you could do<br/>\n<br/>\n </span></blockquote>I like the reader one better aswell, I just had to admit that it is a<br/>\nbit more for the user of the method to keep in mind. I was actually<br/>\nthinking about Iterable both for files and streams. It would be really<br/>\neasy to create a Reader/Stream/File-iterator for that purpose (they<br/>\nwould all be pretty much the same implementation just 3 different<br/>\nconstructors or so).<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;  As for closing the stream/reader - that should always be the<br/>\n&gt;  responsibility of the person who opened it.<br/>\n<br/>\n </span></blockquote>Still has to be remebered. For that purpose I once wrote a<br/>\nResourceManager that used converters to serialize to and from<br/>\nstreams.The ResourceManager created the Stream and passed it to the<br/>\nconverter and the converter was responsible for returning an object.<br/>\nIt looke something like this:<br/>\n<br/>\nMyClass instance = (MyClass)manager.readObject(&quot;path&quot;, converter);<br/>\nmanager.writeObject(instance, &quot;path&quot;, converter);<br/>\n<br/>\nWe had some really pleasant spinoffs with that since we could<br/>\nimplement very efficient caching of resources. I also like the<br/>\nseparation of concerns: 1) manage streams 2) convert streams to<br/>\nobjects 3) convert objects to streams.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; I fantasize about something like a Ruby closure<br/>\n<br/>\n&gt;<br/>\n&gt;  new File(&quot;x.txt&quot;).read(fileprocessor)<br/>\n&gt;<br/>\n </span></blockquote>That looks similar to the resource manager in a way.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;  (where read() does the opening and closing) but I am not exactly sure<br/>\n&gt;  how that would work in Java without a mass of ugly interfaces and<br/>\n&gt;  callbacks.<br/>\n </span></blockquote>Does it have to be that ugly? I think most of the uglyness could be<br/>\nhidden from the enduser and the enduser need to concern himself only<br/>\nwith the fileprocessor.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;  Maybe if there was something called Readable and a Reader was<br/>\n&gt;  something that could read Readables...?<br/>\n&gt;<br/>\n&gt;  interface Reader {<br/>\n&gt;    void read(Readable in);<br/>\n&gt;  }<br/>\n&gt;<br/>\n&gt;  class MyProcessor implements Readable {}<br/>\n&gt;<br/>\n&gt;  new FileReadable(&quot;x.txt&quot;).read(myprocessor);<br/>\n&gt;<br/>\n<br/>\n </span></blockquote>Why not. Or:<br/>\n<br/>\nresourceManager.readWith(myprocessor).from(&quot;x.txt&quot;);<br/>\n<br/>\nThere are endless posibilities :)<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;  Something like C#&#39;s /using/ keyword to close Closeables would not suck.<br/>\n<br/>\n </span></blockquote>Could you please elaborate. I am only dipping my toes into c# so I&#39;m<br/>\nnot familiar with all aspects of the language.</div>", 
    "prevInTime": 17238, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1154028059", 
    "canDelete": false, 
    "nextInTopic": 17240, 
    "prevInTopic": 17238, 
    "headers": {
        "inReplyToHeader": "PDUxZDFiMmRlMDYwNzI3MTAzNGg2ZDg3OGNlYmg2M2MxM2M5YjUwNGZjNmI2QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGI5ZWU1ZTQxMDYwNzI3MTIyMG83NmRmY2E4NXE3YWIxMWY2YTExN2M0M2QxQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGI5ZWU1ZTQxMDYwNzI2MDgxM3EyYjZjYzlhZnI1Y2FkNTgyZmM1YTkwOWQzQG1haWwuZ21haWwuY29tPgkgPGI4NmI2YTljMDYwNzI2MDkzNnA0YjhlOTk5NHU0YzIzNGI4YzE3MjZiOWRmQG1haWwuZ29vZ2xlLmNvbT4JIDxiOWVlNWU0MTA2MDcyNjEyNTZvNzc5YmM5ODN3YjllNDAwYjRlNGJlNGE4YUBtYWlsLmdtYWlsLmNvbT4JIDxiODZiNmE5YzA2MDcyNjEzMDFwNzMyY2E4MDlnY2FmMjE4NDdmY2Q0MGJiOEBtYWlsLmdvb2dsZS5jb20+CSA8YjllZTVlNDEwNjA3MjcwMTAydDU0Yjg3NGFjd2U1NjFkYTU2MGFmN2E3MzVAbWFpbC5nbWFpbC5jb20+CSA8NTFkMWIyZGUwNjA3MjcxMDM0aDZkODc4Y2ViaDYzYzEzYzliNTA0ZmM2YjZAbWFpbC5nbWFpbC5jb20+"
    }
}