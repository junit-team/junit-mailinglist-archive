{
    "topicId": 2313, 
    "postDate": "997390632", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Johannes Link &lt;john.link@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "D1Y60diPtmSH-IzeFu6InLue3t4IpSj4XOaHR3moofAUbAyXzaXzIjVIA5Vps_0jDyAKramUgxwXRkweN8crxiS_rliANApK", 
    "nextInTime": 2316, 
    "userId": 0, 
    "prevInTime": 2314, 
    "prevInTopic": 2313, 
    "headers": {
        "messageIdInHeader": "PDNCNzJGOTI4LkI5NzE0OTQ0QGdteC5uZXQ+", 
        "referencesHeader": "PEYyNDREUEhwTndxZXE1WjNKalEwMDAwMzEwY0Bob3RtYWlsLmNvbT4="
    }, 
    "authorName": "Johannes Link", 
    "numMessagesInTopic": 3, 
    "msgSnippet": "... One option is to start a top leve transaction in setUp(), rolling it back in tearDown() and using only nested transactions inbetween. This works", 
    "contentTrasformed": false, 
    "msgId": 2315, 
    "nextInTopic": 2317, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;john.link@...&gt;\r\nX-Sender: john.link@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_3_1); 9 Aug 2001 20:57:25 -0000\r\nReceived: (qmail 21714 invoked from network); 9 Aug 2001 20:57:24 -0000\r\nReceived: from unknown (10.1.10.27)\n  by l7.egroups.com with QMQP; 9 Aug 2001 20:57:24 -0000\r\nReceived: from unknown (HELO mail.gmx.net) (194.221.183.20)\n  by mta2 with SMTP; 9 Aug 2001 20:57:24 -0000\r\nReceived: (qmail 1517 invoked by uid 0); 9 Aug 2001 20:57:22 -0000\r\nReceived: from f-dialin-2732.addcom.de (HELO gmx.net) (62.96.150.92)\n  by mail.gmx.net (mail01) with SMTP; 9 Aug 2001 20:57:22 -0000\r\nMessage-ID: &lt;3B72F928.B9714944@...&gt;\r\nDate: Thu, 09 Aug 2001 22:57:12 +0200\r\nX-Mailer: Mozilla 4.72 [en]C-CCK-MCD QXW0323l  (Windows NT 5.0; U)\r\nX-Accept-Language: de,en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] testing code that inserts into a database\r\nReferences: &lt;F244DPHpNwqeq5Z3JjQ0000310c@...&gt;\r\nContent-Type: text/plain; charset=us-ascii\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Johannes Link &lt;john.link@...&gt;\r\n\r\n\n\nMartin Dillard wrote:\n&gt; My question is on how to test code that inserts into the database. I\n&gt; am concerned about inserting data into the database that may later\n&gt; interfere with my tests that read from the database so I want to make\n&gt; sure that all data is removed from the database after the insert\n&gt; methods are tested. Should this code be in the test method?\n\nOne option is to start a top leve transaction in setUp(), rolling it\nback in tearDown() and using only nested transactions inbetween. This\nworks *sometimes* and requires, of course, that your database supports\nnested transactions.\n\n&gt; Also, what\n&gt; is the best way to verify that everything was inserted correctly?\n\nRetrieving it with select seems to be the only way unless you mocked\nyour database interface.\n\nWhat we have done a couple of times is to wrap the real database access\nin a wrapping interface which should be as narrow as possible, i.e.\nproviding only create, update and delete functionality for your\npersistent objects. Having done that you can mock this interface for\nmost of your tests. You need a few tests for checking that your wrapper\naccesses the db correctly but those tests are most of the time very\nstraightforward.\n\nJohannes\n\n", 
    "subject": "Re: [junit] testing code that inserts into a database"
}