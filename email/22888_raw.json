{
    "numMessagesInTopic": 14, 
    "nextInTime": 22889, 
    "senderId": "UrWOMxmfrO55h2MKP9SAcyXvl_4Q1X_7lbyUJqjSbNKtabi1ttn--ZV_qJYOuqdxh9xepVQkjs8KohvUZbR9Lbrpl9nWcMbEgBAEnPf1xlK1oFmGLFXyW_joFo7-pw", 
    "systemMessage": false, 
    "subject": "Re: [junit] More example JUnit code", 
    "from": "=?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "You re losing quite a bit of generality since you are inlining all the constants. You are also creating and recreating a lot of similar objects all the time,", 
    "msgId": 22888, 
    "rawEmail": "Return-Path: &lt;cbeust@...&gt;\r\nX-Sender: cbeust@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 64991 invoked from network); 23 Aug 2010 14:05:30 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m13.grp.re1.yahoo.com with QMQP; 23 Aug 2010 14:05:30 -0000\r\nX-Received: from unknown (HELO mail-gy0-f171.google.com) (209.85.160.171)\n  by mta3.grp.re1.yahoo.com with SMTP; 23 Aug 2010 14:05:30 -0000\r\nX-Received: by gyg13 with SMTP id 13so2393826gyg.16\n        for &lt;junit@yahoogroups.com&gt;; Mon, 23 Aug 2010 07:05:29 -0700 (PDT)\r\nX-Received: by 10.150.202.9 with SMTP id z9mr5399300ybf.87.1282572329226; Mon,\n 23 Aug 2010 07:05:29 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.150.12.21 with HTTP; Mon, 23 Aug 2010 07:05:06 -0700 (PDT)\r\nIn-Reply-To: &lt;AANLkTin6Vup4_g5-gHekRazM0xvhR2Eb5TXMYHM0y3EZ@...&gt;\r\nReferences: &lt;AANLkTikv4gPxGg-hCw+svedTeYebT+k9wRNXZEFdwFTE@...&gt;\n &lt;AANLkTimHBRFMs6agA+jHUNSXCpR5rxN5TfvvruQz2wTb@...&gt;\n &lt;AANLkTimv6ah8drxKtaxDkFrZFJEta-eKHSqgFkmPfoXS@...&gt;\n &lt;AANLkTi=wwf8Tfi-y1Uaqaw4jJhERKo_JKdLBcZfOwAEs@...&gt; &lt;AANLkTin6Vup4_g5-gHekRazM0xvhR2Eb5TXMYHM0y3EZ@...&gt;\r\nDate: Mon, 23 Aug 2010 07:05:06 -0700\r\nX-Google-Sender-Auth: bI-WyStqAh_GVF73vayOMHF9im8\r\nMessage-ID: &lt;AANLkTikRJtup-VAOSeXrze6NL-yYd-HY54Pp423Uo_5X@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: =?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;\r\nSubject: Re: [junit] More example JUnit code\r\nX-Yahoo-Group-Post: member; u=31449770; y=I5ZCNDt8MY4kpLnl0rk3L4gfFfpVndAA1cfl1NlyTJ8q\r\nX-Yahoo-Profile: cbeust\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nYou&#39;re losing quite a bit of generality since you are inlining all the\ncons=\r\ntants. You are also creating and recreating a lot of similar objects all\nth=\r\ne time, there&#39;s a lot of DRY violation in your code. Your code is a good\nfi=\r\nrst version, but it needs some refactoring.\n\nAgain, a class such as Factor =\r\nis a perfect target for parameterized testing\nsince the logic of the testin=\r\ng doesn&#39;t change (verify that f1.operation(f2)\nequals f3), only the data do=\r\nes.\n\n-- \nC=C3=A9dric\n\n\nOn Mon, Aug 23, 2010 at 6:51 AM, David Saff &lt;david@s=\r\naff.net&gt; wrote:\n\n&gt; 2010/8/22 C=C3=A9dric Beust =E2=99=94 &lt;cedric@...&gt;=\r\n:\n&gt; &gt; Simon,\n&gt; &gt;\n&gt; &gt; Actually, I was wrong: using @BeforeClass will break y=\r\nour tests. Since\n&gt; JUnit\n&gt; &gt; reinstantiates a brand new class before each t=\r\nest method, only the first\n&gt; &gt; method will get the correct values for these=\r\n fields. Subsequent methods\n&gt; will\n&gt; &gt; see null.\n&gt;\n&gt; @BeforeClass only work=\r\ns on static values, and should be matched with\n&gt; an @AfterClass.  It is ver=\r\ny rare to see @BeforeClass used for set-up\n&gt; of lightweight data values.\n&gt;\n=\r\n&gt; &gt; Anyway, these values are constants, so they should be static final. Whi=\r\nch\n&gt; &gt; solves the problem and also gets rid of @Before and @After.\n&gt; &gt;\n&gt; &gt; =\r\nAbout the fields: what bothers me with this approach is that you&#39;re\n&gt; expos=\r\ning\n&gt; &gt; a lot of fields to all your test methods and they only use a very s=\r\nmall\n&gt; &gt; subset of these. In effect, fields are like global variables and t=\r\nhey\n&gt; make\n&gt; &gt; it harder for someone coming to improve your class to unders=\r\ntand exactly\n&gt; &gt; what fields are okay to modify and which tests need to be =\r\nupdated as\n&gt; well. I\n&gt; &gt; like to keep the data needed by each test method a=\r\ns local as possible to\n&gt; &gt; avoid this kind of problem.\n&gt; &gt;\n&gt; &gt; Parameterize=\r\nd tests help a lot with this kind of locality, and they turn\n&gt; out\n&gt; &gt; to b=\r\ne a great match for this particular problem.\n&gt; &gt;\n&gt; &gt; With all this in mind,=\r\n here is my version (TestNG syntax, porting to\n&gt; JUnit\n&gt; &gt; is left as an ex=\r\nercise to the reader):\n&gt; &gt;\n&gt; &gt; public class FractionTest {\n&gt; &gt;\n&gt; &gt;  // A fe=\r\nw useful constants\n&gt; &gt;  private static final Fraction F_1_1 =3D new Fractio=\r\nn(1, 1);\n&gt; &gt;  private static final Fraction F_1_2 =3D new Fraction(1, 2);\n&gt;=\r\n &gt;  private static final Fraction F_1_3 =3D new Fraction(1, 3);\n&gt; &gt;  privat=\r\ne static final Fraction F_2_1 =3D new Fraction(2, 1);\n&gt; &gt;\n&gt; &gt;  /**\n&gt; &gt;   * =\r\nThe data set used to verify reduction, the last parameter of each\n&gt; &gt;   * r=\r\now is the expected value.\n&gt; &gt;   */\n&gt; &gt;  @DataProvider\n&gt; &gt;  public Object[][=\r\n] reduceData() {\n&gt; &gt;    return new Object[][] {\n&gt; &gt;      new Object[] { F_1=\r\n_1, F_1_1 },\n&gt; &gt;      new Object[] { new Fraction(2, 2), F_1_1 },\n&gt; &gt;      =\r\nnew Object[] { new Fraction(4, 2), F_2_1 },\n&gt; &gt;      // ...\n&gt; &gt;    };\n&gt; &gt;  =\r\n}\n&gt; &gt;\n&gt; &gt;  @Test(dataProvider =3D &quot;reduceData&quot;)\n&gt; &gt;  public void verifyRedu=\r\nce(Fraction input, Fraction expected) {\n&gt; &gt;    Assert.assertEquals(input.re=\r\nduce(), expected);\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  /**\n&gt; &gt;   * The data set used to verify =\r\nmultiplication, the last parameter of\n&gt; each\n&gt; &gt;   * row is the expected va=\r\nlue after rediction\n&gt; &gt;   */\n&gt; &gt;  @DataProvider\n&gt; &gt;  public Object[][] mult=\r\niplicationData() {\n&gt; &gt;    return new Object[][] {\n&gt; &gt;      new Object[] { F=\r\n_1_1, F_1_1, F_1_1 },\n&gt; &gt;      new Object[] { new Fraction(2, 2), new Fract=\r\nion(3, 2), new\n&gt; Fraction(3,\n&gt; &gt; 2) },\n&gt; &gt;      // ...\n&gt; &gt;    };\n&gt; &gt;  }\n&gt; &gt;=\r\n\n&gt; &gt;  @Test(dataProvider =3D &quot;multiplicationData&quot;)\n&gt; &gt;  public void verifyR=\r\neduce(Fraction f1, Fraction f2, Fraction expected) {\n&gt; &gt;    // Assuming tha=\r\nt multiply() will call reduce() before returning its\n&gt; &gt; result\n&gt; &gt;    Asse=\r\nrt.Equals(f1.multiply(f2), expected);\n&gt; &gt;    Assert.Equals(f2.multiply(f1),=\r\n expected);\n&gt; &gt;  }\n&gt; &gt; }\n&gt;\n&gt; I&#39;d replace your 49 lines of code with these 1=\r\n7, without loss of\n&gt; extensibility or coverage:\n&gt;\n&gt; public class FractionTe=\r\nst {\n&gt;  private Fraction f(int num, int denom) {\n&gt;   return new Fraction(nu=\r\nm, denom);\n&gt;  }\n&gt;\n&gt;  @Test public void reduce() {\n&gt;   assertEquals(f(1, 1),=\r\n f(1, 1).reduce());\n&gt;   assertEquals(f(1, 1), f(2, 2).reduce());\n&gt;   assert=\r\nEquals(f(2, 1), f(4, 2).reduce());\n&gt;  }\n&gt;\n&gt;  @Test public void multiply() {=\r\n\n&gt;    // Assuming that multiply() will call reduce() before returning its\n&gt;=\r\n result\n&gt;    assertEquals(f(1, 1), f(1, 1).multiply(f(1, 1)));\n&gt;   assertEq=\r\nuals(f(3, 2), f(2, 2).multiply(f(3, 2)));\n&gt;  }\n&gt; }\n&gt;\n&gt;   David Saff\n&gt;\n&gt; &gt;\n&gt;=\r\n &gt; You can probably see how parameterized tests improve the locality of you=\r\nr\n&gt; &gt; tests and how adding values to extend the coverage is trivial.\n&gt; &gt;\n&gt; =\r\n&gt; Also note that this is a great example of how misleading code coverage\n&gt; =\r\ncan\n&gt; &gt; be: you would get 100% test coverage if you only returned 1 data se=\r\nt in\n&gt; each\n&gt; &gt; data provider, but your tests would be very poor. Adding va=\r\nlues to your\n&gt; data\n&gt; &gt; provider will do nothing for your code coverage but=\r\n it will considerably\n&gt; &gt; improve the quality of your tests.\n&gt; &gt;\n&gt; &gt; --\n&gt; &gt;=\r\n C=C3=A9dric\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; On Sun, Aug 22, 2010 at 6:11 PM, Simon Chappell &lt;\n=\r\n&gt; &gt; simonpeterchappell@...&gt; wrote:\n&gt; &gt;\n&gt; &gt;&gt; Cedric,\n&gt; &gt;&gt;\n&gt; &gt;&gt; Good po=\r\nints.\n&gt; &gt;&gt;\n&gt; &gt;&gt; 1. I&#39;m not used to the @BeforeClass. I will make that chang=\r\ne, as it is a\n&gt; &gt;&gt; better fit.\n&gt; &gt;&gt; 2. The assigning of nulls is just to em=\r\nphasize cleaning up after\n&gt; yourself.\n&gt; &gt;&gt; I\n&gt; &gt;&gt; agree that it&#39;s technical=\r\nly unnecessary.\n&gt; &gt;&gt; 3. Let me think about the parameterized thing. I think=\r\n for eight values,\n&gt; &gt;&gt; with their descriptive names, it brings more value =\r\nleaving them as they\n&gt; &gt;&gt; are,\n&gt; &gt;&gt; although I may change where they are de=\r\nfined.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Thank you for you considered points. Hopefully this will h=\r\nelp us all\n&gt; &gt;&gt; sharpen\n&gt; &gt;&gt; our JUnit writing.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Simon\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt;=\r\n &gt;&gt; 2010/8/22 C=C3=A9dric Beust =E2=99=94 &lt;cedric@...&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; &gt;\n&gt; =\r\n&gt;&gt; &gt;\n&gt; &gt;&gt; &gt; Hi Simon,\n&gt; &gt;&gt; &gt;\n&gt; &gt;&gt; &gt; A few quick questions/remarks:\n&gt; &gt;&gt; &gt;\n&gt;=\r\n &gt;&gt; &gt; - Why do you initialize the fractions in @Before and not @BeforeClass=\r\n,\n&gt; &gt;&gt; &gt; since you don&#39;t seem to ever modify them?\n&gt; &gt;&gt; &gt; - Why assigning t=\r\nhem to null in @After?\n&gt; &gt;&gt; &gt; - Given the nature of your tests, I would pro=\r\nbably use parameterized\n&gt; &gt;&gt; &gt; tests to supply only the data that each test=\r\n needs instead of making\n&gt; &gt;&gt; these\n&gt; &gt;&gt; &gt; eight fields available to all th=\r\ne test methods all the time.\n&gt; &gt;&gt; &gt;\n&gt; &gt;&gt; &gt; --\n&gt; &gt;&gt; &gt; C=C3=A9dric\n&gt; &gt;&gt; &gt;\n&gt; &gt;=\r\n&gt; &gt;\n&gt; &gt;&gt; &gt; On Sun, Aug 22, 2010 at 3:47 PM, Simon Chappell &lt;\n&gt; &gt;&gt; &gt; simonpe=\r\nterchappell@... &lt;simonpeterchappell%40gmail.com&gt;&gt; wrote:\n&gt; &gt;&gt; &gt;\n&gt; &gt;&gt; =\r\n&gt; &gt; Following up on my previous offering of example JUnit code, I have\n&gt; &gt;&gt;=\r\n pushed\n&gt; &gt;&gt; &gt; a\n&gt; &gt;&gt; &gt; &gt; project called Fraction to GitHub. This implement=\r\ns classic\n&gt; mathematical\n&gt; &gt;&gt; &gt; &gt; fractions and was written in a test first=\r\n manner and has documented\n&gt; &gt;&gt; unit\n&gt; &gt;&gt; &gt; &gt; tests to help those learning =\r\nJUnit see one style (my style!) of test\n&gt; &gt;&gt; &gt; &gt; implementation.\n&gt; &gt;&gt; &gt; &gt;\n&gt;=\r\n &gt;&gt; &gt; &gt; The code may be found at:\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt; http://github.com/simon=\r\npeter/Fraction\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt; I hope that you find it useful.\n&gt; &gt;&gt; &gt; &gt;\n&gt;=\r\n &gt;&gt; &gt; &gt; Simon\n&gt; &gt;&gt; &gt; &gt; (one of the JUnit mailing list moderators)\n&gt; &gt;&gt; &gt; &gt;\n=\r\n&gt; &gt;&gt; &gt; &gt; --\n&gt; &gt;&gt; &gt; &gt; simonpeter.org | simonpeter.com | newlife-upc.org\n&gt; &gt;&gt;=\r\n &gt; &gt;\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt; [Non-text portions of this message have been removed=\r\n]\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt; ------------------------------------\n=\r\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt;\n&gt; &gt;&gt; &gt; &gt;\n&gt;=\r\n &gt;&gt; &gt;\n&gt; &gt;&gt; &gt; --\n&gt; &gt;&gt; &gt; C=C3=A9dric\n&gt; &gt;&gt; &gt;\n&gt; &gt;&gt; &gt; [Non-text portions of this=\r\n message have been removed]\n&gt; &gt;&gt; &gt;\n&gt; &gt;&gt; &gt;\n&gt; &gt;&gt; &gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; --\n&gt; &gt;=\r\n&gt; simonpeter.org | simonpeter.com | newlife-upc.org\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; [Non-tex=\r\nt portions of this message have been removed]\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; ---------=\r\n---------------------------\n&gt; &gt;&gt;\n&gt; &gt;&gt; Yahoo! Groups Links\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; =\r\n&gt;&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; --\n&gt; &gt; C=C3=A9dric\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; [Non-text portions of this me=\r\nssage have been removed]\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; ----------------------------------=\r\n--\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;\n&gt; ----------------------=\r\n--------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n-- \nC=C3=A9dric\n\n\n[Non-tex=\r\nt portions of this message have been removed]\n\n\n", 
    "profile": "cbeust", 
    "topicId": 22880, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 31449770, 
    "prevInTime": 22887, 
    "contentTrasformed": false, 
    "postDate": "1282572306", 
    "canDelete": false, 
    "nextInTopic": 22890, 
    "prevInTopic": 22887, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGluNlZ1cDRfZzUtZ0hla1Jhek0weHZoUjJFYjVUWE1ZSE0weTNFWkBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGlrUkp0dXAtVkFPU2VYcnplNk5MLXlZZC1IWTU0UHA0MjNVb181WEBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PEFBTkxrVGlrdjRnUHhHZy1oQ3crc3ZlZFRlWWViVCtrOXdSTlhaRUZkd0ZURUBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltSEJSRk1zNmFnQStqSFVOU1hDcFI1cnhONVRmdnZydVF6MndUYkBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGluNlZ1cDRfZzUtZ0hla1Jhek0weHZoUjJFYjVUWE1ZSE0weTNFWkBtYWlsLmdtYWlsLmNvbT4="
    }
}