{
    "numMessagesInTopic": 38, 
    "nextInTime": 5937, 
    "senderId": "Mtr0cGAm3_H0kZEJykD9rT5ljiwIEO8qwQyE6S7MZbj8nC-7J-CA-DFTpiqsmoPBiCD9zGqMMegdOZdxthfh3X18wpNoJwT9CYGCmw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Do JUnit internals suck?!?", 
    "from": "Berin Loritsch &lt;bloritsch@...&gt;", 
    "authorName": "Berin Loritsch", 
    "msgSnippet": "... The whole Name thing is irrelevant at this point.  If a Test implements the TestFixture interface, then it will use reflection to pull all the interfaces.", 
    "msgId": 5936, 
    "profile": "bloritsch", 
    "topicId": 5875, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 64910131, 
    "messageBody": "<div id=\"ygrps-yiv-2028911804\">kentlbeck wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; --- In junit@y..., Berin Loritsch &lt;bloritsch@a...&gt; wrote:<br/>\n&gt; <br/>\n&gt;&gt;How about starting by associating the TestCase/TestSuite contracts <br/>\n&gt; <br/>\n&gt; with<br/>\n&gt; <br/>\n&gt;&gt;explicit interfaces.  That way you strengthen the API, removing<br/>\n&gt;&gt;dependencies on those two classes.<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; What would you like to see in the interfaces? For TestCase, I see:<br/>\n&gt; \tint countTestCases() // Makes sense<br/>\n&gt; \tTestResult run() // Utility method, not general enough for <br/>\n&gt; an interface<br/>\n&gt; \trun(TestResult result) // Makes sense<br/>\n&gt; \trunBare() throws Throwable // Used internally<br/>\n&gt; \tString toString() // Already in Object<br/>\n&gt; \tString getName() // Makes sense<br/>\n&gt; \tsetName(String name) // Used internally<br/>\n<br/>\n<br/>\n </span></blockquote>The whole Name thing is irrelevant at this point.  If a Test<br/>\nimplements the TestFixture interface, then it will use reflection<br/>\nto pull all the interfaces.  So the interface should be something<br/>\nlike this:<br/>\n<br/>\ninterface TestFixture<br/>\n{}<br/>\n<br/>\nWhen the Test Collector/Test Runner runs across any Class<br/>\nimplementing TestFixture, it is converted into a group of<br/>\nTest objects.  In fact, you can use JDK 1.3 dynamic proxies<br/>\nto generate them.<br/>\n<br/>\nIt is a simple marker interface that tells the Test Runner/<br/>\nSuite/ etc. that the class is really a bunch of individual<br/>\ntests.<br/>\n<br/>\nI have played with a dynamic Delegate framework that really<br/>\nworks well, and can perform the function of converting the<br/>\nindividual methods into a Test for you.<br/>\n<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; For TestSuite, I see:<br/>\n&gt; \taddTest(Test test) // Makes sense for the composite<br/>\n&gt; \taddTestSuite(Class testClass) // Really belongs in another <br/>\n&gt; class<br/>\n&gt; \tint countTestCases() // Makes sense<br/>\n&gt; \trun(TestResult result) // Makes sense<br/>\n&gt; \trunTest(Test test, TestResult result) // Used internally<br/>\n&gt; \tTest testAt(int index) // Makes sense for the composite<br/>\n&gt; \tint testCount() // Used in the tree model<br/>\n&gt; \tEnumeration tests() // Also used in the tree model<br/>\n&gt; \tString toString() // Already in Object<br/>\n&gt; \tsetName(String name) // Used internally<br/>\n&gt; \tString getName() // Makes sense<br/>\n<br/>\n<br/>\n </span></blockquote>For TestSuite, I see another very simple interface:<br/>\n<br/>\ninterface Suite<br/>\n{<br/>\n     void addTest( Test test );<br/>\n     int countTestCases();<br/>\n     Iterator tests();<br/>\n}<br/>\n<br/>\nWith an extenal Static utility class that performs the &quot;multi-add&quot;<br/>\nfunctionality of the addTestSuite( Class testClass ):<br/>\n<br/>\nclass TestUtil<br/>\n{<br/>\n      Test[] processTestFixture( TestFixture fixture )<br/>\n      { /* .... reflection code here */ }<br/>\n<br/>\n      void addTestSuite( Suite suite, Test test )<br/>\n      {<br/>\n          suite.addTest( test );<br/>\n      }<br/>\n<br/>\n      void addTestSuite( Suite suite, TestFixture fixture )<br/>\n      {<br/>\n          Test[] tests = processTestFixture( fixture );<br/>\n<br/>\n          for( int i = 0; i &lt; tests.length; i++ )<br/>\n          {<br/>\n              suite.addTest( tests[i] );<br/>\n          }<br/>\n      }<br/>\n<br/>\n      void addTestSuite( Suite suite, Suite newSuite )<br/>\n      {<br/>\n          Iterator it = newSuite.tests();<br/>\n<br/>\n          while ( it.hasNext() )<br/>\n          {<br/>\n              suite.addTest( (Test) it.next() );<br/>\n          }<br/>\n      }<br/>\n}<br/>\n<br/>\n<br/>\nThat way you are always working with the Test interface in<br/>\nthe Runner.<br/>\n<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; There is a common interface, which is the same as Test with the <br/>\n&gt; addition of getName(), and there is the possibility of a second <br/>\n&gt; interface to represent a composite of tests.<br/>\n<br/>\n </span></blockquote>If you add getName() to Test, then the Utility can auto-generate<br/>\nthe test names.<br/>\n<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; The compression of fixtures and single test cases into one class is <br/>\n&gt; regrettable, but better than any of the alternatives we explored. <br/>\n&gt; You can still write a single test case per class if you want. In <br/>\n&gt; answer to an earlier comment, an instance of TestCase is always a <br/>\n&gt; leaf, never an interior node in the Composite. The class is used as <br/>\n&gt; a token in building suites, true, but never an instance.<br/>\n<br/>\n </span></blockquote>What do you think about the outline above?<br/>\n<br/>\nI am of the opinion that the logic to run a test should be completely<br/>\ninside the TestRunner, and not as a part of the Test.<br/>\n<br/>\nIn this infrastructure we have the most flexibility we can hope to<br/>\noffer for JUnit, and still provide some backwards compatibility.<br/>\n<br/>\n<br/>\n-- <br/>\n<br/>\n&quot;They that give up essential liberty to obtain a little temporary safety<br/>\n  deserve neither liberty nor safety.&quot;<br/>\n                 - Benjamin Franklin</div>", 
    "prevInTime": 5935, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1033673039", 
    "canDelete": false, 
    "nextInTopic": 5939, 
    "prevInTopic": 5935, 
    "headers": {
        "messageIdInHeader": "PDNEOUM5OTRGLjMwNjA4QGFwYWNoZS5vcmc+", 
        "referencesHeader": "PGFuaTNsditxMmNxQGVHcm91cHMuY29tPg=="
    }
}