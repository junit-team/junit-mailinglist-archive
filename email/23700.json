{
    "numMessagesInTopic": 20, 
    "nextInTime": 23701, 
    "senderId": "SfgWfo2Jz0_ySYAWbsebeXcNyv5IvTzMTVGHF5cy_FxMaQXLxiNMKOfsBEsglL0ehe20VPlxh3ymOyg66ujRl5Y2er-GaeRX7wk", 
    "systemMessage": true, 
    "subject": "Re: [junit] UI tests in Eclipse on MAC", 
    "from": "Murat &lt;murat.knecht@...&gt;", 
    "authorName": "Murat", 
    "msgSnippet": "Hi Shaun, I think Dale is right. I ve done a fair share of Swing-JUnit-Tests and your code ought not work. The usual JUnit-Runner will run the tests in a", 
    "msgId": 23700, 
    "profile": "jmc3631", 
    "topicId": 23594, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 393913775, 
    "messageBody": "<div id=\"ygrps-yiv-1410498352\">Hi Shaun,<br/>\n<br/>\nI think Dale is right. I&#39;ve done a fair share of Swing-JUnit-Tests and your<br/>\ncode ought not work. The usual JUnit-Runner will run the tests in a &quot;normal&quot;<br/>\nThread, while UI-Manipulation, including Frame creation, should be done in<br/>\nthe AWT Eventqueue, even in a test. Also, if you interact with your GUI you<br/>\nneed to wait for the events that you dispatch to be processed. Abbot, a ui<br/>\ntest framework like FEST, provides a wait() method for that, which uses the<br/>\ninvokeAndWait()-Method mentioned by Dale with an empty Runnable.<br/>\n<br/>\nregards<br/>\nmurat<br/>\n<br/>\n<br/>\n2011/9/23 Dale Emery &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:dale@...\">dale@...</a>&gt;<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; **<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Hi Shaun,<br/>\n&gt;<br/>\n&gt; You&#39;re calling methods that are described as not threadsafe. That is, while<br/>\n&gt; your method is running on one thread, some other thread (the Swing &quot;event&quot;<br/>\n&gt; thread) might come along and fiddle with the same component you&#39;re fiddling<br/>\n&gt; with.<br/>\n&gt;<br/>\n&gt; I wonder if that&#39;s part of the problem. If it is, the way to solve the<br/>\n&gt; problem is to invoke the non-threadsafe methods via<br/>\n&gt; SwingUtilities.invokeLater() or SwingUtilities.invokeAndWait().<br/>\n&gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://download.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater\">http://download.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater</a><br/>\n&gt; (java.lang.Runnable)<br/>\n&gt;<br/>\n&gt; Dale<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; On Sep 23, 2011, at 10:28 AM, shca08_junit wrote:<br/>\n&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Mac OS 10.6.8<br/>\n&gt; &gt; Eclipse Helios<br/>\n&gt; &gt; JDK 1.6_26<br/>\n&gt; &gt;<br/>\n&gt; &gt; import java.awt.AWTException;<br/>\n&gt; &gt; import java.awt.Robot;<br/>\n&gt; &gt; import java.awt.event.ActionEvent;<br/>\n&gt; &gt; import java.awt.event.ActionListener;<br/>\n&gt; &gt; import java.awt.event.InputEvent;<br/>\n&gt; &gt;<br/>\n&gt; &gt; import javax.swing.JButton;<br/>\n&gt; &gt; import javax.swing.JFrame;<br/>\n&gt; &gt; import javax.swing.JOptionPane;<br/>\n&gt; &gt;<br/>\n&gt; &gt; import junit.framework.TestCase;<br/>\n&gt; &gt;<br/>\n&gt; &gt; public class FrameTest extends TestCase<br/>\n&gt; &gt; {<br/>\n&gt; &gt; JFrame frame;<br/>\n&gt; &gt;<br/>\n&gt; &gt; @Override<br/>\n&gt; &gt; public void setUp()<br/>\n&gt; &gt; {<br/>\n&gt; &gt; frame = new JFrame();<br/>\n&gt; &gt; frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br/>\n&gt; &gt; JButton btn = new JButton(&quot;click&quot;);<br/>\n&gt; &gt; btn.addActionListener(new ActionListener()<br/>\n&gt; &gt; {<br/>\n&gt; &gt; @Override<br/>\n&gt; &gt; public void actionPerformed(ActionEvent e)<br/>\n&gt; &gt; {<br/>\n&gt; &gt; JOptionPane.showMessageDialog(frame, &quot;Hello&quot;);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; });<br/>\n&gt; &gt; frame.add(btn);<br/>\n&gt; &gt; frame.pack();<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; public void testShowFrame() throws AWTException<br/>\n&gt; &gt; {<br/>\n&gt; &gt; frame.setVisible(true);<br/>\n&gt; &gt; frame.setExtendedState(JFrame.ICONIFIED);<br/>\n&gt; &gt; frame.setExtendedState(JFrame.MAXIMIZED_BOTH);<br/>\n&gt; &gt; Robot robot = new Robot();<br/>\n&gt; &gt; robot.delay(2000);<br/>\n&gt; &gt; robot.mouseMove(500, 500);<br/>\n&gt; &gt; robot.delay(2000);<br/>\n&gt; &gt; robot.mousePress(InputEvent.BUTTON1_MASK);<br/>\n&gt; &gt; robot.mouseRelease(InputEvent.BUTTON1_MASK);<br/>\n&gt; &gt; robot.delay(2000);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; If you add a main() method and run as an App, it works. If you run it as<br/>\n&gt; a JUnit testcase, it works. But if you run it as a plugin test (which<br/>\n&gt; requires it to be in a plugin project) using the default args, it always<br/>\n&gt; fails (in diff ways). Removing the args and any unnecessary plugins gets it<br/>\n&gt; mostly working. However, a couple other things don&#39;t always work - like<br/>\n&gt; trying to select submenus.<br/>\n&gt; &gt;<br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Marc Philipp &lt;mphilipp82@...&gt; wrote:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Can you please provide a minimal non-working example?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Am 22.09.2011 um 17:12 schrieb shca08_junit &lt;jacsmit09@...&gt;:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Hi Marc,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Our app uses OSGi - so the different components are plugins. The only<br/>\n&gt; way to<br/>\n&gt; &gt; &gt; test it is to use JUnit plugin tests.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Marc Philipp &lt;mphilipp82@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Shaun,<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; since you seem to be using FEST you must be using Swing not SWT,<br/>\n&gt; right?<br/>\n&gt; &gt; &gt; Why would you want to run such a test as a JUnit plugin test?<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Marc<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Am 15.09.2011 um 16:58 schrieb shca08_junit:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Hi Dale,<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Thanks for your reply. Ok so I wrote a simple test that shows a<br/>\n&gt; JFrame<br/>\n&gt; &gt; &gt; and uses Java Robot to click on it. Works fine run in Eclipse on Mac as<br/>\n&gt; an<br/>\n&gt; &gt; &gt; application or JUnit test but fails when run as JUnit plugin test.<br/>\n&gt; Frame<br/>\n&gt; &gt; &gt; would show 1 out of 5 or so times. Removing all unneeded plugins<br/>\n&gt; resulted in<br/>\n&gt; &gt; &gt; frame always being shown but the click never seems to happen.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; I also tried Window Licker and the included Calculator test(s) -<br/>\n&gt; same<br/>\n&gt; &gt; &gt; thing... runs as a JUnit Test but fails as a JUnit Plugin Test. One<br/>\n&gt; time the<br/>\n&gt; &gt; &gt; frame was shown, but nothing happened (so the test failed). The other<br/>\n&gt; times,<br/>\n&gt; &gt; &gt; the frame didn&#39;t even show. Tried removing all VM args and unnecessary<br/>\n&gt; &gt; &gt; plugins.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Is this related to the args that Eclipse uses to run plugin tests<br/>\n&gt; on<br/>\n&gt; &gt; &gt; Mac? Or the core plugins included to run the tests? Or...?<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Shaun.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Dale Emery &lt;dale@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Hi whoever you are,<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; Hi - thanks for your reply. I&#39;m actually using Alex Ruiz&#39;s FEST<br/>\n&gt; for<br/>\n&gt; &gt; &gt; our testing and it works quite well on Windows. With or without FEST on<br/>\n&gt; the<br/>\n&gt; &gt; &gt; Mac, I can&#39;t seem to get any UI tests to run. The initial frame/window<br/>\n&gt; comes<br/>\n&gt; &gt; &gt; up in some cases but I can&#39;t do much more than that. When running JUnit<br/>\n&gt; &gt; &gt; tests (again with or without FEST), I don&#39;t even see the frame.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; I&#39;ve gone through what docs there are for FEST and have read<br/>\n&gt; the<br/>\n&gt; &gt; &gt; blog/article but I can&#39;t figure it out.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; I&#39;ve used FEST to test Swing code on a toy project:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/dhemery/towers.dead\">https://github.com/dhemery/towers.dead</a><br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Later I restarted the project and used WindowLicker instead:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/dhemery/Towers\">https://github.com/dhemery/Towers</a><br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; It&#39;s been a while since I visited either project, but I think the<br/>\n&gt; &gt; &gt; (few) UI tests run. Neither version of the code does much, so there<br/>\n&gt; aren&#39;t<br/>\n&gt; &gt; &gt; many UI tests. The older one (which uses FEST) has more features and<br/>\n&gt; tests.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; I wrote all of this code on Macs running Snow Leopard and Eclipse<br/>\n&gt; &gt; &gt; Ganymede. I haven&#39;t tried it on Lion or Helios.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Dale<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; --<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Dale Emery<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Consultant to software teams and leaders<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://dhemery.com\">http://dhemery.com</a><br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt; Dale Emery<br/>\n&gt; Consultant to software teams and leaders<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://dhemery.com\">http://dhemery.com</a><br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n </span></blockquote>[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 23699, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1316846755", 
    "canDelete": false, 
    "nextInTopic": 23708, 
    "prevInTopic": 23699, 
    "headers": {
        "inReplyToHeader": "PDZGRkEwNDhDLTQyMzctNEQ5RC04OTU3LUFCNzgwOEQwQzRCNEBkaGVtZXJ5LmNvbT4=", 
        "messageIdInHeader": "PENBTj1NNEVkT3crNjR0OStlWFFpanlVRjc0Z2RIS3I0MFYxUjFCenFRTT11PVh3WjR0QUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGo1aWZqOSttcWdwQGVHcm91cHMuY29tPiA8NkZGQTA0OEMtNDIzNy00RDlELTg5NTctQUI3ODA4RDBDNEI0QGRoZW1lcnkuY29tPg=="
    }
}