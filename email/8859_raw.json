{
    "numMessagesInTopic": 24, 
    "nextInTime": 8860, 
    "senderId": "kdBktIicWegnb1nl1GkwEvy-JnKGWcJuyWhuZI-rCSMnt3z4RysJz15R7dIba7i9duFDJsjCJRL9zdT9dcFTQUm75fI", 
    "systemMessage": false, 
    "subject": "RE: [junit] How to test a main(String[] args) method?", 
    "from": "&quot;David&quot; &lt;achepati67@...&gt;", 
    "authorName": "David", 
    "msgSnippet": "... error, ... some System.exit() was invoked. ... The solution propoused by Bern was: java.lang.System is final and does not implement interfaces,so there is", 
    "msgId": 8859, 
    "rawEmail": "Return-Path: &lt;achepati67@...&gt;\r\nReceived: (qmail 67094 invoked by uid 7800); 30 Jul 2003 16:53:17 -0000\r\nX-Sender: achepati67@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 89599 invoked from network); 30 Jul 2003 08:56:25 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m17.grp.scd.yahoo.com with QMQP; 30 Jul 2003 08:56:25 -0000\r\nReceived: from unknown (HELO smtp015.mail.yahoo.com) (216.136.173.59)\n  by mta1.grp.scd.yahoo.com with SMTP; 30 Jul 2003 08:56:25 -0000\r\nReceived: from unknown (HELO sfpc1059) (achepati67@194.140.67.10 with login)\n  by smtp.mail.vip.sc5.yahoo.com with SMTP; 30 Jul 2003 08:56:24 -0000\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nCc: &lt;berndq@...&gt;,\n\t&lt;mike@...&gt;,\n\t&lt;jbrains@...&gt;\r\nSubject: RE: [junit] How to test a main(String[] args) method?\r\nDate: Wed, 30 Jul 2003 10:56:38 +0200\r\nMessage-ID: &lt;NFBBLFDNMJLNLJAJJKNAKEKHFHAA.achepati67@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200\r\nImportance: Normal\r\nFrom: &quot;David&quot; &lt;achepati67@...&gt;\r\nX-Yahoo-Group-Post: member; u=152694144\r\nX-Yahoo-Profile: achepati67\r\nX-eGroups-Approved-By: nails762 &lt;jbrains@...&gt; via email; 30 Jul 2003 16:53:17 -0000\r\n\r\n&gt;Dear Members,\n&gt;\n&gt;I whould like to test a class with a main(String[] args) method. Depending\n&gt;on the input argument it executes one thing or the other. The problem is\n&gt;that on my main(String[] args) method at the end or when it founds an\nerror,\n&gt;the method System.exit() is invoked. So when I define jUnit test cases\n&gt;(methods with prefix test), jUnits only runs the first test, because\nsome&gt;System.exit() was invoked.\n&gt;Is there any way to test such kind of situations?\n&gt;Thanks in advance,\n\nThe solution propoused by Bern was:\n\njava.lang.System is final and does not implement interfaces,so there is no\nchance to replace ist behaviour.You may want to replace calls to\nSystem.exit() with calls againstan interface you define. Under test use an\nimplementation which allowsyourtest code to chech if the exit method has\nbeen called by main() but whichdoes not exit the VM. In production use an\nimplememtation which delegatesto System.exit().\n\nAs far as I know what you mean could be implemented like this: (see comments\nbelow)\n\npackage com.my.example\n\npublic class Example {\n\tstatic Finish _finish = new Example.ProductionFinish();// private package\n(static because it is\n\t\t\t\t\t\t\t\t\t\t// going to be used on main.)\n\tstatic void setFinish(Finish value){_finish = value;}\t// private package\n\n\tstatic main (String[] args)\n\n\t\tboolean goOn = true; \t// because we don&#39;t exit on testing mode,\n\t\t\t\t\t\t// we need a way for controling the execution flow.\n\t\tif (someCondition) {// first checking (exceptional flow)\n\t\t\tgoOn = finish.do(-1);\n\t\t}\n\t\t// ... put other checking here\n\t\tif (goOn && otherCondition) {// main flow\n\t\t\tfinish.do(0);\n\t\t}\n\t}\n\n\t/* Now we define the interface Finish and its default implementation (as\ninner classes\n\twith private-package visibility, because we have to define ONLY for testing\npurpose this\n\tinterface!)*/\n\n\tinterface Finish {\n\t\tboolean do(int i);\n\t}\n\n\tclass ProductionFinish {// its default implementation (used on production\nmode)\n\t\tProductionFinish(){} // default constructor with private-package\nvisibility\n\t\tboolean do(int i) {\n\t\t\tSystem.exit(i);\n\t\t}\n\t}\n}\n\nNow on the testing class defined on the same package:\n\npackage com.my.example\n\npublic class ExampleTest extends TestCase{\n\t// ...\n    \tprotected void setUp (){Example.setFinish(new\nExampleTest.TestingFinish());}\n\t}\n\tclass TestingFinish implements Example.Finish{\n\t\tTestingFinish (){} // default constructor with private-package visibility\n\t\tboolean do(int i) { // We have to stop on every case!\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nCOMMENTS:\n\n- About this suggestion and the corresponding implementation, because we\nneed a default implementation ALWAYS (for production), then instead of using\nan INTERFACE, it is BETTER to just define the class Finish as ABSTRACT (the\ndo(int i) method should be abstract)\n\n- You have to write A LOT for makeing a very simple task. I have implemented\na simpler solution, just do the following steps:\n\na) Define on the class to test (Example), the static boolean field _TEST as\nprivate-package. This field is initialized with default value: false\n(production)\n\nb) Define a STATIC PRIVATE method finish, like this:\n\t\tprivate static boolean finish(int i) {\n\t\t\tif(!_TEST) {\n\t\t\t\tSystem.exit(i);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\nc) On the testing class (ExampleTest), set on the setup() method, the field\n_TEST to true.\n\n\nNow we have:\n\npackage com.my.example\n\npublic class Example {\n\tstatic boolean _TEST = false;\n\n\tstatic main (String[] args)\n\n\t\tboolean goOn = true;\n\t\tif (someCondition) {// fist checking\n\t\t\tgoOn = finish(-1);\n\t\t}\n\t\t// ... put other checking here\n\t\tif (goOn && otherCondition) {// the last condition (end of the program)\n\t\t\tfinish(-1);\n\t\t}\n\t}\n\n\tprivate static boolean finish (int i) {\n\t\tif (!_TEST) {\n\t\t\tSystem.exit(i);\n\t\t}\n\t\treturn false;\n\t}\n}\n\npackage com.my.example\n\npublic class ExampleTest extends TestCase{\n\t// ...\n    \tprotected void setUp (){Example._TEST = true;}\n\t}\n}\n\nI think this solution is enough. Any suggestion?\n\nThanks in advance,\n\nDavid\n\n\n", 
    "profile": "achepati67", 
    "topicId": 8737, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 152694144, 
    "prevInTime": 8858, 
    "contentTrasformed": false, 
    "postDate": "1059555398", 
    "canDelete": false, 
    "nextInTopic": 8891, 
    "prevInTopic": 8840, 
    "headers": {
        "messageIdInHeader": "PE5GQkJMRkROTUpMTkxKQUpKS05BS0VLSEZIQUEuYWNoZXBhdGk2N0B5YWhvby5lcz4="
    }
}