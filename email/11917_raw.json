{
    "numMessagesInTopic": 2, 
    "nextInTime": 11918, 
    "senderId": "oU7IpjHHHtNY_jt3q3gYLCynUKRO2jJL3UkpKR7rWD-P8tYdFJFspLVCt8mt1YqRcU12n9i8SLA78QqJ1Cc0D39L2jbbKvLQAo1pXGDc", 
    "systemMessage": false, 
    "subject": "Re: [junit] garbage-collection of tests", 
    "from": "Neil Swingler &lt;neil@...&gt;", 
    "authorName": "Neil Swingler", 
    "msgSnippet": "You could introduce a decorator for the TestCase which could null it s reference to the real TestCase as soon as it has finished executing. See my example", 
    "msgId": 11917, 
    "rawEmail": "Return-Path: &lt;neil@...&gt;\r\nX-Sender: neil@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 24046 invoked from network); 8 Sep 2004 16:00:58 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m2.grp.scd.yahoo.com with QMQP; 8 Sep 2004 16:00:58 -0000\r\nReceived: from unknown (HELO serv01.neil.swingler.name) (217.162.58.66)\n  by mta2.grp.scd.yahoo.com with SMTP; 8 Sep 2004 16:00:57 -0000\r\nReceived: from localhost\n\t([127.0.0.1] helo=serv01.neil.swingler.name ident=zope)\n\tby serv01.neil.swingler.name with esmtp (Exim 3.35 #1 (Debian))\n\tid 1C55q5-0005dZ-00\n\tfor &lt;junit@yahoogroups.com&gt;; Wed, 08 Sep 2004 19:02:33 +0200\r\ndate: Wed, 08 Sep 2004 19:02:26 +0200\r\nTo: JUnit Discussion &lt;junit@yahoogroups.com&gt;\r\nCc: \r\nX-Mailer: WebMailv2 Tice-Universite de Savoie\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Type: text/plain\r\nMessage-Id: &lt;E1C55q5-0005dZ-00@...&gt;\r\nX-eGroups-Remote-IP: 217.162.58.66\r\nFrom: Neil Swingler &lt;neil@...&gt;\r\nSubject: =?iso-8859-1?Q?Re:_[junit]_garbage-collection_of_tests?=\r\nX-Yahoo-Group-Post: member; u=117993331\r\nX-Yahoo-Profile: neil_swingler\r\n\r\n\nYou could introduce a decorator for the TestCase which could null it&#39;s ref=\r\nerence to the real TestCase as soon as it has finished executing.\n\nSee my e=\r\nxample (name.swingler.neil.classreloader.zip) in the files section which us=\r\nes this technique to introduce a new classloader for each TestCase instance=\r\n:\n\n- Neil\n\n&gt; &lt;html&gt;&lt;body&gt;\n&gt; \n&gt; \n&gt; &lt;tt&gt;\n&gt; I recently encountered a problem w=\r\nhen running a lot (~500) of UI tests &lt;BR&gt;\n&gt; which probably wouldn&#39;t show up=\r\n for non-UI tests until you get in the &lt;BR&gt;\n&gt; 100K of tests.&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; A=\r\nfter a TestCase instance is run, it is usually never garbage-collected &lt;BR&gt;=\r\n\n&gt; or made available for GC until the runner itself is disposed on program =\r\n&lt;BR&gt;\n&gt; exit (at least with the default runners, and probably with most cust=\r\nom &lt;BR&gt;\n&gt; runners as well).&nbsp; Not a big deal if you have just a few bas=\r\nic data &lt;BR&gt;\n&gt; fields or not too many tests, but if the runner has 1000s of=\r\n tests and &lt;BR&gt;\n&gt; you don&#39;t have enough resources for all tests to be resid=\r\nent at once, &lt;BR&gt;\n&gt; you&#39;re in trouble.&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; In my case, each UI tes=\r\nt usually included assignment of several member &lt;BR&gt;\n&gt; fields in its setUp =\r\nmethod.&nbsp;&nbsp; Unless these are explicitly nulled in the &lt;BR&gt;\n&gt; tearDo=\r\nwn method, the references are kept around until the test runner &lt;BR&gt;\n&gt; term=\r\ninates, since the TestCase instance itself is never GCd.&nbsp; This &lt;BR&gt;\n&gt; =\r\ncauses real problems when the fields are resource-intensive or the &lt;BR&gt;\n&gt; r=\r\nesources are limited (think Windows and UI resources).&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; Yes, it=\r\n&#39;s possible to explicitly blank certain fields when necessary, &lt;BR&gt;\n&gt; but t=\r\nhat&#39;s only a hair removed from explicitly freeing memory, and a &lt;BR&gt;\n&gt; pain=\r\n when there are some 500-odd tests that would need to be changed &lt;BR&gt;\n&gt; (no=\r\n refactoring tool for *that* yet, I&#39;m afraid).&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; There are sever=\r\nal solutions:&lt;BR&gt;\n&gt; 1) explicitly null fields in tearDown (this smells, bec=\r\nause that&#39;s what &lt;BR&gt;\n&gt; GC is for)&lt;BR&gt;\n&gt; 2) make a runner that doesn&#39;t keep=\r\n references to test case instances &lt;BR&gt;\n&gt; after they&#39;re run&lt;BR&gt;\n&gt; 3) use re=\r\nflection to auto-null all test case fields (hackishly neat, &lt;BR&gt;\n&gt; but stil=\r\nl smells)&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; Any other ideas, suggestions?&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;/tt&gt;\n&gt; \n=\r\n&gt; \n&gt; &lt;br&gt;\n&gt; \n&gt; &lt;!-- |**|begin egp html banner|**| --&gt;\n&gt; \n&gt; &lt;table border=3D=\r\n0 cellspacing=3D0 cellpadding=3D2&gt;\n&gt; &lt;tr bgcolor=3D#FFFFCC&gt;\n&gt; &lt;td align=CEn=\r\nter&gt;&lt;font size=3D&quot;-1&quot; color=3D#003399&gt;&lt;b&gt;Yahoo! Groups Sponsor&lt;/b&gt;&lt;/font&gt;&lt;/=\r\ntd&gt;\n&gt; &lt;/tr&gt;\n&gt; &lt;tr bgcolor=3D#FFFFFF&gt;\n&gt; &lt;td align=CEnter widthG0&gt;&lt;table bord=\r\ner=3D0 cellpadding=3D0 cellspacing=3D0&gt; &lt;tr&gt; &lt;td align=CEnter&gt;&lt;font face=3D=\r\narial size=3D-2&gt;ADVERTISEMENT&lt;/font&gt;&lt;br&gt;&lt;a href=3D&quot;http://us.ard.yahoo.com/=\r\nSIG=1295g5gqq/M)5196.4901138.6071305.3001176/D=3Dgroups/S=1705006905:HM/EXP=\r\n=1094739772/A!28215/R=3D0/SIG=10se96mf6/*http://companion.yahoo.com&quot; alt=3D=\r\n&quot;&quot;&gt;&lt;img src=3D&quot;http://us.a1.yimg.com/us.yimg.com/a/ya/yahoo_companion/lrec_=\r\ncompanion_043004.gif&quot; alt=3D&quot;click here&quot; width=3D&quot;300&quot; height=3D&quot;250&quot; borde=\r\nr=3D&quot;0&quot;&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; &lt;/td&gt;\n&gt; &lt;/tr&gt;\n&gt; &lt;tr&gt;&lt;td&gt;&lt;img alt=3D&quot;&quot; width=\r\n=3D1 height=3D1 src=3D&quot;http://us.adserver.yahoo.com/l?M)5196.4901138.607130=\r\n5.3001176/D=3Dgroups/S=3D:HM/A!28215/randq7150414&quot;&gt;&lt;/td&gt;&lt;/tr&gt;\n&gt; &lt;/table&gt;\n&gt; =\r\n\n&gt; &lt;!-- |**|end egp html banner|**| --&gt;\n&gt; \n&gt; \n&gt; \n&gt; &lt;!-- |**|begin egp html =\r\nbanner|**| --&gt;\n&gt; \n&gt; &lt;br&gt;\n&gt; &lt;tt&gt;&lt;hr width=3D&quot;500&quot;&gt;\n&gt; &lt;b&gt;Yahoo! Groups Links&lt;=\r\n/b&gt;&lt;br&gt;\n&gt; &lt;ul&gt;\n&gt; &lt;li&gt;To visit your group on the web, go to:&lt;br&gt;&lt;a href=3D&quot;h=\r\nttp://groups.yahoo.com/group/junit/&quot;&gt;http://groups.yahoo.com/group/junit/&lt;/=\r\na&gt;&lt;br&gt;&nbsp;\n&gt; &lt;li&gt;To unsubscribe from this group, send an email to:&lt;br&gt;&lt;a =\r\nhref=3D&quot;mailto:junit-unsubscribe@yahoogroups.com?subject=3DUnsubscribe&quot;&gt;jun=\r\nit-unsubscribe@yahoogroups.com&lt;/a&gt;&lt;br&gt;&nbsp;\n&gt; &lt;li&gt;Your use of Yahoo! Group=\r\ns is subject to the &lt;a href=3D&quot;http://docs.yahoo.com/info/terms/&quot;&gt;Yahoo! Te=\r\nrms of Service&lt;/a&gt;.\n&gt; &lt;/ul&gt;\n&gt; &lt;/tt&gt;\n&gt; &lt;/br&gt;\n&gt; \n&gt; &lt;!-- |**|end egp html bann=\r\ner|**| --&gt;\n&gt; \n&gt; \n&gt; &lt;/body&gt;&lt;/html&gt;\n&gt; \n&gt; \n\n\n\n\n", 
    "profile": "neil_swingler", 
    "topicId": 11917, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 117993331, 
    "prevInTime": 11916, 
    "contentTrasformed": false, 
    "postDate": "1094662946", 
    "canDelete": false, 
    "nextInTopic": 11920, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PEUxQzU1cTUtMDAwNWRaLTAwQHNlcnYwMS5uZWlsLnN3aW5nbGVyLm5hbWU+"
    }
}