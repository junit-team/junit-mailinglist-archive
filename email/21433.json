{
    "numMessagesInTopic": 22, 
    "nextInTime": 21434, 
    "senderId": "FtB_V5t22Ir5v9bmEIaiCCPQxQq7xayoDm8Z4HZRfDtiweZUvTvHGv-xHuqJYjzj7qDT8_BQt686e1522TbUa20SEull-GTLhj2ENJ05HezK8svbbikK9LHM", 
    "systemMessage": false, 
    "subject": "Re: Runner for non static inner class in JUnit 4.x", 
    "from": "&quot;tuomaskarkkainenri&quot; &lt;tuomaskarkkainenri@...&gt;", 
    "authorName": "tuomaskarkkainenri", 
    "msgSnippet": "Kent, I appreciate your reply. We currently have a copy of AnnotatedBuilder in JDave, and are relying on classpath ordering to load our copy before JUnit s", 
    "msgId": 21433, 
    "profile": "tuomaskarkkainenri", 
    "topicId": 21238, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 373866241, 
    "messageBody": "<div id=\"ygrps-yiv-1981147065\">Kent,<br/>\n<br/>\nI appreciate your reply.<br/>\n<br/>\nWe currently have a copy of AnnotatedBuilder in JDave, and are relying on classpath ordering to load our copy before JUnit&#39;s copy.<br/>\n<br/>\nhttp://svn.laughingpanda.org/svn/jdave/trunk/jdave-junit4/src/java/org/junit/internal/builders/AnnotatedBuilder.java<br/>\n<br/>\nI will take a look at the GitHub way of managing a branch of JUnit to see if it would be a cleaner way of maintaining our own copy of the class.<br/>\n<br/>\nBest regards,<br/>\nTuomas<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In junit@yahoogroups.com, &quot;kentb&quot; &lt;kentb@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Tuomas,<br/>\n&gt;  <br/>\n&gt; I apologize for the long delay in replying. I was just avoiding conflict,<br/>\n&gt; which isn&#39;t fair to you.<br/>\n&gt;  <br/>\n&gt; I still see the API you suggest as too &quot;magical&quot; for JUnit. That is, it<br/>\n&gt; isn&#39;t apparent to the eye what is going on without an explanation. There is<br/>\n&gt; already too much implicit behavior in JUnit and I&#39;m loathe to add more. The<br/>\n&gt; way I think of it is there is a fixed number of words I can use to describe<br/>\n&gt; JUnit to users. If I want to add a feature that doesn&#39;t require explanation,<br/>\n&gt; no problem. If a feature needs an explanation, then I need to figure out<br/>\n&gt; what to remove first.<br/>\n&gt;  <br/>\n&gt; That said, we&#39;re in a new era after the move to GitHub. You are welcome to<br/>\n&gt; create your own branch and maintain your builder there. If it turns out lots<br/>\n&gt; of folks use it or there is a simple way to express its behavior, we&#39;ll be<br/>\n&gt; glad to incorporate it into our branch.<br/>\n&gt;  <br/>\n&gt; Regards,<br/>\n&gt;  <br/>\n&gt; Kent Beck<br/>\n&gt; Three Rivers Institute<br/>\n&gt; <br/>\n&gt;   _____  <br/>\n&gt; <br/>\n&gt; From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of<br/>\n&gt; tuomaskarkkainenri<br/>\n&gt; Sent: Thursday, February 12, 2009 10:36 AM<br/>\n&gt; To: junit@yahoogroups.com<br/>\n&gt; Subject: [junit] Re: Runner for non static inner class in JUnit 4.x<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; David,<br/>\n&gt; <br/>\n&gt; I rewrote my patch into AnnotatedBuilder.<br/>\n&gt; I wrote it in such a way that it decreases the complexity of the<br/>\n&gt; original AnnotatedBuilder. The net effect of adding JDave support is<br/>\n&gt; thus a reduction in complexity.<br/>\n&gt; <br/>\n&gt; What do you think?<br/>\n&gt; <br/>\n&gt; Best regards,<br/>\n&gt; Tuomas<br/>\n&gt; <br/>\n&gt; AnnotatedBuilder.java:<br/>\n&gt; <br/>\n&gt; package org.junit.internal.builders;<br/>\n&gt; <br/>\n&gt; import static java.util.Arrays.asList;<br/>\n&gt; <br/>\n&gt; import java.lang.reflect.Constructor;<br/>\n&gt; import java.lang.reflect.Modifier;<br/>\n&gt; import java.util.List;<br/>\n&gt; <br/>\n&gt; import org.junit.runner.RunWith;<br/>\n&gt; import org.junit.runner.Runner;<br/>\n&gt; import org.junit.runners.model.InitializationError;<br/>\n&gt; import org.junit.runners.model.RunnerBuilder;<br/>\n&gt; <br/>\n&gt; public class AnnotatedBuilder extends RunnerBuilder {<br/>\n&gt; private static final String CONSTRUCTOR_ERROR_FORMAT= &quot;Custom runner<br/>\n&gt; class %1$s should have a public constructor with signature %1$s(Class<br/>\n&gt; testClass) or %1$s(Class testClass, RunnerBuilder builder)&quot;;<br/>\n&gt; <br/>\n&gt; private final RunnerBuilder fSuiteBuilder;<br/>\n&gt; <br/>\n&gt; public AnnotatedBuilder(final RunnerBuilder suiteBuilder) {<br/>\n&gt; fSuiteBuilder= suiteBuilder;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public Runner runnerForClass(final Class&lt;?&gt; testClass) throws Exception {<br/>\n&gt; final RunWith annotation= getRunWithAnnotation(testClass);<br/>\n&gt; if (annotation != null) {<br/>\n&gt; return buildRunner(annotation.value(), testClass);<br/>\n&gt; }<br/>\n&gt; return null;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private RunWith getRunWithAnnotation(final Class&lt;?&gt; testClass) {<br/>\n&gt; if (testClass.isAnnotationPresent(RunWith.class)) {<br/>\n&gt; return testClass.getAnnotation(RunWith.class);<br/>\n&gt; }<br/>\n&gt; if (testClassIsANonStaticInnerClass(testClass)) {<br/>\n&gt; return testClass.getDeclaringClass().getAnnotation(RunWith.class);<br/>\n&gt; }<br/>\n&gt; return null;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private boolean testClassIsANonStaticInnerClass(final Class&lt;?&gt;<br/>\n&gt; testClass) {<br/>\n&gt; return testClass.isMemberClass()<br/>\n&gt; && !Modifier.isStatic(testClass.getModifiers());<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private &lt;T extends Runner&gt; T buildRunner(final Class&lt;T&gt; runnerClass,<br/>\n&gt; final Class&lt;?&gt; testClass) throws Exception {<br/>\n&gt; return new InternalBuilder&lt;T&gt;(runnerClass,<br/>\n&gt; fSuiteBuilder).build(testClass);<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private static class InternalBuilder&lt;T extends Runner&gt; {<br/>\n&gt; private final RunnerBuilder suiteBuilder;<br/>\n&gt; <br/>\n&gt; private final Class&lt;T&gt; runnerClass;<br/>\n&gt; <br/>\n&gt; public InternalBuilder(final Class&lt;T&gt; runnerClass,<br/>\n&gt; final RunnerBuilder suiteBuilder) {<br/>\n&gt; this.runnerClass= runnerClass;<br/>\n&gt; this.suiteBuilder= suiteBuilder;<br/>\n&gt; <br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private T build(final Class&lt;?&gt; testClass) throws Exception {<br/>\n&gt; if (hasValidConstructor()) {<br/>\n&gt; return instantiateRunner(testClass);<br/>\n&gt; }<br/>\n&gt; throw new InitializationError(String.format(<br/>\n&gt; CONSTRUCTOR_ERROR_FORMAT, runnerClass.getSimpleName()));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private T instantiateRunner(final Class&lt;?&gt; testClass) throws Exception {<br/>\n&gt; if (hasSimpleConstructor()) {<br/>\n&gt; return getSimpleConstructor().newInstance(testClass);<br/>\n&gt; }<br/>\n&gt; return getConstructorWithSuite(runnerClass).newInstance(testClass,<br/>\n&gt; suiteBuilder);<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private boolean hasValidConstructor() {<br/>\n&gt; return hasSimpleConstructor()<br/>\n&gt; || hasConstructorWithSuite();<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private boolean hasSimpleConstructor() {<br/>\n&gt; return getSimpleConstructor() != null;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private boolean hasConstructorWithSuite() {<br/>\n&gt; return getConstructorWithSuite(runnerClass) != null;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private Constructor&lt;T&gt; getSimpleConstructor() {<br/>\n&gt; for (final Constructor&lt;T&gt; constructor : getConstructors()) {<br/>\n&gt; final List&lt;Class&lt;?&gt;&gt; parameters= asList(constructor<br/>\n&gt; .getParameterTypes());<br/>\n&gt; if (parameters.equals(asList(Class.class))) {<br/>\n&gt; return constructor;<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; return null;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private Constructor&lt;T&gt; getConstructorWithSuite(<br/>\n&gt; final Class&lt;T&gt; runnerClass) {<br/>\n&gt; for (final Constructor&lt;T&gt; constructor : getConstructors()) {<br/>\n&gt; final List&lt;Class&lt;?&gt;&gt; parameters= asList(constructor<br/>\n&gt; .getParameterTypes());<br/>\n&gt; if (parameters.equals(asList(Class.class, RunnerBuilder.class))) {<br/>\n&gt; return constructor;<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; return null;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @SuppressWarnings(&quot;unchecked&quot;)<br/>\n&gt; private List&lt;Constructor&lt;T&gt;&gt; getConstructors() {<br/>\n&gt; return asList((Constructor&lt;T&gt;[]) runnerClass.getConstructors());<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; AnnotatedBuilderTest.java:<br/>\n&gt; <br/>\n&gt; package org.junit.tests.running.classes;<br/>\n&gt; <br/>\n&gt; import static org.hamcrest.core.Is.is;<br/>\n&gt; import static org.junit.Assert.assertThat;<br/>\n&gt; import org.hamcrest.core.IsNull;<br/>\n&gt; import org.junit.Test;<br/>\n&gt; import org.junit.internal.builders.AnnotatedBuilder;<br/>\n&gt; import org.junit.runner.Description;<br/>\n&gt; import org.junit.runner.RunWith;<br/>\n&gt; import org.junit.runner.Runner;<br/>\n&gt; import org.junit.runner.notification.RunNotifier;<br/>\n&gt; import org.junit.runners.model.InitializationError;<br/>\n&gt; import org.junit.runners.model.RunnerBuilder;<br/>\n&gt; <br/>\n&gt; public class AnnotatedBuilderTest {<br/>\n&gt; @Test<br/>\n&gt; public void aClassWithARunWithAnnotationHasRunnerBuilt() throws<br/>\n&gt; Exception {<br/>\n&gt; final Runner runner= new AnnotatedBuilder(null)<br/>\n&gt; .runnerForClass(ClassWithRunWithAnnotation.class);<br/>\n&gt; assertThat(runner, is(FakeRunner.class));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Test<br/>\n&gt; public void<br/>\n&gt; aClassWithARunWithAnnotationThatRequiresASuiteBuilderHasRunnerBuilt()<br/>\n&gt; throws Exception {<br/>\n&gt; final Runner runner= new AnnotatedBuilder(null)<br/>\n&gt; <br/>\n&gt; .runnerForClass(ClassWithRunWithAnnotationWhereTheRunnerRequiresASuiteBuilde<br/>\n&gt; r.class);<br/>\n&gt; assertThat(runner, is(FakeRunnerThatRequiresSuiteBuilder.class));<br/>\n&gt; <br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Test<br/>\n&gt; public void aClassWithoutARunWithAnnotationReturnsNull() throws<br/>\n&gt; Exception {<br/>\n&gt; final Runner runner= new AnnotatedBuilder(null)<br/>\n&gt; .runnerForClass(ClassWithoutRunWithAnnotation.class);<br/>\n&gt; assertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));<br/>\n&gt; <br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Test<br/>\n&gt; public void<br/>\n&gt; aNonStaticInnerClassWithARunWithAnnotationOnTheDeclaringClassHasRunnerBuilt(<br/>\n&gt; )<br/>\n&gt; throws Exception {<br/>\n&gt; final Runner runner= new AnnotatedBuilder(null)<br/>\n&gt; <br/>\n&gt; .runnerForClass(DeclaringClassWithRunWithAnnotation.NonStaticInnerClass.clas<br/>\n&gt; s);<br/>\n&gt; assertThat(runner, is(FakeRunner.class));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Test<br/>\n&gt; public void aStaticInnerClassWithARunWithAnnotationHasRunnerBuilt()<br/>\n&gt; throws Exception {<br/>\n&gt; final Runner runner= new AnnotatedBuilder(null)<br/>\n&gt; <br/>\n&gt; .runnerForClass(DeclaringClassWithRunWithAnnotation.StaticInnerClassWithRunW<br/>\n&gt; ithAnnotation.class);<br/>\n&gt; assertThat(runner, is(FakeRunner.class));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Test<br/>\n&gt; public void<br/>\n&gt; aStaticInnerClassWithARunWithAnnotationOnTheDeclaringClassReturnsNull()<br/>\n&gt; throws Exception {<br/>\n&gt; final Runner runner= new AnnotatedBuilder(null)<br/>\n&gt; <br/>\n&gt; .runnerForClass(DeclaringClassWithRunWithAnnotation.StaticInnerClass.class);<br/>\n&gt; assertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Test(expected= InitializationError.class)<br/>\n&gt; public void<br/>\n&gt; aClassWithARunWithAnnotationThatSpecifiesAnInvalidRunnerThrowsException()<br/>\n&gt; throws Exception {<br/>\n&gt; final Runner runner= new AnnotatedBuilder(null)<br/>\n&gt; <br/>\n&gt; .runnerForClass(ClassWithRunWithAnnotationThatSpecifiesAndInvalidRunner.clas<br/>\n&gt; s);<br/>\n&gt; assertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @RunWith(FakeRunner.class)<br/>\n&gt; private static class ClassWithRunWithAnnotation {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @RunWith(InvalidRunner.class)<br/>\n&gt; private static class<br/>\n&gt; ClassWithRunWithAnnotationThatSpecifiesAndInvalidRunner {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @RunWith(FakeRunnerThatRequiresSuiteBuilder.class)<br/>\n&gt; private static class<br/>\n&gt; ClassWithRunWithAnnotationWhereTheRunnerRequiresASuiteBuilder {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; private static class ClassWithoutRunWithAnnotation {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @RunWith(FakeRunner.class)<br/>\n&gt; private static class DeclaringClassWithRunWithAnnotation {<br/>\n&gt; <br/>\n&gt; public class NonStaticInnerClass {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public static class StaticInnerClass {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @RunWith(FakeRunner.class)<br/>\n&gt; public static class StaticInnerClassWithRunWithAnnotation {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public static class InvalidRunner extends Runner {<br/>\n&gt; @Override<br/>\n&gt; public Description getDescription() {<br/>\n&gt; return Description.EMPTY;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public void run(final RunNotifier notifier) {<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public static class FakeRunner extends Runner {<br/>\n&gt; public FakeRunner(final Class&lt;?&gt; testClass) {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public Description getDescription() {<br/>\n&gt; return Description.EMPTY;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public void run(final RunNotifier notifier) {<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public static class FakeRunnerThatRequiresSuiteBuilder extends Runner {<br/>\n&gt; public FakeRunnerThatRequiresSuiteBuilder(final Class&lt;?&gt; testClass,<br/>\n&gt; final RunnerBuilder suiteBilder) {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public Description getDescription() {<br/>\n&gt; return Description.EMPTY;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public void run(final RunNotifier notifier) {<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; And RunWithTest.java, I fixed the error message to:<br/>\n&gt; <br/>\n&gt; @Test<br/>\n&gt; public void characterizeErrorMessageFromBadRunner() {<br/>\n&gt; assertEquals(<br/>\n&gt; &quot;Custom runner class BadRunner should have a public constructor<br/>\n&gt; with signature BadRunner(Class testClass) or BadRunner(Class<br/>\n&gt; testClass, RunnerBuilder builder)&quot;,<br/>\n&gt; JUnitCore.runClasses(Empty.class).getFailures().get(0)<br/>\n&gt; .getMessage());<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, David Saff<br/>\n&gt; &lt;david@&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; I&#39;m unexcited about bumping up the JUnit complexity for a single<br/>\n&gt; feature.<br/>\n&gt; &gt; Again, I love JDave, but I&#39;d love a feature suggestion that used one<br/>\n&gt; stone<br/>\n&gt; &gt; to kill at least two birds.<br/>\n&gt; &gt; <br/>\n&gt; &gt; David Saff<br/>\n&gt; &gt; <br/>\n&gt; &gt; On Tue, Feb 3, 2009 at 11:33 AM, tuomaskarkkainenri &lt;<br/>\n&gt; &gt; tuomaskarkkainenri@&gt; wrote:<br/>\n&gt; &gt; <br/>\n&gt; &gt; &gt; Hi David, Kent,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Did you guys decide on what to do with this issue?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Best regards,<br/>\n&gt; &gt; &gt; Tuomas<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, &quot;Lasse<br/>\n&gt; Koskela&quot; &lt;lasse.koskela@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; David,<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; I&#39;m not sure if I misinterpreted the below solution but from my<br/>\n&gt; &gt; &gt; &gt; perspective the perfect solution would be to make JUnit look for a<br/>\n&gt; &gt; &gt; &gt; runner from the declaring class of a non-static inner class. The<br/>\n&gt; &gt; &gt; &gt; rationale being that this would be the only change necessary - the<br/>\n&gt; &gt; &gt; &gt; feature would be immediately supported by all IDEs and build tools.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Lasse<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, &quot;David<br/>\n&gt; Saff&quot; &lt;david@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; All,<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; It would seem that the perfect solution would be:<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; 1) The ability to add to the default Runner builder<br/>\n&gt; &gt; &gt; &gt; &gt; 2) A command-line flag to configure #1<br/>\n&gt; &gt; &gt; &gt; &gt; 3) An Eclipse setting to set #2<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; It sounds like everyone who is requesting this feature is a<br/>\n&gt; user of<br/>\n&gt; &gt; &gt; &gt; JDave,<br/>\n&gt; &gt; &gt; &gt; &gt; and a quick Eclipse setting would give them everything they want.<br/>\n&gt; &gt; &gt; &gt; It would<br/>\n&gt; &gt; &gt; &gt; &gt; also allow users of other JUnit-based frameworks to do similar<br/>\n&gt; things.<br/>\n&gt; &gt; &gt; &gt; &gt; Thoughts?<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; David Saff<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; On Wed, Jan 14, 2009 at 3:42 AM, Lasse Koskela<br/>\n&gt; &lt;lasse.koskela@&gt;wrote:<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Hi David, Tuomas,<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; I&#39;m not exactly unbiased either, having submitted a couple of<br/>\n&gt; &gt; &gt; patches<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; for JDave back in the day and just having joined a project<br/>\n&gt; that has<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; 5000+ JDave tests.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; With that said, I don&#39;t think the increase in complexity<br/>\n&gt; that we&#39;re<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; talking about here is all that big. If you don&#39;t specify a<br/>\n&gt; runner<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; (non-static inner class), one is inherited from one level up<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; (declaring class).<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Again, I might be biased but I sure would like to be able to run<br/>\n&gt; &gt; &gt; just<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; one of the tests.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Lasse<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com,<br/>\n&gt; &quot;David Saff&quot; &lt;david@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; Do you think the overall ease of use to people who need this<br/>\n&gt; &gt; &gt; feature<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; will be<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; worth a 20% increase in complexity for everyone who needs to<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; understand the<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; default running rules?<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; David Saff<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; On Wed, Dec 31, 2008 at 3:08 AM, tuomaskarkkainenri &lt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; hey David,<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; i uploaded the patch as a file,<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; http://f1.grp.<br/>\n&gt; &lt;http://f1.grp.yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2Pq<br/>\n&gt; fQBWFNQwiqbje7jxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstaticinner<br/>\n&gt; classes.patch&gt;<br/>\n&gt; yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2PqfQBWFNQwiqbje7j<br/>\n&gt; xu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstaticinnerclasses.patch<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; or if that link is relative to my session it&#39;s<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; nonstaticinnerclasses.patch under files here in Yahoo<br/>\n&gt; Groups.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; in JUnit4 speak:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; public class RegularJunit4 {<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; public class NonStaticInnerClass {<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; @Test<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; public void testMethod() {<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; running testMethod() is not possible since<br/>\n&gt; NonStaticInnerClass<br/>\n&gt; &gt; &gt; &gt; cannot<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; be instantiated from the outside.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; in JDave:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; @RunWith(JDaveRunner.class)<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; public static class ASpec extends Specification&lt;Void&gt; {<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; public class AContext {<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; public void aBehavior() {}<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; AContext is instantiated by SpecRunner which JDaveRunner<br/>\n&gt; &gt; &gt; &gt; delegates to.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; When I run this with current JUnit,<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; AllDefaultPossibilitiesBuilder#runnerForClass(final Class&lt;?&gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; testClass) picks out the @RunWith annotation and uses<br/>\n&gt; that to<br/>\n&gt; &gt; &gt; &gt; run my<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; spec(test class).<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; However if I want to run just a single behavior (test<br/>\n&gt; &gt; &gt; method) from<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; this spec for example from Eclipse. Eclipse tells JUnit to<br/>\n&gt; &gt; &gt; &gt; run class<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ASpec.AContext and method aBehavior JUnit then sees what<br/>\n&gt; &gt; &gt; &gt; builder it<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; should use for AContext, and doesn&#39;t find the annotation<br/>\n&gt; &gt; &gt; there and<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; tries to use the regular JUnit4 builder and since it&#39;s a<br/>\n&gt; JDave<br/>\n&gt; &gt; &gt; &gt; spec it<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; fails to run.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; What I want to do is: in case AllDefaultPossibilitiesBuilder<br/>\n&gt; &gt; &gt; &gt; notices<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; that the TestClass is a non-static member class, which<br/>\n&gt; it has no<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; chance of being able run anyway, it checks whether the<br/>\n&gt; &gt; &gt; &gt; declaring class<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; of the testclass would be able to run it instead.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; In the case of JDave, the declaring class would have the<br/>\n&gt; &gt; &gt; @RunWith<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; annotation, and with the Filter created by FilterRequest,<br/>\n&gt; &gt; &gt; &gt; JDave can<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; then choose which Context and Spec it should actually<br/>\n&gt; allow to<br/>\n&gt; &gt; &gt; &gt; run.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; br,<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Tuomas<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt;<br/>\n&gt; com, &quot;David Saff&quot; &lt;david@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; JDave is cool. I&#39;m not 100% clear what you want to<br/>\n&gt; do, and<br/>\n&gt; &gt; &gt; &gt; I don&#39;t<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; see the<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; patch. Could you perhaps include a small test case as<br/>\n&gt; &gt; &gt; &gt; inline text?<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; David Saff<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; On Tue, Dec 30, 2008 at 10:27 AM, tuomaskarkkainenri &lt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I participate in JDave (http://jdave. &lt;http://jdave.org&gt;<br/>\n&gt; org). A BDD<br/>\n&gt; framework<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; for Java<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; that takes advantage of JUnit for example for Eclipse<br/>\n&gt; &gt; &gt; &gt; integration.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; We have tests in non-static inner classes of our test<br/>\n&gt; &gt; &gt; classes.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; These<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; run wonderfully using the @RunWith annotation and<br/>\n&gt; our own<br/>\n&gt; &gt; &gt; &gt; runner.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; however, for individual tests, this doesn&#39;t work. What I<br/>\n&gt; &gt; &gt; would<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; like<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; to do is that AllDefaultPossibilitiesBuilder would check<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; whether or<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; not the test class is a non static member class. if<br/>\n&gt; it is,<br/>\n&gt; &gt; &gt; &gt; then I<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; would grab the runner of the declaring class instead.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I made a patch implementing this. I will try to<br/>\n&gt; attach it.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21432, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1237221119", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 21429, 
    "headers": {
        "inReplyToHeader": "PEVGNzUyMTBBODdDNDRDODVCQjE5RDQyQTNFNEVEQ0NBQGtlbnRzcGF2aWxpb24+", 
        "messageIdInHeader": "PGdwbHV0dis1dWllQGVHcm91cHMuY29tPg=="
    }
}