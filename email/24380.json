{
    "numMessagesInTopic": 3, 
    "nextInTime": 24381, 
    "senderId": "OR0tiDafRiKLpiPokE9mydyC0fkNqJVsxBIn31YZYBV3cOSEL63O1Tayk6ZXO2VGkqVWd1e-KTiGpoh6pqPbbFr3vg", 
    "systemMessage": false, 
    "subject": "Re: [junit] JUnit 4.12 issue when using theory + enum type + DataPoint that contains a null", 
    "from": "David Saff &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Will, I think this is relevant to recent work on theories by @pimterry.  Can you create a bug on github, and mention @pimterry in the description?  Thanks, ", 
    "msgId": 24380, 
    "profile": "saffatgoogle", 
    "topicId": 24378, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 525765722, 
    "messageBody": "<div id=\"ygrps-yiv-1389663681\">Will,<br/>\n<br/>\nI think this is relevant to recent work on theories by @pimterry.  Can you<br/>\ncreate a bug on github, and mention @pimterry in the description?  Thanks,<br/>\n<br/>\n   David<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Wed, May 1, 2013 at 5:59 PM, willmcqueen &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:willmcqueen@...\">willmcqueen@...</a>&gt; wrote:<br/>\n<br/>\n&gt; **<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Hi,<br/>\n&gt;<br/>\n&gt; I have a Theory with a parameter list that includes a String, a boolean,<br/>\n&gt; and an enum. The latter 2 should be automatically assigned and should not<br/>\n&gt; need any explicit @DataPoint declaration (per the release note description<br/>\n&gt; below. When I run the test, the enum param is assigned the null value<br/>\n&gt; instead of being assigned each value of the enum, and I&#39;m not sure why this<br/>\n&gt; is not working for me. I would appreciate any help you can offer, please.<br/>\n&gt;<br/>\n&gt; I cloned master from here:<br/>\n&gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit\">https://github.com/junit-team/junit</a><br/>\n&gt;<br/>\n&gt; ...and looked at the JUnit 4.12 release notes:<br/>\n&gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit/wiki/4.12-release-notes\">https://github.com/junit-team/junit/wiki/4.12-release-notes</a><br/>\n&gt;<br/>\n&gt; ...and scrolled-down to pull request #654 which says:<br/>\n&gt;<br/>\n&gt; &quot;Any theory method parameters with boolean or enum types that can&#39;t be<br/>\n&gt; supplied with values by any other sources will be automatically supplied<br/>\n&gt; with default values: true and false, or every value of the given enum. If<br/>\n&gt; other explicitly defined values are available (e.g. from a specified<br/>\n&gt; ParameterSupplier or some DataPoints method in the theory class), only<br/>\n&gt; those explicitly defined values will be used.&quot;<br/>\n&gt;<br/>\n&gt; On that same release notes page, I also see the comment under pull request<br/>\n&gt; #549, which says that a @DataPoint-annotated array field can contain null<br/>\n&gt; values.<br/>\n&gt;<br/>\n&gt; So here&#39;s my test:<br/>\n&gt;<br/>\n&gt; import org.junit.experimental.theories.DataPoints;<br/>\n&gt; import org.junit.experimental.theories.Theories;<br/>\n&gt; import org.junit.experimental.theories.Theory;<br/>\n&gt; import org.junit.runner.RunWith;<br/>\n&gt;<br/>\n&gt; @RunWith(Theories.class)<br/>\n&gt; public class QuickTest {<br/>\n&gt;<br/>\n&gt; @DataPoints<br/>\n&gt; public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;, null};<br/>\n&gt;<br/>\n&gt; public static enum JDKS {<br/>\n&gt; JDK6,<br/>\n&gt; JDK7,<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; @Theory<br/>\n&gt; public void testFoo(String platform, boolean truth, JDKS j) throws<br/>\n&gt; Exception {<br/>\n&gt; System.out.println(platform + &quot;:&quot; + truth + &quot;:&quot; + j);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; ...and here&#39;s the output:<br/>\n&gt; windows:true:null<br/>\n&gt; windows:false:null<br/>\n&gt; linux:true:null<br/>\n&gt; linux:false:null<br/>\n&gt; null:true:null<br/>\n&gt; null:false:null<br/>\n&gt;<br/>\n&gt; ...which is not what I expected... I expected the 3rd value to be JDK6 or<br/>\n&gt; JDK7. I run a 2nd test, but this time I remove the null array element from<br/>\n&gt; the &#39;platforms&#39; field, and the results are expected:<br/>\n&gt;<br/>\n&gt; import org.junit.experimental.theories.DataPoints;<br/>\n&gt; import org.junit.experimental.theories.Theories;<br/>\n&gt; import org.junit.experimental.theories.Theory;<br/>\n&gt; import org.junit.runner.RunWith;<br/>\n&gt;<br/>\n&gt; @RunWith(Theories.class)<br/>\n&gt; public class QuickTest {<br/>\n&gt;<br/>\n&gt; @DataPoints<br/>\n&gt; public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;};<br/>\n&gt;<br/>\n&gt; public static enum JDKS {<br/>\n&gt; JDK6,<br/>\n&gt; JDK7,<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; @Theory<br/>\n&gt; public void testFoo(String platform, boolean truth, JDKS j) throws<br/>\n&gt; Exception {<br/>\n&gt; System.out.println(platform + &quot;:&quot; + truth + &quot;:&quot; + j);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; ...which results in:<br/>\n&gt; windows:true:JDK6<br/>\n&gt; windows:true:JDK7<br/>\n&gt; windows:false:JDK6<br/>\n&gt; windows:false:JDK7<br/>\n&gt; linux:true:JDK6<br/>\n&gt; linux:true:JDK7<br/>\n&gt; linux:false:JDK6<br/>\n&gt; linux:false:JDK7<br/>\n&gt;<br/>\n&gt; Cool. But now just for fun, I remove the &#39;platform&#39; param from testFoo and<br/>\n&gt; I restore the null array element to &#39;platforms&#39; field. Since there is no<br/>\n&gt; longer any String param in the param list (and since String is a final<br/>\n&gt; class so there&#39;s no possibility of an assignable subclass), I expect that<br/>\n&gt; the &#39;platforms&#39; DataPoint will just be silently ignored and I would get the<br/>\n&gt; expected output. But I actually see the unexpected output, as if a null<br/>\n&gt; array element that exists in a field (that&#39;s not even used in the Theory&#39;s<br/>\n&gt; param list) is affecting the values of a totally different type, the enum<br/>\n&gt; type (causing the enum param to receive only a null value):<br/>\n&gt;<br/>\n&gt; import org.junit.experimental.theories.DataPoints;<br/>\n&gt; import org.junit.experimental.theories.Theories;<br/>\n&gt; import org.junit.experimental.theories.Theory;<br/>\n&gt; import org.junit.runner.RunWith;<br/>\n&gt;<br/>\n&gt; @RunWith(Theories.class)<br/>\n&gt; public class QuickTest {<br/>\n&gt;<br/>\n&gt; @DataPoints<br/>\n&gt; public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;, null};<br/>\n&gt;<br/>\n&gt; public static enum JDKS {<br/>\n&gt; JDK6,<br/>\n&gt; JDK7,<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; @Theory<br/>\n&gt; public void testFoo(boolean truth, JDKS j) throws Exception {<br/>\n&gt; System.out.println(truth + &quot;:&quot; + j);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; ...which results in:<br/>\n&gt; true:null<br/>\n&gt; false:null<br/>\n&gt;<br/>\n&gt; Maybe I&#39;m missing something?<br/>\n&gt;<br/>\n&gt; Thank you.<br/>\n&gt;<br/>\n&gt; Cheers,<br/>\n&gt; Will<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 24379, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1367600596", 
    "canDelete": false, 
    "nextInTopic": 24381, 
    "prevInTopic": 24378, 
    "headers": {
        "inReplyToHeader": "PGtsc2RxMStlcWtpQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBTHJ3LVB5K3FhMnZnV3ZBZUJ1QTV4QjBWa1JCOF9KaEtjQTg1MW1TT0hlLVFXPUtOd0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGtsc2RxMStlcWtpQGVHcm91cHMuY29tPg=="
    }
}