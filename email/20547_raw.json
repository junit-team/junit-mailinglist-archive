{
    "numMessagesInTopic": 39, 
    "nextInTime": 20548, 
    "senderId": "EnfjyRxCIwqu5s6tl73MpTT6JgxIPbvb_2dXKgifgE597uetVXaQ4tuY7vIf7wB0tDJNfHi1FmfbS8-flIx9A65M5NCP9rzFSjkA6N8", 
    "systemMessage": true, 
    "subject": "Re: A case for adding logging of assertions to junit", 
    "from": "&quot;Phil Surette&quot; &lt;philsurette@...&gt;", 
    "authorName": "Phil Surette", 
    "msgSnippet": "I agree that adding this logging will not make junit into a more elegant framework. Logging is never elegant and adding logging for assertions will make the", 
    "msgId": 20547, 
    "rawEmail": "Return-Path: &lt;philsurette@...&gt;\r\nReceived: (qmail 48337 invoked from network); 10 Jun 2008 15:40:06 -0000\r\nReceived: from unknown (66.218.67.96)\n  by m52.grp.scd.yahoo.com with QMQP; 10 Jun 2008 15:40:06 -0000\r\nReceived: from unknown (HELO n19a.bullet.scd.yahoo.com) (66.94.237.48)\n  by mta17.grp.scd.yahoo.com with SMTP; 10 Jun 2008 15:40:06 -0000\r\nReceived: from [209.73.164.86] by n19.bullet.scd.yahoo.com with NNFMP; 10 Jun 2008 15:40:06 -0000\r\nReceived: from [66.218.66.73] by t8.bullet.scd.yahoo.com with NNFMP; 10 Jun 2008 15:40:06 -0000\r\nX-Sender: philsurette@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 1767 invoked from network); 10 Jun 2008 03:25:29 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m43.grp.scd.yahoo.com with QMQP; 10 Jun 2008 03:25:29 -0000\r\nX-Received: from unknown (HELO n14.bullet.mail.re1.yahoo.com) (69.147.103.141)\n  by mta15.grp.scd.yahoo.com with SMTP; 10 Jun 2008 03:25:29 -0000\r\nX-Received: from [68.142.237.90] by n14.bullet.mail.re1.yahoo.com with NNFMP; 10 Jun 2008 03:25:28 -0000\r\nX-Received: from [66.218.69.5] by t6.bullet.re3.yahoo.com with NNFMP; 10 Jun 2008 03:25:28 -0000\r\nX-Received: from [66.218.66.83] by t5.bullet.scd.yahoo.com with NNFMP; 10 Jun 2008 03:25:28 -0000\r\nDate: Tue, 10 Jun 2008 03:25:26 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;g2ks76+kd1b@...&gt;\r\nIn-Reply-To: &lt;00bd01c8ca84$2d858cc0$4000a8c0@kentspavilion&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;Phil Surette&quot; &lt;philsurette@...&gt;\r\nSubject: Re: A case for adding logging of assertions to junit\r\nX-Yahoo-Group-Post: member; u=100046987; y=b2A3D7XieMdXrrViqxGk4j4jshR0W4UheAulxbBybb-ANQdkQQ4\r\nX-Yahoo-Profile: PhilSurette\r\nX-eGroups-Approved-By: copabella &lt;joe@...&gt; via web; 10 Jun 2008 15:40:04 -0000\r\n\r\nI agree that adding this logging will not make junit into\na more elegant fr=\r\namework. Logging is never elegant and adding\nlogging for assertions will ma=\r\nke the Assert class uglier\nfor sure.\n\nI also would not want to oversell the=\r\n benefits of having logging.\nIt is useful in some cases and gives another, =\r\nruntime, view\nof the test case that is sometimes helpful in understanding\na=\r\n test case or a test failure. \n\nGiven the size of the audience for junit it=\r\n&#39;s tempting to\nthink that even a marginal improvement will be significant\nw=\r\nhen multiplied over the number of users. But I&#39;m sure\nyou&#39;re fending off su=\r\nggestions of this ilk all the time\n(I think I saw assertEquals for arrays i=\r\nn junit 4 - thanks!).\n\nWhat are the architectural hurdles that you see with=\r\n the\nking of logging we&#39;re talking about? I&#39;d like to see if\nthey could be =\r\naddressed, and at what cost, to see if the\ncost would outweigh the benefits=\r\n of having this extra\nreporting capability. \n\n\n--- In junit@yahoogroups.com=\r\n, &quot;Kent Beck&quot; &lt;kentb@...&gt; wrote:\n&gt;\n&gt; Dear Phil,\n&gt;  \n&gt; Thank you for the cle=\r\nar case for logging assertions. This feature\nhas been\n&gt; &quot;on the list&quot; for a=\r\nt least eight of the ten years JUnit has been in\n&gt; existence. The problem i=\r\ns that I have never found a way to add it\nwithout\n&gt; breaking the architectu=\r\nre. For me, the additional ugliness has always\n&gt; outweighed the additional =\r\nutility. I&#39;m open to suggestions, though.\n&gt;  \n&gt; Regards,\n&gt;  \n&gt; Kent Beck\n&gt; =\r\nThree Rivers Institute\n&gt; \n&gt;   _____  \n&gt; \n&gt; From: junit@yahoogroups.com [mai=\r\nlto:junit@yahoogroups.com] On Behalf\nOf Phil\n&gt; Surette\n&gt; Sent: Monday, June=\r\n 09, 2008 4:24 AM\n&gt; To: junit@yahoogroups.com\n&gt; Subject: [junit] A case for=\r\n adding logging of assertions to junit\n&gt; \n&gt; \n&gt; \n&gt; I&#39;d like to make a case f=\r\nor adding logging of assertions into junit.\n&gt; I&#39;ve been using junit for man=\r\ny years, and something that I&#39;ve found\n&gt; both for myself and for people who=\r\n I&#39;ve mentored in XP practices is\n&gt; that it is often helpful to get warm fu=\r\nzzy feedback that your tests\n&gt; are running and asserting what you think the=\r\ny are asserting. \n&gt; \n&gt; I notice that I&#39;m not alone in this; I see there are=\r\n several threads\n&gt; where people were looking for this feature\n&gt; (http://tec=\r\nh. &lt;http://tech.groups.yahoo.com/group/junit/message/17845&gt;\n&gt; groups.yahoo.=\r\ncom/group/junit/message/17845 &quot;how to log\n&gt; junit tests&quot;, http://tech.\n&gt; &lt;h=\r\nttp://tech.groups.yahoo.com/group/junit/message/18762&gt;\n&gt; groups.yahoo.com/g=\r\nroup/junit/message/18762\n&gt; &quot;junit 4 & logging&quot;,\n&gt; http://tech. &lt;http://tech=\r\n.groups.yahoo.com/group/junit/message/12000&gt;\n&gt; groups.yahoo.com/group/junit=\r\n/message/12000 &quot;Log4J Logging\n&gt; in JUnit&quot;)\n&gt; \n&gt; Consider the following conc=\r\nocted unit test. It is not the purpose of\n&gt; this test case to demonstrate g=\r\nood test case design ;)\n&gt; \n&gt; 1 public class MyTest extends junit.framework.=\r\nTestCase{\n&gt; 2 List&lt;Map&gt;; mapList;\n&gt; 3 \n&gt; 4 protected void setUp() throws Ex=\r\nception {\n&gt; 5 //create some silly data\n&gt; 6 Map map1 =3D new HashMap();\n&gt; 7 =\r\nmap1.put(&quot;id&quot;, &quot;vladimir&quot;);\n&gt; 8 Map map2 =3D new HashMap();\n&gt; 9 map2.put(&quot;i=\r\nd&quot;, &quot;estragon&quot;);\n&gt; 10 Map map3 =3D new HashMap();\n&gt; 11 //might have to wait=\r\n for a while for this one :)\n&gt; 12 map3.put(&quot;id&quot;, &quot;godot&quot;);\n&gt; 13 mapList =3D=\r\n new ArrayList();\n&gt; 14 mapList.add(map1);\n&gt; 15 mapList.add(map2);\n&gt; 16 mapL=\r\nist.add(map3);\n&gt; 17 }\n&gt; 18 \n&gt; 19 public void testMapIds(){\n&gt; 20 assertTrue(=\r\n&quot;mapList has content&quot;, mapList.size() &gt; 0);\n&gt; 21 for (Map map: mapList){\n&gt; =\r\n22 assertNotNull(&quot;map has id field&quot;, map.get(&quot;id&quot;));\n&gt; 23 }\n&gt; 24 }\n&gt; 25 \n&gt; =\r\n26 public void testIdFormat(){\n&gt; 27 //at some point this will test that all=\r\n ids are\n&gt; lowercase...\n&gt; 28 }\n&gt; 29 \n&gt; 30 public void testIdLengths(){\n&gt; 31=\r\n assertTrue(&quot;mapList has content&quot;, mapList.size() &gt; 0);\n&gt; 32 for (Map map: =\r\nmapList){\n&gt; 33 String id =3D (String)map.get(&quot;id&quot;);\n&gt; 34 assertTrue(&quot;id &quot;+i=\r\nd+&quot; at least 8 characters long&quot;,\n&gt; id.length() &gt;=3D8);\n&gt; 35 }\n&gt; 36 }\n&gt; 37 }=\r\n\n&gt; \n&gt; What I would like to be able to do is to turn on some kind of\n&gt; asser=\r\ntion logging that would allow me to see output such as the\nfollowing:\n&gt; (No=\r\nte that this output was generated using my own tweaked\n&gt; version of junit t=\r\nhat uses log4j logging categories for\n&gt; enabling/disabling both assertion l=\r\nogging and test summary logging):\n&gt; \n&gt; INFO junit.echo.run.start - __BEGIN =\r\nMyClassTest.testMapIds__\n&gt; DEBUG junit.echo.assertTrue - (passed) mapList h=\r\nas content \n&gt; DEBUG junit.echo.assertNotNull - (passed) map has id field vl=\r\nadimir\n&gt; DEBUG junit.echo.assertNotNull - (passed) map has id field estrago=\r\nn\n&gt; DEBUG junit.echo.assertNotNull - (passed) map has id field godot\n&gt; INFO=\r\n junit.echo.run.summary - __SUMMARY MyClassTest.testMapIds__ (4\n&gt; asserts)\n=\r\n&gt; INFO junit.echo.run.start - __BEGIN MyClassTest.testIdFormat__\n&gt; WARN jun=\r\nit.echo.run.summary - __SUMMARY MyClassTest.testIdFormat__ &lt;a\n&gt; id=3D&quot;bogus=\r\n&quot;&gt;&lt;/a&gt;(???no asserts???)\n&gt; INFO junit.echo.run.start - __BEGIN MyClassTest.=\r\ntestIdLengths__\n&gt; DEBUG junit.echo.assertTrue - (passed) mapList has conten=\r\nt\n&gt; DEBUG junit.echo.assertTrue - (passed) id vladimir at least 8\n&gt; charact=\r\ners long\n&gt; DEBUG junit.echo.assertTrue - (passed) id estragon at least 8\n&gt; =\r\ncharacters long\n&gt; DEBUG junit.echo.assertTrue - (FAILED) id godot at least =\r\n8\ncharacters long\n&gt; WARN junit.echo.run.summary - __SUMMARY MyClassTest.tes=\r\ntIdLengths__\n&gt; (4 asserts) ASSERTION FAILED id godot at least 8 characters =\r\nlong\n&gt; \n&gt; Being able to see output like this has a number of benefits such =\r\nas\n&gt; \n&gt; 1) eliminating redundant logging statements - Many logging statemen=\r\nts\n&gt; in a JUnit test case simply output information that you&#39;ve already\n&gt; t=\r\nold JUnit about in your assertions. Developers often put these in as\n&gt; a &#39;s=\r\nanity check&#39; to verify that the test is doing what they expected.\n&gt; For exa=\r\nmple: because on lines such as line 22 I can see the toString\n&gt; of the obje=\r\nct that is not null, I get a warm fuzzy feeling that the\n&gt; test is sane whe=\r\nn I look at the logged results. I&#39;ve noticed that when\n&gt; developers write t=\r\nheir tests they often add log statements or\n&gt; System.outs to provide them t=\r\nhis warm fuzzy feeling (often deleting\n&gt; the same logging when the test is =\r\ncomplete - and putting them back in\n&gt; when debugging test failures)\n&gt; \n&gt; 2)=\r\n improving assertion messages - it&#39;s often the case that the\n&gt; first time y=\r\nou see the message for an assertion will be when the\n&gt; assertion fails, whi=\r\nch may not happen until you run a regression test\n&gt; many moons after you co=\r\nded the test. Unless you see the message\n&gt; displayed when you are developin=\r\ng the test, you won&#39;t realize that the\n&gt; message - if you provided one - is=\r\n not be very helpful. Better\n&gt; assertion messages also help to communicate =\r\nto a developer what the\n&gt; point of the assertion is both when it fails and =\r\nwhen reading the test.\n&gt; \n&gt; 3) see finer-grain test results. Every assertio=\r\nn is a mini-test on its\n&gt; own, but JUnit these mini-tests are invisible unt=\r\nil they fail. \n&gt; Of course, most of the time that&#39;s the behaviour you want.=\r\n But\n&gt; when you&#39;re developing a test or debugging a test failure, it&#39;s\n&gt; gr=\r\neat to see what these smaller tests are doing.\n&gt; \n&gt; 4) by making logging ea=\r\nsy, it can help to avoid the\n&gt; using-system-outs-instead-of-asserts syndrom=\r\ne, where new junit test\n&gt; writers will write &quot;test cases&quot; that actually jus=\r\nt write a bunch of\n&gt; stuff to the console that the test writer then eyeball=\r\ns for expected\n&gt; results\n&gt; \n&gt; Notice that in the output above, there are al=\r\nso &#39;summary&#39; lines which\n&gt; show how many assertions were made in a particul=\r\nar test. These are\n&gt; somewhat tangential to the main thread of this post, b=\r\nut it&#39;s nice to\n&gt; be able to know how many assertions occur in a test case =\r\nif only to\n&gt; identify when a test case is written that never actually makes=\r\n an\n&gt; assertion - which is often a bad smell in a test case. It&#39;s also nice=\r\n\n&gt; when there is a test failure during a build run to see in a log the\n&gt; st=\r\nart of the test case and the assertions that passed before the\n&gt; failure oc=\r\ncurred.\n&gt; \n&gt; There are some problems with logging assertions that I have en=\r\ncountered:\n&gt; \n&gt; 1) if iterating over a collection and asserting each elemen=\r\nt, your log\n&gt; can be overwhelmed. Maybe it would be useful to have some way=\r\n of\n&gt; hinting that a particular assertion should not create notifications;\n=\r\n&gt; maybe not.\n&gt; \n&gt; 2) the implementation I wrote creates a dependency on log=\r\n4j (perhaps\n&gt; this could be avoided by using a notification mechanism and s=\r\nhipping a\n&gt; separate component that listens for logging notifications and l=\r\nogs them)\n&gt; \n&gt; BTW, From my own experience in instrumenting junit 3.8.1 \n&gt; =\r\n(some time ago) I found that it is not a trivial thing to modify \n&gt; junit t=\r\no do this kind of logging. For instance, in my\n&gt; own implementation I manag=\r\ned to confuse junit so it no longer reports\n&gt; junit failures differently th=\r\nan errors. It is a\n&gt; significant effort to do this badly, and much more eff=\r\nort to do it\n&gt; well ;).\n&gt; \n&gt; Is there any appetite out there for adding ass=\r\nertion logging (or\n&gt; assertion notification) into the junit 4 framework? I =\r\nwould be\n&gt; happy to do the work if I thought it would be accepted into the\n=\r\n&gt; main junit distribution. Or maybe this capability already exists\n&gt; in som=\r\ne way in junit 4 that I am not aware of?\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n&gt; [Non-text por=\r\ntions of this message have been removed]\n&gt;\n\n\n\n", 
    "profile": "PhilSurette", 
    "topicId": 20531, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 100046987, 
    "prevInTime": 20546, 
    "contentTrasformed": false, 
    "postDate": "1213068326", 
    "canDelete": false, 
    "nextInTopic": 20548, 
    "prevInTopic": 20546, 
    "headers": {
        "inReplyToHeader": "PDAwYmQwMWM4Y2E4NCQyZDg1OGNjMCQ0MDAwYThjMEBrZW50c3BhdmlsaW9uPg==", 
        "messageIdInHeader": "PGcya3M3NitrZDFiQGVHcm91cHMuY29tPg=="
    }
}