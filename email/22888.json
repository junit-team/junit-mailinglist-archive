{
    "numMessagesInTopic": 14, 
    "nextInTime": 22889, 
    "senderId": "ZYz7vNnL3ZtsZ0fLP35of6CC_ZvIT_JK2orMM8O0zwkViiVutLEki6LD4mhn5hhDiKmtUZmCFbwr-slWwFqSZ7ODnNFLYPuSpl-WUbAdmGyRk64yi6xNrKTyY6HofA", 
    "systemMessage": false, 
    "subject": "Re: [junit] More example JUnit code", 
    "from": "=?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "You re losing quite a bit of generality since you are inlining all the constants. You are also creating and recreating a lot of similar objects all the time,", 
    "msgId": 22888, 
    "profile": "cbeust", 
    "topicId": 22880, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 31449770, 
    "messageBody": "<div id=\"ygrps-yiv-267286151\">You&#39;re losing quite a bit of generality since you are inlining all the<br/>\nconstants. You are also creating and recreating a lot of similar objects all<br/>\nthe time, there&#39;s a lot of DRY violation in your code. Your code is a good<br/>\nfirst version, but it needs some refactoring.<br/>\n<br/>\nAgain, a class such as Factor is a perfect target for parameterized testing<br/>\nsince the logic of the testing doesn&#39;t change (verify that f1.operation(f2)<br/>\nequals f3), only the data does.<br/>\n<br/>\n-- <br/>\nCédric<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Mon, Aug 23, 2010 at 6:51 AM, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a>&gt; wrote:<br/>\n<br/>\n&gt; 2010/8/22 Cédric Beust ♔ &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cedric@...\">cedric@...</a>&gt;:<br/>\n&gt; &gt; Simon,<br/>\n&gt; &gt;<br/>\n&gt; &gt; Actually, I was wrong: using @BeforeClass will break your tests. Since<br/>\n&gt; JUnit<br/>\n&gt; &gt; reinstantiates a brand new class before each test method, only the first<br/>\n&gt; &gt; method will get the correct values for these fields. Subsequent methods<br/>\n&gt; will<br/>\n&gt; &gt; see null.<br/>\n&gt;<br/>\n&gt; @BeforeClass only works on static values, and should be matched with<br/>\n&gt; an @AfterClass.  It is very rare to see @BeforeClass used for set-up<br/>\n&gt; of lightweight data values.<br/>\n&gt;<br/>\n&gt; &gt; Anyway, these values are constants, so they should be static final. Which<br/>\n&gt; &gt; solves the problem and also gets rid of @Before and @After.<br/>\n&gt; &gt;<br/>\n&gt; &gt; About the fields: what bothers me with this approach is that you&#39;re<br/>\n&gt; exposing<br/>\n&gt; &gt; a lot of fields to all your test methods and they only use a very small<br/>\n&gt; &gt; subset of these. In effect, fields are like global variables and they<br/>\n&gt; make<br/>\n&gt; &gt; it harder for someone coming to improve your class to understand exactly<br/>\n&gt; &gt; what fields are okay to modify and which tests need to be updated as<br/>\n&gt; well. I<br/>\n&gt; &gt; like to keep the data needed by each test method as local as possible to<br/>\n&gt; &gt; avoid this kind of problem.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Parameterized tests help a lot with this kind of locality, and they turn<br/>\n&gt; out<br/>\n&gt; &gt; to be a great match for this particular problem.<br/>\n&gt; &gt;<br/>\n&gt; &gt; With all this in mind, here is my version (TestNG syntax, porting to<br/>\n&gt; JUnit<br/>\n&gt; &gt; is left as an exercise to the reader):<br/>\n&gt; &gt;<br/>\n&gt; &gt; public class FractionTest {<br/>\n&gt; &gt;<br/>\n&gt; &gt;  // A few useful constants<br/>\n&gt; &gt;  private static final Fraction F_1_1 = new Fraction(1, 1);<br/>\n&gt; &gt;  private static final Fraction F_1_2 = new Fraction(1, 2);<br/>\n&gt; &gt;  private static final Fraction F_1_3 = new Fraction(1, 3);<br/>\n&gt; &gt;  private static final Fraction F_2_1 = new Fraction(2, 1);<br/>\n&gt; &gt;<br/>\n&gt; &gt;  /**<br/>\n&gt; &gt;   * The data set used to verify reduction, the last parameter of each<br/>\n&gt; &gt;   * row is the expected value.<br/>\n&gt; &gt;   */<br/>\n&gt; &gt;  @DataProvider<br/>\n&gt; &gt;  public Object[][] reduceData() {<br/>\n&gt; &gt;    return new Object[][] {<br/>\n&gt; &gt;      new Object[] { F_1_1, F_1_1 },<br/>\n&gt; &gt;      new Object[] { new Fraction(2, 2), F_1_1 },<br/>\n&gt; &gt;      new Object[] { new Fraction(4, 2), F_2_1 },<br/>\n&gt; &gt;      // ...<br/>\n&gt; &gt;    };<br/>\n&gt; &gt;  }<br/>\n&gt; &gt;<br/>\n&gt; &gt;  @Test(dataProvider = &quot;reduceData&quot;)<br/>\n&gt; &gt;  public void verifyReduce(Fraction input, Fraction expected) {<br/>\n&gt; &gt;    Assert.assertEquals(input.reduce(), expected);<br/>\n&gt; &gt;  }<br/>\n&gt; &gt;<br/>\n&gt; &gt;  /**<br/>\n&gt; &gt;   * The data set used to verify multiplication, the last parameter of<br/>\n&gt; each<br/>\n&gt; &gt;   * row is the expected value after rediction<br/>\n&gt; &gt;   */<br/>\n&gt; &gt;  @DataProvider<br/>\n&gt; &gt;  public Object[][] multiplicationData() {<br/>\n&gt; &gt;    return new Object[][] {<br/>\n&gt; &gt;      new Object[] { F_1_1, F_1_1, F_1_1 },<br/>\n&gt; &gt;      new Object[] { new Fraction(2, 2), new Fraction(3, 2), new<br/>\n&gt; Fraction(3,<br/>\n&gt; &gt; 2) },<br/>\n&gt; &gt;      // ...<br/>\n&gt; &gt;    };<br/>\n&gt; &gt;  }<br/>\n&gt; &gt;<br/>\n&gt; &gt;  @Test(dataProvider = &quot;multiplicationData&quot;)<br/>\n&gt; &gt;  public void verifyReduce(Fraction f1, Fraction f2, Fraction expected) {<br/>\n&gt; &gt;    // Assuming that multiply() will call reduce() before returning its<br/>\n&gt; &gt; result<br/>\n&gt; &gt;    Assert.Equals(f1.multiply(f2), expected);<br/>\n&gt; &gt;    Assert.Equals(f2.multiply(f1), expected);<br/>\n&gt; &gt;  }<br/>\n&gt; &gt; }<br/>\n&gt;<br/>\n&gt; I&#39;d replace your 49 lines of code with these 17, without loss of<br/>\n&gt; extensibility or coverage:<br/>\n&gt;<br/>\n&gt; public class FractionTest {<br/>\n&gt;  private Fraction f(int num, int denom) {<br/>\n&gt;   return new Fraction(num, denom);<br/>\n&gt;  }<br/>\n&gt;<br/>\n&gt;  @Test public void reduce() {<br/>\n&gt;   assertEquals(f(1, 1), f(1, 1).reduce());<br/>\n&gt;   assertEquals(f(1, 1), f(2, 2).reduce());<br/>\n&gt;   assertEquals(f(2, 1), f(4, 2).reduce());<br/>\n&gt;  }<br/>\n&gt;<br/>\n&gt;  @Test public void multiply() {<br/>\n&gt;    // Assuming that multiply() will call reduce() before returning its<br/>\n&gt; result<br/>\n&gt;    assertEquals(f(1, 1), f(1, 1).multiply(f(1, 1)));<br/>\n&gt;   assertEquals(f(3, 2), f(2, 2).multiply(f(3, 2)));<br/>\n&gt;  }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt;   David Saff<br/>\n&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; You can probably see how parameterized tests improve the locality of your<br/>\n&gt; &gt; tests and how adding values to extend the coverage is trivial.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Also note that this is a great example of how misleading code coverage<br/>\n&gt; can<br/>\n&gt; &gt; be: you would get 100% test coverage if you only returned 1 data set in<br/>\n&gt; each<br/>\n&gt; &gt; data provider, but your tests would be very poor. Adding values to your<br/>\n&gt; data<br/>\n&gt; &gt; provider will do nothing for your code coverage but it will considerably<br/>\n&gt; &gt; improve the quality of your tests.<br/>\n&gt; &gt;<br/>\n&gt; &gt; --<br/>\n&gt; &gt; Cédric<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Sun, Aug 22, 2010 at 6:11 PM, Simon Chappell &lt;<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:simonpeterchappell@...\">simonpeterchappell@...</a>&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt;&gt; Cedric,<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; Good points.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; 1. I&#39;m not used to the @BeforeClass. I will make that change, as it is a<br/>\n&gt; &gt;&gt; better fit.<br/>\n&gt; &gt;&gt; 2. The assigning of nulls is just to emphasize cleaning up after<br/>\n&gt; yourself.<br/>\n&gt; &gt;&gt; I<br/>\n&gt; &gt;&gt; agree that it&#39;s technically unnecessary.<br/>\n&gt; &gt;&gt; 3. Let me think about the parameterized thing. I think for eight values,<br/>\n&gt; &gt;&gt; with their descriptive names, it brings more value leaving them as they<br/>\n&gt; &gt;&gt; are,<br/>\n&gt; &gt;&gt; although I may change where they are defined.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; Thank you for you considered points. Hopefully this will help us all<br/>\n&gt; &gt;&gt; sharpen<br/>\n&gt; &gt;&gt; our JUnit writing.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; Simon<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; 2010/8/22 Cédric Beust ♔ &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cedric@...\">cedric@...</a>&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; Hi Simon,<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; A few quick questions/remarks:<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; - Why do you initialize the fractions in @Before and not @BeforeClass,<br/>\n&gt; &gt;&gt; &gt; since you don&#39;t seem to ever modify them?<br/>\n&gt; &gt;&gt; &gt; - Why assigning them to null in @After?<br/>\n&gt; &gt;&gt; &gt; - Given the nature of your tests, I would probably use parameterized<br/>\n&gt; &gt;&gt; &gt; tests to supply only the data that each test needs instead of making<br/>\n&gt; &gt;&gt; these<br/>\n&gt; &gt;&gt; &gt; eight fields available to all the test methods all the time.<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; --<br/>\n&gt; &gt;&gt; &gt; Cédric<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; On Sun, Aug 22, 2010 at 3:47 PM, Simon Chappell &lt;<br/>\n&gt; &gt;&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:simonpeterchappell@...\">simonpeterchappell@...</a> &lt;simonpeterchappell%40gmail.com&gt;&gt; wrote:<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; Following up on my previous offering of example JUnit code, I have<br/>\n&gt; &gt;&gt; pushed<br/>\n&gt; &gt;&gt; &gt; a<br/>\n&gt; &gt;&gt; &gt; &gt; project called Fraction to GitHub. This implements classic<br/>\n&gt; mathematical<br/>\n&gt; &gt;&gt; &gt; &gt; fractions and was written in a test first manner and has documented<br/>\n&gt; &gt;&gt; unit<br/>\n&gt; &gt;&gt; &gt; &gt; tests to help those learning JUnit see one style (my style!) of test<br/>\n&gt; &gt;&gt; &gt; &gt; implementation.<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; The code may be found at:<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://github.com/simonpeter/Fraction\">http://github.com/simonpeter/Fraction</a><br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; I hope that you find it useful.<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; Simon<br/>\n&gt; &gt;&gt; &gt; &gt; (one of the JUnit mailing list moderators)<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; --<br/>\n&gt; &gt;&gt; &gt; &gt; simonpeter.org | simonpeter.com | newlife-upc.org<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; --<br/>\n&gt; &gt;&gt; &gt; Cédric<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; --<br/>\n&gt; &gt;&gt; simonpeter.org | simonpeter.com | newlife-upc.org<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; ------------------------------------<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; Yahoo! Groups Links<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; --<br/>\n&gt; &gt; Cédric<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; ------------------------------------<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n-- <br/>\nCédric<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 22887, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1282572306", 
    "canDelete": false, 
    "nextInTopic": 22890, 
    "prevInTopic": 22887, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGluNlZ1cDRfZzUtZ0hla1Jhek0weHZoUjJFYjVUWE1ZSE0weTNFWkBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGlrUkp0dXAtVkFPU2VYcnplNk5MLXlZZC1IWTU0UHA0MjNVb181WEBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PEFBTkxrVGlrdjRnUHhHZy1oQ3crc3ZlZFRlWWViVCtrOXdSTlhaRUZkd0ZURUBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltSEJSRk1zNmFnQStqSFVOU1hDcFI1cnhONVRmdnZydVF6MndUYkBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGluNlZ1cDRfZzUtZ0hla1Jhek0weHZoUjJFYjVUWE1ZSE0weTNFWkBtYWlsLmdtYWlsLmNvbT4="
    }
}