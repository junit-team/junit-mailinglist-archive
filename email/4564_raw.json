{
    "numMessagesInTopic": 52, 
    "nextInTime": 4565, 
    "senderId": "F-ItuSMC3XxS8xeavBgZLVcUG3EkNyrQzkttQl_pBNozmZ-l_qd2TEMGCtc5cBLcFivgAWqpY3trp5DwFlTb_-MAlSJE-ZbxVxw", 
    "systemMessage": false, 
    "subject": "DynamicTestAll", 
    "from": "John Goodsen &lt;jgoodsen@...&gt;", 
    "authorName": "John Goodsen", 
    "msgSnippet": "While I m posting code, here s a nifty class that dynamically searches for all unit tests in your classpath and builds up the test suite for you on the fly...", 
    "msgId": 4564, 
    "rawEmail": "Return-Path: &lt;jgoodsen@...&gt;\r\nX-Sender: jgoodsen@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_3_1); 2 Apr 2002 21:42:30 -0000\r\nReceived: (qmail 74993 invoked from network); 2 Apr 2002 21:42:30 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m2.grp.scd.yahoo.com with QMQP; 2 Apr 2002 21:42:30 -0000\r\nReceived: from unknown (HELO radmail.icehouse.net) (198.107.233.83)\n  by mta3.grp.scd.yahoo.com with SMTP; 2 Apr 2002 21:42:29 -0000\r\nReceived: (qmail 11103 invoked from network); 2 Apr 2002 13:31:47 -0000\r\nReceived: from unknown (HELO there) (root@127.0.0.1)\n  by localhost with SMTP; 2 Apr 2002 13:31:47 -0000\r\nContent-Type: text/plain;\n  charset=&quot;iso-8859-1&quot;\r\nOrganization: RADSoft\r\nTo: junit@yahoogroups.com\r\nSubject: DynamicTestAll\r\nDate: Tue, 2 Apr 2002 13:40:51 -0800\r\nX-Mailer: KMail [version 1.3.1]\r\nReferences: &lt;F89OAnjLGXYB1J5NPAk00004c6e@...&gt;\r\nIn-Reply-To: &lt;F89OAnjLGXYB1J5NPAk00004c6e@...&gt;\r\nMIME-Version: 1.0\r\nContent-Transfer-Encoding: 8bit\r\nFrom: John Goodsen &lt;jgoodsen@...&gt;\r\nReply-To: jgoodsen@...\r\nX-Yahoo-Group-Post: member; u=29621510\r\nX-Yahoo-Profile: jgoodsen\r\n\r\nWhile I&#39;m posting code, here&#39;s a nifty class that\ndynamically searches for all unit tests in your\nclasspath and builds up the test suite for you\non the fly... saving you the need to manually\nupdate TestSuites whenever you add a TestCase\nto your project.  There are several variants of\nthis running around on the net also ... thanks\nfor putting up with a code post :-)\n\n-- \nJohn Goodsen           RADSoft / Rapid Software Delivery Specialists\njgoodsen@...             eXtreme Java Internet Consultants\nhttp://www.radsoft.com           Toll Free: 866-RADSOFT (723-7638)\n\n\n--------- DynamicTestAll.java --------------\n\nimport java.io.File;\nimport java.io.FileFilter;\nimport java.util.*;\nimport junit.framework.Test;\nimport junit.framework.TestCase;\nimport junit.framework.TestSuite;\nimport org.apache.log4j.Category;\n\npublic class DynamicTestAll {\n    private static final Category log = \nCategory.getInstance(DynamicTestAll.class);\n    private static final String CLASS_SUFFIX = &quot;.class&quot;;\n    private String testCasePrefix;\n\n    public DynamicTestAll() {\n        this(&quot;Test&quot;);\n    }\n\n    public DynamicTestAll(String testCasePrefix) {\n        this.testCasePrefix = testCasePrefix;\n    }\n\n    private String getTestCasePrefix() {\n        return testCasePrefix;\n    }\n\n    public Test suite() {\n        String classPathValue = System.getProperty(&quot;java.class.path&quot;);\n        String classPaths[] = parseClassPath(classPathValue);\n        return getAllTests(classPaths);\n    }\n\n    private String[] parseClassPath(String classPathValue) {\n        ArrayList paths = new ArrayList();\n        for (StringTokenizer tokenizer = new StringTokenizer(classPathValue, \nFile.pathSeparator); tokenizer.hasMoreTokens(); \npaths.add(tokenizer.nextToken())) ;\n        return (String[]) paths.toArray(new String[0]);\n    }\n\n    public Test getAllTests(String rootPaths[]) {\n        TestSuite suite = new TestSuite();\n        for (int i = 0; i &lt; rootPaths.length; i++)\n            suite.addTest(getAllTests(rootPaths[i]));\n\n        return suite;\n    }\n\n    public Test getAllTests(String rootPath) {\n        try {\n            File classPath = new File(rootPath);\n            if (!classPath.exists()) throw new \nIllegalArgumentException(&quot;Directory &quot; + classPath.getAbsolutePath() + &quot; does \nnot exist.&quot;);\n\n            Set classes = recursivelyFindEveryTestClassfile(classPath);\n            TestSuite suite = new TestSuite();\n            if (classes != null && classes.size() &gt; 0) {\n                for (Iterator it = classes.iterator(); it.hasNext();) {\n                    File classFile = (File) it.next();\n                    String className = classNameFromFile(classPath, \nclassFile);\n                    log.debug(&quot;Loading class: &quot; + className);\n                    if (className.endsWith(&quot;AllTests&quot;)) {\n                        System.err.println(&quot;WARNING: Remove &quot; + className + &quot; \nfrom the system now. - DynamicTestAll is being used instead.&quot;);\n                        continue;\n                    }\n                    try {\n                        Class testClass = Class.forName(className);\n                        if ((TestCase.class).isAssignableFrom(testClass)) \nsuite.addTest(new TestSuite(testClass));\n                    } catch (NoClassDefFoundError e) {\n                        log.warn(&quot;Skipping &quot; + className + &quot; due to \nNoClassDefFoundError&quot;);\n                    } catch (ClassNotFoundException e) {\n                        log.warn(&quot;Skipping &quot; + className + &quot; due to \nClassNotFoundException&quot;);\n                    }\n                }\n            }\n            return suite;\n        } catch (RuntimeException ex) {\n            ex.printStackTrace();\n            throw ex;\n        }\n    }\n\n    private String classNameFromFile(File classPath, File classFile) {\n        if (!classFile.getName().endsWith(CLASS_SUFFIX)) throw new \nIllegalArgumentException(&quot;Can only extract a className from a .class file&quot;);\n        String absolutePath = classFile.getAbsolutePath();\n        String relativePath = \nabsolutePath.substring(classPath.getAbsolutePath().length() + 1);\n        String className = relativePath.replace(File.separatorChar, &#39;.&#39;);\n        return className.substring(0, className.length() - \nCLASS_SUFFIX.length());\n    }\n\n    private Set recursivelyFindEveryTestClassfile(File dir) {\n\n        class ClassFileAndDirectoriesFilter implements FileFilter {\n            public boolean accept(File pathname) {\n                return pathname.getName().endsWith(CLASS_SUFFIX) || \npathname.isDirectory();\n            }\n        }\n\n        Set classFiles = new TreeSet();\n        if (dir.getName().endsWith(&quot;.jar&quot;)) {\n            log.warn(&quot;Not searching for TestsCases inside jar file \n&quot;.concat(String.valueOf(String.valueOf(dir.getAbsolutePath()))));\n            return classFiles;\n        }\n\n        if (!dir.isDirectory() || !dir.exists()) throw new \nIllegalArgumentException(dir.getAbsolutePath() + &quot; is not a directory or does \nnot exist.&quot;);\n\n        File files[] = dir.listFiles(new ClassFileAndDirectoriesFilter());\n        if (files == null) {\n            log.warn(&quot;listFiles() returned null on \n&quot;.concat(String.valueOf(String.valueOf(dir.getAbsolutePath()))));\n            return classFiles;\n        }\n        for (int i = 0; i &lt; files.length; i++) {\n            File file = files[i];\n            if (file.isDirectory()) {\n                classFiles.addAll(recursivelyFindEveryTestClassfile(file));\n                continue;\n            }\n            if (isTestCasefile(file)) {\n                log.debug(&quot;Adding file: &quot; + file.getAbsolutePath());\n                classFiles.add(file);\n            }\n        }\n\n        return classFiles;\n    }\n\n    private boolean isTestCasefile(File file) {\n        if (isInnerClass(file))\n            return false;\n        else\n            return file.getName().startsWith(getTestCasePrefix());\n    }\n\n    private static boolean isInnerClass(File file) {\n        String name = file.getName();\n        return name.indexOf(&quot;$&quot;) != -1;\n    }\n\n}\n\n", 
    "profile": "jgoodsen", 
    "topicId": 3179, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 29621510, 
    "prevInTime": 4563, 
    "contentTrasformed": false, 
    "postDate": "1017783651", 
    "canDelete": false, 
    "nextInTopic": 4565, 
    "prevInTopic": 4563, 
    "headers": {
        "inReplyToHeader": "PEY4OU9BbmpMR1hZQjFKNU5QQWswMDAwNGM2ZUBob3RtYWlsLmNvbT4=", 
        "referencesHeader": "PEY4OU9BbmpMR1hZQjFKNU5QQWswMDAwNGM2ZUBob3RtYWlsLmNvbT4="
    }
}