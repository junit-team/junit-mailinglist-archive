{
    "numMessagesInTopic": 9, 
    "nextInTime": 5867, 
    "senderId": "Tc9QBiDMPQus27L_eDDim6BG1JgHGifB4P1TNausCeyWNcTN-KGsADXnM62nKyv-LIgGS3O1bCDb8a5z6DqM7BwKSRMk5zpgHYz6vA2S2fw", 
    "systemMessage": false, 
    "subject": "Re: [junit] writing testcase for data read from a file", 
    "from": "Singh Manpreet &lt;speak2manpreet@...&gt;", 
    "authorName": "Singh Manpreet", 
    "msgSnippet": "Dear Rainsberger, Thank you so very much for an excellent clarification. Regards, Manpreet ... === message truncated === ", 
    "msgId": 5866, 
    "rawEmail": "Return-Path: &lt;speak2manpreet@...&gt;\r\nX-Sender: speak2manpreet@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_1_1_4); 27 Sep 2002 07:08:50 -0000\r\nReceived: (qmail 17764 invoked from network); 27 Sep 2002 07:08:04 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m5.grp.scd.yahoo.com with QMQP; 27 Sep 2002 07:08:04 -0000\r\nReceived: from unknown (HELO web13906.mail.yahoo.com) (216.136.175.69)\n  by mta1.grp.scd.yahoo.com with SMTP; 27 Sep 2002 07:08:04 -0000\r\nMessage-ID: &lt;20020927070804.33445.qmail@...&gt;\r\nReceived: from [203.195.145.30] by web13906.mail.yahoo.com via HTTP; Fri, 27 Sep 2002 00:08:04 PDT\r\nDate: Fri, 27 Sep 2002 00:08:04 -0700 (PDT)\r\nSubject: Re: [junit] writing testcase for data read from a file\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;200209241632310731.0089C328@smtp&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nFrom: Singh Manpreet &lt;speak2manpreet@...&gt;\r\nX-Yahoo-Group-Post: member; u=70582458\r\nX-Yahoo-Profile: speak2manpreet\r\n\r\n\nDear Rainsberger,\n\nThank you so very much for an excellent clarification.\n\nRegards,\nManpreet\n\n--- &quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;\nwrote:\n&gt; \n&gt; So said  Singh Manpreet  on  2002-09-24 \n&gt; \n&gt; &gt;Hi Rainsberger,\n&gt; &gt;\n&gt; &gt;&gt; How do you know whether your method works? What\n&gt; &gt;&gt; would you do to verify\n&gt; &gt;&gt; for yourself that the method reads the data\n&gt; &gt;&gt; correctly? Explain that in\n&gt; &gt;&gt; words and we can convert it to code.\n&gt; &gt;\n&gt; &gt;The method which i want to test returns the file as\n&gt; a\n&gt; &gt;String object.\n&gt; \n&gt; I assume you mean that the method answers the\n&gt; contents of a file as a\n&gt; String.\n&gt; \n&gt;      String readContents(final File file);\n&gt; \n&gt; &gt; Now, i was thinking if i have to test\n&gt; &gt;what is read from the file, in the testcase i would\n&gt; &gt;again be reading from the file. The contents read\n&gt; from\n&gt; &gt;the file would be converted to String which would\n&gt; be\n&gt; &gt;compared to the value returned by the method for\n&gt; which\n&gt; &gt;the testcase is being written (sorry no TFD). But i\n&gt; &gt;found it to be weird idea, so i asked the question\n&gt; :-)\n&gt; \n&gt; In this case, you could do this:\n&gt; \n&gt; public void testReadContents() {\n&gt;     final File newFile = new File(&quot;newfile.txt&quot;);\n&gt;     assertFalse(newFile.exists());\n&gt;     final FileOutputStream newFileOutputStream = new\n&gt; FileOutputStream(newFile);\n&gt;     final PrintWriter out = new\n&gt; PrintWriter(newFileOutputStream);\n&gt;     final String contents = &quot;blah&quot;;\n&gt;     out.print(blah);\n&gt;     newFileOutputStream.flush();\n&gt;     newFileOutputStream.close();\n&gt; \n&gt;     assertEquals(contents, readContents(newFile));\n&gt; \n&gt;     // delete newFile in tearDown()\n&gt; }\n&gt; \n&gt; Write the file with known contents, then compare\n&gt; those known contents\n&gt; with the answer from &#39;readContents&#39;.\n&gt; \n&gt; Now ask yourself, what are you really testing? In\n&gt; this test, we test\n&gt; the following:\n&gt; \n&gt; * File.exists() correctly identifies whether a file\n&gt; exists, so that I\n&gt; don&#39;t accidentally overwrite an existing file.\n&gt; * FileOutputStream and PrintWriter correctly write\n&gt; my String out to the\n&gt; file.\n&gt; * readContents reads the file contents correctly.\n&gt; \n&gt; That&#39;s too much to test at once. It relies too much\n&gt; on the file system,\n&gt; and you should probably assume that the file system\n&gt; works.\n&gt; \n&gt; What do you really want to test? It&#39;s simple: the\n&gt; JDK doesn&#39;t include a\n&gt; library call to return the contents of a text file\n&gt; as a String. The\n&gt; closest thing it does it return the contents of a\n&gt; text file,\n&gt; line-by-line. Your job is to construct the lines\n&gt; into a String with the\n&gt; proper line separator. Perhaps you should just test\n&gt; that!\n&gt; \n&gt; OK, your job may also include handling the\n&gt; exceptions thrown by\n&gt; BufferedFileReader, which are all IOExceptions, as I\n&gt; recall. Test that,\n&gt; too!\n&gt; \n&gt; You can do both without involving the file system.\n&gt; That makes your\n&gt; tests faster and more focussed on testing the code\n&gt; *you* write and not\n&gt; the code already written by others in the JDK. Much\n&gt; better!\n&gt; \n&gt;     testHandleFileNotFound\n&gt;     testHandleIoExceptionWhileReading\n&gt;     testJoinLines_EmptyLineSet\n&gt;     testJoinLines\n&gt; \n&gt; Those four tests ought to do it. Now readContents\n&gt; does this:\n&gt; \n&gt; String readContents(final File file) throws\n&gt; IOException {\n&gt;     final BufferedReader reader = new\n&gt; BufferedReader(new\n&gt; FileInputStream(file));\n&gt;     final List lines = new ArrayList();\n&gt;     while (true) {\n&gt;         final String line = reader.readLine();\n&gt;         if (line == null) { break; }\n&gt;         lines.add(line);        \n&gt;     }\n&gt;     return joinLines(lines,\n&gt; System.getProperty(&quot;line.separator&quot;,\n&gt; &quot;&#92;n&quot;));\n&gt; }\n&gt; \n&gt; You write joinLines and test it, or find it from a\n&gt; library. If\n&gt; necessary, you test how to handle the exceptions.\n&gt; \n&gt; You may consider the act of reading all the lines in\n&gt; a file and storing\n&gt; them in a list something worth testing. I don&#39;t. If\n&gt; you do want to test\n&gt; it, instead do something like this:\n&gt; \n&gt; interface LineProvider {\n&gt;     String readLine() throws IOException;\n&gt; }\n&gt; \n&gt; class FileLineProvider implements LineProvider {\n&gt;     File file;\n&gt; \n&gt;     FileLineProvider(File file) {\n&gt;         this.file = file;\n&gt;     }\n&gt; \n&gt;     String readLine() throws IOException {\n&gt;         return getBufferedReader().readLine();\n&gt;     }\n&gt; \n&gt;     BufferedReader getBufferedReader() throws\n&gt; IOException {\n&gt;         // lazily instantiate BufferedReader\n&gt;     }\n&gt; }\n&gt; \n&gt; class StringLineProvider implements LineProvider {\n&gt;     List strings;\n&gt;     Iterator iterator;\n&gt; \n&gt;     FileLineProvider(List strings) {\n&gt;         this.strings = new ArrayList(strings);\n&gt;         iterator = this.strings.iterator();\n&gt;     }\n&gt; \n&gt;     String readLine() {\n&gt;         if (iterator.hasNext()) {\n&gt;             return (String) iterator.next();\n&gt;         }\n&gt;         else {\n&gt;             return null;\n&gt;         }\n&gt;     }\n&gt; }\n&gt; \n&gt; Use StringLineProvider in the test and\n&gt; FileLineProvider in production.\n&gt; Now you have\n&gt; \n&gt; String readContents(LineProvider lineProvider) {\n&gt;     final List lines = new ArrayList();\n&gt;     while (true) {\n&gt;         final String line = lineProvider.readLine();\n&gt;         if (line == null) { break; }\n&gt;         lines.add(line);        \n&gt;     }\n&gt;     return joinLines(lines,\n&gt; System.getProperty(&quot;line.separator&quot;,\n&gt; &quot;&#92;n&quot;));\n&gt; }\n&gt; \n&gt; Even better would be to have LineProvider provide\n&gt; the collection of\n&gt; lines. The loop, after all, only talks to\n&gt; lineProvider.\n&gt; \n&gt; abstract class LineProvider {\n&gt;     LineProvider() {}\n&gt; \n&gt;     abstract String readLine() throws IOException;\n&gt;     \n&gt;     List readContents() {\n&gt;         final List lines = new ArrayList();\n&gt;         while (true) {\n&gt;             final String line =\n&gt; lineProvider.readLine();\n&gt; \n=== message truncated ===\n\n\n__________________________________________________\nDo you Yahoo!?\nNew DSL Internet Access from SBC & Yahoo!\nhttp://sbc.yahoo.com\n\n", 
    "profile": "speak2manpreet", 
    "topicId": 5818, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 70582458, 
    "prevInTime": 5865, 
    "contentTrasformed": false, 
    "postDate": "1033110484", 
    "canDelete": false, 
    "nextInTopic": 5870, 
    "prevInTopic": 5847, 
    "headers": {
        "inReplyToHeader": "PDIwMDIwOTI0MTYzMjMxMDczMS4wMDg5QzMyOEBzbXRwPg==", 
        "messageIdInHeader": "PDIwMDIwOTI3MDcwODA0LjMzNDQ1LnFtYWlsQHdlYjEzOTA2Lm1haWwueWFob28uY29tPg=="
    }
}