{
    "numMessagesInTopic": 22, 
    "nextInTime": 23115, 
    "senderId": "WBX0SnT4hbjPxTW7ddldJp2engOn1bWhC0fd9Jvo5X_yLYhAT1Lq9x4Q1R8a6fLR14obqe8A3x7uxrhzbM07GuW2OyWd0zWbXgQJN893", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Unit testing a private method??", 
    "from": "Esko Luontola &lt;esko.luontola@...&gt;", 
    "authorName": "Esko Luontola", 
    "msgSnippet": "... SPEED For me too, the speed of running the tests is important. If it takes over 5-10 seconds to run all the tests, then I will hesitate to run them after", 
    "msgId": 23114, 
    "rawEmail": "Return-Path: &lt;esko.luontola@...&gt;\r\nX-Sender: esko.luontola@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 35303 invoked from network); 6 Dec 2010 11:29:23 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m15.grp.re1.yahoo.com with QMQP; 6 Dec 2010 11:29:23 -0000\r\nX-Received: from unknown (HELO mail-fx0-f49.google.com) (209.85.161.49)\n  by mta2.grp.re1.yahoo.com with SMTP; 6 Dec 2010 11:29:23 -0000\r\nX-Received: by fxm19 with SMTP id 19so6207478fxm.36\n        for &lt;junit@yahoogroups.com&gt;; Mon, 06 Dec 2010 03:29:21 -0800 (PST)\r\nX-Received: by 10.223.87.6 with SMTP id u6mr5345816fal.84.1291634961324;\n        Mon, 06 Dec 2010 03:29:21 -0800 (PST)\r\nReturn-Path: &lt;esko.luontola@...&gt;\r\nX-Received: from [127.0.0.1] (dsl-hkibrasgw2-fe24de00-164.dhcp.inet.fi [80.222.36.164])\n        by mx.google.com with ESMTPS id a25sm1463993fak.20.2010.12.06.03.29.19\n        (version=SSLv3 cipher=RC4-MD5);\n        Mon, 06 Dec 2010 03:29:20 -0800 (PST)\r\nMessage-ID: &lt;4CFCC90D.8090807@...&gt;\r\nDate: Mon, 06 Dec 2010 13:29:17 +0200\r\nUser-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.12) Gecko/20101027 Thunderbird/3.1.6\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;AANLkTinA9Ph9EXK+yb5A9eoXghnC01gLywgNURAQyHq3@...&gt;\t&lt;iddkvd+6ice@...&gt;\t&lt;AANLkTimkEcUePAEyQ-3=Nv0nnVyusNxMOrU=b-fbt=4E@...&gt; &lt;AANLkTimgdiOOAZFbpmoQyGJHRyF0poHuFLiiMG8vguDh@...&gt;\r\nIn-Reply-To: &lt;AANLkTimgdiOOAZFbpmoQyGJHRyF0poHuFLiiMG8vguDh@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Esko Luontola &lt;esko.luontola@...&gt;\r\nSubject: Re: [junit] Re: Unit testing a private method??\r\nX-Yahoo-Group-Post: member; u=395435659; y=V_dw8WCyQijaKVD6d6MGJVwNwcYCtmWJgH0wZD70hx1X6UUWFV8\r\nX-Yahoo-Profile: egeluontola\r\n\r\nMike Forsberg wrote on 5.12.2010 2:17:\n&gt; In regards to... why do unit testing at all if everything is tested through\n&gt; functional testing.\n&gt;\n&gt; Personally, if I could get every scenario to run at the\n&gt; integration/functional level within the time I can run my unit tests, I&#39;d\n&gt; only write unit tests to track down why the higher level tests are failing.\n&gt; In this amazing world, a unit test would only be needed to track down a bug\n&gt; since my brain is not big enough to hold the whole system in it&#39;s mind.\n&gt; However, once the bug is fixed, the unit test can grow stale. As I&#39;d be\n&gt; assured that every possible scenario is tested.\n\n\n   SPEED\n\nFor me too, the speed of running the tests is important. If it takes \nover 5-10 seconds to run all the tests, then I will hesitate to run them \nafter every change, which in turn will lead to slower feedback and \nlonger times in finding the reason for a failure: If I run the tests \nless often, I will make more changes between running tests, and the \nmistake could be in any of those changed lines. But if I run tests after \nevery one-liner change and the tests break, there is a high probability \nthat the mistake was on that one line and I will find it quickly.\n\nSo I will have near-100% test coverage using unit tests, which I will \nrun many times per minute; these tests must run at a speed of hundreds \nor thousands of tests per second. Then I also have a small set of \nend-to-end tests, which I use the verify the existence of features and \nthat all the components have been plugged together correctly.\n\nP.S. When using Guice, I might have a unit test which creates the Guice \nInjector to check that the DI configuration doesn&#39;t contain such obvious \nerrors which Guice&#39;s built-in checks will find. But I would not \ninstantiate the SUT of my unit tests using Guice, because that&#39;s slow \n(on my C2Q6600 CPU about 5 ms to create the Injector), and because it \nwould not put as much design pressure on my code (more on that later).\n\n\n   FOCUS\n\nAnother reason is that by writing focused unit tests you can focus \nbetter on making that unit behave correctly in all corner cases (pun \nintended).\n\nFor example, I was writing a small transactional in-memory database and \nhad to introduce locking of multiple keys as an atomic group (my \nintegration tests were sometimes failing due to a concurrency bug - so \nat integration level the bug was reproducable, but very \nnon-deterministic), so I wrote a GroupLock [1] class which I could then \nuse in the database. What do you think, could all the corner cases \nmentioned in [2] be covered reliably with integration tests for a \nmulti-threaded system?\n\nIn the same in-memory database there were also other low-level \ncomponents which I test-drove using unit tests, because test-driving \nthem using higher level tests would not have been possible with small \nsteps. When I was test-driving the database class, at first I had all \nthe values in a HashMap, but then when I started to implement \ntransactions and multiversion concurrency control [3], I basically \nneeded a versioned Map which remembers some of the previous values, \nuntil there are no active transactions which can read those old \nversions. This produced the five Revision* classes at [4], in total over \n400 LOC, and I don&#39;t see how I could have test-driven those using only \nintegration tests. So I grew those classes using the four Revision*Spec \ntests at [5].\n\n[1] \nhttps://github.com/orfjackal/dimdwarf/blob/master/dimdwarf-core/src/main/java/net/orfjackal/dimdwarf/db/inmemory/GroupLock.java\n[2] \nhttps://github.com/orfjackal/dimdwarf/blob/master/dimdwarf-core/src/test/java/net/orfjackal/dimdwarf/db/inmemory/GroupLockSpec.java\n[3] http://en.wikipedia.org/wiki/Multiversion_concurrency_control\n[4] \nhttps://github.com/orfjackal/dimdwarf/tree/master/dimdwarf-core/src/main/java/net/orfjackal/dimdwarf/db/inmemory\n[5] \nhttps://github.com/orfjackal/dimdwarf/tree/master/dimdwarf-core/src/test/java/net/orfjackal/dimdwarf/db/inmemory\n\n\n   PRESSURE\n\nStill one more reason why I write unit tests (in addition to end-to-end \ntests), is that writing unit tests is more painful [6]. To be able to \ntest something in isolation, the code needs to be decoupled and \ncohesive, and it needs to avoid global state and many other traits of \ngenerally bad design [7]. When dealing with bad code, writing unit tests \ncauses *more pain* than writing integration tests, which is a *good \nthing*, because it leads me to improve the design so that writing the \ntests will be easier. This in turn leads into better code and a more \nmaintainable design. If I would write only integration tests, or even no \ntests, then I would be shutting my eyes to the problem points in the \ndesign and there would be no pressure to improve the design.\n\nP.S. In the Growing Object-Oriented Software book the authors say that \nalso writing end-to-end tests puts design pressure on the system as a \nwhole, which leads to for example introducing monitoring hooks into the \nsystem. These hooks in turn also happen to be useful for monitoring the \nsystem in production.\n\n[6] \nhttp://blog.orfjackal.net/2010/04/direct-and-indirect-effects-of-tdd.html\n[7] \nhttp://googletesting.blogspot.com/2008/08/by-miko-hevery-so-you-decided-to.html\n\n-- \nEsko Luontola\nwww.orfjackal.net\n\n", 
    "profile": "egeluontola", 
    "topicId": 23073, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 395435659, 
    "prevInTime": 23113, 
    "contentTrasformed": false, 
    "postDate": "1291634957", 
    "canDelete": false, 
    "nextInTopic": 23295, 
    "prevInTopic": 23112, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGltZ2RpT09BWkZicG1vUXlHSkhSeUYwcG9IdUZMaWlNRzh2Z3VEaEBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PDRDRkNDOTBELjgwOTA4MDdAZ21haWwuY29tPg==", 
        "referencesHeader": "PEFBTkxrVGluQTlQaDlFWEsreWI1QTllb1hnaG5DMDFnTHl3Z05VUkFReUhxM0BtYWlsLmdtYWlsLmNvbT4JPGlkZGt2ZCs2aWNlQGVHcm91cHMuY29tPgk8QUFOTGtUaW1rRWNVZVBBRXlRLTM9TnYwbm5WeXVzTnhNT3JVPWItZmJ0PTRFQG1haWwuZ21haWwuY29tPiA8QUFOTGtUaW1nZGlPT0FaRmJwbW9ReUdKSFJ5RjBwb0h1RkxpaU1HOHZndURoQG1haWwuZ21haWwuY29tPg=="
    }
}