{
    "numMessagesInTopic": 12, 
    "nextInTime": 15678, 
    "senderId": "23Wq68SwpZMxkvCpK25DOAM-zTEfbAfLyKyI5jxhlLKUQphJ-UVwPCG3W9Dv67vOltAMWuDXiz34s1CAbbG-r7F-oosgE62hlO-1zPJK5OSpmIQ3sw", 
    "systemMessage": false, 
    "subject": "Re: [junit] overriding a method executed in the constructor: dont&#39;t work.", 
    "from": "&quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;", 
    "authorName": "Jeff Nielsen", 
    "msgSnippet": "By calling an (overloaded) class method from within the constructor you re getting into no man s land with the intricacies of the Java runtime.  You don t see", 
    "msgId": 15677, 
    "rawEmail": "Return-Path: &lt;jeff.nielsen@...&gt;\r\nX-Sender: jeff.nielsen@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 35352 invoked from network); 12 Dec 2005 00:00:50 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m13.grp.scd.yahoo.com with QMQP; 12 Dec 2005 00:00:50 -0000\r\nReceived: from unknown (HELO host54a.simplicato.com) (207.99.47.54)\n  by mta5.grp.scd.yahoo.com with SMTP; 12 Dec 2005 00:00:50 -0000\r\nReceived: from localhost (localhost.simplicato.com [127.0.0.1])\n\tby host54a.simplicato.com (Postfix) with ESMTP id AA3556C051F\n\tfor &lt;junit@yahoogroups.com&gt;; Sun, 11 Dec 2005 19:00:43 -0500 (EST)\r\nReceived: from host54a.simplicato.com ([127.0.0.1])\n by localhost (host54a.simplicato.com [127.0.0.1]) (amavisd-new, port 10024)\n with ESMTP id 55980-07 for &lt;junit@yahoogroups.com&gt;;\n Sun, 11 Dec 2005 19:00:43 -0500 (EST)\r\nReceived: from Laptop210 (ip68-227-196-138.dc.dc.cox.net [68.227.196.138])\n\tby host54a.simplicato.com (Postfix) with SMTP id 3F8836C049C\n\tfor &lt;junit@yahoogroups.com&gt;; Sun, 11 Dec 2005 19:00:43 -0500 (EST)\r\nMessage-ID: &lt;060501c5feaf$0d2b2370$6801a8c0@Laptop210&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;dnc2bp+j9rb@...&gt;\r\nDate: Sun, 11 Dec 2005 19:00:23 -0500\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tformat=flowed;\n\tcharset=&quot;iso-8859-1&quot;;\n\treply-type=original\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 6.00.2900.2180\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180\r\nX-Virus-Scanned: by amavisd-new at simplicato.com\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;\r\nSubject: Re: [junit] overriding a method executed in the constructor: dont&#39;t work.\r\nX-Yahoo-Group-Post: member; u=65487161; y=w0UgcbK944b4EyTGHDmbDYkVKL5vUqiwsTsfMNpK0LjFyf58rng\r\nX-Yahoo-Profile: jeffreymads\r\n\r\nBy calling an (overloaded) class method from within the constructor you&#39;re \ngetting into no man&#39;s land with the intricacies of the Java runtime.  You \ndon&#39;t see the problem in your initData() tests, because you&#39;re calling the \ninitData() method a /second/ time, after the class has been fully \ninstantiated.  I&#39;m not sure exactly why your particular contrived example \nexhibits the behavior that it does, but you can solve the problem more \nsimply by not doing this work in the constructor.\n\nIf you change your definition of Command to read like this, your tests run \nfine.  If you really want to cache the result of initData(), then do it in a \nlazy manner in the initData() method itself.\n\nclass Command {\n//        private String data;\n        public Command() {\n//                this.data = initData();\n        }\n        public String initData() {\n                return &quot;data from file&quot;;\n        }\n        public String execute() {\n                return &quot;execute with [&quot;+initData()+&quot;]&quot;;\n        }\n}\n\nJeff Nielsen\nDigital Focus\nwww.digitalfocus.com\n\n----- Original Message ----- \nFrom: &quot;tusc72&quot; &lt;tusc72@...&gt;\nTo: &lt;junit@yahoogroups.com&gt;\nSent: Friday, December 09, 2005 8:55 AM\nSubject: [junit] overriding a method executed in the constructor: dont&#39;t \nwork.\n\n\n&gt; Hi, I have a class that loads data from a file in it&#39;s constructor. To \n&gt; easy test this class, I delegate the loading to a method, initData(). It&#39;s \n&gt; works well, until I want to play with params:\n&gt;\n&gt; C:&#92;&gt;more CommandTest.java\n&gt; import junit.framework.TestCase;\n&gt;\n&gt; class Command {\n&gt;        private String data;\n&gt;        public Command() {\n&gt;                this.data = initData();\n&gt;        }\n&gt;        public String initData() {\n&gt;                return &quot;data from file&quot;;\n&gt;        }\n&gt;        public String execute() {\n&gt;                return &quot;execute with [&quot;+data+&quot;]&quot;;\n&gt;        }\n&gt; }\n&gt;\n&gt; public class CommandTest extends TestCase {\n&gt;        // mocks for Command.initData()\n&gt;        public Command makeMockDataWithParam(final String param) {\n&gt;                return new Command() {\n&gt;                        public String initData() {\n&gt;                                return param;\n&gt;                        }};\n&gt;        }\n&gt;        public static Command makeHardCodedMockData() {\n&gt;                return new Command() {\n&gt;                        public String initData() {\n&gt;                                return &quot;hard coded mock data&quot;;\n&gt;                        }};\n&gt;        }\n&gt;        // tests for Command.initData()\n&gt;        public void testInitData() {\n&gt;                assertEquals(&quot;data from file&quot;,new Command().initData());\n&gt;        }\n&gt;        public void testInitData_hardCodedMockData() {\n&gt;                assertEquals(&quot;hard coded mock data&quot;,\n&gt;                        makeHardCodedMockData().initData());\n&gt;        }\n&gt;        public void testInitData_mockDataAsParam() {\n&gt;                final String param = &quot;mock data as param&quot;;\n&gt;\n&gt; assertEquals(param,makeMockDataWithParam(param).initData());\n&gt;        }\n&gt;        // tests for Command.execute()\n&gt;        public void testExecute() {\n&gt;                assertEquals(&quot;execute with [data from file]&quot;,\n&gt;                        new Command().execute());\n&gt;        }\n&gt;        public void testExcute_hardCodedMockData() {\n&gt;                assertEquals(&quot;execute with [hard coded mock data]&quot;,\n&gt;                        makeHardCodedMockData().execute());\n&gt;        }\n&gt;        public void testExecute_mockDataAsParam() {\n&gt;                final String param = &quot;mock data as param&quot;;\n&gt;                assertEquals(&quot;execute with [&quot;+param+&quot;]&quot;,\n&gt;                        makeMockDataWithParam(param).execute());\n&gt;        }\n&gt; }\n&gt;\n&gt; C:&#92;&gt;javac -classpath junit.jar CommandTest.java\n&gt;\n&gt; C:&#92;&gt;java -cp .;junit.jar junit.textui.TestRunner CommandTest\n&gt; ......F\n&gt; Time: 0\n&gt; There was 1 failure:\n&gt; 1)\n&gt; testExecute_mockDataAsParam(CommandTest)junit.framework.ComparisonFailure:\n&gt; expected:&lt;...mock data as param...&gt; but was:&lt;...null...&gt;\n&gt;        at CommandTest.testExecute_mockDataAsParam(CommandTest.java:53)\n&gt;        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n&gt;        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n&gt;        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n&gt;\n&gt; FAILURES!!!\n&gt; Tests run: 6,  Failures: 1,  Errors: 0\n&gt;\n&gt; Don&#39;t understand why testExecute_mockDataAsParam() fails,\n&gt; whereas testInitData_mockDataAsParam() don&#39;t. Can anyone\n&gt; explain me ? How can I correctly mocke a property in the constructor ?\n&gt; \n\n\n", 
    "profile": "jeffreymads", 
    "topicId": 15674, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65487161, 
    "prevInTime": 15676, 
    "contentTrasformed": false, 
    "postDate": "1134345623", 
    "canDelete": false, 
    "nextInTopic": 15678, 
    "prevInTopic": 15676, 
    "headers": {
        "messageIdInHeader": "PDA2MDUwMWM1ZmVhZiQwZDJiMjM3MCQ2ODAxYThjMEBMYXB0b3AyMTA+", 
        "referencesHeader": "PGRuYzJicCtqOXJiQGVHcm91cHMuY29tPg=="
    }
}