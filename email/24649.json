{
    "numMessagesInTopic": 6, 
    "nextInTime": 24650, 
    "senderId": "n1trb69z38VPWB_4C-gTaZ4_NsF1m99hmG9QUuq8xolXkRtRktGcRBknxjLMqhU2fRNu2tOzUFJs9LvPYlcZrc8sRg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Possibility to log ignored tests", 
    "from": "David Saff &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "So there probably is a way to get what you want, but it will require a decent amount of custom code, and some understanding of JUnit s less-often-used", 
    "msgId": 24649, 
    "profile": "saffatgoogle", 
    "topicId": 24645, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 525765722, 
    "messageBody": "<div id=\"ygrps-yiv-1384145630\"><div dir=\"ltr\">So there probably is a way to get what you want, but it will require a decent amount of custom code, and some understanding of JUnit&#39;s less-often-used extension points.<div><br></div><div>Basically, you could create a new ListeningRunner. It would be used like this:</div><div><br></div><div>@RunWith(ListeningRunner.class)</div><div>@Listeners(MyListener.class)</div><div>public class MyTest {</div><div> // normal test class</div><div>}</div><div><br></div><div>Where ListeningRunner would say, in part:</div><div><br></div><div>class ListeningRunner {<br></div><div>  private final Runner mDelegate;</div><div>  private final List&lt;RunListener&gt; mExtraListeners;</div><div><br></div><div>  public ListeningRunner(Class testClass) {</div><div>    mDelegate = createDelegateRunner(testClass);</div><div>    mExtraListeners = createListeners(testClass);</div><div>  }</div><div>    </div><div>  public abstract void run(RunNotifier notifier) {<br></div><div>    RunNotifier myNotifier = new RunNotifier() {</div><div>      public void fireTestStarted(final Description description) throws StoppedByUserException {</div><div>        super.fireTestStarted(description);</div><div>        notifier.fireTestStarted(description);</div><div>      }</div><div><br></div><div>      // and so on for other methods.</div><div>    }</div><div>    for (RunListener listener : mExtraListeners) {</div><div>      myNotifier.addListener(listener);</div><div>    }</div><div>    mDelegate.run(myNotifier);<br></div><div>  }</div><div>}</div><div><br></div><div>There&#39;s a lot of holes left for you to fill in, unfortunately.</div><div><br></div><div>   David Saff</div><div>       </div></div><div class=\"ygrps-yiv-1384145630gmail_extra\"><br><blockquote><span title=\"qreply\"> <div class=\"ygrps-yiv-1384145630gmail_quote\">On Tue, Mar 10, 2015 at 12:12 PM, Nikita Merinov <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:nikita.merinov@...\">nikita.merinov@...</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-1384145630gmail_quote\" style=\"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p></p><div dir=\"ltr\">I have a requirement to build custom report (it can be simple text file, xml, html format, etc) per each execution of test script despite external runner (i.e. report should be created for all the following: if script was executed via IDE, via Maven, via remote runner on CI server, etc). This report will be analyzed further by others.<div><br></div><div>So, as I understood the only way to provide some listening facility to external source is to build own custom runner?</div><div><div class=\"ygrps-yiv-1384145630h5\"><div class=\"ygrps-yiv-1384145630gmail_extra\"><br><div class=\"ygrps-yiv-1384145630gmail_quote\">On Mon, Mar 9, 2015 at 10:36 PM, David Saff <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:saff@...\">saff@...</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-1384145630gmail_quote\" style=\"border-left:1px #ccc solid;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p></p><div dir=\"ltr\">Rules can fill _some_ of the needs of a reporting facility, but unfortunately, not all: for example, some custom runners ignore Rules entirely.<div><br></div><div>Unfortunately, the task of hooking in a custom RunListener can vary depending on how the tests are being run, and is often not really possible.  Can you share a little more about your goals?</div><div><br></div><div>   David Saff</div></div><div><div><div class=\"ygrps-yiv-1384145630gmail_extra\"><br><div class=\"ygrps-yiv-1384145630gmail_quote\">On Sun, Mar 8, 2015 at 7:06 PM, Nikita Merinov <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:nikita.merinov@...\">nikita.merinov@...</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-1384145630gmail_quote\" style=\"border-left:1px #ccc solid;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p></p><div dir=\"ltr\"><span style=\"font-size:12.8000001907349px;\">Hi everyone,</span><div style=\"font-size:12.8000001907349px;\"><br></div><div style=\"font-size:12.8000001907349px;\">I&#39;m trying to write custom reporting facility using JUnit rules.</div><div style=\"font-size:12.8000001907349px;\"><br></div><div style=\"font-size:12.8000001907349px;\">Quick example:</div><div style=\"font-size:12.8000001907349px;\"><br></div><div style=\"font-size:12.8000001907349px;\"><div><div><font face=\"monospace, monospace\">public class Example {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t</span>@ClassRule</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t</span>public static TestWatcher classWatcher = new TestWatcher() {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>@Override</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>protected void starting(Description description) {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Initialize stuff</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Log header</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>}</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>@Override</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>protected void finished(Description description) {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Log footer with metrics from counters (total, </font><span style=\"font-family:monospace, monospace;\">succeeded</span><font face=\"monospace, monospace\">, failed, skipped)</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>}</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t</span>};</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t</span>@Rule</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t</span>public TestWatcher testWatcher = new TestWatcher() {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>@Override</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>protected void succeeded(Description description) {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Log succeeded</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Increment </font><span style=\"font-family:monospace, monospace;\">succeeded </span><span style=\"font-family:monospace, monospace;\">counter</span></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>}</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>@Override</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>protected void failed(Throwable e, Description description) {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Log failed</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Increment </font><span style=\"font-family:monospace, monospace;\">failed </span><span style=\"font-family:monospace, monospace;\">counter</span></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>}</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>@Override</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>protected void skipped(AssumptionViolatedException e, Description description) {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Log skipped</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Increment </font><span style=\"font-family:monospace, monospace;\">skipped </span><span style=\"font-family:monospace, monospace;\">counter</span></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>}</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>@Override</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>protected void starting(Description description) {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Log started</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>}</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>@Override</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>protected void finished(Description description) {</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Log failed</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t\t</span>// Increment total counter</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t\t</span>}</font></div><div><font face=\"monospace, monospace\"><span style=\"white-space:pre-wrap;\">\t</span>};</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\">    @Test</font></div><div><font face=\"monospace, monospace\">    @Ignore</font></div><div><font face=\"monospace, monospace\">    public void test1() {}</font></div><div><font face=\"monospace, monospace\"><br></font></div><div><font face=\"monospace, monospace\">    @Test</font></div><div><font face=\"monospace, monospace\">    public void test2() {}</font></div><div><font face=\"monospace, monospace\">}</font></div></div><div><br></div><div>Issue here is that tests with @Ignore annotation are not handled by JUnit rules. Therefore I cannot get any information about ignored tests, and all my metrics will be wrong.</div><div><br></div><div>From the JUnit source code I can see that if test is marked with @Ignore only RunNotifier object will be notified about ignore and that test will not be passed to rules.</div><div><br></div><div>Got two questions here:</div><div>1. How can I fix my metrics? The only way I can see is to manually count methods with @Ignore annotation via reflection and apply this offset to all metrics. Is there any other ways to do that?</div><div>2. Why presence of @Ignore does not behave like failed assumption? I guess that this is because of backward compatibility, is it correct?</div><div><br></div><div>Thanks.</div></div><div><br></div>-- <br><div><div>Sincerely yours,</div><div>Nikita Merinov</div></div>\n</div>\n<p></p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br></div>\n</div></div><p></p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br><br clear=\"all\"><div><br></div>-- <br><div><div>Sincerely yours,</div><div>Nikita Merinov</div></div>\n</div></div></div></div>\n<p></p>\n\n    </div><div><div class=\"ygrps-yiv-1384145630h5\">\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></div></div></blockquote></div><br></span></blockquote></div>\n</div>", 
    "prevInTime": 24648, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1426083930", 
    "canDelete": false, 
    "nextInTopic": 24650, 
    "prevInTopic": 24648, 
    "headers": {
        "inReplyToHeader": "PENBRjVBb3p1Y2I0Mm9NR19BTXJ2RzcxUTI2dE0wWmRzWUFUN21PUEM9UzFSYm5ydGJxUUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBTHJ3LVB4ODYzekdYS2N1YXcySHFhZmVzWG5iOTlZb0ZuRVJxcnprWjFBeWFlRmllZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBRjVBb3p0czFDaGNtZzlrTjA0a0NpVDBIeTZ5WXhTckdQSE1OWTJrNXpockt6NGd2d0BtYWlsLmdtYWlsLmNvbT4gPENBTHJ3LVB5RGttTUNRRENGczhaQ0RjSnlmUWJQUHA5azh3OVBpSmg2X09IbnR6bXkrZ0BtYWlsLmdtYWlsLmNvbT4gPENBRjVBb3p1Y2I0Mm9NR19BTXJ2RzcxUTI2dE0wWmRzWUFUN21PUEM9UzFSYm5ydGJxUUBtYWlsLmdtYWlsLmNvbT4="
    }
}