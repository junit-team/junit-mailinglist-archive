{
    "numMessagesInTopic": 4, 
    "nextInTime": 16150, 
    "senderId": "zEQEAiS0DJA3fD2urvIMncTu9hb7xPBB6cBC0BpJETgIvBd2u71sm2pinSA5U4HzbTZ9qmup3V71Z3E8MiccbNiH0pm7Ega395bKZw", 
    "systemMessage": true, 
    "subject": "problem compiling and testing", 
    "from": "&quot;strohtennis&quot; &lt;strohtennis@...&gt;", 
    "authorName": "strohtennis", 
    "msgSnippet": "I am attempting to make a server for a computer bowl competition that will test competitors source code, keep track of team results and return results to the", 
    "msgId": 16149, 
    "profile": "strohtennis", 
    "topicId": 16149, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 92105587, 
    "messageBody": "<div id=\"ygrps-yiv-2068784030\">I am attempting to make a server for a computer bowl competition that<br/>\nwill test competitors source code, keep track of team results and<br/>\nreturn results to the competitors.  The only trouble I am having is<br/>\nthat I am getting strange results from my tests.  As you can see I&#39;ve<br/>\nset up a very simple class A1 to test my results.  The ActiveTestSuite<br/>\n always returns true for both TestResults and the TestSuite returns<br/>\nfalse for both.<br/>\n<br/>\nThanks,<br/>\nEric<br/>\n<br/>\n<br/>\npublic class A1<br/>\n{<br/>\n<br/>\n   public A1()<br/>\n   {}<br/>\n<br/>\n   public int get1()<br/>\n   {<br/>\n   \treturn 1;<br/>\n   }<br/>\n}<br/>\n<br/>\npublic class A1Test extends junit.framework.TestCase<br/>\n{<br/>\n<br/>\n\tpublic void test1() <br/>\n\t{<br/>\n\t  \t\tA1 p = new A1();<br/>\n\t<br/>\n\t \tassertEquals(1, p.get1() );<br/>\n\t}<br/>\n\t<br/>\n\tpublic void test2() <br/>\n\t{<br/>\n\t  \t\tA1 p = new A1();<br/>\n\t<br/>\n\t \tassertEquals(2, p.get1() );<br/>\n\t}<br/>\n<br/>\n}<br/>\n<br/>\npackage cccb.fileTester;<br/>\nimport junit.framework.*;<br/>\nimport junit.extensions.*;<br/>\nimport java.io.*;<br/>\n<br/>\npublic class FileTester<br/>\n{<br/>\n    private String studentFilename;<br/>\n    public FileTester(String sFilename) <br/>\n    {<br/>\n        studentFilename = sFilename;<br/>\n    }<br/>\n    public FileTester(File f)<br/>\n    {<br/>\n        studentFilename = f.getName();<br/>\n    }<br/>\n    public boolean testFile() throws Exception<br/>\n    {<br/>\n        CompilingClassLoader ccl = new CompilingClassLoader();<br/>\n<br/>\n        TestSuite suite;<br/>\n        <br/>\n        //studentFilename = &quot;C:/StudentWork/A1.java&quot;;<br/>\n        //or C:/StudentWork/A1.jar - .class file in the jar<br/>\n        int len = studentFilename.length();<br/>\n        String test;<br/>\n        if(studentFilename.substring(len-4).equals(&quot;java&quot;))<br/>\n            test =<br/>\n&quot;&#92;&#92;JunitTests&#92;&#92;&quot;+studentFilename.substring(len-7,len-5)+&quot;Test&quot;;<br/>\n        else<br/>\n            test =<br/>\n&quot;&#92;&#92;JunitTests&#92;&#92;&quot;+studentFilename.substring(len-6,len-4)+&quot;Test&quot;;<br/>\n        System.out.println(&quot;test = &quot;+test);<br/>\n        Class testClas = ccl.loadClass(test, studentFilename,true);<br/>\n        if (testClas ==null)<br/>\n        {<br/>\n                 return false;<br/>\n        }<br/>\n        TestResult tr0 = new TestResult();<br/>\n        TestResult tr1 = new TestResult();<br/>\n        suite = new ActiveTestSuite(testClas);<br/>\n        suite.runTest(suite.testAt(0), tr1);<br/>\n        if(tr0.wasSuccessful())<br/>\n            System.out.println(&quot;test 0 was a success&quot;);<br/>\n        else<br/>\n            System.out.println(&quot;test 0 not successful&quot;);<br/>\n            <br/>\n        suite.runTest(suite.testAt(1),tr1);<br/>\n        if(tr1.wasSuccessful())<br/>\n            System.out.println(&quot;test 1 was a success&quot;);<br/>\n        else<br/>\n            System.out.println(&quot;test 1 not successful&quot;);<br/>\n               <br/>\n<br/>\n        suite = new TestSuite(testClas);<br/>\n        suite.runTest(suite.testAt(0), tr1);<br/>\n        if(tr1.wasSuccessful())<br/>\n            System.out.println(&quot;test 0 was a success&quot;);<br/>\n        else<br/>\n            System.out.println(&quot;test 0 not successful&quot;);<br/>\n<br/>\n        suite.runTest(suite.testAt(1),tr1);<br/>\n        if(tr1.wasSuccessful())<br/>\n            System.out.println(&quot;test 1 was a success&quot;);<br/>\n        else<br/>\n            System.out.println(&quot;test 1 not successful&quot;);<br/>\n<br/>\n        return (tr0.wasSuccessful()&&!tr1.wasSuccessful());<br/>\n       <br/>\n    }<br/>\n}<br/>\n<br/>\n<br/>\n/**********Compiling Class Loader***********/<br/>\n<br/>\npackage cccb.fileTester;<br/>\nimport java.io.*;<br/>\nimport java.net.*;<br/>\nimport cccb.FTPHandler.FileInfo;<br/>\n<br/>\n<br/>\n/*<br/>\nA CompilingClassLoader compiles your Java source on-the-fly. It<br/>\nchecks for nonexistent .class files, or .class files that are older<br/>\nthan their corresponding source code.<br/>\n*/<br/>\npublic class CompilingClassLoader extends ClassLoader implements<br/>\nSerializable<br/>\n{<br/>\n<br/>\n        // Spawn a process to compile the java source code file<br/>\n        // specified in the &#39;javaFile&#39; parameter. Return a true if<br/>\n        // the compilation worked, false otherwise.<br/>\n        private boolean compile( String javaFile ,String studentFile)<br/>\nthrows IOException {<br/>\n<br/>\n   <br/>\n                Process p;<br/>\n                <br/>\n               <br/>\nString[]cmd={&quot;javac&quot;,&quot;-sourcepath&quot;,&quot;.&quot;,studentFile,javaFile,&quot;-classpath&quot;,&quot;C:/JunitTests/junit.jar&quot;};<br/>\n               <br/>\n                 //THIS ALSO COMPILES CORRECTLY<br/>\nString[]cmd={&quot;javac&quot;,&quot;-classpath&quot;,&quot;C:&#92;&#92;StudentWork&#92;&#92;A1.jar&quot;,&quot;;&quot;,&quot;C:&#92;&#92;junit.jar&quot;,&quot;-sourcepath&quot;,&quot;.&quot;,javaFile};<br/>\n          \t\t<br/>\n               p=Runtime.getRuntime().exec(cmd);<br/>\n             <br/>\n                try {<br/>\n                   p.waitFor();<br/>\n                } catch( InterruptedException ie ) {<br/>\nSystem.out.println( ie ); return false;}<br/>\n<br/>\n                int ret = p.exitValue();<br/>\n                return ret==0;<br/>\n        }<br/>\n        // The heart of the ClassLoader -- automatically compile<br/>\n        // source as necessary when looking for class files<br/>\n        public Class loadClass( String name, String studentDir,<br/>\nboolean resolve )<br/>\n        throws ClassNotFoundException {<br/>\n<br/>\n                Class clas = null;<br/>\n<br/>\n                String javaFilename = name+&quot;.java&quot;;<br/>\n                String classFilename = name+&quot;.class&quot;;<br/>\n<br/>\n                File javaFile = new File( javaFilename );<br/>\n                File classFile = new File( classFilename );<br/>\n              <br/>\n                if (javaFile.exists()) <br/>\n                {<br/>\n                        try <br/>\n                        {<br/>\n                            if (!compile(javaFilename, studentDir)  ||<br/>\n!classFile.exists()) <br/>\n                            {<br/>\n                                return null;<br/>\n<br/>\n                            }<br/>\n                        } <br/>\n                        catch( IOException ie ) <br/>\n                        {<br/>\n                            return null;<br/>\n <br/>\n                         }<br/>\n                      <br/>\n                }<br/>\n<br/>\n                    try <br/>\n                   {<br/>\n                        byte raw[] = (new File(classFilename<br/>\n)).getBytes();<br/>\n                        int len = name.length();<br/>\n                        name=name.substring(len-6);<br/>\n                        clas = defineClass(name,raw,0,raw.length);<br/>\n                    } <br/>\n                   catch( IOException ie ) {}<br/>\n<br/>\n<br/>\n              <br/>\n                if (resolve && clas != null)<br/>\n                    resolveClass( clas );<br/>\n<br/>\n<br/>\n                return clas;<br/>\n        }<br/>\n\t public byte[] getBytes(File fileName ) throws IOException <br/>\n         {<br/>\n              <br/>\n                int len = (int)file.length();<br/>\n                byte raw[] = new byte[len];<br/>\n                FileInputStream inFile = new FileInputStream( file );<br/>\n                int r = inFile.read( raw );<br/>\n                if (r != len)<br/>\n                    throw new IOException( &quot;Can&#39;t read file&quot; );<br/>\n                inFile.close();<br/>\n                return raw;<br/>\n        }<br/>\n}</div>", 
    "prevInTime": 16148, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1140441160", 
    "canDelete": false, 
    "nextInTopic": 16168, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGR0Y2Y4OCtlNTBjQGVHcm91cHMuY29tPg=="
    }
}