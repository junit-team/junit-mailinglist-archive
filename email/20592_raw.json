{
    "topicId": 20590, 
    "postDate": "1213762604", 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "from": "Per Jacobsson &lt;perjacobsson@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "heCuYfLt2SdjqY3vNv4e6H8eNv0bzTcmVu3Yrqc94kKN64N8jHxfWDxIIURq_LsJZ1lKihEA3nd0wwkwRG4FT_cALB9oKs_3Y8vdPnzd0co", 
    "nextInTime": 20593, 
    "userId": 282257561, 
    "prevInTime": 20591, 
    "prevInTopic": 20591, 
    "headers": {
        "inReplyToHeader": "PDM1YzUwN2QzMDgwNjE3MTYyMHAyODFlNWYyY3Y2YmEwZGExN2E2MGE5ZWI2QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDMwOTE5NkBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPg==", 
        "referencesHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPiw8MzVjNTA3ZDMwODA2MTcxNjIwcDI4MWU1ZjJjdjZiYTBkYTE3YTYwYTllYjZAbWFpbC5nbWFpbC5jb20+"
    }, 
    "authorName": "Per Jacobsson", 
    "numMessagesInTopic": 8, 
    "msgSnippet": "That would work, but I wouldn t be really happy about going back to the old singleton factory pattern. It may just be the best fit for this case though. / Per ", 
    "contentTrasformed": false, 
    "msgId": 20592, 
    "nextInTopic": 20593, 
    "systemMessage": true, 
    "rawEmail": "Return-Path: &lt;PerJacobsson@...&gt;\r\nReceived: (qmail 20832 invoked from network); 18 Jun 2008 04:27:57 -0000\r\nReceived: from unknown (66.218.67.94)\n  by m49.grp.scd.yahoo.com with QMQP; 18 Jun 2008 04:27:57 -0000\r\nReceived: from unknown (HELO n23d.bullet.scd.yahoo.com) (66.218.67.213)\n  by mta15.grp.scd.yahoo.com with SMTP; 18 Jun 2008 04:27:56 -0000\r\nReceived: from [66.218.69.4] by n23.bullet.scd.yahoo.com with NNFMP; 18 Jun 2008 04:27:56 -0000\r\nReceived: from [66.218.66.90] by t4.bullet.scd.yahoo.com with NNFMP; 18 Jun 2008 04:27:56 -0000\r\nX-Sender: PerJacobsson@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 43291 invoked from network); 18 Jun 2008 04:16:46 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m43.grp.scd.yahoo.com with QMQP; 18 Jun 2008 04:16:46 -0000\r\nX-Received: from unknown (HELO mx2.eharmony.com) (204.16.72.134)\n  by mta18.grp.scd.yahoo.com with SMTP; 18 Jun 2008 04:16:46 -0000\r\nX-IronPort-AV: E=Sophos;i=&quot;4.27,662,1204531200&quot;; \n   d=&quot;scan&#39;208&quot;;a=&quot;74096595&quot;\r\nX-Received: from ehweb2.eharmony.com ([10.0.10.22])\n  by mx2.eharmony.com with ESMTP; 17 Jun 2008 21:16:44 -0700\r\nX-Received: from EXCHANGE-VS1.eharmony.com ([192.168.69.2]) by\n ehweb2.eharmony.com ([10.0.10.22]) with mapi; Tue, 17 Jun 2008 21:16:45 -0700\r\nTo: &quot;junit@yahoogroups.com&quot; &lt;junit@yahoogroups.com&gt;\r\nDate: Tue, 17 Jun 2008 21:16:44 -0700\r\nThread-Topic: [junit] Testing code that depends on today&#39;s date\r\nThread-Index: AcjQ0M7FIGuivfuuSu2xoZkYN9DS0AAKElOf\r\nMessage-ID: &lt;860D47F8904F6041AEEE55F9B684667F162D309196@...&gt;\r\nReferences: &lt;860D47F8904F6041AEEE55F9B684667F162D46EF05@...&gt;,&lt;35c507d30806171620p281e5f2cv6ba0da17a60a9eb6@...&gt;\r\nIn-Reply-To: &lt;35c507d30806171620p281e5f2cv6ba0da17a60a9eb6@...&gt;\r\nAccept-Language: en-US\r\nContent-Language: en-US\r\nX-MS-Has-Attach:\r\nX-MS-TNEF-Correlator:\r\nacceptlanguage: en-US\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nMIME-Version: 1.0\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Per Jacobsson &lt;perjacobsson@...&gt;\r\nSubject: RE: [junit] Testing code that depends on today&#39;s date\r\nX-Yahoo-Group-Post: member; u=282257561\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 18 Jun 2008 04:27:54 -0000\r\n\r\nThat would work, but I wouldn&#39;t be really happy about going back to the old=\r\n singleton factory pattern. It may just be the best fit for this case thoug=\r\nh.\n/ Per\n________________________________________\nFrom: junit@yahoogroups.c=\r\nom [junit@yahoogroups.com] On Behalf Of Andrew McDonagh [andrewmcdonagh@gma=\r\nil.com]\nSent: Tuesday, June 17, 2008 4:20 PM\nTo: junit@yahoogroups.com\nSubj=\r\nect: Re: [junit] Testing code that depends on today&#39;s date\n\nHi,\n\nIf you use=\r\n the Abstract Factory pattern to create the Date() object\ninstance, instead=\r\n of calling new Date() yourself or passing it around,\nthen the production T=\r\nodaysDateConcreteFactory can simply :\n\nreturn new Date();\n\nWhereas during y=\r\nour unit or functional tests, you use a\nMockTodaysDateConcreteFactory objec=\r\nt, which returns what ever you want\n\nreturn expectedDate;\n\nHope this helps\n=\r\n\nAndrew\n\n2008/6/17 Per Jacobsson &lt;perjacobsson@...&lt;mailto:perjacob=\r\nsson%40eharmony.com&gt;&gt;:\n&gt; Hi,\n&gt; This has been annoying me for a while and I =\r\ncan&#39;t think of a clean solution\n&gt; for it. Hope this makes sense: I have som=\r\ne code that returns different\n&gt; results depending on what today&#39;s date is (=\r\nthe number of days since a user\n&gt; first registered, etc). The simple approa=\r\nch is to just create a new instance\n&gt; of java.util.Date whenever I need to =\r\nknow the current date, but that tends\n&gt; to make both unit and automated fun=\r\nctional testing difficult.\n&gt;\n&gt; I&#39;m currently injecting today&#39;s date into th=\r\ne classes that need it, and then\n&gt; the tests can just use a static date. It=\r\n gets pretty ugly though, a lot of\n&gt; times this date has to be dragged alon=\r\ng deep into the domain model.\n&gt;\n&gt; An alternative would be to take the old s=\r\nchool approach and have a static\n&gt; factory that everything that needs to kn=\r\now today&#39;s date calls, and allow the\n&gt; unit tests to override with a test d=\r\nate. Of course, then you run into all\n&gt; the other issues that dependency in=\r\njection solves.\n&gt;\n&gt; Any thoughts?\n&gt; Thanks,\n&gt; / Per\n&gt;\n&gt; [Non-text portions =\r\nof this message have been removed]\n&gt;\n&gt;\n\n", 
    "subject": "RE: [junit] Testing code that depends on today&#39;s date"
}