{
    "numMessagesInTopic": 9, 
    "nextInTime": 22784, 
    "senderId": "I8FtjWluCTWoh9isyvmLfUkiu30xRsiPvyUSdWZSLNhtbFZWVfdFVypDFNpoQJpKTM1qfoc0TuuMKmt0NlFP6dfZSV4kWOsyRdZMYw", 
    "systemMessage": false, 
    "subject": "Re: @BeforeClass method for DBUnit Dataset creation", 
    "from": "&quot;hdave321321&quot; &lt;hdave321321@...&gt;", 
    "authorName": "hdave321321", 
    "msgSnippet": "I am totally good with hacks!  However, this one still leaves me with a problem.  I still need to delete the test data after all the tests have run!  The only", 
    "msgId": 22783, 
    "rawEmail": "Return-Path: &lt;hdave321321@...&gt;\r\nReceived: (qmail 42359 invoked by uid 7800); 2 Jul 2010 15:47:20 -0000\r\nX-Sender: hdave321321@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 67133 invoked from network); 2 Jul 2010 15:43:38 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m11.grp.re1.yahoo.com with QMQP; 2 Jul 2010 15:43:38 -0000\r\nX-Received: from unknown (HELO n46b.bullet.mail.sp1.yahoo.com) (66.163.168.160)\n  by mta3.grp.sp2.yahoo.com with SMTP; 2 Jul 2010 15:43:37 -0000\r\nX-Received: from [69.147.65.173] by n46.bullet.mail.sp1.yahoo.com with NNFMP; 02 Jul 2010 15:40:23 -0000\r\nX-Received: from [98.137.34.33] by t15.bullet.mail.sp1.yahoo.com with NNFMP; 02 Jul 2010 15:40:23 -0000\r\nDate: Fri, 02 Jul 2010 15:40:22 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;i0l196+h80d@...&gt;\r\nIn-Reply-To: &lt;AANLkTilUiHFeYnUEQKmxXv4QNwD32zmsJy3zHIPTYADX@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;hdave321321&quot; &lt;hdave321321@...&gt;\r\nSubject: Re: @BeforeClass method for DBUnit Dataset creation\r\nX-Yahoo-Group-Post: member; u=453277943; y=SR5YIomhVl36C7dyaP_O4xO09zo716UJX2l0zOX9ymA00sJHeVU\r\nX-Yahoo-Profile: hdave321321\r\nX-eGroups-Approved-By: dsaff &lt;david@...&gt; via email; 2 Jul 2010 15:47:20 -0000\r\n\r\nI am totally good with hacks!  However, this one still leaves me with a pro=\r\nblem.  I still need to delete the test data after all the tests have run!  =\r\nThe only way to do this is via @AfterClass which, again, forces all my DBUn=\r\nit code to be static which doesn&#39;t work.\n\nIn the meantime, I implemented an=\r\nother approach that has seemed to work.   I created a non-static DBUnitHelp=\r\ner class and used Spring to instantiate one of these and inject it into the=\r\n root class of my test classes.  The DBUnitHelper class uses your approach =\r\nto ensure the data is only loaded once regardless of how many times it is a=\r\nsked to load it.  Deleting the data from an @AfterClass static method was a=\r\nlso simple.  So for now, I am happy.\n\nFor the record, an alternative (and b=\r\netter) approach I learned about elsewhere is to do what unitils does and cr=\r\neate a custom testexecutionlistener.\n\nAlso for the record, if you annotate =\r\na method with @PostConstruct -- it&#39;s also a great way to load the data just=\r\n once.  However, you are still left with the cleanup problem....\n\nAnyway ho=\r\npe all this helps somebody else!\n\n--- In junit@yahoogroups.com, Mike Forsbe=\r\nrg &lt;bigmike.f@...&gt; wrote:\n&gt;\n&gt; The hack of a initalizationOccurred boolean i=\r\ns always an option.\n&gt; \n&gt; In other words... use a static field that is initi=\r\nally set to false.  Then\n&gt; when you come to your setup method, only do the =\r\nupdate if the field is\n&gt; false.  Just remember to set the field to true onc=\r\ne the update occurs.  This\n&gt; way, no matter which test runs first or even i=\r\nf a sub set of tests run, then\n&gt; the reset only occurs initially.\n&gt; \n&gt; Ther=\r\ne may be a better way to do this, but I like to fall back on this\n&gt; recipe.=\r\n\n&gt; \n&gt; Big Mike\n&gt; \n&gt; On Thu, Jul 1, 2010 at 11:39 AM, hdave321321 &lt;hdave3213=\r\n21@...&gt; wrote:\n&gt; \n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Thanks for the help. In my case, Spring Test =\r\ndoes an automatic transaction\n&gt; &gt; rollback after every test method, so ther=\r\ne are no dependencies between tests\n&gt; &gt; -- so thats not a problem. Because =\r\nof the rollback, it is also the case that\n&gt; &gt; they order of the test runs a=\r\nlso doesn&#39;t matter. The database is reset to a\n&gt; &gt; &quot;known&quot; state after each=\r\n test method by the transactional rollback.\n&gt; &gt;\n&gt; &gt; I&#39;d just like to load t=\r\nhe data once rather than 50 times. But the\n&gt; &gt; @BeforeClass requirement to =\r\nbe a static method makes it impossible to use.\n&gt; &gt; Is there any trigger tha=\r\nt can run after a class is initialized by Spring and\n&gt; &gt; before any test me=\r\nthod is executed?\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; --- In junit@yahoogroups.com &lt;junit%40yahoogr=\r\noups.com&gt;, Mike Forsberg\n&gt; &gt; &lt;bigmike.f@&gt; wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; I would advise=\r\n against that unless you were following the following guide\n&gt; &gt; &gt; lines....=\r\n\n&gt; &gt; &gt; - No test method (or called method) manipulates the data base.\n&gt; &gt; &gt;=\r\n - The order of the test methods do not cause conflicts with each other\n&gt; &gt;=\r\n with\n&gt; &gt; &gt; required data being there.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Some things I&#39;d try befo=\r\nre doing the @BeforeClass\n&gt; &gt; &gt; - Only populate the data you need for a giv=\r\nen set of tests. (Don&#39;t\n&gt; &gt; populate\n&gt; &gt; &gt; the _whole_ database.)\n&gt; &gt; &gt; - W=\r\nhich of the DBUnit population features are you using... I think there\n&gt; &gt; i=\r\ns\n&gt; &gt; &gt; one that will revert to a known state, without the delete and inser=\r\nt.\n&gt; &gt; This\n&gt; &gt; &gt; may save some time.\n&gt; &gt; &gt; - Try to use a non-commitable t=\r\nransaction for testing. After all, one\n&gt; &gt; &gt; shouldn&#39;t need to test the com=\r\nmit functionality. If that breaks more than\n&gt; &gt; &gt; just you will have proble=\r\nms.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Hope I helped,\n&gt; &gt; &gt;\n&gt; &gt; &gt; Big Mike\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; On We=\r\nd, Jun 30, 2010 at 8:32 PM, hdave321321 &lt;hdave321321@&gt; wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; &gt;=\r\n\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; My DAO integration tests are taking a long time to run. I =\r\nam using\n&gt; &gt; Spring\n&gt; &gt; &gt; &gt; Test which automatically does a transaction rol=\r\nlback after each test\n&gt; &gt; method.\n&gt; &gt; &gt; &gt; However, I am also using DBUnit t=\r\no load the exact same dataset before\n&gt; &gt; each\n&gt; &gt; &gt; &gt; test method via the @=\r\nBeforeTransaction annotation.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; It has occured to me that I c=\r\nould save a lot of time if I load the\n&gt; &gt; DBUnit\n&gt; &gt; &gt; &gt; test data once per=\r\n test class instead of once per test method.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; I&#39;ve not used =\r\nthe @BeforeClass and @AfterClass methods before, but\n&gt; &gt; &gt; &gt; apparently the=\r\ny require the annotated method to be static and this is\n&gt; &gt; &gt; &gt; interfering=\r\n with my normal use of Spring dependency injection that\n&gt; &gt; provides\n&gt; &gt; &gt; =\r\n&gt; an application context, data source, and other things I need to load\n&gt; &gt; =\r\nthe\n&gt; &gt; &gt; &gt; correct data set.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Anyone experience this before=\r\n? What&#39;s a good way to address this\n&gt; &gt; problem?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; =\r\n&gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt;=\r\n\n&gt; &gt;\n&gt; &gt;  \n&gt; &gt;\n&gt; \n&gt; \n&gt; [Non-text portions of this message have been removed=\r\n]\n&gt;\n\n\n\n", 
    "profile": "hdave321321", 
    "topicId": 22776, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 453277943, 
    "prevInTime": 22782, 
    "contentTrasformed": false, 
    "postDate": "1278085222", 
    "canDelete": false, 
    "nextInTopic": 22784, 
    "prevInTopic": 22780, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGlsVWlIRmVZblVFUUtteFh2NFFOd0QzMnptc0p5M3pISVBUWUFEWEBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PGkwbDE5NitoODBkQGVHcm91cHMuY29tPg=="
    }
}