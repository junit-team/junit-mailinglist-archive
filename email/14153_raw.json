{
    "numMessagesInTopic": 6, 
    "nextInTime": 14154, 
    "senderId": "p5VqBHIa9ClDcZdcFoaTjmNmZEgi19fyI7X9SWxryNzSjox48C6b6aV-JQgcui8bc8ZzOWKIQiXfI5AVBg36ttDQnBM", 
    "systemMessage": false, 
    "subject": "Re: Unit testing a method that contains objects", 
    "from": "&quot;etl_dan&quot; &lt;etl_dan@...&gt;", 
    "authorName": "etl_dan", 
    "msgSnippet": "The difficulty is in two places: 1. Actually creating a mock of the third party service 2. Providing your code under test with a mock version of the third ", 
    "msgId": 14153, 
    "rawEmail": "Return-Path: &lt;etl_dan@...&gt;\r\nX-Sender: etl_dan@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 1267 invoked from network); 17 Jul 2005 18:50:23 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m13.grp.scd.yahoo.com with QMQP; 17 Jul 2005 18:50:23 -0000\r\nReceived: from unknown (HELO n14a.bulk.scd.yahoo.com) (66.94.237.28)\n  by mta3.grp.scd.yahoo.com with SMTP; 17 Jul 2005 18:50:23 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.3] by n14.bulk.scd.yahoo.com with NNFMP; 17 Jul 2005 18:50:22 -0000\r\nReceived: from [66.218.66.82] by mailer3.bulk.scd.yahoo.com with NNFMP; 17 Jul 2005 18:50:22 -0000\r\nDate: Sun, 17 Jul 2005 18:50:19 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;dbe99b+8f19@...&gt;\r\nIn-Reply-To: &lt;dbcmk1+c7a8@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 2683\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: &quot;etl_dan&quot; &lt;etl_dan@...&gt;\r\nSubject: Re: Unit testing a method that contains objects\r\nX-Yahoo-Group-Post: member; u=86431363; y=PQafC-cTLWGO2QURXj5wOMzz_WiTPqnmhr_QgE7Ms6TJDQ\r\nX-Yahoo-Profile: etl_dan\r\n\r\nThe difficulty is in two places:\n1. Actually creating a mock of the third party service\n2. Providing your code under test with a mock version of the third\nparty service\n\nFor #1, you need to figure out how to actually make a version of this\nthird party service.  It&#39;s easiest if there is an interface that\nSomeClass implements; then you can simply create a mock implementation\nof that interface by hand or by using libraries such as jMock,\nEasyMock, etc.\n\nIf the third party class doesn&#39;t provide this, then it gets trickier.\n You might be able to subclass the third party class and override\nthe methods you want - but this is often very dangerous and brittle,\nif it will even work at all.  You might be able to use a bytecode\ngeneration tool like jMock with CGLib to create mocks of classes,\nthough it&#39;s almost always easier to build off an interface.\n\n\nOnce you have a mock object, then you need to figure out how to plug\nthat mock into your code under test (#2 above).  If you are directly\nconstructing the class in the method that you are testing, as in the\nfetchSomething() class you describe below, then it will be extremely\ndifficult to do this (You&#39;ll need to use some tool to intercept\nclass-level calls, like VirtualMock.)  \n\nIt&#39;s easiest to do this via a setter method or parameter to your\nobject&#39;s constructor.  Your production code could use to provide the\nproduction version, and your test code could provide a mock version. \nThis process of inserting parameters is called dependency injection or\ninversion of control, and projects like Spring are built on this\nfundamental idea.  \n\n\nHopefully #2 is under your control and you can modify the code to\naccept a different implementation of the third party tool.  If #1 is a\nclass, you can use brute force methods like jMock with CGLib or\nVirtualMock, or use some of the dependency-breaking techniques\ndescribed in Michael Feathers&#39; excellent book &quot;Working Effectively\nwith Legacy Code&quot;, ISBN #0131177052.\n\n\nDan\n\n\n--- In junit@yahoogroups.com, &quot;lzhao75&quot; &lt;sourceforgedev@g...&gt; wrote:\n&gt; Hi All,\n&gt; \n&gt; I just got started with TDD and would like seek help you from the\n&gt; experts in this mailing-list.\n&gt; \n&gt; I have a business service layer that calls a third party\napplication:\n&gt; \n&gt; public Object fetchSomething() {\n&gt; \n&gt;   SomeClass obj = new SomeClasss();\n&gt; \n&gt;   obj.set(...);\n&gt; \n&gt;   Object returnObj = obj.retrieveSomething();\n&gt; \n&gt;   return Obj;\n&gt; \n&gt; }\n&gt; \n&gt; When writing a test case, I don&#39;t know how to mock the third party\n&gt; object to return data for testing purposes. Could someone gives let\nme\n&gt; know what is the best approach to test the above code using JUnit?\n&gt; \n&gt; Thank you in advance for your help.\n&gt; \n&gt; Regarads,\n&gt; Lee\n\n\n\n", 
    "profile": "etl_dan", 
    "topicId": 14150, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 86431363, 
    "prevInTime": 14152, 
    "contentTrasformed": false, 
    "postDate": "1121626219", 
    "canDelete": false, 
    "nextInTopic": 14159, 
    "prevInTopic": 14150, 
    "headers": {
        "inReplyToHeader": "PGRiY21rMStjN2E4QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGRiZTk5Yis4ZjE5QGVHcm91cHMuY29tPg=="
    }
}