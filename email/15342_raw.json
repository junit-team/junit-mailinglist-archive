{
    "numMessagesInTopic": 20, 
    "nextInTime": 15343, 
    "senderId": "n3-ZW-X7gKqcE9Fu2UbbCN7PWuBJDbAywWE87q1NNKRh5jC9T9JDJvpTZ1vv8E-6PtG3Ke2nCejFcOsMrylqlOKfOwzcSPhFk4mpYMgHkYpPTa51WRQr99H6oA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Private method throws an exception", 
    "from": "Andrew McDonagh &lt;yahoogroups@...&gt;", 
    "authorName": "Andrew McDonagh", 
    "msgSnippet": "... This Extract and Override mechanism is a great tool for finding and then exposing the seam into which we can inject new behavior (ala Mocks/Fakes). But", 
    "msgId": 15342, 
    "rawEmail": "Return-Path: &lt;yahoogroups@...&gt;\r\nX-Sender: yahoogroups@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 42745 invoked from network); 2 Nov 2005 23:25:42 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m35.grp.scd.yahoo.com with QMQP; 2 Nov 2005 23:25:42 -0000\r\nReceived: from unknown (HELO outmail.freedom2surf.net) (194.106.33.237)\n  by mta4.grp.scd.yahoo.com with SMTP; 2 Nov 2005 23:25:42 -0000\r\nReceived: from [192.168.1.101] (i-83-67-4-97.freedom2surf.net [83.67.4.97])\n\t(authenticated bits=0)\n\tby outmail.freedom2surf.net (8.12.10/8.12.10) with ESMTP id jA2NPfch029090\n\tfor &lt;junit@yahoogroups.com&gt;; Wed, 2 Nov 2005 23:25:41 GMT\r\nMessage-ID: &lt;43694AF5.7060901@...&gt;\r\nDate: Wed, 02 Nov 2005 23:25:41 +0000\r\nUser-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;200511021532.jA2FWNYo005167@...&gt;\r\nIn-Reply-To: &lt;200511021532.jA2FWNYo005167@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Andrew McDonagh &lt;yahoogroups@...&gt;\r\nSubject: Re: [junit] Private method throws an exception\r\nX-Yahoo-Group-Post: member; u=234174584; y=JWrAM50qzVKoFXSJ9otZwq3BX_kAW1Gwa_BcJvyXlJP3yO8auJEndQ\r\nX-Yahoo-Profile: andy_ipaccess\r\n\r\nMitch Christensen wrote:\n\n&gt;In my case, I know exactly what the problem is.  The private method relies on external resources that are not available during unit testing (i.e. Torque/DBMS).\n&gt;\n&gt; \n&gt;\n&gt;My question was not how to find an unknown failure, but how to eliminate a known failure caused by an external dependency buried inside a private method.\n&gt;\n&gt; \n&gt;\n&gt;For public/protected method dependencies, I extend the class under test and override and simplify those methods.  Unfortunately, this doesnâ€™t work for private methods.\n&gt;\n&gt;  \n&gt;\nThis &#39;Extract and Override&#39; mechanism is a great tool for finding and \nthen exposing the seam into which we can inject new behavior (ala \nMocks/Fakes). But you do want to be careful not to over use it, else \nyour code base will contain lots of large classes that area further \nextended all over the place just to fake something. \n\nWith legacy apps, its especially important when you a tree of 2 or more \nclasses, where the lowest encapsulated instance of a class uses some \nexternal resource that you need to substitute - you end up having to \nExtract and Over ride methods on each class just to inject into this \nlowest one.\n\ntestableTop --uses--&gt;testableMiddle--uses--&gt;testableBottom.\n\nThe legacy apps (IME) tend to couple classes like the trio above, rather \nthan use abstractions (Interfaces or Abstract Classes), where as with \nTDDed designs I tend to see each class being coupled to interfaces only \nand using IoC, DiJ, DiV etc techniques.\n\n&gt; \n&gt;\n&gt;I think the answer is to refactor the private method to support some form of dependency injection so I can insert mock objects that eliminate the exception.\n&gt;  \n&gt;\n\nAgreed - though the you could also use dependency inversion - so instead \nof having a means injecting or having the class under test instantiate \nand/or use the external resource, you could change it so that it asks \nsomeone else (not one of its own instance factory methods) for an \ninstance - An AbstractFactory - production one does as is current, test \nabstract factory returns a fake.\n\nThis way, eve with the usual legacy coupling shown above, our Bottom \nclass can be safely (untested) refactored to use a singleton abstract \nFactory to return an object, rather than NEWing one itself.\n\nThen should this Bottom class be inadvertently used when testing any \nother class within the system, we have a simple and effective means of \ncontrolling it during testing.\n\n\n&gt; \n&gt;\n&gt;My question was whether they may be a better/more efficient approach?\n&gt;\n&gt; \n&gt;\n&gt;  \n&gt;\ndifferent, rather than better/ more efficient design approaches.\nAndy\n\n\n&gt;Thanks again for your help.\n&gt;\n&gt;-Mitch\n&gt;\n&gt; \n&gt;  \n&gt;\n\n\n", 
    "profile": "andy_ipaccess", 
    "topicId": 15264, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 234174584, 
    "prevInTime": 15341, 
    "contentTrasformed": false, 
    "postDate": "1130973941", 
    "canDelete": false, 
    "nextInTopic": 15353, 
    "prevInTopic": 15340, 
    "headers": {
        "inReplyToHeader": "PDIwMDUxMTAyMTUzMi5qQTJGV05ZbzAwNTE2N0BpLTE5NC0xMDYtNTYtMzMuZnJlZWRvbTJzdXJmLm5ldD4=", 
        "messageIdInHeader": "PDQzNjk0QUY1LjcwNjA5MDFAYW5kcmV3bWNkb25hZ2guZjJzLmNvbT4=", 
        "referencesHeader": "PDIwMDUxMTAyMTUzMi5qQTJGV05ZbzAwNTE2N0BpLTE5NC0xMDYtNTYtMzMuZnJlZWRvbTJzdXJmLm5ldD4="
    }
}