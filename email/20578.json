{
    "numMessagesInTopic": 21, 
    "nextInTime": 20579, 
    "senderId": "2GCAIuZl8mVKhibNiB6dajnMiZfVCZLp_NTOlTEBQeSETbJ7x-KPGwJUuVx7_qzAMadX3bNmNZYK5NEgs0z8XC3s6A", 
    "systemMessage": true, 
    "subject": "Re: What is expected behavior on Assert.assertEquals on Number object?", 
    "from": "&quot;nat_tul&quot; &lt;natta@...&gt;", 
    "authorName": "nat_tul", 
    "msgSnippet": "Correct me if i m wrong. You state about Object.equals(Object) will return false because it s not reside in the same address on memory. I don t agree with this", 
    "msgId": 20578, 
    "profile": "nat_tul", 
    "topicId": 20513, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 348330670, 
    "messageBody": "<div id=\"ygrps-yiv-970991769\">Correct me if i&#39;m wrong.<br/>\n<br/>\nYou state about Object.equals(Object) will return false because it&#39;s not <br/>\nreside in the same address on memory.<br/>\n<br/>\nI don&#39;t agree with this one since Object.equals(Object) should check the <br/>\nequality of semantic, not just address of object.<br/>\n<br/>\nBest regards,<br/>\nNattapong Sirilappanich<br/>\nEngineer, National Language Development - GCoC & TSC Thailand<br/>\nSoftware Group, IBM Thailand Co., Ltd.<br/>\ne-mail: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:natta@...\">natta@...</a><br/>\n<br/>\n--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;putnam_david_t&quot; &lt;davidtputnam@...&gt; <br/>\nwrote:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; To figure out what was happening, I wrote a few tests, set some<br/>\n&gt; breakpoints and saw what was going on.  However, what I saw <br/>\n </span></blockquote>seems to<br/>\n<blockquote><span title=\"ireply\"> &gt; disagree with the other observations in this thread.  This is what I<br/>\n&gt; executed: <br/>\n&gt; public class DoubleTest extends TestCase {<br/>\n&gt;     public void testDouble () {<br/>\n&gt;         assertEquals( 12.3d, 12.4d );<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; I set break points in the various methods of Assert and confirmed that<br/>\n&gt;  assertEquals( Object, Object ) was invoked with two Double<br/>\n&gt; parameters. Now Object.equals would always fail because these<br/>\n&gt; parameters are not at the same address in memory.  According to the<br/>\n&gt; documentation for 1.5 the Double.equals method creates long&#39;s from <br/>\n </span></blockquote>the<br/>\n<blockquote><span title=\"ireply\"> &gt; IEEE specified bits for the double value and compares their values for<br/>\n&gt; equality.  This was in fact the behavior I saw during my tests.<br/>\n&gt; <br/>\n&gt; This may not help explain the other behavior Nattapong saw, but at<br/>\n&gt; least the behavior I saw conforms to the Principle of least <br/>\n </span></blockquote>astonishment.<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; David Putnam<br/>\n&gt; <br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;nat_tul&quot; &lt;natta@&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;Roger Glover&quot; &lt;glover_roger@&gt; <br/>\n&gt; &gt; wrote:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;J. B. Rainsberger&quot; <br/>\n </span></blockquote>&lt;jbrains762@&gt; <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; On 2008-06-06, at 08:45 , Roger Glover wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Nattapong Sirilappanich <br/>\n </span></blockquote>&lt;natta@&gt;<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; &gt; &gt; &gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; Actually, my point here is i&#39;m expecting<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; org.junit.Assert.assertEquals(Object obj1, Object obj2) to<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; call its obj1.equals(obj2) or something like this. However,<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; the outcome surprise me. Assertion success but<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; obj1.equals(obj2) return false.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; What&#39;s going on inside assertEquals() operation? Is this<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; what it&#39;s suppose to be?<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; As I stated, albeit not very clearly the first time (Curse you<br/>\n&gt; &gt; &gt; &gt; &gt; &quot;Rich Text Editor(Beta)&quot;!), I suspect that the culprit here is<br/>\n&gt; &gt; &gt; &gt; &gt; that &quot;Assert.assertEquals(Object, Object)&quot; is not being called<br/>\n&gt; &gt; &gt; &gt; &gt; at all. This is borne out by the fact that a J2SE 1.4 compiler<br/>\n&gt; &gt; &gt; &gt; &gt; and a JavaSE 1.5 compiler treat the same call completely<br/>\n&gt; &gt; &gt; &gt; &gt; differently.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; I *SUSPECT* that the 1.5 compiler is unboxing the Double<br/>\n&gt; &gt; &gt; &gt; &gt; objects into primitive longs and that the method that is<br/>\n&gt; &gt; &gt; &gt; &gt; *ACTUALLY* called is &quot;Assert.assertEquals(long,long)&quot;. This<br/>\n&gt; &gt; &gt; &gt; &gt; accounts for the behavior since the integer parts of your two<br/>\n&gt; &gt; &gt; &gt; &gt; numbers are the same. &quot;Assert.assertEquals(long,long)&quot; <br/>\n </span></blockquote>yields<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; &gt; &gt; &gt; successful after the Doubles are converted (truncated) to<br/>\n&gt; &gt; &gt; &gt; &gt; longs.<br/>\n&gt; &gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; That&#39;s almost certainly what is happening, and good deduction.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Thank you very much!<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; Now we ask the question, what&#39;s the better answer? Defeat <br/>\n </span></blockquote>the  <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; &gt; &gt; purpose of assertEquals(Object,Object) or letting <br/>\n </span></blockquote>programmers  <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; &gt; &gt; hoist themselves on their own petards?<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; JUnit could detect this situation, but if it did, I&#39;d prefer  <br/>\n&gt; &gt; &gt; &gt; it to warn the programmer rather than fix the problem, <br/>\n </span></blockquote>because  <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; &gt; &gt; I want to encourage programmers to improve their design:  <br/>\n&gt; &gt; &gt; &gt; either the test should compare the Double values with a  <br/>\n&gt; &gt; &gt; &gt; tolerance, or perhaps the production code ought not to use<br/>\n&gt; &gt; &gt; &gt; Doubles.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Well if that is the best solution (and I must say that I like it<br/>\n&gt; &gt; &gt; better than the status quo) then the easiest way to do that would<br/>\n&gt; &gt; &gt; probably be to create a bogus &quot;Assert.assertEquals<br/>\n </span></blockquote>(double,double)&quot; <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; that:<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; A) is deprecated (Yes, I mean it. A new method that is <br/>\n </span></blockquote>deprecated and<br/>\n<blockquote><span title=\"qreply\"> &gt; &gt; &gt; with no intent ever to remove it). The javadoc should point to the<br/>\n&gt; &gt; &gt; 3-double overload as the preferred alternative and explain why.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; *AND*<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; B) is implemented to unconditionally throw<br/>\n&gt; &gt; &gt; &quot;UnsupportedOperationException&quot; (or similar unchecked standard<br/>\n&gt; &gt; &gt; exception) with a message that indicates that you should use the<br/>\n&gt; &gt; &gt; 3-double overload instead.<br/>\n&gt; &gt; I&#39;m agree with this choice. Since it&#39;s not preferred to be used with <br/>\n&gt; &gt; Double so some Exception should be threw.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; -- Roger Glover<br/>\n&gt; &gt; &gt;    Object Partners, Inc.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; ------------------------------------<br/>\n&gt; &gt; Nattapong Sirilappanich<br/>\n&gt; &gt; Engineer, National Language Development - GCoC & TSC Thailand<br/>\n&gt; &gt; Software Group, IBM Thailand Co., Ltd.<br/>\n&gt; &gt; e-mail: natta@<br/>\n&gt; &gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 20577, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1213582672", 
    "canDelete": false, 
    "nextInTopic": 20582, 
    "prevInTopic": 20572, 
    "headers": {
        "inReplyToHeader": "PGcydTBwYStmdmdzQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGczNGlnZytybjQ4QGVHcm91cHMuY29tPg=="
    }
}