{
    "numMessagesInTopic": 32, 
    "nextInTime": 16246, 
    "senderId": "lDNWX90pmbudkUJKiPV-j7wUNsaGbT_MXyEOjqsDt271XoXWeqAfSBekp2rKG85PDAqyBtB36z9H_jG5kar1aV4A9GG3ReDuzwd_8pf7KqXOTaFG0g", 
    "systemMessage": false, 
    "subject": "Re: [junit] JUnit Anti-patterns", 
    "from": "jason r tibbetts &lt;tibbettj@...&gt;", 
    "authorName": "jason r tibbetts", 
    "msgSnippet": "... You re right in stating that for unexpected exceptions, it s foolish and overly verbose to use a try/catch where the catch clause calls fail. It s", 
    "msgId": 16245, 
    "profile": "tibbettj_at_verdi_sra_com", 
    "topicId": 16150, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 224061497, 
    "messageBody": "<div id=\"ygrps-yiv-693382723\">Joe Schmetzer wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; On Fri, 2006-02-24 at 11:09 -0500, jason r tibbetts wrote:<br/>\n&gt; <br/>\n&gt;&gt;Joe Schmetzer wrote:<br/>\n&gt;&gt;<br/>\n&gt;&gt;&gt;&quot;CÃƒÂ©dric Beust Ã¢â„¢&quot; &quot; &lt;cbeust@...&gt; wrote:<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;&gt;Joe Schmetzer wrote:<br/>\n&gt;&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;&gt;&gt;I&#39;ve just updated the JUnit Anti-patterns page I maintain at<br/>\n&gt;&gt;&gt;&gt;&gt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.exubero.com/junit/antipatterns.html.\">http://www.exubero.com/junit/antipatterns.html.</a> I&#39;d be interested in<br/>\n&gt;&gt;&gt;&gt;&gt;any feedback, if people want to suggest additions or improvements.<br/>\n&gt;&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;&gt;Also, it seems to me your recommended pattern for code that must<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;throw an<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;&gt;exception (&quot;don&#39;t catch it and declare the exception in the throws<br/>\n&gt;&gt;&gt;&gt;statement&quot;) goes against common practice.  Plus, it will cause JUnit to<br/>\n&gt;&gt;&gt;&gt;report an Error instead of a Failure, although this distinction is<br/>\n&gt;&gt;&gt;&gt;thankfully going away with JUnit4.<br/>\n&gt;&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;&gt;A more common way to address this problem is to catch the exception<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;and do a fail().<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;Hi CÃ©dric,<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;I would argue that explicitly calling fail is less useful than<br/>\n&gt;&gt;&gt;propagating the exception outside of the test method, mainly because<br/>\n&gt;&gt;&gt;the stack trace is lost. I&#39;ve been caught a number of times myself<br/>\n&gt;&gt;&gt;when a test failed because of an unexpected exception, but it was<br/>\n&gt;&gt;&gt;non-trivial to track down the line that caused the exception. The<br/>\n&gt;&gt;&gt;stack trace will show this information directly, any good JUnit test<br/>\n&gt;&gt;&gt;runners will display the stack trace. IDEs will even take you to the<br/>\n&gt;&gt;&gt;line of code, as well.<br/>\n&gt;&gt;<br/>\n&gt;&gt;I agree completely with Cedric. Failures and errors are intended to be <br/>\n&gt;&gt;very different beasts, and this difference is highlighted in various <br/>\n&gt;&gt;test result reporting tools (e.g. Maven&#39;s test result page, <br/>\n&gt;&gt;CruiseControl&#39;s listing, etc.). Failures indicate a problem with the <br/>\n&gt;&gt;class under test; errors indicate a problem with the test itself. That <br/>\n&gt;&gt;makes it a lot easier to figure out what needs to be fixed.<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Hmmmm... I understand the distinction, but personally I find that<br/>\n&gt; sticking to this rule in the case of unexpected exceptions makes it<br/>\n&gt; *harder* to figure out what needs to be fixed.<br/>\n&gt; <br/>\n&gt; In the case of unexpected exceptions, we&#39;re not really interested in the<br/>\n&gt; fact that a piece of code *might* throw an exception, but rather that a<br/>\n&gt; call produces an expected result. For example:<br/>\n&gt; <br/>\n&gt; public void testCalculation() throws CalculationException {<br/>\n&gt;     processer.calculate();<br/>\n&gt;     assertEquals(&quot;Calculation wrong&quot;, 42, processor.getResult());<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; In this example, I&#39;m not really interested that the calculate() method<br/>\n&gt; might throw an exception, I&#39;m only testing the result for this test<br/>\n&gt; case. However, if something does go wrong, JUnit will very elegantly<br/>\n&gt; handle the exception and report the exact location of the source of the<br/>\n&gt; exception. CruiseControl will display the entire stack trace. Eclipse<br/>\n&gt; will even let me click on the JUnit view to bring up the exact source<br/>\n&gt; code (I imagine other IDEs are the same?). This is exactly what I want,<br/>\n&gt; as it helps me get to the source of the problem without any extra<br/>\n&gt; effort.<br/>\n&gt; <br/>\n&gt; However, if I insist on catching the exception just so I can fail the<br/>\n&gt; unit test, the test becomes twice as complex, and I no longer get the<br/>\n&gt; stack trace unless I explicitly log it somewhere. The above example now<br/>\n&gt; becomes:<br/>\n&gt; <br/>\n&gt; public void testCalculation() {<br/>\n&gt;     try {<br/>\n&gt;         processer.calculate();<br/>\n&gt;         assertEquals(&quot;Calculation wrong&quot;, 42, processor.getResult());<br/>\n&gt;     }<br/>\n&gt;     catch(CalculationException ex) {<br/>\n&gt;         fail(&quot;Calculation caused exception&quot;);<br/>\n&gt;     }<br/>\n&gt; }<br/>\n<br/>\n </span></blockquote>You&#39;re right in stating that for unexpected exceptions, it&#39;s foolish and <br/>\noverly verbose to use a try/catch where the catch clause calls fail. <br/>\nIt&#39;s pointless. My original comment was that the try { fail(); } catch { <br/>\npass(); } construct is used only for testing /expected/ exceptions:<br/>\n<br/>\n   public void test_ArrayList_negativeSize() {<br/>\n     try {<br/>\n       new java.util.ArrayList(-99);<br/>\n       fail(&quot;Should reject a negative initial capacity&quot;);<br/>\n     } catch (IllegalArgumentException iax) {<br/>\n       pass();  // i.e. assertTrue(true)<br/>\n     }<br/>\n   }</div>", 
    "prevInTime": 16244, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1141312889", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 16241, 
    "headers": {
        "inReplyToHeader": "PDExNDA4MTU3MDQuMTI2NzMuMTEyLmNhbWVsQHNpcml1cz4=", 
        "messageIdInHeader": "PDQ0MDcwRDc5LjgwMjA2MDJAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "referencesHeader": "PGR0aWc2bSs1ODdlQGVHcm91cHMuY29tPiAgPDQzRkYyRkJFLjYwMDA3MDJAdmVyZGkuaWlzZC5zcmEuY29tPiA8MTE0MDgxNTcwNC4xMjY3My4xMTIuY2FtZWxAc2lyaXVzPg=="
    }
}