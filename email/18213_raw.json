{
    "numMessagesInTopic": 45, 
    "nextInTime": 18214, 
    "senderId": "rB7DSNG0fyA9SFK6sr8fSZFG8YKBgiBk_3UHW1Pwx-jApJ2VoDn9xXp-dAwd209HkEK7i5D_RLSc8cI6npS4jI8OrLjp0Ou87SlASrhZ", 
    "systemMessage": false, 
    "subject": "Can anyone help me see how to usefully work with JUnit in a big project, please?", 
    "from": "&quot;Tracey Annison&quot; &lt;TAnnison@...&gt;", 
    "authorName": "Tracey Annison", 
    "msgSnippet": "Hiya! This is an interesting list, full of lots of helpful technical tips - great stuff. I ve been having a browse around, but I don t seem to see anyone with ", 
    "msgId": 18213, 
    "rawEmail": "Return-Path: &lt;TAnnison@...&gt;\r\nReceived: (qmail 1721 invoked by uid 7800); 25 Oct 2006 13:13:56 -0000\r\nX-Sender: TAnnison@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 47093 invoked from network); 25 Oct 2006 10:12:49 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m36.grp.scd.yahoo.com with QMQP; 25 Oct 2006 10:12:49 -0000\r\nReceived: from unknown (HELO n20c.bullet.sc5.yahoo.com) (66.163.187.211)\n  by mta1.grp.scd.yahoo.com with SMTP; 25 Oct 2006 10:12:49 -0000\r\nReceived: from [66.163.187.121] by n20.bullet.sc5.yahoo.com with NNFMP; 25 Oct 2006 10:12:45 -0000\r\nReceived: from [66.218.66.59] by t2.bullet.sc5.yahoo.com with NNFMP; 25 Oct 2006 10:12:45 -0000\r\nReceived: from [66.218.66.80] by t8.bullet.scd.yahoo.com with NNFMP; 25 Oct 2006 10:12:45 -0000\r\nDate: Wed, 25 Oct 2006 10:12:45 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;ehndat+q3cc@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: &quot;Tracey Annison&quot; &lt;TAnnison@...&gt;\r\nSubject: Can anyone help me see how to usefully work with JUnit in a big project, please?\r\nX-Yahoo-Group-Post: member; u=132563212; y=33Hr9GJgNbWV7s3V70v_aKN03xlTrfAJOh3qT0rSPdp0I6bd8Lonjw\r\nX-Yahoo-Profile: traceyannison\r\nX-eGroups-Approved-By: ddoss_2006 &lt;didoss@...&gt; via email; 25 Oct 2006 13:13:56 -0000\r\n\r\nHiya! This is an interesting list, full of lots of helpful technical \ntips =\r\n- great stuff. \n\nI&#39;ve been having a browse around, but I don&#39;t seem to see =\r\nanyone with \nthe same questions as me... which is probably a sign that I&#39;m =\r\non the \nwrong track somehow! :) \nI know this is a long post, but I can&#39;t se=\r\ne how to explain it any \nshorter - sorry. \n\n\nI&#39;m pretty new to programming,=\r\n and Java terminology isn&#39;t my strong \npoint, so my apologies if I mis-word=\r\n things badly. I&#39;m working on a \nfairly large project involving providing w=\r\neb services via SOAP and \nGUI access via JSP&#39;s to data entities, allowing d=\r\natabase input and \nupdate on many tables. \nHere&#39;s how I (roughly) understan=\r\nd it, for a given &quot;Thing&quot; entity : \n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\r\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\r\n=3D=3D=3D=3D=3D\n * We have a concrete Domain object for our entity, (Concre=\r\nteThing) \nwith an interface above it (Thing). This has all the various \npro=\r\nperties (Name, Number, etc - some entities have 150 or more) and \ngetters &=\r\n setters for them that do basic validation, and use a DTO to \nget & set the=\r\n actual data. The object also has validation methods \nthat cross-check the =\r\nvalues against various other entities, using \ntheir DAO&#39;s.\n * Each domain o=\r\nbject uses a persistence DTO class (ThingDTO) which \nholds all the various =\r\nproperties for the Thing, and has simple \ngetters & setters for them. The C=\r\noncreteThing class calls these in \nit&#39;s getters & setters. \n * Each data en=\r\ntity also has a ThingDAO class, with methods like \nCreateThing, SaveThing, =\r\nDeleteThing, etc to actually handle the \nreading & writing of the data to t=\r\nhe database tables, with \nstandardised interfaces to allow easy access. It =\r\nuses SQLMapClient \nand SQL scripts to do this, passing around the ThingDTO,=\r\n and also \nuses other DAO&#39;s when it creates a new ConcreteThing. The ThingD=\r\nAO is \nitself used by other Domain objects, to test validation, etc. \n * Fo=\r\nr each Web Service, we have a ThingService class that offers \nmethods to th=\r\ne user, like GetThing, DeleteThing, GetAllThings, etc, \nusing the ThingDAO =\r\nto do the work. It also uses a simple \nSOAPBeanThing that is used to return=\r\n values to them. The \nSOAPBeanThing holds the Thing&#39;s properties, in a simp=\r\nlified format \nsuitable for sending via SOAP. (ie a Date rather than a Year=\r\nMonthDay, \netc) Using Axis lets us make this easily available to the outsid=\r\ne \nworld.\n * We also have a MVC layer, with FormControllers, Validators, \nA=\r\nctions, etc, and JSP&#39;s & such to go along with it, also using the \nThingDAO=\r\n, but it&#39;s all much of a muchness.\n * We use Spring to tie all this togethe=\r\nr, injecting the various \nitems where they&#39;re needed, except for the concre=\r\nte classes, where \nthey&#39;re sent as part of the constructor. And we have all=\r\n sorts of \nother cool tools, like Subversion and Ant and CruiseControl for =\r\n\nautomatic testing and all that, but I don&#39;t think it&#39;s relevant...\n=3D=3D=\r\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\r\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D\nSo - this is all cool! Lot=\r\ns of layers, but it all works, and each bit \ndoes a nice understandable chu=\r\nnk of work, and they talk to each other \nfine. Plus we have some tools to h=\r\nelp us generate the repetitive \nstuff, so that speeds it up a bit.\n\nSo why =\r\nhave I wibbled on about all this? Because we&#39;re using JUnit \nand JMock, too=\r\n! And I&#39;m having trouble with it. Technically, it works \nfine, but it takes=\r\n ages, is really fragile and doesn&#39;t seem to give \nme much useful. \nI&#39;m sur=\r\ne it&#39;s because I&#39;m doing it all wrong somehow...\n\n\n\nThe testing code is muc=\r\nh, much larger than the actual code, quite \ncomplex, and doesn&#39;t seem to sh=\r\now up a lot of issues for the time & \neffort it takes to write. Just to get=\r\n one of these objects to test \ntakes a huge amount of setup code, making & =\r\ncalling in lots of Mock \nobjects (typically DAO&#39;s) and specifying what they=\r\n should do (with \nstubs and expects), and so on. To keep it all standardise=\r\nd and down \nto a minimum, I typically define them all at the start, and mak=\r\ne a \nsetUp method to get them built (though I&#39;m told this isn&#39;t a good \nide=\r\na by some) but it&#39;s still very large. \nIn some cases, the setup for a test =\r\ncan be about 200 lines or more at \nthe start, and a setUp method of 400 lin=\r\nes or more as well. To test \none Service (under 2,000 lines of code for 7 m=\r\nethods using 80 \nproperties) that simply offers a standard set of \nGet/Crea=\r\nte/Update/Delete methods on an entity, the tests run over 5 \nfiles to a tot=\r\nal length of 30,000 lines! In order to get test \ncoverage above 80%, there&#39;=\r\ns a large amount of test code that simply \nchecks that the gets/sets work..=\r\n. which most of the time they can&#39;t \nhelp but do anyway. \n\nTests overall ar=\r\ne 5 to 10 times larger than the code they test, and \nincredibly fragile. Th=\r\ne simplest change in the code of one class, \noften resulting in a tiny chan=\r\nge in operation that causes no actual \nissues, breaks large numbers of test=\r\ns all over the place. \nI know that the idea is to test a single class in is=\r\nolation, but I \ndon&#39;t see how to do that, when they need each other to do t=\r\nheir work. \nFor example, I can&#39;t check that the policy number on my new cla=\r\nim is \nvalid without using the policy DAO to check it. I can&#39;t get a new \nC=\r\nlaim without using the getClaim method on my DAO. So I have to \neither set =\r\nit up (almost impossible) or Mock it and specify exactly \nall the methods I=\r\n&#39;ll use and all their parameters and their \nresponses, and so on.\nChanging =\r\nthe type of some commonly used properties in several \nentities from Integer=\r\n to BigDecimal took my colleague a fortnight, \nand a big chunk of this time=\r\n was fixing JUnits. \n\nIn the last year of my work, JUnit has shown up a tot=\r\nal of 5 actual \nbugs, all bar one of which would have come out immediately =\r\nin \nfunctional testing, yet has taken maybe a third of my time. \nI&#39;ve just =\r\ngotta be doing it wrong... but I don&#39;t know how to do it \nright!\n\n\n\nThe oth=\r\ner problem for me is that I can&#39;t get my head around how to do \nTDD with th=\r\nis sort of structure. \n\nI can&#39;t write a test without having all the objects=\r\n I need, and \nknowing exactly what parameters I need in the new methods, an=\r\nd \nprecisely what methods with what parameters will get called on the \nothe=\r\nr objects, and so on & so forth. Which won&#39;t even compile until \nit&#39;s all t=\r\nhere & working. And even then, it&#39;s likely to go through \nseveral iteration=\r\ns of changes (oh, no, I need to check this thing as \nwell, using this other=\r\n DAO, and now I need to work this out as well, \nusing that data from over t=\r\nhere, and so on), so that even if I could \ndo it, I&#39;d end up writing this h=\r\nuge thing four times over. \nI can understand it more from a functional view=\r\npoint than anything \nelse - &quot;this is the result I want, have I got it yet?&quot;=\r\n. But to set up \na JUnit/JMock test doesn&#39;t seem to me to really ask that -=\r\n it asks \nmore about how (in detail) I got to that result. \n\nI&#39;m completely=\r\n bewildered by how anyone writing anything larger than \n100 lines or so get=\r\ns a benefit from doing this. You clearly ARE, but \nI just don&#39;t understand =\r\nhow... I must be missing something!\n\n\n\nSo, given the sort of work we&#39;re doi=\r\nng, and the kind of structure \nI&#39;ve tried to describe, can anyone out there=\r\n tell me how I&#39;ve gone so \nfar off track here? Or give me some real example=\r\ns of quick, useful \ntest classes on stuff like this? \nI just KNOW that I mu=\r\nst be doing it all wrong, but I can&#39;t seem to \nfind any real-world examples=\r\n of how to do it right on this scale. Any \nhelp would be gratefully recieve=\r\nd! \n\n\nThanks VERY much,\nCheers, \nTracey\n\n\n\n", 
    "profile": "traceyannison", 
    "topicId": 18213, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 132563212, 
    "prevInTime": 18212, 
    "contentTrasformed": false, 
    "postDate": "1161771165", 
    "canDelete": false, 
    "nextInTopic": 18216, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGVobmRhdCtxM2NjQGVHcm91cHMuY29tPg=="
    }
}