{
    "numMessagesInTopic": 10, 
    "nextInTime": 24536, 
    "senderId": "I3Qhtc0NHxX_wd9I3OZhgsj1W0cc9z9-N9Cv9QghDAQEbEV08RuMyswSMuuj3LYS5QS6FkRfNmd35LM4eJWOaDVC3xe9L74M_VXapYBr", 
    "systemMessage": false, 
    "subject": "Re: [junit] JUnit-BDD", 
    "from": "Lovro Pandzic &lt;lovro.pandzic@...&gt;", 
    "authorName": "Lovro Pandzic", 
    "msgSnippet": "I agree that lambdas can bring a lot of flexibility and usability to the JUnit (rules, runners). But what about exception testing? All 3 currently popular ways", 
    "msgId": 24535, 
    "topicId": 24527, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 561715368, 
    "messageBody": "<div id=\"ygrps-yiv-1502261446\"><div dir=\"ltr\"><div><div><div><div><div><div><div>I agree that lambdas can bring a lot of flexibility and usability to the JUnit (rules, runners).<br><br></div>But what about exception testing?<br><br></div>All 3 currently popular ways mentioned in the <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit/issues/722\">https://github.com/junit-team/junit/issues/722</a> have downsides:<br>\n</div>1. @Test only allows you to test exception type and provides no way of narrowing the scope of code that should throw an exception.<br></div>2. With ExpectedException you must declare a Rule and define exception assertion before (and preferably just before) line of code that throws the exception.<br>\n</div>3. try-catch idiom is verbose and complicated.<br><br></div><div>With lambdas the following is possible (from <a rel=\"nofollow\" target=\"_blank\" href=\"http://github.com/lpandzic/junit-bdd#ThrownExceptionsAssertion\">http://github.com/lpandzic/junit-bdd#ThrownExceptionsAssertion</a>):<br>\n<blockquote><span title=\"qreply\"> <blockquote style=\"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex;\" class=\"ygrps-yiv-1502261446gmail_quote\"><pre><span class=\"ygrps-yiv-1502261446\">when</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">deathStar</span><span class=\"ygrps-yiv-1502261446\">.</span><span class=\"ygrps-yiv-1502261446\">fireAt</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">alderaan</span><span class=\"ygrps-yiv-1502261446\">));</span>\n<span class=\"ygrps-yiv-1502261446\">when</span><span class=\"ygrps-yiv-1502261446\">(()</span> <span class=\"ygrps-yiv-1502261446\">-&gt;</span> <span class=\"ygrps-yiv-1502261446\">deathStar</span><span class=\"ygrps-yiv-1502261446\">.</span><span class=\"ygrps-yiv-1502261446\">fireAt</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">alderaan</span><span class=\"ygrps-yiv-1502261446\">)).</span><span class=\"ygrps-yiv-1502261446\">then</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">thrownException</span> <span class=\"ygrps-yiv-1502261446\">-&gt;</span> <span class=\"ygrps-yiv-1502261446\">{</span>\n    <span class=\"ygrps-yiv-1502261446\">assertThat</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">thrownException</span><span class=\"ygrps-yiv-1502261446\">,</span> <span class=\"ygrps-yiv-1502261446\">is</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">instanceOf</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">TargetAlreadyDestroyedException</span><span class=\"ygrps-yiv-1502261446\">.</span><span class=\"ygrps-yiv-1502261446\">class</span><span class=\"ygrps-yiv-1502261446\">)));</span>\n    <span class=\"ygrps-yiv-1502261446\">assertThat</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">thrownException</span><span class=\"ygrps-yiv-1502261446\">.</span><span class=\"ygrps-yiv-1502261446\">getMessage</span><span class=\"ygrps-yiv-1502261446\">(),</span> <span class=\"ygrps-yiv-1502261446\">is</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">equalTo</span><span class=\"ygrps-yiv-1502261446\">(</span><span class=\"ygrps-yiv-1502261446\">&quot;Cannot fire at a destroyed &quot;</span> <span class=\"ygrps-yiv-1502261446\">+</span> <span class=\"ygrps-yiv-1502261446\">alderaan</span><span class=\"ygrps-yiv-1502261446\">)));</span>\n<span class=\"ygrps-yiv-1502261446\">});</span><span class=\"ygrps-yiv-1502261446\"></span></pre></blockquote></span></blockquote></div><div>It allows you to specify the exact line that should throw an exception and doesn&#39;t force you to define the assertion before it.<br></div><div>\n<br></div><div>One problem that applies to all 3 currently supported ways of exception testing in JUnit:<br></div></div>- there is no compilation error if you are testing for checked exception that the tested code cannot throw.<br>\n<br>For example lets say we have a class <br><br>class AClass {<br>        void aMethod() throws CheckedException {};<br>}<br><div><div><div><div><div><div><div><div><div><div><div><div><div class=\"ygrps-yiv-1502261446gmail_extra\"><br></div>\n<div class=\"ygrps-yiv-1502261446gmail_extra\">where CheckedException extends Exception.<br></div><div class=\"ygrps-yiv-1502261446gmail_extra\">If we write tests which test that aMethod throws a CheckedException and later on we decide to change signature of aMethod to void aMethod() throws CheckedException2 where CheckedException2 extends Exception then we will get no compile time errors for our tests but those tests will surely fail.<br>\n<br></div><div class=\"ygrps-yiv-1502261446gmail_extra\">JUnit-Bdd provides support for checked exception testing (<a rel=\"nofollow\" target=\"_blank\" href=\"http://github.com/lpandzic/junit-bdd#ThrownCheckedExceptionsAssertion\">http://github.com/lpandzic/junit-bdd#ThrownCheckedExceptionsAssertion</a>).<br>\n</div><div class=\"ygrps-yiv-1502261446gmail_extra\"><br></div><div class=\"ygrps-yiv-1502261446gmail_extra\"><br><div class=\"ygrps-yiv-1502261446gmail_quote\">On Tue, Apr 22, 2014 at 7:19 PM, Colin Vipurs <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:zodiaczx6@...\">zodiaczx6@...</a>&gt;</span> wrote:<br>\n<blockquote class=\"ygrps-yiv-1502261446gmail_quote\" style=\"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p></p><div dir=\"ltr\">It avoids the duplication between test description and method name as they become one.  Frameworks that support it (pretty much everything in the Scala and JavaScript world) allow much more flexibility for test descriptions, something I&#39;d consider a big win</div>\n\n<div class=\"ygrps-yiv-1502261446gmail_extra\"><br><br><div class=\"ygrps-yiv-1502261446gmail_quote\">On Sat, Apr 19, 2014 at 6:56 PM, Cédric Beust ♔ <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cedric@...\">cedric@...</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-1502261446gmail_quote\" style=\"border-left:1px solid rgb(204,204,204);\">\n\n\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div>\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p></p><div dir=\"ltr\"><div><div><p>On Fri, Apr 18, 2014 at 10:41 AM, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:saff@...\">saff@...</a>&gt; wrote:</p>\n\n\n<p></p><div><p></p><blockquote class=\"ygrps-yiv-1502261446gmail_quote\" style=\"border-left:1px solid rgb(204,204,204);\">\n\n\n\n\n\n\n        \n\n\n\n\n<div>\n\n\n\n\n\n<br><br>\n\n\n\n\n<div dir=\"ltr\">I think that Java 8 lambdas open up a lot of opportunities to accomplish JUnit&#39;s goals in completely different ways.  I&#39;ve been exploring with one approach myself on and off.  For one thing, to date, JUnit has relied on specially-named or annotated methods to accomplish the goal of succinctly associating a name with a block of code.  In Java 8, one can just do:<div>\n\n\n\n\n\n<br></div><div>addTest(&quot;Some test name&quot;, () -&gt; {</div><div>   // some code here</div><div>})</div></div></div></blockquote><p></p></div><p></p>\n</div><p>I don’t see a lot of added value for this over</p>\n<pre style=\"font-family:Consolas, Inconsolata, Courier, monospace;font-size:1em;margin:1.2em 0px;\"><code style=\"font-size:0.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px 0.15em;background-color:rgb(248,248,248);white-space:pre-wrap;overflow:auto;padding:0.5em;\"><span>@Test</span>(description = <span style=\"color:rgb(221,17,68);\">&quot;Some test name&quot;</span>)\n<span style=\"color:rgb(51,51,51);font-weight:bold;\">public</span> <span style=\"color:rgb(51,51,51);font-weight:bold;\">void</span> shouldDoSomething) { ... }\n</code></pre>\n<p>Actually, you lose a lot of expressivity that annotations give you for free, such as adding configuration parameters to your test (e.g. specifying concurrency settings, inheriting annotations from a base class, etc…).</p>\n\n\n\n\n<p>I’ve tried to find ways to leverage lambdas as well for testing and I’ve come up completely empty so far.</p>\n</div><div class=\"ygrps-yiv-1502261446gmail_extra\">-- </div><div class=\"ygrps-yiv-1502261446gmail_extra\">Cedric</div><div class=\"ygrps-yiv-1502261446gmail_extra\"><br></div></div>\n<p></p>\n\n    </div>\n     \n\n    \n    <div style=\"color:rgb(255,255,255);\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br><br clear=\"all\"><div><br></div>-- <br>Maybe she awoke to see the roommate&#39;s boyfriend swinging from the chandelier wearing a boar&#39;s head.<br><br>Something which you, I, and everyone else would call &quot;Tuesday&quot;, of course.\n</div>\n<p></p>\n\n    </div>\n     \n\n    \n    <div style=\"color:rgb(255,255,255);min-height:0px;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div>\n</div>", 
    "prevInTime": 24534, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1398195975", 
    "canDelete": false, 
    "nextInTopic": 24536, 
    "prevInTopic": 24534, 
    "headers": {
        "inReplyToHeader": "PENBS2k0MjcyeEh4YUNfPTIzRk51NDljeVhwT3NtNG90MHVacnFYK29lT1c2ZUVhPTdjUUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBUG9lN3RWK21Tc1RXM1pOMVdnd0J3VXE4NXRrRWF4VWpnOEdWQ1U9c2ErK1l0cHNWZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBUG9lN3RVSEhoVmdUYlQ4UWtQQzNTUjZ6Z2djZkJuOWQ5TU9KM3JCT1RuYlNSX0FLUUBtYWlsLmdtYWlsLmNvbT4JPENBTHJ3LVB6NXdxSC14dmtjZStFUXBjcnNIQk9FaWYreFJDVz1KRHp6cUd1TnhrTC03Z0BtYWlsLmdtYWlsLmNvbT4JPENBT3BoZ0pENGp2ZktyaDFnX1lFTWNydTNIaT14dDNCcnl1VHl0VGtkWCs0VF9QMHdjQUBtYWlsLmdtYWlsLmNvbT4JPENBS2k0MjcyeEh4YUNfPTIzRk51NDljeVhwT3NtNG90MHVacnFYK29lT1c2ZUVhPTdjUUBtYWlsLmdtYWlsLmNvbT4="
    }
}