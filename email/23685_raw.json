{
    "numMessagesInTopic": 11, 
    "nextInTime": 23686, 
    "senderId": "AmU7lCe_DRZT0WtvI4H9wn7LMyuHWD81YGACHeyjpgGec4ZHcZBfTPW4g9rXxzNLu5Gxf1D4iFWJHrelFZ4ffUE1LvomgEH7-9eKrtfmMuHLh0w", 
    "systemMessage": false, 
    "subject": "Re: [junit] Alphabetizing test method run order?", 
    "from": "Jaroslav Tulach &lt;jaroslav.tulach@...&gt;", 
    "authorName": "Jaroslav Tulach", 
    "msgSnippet": "Very nice observations Kevin. The first thing that I needed to learn was how to enforce the same execution order as on the test machines, when Jesse changed", 
    "msgId": 23685, 
    "rawEmail": "Return-Path: &lt;jaroslav.tulach@...&gt;\r\nX-Sender: jaroslav.tulach@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 4256 invoked from network); 21 Sep 2011 19:17:40 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m15.grp.sp2.yahoo.com with QMQP; 21 Sep 2011 19:17:40 -0000\r\nX-Received: from unknown (HELO acsinet15.oracle.com) (141.146.126.227)\n  by mta3.grp.sp2.yahoo.com with SMTP; 21 Sep 2011 19:17:40 -0000\r\nX-Received: from rtcsinet21.oracle.com (rtcsinet21.oracle.com [66.248.204.29])\n\tby acsinet15.oracle.com (Switch-3.4.4/Switch-3.4.4) with ESMTP id p8LJHaPN012304\n\t(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)\n\tfor &lt;junit@yahoogroups.com&gt;; Wed, 21 Sep 2011 19:17:38 GMT\r\nX-Received: from acsmt357.oracle.com (acsmt357.oracle.com [141.146.40.157])\n\tby rtcsinet21.oracle.com (8.14.4+Sun/8.14.4) with ESMTP id p8LJHZSL007429\n\t(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)\n\tfor &lt;junit@yahoogroups.com&gt;; Wed, 21 Sep 2011 19:17:35 GMT\r\nX-Received: from abhmt109.oracle.com (abhmt109.oracle.com [141.146.116.61])\n\tby acsmt357.oracle.com (8.12.11.20060308/8.12.11) with ESMTP id p8LJHU8I007441\n\tfor &lt;junit@yahoogroups.com&gt;; Wed, 21 Sep 2011 14:17:30 -0500\r\nX-Received: from logouticek.localnet (/10.175.27.237)\n\tby default (Oracle Beehive Gateway v4.0)\n\twith ESMTP ; Wed, 21 Sep 2011 12:17:29 -0700\r\nOrganization: Oracle\r\nTo: junit@yahoogroups.com\r\nDate: Wed, 21 Sep 2011 21:17:26 +0200\r\nUser-Agent: KMail/1.13.6 (Linux/2.6.38-11-generic-pae; KDE/4.6.2; i686; ; )\r\nReferences: &lt;CACj8BuMu+VDrSxmF5ArRf+Ct+Jg9BjBH4vMALk1hxEvW1r8fGw@...&gt; &lt;CABHM76Wkypn2HA4rKYsFRRMV-aH-QVDysU24H9Uy6rP26A_TEQ@...&gt; &lt;CAA3E+eW8k1HBAaj--t57ZQ4Hy-HZbJx49yE83MFDyxEg_TmAwQ@...&gt;\r\nIn-Reply-To: &lt;CAA3E+eW8k1HBAaj--t57ZQ4Hy-HZbJx49yE83MFDyxEg_TmAwQ@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: Text/Plain;\n  charset=&quot;utf-8&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nMessage-Id: &lt;201109212117.26715.jaroslav.tulach@...&gt;\r\nX-Source-IP: rtcsinet21.oracle.com [66.248.204.29]\r\nX-CT-RefId: str=0001.0A090207.4E7A3853.009E,ss=1,re=0.000,fgs=0\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Jaroslav Tulach &lt;jaroslav.tulach@...&gt;\r\nSubject: Re: [junit] Alphabetizing test method run order?\r\nX-Yahoo-Group-Post: member; u=473773717; y=vQjzlivyuPIjXnl24-4JiqschAWCI1b5v0yMNuy1B1JqLq-0SA\r\nX-Yahoo-Profile: jaroslavtulach\r\n\r\nVery nice observations Kevin.\n\nThe first thing that I needed to learn was h=\r\now to enforce the same execution \norder as on the test machines, when Jesse=\r\n changed the NetBeans tests to run in \na-z ordering. Indeed this required A=\r\nnt build script specific knowledge (in our \ncase). I agree with you, that t=\r\nhis is a kind of knowledge JUnit project does \nnot want to impose on its us=\r\ners.\n\nYour idea of using hashCode is an excellent one. It is going to be st=\r\nable on \nthe same JDK and it is random enough for anyone to depend on the o=\r\nrder. This \nmight balance Kent&#39;s rationalistic wish for tests to have no de=\r\npendencies \namong each other and pragmatic need of reproducibility in case =\r\nthey \naccidentally have.\n\nLet&#39;s base the (default) execution order on hashC=\r\node of methods!\n-jt\n\nPS: I like the idea of 24h fixed random seed! It mitig=\r\nates many of the above \nproblems, if developers are not lazy. Still, it sho=\r\nuld not be the default, as \nfar as I can say.\n\n\n&gt;## 20.=E2=80=AF9.=E2=80=AF=\r\n2011 19:09:41 ##&lt;\n&gt; On Tue, Sep 20, 2011 at 3:07 AM, Dominik Dorn &lt;dorn@cau=\r\ncho.com&gt; wrote:\n&gt; &gt; **\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; Hmm... I think it would be even better=\r\n to _ensure_ that the test cases\n&gt; &gt; are run\n&gt; &gt; in a random order but prov=\r\nide a summary at the end of the testrun where\n&gt; &gt; the order gets printed.\n&gt;=\r\n \n&gt; -10\n&gt; \n&gt; A number of projects I worked on used to do this. While this m=\r\nay initially\n&gt; seem like a good idea, it was problematic for us for a numbe=\r\nr of reasons.\n&gt; \n&gt; If the tests are run in a random order, then a small cha=\r\nnge to a test or a\n&gt; class under test could cause a completely unrelated te=\r\nst to fail. Many\n&gt; developers will assume that it is their change that caus=\r\ned the problem,\n&gt; leading them in a wild goose chase trying to see which of=\r\n their changes\n&gt; caused the problems and why, and when they realize it is d=\r\nue to the test\n&gt; ordering, they need to do a big context switch back to the=\r\nir original\n&gt; task. This would be made worse by the fact that simply rerunn=\r\ning the tests\n&gt; would cause them to pass again (or worse, cause a different=\r\n test to fail).\n&gt; \n&gt; Note that I don&#39;t think developers should be writing t=\r\nests where the\n&gt; outcome depends on the ordering that the test methods were=\r\n run. I just\n&gt; don&#39;t think we should assume that fixing the tests with this=\r\n problem is\n&gt; necessarily as important as what the developer is trying to d=\r\no.\n&gt; \n&gt; Making the test order random by default also does not necessarily m=\r\nake it\n&gt; easier to track down problems with ordering of tests, since if you=\r\n ran the\n&gt; failing test suite again, you would get a different run order. J=\r\nUnit could\n&gt; print out the random seed used for that particular run, but th=\r\nen developers\n&gt; would have to figure out how to pass the previous random se=\r\ned back to the\n&gt; test (how to do this would depend on which IDE or build sy=\r\nstem they used).\n&gt; \n&gt; If developers want the ordering to be shuffled, they =\r\nshould use a custom\n&gt; runner that shuffles the tests. We used to do this in=\r\n our JUnit3 tests with\n&gt; a custom subclass of TestSuite. It used a random s=\r\need based on the\n&gt; System.currentTimeMillis() at midnight, so if a particul=\r\nar ordering caused\n&gt; the tests to fail, it was reproducible for the rest of=\r\n the day.\n&gt; Unfortunately, developers often assumed that the breakage was c=\r\naused by one\n&gt; of the changes submitted since the most recent green run of\n=\r\n&gt; the continuous build.\n&gt; \n&gt; \n&gt; Personally, I don&#39;t need the test ordering =\r\nto be defined, but I need it to\n&gt; be deterministic. If I build the same cod=\r\ne with the same JDK and run it in\n&gt; the same JRE on the same kernel on a di=\r\nfferent day, the tests should run in\n&gt; the same order. We often re-run test=\r\ns that failed earlier in the day, using\n&gt; the same source code, to try to d=\r\netermine which failures were due to flaky\n&gt; tests. Having the tests run in =\r\na different order would make it much more\n&gt; difficult to do this analysis.\n=\r\n&gt; \n&gt; \n&gt; I suggest that JUnit4 order the tests by the hash code of the test =\r\nmethod\n&gt; name. If there is a tie, JUnit could compare the test names using =\r\nthe\n&gt; natural ordering defined by String.compareTo(String) (possibly in rev=\r\nerse\n&gt; \n&gt; :-)\n&gt; \n&gt; -- Kevin\n&gt; \n&gt; In that way, people would be urged to crea=\r\nte independent tests and if it\n&gt; \n&gt; &gt; happens\n&gt; &gt; that the tests are not in=\r\ndependent (and this is discovered through a\n&gt; &gt; different ordering)\n&gt; &gt; the=\r\ny can diagnose the problem and fix their tests.\n&gt; &gt; \n&gt; &gt; On Tue, Sep 20, 20=\r\n11 at 10:10 AM, Stephen Connolly &lt;\n&gt; &gt; \n&gt; &gt; stephen.alan.connolly@...=\r\n&gt; wrote:\n&gt; &gt; &gt; **\n&gt; &gt; &gt; \n&gt; &gt; &gt; \n&gt; &gt; &gt; \n&gt; &gt; &gt; At present if you create a Req=\r\nuest, the tests will be unsorted, but you\n&gt; &gt; \n&gt; &gt; can\n&gt; &gt; \n&gt; &gt; &gt; call\n&gt; &gt; =\r\n&gt; \n&gt; &gt; &gt; Request r;\n&gt; &gt; &gt; r.sort( new Comparator() { ... } );\n&gt; &gt; &gt; \n&gt; &gt; &gt; =\r\nto have the tests sorted.\n&gt; &gt; &gt; \n&gt; &gt; &gt; Additionally, a Runner has the abili=\r\nty to sort its tests initially,\n&gt; &gt; &gt; though IMHO there is a tad missing in=\r\n terms of sorting if your Runner\n&gt; &gt; &gt; extends from ParentRunner as the ent=\r\nire list of tests is hidden from\n&gt; &gt; &gt; the Sortable interface and child cla=\r\nsses of ParentRunner... thus you\n&gt; &gt; &gt; are relying on Collections.sort to e=\r\nstablish your sorting with the\n&gt; &gt; &gt; comparator.\n&gt; &gt; &gt; \n&gt; &gt; &gt; i.e. Some sor=\r\nting requirements may need as many as N*N/2 comparisons\n&gt; &gt; &gt; to establish =\r\nthe correct sorting, while Collections.sort will\n&gt; &gt; &gt; typically only perfo=\r\nrm N*log(N) comparisons.\n&gt; &gt; &gt; \n&gt; &gt; &gt; See https://github.com/KentBeck/junit=\r\n/pull/316\n&gt; &gt; &gt; \n&gt; &gt; &gt; Something similar to https://github.com/KentBeck/jun=\r\nit/pull/316 will\n&gt; &gt; &gt; probably be needed if/as more people use the Request=\r\n#sort(Comparator)\n&gt; &gt; &gt; method.\n&gt; &gt; &gt; \n&gt; &gt; &gt; On 20 September 2011 08:44, Ma=\r\nlte Finsterwalder\n&gt; &gt; &gt; \n&gt; &gt; &gt; &lt;malte@...&gt; wrote:\n&gt; &gt; &gt; &gt; +1=\r\n\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; keep ordering undefined.\n&gt; &gt; &gt; &gt; Allow ordering though a =\r\ncustom Annotation, a Runner or a Rule (or a\n&gt; &gt; &gt; &gt; combination thereof, wh=\r\natever makes sense).\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; ----------------------------=\r\n--------\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; \n&gt; &gt; [Non-text portions o=\r\nf this message have been removed]\n&gt; \n&gt; [Non-text portions of this message h=\r\nave been removed]\n\n", 
    "profile": "jaroslavtulach", 
    "topicId": 23671, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 473773717, 
    "prevInTime": 23684, 
    "contentTrasformed": false, 
    "postDate": "1316632646", 
    "canDelete": false, 
    "nextInTopic": 23688, 
    "prevInTopic": 23680, 
    "headers": {
        "inReplyToHeader": "PENBQTNFK2VXOGsxSEJBYWotLXQ1N1pRNEh5LUhaYkp4NDl5RTgzTUZEeXhFZ19UbUF3UUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PDIwMTEwOTIxMjExNy4yNjcxNS5qYXJvc2xhdi50dWxhY2hAb3JhY2xlLmNvbT4=", 
        "referencesHeader": "PENBQ2o4QnVNdStWRHJTeG1GNUFyUmYrQ3QrSmc5QmpCSDR2TUFMazFoeEV2VzFyOGZHd0BtYWlsLmdtYWlsLmNvbT4gPENBQkhNNzZXa3lwbjJIQTRyS1lzRlJSTVYtYUgtUVZEeXNVMjRIOVV5NnJQMjZBX1RFUUBtYWlsLmdtYWlsLmNvbT4gPENBQTNFK2VXOGsxSEJBYWotLXQ1N1pRNEh5LUhaYkp4NDl5RTgzTUZEeXhFZ19UbUF3UUBtYWlsLmdtYWlsLmNvbT4="
    }
}