{
    "numMessagesInTopic": 3, 
    "nextInTime": 19750, 
    "senderId": "6arp-BiothKyWyn_Uxj0dBRNXa8Cfg9ehZMHskr1EJRbMIe4PWIzt7-KGTeGDu65ApWqPIAev0tyRsiDQRNnADa86EhN9YDunO_FQ6MtFvluy4s", 
    "systemMessage": true, 
    "subject": "Re: How to write Junit Test for Struts Validation Framework?", 
    "from": "=?iso-8859-1?B?zfXB6Luq?= &lt;hut@...&gt;", 
    "authorName": "ÍõÁè»ª", 
    "msgSnippet": "... Thanks for Kevin s reply and forgive my poor English. :) Exactly, now I am using struts-1.1.3i18n, I am trying to use Struts Test Case to write Junit test", 
    "msgId": 19749, 
    "profile": "wanglinghua2008", 
    "topicId": 19736, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 300426891, 
    "messageBody": "<div id=\"ygrps-yiv-485451398\">--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;Kevin Lawrence&quot; &lt;kev.lawrence@...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; On 8/9/07, ÍõÁè»ª &lt;hut@...&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Could anyone give some clues about how to write junit test for Struts<br/>\n&gt; &gt; validation framework?<br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; I have written exactly one test for a validation that uses struts2<br/>\n&gt; annotations:<br/>\n&gt; <br/>\n&gt;   @Test<br/>\n&gt;   public void testEmailShouldMatchRegex() throws Exception {<br/>\n&gt;     Method method = UpdateSettingsAction.class.getMethod(&quot;getEmail&quot;);<br/>\n&gt;     RegexFieldValidator annotation = method.getAnnotation(<br/>\n&gt; RegexFieldValidator.class);<br/>\n&gt; <br/>\n&gt;     assertThat(&quot;a@b.c&quot;, matches(annotation.expression()));<br/>\n&gt;     assertThat(&quot;a@b&quot;, not(matches(annotation.expression())));<br/>\n&gt;     assertThat(&quot;ab.c&quot;, not(matches(annotation.expression())));<br/>\n&gt;     assertThat(&quot;kevin@...&quot;, matches(annotation.expression()));<br/>\n&gt;   }<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; -- <br/>\n&gt; Kevin<br/>\n&gt; <br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.junitfactory.com\">http://www.junitfactory.com</a><br/>\n&gt; You send us code. We send you tests. For free.<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n<br/>\n </span></blockquote>Thanks for Kevin&#39;s reply and forgive my poor English. :)<br/>\n<br/>\nExactly, now I am using struts-1.1.3i18n, I am trying to use Struts<br/>\nTest Case to write Junit test for my currect validation framework.<br/>\n<br/>\nThis is my code from sample code of Struts Test case site.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://strutstestcase.sourceforge.net/\">http://strutstestcase.sourceforge.net/</a><br/>\n public void testHut() {<br/>\n        initStrutsTestContext();<br/>\n        setRequestPathInfo(&quot;...&quot;);<br/>\n         this.setConfigFile(&quot;...&quot;)<br/>\n        //addRequestParameter(&quot;AT&quot;, &quot;EU&quot;);<br/>\n        addRequestParameter(&quot;username&quot;, generateLargerThanXString(64));<br/>\n        // Do the related Action<br/>\n        actionPerform();<br/>\n        verifyActionErrors(new String[] { &quot;errors.maxlength&quot; });<br/>\n    }<br/>\n<br/>\nValidation-rule.xml:<br/>\n<br/>\n...<br/>\n    &lt;validator name=&quot;maxlength&quot;<br/>\n            classname=&quot;org.apache.struts.validator.FieldChecks&quot;<br/>\n               method=&quot;validateMaxLength&quot;<br/>\n         methodParams=&quot;java.lang.Object,<br/>\n                       org.apache.commons.validator.ValidatorAction,<br/>\n                       org.apache.commons.validator.Field,<br/>\n                       org.apache.struts.action.ActionErrors,<br/>\n                       javax.servlet.http.HttpServletRequest&quot;<br/>\n              depends=&quot;&quot;<br/>\n                  msg=&quot;errors.maxlength&quot;&gt;<br/>\n<br/>\n      &lt;/validator&gt;<br/>\n<br/>\nI got the exception trace :<br/>\n<br/>\njunit.framework.AssertionFailedError: was expecting some error<br/>\nmessages, but received none.<br/>\n\tat servletunit.struts.Common.verifyActionMessages(Common.java:84)<br/>\n\tat<br/>\nservletunit.struts.MockStrutsTestCase.verifyActionErrors(MockStrutsTestCase.java:765)<br/>\n\tat<br/>\ncom.webex.test.urlapi.profile.TestEditUserValidation.testHut(TestEditUserValidation.java:197)<br/>\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>\n\tat<br/>\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br/>\n...<br/>\n<br/>\nI have no idea what I have missed.<br/>\n<br/>\nThank in advance for your help.<br/>\n<br/>\nRegards.<br/>\n<br/>\n-Hut</div>", 
    "prevInTime": 19748, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1187336313", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 19737, 
    "headers": {
        "inReplyToHeader": "PDUxZDFiMmRlMDcwODEwMDg1NWgzY2Q0NTMxNHg0MWY3M2RmYzhkNGQ3NjZAbWFpbC5nbWFpbC5jb20+", 
        "messageIdInHeader": "PGZhM2o5cCtuaXNxQGVHcm91cHMuY29tPg=="
    }
}