{
    "numMessagesInTopic": 22, 
    "nextInTime": 21350, 
    "senderId": "V0V7JkFiAWlWWMzKlryxn1wZ5m3YRtwf_0E7pJycSeijXVERcozkerLLLXaskiHQgKV9JGXJXUgdDB3z1H1OFDFGVptjbw5VviJDgJwS8GXvO_k3gDCcOFh0", 
    "systemMessage": false, 
    "subject": "Re: Runner for non static inner class in JUnit 4.x", 
    "from": "&quot;tuomaskarkkainenri&quot; &lt;tuomaskarkkainenri@...&gt;", 
    "authorName": "tuomaskarkkainenri", 
    "msgSnippet": "David, I rewrote my patch into AnnotatedBuilder. I wrote it in such a way that it decreases the complexity of the original AnnotatedBuilder.  The net effect of", 
    "msgId": 21349, 
    "rawEmail": "Return-Path: &lt;tuomaskarkkainenri@...&gt;\r\nX-Sender: tuomaskarkkainenri@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 70192 invoked from network); 12 Feb 2009 18:36:02 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m53.grp.scd.yahoo.com with QMQP; 12 Feb 2009 18:36:02 -0000\r\nX-Received: from unknown (HELO n13d.bullet.sp1.yahoo.com) (69.147.64.236)\n  by mta17.grp.scd.yahoo.com with SMTP; 12 Feb 2009 18:36:02 -0000\r\nX-Received: from [69.147.65.149] by n13.bullet.sp1.yahoo.com with NNFMP; 12 Feb 2009 18:36:02 -0000\r\nX-Received: from [98.137.34.34] by t9.bullet.mail.sp1.yahoo.com with NNFMP; 12 Feb 2009 18:36:02 -0000\r\nDate: Thu, 12 Feb 2009 18:36:01 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;gn1q6h+qn14@...&gt;\r\nIn-Reply-To: &lt;4f7da6b90902040715v7d8f4f45t9524d37579550f32@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 2:4:8:0:2\r\nFrom: &quot;tuomaskarkkainenri&quot; &lt;tuomaskarkkainenri@...&gt;\r\nSubject: Re: Runner for non static inner class in JUnit 4.x\r\nX-Yahoo-Group-Post: member; u=373866241; y=EKusYYoNg5KDXZBn0mOj0EhxRt7xgQfmgatHSjYrAFPA3cYyAIBc7uG-tlLQ\r\nX-Yahoo-Profile: tuomaskarkkainenri\r\n\r\nDavid,\n\nI rewrote my patch into AnnotatedBuilder.\nI wrote it in such a way =\r\nthat it decreases the complexity of the\noriginal AnnotatedBuilder.  The net=\r\n effect of adding JDave support is\nthus a reduction in complexity.\n\nWhat do=\r\n you think?\n\nBest regards,\nTuomas\n\nAnnotatedBuilder.java:\n\npackage org.juni=\r\nt.internal.builders;\n\nimport static java.util.Arrays.asList;\n\nimport java.l=\r\nang.reflect.Constructor;\nimport java.lang.reflect.Modifier;\nimport java.uti=\r\nl.List;\n\nimport org.junit.runner.RunWith;\nimport org.junit.runner.Runner;\ni=\r\nmport org.junit.runners.model.InitializationError;\nimport org.junit.runners=\r\n.model.RunnerBuilder;\n\npublic class AnnotatedBuilder extends RunnerBuilder =\r\n{\n\tprivate static final String CONSTRUCTOR_ERROR_FORMAT=3D &quot;Custom runner\nc=\r\nlass %1$s should have a public constructor with signature %1$s(Class\ntestCl=\r\nass) or %1$s(Class testClass, RunnerBuilder builder)&quot;;\n\n\tprivate final Runn=\r\nerBuilder fSuiteBuilder;\n\n\tpublic AnnotatedBuilder(final RunnerBuilder suit=\r\neBuilder) {\n\t\tfSuiteBuilder=3D suiteBuilder;\n\t}\n\n\t@Override\n\tpublic Runner =\r\nrunnerForClass(final Class&lt;?&gt; testClass) throws Exception {\n\t\tfinal RunWith=\r\n annotation=3D getRunWithAnnotation(testClass);\n\t\tif (annotation !=3D null)=\r\n {\n\t\t\treturn buildRunner(annotation.value(), testClass);\n\t\t}\n\t\treturn null;=\r\n\n\t}\n\n\tprivate RunWith getRunWithAnnotation(final Class&lt;?&gt; testClass) {\n\t\tif=\r\n (testClass.isAnnotationPresent(RunWith.class)) {\n\t\t\treturn testClass.getAn=\r\nnotation(RunWith.class);\n\t\t}\n\t\tif (testClassIsANonStaticInnerClass(testClas=\r\ns)) {\n\t\t\treturn testClass.getDeclaringClass().getAnnotation(RunWith.class);=\r\n\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate boolean testClassIsANonStaticInnerClass(fi=\r\nnal Class&lt;?&gt;\ntestClass) {\n\t\treturn testClass.isMemberClass()\n\t\t\t\t&& !Modifi=\r\ner.isStatic(testClass.getModifiers());\n\t}\n\n\tprivate &lt;T extends Runner&gt; T bu=\r\nildRunner(final Class&lt;T&gt; runnerClass,\n\t\t\tfinal Class&lt;?&gt; testClass) throws E=\r\nxception {\n\t\treturn new InternalBuilder&lt;T&gt;(runnerClass,\nfSuiteBuilder).buil=\r\nd(testClass);\n\t}\n\n\tprivate static class InternalBuilder&lt;T extends Runner&gt; {=\r\n\n\t\tprivate final RunnerBuilder suiteBuilder;\n\n\t\tprivate final Class&lt;T&gt; runn=\r\nerClass;\n\n\t\tpublic InternalBuilder(final Class&lt;T&gt; runnerClass,\n\t\t\t\tfinal Ru=\r\nnnerBuilder suiteBuilder) {\n\t\t\tthis.runnerClass=3D runnerClass;\n\t\t\tthis.sui=\r\nteBuilder=3D suiteBuilder;\n\n\t\t}\n\n\t\tprivate T build(final Class&lt;?&gt; testClass=\r\n) throws Exception {\n\t\t\tif (hasValidConstructor()) {\n\t\t\t\treturn instantiate=\r\nRunner(testClass);\n\t\t\t}\n\t\t\tthrow new InitializationError(String.format(\n\t\t\t=\r\n\t\tCONSTRUCTOR_ERROR_FORMAT, runnerClass.getSimpleName()));\n\t\t}\n\n\t\tprivate T=\r\n instantiateRunner(final Class&lt;?&gt; testClass) throws Exception {\n\t\t\tif (hasS=\r\nimpleConstructor()) {\n\t\t\t\treturn getSimpleConstructor().newInstance(testCla=\r\nss);\n\t\t\t}\n\t\t\treturn getConstructorWithSuite(runnerClass).newInstance(testCl=\r\nass,\n\t\t\t\t\tsuiteBuilder);\n\t\t}\n\n\t\tprivate boolean hasValidConstructor() {\n\t\t\t=\r\nreturn hasSimpleConstructor()\n\t\t\t\t\t|| hasConstructorWithSuite();\n\t\t}\n\n\t\tpri=\r\nvate boolean hasSimpleConstructor() {\n\t\t\treturn getSimpleConstructor() !=3D=\r\n null;\n\t\t}\n\n\t\tprivate boolean hasConstructorWithSuite() {\n\t\t\treturn getCons=\r\ntructorWithSuite(runnerClass) !=3D null;\n\t\t}\n\n\t\tprivate Constructor&lt;T&gt; getS=\r\nimpleConstructor() {\n\t\t\tfor (final Constructor&lt;T&gt; constructor : getConstruc=\r\ntors()) {\n\t\t\t\tfinal List&lt;Class&lt;?&gt;&gt; parameters=3D asList(constructor\n\t\t\t\t\t\t.=\r\ngetParameterTypes());\n\t\t\t\tif (parameters.equals(asList(Class.class))) {\n\t\t\t=\r\n\t\treturn constructor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tprivate Constructor=\r\n&lt;T&gt; getConstructorWithSuite(\n\t\t\t\tfinal Class&lt;T&gt; runnerClass) {\n\t\t\tfor (fina=\r\nl Constructor&lt;T&gt; constructor : getConstructors()) {\n\t\t\t\tfinal List&lt;Class&lt;?&gt;=\r\n&gt; parameters=3D asList(constructor\n\t\t\t\t\t\t.getParameterTypes());\n\t\t\t\tif (par=\r\nameters.equals(asList(Class.class, RunnerBuilder.class))) {\n\t\t\t\t\treturn con=\r\nstructor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\n=\r\n\t\tprivate List&lt;Constructor&lt;T&gt;&gt; getConstructors() {\n\t\t\treturn asList((Constr=\r\nuctor&lt;T&gt;[]) runnerClass.getConstructors());\n\t\t}\n\n\t}\n}\n\nAnnotatedBuilderTest=\r\n.java:\n\npackage org.junit.tests.running.classes;\n\nimport static org.hamcres=\r\nt.core.Is.is;\nimport static org.junit.Assert.assertThat;\nimport org.hamcres=\r\nt.core.IsNull;\nimport org.junit.Test;\nimport org.junit.internal.builders.An=\r\nnotatedBuilder;\nimport org.junit.runner.Description;\nimport org.junit.runne=\r\nr.RunWith;\nimport org.junit.runner.Runner;\nimport org.junit.runner.notifica=\r\ntion.RunNotifier;\nimport org.junit.runners.model.InitializationError;\nimpor=\r\nt org.junit.runners.model.RunnerBuilder;\n\npublic class AnnotatedBuilderTest=\r\n {\n\t@Test\n\tpublic void aClassWithARunWithAnnotationHasRunnerBuilt() throws\n=\r\nException {\n\t\tfinal Runner runner=3D new AnnotatedBuilder(null)\n\t\t\t\t.runner=\r\nForClass(ClassWithRunWithAnnotation.class);\n\t\tassertThat(runner, is(FakeRun=\r\nner.class));\n\t}\n\n\t@Test\n\tpublic void\naClassWithARunWithAnnotationThatRequir=\r\nesASuiteBuilderHasRunnerBuilt()\n\t\t\tthrows Exception {\n\t\tfinal Runner runner=\r\n=3D new AnnotatedBuilder(null)\n\t\t\t\n.runnerForClass(ClassWithRunWithAnnotati=\r\nonWhereTheRunnerRequiresASuiteBuilder.class);\n\t\tassertThat(runner, is(FakeR=\r\nunnerThatRequiresSuiteBuilder.class));\n\n\t}\n\n\t@Test\n\tpublic void aClassWitho=\r\nutARunWithAnnotationReturnsNull() throws\nException {\n\t\tfinal Runner runner=\r\n=3D new AnnotatedBuilder(null)\n\t\t\t\t.runnerForClass(ClassWithoutRunWithAnnot=\r\nation.class);\n\t\tassertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));\n\n\t}\n\n\t=\r\n@Test\n\tpublic void\naNonStaticInnerClassWithARunWithAnnotationOnTheDeclaring=\r\nClassHasRunnerBuilt()\n\t\t\tthrows Exception {\n\t\tfinal Runner runner=3D new An=\r\nnotatedBuilder(null)\n\t\t\t\n.runnerForClass(DeclaringClassWithRunWithAnnotatio=\r\nn.NonStaticInnerClass.class);\n\t\tassertThat(runner, is(FakeRunner.class));\n\t=\r\n}\n\n\t@Test\n\tpublic void aStaticInnerClassWithARunWithAnnotationHasRunnerBuil=\r\nt()\n\t\t\tthrows Exception {\n\t\tfinal Runner runner=3D new AnnotatedBuilder(nul=\r\nl)\n\t\t\t\n.runnerForClass(DeclaringClassWithRunWithAnnotation.StaticInnerClass=\r\nWithRunWithAnnotation.class);\n\t\tassertThat(runner, is(FakeRunner.class));\n\t=\r\n}\n\n\t@Test\n\tpublic void\naStaticInnerClassWithARunWithAnnotationOnTheDeclarin=\r\ngClassReturnsNull()\n\t\t\tthrows Exception {\n\t\tfinal Runner runner=3D new Anno=\r\ntatedBuilder(null)\n\t\t\t\n.runnerForClass(DeclaringClassWithRunWithAnnotation.=\r\nStaticInnerClass.class);\n\t\tassertThat(runner, is(IsNull.&lt;Runner&gt; nullValue(=\r\n)));\n\t}\n\n\t@Test(expected=3D InitializationError.class)\n\tpublic void\naClassW=\r\nithARunWithAnnotationThatSpecifiesAnInvalidRunnerThrowsException()\n\t\t\tthrow=\r\ns Exception {\n\t\tfinal Runner runner=3D new AnnotatedBuilder(null)\n\t\t\t\n.runn=\r\nerForClass(ClassWithRunWithAnnotationThatSpecifiesAndInvalidRunner.class);\n=\r\n\t\tassertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));\n\t}\n\n\t@RunWith(FakeRu=\r\nnner.class)\n\tprivate static class ClassWithRunWithAnnotation {\n\t}\n\n\t@RunWit=\r\nh(InvalidRunner.class)\n\tprivate static class\nClassWithRunWithAnnotationThat=\r\nSpecifiesAndInvalidRunner {\n\t}\n\n\t@RunWith(FakeRunnerThatRequiresSuiteBuilde=\r\nr.class)\n\tprivate static class\nClassWithRunWithAnnotationWhereTheRunnerRequ=\r\niresASuiteBuilder {\n\t}\n\n\tprivate static class ClassWithoutRunWithAnnotation=\r\n {\n\t}\n\n\t@RunWith(FakeRunner.class)\n\tprivate static class DeclaringClassWith=\r\nRunWithAnnotation {\n\n\t\tpublic class NonStaticInnerClass {\n\t\t}\n\n\t\tpublic sta=\r\ntic class StaticInnerClass {\n\t\t}\n\n\t\t@RunWith(FakeRunner.class)\n\t\tpublic sta=\r\ntic class StaticInnerClassWithRunWithAnnotation {\n\t\t}\n\n\t}\n\n\tpublic static c=\r\nlass InvalidRunner extends Runner {\n\t\t@Override\n\t\tpublic Description getDes=\r\ncription() {\n\t\t\treturn Description.EMPTY;\n\t\t}\n\n\t\t@Override\n\t\tpublic void ru=\r\nn(final RunNotifier notifier) {\n\t\t}\n\t}\n\n\tpublic static class FakeRunner ext=\r\nends Runner {\n\t\tpublic FakeRunner(final Class&lt;?&gt; testClass) {\n\t\t}\n\n\t\t@Overr=\r\nide\n\t\tpublic Description getDescription() {\n\t\t\treturn Description.EMPTY;\n\t\t=\r\n}\n\n\t\t@Override\n\t\tpublic void run(final RunNotifier notifier) {\n\t\t}\n\t}\n\n\tpub=\r\nlic static class FakeRunnerThatRequiresSuiteBuilder extends Runner {\n\t\tpubl=\r\nic FakeRunnerThatRequiresSuiteBuilder(final Class&lt;?&gt; testClass,\n\t\t\t\tfinal R=\r\nunnerBuilder suiteBilder) {\n\t\t}\n\n\t\t@Override\n\t\tpublic Description getDescri=\r\nption() {\n\t\t\treturn Description.EMPTY;\n\t\t}\n\n\t\t@Override\n\t\tpublic void run(f=\r\ninal RunNotifier notifier) {\n\t\t}\n\t}\n}\n\nAnd RunWithTest.java, I fixed the er=\r\nror message to:\n\n\t@Test\n\tpublic void characterizeErrorMessageFromBadRunner(=\r\n) {\n\t\tassertEquals(\n\t\t\t\t&quot;Custom runner class BadRunner should have a public=\r\n constructor\nwith signature BadRunner(Class testClass) or BadRunner(Class\nt=\r\nestClass, RunnerBuilder builder)&quot;,\n\t\t\t\tJUnitCore.runClasses(Empty.class).ge=\r\ntFailures().get(0)\n\t\t\t\t\t\t.getMessage());\n\t}\n\n\n--- In junit@yahoogroups.com,=\r\n David Saff &lt;david@...&gt; wrote:\n&gt;\n&gt; I&#39;m unexcited about bumping up the JUnit=\r\n complexity for a single\nfeature.\n&gt; Again, I love JDave, but I&#39;d love a fea=\r\nture suggestion that used one\nstone\n&gt; to kill at least two birds.\n&gt; \n&gt;    D=\r\navid Saff\n&gt; \n&gt; On Tue, Feb 3, 2009 at 11:33 AM, tuomaskarkkainenri &lt;\n&gt; tuom=\r\naskarkkainenri@...&gt; wrote:\n&gt; \n&gt; &gt; Hi David, Kent,\n&gt; &gt;\n&gt; &gt; Did you guys deci=\r\nde on what to do with this issue?\n&gt; &gt;\n&gt; &gt; Best regards,\n&gt; &gt; Tuomas\n&gt; &gt;\n&gt; &gt; =\r\n--- In junit@yahoogroups.com, &quot;Lasse Koskela&quot; &lt;lasse.koskela@&gt; wrote:\n&gt; &gt; &gt;=\r\n\n&gt; &gt; &gt; David,\n&gt; &gt; &gt;\n&gt; &gt; &gt; I&#39;m not sure if I misinterpreted the below soluti=\r\non but from my\n&gt; &gt; &gt; perspective the perfect solution would be to make JUni=\r\nt look for a\n&gt; &gt; &gt; runner from the declaring class of a non-static inner cl=\r\nass. The\n&gt; &gt; &gt; rationale being that this would be the only change necessary=\r\n - the\n&gt; &gt; &gt; feature would be immediately supported by all IDEs and build t=\r\nools.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Lasse\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In junit@yahoogroups.com, &quot;David Sa=\r\nff&quot; &lt;david@&gt; wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; All,\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; It would seem that=\r\n the perfect solution would be:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; 1) The ability to add to th=\r\ne default Runner builder\n&gt; &gt; &gt; &gt; 2) A command-line flag to configure #1\n&gt; &gt;=\r\n &gt; &gt; 3) An Eclipse setting to set #2\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; It sounds like everyon=\r\ne who is requesting this feature is a\nuser of\n&gt; &gt; &gt; JDave,\n&gt; &gt; &gt; &gt; and a qu=\r\nick Eclipse setting would give them everything they want.\n&gt; &gt; &gt; It would\n&gt; =\r\n&gt; &gt; &gt; also allow users of other JUnit-based frameworks to do similar\nthings=\r\n.\n&gt; &gt; &gt; &gt; Thoughts?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;    David Saff\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; On Wed, J=\r\nan 14, 2009 at 3:42 AM, Lasse Koskela\n&lt;lasse.koskela@&gt;wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; =\r\n&gt; &gt; Hi David, Tuomas,\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; I&#39;m not exactly unbiased either, =\r\nhaving submitted a couple of\n&gt; &gt; patches\n&gt; &gt; &gt; &gt; &gt; for JDave back in the da=\r\ny and just having joined a project\nthat has\n&gt; &gt; &gt; &gt; &gt; 5000+ JDave tests.\n&gt; =\r\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; With that said, I don&#39;t think the increase in complexity\n=\r\nthat we&#39;re\n&gt; &gt; &gt; &gt; &gt; talking about here is all that big. If you don&#39;t speci=\r\nfy a\nrunner\n&gt; &gt; &gt; &gt; &gt; (non-static inner class), one is inherited from one l=\r\nevel up\n&gt; &gt; &gt; &gt; &gt; (declaring class).\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Again, I might be =\r\nbiased but I sure would like to be able to run\n&gt; &gt; just\n&gt; &gt; &gt; &gt; &gt; one of th=\r\ne tests.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Lasse\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; --- In jun=\r\nit@yahoogroups.com, &quot;David Saff&quot; &lt;david@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt; Do you think t=\r\nhe overall ease of use to people who need this\n&gt; &gt; feature\n&gt; &gt; &gt; &gt; &gt; will b=\r\ne\n&gt; &gt; &gt; &gt; &gt; &gt; worth a 20% increase in complexity for everyone who needs to\n=\r\n&gt; &gt; &gt; &gt; &gt; understand the\n&gt; &gt; &gt; &gt; &gt; &gt; default running rules?\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt;=\r\n &gt; &gt; &gt; &gt;    David Saff\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; On Wed, Dec 31, 2008 at 3:08=\r\n AM, tuomaskarkkainenri &lt;\n&gt; &gt; &gt; &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt;=\r\n &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; hey David,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; i uploaded the patc=\r\nh as a file,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n=\r\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\nhttp://f1.grp.yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0It=\r\nb3lfEH-tMTD2PqfQBWFNQwiqbje7jxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0=\r\n/nonstaticinnerclasses.patch\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; or if that link is=\r\n relative to my session it&#39;s\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; nonstaticinnerclasses.patch unde=\r\nr files here in Yahoo\nGroups.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; in JUnit4 speak:\n=\r\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; public class RegularJunit4 {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;  pub=\r\nlic class NonStaticInnerClass {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;    @Test\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;    pub=\r\nlic void testMethod() {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;    }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;  }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; }=\r\n\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; running testMethod() is not possible since\nNon=\r\nStaticInnerClass\n&gt; &gt; &gt; cannot\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; be instantiated from the outsid=\r\ne.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; in JDave:\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;  @RunW=\r\nith(JDaveRunner.class)\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;  public static class ASpec extends Spe=\r\ncification&lt;Void&gt; {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;    public class AContext {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;  =\r\n    public void aBehavior() {}\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;    }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;  }\n&gt; &gt; &gt; &gt; =\r\n&gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; AContext is instantiated by SpecRunner which JDaveRunne=\r\nr\n&gt; &gt; &gt; delegates to.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; When I run this with curr=\r\nent JUnit,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; AllDefaultPossibilitiesBuilder#runnerForClass(fina=\r\nl Class&lt;?&gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; testClass) picks out the @RunWith annotation and u=\r\nses\nthat to\n&gt; &gt; &gt; run my\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; spec(test class).\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; =\r\n&gt; &gt; &gt; &gt; &gt; However if I want to run just a single behavior (test\n&gt; &gt; method)=\r\n from\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; this spec for example from Eclipse.  Eclipse tells JUni=\r\nt to\n&gt; &gt; &gt; run class\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; ASpec.AContext and method aBehavior JUni=\r\nt then sees what\n&gt; &gt; &gt; builder it\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; should use for AContext, an=\r\nd doesn&#39;t find the annotation\n&gt; &gt; there and\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; tries to use the =\r\nregular JUnit4 builder and since it&#39;s a\nJDave\n&gt; &gt; &gt; spec it\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; f=\r\nails to run.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; What I want to do is: in case AllD=\r\nefaultPossibilitiesBuilder\n&gt; &gt; &gt; notices\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; that the TestClass i=\r\ns a non-static member class, which\nit has no\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; chance of being =\r\nable run anyway, it checks whether the\n&gt; &gt; &gt; declaring class\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; =\r\nof the testclass would be able to run it instead.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;=\r\n &gt; In the case of JDave, the declaring class would have the\n&gt; &gt; @RunWith\n&gt; =\r\n&gt; &gt; &gt; &gt; &gt; &gt; annotation, and with the Filter created by FilterRequest,\n&gt; &gt; &gt;=\r\n JDave can\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; then choose which Context and Spec it should actua=\r\nlly\nallow to\n&gt; &gt; &gt; run.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; br,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; Tuoma=\r\ns\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups.com, &quot;David Saff&quot; &lt;d=\r\navid@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; JDave is cool.  I&#39;m not 100% =\r\nclear what you want to\ndo, and\n&gt; &gt; &gt; I don&#39;t\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; see the\n&gt; &gt; &gt; &gt; =\r\n&gt; &gt; &gt; &gt; patch.  Could you perhaps include a small test case as\n&gt; &gt; &gt; inline=\r\n text?\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;    David Saff\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; =\r\n&gt; &gt; &gt; &gt; &gt; On Tue, Dec 30, 2008 at 10:27 AM, tuomaskarkkainenri &lt;\n&gt; &gt; &gt; &gt; &gt; =\r\n&gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;   I par=\r\nticipate in JDave (http://jdave.org). A BDD\nframework\n&gt; &gt; &gt; &gt; &gt; for Java\n&gt; =\r\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; that takes advantage of JUnit for example for Eclipse\n&gt; &gt; &gt;=\r\n integration.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; We have tests in non-stat=\r\nic inner classes of our test\n&gt; &gt; classes.\n&gt; &gt; &gt; &gt; &gt; These\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;=\r\n run wonderfully using the @RunWith annotation and\nour own\n&gt; &gt; &gt; runner.\n&gt; =\r\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; however, for individual tests, this doesn=\r\n&#39;t work. What I\n&gt; &gt; would\n&gt; &gt; &gt; &gt; &gt; like\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; to do is that Al=\r\nlDefaultPossibilitiesBuilder would check\n&gt; &gt; &gt; &gt; &gt; whether or\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;=\r\n &gt; &gt; not the test class is a non static member class. if\nit is,\n&gt; &gt; &gt; then =\r\nI\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; would grab the runner of the declaring class instead.\n&gt;=\r\n &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I made a patch implementing this. I will=\r\n try to\nattach it.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; =\r\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this me=\r\nssage have been removed]\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; =\r\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; =\r\n&gt; &gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt;=\r\n &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this=\r\n message have been removed]\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;=\r\n &gt; &gt; ------------------------------------\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Yahoo! Groups=\r\n Links\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; [Non=\r\n-text portions of this message have been removed]\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;=\r\n\n&gt; &gt; ------------------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt;=\r\n &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; \n&gt; \n&gt; [Non-text portions of this message have been removed]\n&gt;\n=\r\n\n\n\n", 
    "profile": "tuomaskarkkainenri", 
    "topicId": 21238, 
    "spamInfo": {
        "reason": "4", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 373866241, 
    "prevInTime": 21348, 
    "contentTrasformed": false, 
    "postDate": "1234463761", 
    "canDelete": false, 
    "nextInTopic": 21374, 
    "prevInTopic": 21339, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MDkwMjA0MDcxNXY3ZDhmNGY0NXQ5NTI0ZDM3NTc5NTUwZjMyQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGduMXE2aCtxbjE0QGVHcm91cHMuY29tPg=="
    }
}