{
    "numMessagesInTopic": 8, 
    "nextInTime": 22935, 
    "senderId": "9AMDRo0uQmey8_ZVF-h2otQ-r7Lakzg5YXU2LcpgqGInGINAyiFu3kPsPPF64WNcKw6ZrColuNeMWhn6c5MiObM_", 
    "systemMessage": false, 
    "subject": "Re: [junit] Common Test Runner for JVM", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Esko, This is a lot to absorb all at once.  I d love to go down the list and see what makes sense outside JUnit vs. inside JUnit.  I notice that a number of", 
    "msgId": 22934, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 22229 invoked from network); 13 Sep 2010 14:09:12 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m1.grp.sp2.yahoo.com with QMQP; 13 Sep 2010 14:09:12 -0000\r\nX-Received: from unknown (HELO mail-yw0-f50.google.com) (209.85.213.50)\n  by mta3.grp.sp2.yahoo.com with SMTP; 13 Sep 2010 14:09:11 -0000\r\nX-Received: by yws5 with SMTP id 5so2314955yws.23\n        for &lt;junit@yahoogroups.com&gt;; Mon, 13 Sep 2010 07:09:11 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.90.36.6 with SMTP id j6mr2792836agj.180.1284386948705; Mon, 13\n Sep 2010 07:09:08 -0700 (PDT)\r\nX-Received: by 10.91.53.20 with HTTP; Mon, 13 Sep 2010 07:09:08 -0700 (PDT)\r\nIn-Reply-To: &lt;4C8BFDE7.3010603@...&gt;\r\nReferences: &lt;4C8BFDE7.3010603@...&gt;\r\nDate: Mon, 13 Sep 2010 10:09:08 -0400\r\nX-Google-Sender-Auth: Jeema5lq-kI8rG6KglgQfi3ZX-4\r\nMessage-ID: &lt;AANLkTin4AXk8BGcbXGfm68KQFzLqbVzk+m22CrcUgRt1@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: David Saff &lt;david@...&gt;\r\nSubject: Re: [junit] Common Test Runner for JVM\r\nX-Yahoo-Group-Post: member; u=341876227; y=o1mwfVD1nPTf3CBQXCdt8jvlrXOzneI_e_UgcUp12LU\r\nX-Yahoo-Profile: dsaff\r\n\r\nEsko,\n\nThis is a lot to absorb all at once.  I&#39;d love to go down the list a=\r\nnd\nsee what makes sense outside JUnit vs. inside JUnit.  I notice that a\nnu=\r\nmber of the issues you&#39;re tackling are mostly about IDE\nintegration--I wond=\r\ner if thinking about the interface you wish IDEs\nwould talk to, and then ge=\r\ntting at least one IDE to agree to it, would\nbe a good approach.  I&#39;ve tack=\r\nled a few of your questions below--going\ndeep on one of them, of your choic=\r\ne, might be the most productive way\nforward, rather than trying to hit all =\r\nof them at once.\n\n   David Saff\n\nOn Sat, Sep 11, 2010 at 6:08 PM, Esko Luon=\r\ntola &lt;esko.luontola@...&gt; wrote:\n&gt; I&#39;ll soon start writing a new test =\r\nrunner - a common test runner for the\n&gt; JVM, codename CTR4J. It will provid=\r\ne a superset of JUnit&#39;s test runner&#39;s\n&gt; features, while at the same time ov=\r\nercoming some of JUnit&#39;s limitations\n&gt; and helping integration with develop=\r\nment tools. I would like to hear\n&gt; your opinions on this project.\n&gt;\n&gt;\n&gt; =A0=\r\n =A0 =A0 =A0MOTIVATION\n&gt;\n&gt; JUnit&#39;s test runner - especially the org.junit.r=\r\nunner.RunWith annotation\n&gt; - has been very successful in providing a common=\r\n interface for running\n&gt; tests from multiple testing frameworks. If a testi=\r\nng framework provides\n&gt; a org.junit.runner.Runner implementation, every Jav=\r\na build tool and IDE\n&gt; will automatically support the framework.\n&gt;\n&gt; Howeve=\r\nr with the rise of Scala testing frameworks (Specs, ScalaTest,\n&gt; Specsy - t=\r\nhe last one being written by me), some limitations of JUnit&#39;s\n&gt; test runner=\r\n are coming to the fore:\n&gt;\n&gt; - JUnit makes an implicit assumption that all =\r\ntests are known before any\n&gt; test code is executed. For example IntelliJ ID=\r\nEA calls\n&gt; Runner.getDescription() before calling Runner.run() and has prob=\r\nlems if\n&gt; the descriptions change during test execution. But in the Scala t=\r\nesting\n&gt; frameworks, in order to achieve a concise syntax, test declaration=\r\ns are\n&gt; implemented as method calls in the class constructor, which means t=\r\nhat\n&gt; at least some of the test code must be executed before it is known th=\r\nat\n&gt; what tests there are.\n\nThere are advantages to the &quot;declare everything=\r\n before running\nanything&quot; requirement from JUnit, but I agree that it also =\r\nmakes some\nthings very difficult.  I&#39;d love to see a standard way to addres=\r\ns this\nwithin JUnit.\n\n&gt; - JUnit doesn&#39;t know the concept of nested tests. I=\r\nt knows the concept\n&gt; of suites containing suites, but not &quot;test methods&quot; w=\r\nhich contain other\n&gt; &quot;test methods&quot;. But at least Specs and Specsy allow or=\r\nganizing tests\n&gt; into unlimitedly nested closures. For them this limitation=\r\n means that\n&gt; IDEs are not able to show the right mental model of what is r=\r\neally\n&gt; happening during test execution, which makes understanding test out=\r\nput\n&gt; harder.\n\nIn terms of IDE integration, JUnit just reports a tree of\nDe=\r\nscriptions, and results against them.  Runners are free to structure\nthese =\r\ntrees however they wish.  Have you run into IDE limitations for\ndisplaying/=\r\ninteracting with these trees?\n\n&gt; - There is an implicit assumption that tes=\r\nt names are the same as method\n&gt; names, and that the tests are implemented =\r\nas methods. For example in\n&gt; IntelliJ IDEA it&#39;s possible to navigate from t=\r\nhe test results into test\n&gt; methods. But with the Scala frameworks this is =\r\nnot possible, because the\n&gt; test names to not correspond any method declara=\r\ntion (and a string search\n&gt; is not 100% reliable because the test name coul=\r\nd be generated\n&gt; dynamically or there could be multiple tests with the same=\r\n name; at\n&gt; least Specsy allows duplicate names).\n\nThat assumption is in th=\r\ne IDE&#39;s.  It&#39;s a useful one, but it&#39;s neither\nrequired nor assumed by JUnit=\r\n itself.\n\n&gt; There are also some other limitations which affect all Java tes=\r\nting\n&gt; frameworks:\n&gt;\n&gt; - When a test prints something, IntelliJ IDEA collec=\r\nts what is printed\n&gt; to stdout and stderr, so that when you select a test i=\r\nn the test\n&gt; results, it will show only what that test printed. This is ver=\r\ny useful\n&gt; for debugging with println-statements. But because there is no\n&gt;=\r\n synchronization between the test runner and the IDE which reads the\n&gt; stdo=\r\nut/err, IDEA doesn&#39;t always associate what a test printed with the\n&gt; correc=\r\nt test, especially when the tests are very fast.\n\n\n&gt; - No built-in support =\r\nfor executing the tests in parallel. Third-party\n&gt; tools are needed for it.=\r\n\n\nWe&#39;ve taken several stabs at this.  The biggest hurdle is how to\nextend t=\r\nhe test-definition language: while many tests can be\nparallelized without c=\r\nost, and test writers should not depend on\norder, they currently might depe=\r\nnd on only test being written at the\ntime.\n\n&gt; Possibly because of being fac=\r\ned with the above limitations, at least\n&gt; Specs, ScalaTest and TestNG have =\r\nimplemented their own test runners.\n&gt; This in turn means that the IDEs need=\r\n to support each test runner\n&gt; individually, which results in varying level=\r\ns of quality and features\n&gt; between the integration with different test run=\r\nners. For example, at\n&gt; least some time ago, IDEA&#39;s Scala plugin did not su=\r\npport automatically\n&gt; finding all Specs tests in the project and executing =\r\nthem.\n\nTest discovery seems to be yet another feature of a common IDE inter=\r\nface.\n\n&gt; There is also code duplication inside and between all IDEs, build =\r\ntools\n&gt; and CI servers because they have had to write code to keep track of=\r\n the\n&gt; test execution state, and that needs to be repeated for each test ru=\r\nnner.\n\n\n&gt;\n&gt;\n&gt; =A0 =A0 =A0 =A0THE PROJECT\n&gt;\n&gt; I&#39;ll soon start writing a test=\r\n runner to solve the above mentioned\n&gt; limitations and to ease the integrat=\r\nion with build tools, IDEs, CI\n&gt; servers etc. The license will be Apache Li=\r\ncense 2.0. I&#39;m also thinking\n&gt; of making this not only open source, but als=\r\no &quot;open development&quot;, by\n&gt; screencasting similar to http://jamesshore.com/B=\r\nlog/Lets-Play/\n&gt;\n&gt; What the test runner will provide to testing frameworks,=\r\n is a superset\n&gt; of the features provided by these JUnit classes: RunWith, =\r\nRunner,\n&gt; Description, RunNotifier. The API will be a bit more generic and =\r\nwith\n&gt; new abstractions, in order to support for example nested tests.\n&gt;\n&gt; =\r\nWhat the test runner will provide to IDEs, build tools and CI servers,\n&gt; is=\r\n a library for launching the tests in a new VM instance, monitoring\n&gt; the t=\r\nest execution status, collecting the test results and what was\n&gt; printed to=\r\n stdout/err etc. The tools just need to configure the\n&gt; classpath and choos=\r\ne which tests to run (e.g. using file name patters).\n&gt; I will also provide =\r\na reference implementation of an UI for running the\n&gt; tests, because runnin=\r\ng tests as part of the TDD cycle is too important a\n&gt; feature for its usabi=\r\nlity to be left in the hands of programmers without\n&gt; interaction design sk=\r\nills.\n&gt;\n&gt; What the test runner will provide to users, is running tests from=\r\n all\n&gt; testing frameworks (which support this runner or JUnit&#39;s test runner=\r\n) in\n&gt; one suite, running them in parallel on multiple CPU cores (I&#39;ll tack=\r\nle\n&gt; parallelization over multiple machines as a separate project, probably=\r\n\n&gt; as a commercial tool), integration with every development tool on the\n&gt; =\r\nJVM (I intend to contact all tool vendors and gather requirements from\n&gt; th=\r\nem to ease the integration) and reliability (backwards compatiblity is\n&gt; ve=\r\nry important to me, and I plan on making it possible for each tool\n&gt; vendor=\r\n to write integration tests, which will be run as part of the test\n&gt; runner=\r\n&#39;s development builds, to detect any breaking changes).\n&gt;\n&gt; So, I would lik=\r\ne to ask for your opinion on this project. Here are some\n&gt; questions:\n&gt;\n&gt; -=\r\n Do you find this useful?\n&gt;\n&gt; - If you had the possibility to rewrite JUnit=\r\n&#39;s test runner, without\n&gt; having to think about backwards compatibility, wh=\r\nat would you do\n&gt; differently? @RunWith&#39;s javadoc says: &quot;We added this feat=\r\nure late in\n&gt; development. While it seems powerful we expect the runner API=\r\n to change\n&gt; as we learn how people really use it. Some of the classes that=\r\n are\n&gt; currently internal will likely be refined and become public.&quot;\n&gt;\n&gt; - =\r\nWhat do you think would be a good name for the project? One suggestion\n&gt; is=\r\n CTR4J (actually named similar to SLF4J) which is googleable, but\n&gt; perhaps=\r\n not very pronounceable or memorable.\n&gt;\n&gt; - What would be a good name for t=\r\nhe annotation which corresponds\n&gt; @RunWith? Its name needs to be different =\r\nto be googleable and to make it\n&gt; easy to annotate a class with both JUnit&#39;=\r\ns and this test runner&#39;s\n&gt; annotation.\n&gt;\n&gt; - Any other thoughts?\n&gt;\n&gt; --\n&gt; E=\r\nsko Luontola\n&gt; www.orfjackal.net\n&gt;\n&gt;\n&gt; ------------------------------------=\r\n\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "dsaff", 
    "topicId": 22933, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "prevInTime": 22933, 
    "contentTrasformed": false, 
    "postDate": "1284386948", 
    "canDelete": false, 
    "nextInTopic": 22935, 
    "prevInTopic": 22933, 
    "headers": {
        "inReplyToHeader": "PDRDOEJGREU3LjMwMTA2MDNAZ21haWwuY29tPg==", 
        "messageIdInHeader": "PEFBTkxrVGluNEFYazhCR2NiWEdmbTY4S1FGekxxYlZ6ayttMjJDcmNVZ1J0MUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDRDOEJGREU3LjMwMTA2MDNAZ21haWwuY29tPg=="
    }
}