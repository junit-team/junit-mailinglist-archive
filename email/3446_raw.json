{
    "numMessagesInTopic": 10, 
    "nextInTime": 3447, 
    "senderId": "4tPvMOY0h0_ezYPNh_-wZwNqMEOT5pcr0DMUHB-scF0QveeqwwaBpJnALvb3M9fRl9Oqphd7A27DOAiEWRgnxbmmLdbozkM", 
    "systemMessage": false, 
    "subject": "Re: [junit] JUnit Tests and Business Rules", 
    "from": "Mark Derricutt &lt;mark@...&gt;", 
    "authorName": "Mark Derricutt", 
    "msgSnippet": "--On Sunday, 2 December 2001 1:05 p.m. -0700 Mike Clark  wrote: Apologies to all for a long post :) ... Well, in this checking if a field", 
    "msgId": 3446, 
    "rawEmail": "Return-Path: &lt;mark@...&gt;\r\nX-Sender: mark@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_1_2); 5 Dec 2001 01:54:37 -0000\r\nReceived: (qmail 39206 invoked from network); 5 Dec 2001 01:54:37 -0000\r\nReceived: from unknown (216.115.97.172)\n  by m12.grp.snv.yahoo.com with QMQP; 5 Dec 2001 01:54:37 -0000\r\nReceived: from unknown (HELO klingon.pictdata.com) (202.78.132.114)\n  by mta2.grp.snv.yahoo.com with SMTP; 5 Dec 2001 01:54:36 -0000\r\nReceived: from [10.2.29.59] (BAJORAN1 [10.2.29.59]) by klingon.pictdata.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2650.21)\n\tid X3H7Y4ND; Wed, 5 Dec 2001 14:54:34 +1300\r\nDate: Wed, 05 Dec 2001 14:54:33 +1300\r\nTo: junit@yahoogroups.com\r\nCc: aidenm@...\r\nSubject: Re: [junit] JUnit Tests and Business Rules\r\nMessage-ID: &lt;193319789.1007564073@[10.2.29.59]&gt;\r\nIn-Reply-To: &lt;3C0A8977.B8DB4039@...&gt;\r\nReferences:  &lt;3C0A8977.B8DB4039@...&gt;\r\nX-Mailer: Mulberry/2.1.1 (Win32)\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=iso-8859-1; format=flowed\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nFrom: Mark Derricutt &lt;mark@...&gt;\r\nX-Yahoo-Group-Post: member; u=53945542\r\nX-Yahoo-Profile: talios2k\r\n\r\n--On Sunday, 2 December 2001 1:05 p.m. -0700 Mike Clark \n&lt;mike@...=\r\nm&gt; wrote:\n\nApologies to all for a long post :)\n\n&gt; This is probably more tha=\r\nn is necessary for checking whether a field is\n&gt; editable or not, but it do=\r\nes address the &#39;if&#39; statement for generic\n&gt; rule-based systems.  The simple=\r\nst approach is to simply refactor each test\n&gt; into its own method, as you&#39;v=\r\ne already pointed out.\n\nWell, in this checking if a field is editable or no=\r\nt (more cell editable in \na large grid), is based upon a set of rules that =\r\ndiffer for each cell, \nthings like &quot;editable if transaction for cell is bil=\r\nlable, but not billed, \nand settings.autobill is on&quot;, and numerous other ru=\r\nles.  And I imagine \nthere will lots of other places in the code that will =\r\nuse it.\n\nLooking at your Ruleset snippet, I got to thinking, what I want is=\r\n \nsomething that looks somewhat like a JUnit test, and something, that coul=\r\nd \nbe easily tested with JUnit.\n\nI was also looking at what my code does, l=\r\nooking at objects from the \ncurrent HttpSession, obviously, I won&#39;t have th=\r\nis at testing time, so I was \nthinking, if I construct a Hashtable, and put=\r\n in the objects from the \nsession (or at least, the object I use) and pass =\r\nthe hashtable to my rule \nto test against, things could work.\n\nI wrote up t=\r\nhe following sample/psudo code as well, any thoughts, comments, \nor pointer=\r\ns to blatently bad code here?:\n\n// Sample ruleset class, one rule that chec=\r\nks if autoBill is on.\npublic class WTRecBeanEditable extends RuleSet\n{\n\tSta=\r\nff currentStaff =3D null;\n\tControl companyProp =3D null;\n\n\tpublic void setU=\r\np() {\n\t\tcurrentStaff =3D (Staff) ruleInfo.get(&quot;currentStaff&quot;);\n\t\tcompanyPro=\r\np =3D (Control) ruleInfo.get(&quot;companyProp&quot;);\n\t}\t\t\n\n\tpublic void tearDown() =\r\n{\n\t\tcurrentStaff =3D null;\n\t\tcompanyProp =3D null;\n\t}\n\n\tpublic boolean rule=\r\nAutoBill()\n\t{\n\t\treturn companyProp.autoBill;\n\t}\n\n}\n\n\n// The actual class th=\r\ne rule is used in, create a static instance of\n// the rule (this might be a=\r\n bad idea, not sure)\n\npublic class WTRecBean {\n\n\tprivate static RuleSet rul=\r\neEditable =3D new WTRecBeanEditable();\n\n         // insert objects from htt=\r\npsession into hash, and check rule\n         // .checkRule could be overload=\r\ned to accept an HttpSession\n         // which just copies all attributes ev=\r\nerything over to the\n         // HashTable for you...\n\n\tpublic boolean isEd=\r\nitable() {\n\t\tHashTable hash =3D new HashTable();\n\t\thash.set(&quot;currentStaff&quot;,=\r\n session.get(&quot;currentStaff&quot;));\n\t\thash.set(&quot;companyProp&quot;, session.get(&quot;compa=\r\nnyProp&quot;));\n\t\treturn ruleEditable.checkRule(hash);\n\t}\n}\n\nAnd finally...\n\n\n//=\r\n The JUnit testcase to test it all.\n\npublic class WTRecTest extends TestCas=\r\ne {\n\n\tHashtable hash =3D null;\n\tStaff currentStaff =3D null;\n\tControl compa=\r\nnyProp =3D null;\n\n\tpublic void setup() {\n\t\tStaff currentStaff =3D new Staff=\r\n();\n\t\tcurrentStaff.set(..); // setup staff to known state\n\t\t\n\t\tControl comp=\r\nanyProp =3D new Control();\n\t\tcompanyProp.set(..);  // setup control to know=\r\nn state\n\n\t\tHashTable hash =3D new HashTable();\n\t\thash.set(&quot;currentStaff&quot;, c=\r\nurrentStaff);\n\t\thash.set(&quot;companyProp&quot;, companyProp);\n\t}\n\n\tpublic void tear=\r\nDown() {\n\t\tcurrentStaff =3D null;\n\t\tcompanyProp =3D null;\n\t\thash =3D null;\n=\r\n\t}\n\n\n\tpublic void testEditable() {\n\n\t\t// Set test specific alterations to s=\r\ntaff and control\n\t\tcompanyProp.setBill(false);\n\n\t\tRuleSet WTRecBean.ruleEdi=\r\ntable =3D new WTRecBeanEditable();\n\n\t\tassertTrue(ruleEditable.checkRule(has=\r\nh));\n\t}\n\n}\n\n\n\n-- \nMark Derricutt                                E-Mail: mar=\r\nkd@...\nSenior Delphi Developer                                =\r\n        ICQ: 19348533\nTime Disciple Ltd                                http=\r\n://www.timedisciple.com\n\n            Limitations only serve to give directi=\r\non to your goals\n         Vi de ud=F8delige inviterer dere til =E5 sl=E5 de=\r\nre sammen med oss\n\n\n", 
    "profile": "talios2k", 
    "topicId": 3406, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 53945542, 
    "prevInTime": 3445, 
    "contentTrasformed": false, 
    "postDate": "1007517273", 
    "canDelete": false, 
    "nextInTopic": 3448, 
    "prevInTopic": 3444, 
    "headers": {
        "inReplyToHeader": "PDNDMEE4OTc3LkI4REI0MDM5QGNsYXJrd2FyZS5jb20+", 
        "messageIdInHeader": "PDE5MzMxOTc4OS4xMDA3NTY0MDczQFsxMC4yLjI5LjU5XT4=", 
        "referencesHeader": "IDwzQzBBODk3Ny5COERCNDAzOUBjbGFya3dhcmUuY29tPg=="
    }
}