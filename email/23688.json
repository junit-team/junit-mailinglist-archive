{
    "numMessagesInTopic": 11, 
    "nextInTime": 23689, 
    "senderId": "54qnwTOA_jexGhX0AqjMPj0tOibtAFLlyvvOQ9CZoKIB4dtP7vwQYJCnAx9SMYy5i6MhlsFSXhsNgPBdCFDEzSID", 
    "systemMessage": false, 
    "subject": "Re: [junit] Alphabetizing test method run order?", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "I like hashCode, then String compare.  That seems to have almost all of the benefits, but avoids the major drawback. David", 
    "msgId": 23688, 
    "profile": "dsaff", 
    "topicId": 23671, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "messageBody": "<div id=\"ygrps-yiv-987175551\">I like hashCode, then String compare.  That seems to have almost all<br/>\nof the benefits, but avoids the major drawback.<br/>\n<br/>\n   David<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Tue, Sep 20, 2011 at 1:09 PM, Kevin Cooney &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:kcooney@...\">kcooney@...</a>&gt; wrote:<br/>\n&gt; On Tue, Sep 20, 2011 at 3:07 AM, Dominik Dorn &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:dorn@...\">dorn@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt;&gt; **<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; Hmm... I think it would be even better to _ensure_ that the test cases are<br/>\n&gt;&gt; run<br/>\n&gt;&gt; in a random order but provide a summary at the end of the testrun where the<br/>\n&gt;&gt; order gets printed.<br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt; -10<br/>\n&gt;<br/>\n&gt; A number of projects I worked on used to do this. While this may initially<br/>\n&gt; seem like a good idea, it was problematic for us for a number of reasons.<br/>\n&gt;<br/>\n&gt; If the tests are run in a random order, then a small change to a test or a<br/>\n&gt; class under test could cause a completely unrelated test to fail. Many<br/>\n&gt; developers will assume that it is their change that caused the problem,<br/>\n&gt; leading them in a wild goose chase trying to see which of their changes<br/>\n&gt; caused the problems and why, and when they realize it is due to the test<br/>\n&gt; ordering, they need to do a big context switch back to their original<br/>\n&gt; task. This would be made worse by the fact that simply rerunning the tests<br/>\n&gt; would cause them to pass again (or worse, cause a different test to fail).<br/>\n&gt;<br/>\n&gt; Note that I don&#39;t think developers should be writing tests where the outcome<br/>\n&gt; depends on the ordering that the test methods were run. I just don&#39;t think<br/>\n&gt; we should assume that fixing the tests with this problem is necessarily as<br/>\n&gt; important as what the developer is trying to do.<br/>\n&gt;<br/>\n&gt; Making the test order random by default also does not necessarily make it<br/>\n&gt; easier to track down problems with ordering of tests, since if you ran the<br/>\n&gt; failing test suite again, you would get a different run order. JUnit could<br/>\n&gt; print out the random seed used for that particular run, but then developers<br/>\n&gt; would have to figure out how to pass the previous random seed back to the<br/>\n&gt; test (how to do this would depend on which IDE or build system they used).<br/>\n&gt;<br/>\n&gt; If developers want the ordering to be shuffled, they should use a custom<br/>\n&gt; runner that shuffles the tests. We used to do this in our JUnit3 tests with<br/>\n&gt; a custom subclass of TestSuite. It used a random seed based on the<br/>\n&gt; System.currentTimeMillis() at midnight, so if a particular ordering caused<br/>\n&gt; the tests to fail, it was reproducible for the rest of the day.<br/>\n&gt; Unfortunately, developers often assumed that the breakage was caused by one<br/>\n&gt; of the changes submitted since the most recent green run of<br/>\n&gt; the continuous build.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Personally, I don&#39;t need the test ordering to be defined, but I need it to<br/>\n&gt; be deterministic. If I build the same code with the same JDK and run it in<br/>\n&gt; the same JRE on the same kernel on a different day, the tests should run in<br/>\n&gt; the same order. We often re-run tests that failed earlier in the day, using<br/>\n&gt; the same source code, to try to determine which failures were due to flaky<br/>\n&gt; tests. Having the tests run in a different order would make it much more<br/>\n&gt; difficult to do this analysis.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; I suggest that JUnit4 order the tests by the hash code of the test method<br/>\n&gt; name. If there is a tie, JUnit could compare the test names using the<br/>\n&gt; natural ordering defined by String.compareTo(String) (possibly in reverse<br/>\n&gt; :-)<br/>\n&gt;<br/>\n&gt; -- Kevin<br/>\n&gt;<br/>\n&gt; In that way, people would be urged to create independent tests and if it<br/>\n&gt;&gt; happens<br/>\n&gt;&gt; that the tests are not independent (and this is discovered through a<br/>\n&gt;&gt; different ordering)<br/>\n&gt;&gt; they can diagnose the problem and fix their tests.<br/>\n&gt;&gt;<br/>\n&gt;&gt; On Tue, Sep 20, 2011 at 10:10 AM, Stephen Connolly &lt;<br/>\n&gt;&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:stephen.alan.connolly@...\">stephen.alan.connolly@...</a>&gt; wrote:<br/>\n&gt;&gt;<br/>\n&gt;&gt; &gt; **<br/>\n&gt;&gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; At present if you create a Request, the tests will be unsorted, but you<br/>\n&gt;&gt; can<br/>\n&gt;&gt; &gt; call<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Request r;<br/>\n&gt;&gt; &gt; r.sort( new Comparator() { ... } );<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; to have the tests sorted.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Additionally, a Runner has the ability to sort its tests initially,<br/>\n&gt;&gt; &gt; though IMHO there is a tad missing in terms of sorting if your Runner<br/>\n&gt;&gt; &gt; extends from ParentRunner as the entire list of tests is hidden from<br/>\n&gt;&gt; &gt; the Sortable interface and child classes of ParentRunner... thus you<br/>\n&gt;&gt; &gt; are relying on Collections.sort to establish your sorting with the<br/>\n&gt;&gt; &gt; comparator.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; i.e. Some sorting requirements may need as many as N*N/2 comparisons<br/>\n&gt;&gt; &gt; to establish the correct sorting, while Collections.sort will<br/>\n&gt;&gt; &gt; typically only perform N*log(N) comparisons.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; See <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/KentBeck/junit/pull/316\">https://github.com/KentBeck/junit/pull/316</a><br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Something similar to <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/KentBeck/junit/pull/316\">https://github.com/KentBeck/junit/pull/316</a> will<br/>\n&gt;&gt; &gt; probably be needed if/as more people use the Request#sort(Comparator)<br/>\n&gt;&gt; &gt; method.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; On 20 September 2011 08:44, Malte Finsterwalder<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:malte@...\">malte@...</a>&gt; wrote:<br/>\n&gt;&gt; &gt; &gt; +1<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; keep ordering undefined.<br/>\n&gt;&gt; &gt; &gt; Allow ordering though a custom Annotation, a Runner or a Rule (or a<br/>\n&gt;&gt; &gt; &gt; combination thereof, whatever makes sense).<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; ------------------------------------<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 23687, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1316638467", 
    "canDelete": false, 
    "nextInTopic": 23691, 
    "prevInTopic": 23685, 
    "headers": {
        "inReplyToHeader": "PENBQTNFK2VXOGsxSEJBYWotLXQ1N1pRNEh5LUhaYkp4NDl5RTgzTUZEeXhFZ19UbUF3UUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBQ2o4QnVQTEVDNDh5eE9mOVRwXzIyLVo3bnpDM2VwOFpuM1A0TlJLcFVYek5KaE9mQUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBQ2o4QnVNdStWRHJTeG1GNUFyUmYrQ3QrSmc5QmpCSDR2TUFMazFoeEV2VzFyOGZHd0BtYWlsLmdtYWlsLmNvbT4JPENBTGdBZjgyYjY9emE9WVVwWEN5MDJTZjZwWjFkaWJBTF9KTmlMNTkxNjJtOGdadVNHd0BtYWlsLmdtYWlsLmNvbT4JPENBTFMxMi1OZFhLbW83YjZ6N0tHdTkremE2N2hqS2owWmI0QmFOVyt6b1BvUEw5dS02UUBtYWlsLmdtYWlsLmNvbT4JPENBK25Qbk14cE1UUXpkV1lTcD0rck1UNGVoZExEWktoY1RuaDVUMGpzK3doTjY3QzU9d0BtYWlsLmdtYWlsLmNvbT4JPENBQkhNNzZXa3lwbjJIQTRyS1lzRlJSTVYtYUgtUVZEeXNVMjRIOVV5NnJQMjZBX1RFUUBtYWlsLmdtYWlsLmNvbT4JPENBQTNFK2VXOGsxSEJBYWotLXQ1N1pRNEh5LUhaYkp4NDl5RTgzTUZEeXhFZ19UbUF3UUBtYWlsLmdtYWlsLmNvbT4="
    }
}