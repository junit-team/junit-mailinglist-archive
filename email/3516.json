{
    "numMessagesInTopic": 14, 
    "nextInTime": 3517, 
    "senderId": "QX-Z-qOtn9okiHsyDJWqxAPLZD-Jb-_k1NlfdDTetJ-BlsHo7VdtO6WaozGCPHDaT6J4klpAODMihYrwdXlsLxHsy853dCgLihih7_giNiN2PBdR", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing Static class behavior", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "Thomas: A simple solution: don t make this a singleton. Open up the constructor (make it public); it should probably just have some dummy data. Maybe even make", 
    "msgId": 3516, 
    "profile": "nails762", 
    "topicId": 3503, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "messageBody": "<div id=\"ygrps-yiv-1072385087\">Thomas:<br/>\n<br/>\nA simple solution: don&#39;t make this a singleton. Open up the constructor <br/>\n(make it public); it should probably just have some dummy data. Maybe <br/>\neven make a constructor that takes a Map of pre-populated database <br/>\nobjects, just for testing.<br/>\n<br/>\nIf your application needs only one DataServer, then let the application <br/>\ncreate an instance and hang onto it in a toolbox. Nobody else cares how <br/>\nmany instances of the DataServer there are, because your application <br/>\nwill simply talk to the one in its toolbox.<br/>\n<br/>\nIf you have components that shouldn&#39;t be talking to the application <br/>\ntoolbox to get a Data object, then see if you can change the design so <br/>\nthat the application hands Data objects to the components instead. <br/>\nSimply sit on the other side of the table and get a new view. You might <br/>\nprefer the view from that side. :)<br/>\n<br/>\nJBR.<br/>\n<br/>\nPS: If you still think this object should be a singleton, I want you to <br/>\nprove to me in this group that your singleton passes my criteria for <br/>\n&quot;when it really is a singleton&quot;. :)<br/>\n<br/>\nThomas SMETS wrote:<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; hi Mike,<br/>\n&gt;<br/>\n&gt; Like often I can only thank you.<br/>\n&gt;<br/>\n&gt; I dived into the article.<br/>\n&gt;<br/>\n&gt; Just a word on the usage I make of the Singelton Pattern.<br/>\n&gt;<br/>\n&gt; The Developper assignement I received is the one of the airlain <br/>\n&gt; reservation ticket. The DataBase should serve multiple-clients.<br/>\n&gt;<br/>\n&gt; Without altering the source code of the constructor provided, I added <br/>\n&gt; the following factory :<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt; &lt;code&gt;<br/>\n&gt;<br/>\n&gt;   public static Data getDatabase(String aDBName)<br/>\n&gt;     throws IOException,<br/>\n&gt;             DatabaseException<br/>\n&gt;   {<br/>\n&gt;     // First find the absolute path of the file.<br/>\n&gt;     File f = new File(aDBName);<br/>\n&gt;     aDBName = f.getAbsolutePath ();<br/>\n&gt;     Data db = null;<br/>\n&gt;    <br/>\n&gt;     // Check if we still have a reference to<br/>\n&gt;     // the DB in the HashpMap<br/>\n&gt;     synchronized(DataBaseReferenced)<br/>\n&gt;     {<br/>\n&gt;       if (DataBaseReferenced.containsKey (aDBName))<br/>\n&gt;       {<br/>\n&gt;         db = (Data)DataBaseReferenced.get (aDBName);<br/>\n&gt;         if (db != null)<br/>\n&gt;           return db;<br/>\n&gt;       }<br/>\n&gt;      <br/>\n&gt;       db = new Data(aDBName);<br/>\n&gt;       DataBaseReferenced.put (aDBName, db);     <br/>\n&gt;     } // End of synchronized element<br/>\n&gt;    <br/>\n&gt;     return db;<br/>\n&gt;   }<br/>\n&gt;<br/>\n&gt; &lt;/code&gt;<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt; where the Key (should be a primary key) is the file name (absolute <br/>\n&gt; path). The DataBaseReferenced is in fact a WeakHashMap with the Data <br/>\n&gt; Object being stored as the value - Object.<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt; Any comment on the Pattern used, is most appreciated.<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt; Thomas,<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;     ----- Original Message -----<br/>\n&gt;<br/>\n&gt;     From:Mike Clark &lt;mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:mike@...\">mike@...</a>&gt;<br/>\n&gt;<br/>\n&gt;     To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;<br/>\n&gt;<br/>\n&gt;     Sent: Sunday, December 09, 2001 11:42 PM<br/>\n&gt;<br/>\n&gt;     Subject: Re: [junit] Testing Static class behavior<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;     Thomas SMETS wrote:<br/>\n&gt;<br/>\n&gt;     &gt; Hi,<br/>\n&gt;     &gt; I&#39;m currently testing a Class behavior onto which the<br/>\n&gt;     &gt; Factory (getInstance(param1, param2, ...)) is playing a crucial<br/>\n&gt;     role.<br/>\n&gt;     &gt; That is the class has some sort of a Singelton pattern where<br/>\n&gt;     existing<br/>\n&gt;     &gt; reference for the singelton factory are used to determine if a<br/>\n&gt;     reference to<br/>\n&gt;     &gt; a particula instance already exists.<br/>\n&gt;     &gt;<br/>\n&gt;     &gt; I therefore would need to regerister the class to have the static<br/>\n&gt;     &gt; variablebeing re-initialized. I there something in Java ?<br/>\n&gt;     &gt;<br/>\n&gt;<br/>\n&gt;     Hi Thomas,<br/>\n&gt;<br/>\n&gt;     Depending on the implementation of the singleton you&#39;re attempting<br/>\n&gt;     to test, it<br/>\n&gt;     may be possible to obtain a reference to its sole instance (or<br/>\n&gt;     instances) and<br/>\n&gt;     assign it a null value.  If the implementation uses lazy<br/>\n&gt;     initialization, this<br/>\n&gt;     may trigger reinitialization on the next invocation of getInstance().<br/>\n&gt;<br/>\n&gt;     If you haven&#39;t already read J.B. Rainsberger&#39;s article on the use and<br/>\n&gt;     testability of singletons, I highly recommend it:<br/>\n&gt;<br/>\n&gt;        <br/>\n&gt;     <a rel=\"nofollow\" target=\"_blank\" href=\"http://www-106.ibm.com/developerworks/webservices/library/co-single.html\">http://www-106.ibm.com/developerworks/webservices/library/co-single.html</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;     In general, singletons are often overused and can be difficult to<br/>\n&gt;     test, and<br/>\n&gt;     J.B.&#39;s article offers some practical alternatives.<br/>\n&gt;<br/>\n&gt;     Regards,<br/>\n&gt;<br/>\n&gt;     Mike<br/>\n&gt;<br/>\n&gt;     --<br/>\n&gt;     Mike Clark<br/>\n&gt;     Clarkware Consulting, Inc.<br/>\n&gt;     <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.clarkware.com\">http://www.clarkware.com</a><br/>\n&gt;     720.851.2014<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;     To unsubscribe from this group, send an email to:<br/>\n&gt;     <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;     Your use of Yahoo! Groups is subject to the Yahoo! Terms of<br/>\n&gt;     Service &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt; .<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Sponsor<br/>\n&gt; ADVERTISEMENT<br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://rd.yahoo.com/M=178320.1681224.3270152.1261774/D=egroupweb/S=1705007181:HM/A=879171/R=0/*http://www.fastweb.com/ib/yahoo-57f\">http://rd.yahoo.com/M=178320.1681224.3270152.1261774/D=egroupweb/S=1705007181:HM/A=879171/R=0/*http://www.fastweb.com/ib/yahoo-57f</a>&gt; <br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service <br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt; . </span></blockquote></div>", 
    "prevInTime": 3515, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1008027146", 
    "canDelete": false, 
    "nextInTopic": 3517, 
    "prevInTopic": 3515, 
    "headers": {
        "messageIdInHeader": "PDNDMTU0NjBBLjUwMzA0MDlAZGlhc3BhcnNvZnR3YXJlLmNvbT4=", 
        "referencesHeader": "PDAwM2IwMWMxODEwMSQ4NDcxMWI0MCQ5M2VlNDRkNEBwbG9wPiA8M0MxM0U4RDAuNjdBMjg2MEBjbGFya3dhcmUuY29tPiA8MDBlZTAxYzE4MTZjJDY5MDc0NjIwJDkzZWU0NGQ0QHBsb3A+"
    }
}