{
    "topicId": 2313, 
    "postDate": "997392687", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Martin Dillard&quot; &lt;calmarty@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "Afa21rhfDlLQDQjZqd9-Lscz7TXBaWZJknZSLHZ_8eCcE6saqNjbAHzVzldMNTkchXO08UkdesPEprIjbxexB4dAM6oyKd2reonRyQsL", 
    "nextInTime": 2318, 
    "userId": 0, 
    "prevInTime": 2316, 
    "prevInTopic": 2315, 
    "headers": {
        "messageIdInHeader": "PEYyNTl4YXZqclJaMVViREJSQXIwMDAwMzVkZkBob3RtYWlsLmNvbT4="
    }, 
    "authorName": "Martin Dillard", 
    "numMessagesInTopic": 3, 
    "msgSnippet": "This is basically what I ended up doing but without the database access wrapper. Thank you for your response. ... Get your FREE download of MSN Explorer at", 
    "contentTrasformed": false, 
    "msgId": 2317, 
    "nextInTopic": 0, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;calmarty@...&gt;\r\nX-Sender: calmarty@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_3_1); 9 Aug 2001 21:31:35 -0000\r\nReceived: (qmail 84295 invoked from network); 9 Aug 2001 21:31:28 -0000\r\nReceived: from unknown (10.1.10.142)\n  by l8.egroups.com with QMQP; 9 Aug 2001 21:31:28 -0000\r\nReceived: from unknown (HELO hotmail.com) (216.33.237.25)\n  by mta3 with SMTP; 9 Aug 2001 21:31:27 -0000\r\nReceived: from mail pickup service by hotmail.com with Microsoft SMTPSVC;\n\t Thu, 9 Aug 2001 14:31:27 -0700\r\nReceived: from 64.166.95.134 by lw7fd.law7.hotmail.msn.com with HTTP;\tThu, 09 Aug 2001 21:31:27 GMT\r\nTo: junit@yahoogroups.com\r\nBcc: \r\nSubject: Re: [junit] testing code that inserts into a database\r\nDate: Thu, 09 Aug 2001 14:31:27 -0700\r\nMime-Version: 1.0\r\nContent-Type: text/html\r\nMessage-ID: &lt;F259xavjrRZ1UbDBRAr000035df@...&gt;\r\nX-OriginalArrivalTime: 09 Aug 2001 21:31:27.0652 (UTC) FILETIME=[A5BC1E40:01C1211A]\r\nFrom: &quot;Martin Dillard&quot; &lt;calmarty@...&gt;\r\n\r\n&lt;html&gt;&lt;div style=&#39;background-color:&#39;&gt;&lt;DIV&gt;\n&lt;P&gt;This is basically what I ended up doing but without the database access wrapper. Thank you for your response.&lt;BR&gt;&lt;BR&gt;&lt;/P&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;/DIV&gt;&gt;From: Johannes Link &lt;JOHN.LINK@...&gt;\n&lt;DIV&gt;&lt;/DIV&gt;&gt;Reply-To: junit@yahoogroups.com \n&lt;DIV&gt;&lt;/DIV&gt;&gt;To: junit@yahoogroups.com \n&lt;DIV&gt;&lt;/DIV&gt;&gt;Subject: Re: [junit] testing code that inserts into a database \n&lt;DIV&gt;&lt;/DIV&gt;&gt;Date: Thu, 09 Aug 2001 22:57:12 +0200 \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt;Martin Dillard wrote: \n&lt;DIV&gt;&lt;/DIV&gt;&gt; &gt; My question is on how to test code that inserts into the database. I \n&lt;DIV&gt;&lt;/DIV&gt;&gt; &gt; am concerned about inserting data into the database that may later \n&lt;DIV&gt;&lt;/DIV&gt;&gt; &gt; interfere with my tests that read from the database so I want to make \n&lt;DIV&gt;&lt;/DIV&gt;&gt; &gt; sure that all data is removed from the database after the insert \n&lt;DIV&gt;&lt;/DIV&gt;&gt; &gt; methods are tested. Should this code be in the test method? \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt;One option is to start a top leve transaction in setUp(), rolling it \n&lt;DIV&gt;&lt;/DIV&gt;&gt;back in tearDown() and using only nested transactions inbetween. This \n&lt;DIV&gt;&lt;/DIV&gt;&gt;works *sometimes* and requires, of course, that your database supports \n&lt;DIV&gt;&lt;/DIV&gt;&gt;nested transactions. \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt; &gt; Also, what \n&lt;DIV&gt;&lt;/DIV&gt;&gt; &gt; is the best way to verify that everything was inserted correctly? \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt;Retrieving it with select seems to be the only way unless you mocked \n&lt;DIV&gt;&lt;/DIV&gt;&gt;your database interface. \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt;What we have done a couple of times is to wrap the real database access \n&lt;DIV&gt;&lt;/DIV&gt;&gt;in a wrapping interface which should be as narrow as possible, i.e. \n&lt;DIV&gt;&lt;/DIV&gt;&gt;providing only create, update and delete functionality for your \n&lt;DIV&gt;&lt;/DIV&gt;&gt;persistent objects. Having done that you can mock this interface for \n&lt;DIV&gt;&lt;/DIV&gt;&gt;most of your tests. You need a few tests for checking that your wrapper \n&lt;DIV&gt;&lt;/DIV&gt;&gt;accesses the db correctly but those tests are most of the time very \n&lt;DIV&gt;&lt;/DIV&gt;&gt;straightforward. \n&lt;DIV&gt;&lt;/DIV&gt;&gt; \n&lt;DIV&gt;&lt;/DIV&gt;&gt;Johannes \n&lt;DIV&gt;&lt;/DIV&gt;&lt;/div&gt;&lt;br clear=all&gt;&lt;hr&gt;Get your FREE download of MSN Explorer at &lt;a href=&#39;http://go.msn.com/bql/hmtag_itl_EN.asp&#39;&gt;http://explorer.msn.com&lt;/a&gt;&lt;br&gt;&lt;/html&gt;\n\n", 
    "subject": "Re: [junit] testing code that inserts into a database"
}