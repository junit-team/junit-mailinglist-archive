{
    "numMessagesInTopic": 9, 
    "nextInTime": 15592, 
    "senderId": "GIdQnUBfeqDSWiHDjl7Hx7cTL2FrxA8UdOgX4XfQgu5sfHzDbz75zwkKJ1Kqm3hiRmuc21PWiz4ehz8fIkAjqqsPfid4a7Bo", 
    "systemMessage": false, 
    "subject": "RE: [junit] Parameterisation of tests in JUnit4", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Jon, We intend only to provide basic parameterized test cases in our distribution. However, @RunWith provides a nice place to plug in a more flexible style of", 
    "msgId": 15591, 
    "profile": "kentlbeck", 
    "topicId": 15506, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "messageBody": "<div id=\"ygrps-yiv-503962137\">Jon,<br/>\n<br/>\nWe intend only to provide basic parameterized test cases in our<br/>\ndistribution. However, @RunWith provides a nice place to plug in a more<br/>\nflexible style of parameterized tests. If this would benefit you, it seems<br/>\nreasonable for you to write it and later see if it generally useful. <br/>\n<br/>\nSincerely yours,<br/>\n<br/>\nKent Beck<br/>\nThree Rivers Institute<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; -----Original Message-----<br/>\n&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On <br/>\n&gt; Behalf Of Jon Skeet<br/>\n&gt; Sent: Thursday, November 24, 2005 1:00 AM<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; Subject: [junit] Parameterisation of tests in JUnit4<br/>\n&gt; <br/>\n&gt; I&#39;ve had a look at the Parameterized runner in JUnit4 <br/>\n&gt; (current CVS) and<br/>\n&gt; I have a few suggestions. It&#39;s probably easiest to demonstrate them in<br/>\n&gt; some code which I&#39;d *like* to work (and I&#39;m quite happy to do the<br/>\n&gt; appropriate coding to *make* work):<br/>\n&gt; <br/>\n&gt;     @RunWith(Parameterized.class)<br/>\n&gt;     @Parameters(&quot;classParameters&quot;)<br/>\n&gt; //     Or equivalently @Parameters strings={&quot;Oracle&quot;, &quot;SQL&quot;}<br/>\n&gt;     public class WishfulTest<br/>\n&gt;     {<br/>\n&gt;         private String m_dbName;<br/>\n&gt;         private static final File RootTestFileDirectory = new<br/>\n&gt; File(&quot;c:&#92;&#92;Tests&quot;); <br/>\n&gt;         <br/>\n&gt; \t  // In actual code, these would probably be enums, in my<br/>\n&gt; experience -<br/>\n&gt;         // they would provide mechanisms for connecting to the<br/>\n&gt; appropriate database,<br/>\n&gt;         // setting it up and tearing it down etc.<br/>\n&gt;         public static String[] classParameters = {&quot;Oracle&quot;, &quot;SQL&quot;};<br/>\n&gt;         <br/>\n&gt;         public WishfulTest(String dbName)<br/>\n&gt;         {<br/>\n&gt;             m_dbName = dbName;<br/>\n&gt;         }<br/>\n&gt;         <br/>\n&gt;         // Note - array of arrays here. See comments afterwards.<br/>\n&gt;         public static int[][] test1Parameters = {{0,1}, {1, <br/>\n&gt; 2}, {3, 4}};<br/>\n&gt;         @Test<br/>\n&gt;         // Uses a field to get the parameters<br/>\n&gt;         @Parameters(&quot;test1Parameters&quot;)<br/>\n&gt;         public void test1(int first, int second)<br/>\n&gt;         {<br/>\n&gt;             assertEquals(first+1, second);<br/>\n&gt;         }<br/>\n&gt;         <br/>\n&gt;         /**<br/>\n&gt;          * Finds all the test files for the current database. The File<br/>\n&gt; example<br/>\n&gt;          * here isn&#39;t as good as I&#39;d like it to be - <br/>\n&gt; hardcoding paths is<br/>\n&gt; obviously<br/>\n&gt;          * far from ideal. I hope it gives an indication of what&#39;s<br/>\n&gt; wanted though<br/>\n&gt;          * - a way to get parameters for a specific test, where those<br/>\n&gt; parameters<br/>\n&gt;          * may vary by test class parameters.<br/>\n&gt;          */ <br/>\n&gt;         public File[] getTest2Parameters()<br/>\n&gt;         {<br/>\n&gt;             File directory = new File (RootTestFileDirectory, <br/>\n&gt; m_dbName);<br/>\n&gt;             return directory.listFiles();<br/>\n&gt;         }<br/>\n&gt;         <br/>\n&gt;         @Test<br/>\n&gt;         // Calls a method to get the parameters<br/>\n&gt;         @Parameters(&quot;getTest2Parameters&quot;)<br/>\n&gt;         public void test2(File testFile)<br/>\n&gt;         {<br/>\n&gt;             assertNotNull(testFile);<br/>\n&gt;         }<br/>\n&gt;         <br/>\n&gt;         @Test<br/>\n&gt;         @Parameters(strings={&quot;hello&quot;, &quot;there&quot;})<br/>\n&gt;         public void test3(String input)<br/>\n&gt;         {<br/>\n&gt;             assertEquals(input, input.toLowerCase());<br/>\n&gt;         }<br/>\n&gt;         <br/>\n&gt;         @Test<br/>\n&gt;         @Parameters(ints={1, 2, 3})<br/>\n&gt;         public void test4(int input)<br/>\n&gt;         {<br/>\n&gt;             assertTrue (input &lt; 4);<br/>\n&gt;         }<br/>\n&gt;         <br/>\n&gt;         @Test<br/>\n&gt;         public void test5()<br/>\n&gt;         {<br/>\n&gt;         }<br/>\n&gt;         <br/>\n&gt;         // etc for all primitives, String and class (but not arrays)<br/>\n&gt;         <br/>\n&gt;         // Not allowed:<br/>\n&gt;         // @Parameters(ints={1,2,3}, strings={&quot;hello&quot;})<br/>\n&gt;         // @Parameters(value=&quot;something non-empty&quot;, strings={&quot;hello&quot;})<br/>\n&gt;         // Multiple parameters annotations for a single method/class<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; So, the notes:<br/>\n&gt; 1) Tests are allowed to be parameterised as well as test classes<br/>\n&gt; 2) Unless multiple parameters are required, a single array <br/>\n&gt; (rather than<br/>\n&gt; an array of arrays) causes less confusion. I know that the<br/>\n&gt; counter-argument to that is that having two forms, one for<br/>\n&gt; single-parameter tests/constructors and one for multi-parameter<br/>\n&gt; tests/constructors is ugly, but I personally believe that <br/>\n&gt; it&#39;s justified<br/>\n&gt; in this case.<br/>\n&gt; 3) Parameters can be specified in two ways:<br/>\n&gt;    i) As a simple name of a field or method (currently using <br/>\n&gt; the &quot;value&quot;<br/>\n&gt; annotation element; possibly specifying field=&quot;...&quot; or method=&quot;...&quot;<br/>\n&gt; would be better though. For constructor parameters, the field/method<br/>\n&gt; would have to be static. For test parameters, it<br/>\n&gt; could be static or instance.<br/>\n&gt;    ii) As an array of one of the primitive types, string or class,<br/>\n&gt; directly in the parameters annotation<br/>\n&gt; 4) As mentioned in a previous post, it may be worth having yet another<br/>\n&gt; level of setup/teardown for parameterised test classes - for instance,<br/>\n&gt; in the example above, where you&#39;d run all Oracle tests, then all SQL<br/>\n&gt; Server tests, it may well be advantageous to set the database up once<br/>\n&gt; before running all the tests for a particular database <br/>\n&gt; (assuming they&#39;re<br/>\n&gt; read-only tests). The sequence would then go:<br/>\n&gt; <br/>\n&gt;    Run @BeforeClass methods<br/>\n&gt;    Run @BeforeParameterisedClass methods (with parameter &quot;Oracle&quot;?)<br/>\n&gt;    Call constructor with parameter &quot;Oracle&quot;<br/>\n&gt;    Run @Before methods<br/>\n&gt;    Run test1(0, 1)<br/>\n&gt;    Run @After methods<br/>\n&gt;    Call constructor with parameter &quot;Oracle&quot;<br/>\n&gt;    Run @Before methods<br/>\n&gt;    Run test1(1, 2)<br/>\n&gt;    ...<br/>\n&gt;    Call constructor with parameter &quot;Oracle&quot;<br/>\n&gt;    Run test5()<br/>\n&gt;    Run @After methods<br/>\n&gt;    Run @AfterParameterisedClass methods<br/>\n&gt;    Run @BeforeParameterisedClass methods (with parameter &quot;SQL&quot;?)<br/>\n&gt;    Call constructor with parameter &quot;SQL&quot;<br/>\n&gt;    ...<br/>\n&gt;    Call constructor with parameter &quot;SQL&quot;<br/>\n&gt;    Run test5()<br/>\n&gt;    Run @After methods<br/>\n&gt;    Run @AfterParameterisedClass methods<br/>\n&gt;    Run @AfterClass methods<br/>\n&gt; <br/>\n&gt; Note the question over whether @BeforeParameterisedClass (bad name -<br/>\n&gt; please come up with a better one if you can!) should take the same<br/>\n&gt; parameters as the constructor. As an alternative, they could <br/>\n&gt; be instance<br/>\n&gt; methods called *after* the constructor is called for the <br/>\n&gt; first time, and<br/>\n&gt; be parameterless. (Likewise @AfterParameterisedClass could be an<br/>\n&gt; instance method.)<br/>\n&gt; <br/>\n&gt; 5) One nasty problem: you need to construct instances of the <br/>\n&gt; test class<br/>\n&gt; just to count the test cases - and hope that the parameters <br/>\n&gt; you get back<br/>\n&gt; then is the same as the ones you get when you&#39;re ready to run <br/>\n&gt; the tests.<br/>\n&gt; (You could cache the results, of course...)<br/>\n&gt; <br/>\n&gt; Anyway, the bottom line is that I can see *huge* benefits in this<br/>\n&gt; approach in quite a few of our existing test code. Does <br/>\n&gt; anyone have any<br/>\n&gt; major objections to the above, or shall I give it a whirl?<br/>\n&gt; <br/>\n&gt; Jon Skeet<br/>\n&gt; Senior Software Engineer<br/>\n&gt; CLEARSWIFT<br/>\n&gt; The MIMEsweeper Company<br/>\n&gt; <br/>\n&gt; DDI:               +44 (0) 1189  038  109<br/>\n&gt; Mobile:           +44 (0) 7970 158 865<br/>\n&gt; Switchboard:   +44 (0) 1189  038  903 <br/>\n&gt; Fax:               +44 (0) 1189  039  000      <br/>\n&gt; Web: www.clearswift.com <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Clearswift monitors, controls and protects all its messaging <br/>\n&gt; traffic in compliance with its corporate email policy using <br/>\n&gt; Clearswift products.<br/>\n&gt; Find out more about Clearswift, its solutions and services at <br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.clearswift.com\">http://www.clearswift.com</a><br/>\n&gt; <br/>\n&gt; This communication is confidential and may contain privileged <br/>\n&gt; information intended solely for the named addressee(s). It <br/>\n&gt; may not be used or disclosed except for the purpose for which <br/>\n&gt; it has been sent. If you are not the intended recipient, you <br/>\n&gt; must not copy, distribute or take any action in reliance on <br/>\n&gt; it. Unless expressly stated, opinions in this message are <br/>\n&gt; those of the individual sender and not of Clearswift. If you <br/>\n&gt; have received this communication in error, please notify <br/>\n&gt; Clearswift by emailing <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:support@...\">support@...</a> quoting the <br/>\n&gt; sender and delete the message and any attached documents. <br/>\n&gt; Clearswift accepts no liability or responsibility for any <br/>\n&gt; onward transmission or use of emails and attachments having <br/>\n&gt; left the Clearswift domain.<br/>\n&gt; <br/>\n&gt; This footnote confirms that this email message has been swept <br/>\n&gt; by MIMEsweeper for Content Security threats, including <br/>\n&gt; computer viruses.<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ------------------------ Yahoo! Groups Sponsor <br/>\n&gt; --------------------~--&gt; <br/>\n&gt; Get fast access to your favorite Yahoo! Groups. Make Yahoo! <br/>\n&gt; your home page<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://us.click.yahoo.com/dpRU5A/wUILAA/yQLSAA/5cFolB/TM\">http://us.click.yahoo.com/dpRU5A/wUILAA/yQLSAA/5cFolB/TM</a><br/>\n&gt; --------------------------------------------------------------<br/>\n&gt; ------~-&gt; <br/>\n&gt; <br/>\n&gt;  <br/>\n&gt; Yahoo! Groups Links<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 15590, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1133338183", 
    "canDelete": false, 
    "nextInTopic": 15595, 
    "prevInTopic": 15561, 
    "headers": {
        "inReplyToHeader": "PDZFQUE4QUQ4MkQ3RUJGNDc4Q0NFMjYyRkEzMkM2QzY0MDFCNTY5QjdAR0VNSU5JLkVVUk9QRS5DTEVBUlNXSUZULkNPTT4=", 
        "messageIdInHeader": "PEUxRWhOMjktMDAwMEx3LUtUQHNtdHBhdXRoMDIubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4="
    }
}