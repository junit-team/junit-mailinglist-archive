{
    "numMessagesInTopic": 9, 
    "nextInTime": 7382, 
    "senderId": "jKRRC5bDvojozWWdsXGp2N11QXpRjHinXSe54Yqj3GAfvVtcWo4UVZvPxrxOgj3A5ckpm994WCXE9TfJM4afzAs9_CVQ3g5Gq7-3PBb6IZL8Uf3tvAmowkM", 
    "systemMessage": false, 
    "subject": "RE: [junit] ThreadLocal", 
    "from": "&quot;Shellman, Joel&quot; &lt;joel.shellman@...&gt;", 
    "authorName": "Shellman, Joel", 
    "msgSnippet": "Jeff, did you design this up front, or did this evolve from TDD (Test Driven Development)? I m curious as to what solution would naturally evolve out of TDD", 
    "msgId": 7381, 
    "rawEmail": "Return-Path: &lt;Joel.Shellman@...&gt;\r\nReceived: (qmail 12584 invoked from network); 2 Apr 2003 00:21:15 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m11.grp.scd.yahoo.com with QMQP; 2 Apr 2003 00:21:15 -0000\r\nReceived: from unknown (HELO n23.grp.scd.yahoo.com) (66.218.66.79)\n  by mta3.grp.scd.yahoo.com with SMTP; 2 Apr 2003 00:21:15 -0000\r\nX-eGroups-Return: Joel.Shellman@...\r\nReceived: from [66.218.67.250] by n23.grp.scd.yahoo.com with NNFMP; 02 Apr 2003 00:21:08 -0000\r\nX-Sender: Joel.Shellman@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 25 Mar 2003 21:32:30 -0000\r\nReceived: (qmail 2973 invoked from network); 25 Mar 2003 21:32:29 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m6.grp.scd.yahoo.com with QMQP; 25 Mar 2003 21:32:29 -0000\r\nReceived: from unknown (HELO firewall245.fiserv.com) (12.2.10.245)\n  by mta1.grp.scd.yahoo.com with SMTP; 25 Mar 2003 21:32:29 -0000\r\nReceived: from fiserv.com (root@localhost)\n\tby firewall245.fiserv.com (8.8.8/8.8.7) with ESMTP id PAA12961\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 25 Mar 2003 15:34:04 -0600 (CST)\r\nReceived: by Fiserv.US ; Tue, 25 Mar 2003 15:30:23 -0600\r\nHop-Count: 1\r\nDate: Tue, 25 Mar 2003 15:30:23 -0600\r\nSender: &quot;Shellman, Joel&quot; &lt;Joel.Shellman@...&gt;\r\nSubject: RE: [junit] ThreadLocal\r\nTo: &quot;junit@yahoogroups.com&quot; &lt;junit@yahoogroups.com&gt;\r\nMessage-ID: &lt;EX-20030325-153346-0005@...-missive1.fiserv.net&gt;\r\nImportance: Normal\r\nOriginal-To: &#39;junit@yahoogroups.com&#39;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=US-ASCII\r\nFrom: &quot;Shellman, Joel&quot; &lt;joel.shellman@...&gt;\r\nX-Yahoo-Group-Post: member; u=135169457\r\nX-Yahoo-Profile: joelshellman\r\nX-eGroups-Approved-By: clarkware &lt;mike@...&gt; via web; 02 Apr 2003 00:21:08 -0000\r\n\r\nJeff, did you design this up front, or did this evolve from TDD (Test Driven Development)?\n\nI&#39;m curious as to what solution would naturally evolve out of TDD for this (and whether there is only one design that would given strict conformance to certain guidelines). Extrapolating Kent Beck&#39;s example in his TDD book, one might expect what Jeff has outlined below--with factories passed in to the constructors since he refactored out duplication by passing it in to the constructor (at least in a couple cases).\n\nOne of the great benefits of passing in factories and collaborators is that you can significantly increase the reuse and usefulness of each class. New functionality could be added by simply passing in a different factory.\n\nHaving said that, I&#39;ve used the ThreadLocal approach before and it seems to work fine both in production and for testing, but I&#39;m still a little uncomfortable with it from a design standpoint.\n\nJoel Shellman\n\n\n&gt; -----Original Message-----\n&gt; From: Jeff Nielsen \n&gt; Sent: Monday, March 24, 2003 5:24 PM\n&gt; To: junit@yahoogroups.com\n&gt; Subject: Re: [junit] ThreadLocal\n&gt; \n&gt; \n&gt; A common pattern we use with our web apps is this.\n&gt; \n&gt; - Factories manage the creation of resources for the next \n&gt; level down (e.g., web tier -&gt; EJB tier, EJB tier -&gt; integration tier)\n&gt; \n&gt; - Classes that need to access/instantiate resources in a \n&gt; lower layer (e.g., an EJB that needs a DB connection) take a \n&gt; factory object at construction time.\n&gt; \n&gt; - The factories are configured at runtime using simple java \n&gt; property files (e.g., use.database=true, use.ejbs=false)\n&gt; \n&gt; - Test code can configure factories using parameters (e.g., \n&gt; testFactory = new DataSourceFactory(false) . . . ) and pass \n&gt; these factories in to the\n&gt; object(s) under test.\n&gt; \n&gt; This allows us to ensure that tests always use the mock \n&gt; objects, without &quot;cluttering&quot; the production code with lots \n&gt; of conditional logic or extra method parameters.\n&gt; \n&gt; Jeff Nielsen\n&gt; Digital Focus\n&gt; www.digitalfocus.com\n\n\n\n", 
    "profile": "joelshellman", 
    "topicId": 7316, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 135169457, 
    "prevInTime": 7380, 
    "contentTrasformed": false, 
    "postDate": "1048627823", 
    "canDelete": false, 
    "nextInTopic": 7401, 
    "prevInTopic": 7333, 
    "headers": {
        "messageIdInHeader": "PEVYLTIwMDMwMzI1LTE1MzM0Ni0wMDA1QGV4Y2hhbmdlLmZpc2Vydi1taXNzaXZlMS5maXNlcnYubmV0Pg=="
    }
}