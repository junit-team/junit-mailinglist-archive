{
    "numMessagesInTopic": 9, 
    "nextInTime": 16038, 
    "senderId": "TzE8wQsNb1rfaO1hPKzWDLu7qOF3hwjQjiLEJWsYbRJHw0FS_eSXPPQs1D0KjuyhQLjdVIVxi3hHUyWzTIH7IonK23fR0JFyiQ", 
    "systemMessage": true, 
    "subject": "Re: testing private methods in Struts Actions ?", 
    "from": "&quot;frank zou&quot; &lt;frankz1998@...&gt;", 
    "authorName": "frank zou", 
    "msgSnippet": "Rainsberger, thanks for you input here. Please check my comments and further questions inline. ... [Frank] I am not sure what a testing guru would test for", 
    "msgId": 16037, 
    "rawEmail": "Return-Path: &lt;frankz1998@...&gt;\r\nReceived: (qmail 10463 invoked from network); 9 Feb 2006 21:07:06 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m14.grp.scd.yahoo.com with QMQP; 9 Feb 2006 21:07:06 -0000\r\nReceived: from unknown (HELO n1a.bullet.dcn.yahoo.com) (216.155.203.221)\n  by mta8.grp.scd.yahoo.com with SMTP; 9 Feb 2006 21:07:05 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [216.155.201.65] by n1.bullet.dcn.yahoo.com with NNFMP; 09 Feb 2006 21:07:03 -0000\r\nReceived: from [66.218.69.2] by t2.bullet.dcn.yahoo.com with NNFMP; 09 Feb 2006 21:06:56 -0000\r\nReceived: from [66.218.66.85] by t2.bullet.scd.yahoo.com with NNFMP; 09 Feb 2006 21:06:55 -0000\r\nX-Sender: frankz1998@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 31908 invoked from network); 9 Feb 2006 13:15:02 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m33.grp.scd.yahoo.com with QMQP; 9 Feb 2006 13:15:02 -0000\r\nReceived: from unknown (HELO n9a.bullet.dcn.yahoo.com) (216.155.203.232)\n  by mta9.grp.scd.yahoo.com with SMTP; 9 Feb 2006 13:15:02 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [216.155.201.64] by n9.bullet.dcn.yahoo.com with NNFMP; 09 Feb 2006 13:15:01 -0000\r\nReceived: from [66.218.66.59] by t1.bullet.dcn.yahoo.com with NNFMP; 09 Feb 2006 13:15:01 -0000\r\nReceived: from [66.218.66.78] by t8.bullet.scd.yahoo.com with NNFMP; 09 Feb 2006 13:15:00 -0000\r\nDate: Thu, 09 Feb 2006 13:15:00 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;dsff8k+t7qj@...&gt;\r\nIn-Reply-To: &lt;43EAB929.2060900@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;frank zou&quot; &lt;frankz1998@...&gt;\r\nSubject: Re: testing private methods in Struts Actions ?\r\nX-Yahoo-Group-Post: member; u=193176558; y=lz0dwxoEyap5eErmMFzWNfzSeidoevH8TsoMwMJWRn5CFvcszg\r\nX-Yahoo-Profile: frankz1998\r\nX-eGroups-Approved-By: vbossica &lt;vladimir@...&gt; via web; 09 Feb 2006 21:06:54 -0000\r\n\r\n\nRainsberger, thanks for you input here. Please check my comments and\nfurth=\r\ner questions inline. \n\n--- In junit@yahoogroups.com, &quot;J. B. Rainsberger&quot; &lt;j=\r\nbrains@...&gt; wrote:\n&gt; \n&gt; What do you want to test here?\n&gt; \n&gt; 1. How well you=\r\nr business logic integrates with Struts (reading form \n&gt; beans, populating =\r\nerror messages, that kind of thing..)\n&gt; \n&gt; or\n&gt; \n&gt; 2. Your business logic i=\r\ntself\n\n\n[Frank] I am not sure what a testing guru would test for this case.=\r\n\nWhat I want to test here include: \n* the Action code is correct.\n* the act=\r\nion configration is correct. \n\nWhat I do not want to test: \n* the biz layer=\r\n code does its work correctly.\n\n&gt; Either way, putting the business logic di=\r\nrectly into the Struts Action \n&gt; creates a problem; therefore, create a sep=\r\narate class for your business \n&gt; logic and have the Struts Action invoke it=\r\n. It looks somethign like\nthis:\n\n&gt; public ActionForward execute(ActionMappi=\r\nng mapping, ActionForm form,\n&gt;                    HttpServletRequest reques=\r\nt,\n&gt;                    HttpServletResponse response)\n&gt;        {\n&gt; \n&gt;      =\r\n        createEventLog(request);\n&gt; \n&gt;              handleSessionAndToken(re=\r\nquest);\n&gt; \n&gt;              doBusinessLogic(new BusinessLogicImpl(...));\n&gt;   =\r\n           ...\n&gt;              clearUserRelatedCookies(siteId, response);\n&gt; =\r\n\n&gt;              String returnUrl =3D createReturnUrl(mapping, request);\n&gt;  =\r\n            request.setAttribute(LOGIN_RETURN_URL, returnUrl);\n&gt;           =\r\n   return mapping.findForward(PAGE_SUCCESS);\n&gt;        }\n&gt; \n&gt; public void do=\r\nBusinessLogic(BusinessLogic logic) {\n&gt;      logic.execute();\n&gt; }\n&gt;\n\n \n&gt; Now=\r\n the interface BusinessLogic represents your transaction script. The \n&gt; imp=\r\nlementation BusinessLogicImpl does the production work. You can test \n&gt; the=\r\n business logic on its own by instantiating whatever you need:\naction \n&gt; fo=\r\nrm objects, request objects, whatever. \n\n\n\n[Frank]\nI agree with you in that=\r\n we should extract biz logic from struts\nactions. However, for this specifi=\r\nc case, I am not sure what would be\nthe approparite way to do it. \n\nHere ar=\r\ne the brief description of what the 4 private methods do: \n* createEventLog=\r\n(...):  insert some logging information to DB. \n* createReturnUrl(...): cre=\r\nate the &quot;return url&quot; based on complex biz\nlogic. Actually, several biz laye=\r\nr objects support this method. \n* clearUserRelatedCookies(...): clear user =\r\nrelated cookies \n* handleSessionAndToken(...): take care of something in Ht=\r\ntpSession. \n\nI guess I can create a separate biz interface and implementati=\r\non for\ncreateEventLog(...) and createReturnUrl(...), like you did.\nHowever,=\r\nthis implies a dedicated biz class is needed to create for\nthis specific ac=\r\ntion meanwhile some other biz layer classes are\nalready involved. Consideri=\r\nng we may have hundereds of Action classes,\nwe will end up with hundereds o=\r\nf dedicated biz classes for every and\neach Action class. \n\nThis way, it see=\r\nms for every action we have a biz delegate class. Is\nthat you intend to do =\r\n?\n\n\n[Frank] Another concern is about clearUserRelatedCookies(...) and\nhandl=\r\neSessionAndToken(...). These 2 private methods do their work on\nWeb layer a=\r\nnd it seems difficult to take them as any biz logic. so it\nseems not approp=\r\nriate to put them into any separate biz class. If so,\nhow should I test the=\r\nm ? Or should I make them protected / public,\njust in order to make the tes=\r\nting easier ? \n\n\n\n&gt; You can test the integration \n&gt; with Struts by faking/m=\r\nocking the business logic (Google &quot;jmock&quot;).\n&gt; \n\n[Frank] I am not sure how y=\r\nou would do it here. What I was trying to\ndo is to use StrutsTestCase to te=\r\nst the execute(...) method as a\nwhole, meanwhile mocking out the biz logic =\r\nusing JMock. Since java\ndoes not allowed us to inherit 2 parent classes, I =\r\nwrote a wrapper for\nStrusTestCase and merge JMock function into it. This wa=\r\ny, I can run my\nStrutsTestCase in isolation of biz / DAO code. \n\nHow do you=\r\n like this apporach ? Or do you think when using\nStrutsTestCase, there is n=\r\no need to mock out biz code ? Or do you\nthink  StrusTestCase does not even =\r\ndo a Unit Testing and is not worth\ndoing. \n\n&gt; The entire technique probably=\r\n requires 10 pages to describe with \n&gt; examples, so I won&#39;t be doing that h=\r\nere. :)\n&gt; \n\n[Frank] Maybe the issue is that sometimes I feel it is not so c=\r\nlear\nwhat is real biz logic code and what is not. If I do not get you\nwrong=\r\n, you may extract everything possible to other separate classes,\nso that th=\r\nere seem nothing interesting left for Action classes\nthemselves. Is that ri=\r\nght ?\n\nEnglish is just my second language. I am not sure whether I express\n=\r\nmyself clear enough. :(\n\n\n&gt; Good luck.\n&gt; -- \n&gt; J. B. (Joe) Rainsberger :: h=\r\nttp://www.jbrains.info\n&gt; Your guide to software craftsmanship\n&gt; JUnit Recip=\r\nes: Practical Methods for Programmer Testing\n&gt; 2005 Gordon Pask Award for c=\r\nontribution Agile Software Practice\n&gt;\n\n\n\n\n\n\n\n\n\n", 
    "profile": "frankz1998", 
    "topicId": 16019, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 193176558, 
    "prevInTime": 16036, 
    "contentTrasformed": false, 
    "postDate": "1139490900", 
    "canDelete": false, 
    "nextInTopic": 16049, 
    "prevInTopic": 16031, 
    "headers": {
        "inReplyToHeader": "PDQzRUFCOTI5LjIwNjA5MDBAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PGRzZmY4ayt0N3FqQGVHcm91cHMuY29tPg=="
    }
}