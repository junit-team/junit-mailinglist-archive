{
    "numMessagesInTopic": 2, 
    "nextInTime": 16349, 
    "senderId": "Icrde4rX_-xxyIBhpDVvPb1nWrk8Gzf0zIDEaW1tdJ_nX9X4CqjnhCjkJqwrLfaAwsXa5yJJNifvPipDSfI3cjlE2l5dIzLq6g", 
    "systemMessage": false, 
    "subject": "Re: [junit] How to wait till all threads done their work in  ant-junit ?", 
    "from": "&quot;Neil Swingler&quot; &lt;neil@...&gt;", 
    "authorName": "Neil Swingler", 
    "msgSnippet": "... Well you could synchronize with the event thread by calling SwingUtilities.invokeAndWait from your test thread. This will ensure any pending swing jobs are", 
    "msgId": 16348, 
    "profile": "neil_swingler", 
    "topicId": 16336, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 230174996, 
    "messageBody": "<div id=\"ygrps-yiv-141859093\">Bart Reader writes: <br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; We tested the controllers of some views where the longer tasks are executed<br/>\n&gt; with swingworker(in a separate thread). For the tests we used Thread.yield()<br/>\n&gt; before asserting to wait till these tasks are done. This works fine when it<br/>\n&gt; runs in the ide but not when we run the test via the ant junit task. Via ant<br/>\n&gt; the currentthread don&#39;t yield long enough and the testing starts before the<br/>\n&gt; tasks are done .<br/>\n&gt; After some try and error we found that the thread only waits long enough if<br/>\n&gt; we put in three times Thread.yield().<br/>\n&gt; But it&#39;s not a very elegant solution.<br/>\n&gt; Is there an other solution to solve this ? <br/>\n&gt; <br/>\n<br/>\n </span></blockquote>Well you could synchronize with the event thread by calling <br/>\nSwingUtilities.invokeAndWait from your test thread. This will ensure any <br/>\npending swing jobs are executed first. <br/>\n<br/>\nHowever, multithreaded tasts are always a PITA so I would recomend using the <br/>\nExecutor class from java.util.concurrent and abstracting the execution of <br/>\nyour tasks in that. In my event driven unit tests, I use an immediate <br/>\nexecutor to execute my callbacks so that they happen in the same thread. In <br/>\nproduction, an executor is used which runs the task on the AWT event thread <br/>\nusing invokeLater. <br/>\n<br/>\n - Neil</div>", 
    "prevInTime": 16347, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1142610078", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 16336, 
    "headers": {
        "inReplyToHeader": "PDY2NTQ5M2I1MDYwMzA4MjMyN3kxMmViNjdhNnVAbWFpbC5nbWFpbC5jb20+", 
        "messageIdInHeader": "PDIwMDYwMzE3MTU0MTE4LkQ3M0M5MjBEQjNAc2VydjAxLnN3aW5nbGVyLmNoPg==", 
        "referencesHeader": "PDY2NTQ5M2I1MDYwMzA4MjMyN3kxMmViNjdhNnVAbWFpbC5nbWFpbC5jb20+"
    }
}