{
    "numMessagesInTopic": 7, 
    "nextInTime": 23351, 
    "senderId": "dNuU4AchSFM6V2CbaX2GyMcx18_4NjUMc-TFMnoFONOeJg6XShAbOikhZTJIQ6RFcgkfd08fLGM0RBLGgbcdl_B4", 
    "systemMessage": true, 
    "subject": "Re: Unit Testing best practices", 
    "from": "&quot;hkaipe&quot; &lt;hkaipe@...&gt;", 
    "authorName": "hkaipe", 
    "msgSnippet": "Hi Daniel I think you are right on track when you recognize that validations on the input parameters, providing defaults if the parameters are not valid will", 
    "msgId": 23350, 
    "rawEmail": "Return-Path: &lt;hkaipe@...&gt;\r\nReceived: (qmail 57118 invoked from network); 27 Mar 2011 20:01:03 -0000\r\nReceived: from unknown (98.137.34.45)\n  by m3.grp.sp2.yahoo.com with QMQP; 27 Mar 2011 20:01:03 -0000\r\nReceived: from unknown (HELO n45b.bullet.mail.sp1.yahoo.com) (66.163.168.159)\n  by mta2.grp.sp2.yahoo.com with SMTP; 27 Mar 2011 20:01:02 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1301256061; bh=aRxVOT8Or0kLJVbznzLy2juVHOwHTKbtBkojzdNg5eE=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:Date:To:Message-ID:In-Reply-To:User-Agent:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-Yahoo-Newman-Property:X-Originating-IP:X-Yahoo-Post-IP:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:X-YGroups-SubInfo:Sender:X-eGroups-Approved-By:X-eGroups-Auth; b=uXkctLp/eYSWR5vM8R+++62m+3o1ogPss3uS3ZgEG+rBVDkIaQ3Hz09LK1hnOOKXMaWCi22OugJF7iVof4hCnWq1p4oXvT1yciAidffmLSxTtZTrH5RHtZQAduE6lMJw\r\nReceived: from [69.147.65.147] by n45.bullet.mail.sp1.yahoo.com with NNFMP; 27 Mar 2011 20:01:01 -0000\r\nReceived: from [98.137.34.34] by t10.bullet.mail.sp1.yahoo.com with NNFMP; 27 Mar 2011 20:00:40 -0000\r\nX-Sender: hkaipe@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 46504 invoked from network); 27 Mar 2011 16:13:47 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m11.grp.re1.yahoo.com with QMQP; 27 Mar 2011 16:13:47 -0000\r\nX-Received: from unknown (HELO n44d.bullet.mail.sp1.yahoo.com) (66.163.169.158)\n  by mta2.grp.re1.yahoo.com with SMTP; 27 Mar 2011 16:13:47 -0000\r\nX-Received: from [69.147.65.174] by n44.bullet.mail.sp1.yahoo.com with NNFMP; 27 Mar 2011 16:13:46 -0000\r\nX-Received: from [98.137.34.72] by t12.bullet.mail.sp1.yahoo.com with NNFMP; 27 Mar 2011 16:13:46 -0000\r\nDate: Sun, 27 Mar 2011 16:13:46 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;imnnnq+miu5@...&gt;\r\nIn-Reply-To: &lt;ilr6nj+4brm@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nFrom: &quot;hkaipe&quot; &lt;hkaipe@...&gt;\r\nSubject: Re: Unit Testing best practices\r\nX-Yahoo-Group-Post: member; u=478409128; y=zANDpaVJ8wVTf2xl4a8D9qH8qImQME5YD1YVyDAie0kl-0LPabX8Yv1AtA\r\nX-Yahoo-Profile: hkaipe\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 27 Mar 2011 20:00:39 -0000\r\n\r\n\n\n\n\n\nHi Daniel\n\nI think you are right on track when you recognize that &quot;val=\r\nidations on the input parameters, providing defaults if the parameters are =\r\nnot valid&quot; will make &quot;the number of testing methods&quot; skyrocket quickly when=\r\n you want to &quot;test all variations of invalid input on all three constructor=\r\ns&quot;.\n\nDuring the past ten years I have spent some time thinking over similar=\r\n problems myself and the fruit is a JUnit-extension for parameterized tests=\r\n - CallbackParams http://callbackparams.org - that I released as open-sourc=\r\ne a couple of months ago. When using CallbackParams for your Account exampl=\r\ne - a &quot;best practice&quot; could be ...\n ... one test-class per constructor (sim=\r\nilar to David&#39;s suggestion)\n ... one enum(!) per constructor parameter (e.g=\r\n. enum AccountId / enum OwnerName / enum Balance)\n ... one enum-constant fo=\r\nr each value you would like to test\n\nTo demonstrate this I have made the cl=\r\nass &quot;TestAccount&quot;, which is committed to the svn-repo:\nhttp://callbackparam=\r\ns.svn.sourceforge.net/viewvc/callbackparams/trunk/junit4-tests/src/test/jav=\r\na/org/callbackparams/demo/TestAccount.java?revision=3D18&view=3Dmarkup\n\nThe=\r\n test uses BddRunner (one of two JUnit-runner offered by CallbackParams) an=\r\nd has this general structure:\n\n@RunWith(Suite.class)\n@...({\n=\r\n \tTestAccount.Constructor_1.class,\n \tTestAccount.Constructor_2.class,\n \tTes=\r\ntAccount.Constructor_3.class})\npublic class TestAccount {\n\n    @Retention(R=\r\netentionPolicy.RUNTIME)\n    @interface ValidationFailure {String value();}\n=\r\n\n\n    @RunWith(BddRunner.class)\n    @CombineConfig(strategy=3DCombineComple=\r\ntely.class)\n    public static class Constructor_1 {\n        Account account=\r\n;\n        String accountIdConstructorArg;\n        ...\n        @When void cr=\r\neateAccount() {\n            account =3D new Account(accountIdConstructorArg=\r\n);\n        }\n\n\t@Then void verifyDefaults() {...}\n\n        enum AccountId {\n=\r\n            @ValidationFailure(...) ACCOUNT_ID_NULL(null),\n            @Val=\r\nidationFailure(...) ACCOUNT_ID_EMPTY(&quot;&quot;),\n            ACCOUNT_ID_VALID(&quot;123=\r\n456789-0&quot;),\n            @ValidationFailure(...) ACCOUNT_ID_INVALID(&quot;HM?&quot;);\n=\r\n            ...\n            @Given void setupAccountIdConstructorArg(Constr=\r\nuctor_1 test) {...}\n            @Then void verifyAccountId(Account account)=\r\n {...}\n        }\n    }\n\n\n    public static class Constructor_2 extends Cons=\r\ntructor_1 {\n        String ownerNameConstructorArg;\n\n        @When @Overrid=\r\ne void createAccount() {\n            account =3D new Account(accountIdConst=\r\nructorArg, ownerNameConstructorArg);\n        }\n\n        @Then @Override voi=\r\nd verifyDefaults() {...}\n\n        enum OwnerName {\n            ...\n        =\r\n    @Given void setupOwnerNameConstructorArg(Constructor_2 test) {...}\n    =\r\n        @Then void verifyOwnerName(Account account) {...}\n        }\n    }\n\n=\r\n\n    public static class Constructor_3 extends Constructor_2 {\n        Doub=\r\nle balanceConstructorArg;\n        ...\n        enum Balance {\n            ..=\r\n.\n        }\n    }\n}\n\nUnlike traditional parameterized tests the parameter v=\r\nalues are not primitive - instead they are enum constants, which each has o=\r\nne @Given-method - for setting up the constructor argument that the enum cl=\r\nass concerns - and one @Then-method - for verifying the resulting account. =\r\n(There is no test-method that calls these methods - that is taken care of u=\r\nnder-the-hood by BddRunner.) Please note that it is possible for individual=\r\n enum-constants to override methods and this is what the constants OWNER_NU=\r\nLL and BALANCE_NULL do in order to verify that the null-argument results in=\r\n the proper default value.\n\nMy test-example has four constants per enum, i.=\r\ne. there are four different values tested for each constructor parameter. E=\r\nach test will pick exactly one enum-constant from each of its nested enum-c=\r\nlasses. This means that Constructor_1 will produce four tests - one for eac=\r\nh AccountId-constant. Constructor_2 produces 16 tests - one for each combin=\r\nation of OwnerName and AccountId, where the enum AccountId will be availabl=\r\ne since it is nested by the super-class! Thereafter Constructor_3 will prod=\r\nuce one test for each possible combination of AccountId, OwnerName and Bala=\r\nnce etc ... This will result in a total of 84 tests, which will be named li=\r\nke this:\n\nTest-class TestAccount$Constructor_1$BDD$ (4 tests)\n  test[ACCOUN=\r\nT_ID_NULL]\n  test[ACCOUNT_ID_EMPTY]\n  test[ACCOUNT_ID_VALID]\n  test[ACCOUNT=\r\n_ID_INVALID]\n\nTest-class TestAccount$Constructor_2$BDD$ (16 tests)\n  test[A=\r\nCCOUNT_ID_NULL, OWNER_DEFAULT]\n  test[ACCOUNT_ID_NULL, OWNER_NULL]\n  test[A=\r\nCCOUNT_ID_NULL, OWNER_VALID]\n  test[ACCOUNT_ID_NULL, OWNER_NAME_INVALID]\n  =\r\ntest[ACCOUNT_ID_EMPTY, OWNER_DEFAULT]\n  ...\n  test[ACCOUNT_ID_INVALID, OWNE=\r\nR_NAME_INVALID]\n\nTest-class TestAccount$Constructor_3$BDD$ - (64 tests)\n  t=\r\nest[ACCOUNT_ID_NULL, OWNER_DEFAULT, BALANCE_DEFAULT]\n  test[ACCOUNT_ID_NULL=\r\n, OWNER_DEFAULT, BALANCE_NULL]\n  test[ACCOUNT_ID_NULL, OWNER_DEFAULT, BALAN=\r\nCE_10000]\n  test[ACCOUNT_ID_NULL, OWNER_DEFAULT, BALANCE_NEGATIVE]\n  test[A=\r\nCCOUNT_ID_NULL, OWNER_NULL, BALANCE_DEFAULT]\n  ...\n  test[ACCOUNT_ID_INVALI=\r\nD, OWNER_NAME_INVALID, BALANCE_NEGATIVE]\n\nSo instead of having &quot;one single =\r\nthing in each unit test&quot; we now have ~one single thing in each enum-constan=\r\nt~ and no test-method. For the &quot;all variations of invalid input on all thre=\r\ne constructors&quot;-thing - CallbackParams handles it by combining the enum-con=\r\nstants.\n\nI may be somewhat biased :-) but from how you describe your intent=\r\nions I think CallbackParams is what fits your needs.\n\nFor more information =\r\non BddRunner: http://callbackparams.org/part1-maintain.html#bdd\n\nThe annota=\r\ntion @ValidationFailure is used to annotate each enum-constant that is expe=\r\ncted to cause an exception. It is part of a Rule-based pattern that is furt=\r\nher described here:\nhttp://callbackparams.org/part2-validate.html\n\nGreeting=\r\ns\n/Henrik Kaipe\n\n--- In junit@yahoogroups.com, &quot;Daniel&quot; &lt;dtoffe@...&gt; wrote:=\r\n\n&gt;\n&gt; Hi all,\n&gt; \n&gt;     I&#39;m rather new to unit testing and after reading abou=\r\nt best practices on the net and some attempts on my own, I still have doubt=\r\ns, hope this is a right place to ask.\n&gt;     Let&#39;s say I have an Account cla=\r\nss with three fields, accountId, ownerName and balance. This class has thre=\r\ne constructors:\n&gt; \n&gt; Account(String accountId)\n&gt; Account(String accountId, =\r\nString ownerName)\n&gt; Account(String accountId, String ownerName, Double bala=\r\nnce)\n&gt; \n&gt;     and these constructors have to do some validations on the inp=\r\nut parameters, providing defaults if the parameters are not valid.\n&gt;     No=\r\nw, let&#39;s say I want to test all variations of invalid input on all three co=\r\nnstructors, for example:\n&gt; \n&gt; Account(null)\n&gt; Account(&quot;&quot;, null, 1575.0)\n&gt; \n=\r\n&gt;     I&#39;ve learned that a best practice is to test one single thing in each=\r\n unit test. If I write my test as.\n&gt; \n&gt; testConstructor1AccountIdNull\n&gt; tes=\r\ntConstructor1AccountIdEmpty\n&gt; testConstructor1AccountIdExampleValue\n&gt; etc,\n=\r\n&gt; \n&gt;     the number of testing methods skyrockets quickly.\n&gt;     So my ques=\r\ntion is, am I doing it wrong, is there any other simpler best practice to t=\r\nest all variations of input values ?\n&gt;     I&#39;ve seen the @Parameter annotat=\r\nion in JUnit 4.x, can I use it with multiple constructors and data sets in =\r\none unit testing class, or must I spread it into one class for each constru=\r\nctor and data array definition ?\n&gt; \n&gt; Thanks in advance,\n&gt; \n&gt; Daniel\n&gt;\n\n\n\n", 
    "profile": "hkaipe", 
    "topicId": 23330, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 478409128, 
    "prevInTime": 23349, 
    "contentTrasformed": false, 
    "postDate": "1301242426", 
    "canDelete": false, 
    "nextInTopic": 23363, 
    "prevInTopic": 23344, 
    "headers": {
        "inReplyToHeader": "PGlscjZuais0YnJtQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGltbm5ucSttaXU1QGVHcm91cHMuY29tPg=="
    }
}