{
    "numMessagesInTopic": 9, 
    "nextInTime": 7327, 
    "senderId": "YzAV_OWikCyKBb2yUYVv9Ng_YCAi6QAV_4pZjrgwKc0rrDVGytbyCBP-IkA9W1_Zas8nGC6xSAYVzKaq2GD8FrkeARn2T__wTsSGcnvfk70", 
    "systemMessage": false, 
    "subject": "Re: [junit] ThreadLocal", 
    "from": "&quot;Jason Rogers&quot; &lt;jacaetevha@...&gt;", 
    "authorName": "Jason Rogers", 
    "msgSnippet": "On Mon, 24 Mar 2003 08:09:56 -0500, David Corbin  said:  ... Yes, the ones I mentioned on my previous response.  Factories for ", 
    "msgId": 7326, 
    "profile": "jacaetev", 
    "topicId": 7316, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 109352929, 
    "messageBody": "<div id=\"ygrps-yiv-1482793671\">On Mon, 24 Mar 2003 08:09:56 -0500, &quot;David Corbin&quot;<br/>\n&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:dcorbin@...\">dcorbin@...</a>&gt; said:<br/>\n&lt;snip&gt;<br/>\n<blockquote><span title=\"ireply\"> &gt;    Well,  as  near  as I can tell there are 4 choices on how something is<br/>\n&gt;    made<br/>\n&gt;    available:<br/>\n&gt;    1) at construction<br/>\n&gt;    2) as an argument<br/>\n&gt;    3) as a global/singleton<br/>\n&gt;    4) as ThreadLocal (similar to #3, but more flexible, certainly in the<br/>\n&gt;    web environment)<br/>\n&gt;    #2 is what I&#39;ve been doing, and has created the smell<br/>\n&gt;    #1  generally  doesn&#39;t  work  well, because the &quot;something&quot; may not be<br/>\n&gt;    very<br/>\n&gt;    tightly bound to the object being constucted.<br/>\n&gt;    That leaves #3 and #4.  I have a long-standing global-phobia.  Perhaps<br/>\n&gt;    it&#39;s  too  strong. #4 of course, isn&#39;t that differrent from #3 ( think<br/>\n&gt;    of<br/>\n&gt;    them as semi-global).<br/>\n&gt;    Have a missed a choice?<br/>\n<br/>\n </span></blockquote>Yes, the ones I mentioned on my previous response.  Factories for<br/>\ninstance.  If there is behavior that you need in the class you are<br/>\ntesting and it makes sense to break it out into its own class (as you<br/>\nhave done) write a Factory that will give you back an instance of the<br/>\nneeded class to be able to work with.  The Factory could be globally<br/>\naccessible, if that makes sense or pass it in at creation time.  Often<br/>\ntimes factories can give you access to several behaviors simultaneously,<br/>\nso if you need to pass in the Factory at instance creation time, you need<br/>\nonly pass one or two.  If they are globally accessible however (either to<br/>\nthe system as a whole, or to a package, etc.), you obviously don&#39;t need<br/>\nto pass them in.  I find that the factories I write are often static such<br/>\nthat I don&#39;t need an instance of one to get an instance of the object I<br/>\nam after.<br/>\n<br/>\nLet&#39;s say I have a DBQuery that obviously needs a DatabaseConnection to<br/>\ndo much of its work.  The query doesn&#39;t need the connection for its full<br/>\nlife-span, only for the short period of time in which to run against the<br/>\nDB, perhaps the rest of the time is doing maintenance work or creating<br/>\nRecord objects to represent a row in the DB, etc.  So, I make a Factory<br/>\n(in this case probably a pool) available from which the query can grab a<br/>\nconnection when it needs it and then give it back.  The connection too<br/>\nhas things that it may need only for a short period of time and can give<br/>\nthem up -- i.e. a Prepared or CallableStatement.  It can get the<br/>\nstatement from a factory it has access to and then give it back when it&#39;s<br/>\ndone.<br/>\n<br/>\nSorry for such a long response.  I guess I am not one for terseness.<br/>\n<br/>\n=jason<br/>\n[:question | ^One]</div>", 
    "prevInTime": 7325, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1048537145", 
    "canDelete": false, 
    "nextInTopic": 7327, 
    "prevInTopic": 7320, 
    "headers": {
        "inReplyToHeader": "PDNFN0YwM0E0LjMwNDAxQG1hY2h0dXJ0bGUuY29tPg==", 
        "messageIdInHeader": "PDIwMDMwMzI0MjAxOTA1LkQ2NkJGMTQzMkNAd3d3LmZhc3RtYWlsLmZtPg==", 
        "referencesHeader": "PDNFN0UwOUIyLjgwMTA1MDVAbWFjaHR1cnRsZS5jb20+IDwyMDAzMDMyNDAzMTIxNC45NURFQjFCNkU2QHd3dy5mYXN0bWFpbC5mbT4gPDNFN0YwM0E0LjMwNDAxQG1hY2h0dXJ0bGUuY29tPg=="
    }
}