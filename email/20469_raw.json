{
    "numMessagesInTopic": 6, 
    "nextInTime": 20470, 
    "senderId": "Q3mtppYfWZk7YidjGBXkWCdv64xTl24-8U-Q-46dvp9-EjcMa6FZGn84czcJuwoMGNNfdXAFHNFyudA6myBQymWVcTYAouAs3zZHBw", 
    "systemMessage": true, 
    "subject": "Re: TextListener improvement", 
    "from": "&quot;toalexsmail&quot; &lt;toalexsmail@...&gt;", 
    "authorName": "toalexsmail", 
    "msgSnippet": "Kent, I will do it in the future, maybe in this weekend, but I don t promise. ... current code", 
    "msgId": 20469, 
    "rawEmail": "Return-Path: &lt;toalexsmail@...&gt;\r\nReceived: (qmail 37051 invoked from network); 30 Apr 2008 22:20:42 -0000\r\nReceived: from unknown (66.218.67.94)\n  by m44.grp.scd.yahoo.com with QMQP; 30 Apr 2008 22:20:42 -0000\r\nReceived: from unknown (HELO n18a.bullet.sp1.yahoo.com) (69.147.64.127)\n  by mta15.grp.scd.yahoo.com with SMTP; 30 Apr 2008 22:20:42 -0000\r\nReceived: from [216.252.122.216] by n18.bullet.sp1.yahoo.com with NNFMP; 30 Apr 2008 22:20:42 -0000\r\nReceived: from [66.218.69.3] by t1.bullet.sp1.yahoo.com with NNFMP; 30 Apr 2008 22:20:42 -0000\r\nReceived: from [66.218.66.78] by t3.bullet.scd.yahoo.com with NNFMP; 30 Apr 2008 22:20:41 -0000\r\nX-Sender: toalexsmail@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 18851 invoked from network); 30 Apr 2008 14:20:30 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m52.grp.scd.yahoo.com with QMQP; 30 Apr 2008 14:20:30 -0000\r\nX-Received: from unknown (HELO n13b.bullet.sp1.yahoo.com) (69.147.64.113)\n  by mta16.grp.scd.yahoo.com with SMTP; 30 Apr 2008 14:20:30 -0000\r\nX-Received: from [216.252.122.216] by n13.bullet.sp1.yahoo.com with NNFMP; 30 Apr 2008 14:20:30 -0000\r\nX-Received: from [66.218.69.6] by t1.bullet.sp1.yahoo.com with NNFMP; 30 Apr 2008 14:20:30 -0000\r\nX-Received: from [66.218.66.76] by t6.bullet.scd.yahoo.com with NNFMP; 30 Apr 2008 14:20:30 -0000\r\nDate: Wed, 30 Apr 2008 14:20:28 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;fv9v7c+jf9t@...&gt;\r\nIn-Reply-To: &lt;018701c8a9a3$27c4c730$0200a8c0@kentspavilion&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;toalexsmail&quot; &lt;toalexsmail@...&gt;\r\nSubject: Re: TextListener improvement\r\nX-Yahoo-Group-Post: member; u=340165037; y=j3zdXJ7IWsb_nhgQMnstIEMhTJgWz64-HDZFsxqWgPeKnzB2uyQ\r\nX-Yahoo-Profile: toalexsmail\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 30 Apr 2008 22:20:40 -0000\r\n\r\nKent, I will do it in the future, maybe in this weekend, but I don&#39;t\npromis=\r\ne.\n\n--- In junit@yahoogroups.com, &quot;Kent Beck&quot; &lt;kentb@...&gt; wrote:\n&gt;\n&gt; Alex,\n=\r\n&gt;  \n&gt; It would help me if you provided test cases that break with the\ncurre=\r\nnt code\n&gt; and pass with the changes below.\n&gt;  \n&gt; Regards,\n&gt;  \n&gt; Kent Beck\n&gt;=\r\n Three Rivers Institute\n&gt; \n&gt;   _____  \n&gt; \n&gt; From: junit@yahoogroups.com [ma=\r\nilto:junit@yahoogroups.com] On Behalf Of\n&gt; toalexsmail\n&gt; Sent: Monday, Apri=\r\nl 28, 2008 4:33 PM\n&gt; To: junit@yahoogroups.com\n&gt; Subject: [junit] Re: TextL=\r\nistener improvement\n&gt; \n&gt; \n&gt; \n&gt; PrintStreamListener has a bug. Here is corre=\r\nct version:\n&gt; \n&gt; public class PrintStreamListener extends RunListener{\n&gt; //=\r\nDefinition of delimiters is in Description\n&gt; private static final Pattern D=\r\nISPAY_NAME_PATTERN =3D\n&gt; Pattern.compile(&quot;[()]&quot;); \n&gt; private TextListener t=\r\nextListener;\n&gt; private PrintStream writer;\n&gt; \n&gt; public PrintStreamListener(=\r\n) {\n&gt; this(System.out);\n&gt; }\n&gt; \n&gt; public PrintStreamListener(PrintStream wri=\r\nter) {\n&gt; super();\n&gt; this.textListener =3D new TextListener(writer);\n&gt; this.=\r\nwriter =3D writer;\n&gt; }\n&gt; \n&gt; /**\n&gt; * For sub-classes use.\n&gt; * \n&gt; * @return\n&gt;=\r\n */\n&gt; protected PrintStream getWriter(){\n&gt; return writer;\n&gt; }\n&gt; \n&gt; private =\r\nPrintStream getNotNullWriter(){\n&gt; PrintStream writer =3D getWriter();\n&gt; if(=\r\nwriter=3D=3Dnull){\n&gt; throw new IllegalStateException(&quot;writer should be not =\r\nnull&quot;);\n&gt; }\n&gt; return writer;\n&gt; }\n&gt; \n&gt; \n&gt; /**\n&gt; * This method can be overrid=\r\nen in sub-classes.\n&gt; * \n&gt; * @param description\n&gt; * @throws IllegalArgumentE=\r\nxception if description is null.\n&gt; */\n&gt; protected void writeMethodName(Desc=\r\nription description){\n&gt; if(description=3D=3Dnull){\n&gt; throw new IllegalArgum=\r\nentException(&quot;description should be not null&quot;);\n&gt; }\n&gt; String displayName =\r\n=3D description.getDisplayName();\n&gt; //third place is empty, workaround to a=\r\nvoid ) at the end of the String\n&gt; String[] complexNames =3D DISPAY_NAME_PAT=\r\nTERN.split(displayName, 3); \n&gt; String methodName =3D (complexNames=3D=3Dnul=\r\nl ||\n&gt; complexNames.length=3D=3D0)?null:complexNames[0];\n&gt; if(methodName =\r\n=3D=3D null || &quot;&quot;.equals(methodName)){\n&gt; methodName =3D displayName;\n&gt; }\n&gt; =\r\nPrintStream writer =3D getNotNullWriter();\n&gt; \n&gt; writer.print(methodName);\n&gt;=\r\n writer.print(&#39; &#39;);\n&gt; }\n&gt; \n&gt; \n&gt; /**\n&gt; * Called when an atomic test is about=\r\n to be started.\n&gt; * @param description the description of the test that is =\r\nabout to be\n&gt; run \n&gt; * (generally a class and method name)\n&gt; */\n&gt; @Override=\r\n\n&gt; public void testStarted(Description description) {\n&gt; textListener.testSt=\r\narted(description);\n&gt; }\n&gt; \n&gt; /** \n&gt; * Called when an atomic test fails.\n&gt; *=\r\n @param failure describes the test that failed and the exception\n&gt; that was=\r\n thrown\n&gt; */\n&gt; @Override\n&gt; public void testFailure(Failure failure) {\n&gt; Des=\r\ncription description =3D failure.getDescription();\n&gt; PrintStream writer =3D=\r\n getNotNullWriter();\n&gt; \n&gt; writeMethodName(description);\n&gt; textListener.test=\r\nFailure(failure);\n&gt; writer.println();\n&gt; }\n&gt; \n&gt; /**\n&gt; * Called when a test w=\r\nill not be run, generally because a test\n&gt; method is annotated \n&gt; * with {@=\r\nlink org.junit.Ignore}.\n&gt; * @param description describes the test that will=\r\n not be run\n&gt; */\n&gt; @Override\n&gt; public void testIgnored(Description descript=\r\nion) {\n&gt; writeMethodName(description);\n&gt; PrintStream writer =3D getNotNullW=\r\nriter();\n&gt; textListener.testIgnored(description);\n&gt; writer.println();\n&gt; }\n&gt;=\r\n \n&gt; \n&gt; @Override\n&gt; public void testRunFinished(Result result) {\n&gt; textListe=\r\nner.testRunFinished(result);\n&gt; }\n&gt; \n&gt; /**\n&gt; * Called before any tests have =\r\nbeen run.\n&gt; * @param description describes the tests to be run\n&gt; */\n&gt; @Over=\r\nride\n&gt; public void testRunStarted(Description description) throws Exception=\r\n {\n&gt; PrintStream writer =3D getNotNullWriter();\n&gt; String displayName =3D de=\r\nscription.getDisplayName();\n&gt; //third place is empty, workaround to avoid )=\r\n at the end of the String\n&gt; String[] complexNames =3D DISPAY_NAME_PATTERN.s=\r\nplit(displayName, 3); \n&gt; String className =3D (complexNames=3D=3Dnull ||\n&gt; =\r\ncomplexNames.length&lt;2)?null:complexNames[1];\n&gt; if(className =3D=3D null || =\r\n&quot;&quot;.equals(className)){\n&gt; className =3D displayName;\n&gt; }\n&gt; writer.print(&quot;sta=\r\nrted to test &quot;+className);\n&gt; writer.println(); \n&gt; }\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; }\n&gt; \n&gt;=\r\n \n&gt; \n&gt;  \n&gt; \n&gt; \n&gt; [Non-text portions of this message have been removed]\n&gt;\n\n\n=\r\n\n", 
    "profile": "toalexsmail", 
    "topicId": 20361, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 340165037, 
    "prevInTime": 20468, 
    "contentTrasformed": false, 
    "postDate": "1209565228", 
    "canDelete": false, 
    "nextInTopic": 20470, 
    "prevInTopic": 20467, 
    "headers": {
        "inReplyToHeader": "PDAxODcwMWM4YTlhMyQyN2M0YzczMCQwMjAwYThjMEBrZW50c3BhdmlsaW9uPg==", 
        "messageIdInHeader": "PGZ2OXY3YytqZjl0QGVHcm91cHMuY29tPg=="
    }
}