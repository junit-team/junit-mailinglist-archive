{
    "numMessagesInTopic": 10, 
    "nextInTime": 17328, 
    "senderId": "bqv9HYPAyBQUQVc70thy-jK_XCZ8P661A6z4SgQM6kFj-ipQ3R_0XnopqDXzPrQ9-enmDZNnON9T8m17VNO69xMz13j9n6L_Ald78W5CzmNl_ak", 
    "systemMessage": true, 
    "subject": "Unit testing Contexts", 
    "from": "&quot;DanHinojosa&quot; &lt;newsreader@...&gt;", 
    "authorName": "DanHinojosa", 
    "msgSnippet": "So, I have been a programmer for many years, but barely have I got into TDD.  One of the roadblocks I have gotten into is contexts. There is no way to test", 
    "msgId": 17327, 
    "profile": "DanHinojosa", 
    "topicId": 17327, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 274149574, 
    "messageBody": "<div id=\"ygrps-yiv-160806170\">So, I have been a programmer for many years, but barely have I got<br/>\ninto TDD.  One of the roadblocks I have gotten into is contexts. <br/>\nThere is no way to test them outside of an container or file system<br/>\nwhen they are embedded into a method. Let me pick on an InitialContext<br/>\nand VelocityContext in this email example:<br/>\n<br/>\n<br/>\npublic class A {<br/>\n<br/>\n   public void foo() {<br/>\n            //.... Code ..... //<br/>\n<br/>\n            VelocityContext context = new VelocityContext();<br/>\n            context.put(&quot;requestMap&quot;, requestMap);<br/>\n            StringWriter w = new StringWriter();<br/>\n            Velocity.mergeTemplate(&quot;mytemplate.vm&quot;, &quot;UTF-8&quot;, context, w);<br/>\n            String text = w.toString();<br/>\n<br/>\n <br/>\n            InitialContext ic = new InitialContext();<br/>\n            Session session = (Session) ic.find(&quot;mail/MailSource&quot;);<br/>\n            Message msg = new MimeMessage(session);<br/>\n            msg.setContent(text, &quot;text/plain&quot;);<br/>\n            <br/>\n            //.... Code ..... //<br/>\n    }<br/>\n}<br/>\n<br/>\n<br/>\nIf I create a testFoo method to test this I am out of luck.   This is<br/>\nbecause the Velocity Context relies on an underlying classloader.  The<br/>\n InitialContext relies on an underlying Java EE context. Again, this<br/>\nis a UNIT TEST, and not an integration or system test.  So what is the<br/>\nbest way to do get good test coverage on this?  Shall I extract the<br/>\ncode into another class that I can inject my InitialContext mocks and<br/>\nmy VelocityContext mocks through there?  <br/>\n<br/>\nLet me know. <br/>\nDanno</div>", 
    "prevInTime": 17326, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1154724775", 
    "canDelete": false, 
    "nextInTopic": 17330, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGViMGMzNytocWJ1QGVHcm91cHMuY29tPg=="
    }
}