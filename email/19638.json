{
    "numMessagesInTopic": 43, 
    "nextInTime": 19639, 
    "senderId": "ljuyC6HSsoaEPHQdkPnBU_yPC13n0kYGEA67FdZzA2OXHmtPBxJv0-QkN83SVv9XwCyjESAS0_tYK86I9Mk6D7_88PLubOfWAQg7Sz_0K_1BQO2l8IbDB9oR61UY-cChT7bqrvU", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing singleton patterns", 
    "from": "&quot;=?UTF-8?Q?C=C3=A9dric_Beust_=E2=99=94_?=&quot; &lt;cbeust@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "The gain can be summarized as follows. Hard to test: public void query() { Database.query( ... ); } Easy to test: public void query(Database db) { ", 
    "msgId": 19638, 
    "profile": "cbeust", 
    "topicId": 19636, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 199443513, 
    "messageBody": "<div id=\"ygrps-yiv-1002472886\">The gain can be summarized as follows.<br/>\n<br/>\nHard to test:<br/>\n<br/>\npublic void query() {<br/>\n  Database.query(&quot;...&quot;);<br/>\n}<br/>\n<br/>\nEasy to test:<br/>\n<br/>\npublic void query(Database db) {<br/>\n  db.query(&quot;...&quot;);<br/>\n}<br/>\n<br/>\n<br/>\n-- <br/>\nCédric<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 7/28/07, Pat Farrell &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:pfarrell@...\">pfarrell@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt;   This may be a bit off charter, but I&#39;ve been reading some well argued<br/>\n&gt; articles that have names such as &quot;Why is Singleton evil?&quot; and at the top<br/>\n&gt; of the list are troubles that the singleton pattern causes for unit<br/>\n&gt; testing. (which is on topic.)<br/>\n&gt;<br/>\n&gt; The usual suggestions for rewriting the code are offered, such as using<br/>\n&gt; a factory class to allocate/create objects, and always always just<br/>\n&gt; returning the one and only.<br/>\n&gt;<br/>\n&gt; So far, so good. But, the Factory class has to keep a store of<br/>\n&gt; anti-singletons. And the usual call is something like<br/>\n&gt; AntiSingleton anAnti = Factory.createAntiSingleton();<br/>\n&gt;<br/>\n&gt; Which is used statically, and implies that the Factory is a singleton so<br/>\n&gt; its cache of AntiSingletons can be kept in one and only one store.<br/>\n&gt;<br/>\n&gt; I&#39;m not seeing how changing the Singleton class to a class that needs<br/>\n&gt; the singleton Factory class has done anything. We&#39;ve still got a<br/>\n&gt; singleton, and so all arguments that there is implied coupling, and bad<br/>\n&gt; karma for testing still hold.<br/>\n&gt;<br/>\n&gt; Thanks<br/>\n&gt; Pat<br/>\n&gt;<br/>\n&gt; p.s. any hints of forums/lists where this topic could be explored would<br/>\n&gt; be greatly appreciated. I&#39;ve found lots of places where rookies can ask<br/>\n&gt; how to use a HashMap, and lots where folks argue about JSRs, but I&#39;m<br/>\n&gt; really looking for somewhere where professional, experienced Java<br/>\n&gt; developers can get answers to hard questions.<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt; Pat Farrell <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:pfarrell@...\">pfarrell@...</a> &lt;pfarrell%40bioinformatx.com&gt;<br/>\n&gt; www.bioinformatx.com<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 19637, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1185639514", 
    "canDelete": false, 
    "nextInTopic": 19640, 
    "prevInTopic": 19637, 
    "headers": {
        "inReplyToHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg==", 
        "messageIdInHeader": "PGI4NmI2YTljMDcwNzI4MDkxOHMxNjA5ZjAyOW02YTdjZTk3MDRmNjc0NjA0QG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg=="
    }
}