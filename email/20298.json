{
    "numMessagesInTopic": 4, 
    "nextInTime": 20299, 
    "senderId": "g6tt1l1w8RJhOQVl-vLmlmpbXAz_9mhLpJ3-LGZLfvsqX6GccDePpiEp2h19M3TXGAos94e5kgVDQS84d_cNUUOMniIPVGs5", 
    "systemMessage": false, 
    "subject": "RE: [junit] Bug in org.junit.Assert", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Walter, Thanks for the report. I finally fixed it in head. Cheers, Kent Beck Three Rivers Institute _____ From: junit@yahoogroups.com", 
    "msgId": 20298, 
    "profile": "kentlbeck", 
    "topicId": 20186, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "messageBody": "<div id=\"ygrps-yiv-920046844\">Walter,<br/>\n <br/>\nThanks for the report. I finally fixed it in head.<br/>\n <br/>\nCheers,<br/>\n <br/>\nKent Beck<br/>\nThree Rivers Institute<br/>\n<br/>\n  _____  <br/>\n<br/>\nFrom: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of<br/>\nWalter Gildersleeve<br/>\nSent: Friday, December 21, 2007 12:34 PM<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSubject: [junit] Bug in org.junit.Assert<br/>\n<br/>\n<br/>\n<br/>\nHi,<br/>\n<br/>\nI searched around to see if anyone&#39;s submitted this bug. I didn&#39;t<br/>\nfind a dupe, so I&#39;ll go ahead and post; apologies if it&#39;s already known.<br/>\n<br/>\nIn Assert#format(String, Object, Object), a NullPointerException is<br/>\nthrown if either param &quot;expected&quot; or &quot;actual&quot; is null and the other is<br/>\n*the string* &quot;null&quot;. Here are a couple test cases demonstrating this:<br/>\n<br/>\n@Test(expected=NullPointerException.class)<br/>\npublic void confirmError() {<br/>\nassertEquals(null, &quot;null&quot;);<br/>\n}<br/>\n<br/>\n@Test(expected=NullPointerException.class)<br/>\npublic void confirmErrorToo() {<br/>\nassertEquals(&quot;null&quot;, null);<br/>\n}<br/>\n<br/>\nThis is because Assert#format is trying to print extended information<br/>\nwhen two objects are visually identical but semantically different;<br/>\nnamely, it wants to display the class names as well as the values,<br/>\ndoing a Object#getClass() without checking if the object is null.<br/>\n<br/>\nHere&#39;s a possible fix:<br/>\n<br/>\nstatic String format(String message, Object expected, Object actual) {<br/>\nString formatted = &quot;&quot;;<br/>\nif (message != null && !message.equals(&quot;&quot;)) {<br/>\nformatted = message + &quot; &quot;;<br/>\n}<br/>\n<br/>\nString expectedString = String.valueOf(expected);<br/>\nString actualString = String.valueOf(actual);<br/>\n<br/>\nif (expected == null) {<br/>\nreturn formatted + &quot;expected: &lt;null&gt; but was: &quot;<br/>\n+ actual.getClass().getName() + &quot;&lt;&quot; + actualString + &quot;&gt;&quot;;<br/>\n} else if (actual == null) {<br/>\nreturn formatted + &quot;expected: &quot; + expected.getClass().getName()<br/>\n+ &quot;&lt;&quot; + expectedString + &quot;&gt; but was: &lt;null&gt;&quot;;<br/>\n} else if (expectedString.equals(actualString)) {<br/>\nreturn formatted + &quot;expected: &quot; + expected.getClass().getName()<br/>\n+ &quot;&lt;&quot; + expectedString + &quot;&gt; but was: &quot;<br/>\n+ actual.getClass().getName() + &quot;&lt;&quot; + actualString + &quot;&gt;&quot;;<br/>\n} else {<br/>\nreturn formatted + &quot;expected:&lt;&quot; + expectedString + &quot;&gt; but was:&lt;&quot;<br/>\n+ actualString + &quot;&gt;&quot;;<br/>\n}<br/>\n}<br/>\n<br/>\nThe assumption here is that actual and expected will never *both* be<br/>\nnull. Right?<br/>\n<br/>\nWalter Gildersleeve<br/>\nPortland, OR<br/>\n<br/>\n<br/>\n<br/>\n <br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 20297, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1202250844", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 20189, 
    "headers": {
        "inReplyToHeader": "PGZraDgwOCs0OTNtQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDA1MWQwMWM4Njg0NyQzNmMwYTI2MCQ2NzAxYThjMEBrZW50c3BhdmlsaW9uPg==", 
        "referencesHeader": "PGZraDgwOCs0OTNtQGVHcm91cHMuY29tPg=="
    }
}