{
    "numMessagesInTopic": 106, 
    "nextInTime": 8963, 
    "senderId": "q7jIvMRDVzw2kGhI49m7v7QF-Vh0mt_UnlUDFiov0RaN5xN-S7vOgZvuARNsXNwVG6XESqiaOH8xaAexVDOtZRPpDPrXvoVmqsFAyyCgiA", 
    "systemMessage": false, 
    "subject": "Re: [junit] ClasspathWalker (even better)", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... It occurs to me that to test the second behavior does not require mocking the classpath. We can have a degenerate event/listener design. As the", 
    "msgId": 8962, 
    "profile": "nails762", 
    "topicId": 8807, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "messageBody": "<div id=\"ygrps-yiv-1140564486\"><blockquote><span title=\"ireply\">&gt;So said J. B. Rainsberger on 2003-08-02 --------------------<br/>\n&gt;I re-read what I wrote and it was garbage. Let me try again.<br/>\n&gt;<br/>\n&gt;We have a ClasspathWalker that generates events that some<br/>\n&gt;ClasspathwalkerListener consumes and operates on.<br/>\n&gt;<br/>\n&gt;I suggest testing each of these behaviors in isolation.<br/>\n&gt;<br/>\n&gt;* The ClasspathWalker correctly walks the classpath.<br/>\n&gt;* The ClasspathWalker correctly generates events as it walks the classpath.<br/>\n&gt;* The ClasspathWalkerListener correctly handles the various kinds of<br/>\n&gt;ClasspathWalker events<br/>\n&gt;<br/>\n&gt;To test the first and second behavior, mock the classpath. To test the<br/>\n&gt;third behavior, simply create events and send them to the listener. No<br/>\n&gt;mocking required.<br/>\n&gt;<br/>\n&gt;That was what I was trying to say. I hope this is clearer and actually<br/>\n&gt;makes sense.<br/>\n<br/>\n </span></blockquote>It occurs to me that to test the second behavior does not require mocking the classpath. We can have a degenerate event/listener design.<br/>\n<br/>\nAs the ClasspathWalker walks the classpath, it calls a method to signal that it found something on the classpath. (event source)<br/>\n<br/>\nThis signal handling method (event listener) then decides which kind of ClasspathEvent to create and send to the registered ClasspathEventListeners.<br/>\n<br/>\nIn this case, you can test the second behavior above without having to actually walk the classpath. Much nicer.<br/>\n<br/>\nSo the basic design is this:<br/>\n<br/>\nClasspathWalker<br/>\n    walkClasspath(classpathRoot):<br/>\n        // iterate over classpath items under the root<br/>\n        // invoke foundSomething() with each thing you find<br/>\n<br/>\n    ClasspathEvent makeClasspathEvent(foundThing):<br/>\n        // decide which kind of ClasspathEvent to generate<br/>\n  <br/>\n    foundSomething(foundThing):<br/>\n        classpathEvent = makeClasspathEvent(foundThing);<br/>\n        notifyListeners(classpathEvent);<br/>\n<br/>\nClasspathWalkerListener<br/>\n    onClasspathEvent(classpathEvent)<br/>\n<br/>\nMy tests would be like this.<br/>\n<br/>\n* One TestCase class to verify ClasspathWalker.walkClasspath that tries various cases of classpath data; probably a parameterized test case -- however many special cases there are<br/>\n<br/>\n* One TestCase class to verify ClasspathWalker.makeClasspathEvent for each different kind of thing I&#39;d find on the classpath<br/>\n<br/>\n* foundSomething is too simple to break<br/>\n<br/>\n* Tests for my implementation of ClasspathWalkerListener: each test simply sends a ClasspathEvent and verifies the behavior of the listener<br/>\n<br/>\nThe walkClasspath tests probably need a MockClasspath to walk. Other than that, no mocks required.<br/>\n<br/>\n<br/>\nJ. B. Rainsberger,<br/>\nPresident, Diaspar Software Services<br/>\nLet&#39;s write software that people understand.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com/\">http://www.diasparsoftware.com/</a><br/>\ntelephone: +1 416 791-8603</div>", 
    "prevInTime": 8961, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1059840399", 
    "canDelete": false, 
    "nextInTopic": 8963, 
    "prevInTopic": 8961, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwODAyMTE1MDU5MDQ1Ni4wMDcwQzM4NkBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PDIwMDMwODAyMTIwNjM5MDMyNy4wMDdGMUFFNUBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "referencesHeader": "PDAwN2UwMWMzNTdjYiQxZDU2YzdmMCQyODc4MTYwYUBzeWJhc2UuY29tPiA8MTA1OTc0MjQ5Ny4yMTYzLjg1LmNhbWVsQGxvY2FsaG9zdD4gPDIwMDMwODAyMTEyMTQ4MDY3OC4wMDU2MEM4Q0Bzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4gPDNGMkE4ODE3LjIwMDAwMDZAdGVhbWRla2FkZS5jb20+IDwyMDAzMDgwMjExNTA1OTA0NTYuMDA3MEMzODZAc3NtdHAuYmxvb3IuaXMubmV0LmNhYmxlLnJvZ2Vycy5jb20+"
    }
}