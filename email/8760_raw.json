{
    "numMessagesInTopic": 6, 
    "nextInTime": 8761, 
    "senderId": "oXtKlxGJP8AK7amXeomran0x0-lBFSoOTZwlLuiCGxed76fmZ9QTcH8N3mA0VToMyxpv_9sjUMGL5k-0yWrdnsTSRJ1URAuxZg", 
    "systemMessage": false, 
    "subject": "Re: unit testing philosophy", 
    "from": "&quot;malvoisin&quot; &lt;wforster@...&gt;", 
    "authorName": "malvoisin", 
    "msgSnippet": "ranjan, testing DAS components is pretty straightforward, but you need to get comfortable with using mock objects. the way we test droplets on my current", 
    "msgId": 8760, 
    "rawEmail": "Return-Path: &lt;wforster@...&gt;\r\nReceived: (qmail 71928 invoked by uid 7800); 23 Jul 2003 15:56:21 -0000\r\nX-Sender: wforster@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 27428 invoked from network); 23 Jul 2003 15:52:05 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m12.grp.scd.yahoo.com with QMQP; 23 Jul 2003 15:52:05 -0000\r\nReceived: from unknown (HELO n12.grp.scd.yahoo.com) (66.218.66.67)\n  by mta1.grp.scd.yahoo.com with SMTP; 23 Jul 2003 15:52:04 -0000\r\nReceived: from [66.218.67.143] by n12.grp.scd.yahoo.com with NNFMP; 23 Jul 2003 15:52:02 -0000\r\nDate: Wed, 23 Jul 2003 15:52:00 -0000\r\nTo: junit@yahoogroups.com\r\nSubject: Re: unit testing philosophy\r\nMessage-ID: &lt;bfmav0+3dnq@...&gt;\r\nIn-Reply-To: &lt;bfkmjg+k4vc@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 6001\r\nX-Mailer: Yahoo Groups Message Poster\r\nFrom: &quot;malvoisin&quot; &lt;wforster@...&gt;\r\nX-Yahoo-Group-Post: member; u=125321020\r\nX-Yahoo-Profile: malvoisin\r\nX-eGroups-Approved-By: nails762 &lt;jbrains@...&gt; via email; 23 Jul 2003 15:56:21 -0000\r\n\r\nranjan, \n\ntesting DAS components is pretty straightforward, but you need to get\ncomfortable with using mock objects.  \n\nthe way we test droplets on my current project is by using mock\nversions of DynamoHttpServletResponse and DynamoHttpServletRequest and\nrunning them through your droplet:\n\nvoid testDroplet() {\n  MockDynamoHttpRequest request=new MockDynamoHttpRequest();\n  MockDynamoHttpResponse response=new MockDynamoHttpResponse();\n  MyDroplet droplet=new MyDroplet();\n  //configuration of request, response, droplet, etc. \n  droplet.server(request, response);\n  //test state of droplet, etc.\n}\n\nsince dynamo encourages you to break all of your droplets and objects\ninto independent components and define their concrete relationships in\nproperties files, it makes testing fairly straightforward.  iirc,\nwww.mockobjects.com has some dynamo specific mocks (like the request &\nresponse objects, as well as a mock nucleus, but they&#39;re all pretty\neasy to implement on your own.)   \n\njust as an aside (and this is a bit more advanced,) extending nucleus\nto work offline is also fairly straightforward.  extending nucleus \nallows you to &#39;cache&#39; your test configuration data into .properties\nfiles and serialized objects or run your whole application independent\nof DAS for testing, which makes things go much faster.  \n\nhope this helps,\nwill\n\n\n--- In junit@yahoogroups.com, &quot;ranjan_chakrab&quot; &lt;ranjan_chakrab@y...&gt;\nwrote:\n&gt; Hello,\n&gt; \n&gt;   Also, I am trying to use JUnit to perform unit testing of ATG Dynamo\n&gt; Droplets and Form Handlers.\n&gt; \n&gt; Please let me know if there are any documents/ papers that discuss \n&gt; this subject.\n&gt; \n&gt; Thank you.\n&gt; \n&gt; Ranjan Chakrabarty\n&gt; e-mail: ranjan_chakrab@y...\n&gt; \n&gt; --- In junit@yahoogroups.com, &quot;tcfolsom&quot; &lt;Todd.Folsom@s...&gt; wrote:\n&gt; &gt; Go to www.mockmaker.org and download the mockmaker tool. Then apply \n&gt; &gt; it to interfaces or classes for which you need mocks. These new \n&gt; mocks \n&gt; &gt; will have methods for setting their state, and all support the \n&gt; verify\n&gt; &gt; () method. YOur mockRepository can be configured to return a \n&gt; &gt; mockRepositoryView and to verify that a call was made to that \n&gt; method. \n&gt; &gt; For instance if your code should call getRepositoryView(), you set \n&gt; up \n&gt; &gt; MockRepository with setExpectedGetRepositoryViewCalls(1). This \n&gt; method \n&gt; &gt; is built in the mock for you by the mockmaker tool. Verify() will \n&gt; &gt; check that a single call of getRepositoryView was made on the mock. \n&gt; &gt;   This is very useful stuff. However you may have to refactor your \n&gt; &gt; code to make it possible to supply a mock object instead of the \n&gt; real \n&gt; &gt; object. If you work from interfaces, it is easier to handle mocks. \n&gt; &gt; For example if getRepostoryView returns a RepositoryViewInterface \n&gt; &gt; rather than a RepositoryView, it is easy to return a \n&gt; &gt; MockRepositoryView which implemented RepositoryViewInterface.\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; --- In junit@y..., &quot;cilqproj&quot; &lt;cilqproj@y...&gt; wrote:\n&gt; &gt; &gt; The problem is that I&#39;m struggling to test a pretty complex piece \n&gt; of\n&gt; &gt; &gt; code and I&#39;m trying to get some advice ( hints, help, etc .. ) to \n&gt; &gt; help\n&gt; &gt; &gt; me tackle it.  \n&gt; &gt; &gt; \n&gt; &gt; &gt; In the real world, I use ATG Dynamo.  If you&#39;ve heard of it or \n&gt; used\n&gt; &gt; &gt; it, it&#39;s an App Server / EJB Container.   Dynamo&#39;s entire \n&gt; framework \n&gt; &gt; is\n&gt; &gt; &gt; based off this component known as Nucleus, which does a lot of \n&gt; work \n&gt; &gt; in\n&gt; &gt; &gt; terms of instantiating classes, setting properties, etc..  It&#39;s \n&gt; also\n&gt; &gt; &gt; very slow and to test - build - test takes forever if I have to \n&gt; &gt; start\n&gt; &gt; &gt; and stop the app-server for every change in the code. \n&gt; &gt; &gt; \n&gt; &gt; &gt; That&#39;s where MockObjects come in.  Dynamo is a very Java Beans \n&gt; heavy\n&gt; &gt; &gt; framework, that relies a lot on setters and getters.  ( In fact, \n&gt; the\n&gt; &gt; &gt; MockObjects guys at SF have started putting together some Dynamo\n&gt; &gt; &gt; MockObjects. ) I was looking into MockObjects as a way to lessen \n&gt; my\n&gt; &gt; &gt; reliance on the Nucleus namespace so that I could code quickly and\n&gt; &gt; &gt; only integrate with the Nucleus namespace at the latest possible \n&gt; &gt; time.\n&gt; &gt; &gt; \n&gt; &gt; &gt; However, I can&#39;t get my head around the fact that in certain \n&gt; cases \n&gt; &gt; my\n&gt; &gt; &gt; mock code will need to generate other mock code \n&gt; &gt; &gt; \n&gt; &gt; &gt; Here&#39;s a method from a piece of old code that I wrote before I \n&gt; &gt; decided\n&gt; &gt; &gt; to start using JUnit:\n&gt; &gt; &gt; \n&gt; &gt; &gt;     public  Map generateEmptyPreferencesMap( Map m ) throws\n&gt; &gt; &gt; RepositoryException {\n&gt; &gt; &gt; \n&gt; &gt; &gt; \t// get the list of possible preferences\n&gt; &gt; &gt; \tRepositoryView contactMethodView = getPreferencesRepository\n&gt; &gt; ().getView(\n&gt; &gt; &gt; CONTACT_METHOD_REPOSITORY_ITEM );\n&gt; &gt; &gt; \tRepositoryItem[] contactMethods = \n&gt; &gt; contactMethodView.executeQuery(\n&gt; &gt; &gt; contactMethodView.getQueryBuilder().createUnconstrainedQuery() );\n&gt; &gt; &gt; \t\n&gt; &gt; &gt; \tif ( ( contactMethods != null ) && ( contactMethods.length &gt; \n&gt; &gt; 0 ) )  {\n&gt; &gt; &gt; \t    // add each one to the map\n&gt; &gt; &gt; \t    for ( int i = 0 ; i &lt; contactMethods.length ; i++ ) {\n&gt; &gt; &gt; \t\tm.put( contactMethods[i].getPropertyValue(\n&gt; &gt; &gt; CONTACT_METHOD_CODE_PROPERTY_NAME ), new BooleanPlaceHolder() );\n&gt; &gt; &gt; \t    }\n&gt; &gt; &gt; \t}\n&gt; &gt; &gt;      return m;\n&gt; &gt; &gt;     }\n&gt; &gt; &gt;      \n&gt; &gt; &gt; \n&gt; &gt; &gt; The Repository API is Dynamo&#39;s object-oriented data abstraction \n&gt; &gt; api. \n&gt; &gt; &gt; In this case, I assume I would setPreferencesRepository( new\n&gt; &gt; &gt; MyMockRepository()  )\n&gt; &gt; &gt; \n&gt; &gt; &gt; but that MockRepository needs to return a MockRepositoryView \n&gt; which \n&gt; &gt; in\n&gt; &gt; &gt; turn needs to return a MockQueryBuilder, or so I seem to believe.\n&gt; &gt; &gt; \n&gt; &gt; &gt; In a sentence:  how would one test this?  \n&gt; &gt; &gt; \n&gt; &gt; &gt; As before,\n&gt; &gt; &gt; Any and all help is greatly appreciated.\n&gt; &gt; &gt; \n&gt; &gt; &gt; I apologize for any unnecessary lengthiness.\n&gt; &gt; &gt; \n&gt; &gt; &gt; Thanks,\n&gt; &gt; &gt; \n&gt; &gt; &gt; Aadi\n&gt; &gt; &gt; \n&gt; &gt; &gt; --- In junit@y..., Bob Koss &lt;koss@o...&gt; wrote:\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; It would help if you&#39;d tell us what the problem is instead of \n&gt; &gt; presenting\n&gt; &gt; &gt; &gt; your solution of the problem as the problem.\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; I&#39;ve never needed mocks inside of mocks - it doesn&#39;t even make \n&gt; &gt; sense.\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt;\n\n\n", 
    "profile": "malvoisin", 
    "topicId": 4923, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 125321020, 
    "prevInTime": 8759, 
    "contentTrasformed": false, 
    "postDate": "1058975520", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 8749, 
    "headers": {
        "inReplyToHeader": "PGJma21qZytrNHZjQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGJmbWF2MCszZG5xQGVHcm91cHMuY29tPg=="
    }
}