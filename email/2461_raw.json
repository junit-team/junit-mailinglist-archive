{
    "topicId": 2404, 
    "postDate": "998554754", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Diego Medici&quot; &lt;diego.medici@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "4gDyukw_bBmqqqt6Ob-9PNxcRRF_5K9BnFlCBk3e1NId7-jpOpNdZSjb7udblAC4pin_xsLyCRuks7s8Alw6Qcu80jD_0MBtsMivDAdNpuUtjg", 
    "nextInTime": 2462, 
    "userId": 0, 
    "prevInTime": 2460, 
    "prevInTopic": 2457, 
    "headers": {
        "inReplyToHeader": "PDAxMGYwMWMxMmI1OCQyM2Y4YWEyMCQwMTAwMDA1YUBnYXRld2F5Pg==", 
        "messageIdInHeader": "PE5EQkJLRlBLUEtBUEpMQUhMUE9ES0VOSURLQUEuZGllZ28ubWVkaWNpQGRpYWxvZ29zMy5jb20+"
    }, 
    "authorName": "Diego Medici", 
    "numMessagesInTopic": 15, 
    "msgSnippet": "We are implementing unit testing on our projects, and the use of mock objects is a great step to isolate the CUT. After several attempts we have find 2", 
    "contentTrasformed": false, 
    "msgId": 2461, 
    "nextInTopic": 2463, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;diego.medici@...&gt;\r\nX-Sender: diego.medici@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_3_1); 23 Aug 2001 08:17:23 -0000\r\nReceived: (qmail 74351 invoked from network); 23 Aug 2001 08:16:40 -0000\r\nReceived: from unknown (10.1.10.142)\n  by l9.egroups.com with QMQP; 23 Aug 2001 08:16:40 -0000\r\nReceived: from unknown (HELO mx1.dialogos3.it) (212.97.43.34)\n  by mta3 with SMTP; 23 Aug 2001 08:16:39 -0000\r\nReceived: from ghemon (ns3.dialogos3.it [212.97.43.37])\n\tby mx1.dialogos3.it (Postfix) with SMTP id 2231B106FC\n\tfor &lt;junit@yahoogroups.com&gt;; Thu, 23 Aug 2001 10:13:51 +0200 (CEST)\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nSubject: RE: Mocking classes (was RE: [junit] About mock object :!)\r\nDate: Thu, 23 Aug 2001 10:19:14 +0200\r\nMessage-ID: &lt;NDBBKFPKPKAPJLAHLPODKENIDKAA.diego.medici@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;US-ASCII&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)\r\nIn-Reply-To: &lt;010f01c12b58$23f8aa20$0100005a@gateway&gt;\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200\r\nImportance: Normal\r\nFrom: &quot;Diego Medici&quot; &lt;diego.medici@...&gt;\r\n\r\nWe are implementing unit testing on our projects, and the use of mock\nobjects is a great step to isolate the CUT.\n\nAfter several attempts we have find 2 solutions that permits the use of mock\nobjects, that derives from these assumptions:\n\n1. Good class design: when design classes, you design only the interfaces of\nthese classes, and when you code these classes, implements the interfaces.\nIn this way, you can define a mock object for this class\n\n2. Never instantiate directly a class into a method.\n\nWith these tricks, you have the classes that known only the interface of the\nother classes that they use. You can change the implementation of every\nclass, without have to change the other classes.\n\nWhen you have the classes coded in this way, the use of mock object is easy.\n\n1st Solutions\nIf into a method you need to instantiate an object of another class, pass\nthe interface as parameter. In this example Class2 uses Class1.\n\n\npublic class Class1 implements Class1Iface\n{\n\tpublic void method1()\n\t{\n\t\t...\n\t}\n\t...\n}\n\n\npublic class Class2 implements Class2Iface\n{\n\tpublic void method2(Class1Iface c1)\n\t{\n\t\t...\n\t\tc1.method2();\n\t\t...\n\t}\n\n}\n\n\nIn this way, the method2 doesn&#39;t know the implementation of method1, but\nonly its interface.\nDuring the testing, you can define a mock object of Class1 and pass to\nmethod2 an instance of the mock object.\n\npublic class Class1Mock implements Class1Iface\n{\n\tpublic void method1()\n\t{\n\t\t//Behaviour defined by the mock implementation\n\t}\n\t...\n}\n\nAnd the test method:\n\n...\npublic void testMethod2()\n{\n\tClass1Iface c1 = new Class1Mock();\n\tClass2 c2 = new Class2();\n\tassert(c2.method2(c1));\n\t...\n}\n...\n\n2nd Solution:\nUse the AbstractFactory pattern to instantiate classes.\nThis solution doesn&#39;t force to pass the interface as parameter. You need to\nimplement a new class, called Factory, that instantiates the right class for\nthe test (mock) or the real class.\n\nThe Class1 and Class1Mock are the same.\n\n//Very simple Factory!!!\n//The Factory class should contain other features...\npublic abstract class Class1Factory\n{\n\tpublic static boolean TEST = false;\n\tpublic Class1Iface makeClass1()\n\t{\n\t\t...\n\t\tif(TEST) return new Class1Mock();\n\t\telse return new Class1();\n\t}\n\t...\n\n\t//if there are more constructor then define additionals makeClass1(params)\nmethods\n}\n\n\npublic class Class2 implements Class2Iface\n{\n\tpublic void method2()\n\t{\n\t\tClass1Iface c1 = Class1Factory.makeClass1();\n\t\tc1.method2();\n\t}\n\t...\n}\n\n\nAnd an example of the test method should be\n\n...\npublic void testMethod2()\n{\n\tClass1Factory.TEST = true;\n\tClass2 c2 = new Class2();\n\tassert(c2.method2(c1));\n\t...\n}\n\n\nAny comments, suggestions, critics will be appreciated!\n\nDiego\n\n**********************************************\nDiego Medici\nProject Manager\nDialogos 3 S.r.l.\nMilan, Italy\nTel: +39 0270005949\nFax: +39 0270049053\nMob: +39 3484009314\ne-mail: diego.medici@... - http://www.dialogos3.com\n********************************************\n\n\n-----Original Message-----\nFrom:\nsentto-2423328-2461-998518654-diego.medici=dialogos3.com@...\n.com\n[mailto:sentto-2423328-2461-998518654-diego.medici=dialogos3.com@returns\n.onelist.com]On Behalf Of Steve Freeman\nSent: mercoledi 22 agosto 2001 23.18\nTo: junit@yahoogroups.com\nSubject: Re: Mocking classes (was RE: [junit] About mock object :!)\n\n\nFrom: &quot;Shane Duan&quot; &lt;sduan@...&gt;\n&gt; So if I am going to spend a lot of time anyway, I&#39;d rather refactor the\ncode to make the testing easy, and improve the design on the way.  I think\nthis fits into &#39;simplest possible&#39; principle also.\n\nThat sounds good to me. Often the trick is just to provide a level of\nindirection for getting hold of objects. For example, quite often we have\nmultiple constructors -- one with parameters to allow you pass in mock\ninstances, and another one that calls it that provides default\nimplementations:\n\n\nclass Thing {\n  public Thing(Param1 aParam) {\n     self(aParam, new RealObject());\n  }\n  public Thing(Param1 aParam, Realnterface aReal) {\n     param = aParam;\n     real = aReal;\n  }\n  [...]\n}\n\nThe other one we use a lot is lazy construction. Create an instance of the\nreal object if you haven&#39;t already preloaded a mock one.\n\nSteve\n\n\n\n\nTo unsubscribe from this group, send an email to:\njunit-unsubscribe@yahoogroups.com\n\n\nYour use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/\n\n\n\n\n\n", 
    "subject": "RE: Mocking classes (was RE: [junit] About mock object :!)"
}