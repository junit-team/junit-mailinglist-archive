{
    "numMessagesInTopic": 6, 
    "nextInTime": 24766, 
    "senderId": "3rZPHNGFmjJhBzylQ9Zc2uH1uAKfJKoIIsqhWBlAt17tMvq_Y1PdeQSkGjDptAr-aDzcyT_k3d96Jvv-C111DMc", 
    "systemMessage": false, 
    "subject": "Running ActiveTestSuite from command line", 
    "from": "jonathonjshields@...", 
    "authorName": "", 
    "msgSnippet": "Hi all, I have a requirement to run the same set of tests concurrently(in separate threads), after doing some digging about I came across ActiveTestSuite. I ve", 
    "msgId": 24765, 
    "profile": "jonathonjshields", 
    "topicId": 24765, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 581274943, 
    "messageBody": "<div id=\"ygrps-yiv-712184138\"><p>Hi all,</p><p><br></p><p>I have a requirement to run the same set of tests concurrently(in separate threads), after doing some digging about I came across ActiveTestSuite. I&#39;ve seen some posts re an equivalent mechanism in JUnit 4, as of yet I&#39;ve not seen a suggested out of the box supported mechanism for JUnit 4. So I&#39;ve continued down the path of ActiveTestSuite, I&#39;m happy to be told there is a different mechanism now.</p><p><br></p><p>So to the issues I&#39;m having, I eventually got my test suite running, our custom base test classes need so updates to be thread safe. So I have two identical test suites added to the ActiveTestSuite and its running in 3500 tests successfully in Eclipse. The issue arrises when I try to execute the test suite on the command line. Unfortunately(for me) the test execution must be done via Gradle, I&#39;m relatively new to Gradle, so I&#39;m not sure if the issue I&#39;m having is solely a Gradle JUnit integration issue or if there is a general issue with running the test suite from the command line. I haven&#39;t came across any real examples of it being used from the command line.</p><p><br></p><p>So the types of errors I&#39;m getting seem to be unexpected JUnit lifecycle errors:</p><p><br></p><p><br></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; java.lang.AssertionError: Unexpected start event for test_insert_positiveFlow_allFields(my.test.MemberTest)</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>at org.gradle.api.internal.tasks.testing.junit.JUnitTestEventAdapter.testStarted(JUnitTestEventAdapter.java:56)</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>at org.junit.runner.notification.RunNotifier$3.notifyListener(RunNotifier.java:87</span>)</p><p><br></p><p><br></p><p>and&nbsp;</p><p><br></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; java.lang.AssertionError</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>at org.gradle.api.internal.tasks.testing.processors.TestOutputRedirector.setOutputOwner(TestOutputRedirector.java:49)</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>at org.gradle.api.internal.tasks.testing.processors.CaptureTestOutputTestResultProcessor.completed(CaptureTestOutputTestResultProcessor.java:80)</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>at org.gradle.api.internal.tasks.testing.results.AttachParentTestResultProcessor.completed(AttachParentTestResultProcessor.java:56)</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>at org.gradle.api.internal.tasks.testing.results.AttachParentTestResultProcessor.completed(AttachParentTestResultProcessor.java:56)</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>at org.gradle.api.internal.tasks.testing.junit.TestClassExecutionEventGenerator.completed(TestClassExecutionEventGenerator.java:83)</span></p><p><br></p><p>There are other similar unexpected event assertions thrown during the test execution. I&#39;ve dug about a bit and can&#39;t see any examples of the ActiveTestSuite and Gradle(or Ant etc....) with respect to this type of issue.&nbsp;</p><p><br></p><p>The task I&#39;ve declared is:</p><p><br></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; task parallelTestSuite(type: Test){</span></p><p><span style=\"font-style:italic;\"><br></span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; &nbsp; &nbsp; //gradle.startParameter.continueOnFailure = true</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; &nbsp; &nbsp; scanForTestClasses = false</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; &nbsp; &nbsp; includes = [&#39;**/*MyActiveTestSuite.class&#39;]</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span></span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>environment &quot;SERVER_DIR&quot;, &quot;.&quot;</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>maxHeapSize = &quot;1024m&quot;</span></p><p><span style=\"font-style:italic;\"><br></span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>workingDir &quot;../../&quot;</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>afterTest { desc, result -&gt;</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t\t</span>println &quot;Executing test ${desc.name} [${desc.className}] with result: ${result.resultType}&quot;</span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; <span class=\"ygrps-yiv-712184138Apple-tab-span\" style=\"white-space:pre;\">\t</span>}</span></p><p><span style=\"font-style:italic;\"><br></span></p><p><span style=\"font-style:italic;\">&nbsp; &nbsp; }</span></p><p><br></p><p>I&#39;ve tried setting the fork behaviour but to be honest the default configuration is what I want, i.e. parallel threads in the same JVM. Any help much appreciated</p><p><br></p><p><span></span></p><p>Thanks.</p><p><span><br class=\"ygrps-yiv-712184138yui-cursor\"></span></p></div>", 
    "prevInTime": 24764, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1493707842", 
    "canDelete": false, 
    "nextInTopic": 24766, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PG9lOTlsZytqNmI3NzlAWWFob29Hcm91cHMuY29tPg=="
    }
}