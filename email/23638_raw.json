{
    "numMessagesInTopic": 13, 
    "nextInTime": 23639, 
    "senderId": "SUj1KsjRWssutdHA0nANY7JGol9bJjST7_wQr9HHVxrObD14DYLpXERlDxr9TXR6eGZ5nQgvP-fq9NK3y1jY8kVHtQx54jX4", 
    "systemMessage": false, 
    "subject": "Re: [junit] Feature request: @Assumes", 
    "from": "Carfield Yim &lt;carfield@...&gt;", 
    "authorName": "Carfield Yim", 
    "msgSnippet": "It sound like a mock, isn t it? On Wed, Sep 14, 2011 at 6:02 PM, Stephen Connolly ", 
    "msgId": 23638, 
    "rawEmail": "Return-Path: &lt;carfield@...&gt;\r\nX-Sender: carfield@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 4033 invoked from network); 14 Sep 2011 15:34:14 -0000\r\nX-Received: from unknown (98.137.35.161)\n  by m16.grp.sp2.yahoo.com with QMQP; 14 Sep 2011 15:34:14 -0000\r\nX-Received: from unknown (HELO mail-qy0-f175.google.com) (209.85.216.175)\n  by mta5.grp.sp2.yahoo.com with SMTP; 14 Sep 2011 15:34:14 -0000\r\nX-Received: by qyk10 with SMTP id 10so4116120qyk.13\n        for &lt;junit@yahoogroups.com&gt;; Wed, 14 Sep 2011 08:34:13 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.52.70.37 with SMTP id j5mr937633vdu.386.1316014453524; Wed, 14\n Sep 2011 08:34:13 -0700 (PDT)\r\nX-Received: by 10.52.160.130 with HTTP; Wed, 14 Sep 2011 08:34:13 -0700 (PDT)\r\nIn-Reply-To: &lt;CA+nPnMyQPw_hmB5PZjY5tO7LdhSvXJkb7Nn9JFZreB1Vy5P8ow@...&gt;\r\nReferences: &lt;CA+nPnMwbfNvxbhqjWVyXW7UDt2VM5TzwWzwAiRJaHkKrnHzmxQ@...&gt;\n\t&lt;CA+nPnMyQPw_hmB5PZjY5tO7LdhSvXJkb7Nn9JFZreB1Vy5P8ow@...&gt;\r\nDate: Wed, 14 Sep 2011 23:34:13 +0800\r\nX-Google-Sender-Auth: s448I67AT_Z4UjkIxmbzIt7TkQQ\r\nMessage-ID: &lt;CACfbOveM6NMPJDFn5B9uyo5bccFJy1+rWvs8373cGHhv71wVWg@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nX-eGroups-From: Carfield Yim &lt;carfield@...&gt;\r\nFrom: Carfield Yim &lt;carfield@...&gt;\r\nSubject: Re: [junit] Feature request: @Assumes\r\nX-Yahoo-Group-Post: member; u=237979346; y=N2CrYHGEQJELsqJ4YmQ08q4vRISTz6zt0nxL8zlL5zuMZqc\r\nX-Yahoo-Profile: c8133594\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nIt sound like a mock, isn&#39;t it?\n\nOn Wed, Sep 14, 2011 at 6:02 PM, Stephen Connolly &lt;\nstephen.alan.connolly@...&gt; wrote:\n\n&gt; Note: I have also posted this to junit-devel@... but\n&gt; I think that wider input could be beneficial\n&gt;\n&gt; Consider the case where you are testing a List class...\n&gt;\n&gt; we have\n&gt;\n&gt; public class ListTest {\n&gt;\n&gt;  @Test\n&gt;  public void newListIsEmpty() {\n&gt;    assertThat(new List().isEmpty(), is(true);\n&gt;  }\n&gt;\n&gt;  @Test\n&gt;  public void newListHasSizeZero() {\n&gt;    assertThat(new List().size(), is(0));\n&gt;  }\n&gt;\n&gt;  @Test\n&gt;  public void addPutsAnElementIntoAnEmptyList() {\n&gt;    List l = new List();\n&gt;    l.add(new Object());\n&gt;    assertThat(l.isEmpty(), is(false));\n&gt;  }\n&gt;\n&gt;  @Test\n&gt;  public void addIncreasesSizeOfPopulatedListByOne() {\n&gt;    List l = new List();\n&gt;    l.add(new Object());\n&gt;    int s = l.size();\n&gt;    l.add(new Object());\n&gt;    assertThat(l.size(), is(s + 1));\n&gt;  }\n&gt;\n&gt; }\n&gt;\n&gt; We now want to add some tests of the delete functionality... but the\n&gt; reality is that until/unless some of the preceding tests are passing,\n&gt; the tests for delete are meaningless. We could have a perfectly\n&gt; functional List.delete() method but until such time as the above tests\n&gt; are passing, there is no way to tell that the method does not work.\n&gt;\n&gt; Now I could code my tests like such\n&gt;\n&gt;  @Test\n&gt;  public void deleteIsANoOpOnEmptyList() {\n&gt;    List l = new List();\n&gt;    assumeThat(l.isEmpty(), is(true));\n&gt;    l.delete(new Object());\n&gt;  }\n&gt;\n&gt; But all that I am doing is repeating code from the preceding tests,\n&gt; having changed all those tests&#39; assertThat(...)s into assumeThat(...)s\n&gt;\n&gt; That does not seem agile to me, copy & paste & search & replace... ban\n&gt; code smell there\n&gt;\n&gt; I would much rather be able to annotate the tests with an @Assumes\n&gt; annotation that indicates that the test assumes that the specified\n&gt; tests are passing, e.g.\n&gt;\n&gt;  @Test\n&gt;  @Assumes(&quot;newListIsEmpty&quot;)\n&gt;  public void deleteIsANoOpOnEmptyList() {\n&gt;    List l = new List();\n&gt;    l.delete(new Object());\n&gt;  }\n&gt;\n&gt;  @Test\n&gt;  @Assumes({&quot;newListIsEmpty&quot;,&quot;addPutsAnElementIntoAnEmptyList&quot;)\n&gt;  public void deleteRemovesAnElement() {\n&gt;    List l = new List();\n&gt;    Object o = new Object();\n&gt;    l.add(o);\n&gt;    l.delete(o);\n&gt;    assertThat(l.isEmpty(), is(true));\n&gt;  }\n&gt;\n&gt; In fact in my initial example of tests, there are some additional\n&gt; assumptions that I didn&#39;t make explicit\n&gt;\n&gt;\n&gt;  @Test\n&gt;  @Assumes(&quot;newListIsEmpty&quot;)\n&gt;  public void addPutsAnElementIntoAnEmptyList() {\n&gt;    ...\n&gt;  }\n&gt;\n&gt; and\n&gt;\n&gt;  @Test\n&gt;  @Assumes({&quot;newListIsEmpty&quot;,&quot;addPutsAnElementIntoAnEmptyList&quot;)\n&gt;  public void addIncreasesSizeOfPopulatedListByOne() {\n&gt;    ...\n&gt;  }\n&gt;\n&gt; Now you could get some of this functionality via a TestRule...\n&gt;\n&gt; You could watch tests to see if they pass, and skip tests annotated\n&gt; with the annotation if assumed functionality is failing, but that\n&gt; would result in sporadic failures of, e.g. deleteRemovesAnElement\n&gt; because of the failing newListIsEmpty being executed _after_\n&gt; deleteRemovesAnElement rather than before.\n&gt;\n&gt; The simple point is that the test result of deleteRemovesAnElement is\n&gt; meaningless until its assumptions are true, and while I could code the\n&gt; assumptions with assumeThat(..)s C&P&S&R is even worse than C&P.\n&gt;\n&gt; Another alternative to @Assumes would be to invoke the assumed\n&gt; method(s) at the start of the test, e.g.\n&gt;\n&gt;  @Test\n&gt;  public void deleteRemovesAnElement() {\n&gt;    newListIsEmpty(); // verify assumed functionality\n&gt;    addPutsAnElementIntoAnEmptyList();  // verify assumed functionality\n&gt;    ...\n&gt;  }\n&gt;\n&gt; That gets rid of the C&P&S&R, but there are two issues with that:\n&gt;\n&gt;  1. We have to manually invoke any setup/tearDown methods, including\n&gt; all those of the rules that the test class has... very messy\n&gt;\n&gt;  2. The test fails when the assumed test fails. In actuality we can\n&gt; say nothing at all about whether deleteRemovesAnElement if a\n&gt; newListIsEmpty is not passing... yes we could code the test\n&gt; differently, but that is just moving our assumptions somewhere else.\n&gt;\n&gt; I am sure that there are others out there who feel there is a point 3...\n&gt;\n&gt;  3. We already ran those tests why waste time running them again?\n&gt;\n&gt; Well the answer to 3 is that these are UNIT tests which should be very\n&gt; fast, so what is the harm...\n&gt;\n&gt; So, in my view, best practice unit testing needs the ability to mark\n&gt; tests as assuming that other tests are passing, so that those tests\n&gt; can be skipped when the assumptions are known to be failing or\n&gt; skipped. [This is a deliberately loaded criteria... if the\n&gt; org.junit.runner.Request does not include the assumed test, then that\n&gt; test is neither known failing or known skipped, so we can run the test\n&gt; and output a warning that the failure may be because of assumed\n&gt; functionality... the use case of executing one and only one test\n&gt; repeatedly until you get that test passing]\n&gt;\n&gt; The annotation would have implications on test sorting, as any assumed\n&gt; tests would have to always happen before the assuming tests (as long\n&gt; as the assumed tests are in the org.junit.runner.Request)\n&gt;\n&gt; Also might have to be two annotations, e.g.\n&gt;\n&gt; @Assumes(methodNames)\n&gt; @AssumesClasses(classes)\n&gt;\n&gt; though in my view the @AssumesClasses is less critical, as these are\n&gt; UNIT tests and each test class should be independent to a large\n&gt; extent. However I am willing to consider that some people may have\n&gt; many test classes for one class under test, one test class containing\n&gt; all the tests of the constructors, another testing the Add methods,\n&gt; etc. in which case an @AssumesClasses annotation makes sense.\n&gt;\n&gt; Where tests contain a circular dependency, fail/error both tests\n&gt;\n&gt; Ok, let the critique begin!\n&gt;\n&gt; -Stephen\n&gt;\n&gt; P.S.\n&gt;\n&gt; I pinged Kent with an earlier version of this idea... but I think that\n&gt; he missed the point about eliminating C&P&S&R that this feature would\n&gt; provide because I didn&#39;t frame the idea correctly...\n&gt;\n&gt; ---------- Forwarded message ----------\n&gt; From: &quot;Kent Beck&quot;\n&gt; Date: 13 Sep 2011 17:11\n&gt; Subject: Re: JUnit and test dependencies\n&gt; To: &quot;Stephen Connolly&quot;\n&gt;\n&gt; Stephen,\n&gt;\n&gt; Thank you for articulating your idea so clearly. The short answer is that\n&gt; no, we don&#39;t plan to support dependencies. If I have tests that are slow\n&gt; enough that I care about dependencies, my most productive option is\n&gt; generally to work on the design of the software until the tests are fast\n&gt; enough that I no longer care. That said, my voice is only one of many. The\n&gt; longer answer is that I encourage you to post your idea on the JUnit\n&gt; mailing\n&gt; list for community discussion.\n&gt;\n&gt; Regards,\n&gt;\n&gt; Kent\n&gt;\n&gt; On Sep 13, 2011, at 8:32 AM, Stephen Connolly wrote:\n&gt;\n&gt; &gt; Kent,\n&gt; &gt;\n&gt; &gt; Are there any plans for JUnit to support some test dependencies, such as:\n&gt; &gt;\n&gt; &gt; public class OnlyRunTestsThatMakeSenseTest {\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  public void basicFunctionalityWorks() {\n&gt; &gt;    ...\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  @AssumesPasses(&quot;basicFunctionalityWorks&quot;)\n&gt; &gt;  public void advancedFunctionalityWorks() {\n&gt; &gt;    ...\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  @AssumesPasses(&quot;basicFunctionalityWorks&quot;)\n&gt; &gt;  public void basicFunctionalityWorksWithBevel() {\n&gt; &gt;    ...\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;\n&gt;\n&gt;  @AssumesPasses({&quot;basicFunctionalityWorksWithBevel&quot;,&quot;advancedFunctionalityWorks&quot;})\n&gt; &gt;  public void advancedFunctionalityWorksWithBevel() {\n&gt; &gt;    ...\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt; }\n&gt; &gt;\n&gt; &gt; In the above example, no matter what sorting is applied,\n&gt; &gt; basicFunctionalityWorks will always be run first, and the other three\n&gt; &gt; tests will only be run if basicFunctionalityWorks passed.\n&gt; &gt;\n&gt; &gt; I see the above being completely in the spirit of unit testing, the\n&gt; &gt; point with the above is that the @Before and @After&#39;s will be run\n&gt; &gt; around each method, you are just saying that there is no point even\n&gt; &gt; trying to test the advanced functionality when the basic functionality\n&gt; &gt; is broken, skip those tests which we know cannot pass. That allows the\n&gt; &gt; person writing advancedFunctionalityWorks to power through the setup\n&gt; &gt; that depends on the basic functionality and not have to litter their\n&gt; &gt; advanced test with asserts that are redundant because of the basic\n&gt; &gt; functionality. Those people who are relying on side-effects should\n&gt; &gt; really, for unit tests at least, be invoking the method who&#39;s\n&gt; &gt; side-effects they depend on directly within their test method, rather\n&gt; &gt; than relying on accidental ordering.\n&gt; &gt;\n&gt; &gt; Having said that, a second feature that I think would be good is\n&gt; &gt; something like a @RunAfter and/or @RunBefore which would ensure that\n&gt; &gt; the test method is run in sequence even if the before or after tests\n&gt; &gt; fail/are skipped. with @RunAfter and @RunBefore I still think the\n&gt; &gt; @Before and @After methods should be invoked in-between, this would be\n&gt; &gt; moving towards more of a general purpose testing framework as opposed\n&gt; &gt; to being unit-testing focused, but JUnit is just too good ;-)\n&gt; &gt;\n&gt; &gt; Thoughts?\n&gt; &gt;\n&gt; &gt; -Stephen\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "c8133594", 
    "topicId": 23636, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 237979346, 
    "prevInTime": 23637, 
    "contentTrasformed": false, 
    "postDate": "1316014453", 
    "canDelete": false, 
    "nextInTopic": 23639, 
    "prevInTopic": 23636, 
    "headers": {
        "inReplyToHeader": "PENBK25Qbk15UVB3X2htQjVQWmpZNXRPN0xkaFN2WEprYjdObjlKRlpyZUIxVnk1UDhvd0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBQ2ZiT3ZlTTZOTVBKREZuNUI5dXlvNWJjY0ZKeTErcld2czgzNzNjR0hodjcxd1ZXZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBK25Qbk13YmZOdnhiaHFqV1Z5WFc3VUR0MlZNNVR6d1d6d0FpUkphSGtLcm5Iem14UUBtYWlsLmdtYWlsLmNvbT4JPENBK25Qbk15UVB3X2htQjVQWmpZNXRPN0xkaFN2WEprYjdObjlKRlpyZUIxVnk1UDhvd0BtYWlsLmdtYWlsLmNvbT4="
    }
}