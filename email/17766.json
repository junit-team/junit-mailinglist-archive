{
    "numMessagesInTopic": 287, 
    "nextInTime": 17767, 
    "senderId": "bDw2wP_RVm1yzXxfFyWwnCUotxxYhJo5w5bbAX8gsoC9gnqTnqAn-zLRc7Fo46jbdaLydaWX5pxBMw9t2DYyxdWMPrQhT8RCz-6EJZnq9_355g", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Test-friendly, but not caller-friendly?", 
    "from": "Michael Feathers &lt;mfeathers@...&gt;", 
    "authorName": "Michael Feathers", 
    "msgSnippet": "Elliotte, We ve gone on for a while in this thread, but I think if I had to summarize my position it would be this:  Sure enough, Java doesn t support runtime", 
    "msgId": 17766, 
    "profile": "mfeathers256", 
    "topicId": 17266, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 78021826, 
    "messageBody": "<div id=\"ygrps-yiv-1248135838\">Elliotte,<br/>\n<br/>\nWe&#39;ve gone on for a while in this thread, but I think if I had to <br/>\nsummarize my position it would be this:  Sure enough, Java doesn&#39;t <br/>\nsupport runtime monitoring of preconditions for interfaces, but although <br/>\nruntime monitoring is fine, the real benefit of a precondition is to <br/>\nexplain what a caller shouldn&#39;t do.  We may find ourselves performing <br/>\nchecks at the edge of a system, say at the client interfaces, but I <br/>\ndon&#39;t find much value in precondition checking inside application code.  <br/>\nI prefer to write my code so that usage is obvious and documented with <br/>\ntest cases.<br/>\n<br/>\nOne of the most awkward things about advice in this area is that most of <br/>\nthe people offering advice have an API developer&#39;s bias.  They tend to <br/>\nassume the stance (probably out of habit) that you don&#39;t know the <br/>\ncallers of your code, and that you have to assume the worst.  Not all <br/>\nclasses are APIs, and in fact, I&#39;d go further and say that not all <br/>\npublic classes are APIs either.  Application developers can play by <br/>\ndifferent rules, and often they do.  I&#39;ve worked with many teams who use <br/>\ninterfaces prolifically inside their applications, and they don&#39;t see <br/>\nlack of preconditions as a problem because they have a shared <br/>\nunderstanding, as a team, about what the interface is there to support.<br/>\n<br/>\nMichael Feathers<br/>\nwww.objectmentor.com<br/>\n<br/>\n<br/>\n<br/>\nMichael Feathers wrote:<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt;Elliotte Harold wrote:<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;&gt;Michael Feathers wrote:<br/>\n&gt;&gt;<br/>\n&gt;&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;&gt;&gt;But back to your original point: &quot;It might sometimes be a <br/>\n&gt;&gt;&gt;NullPointerException or something else instead, but advertising a <br/>\n&gt;&gt;&gt;precondition is not an excuse for misbehavior just because you receive <br/>\n&gt;&gt;&gt;bad data.&quot; Under DbC, it is.  Fact is, if your precondition fails or you <br/>\n&gt;&gt;&gt;get a NullPointerException, there&#39;s a bug in the client.  You can have <br/>\n&gt;&gt;&gt;checking enabled, or not, but checking is not error handling. <br/>\n&gt;&gt;&gt;   <br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;      <br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;Then maybe we agree more than we think. If checking is not error <br/>\n&gt;&gt;handling, then I accept that we don&#39;t need to handle the error. Indeed, <br/>\n&gt;&gt;in many cases we can&#39;t reasonably handle the error inside the method. <br/>\n&gt;&gt;However, I do think that it&#39;s important not to blindly accept a bad <br/>\n&gt;&gt;argument that violates a precondition and precede blindly ahead whatever <br/>\n&gt;&gt;happens. It is important to fail fast (and in a controlled and <br/>\n&gt;&gt;documented way via an exception) rather than let the software corrupt <br/>\n&gt;&gt;itself. Martin Fowler has written extensively about this:<br/>\n&gt;&gt;<br/>\n&gt;&gt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.martinfowler.com/ieeeSoftware/failFast.pdf\">http://www.martinfowler.com/ieeeSoftware/failFast.pdf</a><br/>\n&gt;&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;The thing that makes conversations like this so hard is that fact that <br/>\n&gt;the context is often left hanging.  It&#39;s particularly bad when talking <br/>\n&gt;about error handling and recovery because there is no one right approach <br/>\n&gt;there.  Some systems have to be up all of the time and fail fast <br/>\n&gt;wouldn&#39;t fly.  Jim outlines a great strategy in that article for the <br/>\n&gt;cases where it&#39;s appropriate.<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;&gt;&gt;The point <br/>\n&gt;&gt;&gt;of DbC is to build software robust enough so that you don&#39;t have to <br/>\n&gt;&gt;&gt;write error handling code at each level.  Relevant section is 11.6 <br/>\n&gt;&gt;&gt;&quot;Assertions are not an input checking mechanism.&quot;<br/>\n&gt;&gt;&gt;   <br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;      <br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;That&#39;s something very different. Meyer clearly means *user* input in <br/>\n&gt;&gt;that section, and I agree with him on that. Assertions very much are an <br/>\n&gt;&gt;argument/parameter checking mechanism. I don&#39;t think we&#39;re talking here <br/>\n&gt;&gt;about user input, just about how two different methods from two <br/>\n&gt;&gt;different code bases communicate.<br/>\n&gt;&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt;Yes, I should have said more.  The thing I wanted to point out in that <br/>\n&gt;section was that when you have checking that will lead you to do <br/>\n&gt;something, it should be at the edges (what Meyer calls &#39;filter classes&#39;) <br/>\n&gt;and not scattered throughout the code.  Otherwise, you are back at <br/>\n&gt;defensive coding again.<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;&gt;&gt;And when you say &quot;It is my job to make sure my code works. I can&#39;t do <br/>\n&gt;&gt;&gt;that if the code that calls it violates my preconditions and class <br/>\n&gt;&gt;&gt;invariants.&quot;  Most of the time, that&#39;s trying to do too much.<br/>\n&gt;&gt;&gt;   <br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;      <br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;Agreed. What I really should have said is something like, &quot;It&#39;s my job <br/>\n&gt;&gt;to make sure my code works, or signals an error at the earliest possible <br/>\n&gt;&gt;opportunity if it can&#39;t work due to precondition violation&quot;<br/>\n&gt;&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;I think that, again, that is situational and it depends on your <br/>\n&gt;development style.  I write a lot of tests for my code and when I work <br/>\n&gt;with teams we often get to the point that they serve as primary <br/>\n&gt;documentation.  If you want to see how something works, look a  test <br/>\n&gt;case, if you can&#39;t find one, write one to make sure it works the way you <br/>\n&gt;want to.  It&#39;s hard to describe what happens when you do that, but I <br/>\n&gt;think the easiest thing is to say is that you are less concerned with <br/>\n&gt;the correctness of a class, and more concerned with the correctness of <br/>\n&gt;its use.  That may sound bad, but it works because your class becomes <br/>\n&gt;the intersection of its uses. <br/>\n&gt;<br/>\n&gt;Michael Feathers<br/>\n&gt;www.objectmentor.com<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 17765, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1157387413", 
    "canDelete": false, 
    "nextInTopic": 17767, 
    "prevInTopic": 17765, 
    "headers": {
        "inReplyToHeader": "PDQ0RkM0M0RGLjYwNDA5MDhAbWluZHNwcmluZy5jb20+", 
        "messageIdInHeader": "PDQ0RkM1NDk1LjQwMzAyMDNAbWluZHNwcmluZy5jb20+", 
        "referencesHeader": "PEQ5M0IwNjVGLUYwMzctNDYyNS1BOTExLTMxRUVDQkVCMTc3OEBvYmplY3RtZW50b3IuY29tPiA8NDRGQUIwMUEuODAzMDYwM0BtZXRhbGFiLnVuYy5lZHU+IDw0NEZBRDRFOC42MDIwNTA1QGlsamFwcmV1c3MuZGU+IDw0NEZCMjMyQS43MDAwNzA1QG1ldGFsYWIudW5jLmVkdT4gPDQ0RkI4M0FBLjUwMjAyMDBAbWluZHNwcmluZy5jb20+IDw0NEZCRkZBQy4zMDIwMzA3QG1ldGFsYWIudW5jLmVkdT4gPDQ0RkMyRjgwLjYwNTA3MDBAbWluZHNwcmluZy5jb20+IDw0NEZDMzVFRC4xMDMwODA0QG1ldGFsYWIudW5jLmVkdT4gPDQ0RkM0M0RGLjYwNDA5MDhAbWluZHNwcmluZy5jb20+"
    }
}