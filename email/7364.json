{
    "numMessagesInTopic": 7, 
    "nextInTime": 7365, 
    "senderId": "1LsalX4KHAW3q4y-F07j3UsjpgXIjK7kP5cyHuQOrQWS7kPxnafbLD3oUXgP_hLNeSzXOW5p8ASzvkQICcRypUy77zv9VjAbJZmWYBi06Q", 
    "systemMessage": false, 
    "subject": "Re: [junit] Junit and EJBs", 
    "from": "Frank Burough &lt;fburough@...&gt;", 
    "authorName": "Frank Burough", 
    "msgSnippet": "Hi-- I am still tearing my hair out trying to exercise EJBs with JUnit. Any further insights or help would be greatly appreciated. Based on Alan s comments (in", 
    "msgId": 7364, 
    "topicId": 7330, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 142170960, 
    "messageBody": "<div id=\"ygrps-yiv-398802006\">Hi--<br/>\n<br/>\nI am still tearing my hair out trying to exercise EJBs with JUnit. Any<br/>\nfurther insights or help would be greatly appreciated. <br/>\nBased on Alan&#39;s comments (in the included message below), I have set a<br/>\nsecurity manager, created a policy file and pointed my codebse to the<br/>\ndirectory containing my class files. I now get a <br/>\n&quot;javax.naming.CommunicationException [Root exception is<br/>\njava.rmi.ServerException: RemoteException occurred in server thread;<br/>\nnested exception is:<br/>\n        java.rmi.UnmarshalException: error unmarshalling arguments;<br/>\nnested exception is:<br/>\n        java.net.MalformedURLException: no protocol:<br/>\n/home/fburough/simplebean/workspace/com/javapro/ejb]&quot;<br/>\n<br/>\nmessage when I run JUnit. <br/>\n<br/>\nHere is the code that sets up my test:<br/>\n\tif(System.getSecurityManager() == null)<br/>\n\t    System.setSecurityManager(new RMISecurityManager());<br/>\n\tProperties properties = new Properties();<br/>\n\tproperties.put(Context.INITIAL_CONTEXT_FACTORY, <br/>\n\t\t       &quot;org.jnp.interfaces.NamingContextFactory&quot;);<br/>\n\tproperties.put(Context.PROVIDER_URL,<br/>\n&quot;file:///home/fburough/simplebean/workspace&quot;);<br/>\n\t<br/>\n\ttry {<br/>\n\t    // Get an initial context<br/>\n\t    InitialContext jndiContext = new InitialContext(properties);<br/>\n<br/>\n\t    // Get a reference to the Bean<br/>\n\t    Object ref  = jndiContext.lookup(&quot;StringProcessor&quot;);<br/>\n\t    StringProcessorHome home = (StringProcessorHome)<br/>\n\t\t   PortableRemoteObject.narrow (ref, StringProcessorHome.class);<br/>\n  }<br/>\nThe error occurs on the call to PortableRemoteObject.narrow.<br/>\n<br/>\nI have tried to load the EJB from the bean container and get errors as<br/>\nwell:<br/>\n1) Changed the Context.PROVIDER_URL to be &quot;localhost:1099&quot;<br/>\n2) Remove the &quot;-Djava.rmi.server.codebase=&quot; line from the java startup<br/>\n<br/>\nThe error I get then is: java.lang.ClassCastException<br/>\n<br/>\n<br/>\nAny suggestions? I hate to give up on JUnit because it works so well for<br/>\nthe other testing I need to do. But how to test those EJBs is still a<br/>\nproblem.<br/>\n<br/>\nThanks,<br/>\n<br/>\nFrank<br/>\n<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Tue, 2003-03-25 at 00:56, Alan Zimmerman wrote:<br/>\n<br/>\n&gt; I am able to run the tests with the addition of the following code to<br/>\n&gt; the setup of the test,<br/>\n&gt; <br/>\n&gt; if (System.getSecurityManager() == null) {<br/>\n&gt;   System.setSecurityManager(new RMISecurityManager());<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; as well as adding the following parameters to the java startup<br/>\n&gt; <br/>\n&gt; &lt;jvmarg line=&quot;-Djava.security.policy=${security.policy} -Djava.rmi.server.codebase=${rmi.server.codebase}&quot;/&gt;<br/>\n&gt; <br/>\n&gt; The ${security.policy} macro points to a java.policy file giving all<br/>\n&gt; permissions, and the ${rmi.server.codebase} points to the directory<br/>\n&gt; the .class files end up in.<br/>\n&gt; <br/>\n&gt; Hope this helps<br/>\n&gt; <br/>\n&gt; Alan Zimmerman<br/>\n&gt; <br/>\n&gt; On Mon, Mar 24, 2003 at 11:28:37AM -0500, Frank Burough wrote:<br/>\n&gt; &gt; I am attempting to access an EJB from a JUnit test. I use the identical<br/>\n&gt; &gt; logic in the JUnit test case as I do in a standalone application.<br/>\n&gt; &gt; However, when I run the test I get the error:<br/>\n&gt; &gt; <br/>\n&gt; &gt; javax.naming.CommunicationException.  Root exception is<br/>\n&gt; &gt; java.lang.ClassNotFoundException: com.javapro.ejb.StringProcessorHome<br/>\n&gt; &gt; (no security manager: RMI class loader disabled)<br/>\n&gt; &gt; <br/>\n&gt; &gt; Is there any way around this, so I can do some tests which require<br/>\n&gt; &gt; connecting to an EJB? If not, I could use any suggestions on integration<br/>\n&gt; &gt; testing applications that require access to EJBs.<br/>\n&gt; &gt; <br/>\n&gt; &gt; Here is the code I use to set up access to the EJB:<br/>\n&gt; &gt; <br/>\n&gt; &gt;    Properties properties = new Properties();<br/>\n&gt; &gt;     properties.put(Context.INITIAL_CONTEXT_FACTORY,<br/>\n&gt; &gt; &quot;org.jnp.interfaces.NamingContextFactory&quot;);<br/>\n&gt; &gt;     properties.put(Context.PROVIDER_URL, &quot;localhost:1099&quot;);<br/>\n&gt; &gt;     properties.put(Context.URL_PKG_PREFIXES,<br/>\n&gt; &gt; &quot;org.jboss.naming:org.jnp.interfaces&quot;);<br/>\n&gt; &gt; <br/>\n&gt; &gt;     InitialContext jndiContext = new InitialContext(properties);<br/>\n&gt; &gt;     System.out.println(&quot;Trying to lookup StringProcessor&quot;);<br/>\n&gt; &gt;     Object ref = jndiContext.lookup(&quot;StringProcessor&quot;);<br/>\n&gt; &gt; <br/>\n&gt; &gt; The error occurs on the call to lookup.<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; Thanks for your help,<br/>\n&gt; &gt; <br/>\n&gt; &gt; Frank<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;  <br/>\n&gt; &gt; <br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt; <br/>\n&gt; <br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 7363, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1049141513", 
    "canDelete": false, 
    "nextInTopic": 7403, 
    "prevInTopic": 7338, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwMzI1MDU1NjE1LkdKMTgzNUBzeW5hcHAuY29tPg==", 
        "messageIdInHeader": "PDEwNDkxNDE1MTMuMTg1NS42MS5jYW1lbEBmYnVyb3VnaD4=", 
        "referencesHeader": "PDEwNDg1MjMzMTcuMTc0NC4zNi5jYW1lbEBmYnVyb3VnaD4JIDwyMDAzMDMyNTA1NTYxNS5HSjE4MzVAc3luYXBwLmNvbT4="
    }
}