{
    "topicId": 702, 
    "postDate": "984760486", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Vitezslav Stejskal &lt;vitezslav.stejskal@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "kZKU0x9QZIbGEmYJqw27ip38zq0XHntNYqDpy5QRbZW1bf_v5ziVjysineetIv4CrL4cX7YUB6BnDJFvebhFnlVj1d75V4hvqLqjmhDR4uvP_qWIHQnNV5mBZFw", 
    "nextInTime": 725, 
    "userId": 0, 
    "prevInTime": 723, 
    "prevInTopic": 723, 
    "headers": {
        "messageIdInHeader": "PDNBQjI0MEE2LjI5NjA3MjJGQGN6ZWNoLnN1bi5jb20+", 
        "referencesHeader": "PDk4dGJwcSticm1uQGVHcm91cHMuY29tPg=="
    }, 
    "authorName": "Vitezslav Stejskal", 
    "numMessagesInTopic": 14, 
    "msgSnippet": "There is a several things you have to keep in mind when using Ant: * all tasks are instantiated during the parsing time, even if they will never be launched *", 
    "contentTrasformed": false, 
    "msgId": 724, 
    "nextInTopic": 725, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;vitezslav.stejskal@...&gt;\r\nX-Sender: vitezslav.stejskal@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_0_4); 16 Mar 2001 16:34:45 -0000\r\nReceived: (qmail 10638 invoked from network); 16 Mar 2001 16:34:44 -0000\r\nReceived: from unknown (10.1.10.142) by l10.egroups.com with QMQP; 16 Mar 2001 16:34:44 -0000\r\nReceived: from unknown (HELO mercury.Sun.COM) (192.9.25.1) by mta3 with SMTP; 16 Mar 2001 17:35:49 -0000\r\nReceived: from sunpraha.Czech.Sun.COM ([129.156.76.4]) by mercury.Sun.COM (8.9.3+Sun/8.9.3) with ESMTP id IAA20634 for &lt;junit@yahoogroups.com&gt;; Fri, 16 Mar 2001 08:34:42 -0800 (PST)\r\nReceived: from czech.sun.com (vstejskal [129.156.75.101]) by sunpraha.Czech.Sun.COM (8.9.3+Sun/8.9.3/ENSMAIL,v2.1p1) with ESMTP id RAA11996 for &lt;junit@yahoogroups.com&gt;; Fri, 16 Mar 2001 17:34:41 +0100 (CET)\r\nMessage-ID: &lt;3AB240A6.2960722F@...&gt;\r\nDate: Fri, 16 Mar 2001 17:34:46 +0100\r\nOrganization: SUN Microsystems Czech s.r.o.\r\nX-Mailer: Mozilla 4.76 [en] (Windows NT 5.0; U)\r\nX-Accept-Language: cs,en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] Re: JUnit 3.5 & Ant 1.3\r\nReferences: &lt;98tbpq+brmn@...&gt;\r\nContent-Type: text/plain; charset=us-ascii\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Vitezslav Stejskal &lt;vitezslav.stejskal@...&gt;\r\n\r\n\nThere is a several things you have to keep in\nmind when using Ant:\n\n* all tasks are instantiated during the parsing time, even if they will\nnever be launched\n\n* tasks are loaded using the system classpath or the classpath\ndefined in the taskdef element, this allows you to load\ntask&#39;s class from the classpath defined in your script\n\n* the above rule has an exception - tasks placed in the\npackage org.apache.tools.ant are *always* loaded using\nthe system classpath\n\nThus all built-in and optional tasks are loaded from the system\nclasspath as well as any other class they need (in your case the junit\nclasses).\n\nSo far I see two options:\n* put junit.jar on the system&#39;s claspath\n(modify CLASSPATH environment variable or put it into the\n${ANT_HOME}/lib directory)\n\n* create new class derived from the org.apache.tools.ant.taskdef.optional.junit.JUnitTask,\nplace it in your own package and use the taskdef element to redefine Ant&#39;s default\njunit task.\n\nVita\n\nbugfix4u@... wrote:\n\n&gt; Here is an update of what I have found so far.\n&gt;\n&gt; If I let Ant build my classpath at runtime to run my JUnit test I\n&gt; get the following error listed below. The odd thing is that when JUnit\n&gt; echos my classpath it list the junit.jar right there in the classpath\n&gt; statement. Anyone have a clue of what is going on?\n&gt;\n&gt;  run.tests:\n&gt;      [echo] Claspath for JUnit:\n&gt; /home/dchambers/apps/jakarta/tomcat/webapps/lolo/built_tests/classes:/home/dchambers/apps/jakarta/tomcat/webapps/lolo/WEB-INF/lib/junit.jar:/home/dchambers/apps/jakarta/tomcat/webapps/lolo/WEB-INF/classes:/home/dchambers/apps/jakarta/tomcat/webapps/lolo/WEB-INF/lib/barracuda.jar:/home/dchambers/apps/jakarta/tomcat/webapps/lolo/WEB-INF/lib/xmlc.jar:/home/dchambers/apps/jakarta/tomcat/webapps/lolo/WEB-INF/lib/ant_xmlc.jar:/home/dchambers/apps/jakarta/tomcat/webapps/lolo/WEB-INF/lib/servlet.jar\n&gt;\n&gt; BUILD FAILED\n&gt;\n&gt; /home/dchambers/apps/jakarta/tomcat/webapps/lolo/src/build.xml:273:\n&gt; Could not create task of type: junit due to\n&gt; java.lang.NoClassDefFoundError: junit/framework/TestListener\n&gt; --- Nested Exception ---\n&gt; java.lang.NoClassDefFoundError: junit/framework/TestListener\n&gt;         at java.lang.ClassLoader.defineClass0(Native Method)\n&gt;         at java.lang.ClassLoader.defineClass(ClassLoader.java:486)\n&gt;         at\n&gt; java.security.SecureClassLoader.defineClass(SecureClassLoader.java:111)\n&gt;         at\n&gt; java.net.URLClassLoader.defineClass(URLClassLoader.java:248)\n&gt;         at java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n&gt;         at java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n&gt;         at java.security.AccessController.doPrivileged(Native Method)\n&gt;         at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n&gt;         at java.lang.ClassLoader.loadClass(ClassLoader.java:297)\n&gt;         at\n&gt; sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:286)\n&gt;         at java.lang.ClassLoader.loadClass(ClassLoader.java:253)\n&gt;         at\n&gt; java.lang.ClassLoader.loadClassInternal(ClassLoader.java:313)\n&gt;         at java.lang.Class.newInstance0(Native Method)\n&gt;         at java.lang.Class.newInstance(Class.java:237)\n&gt;         at org.apache.tools.ant.Project.createTask(Project.java:439)\n&gt;         at\n&gt; org.apache.tools.ant.UnknownElement.maybeConfigure(UnknownElement.java:83)\n&gt;         at org.apache.tools.ant.Target.execute(Target.java:152)\n&gt;         at org.apache.tools.ant.Project.runTarget(Project.java:898)\n&gt;         at\n&gt; org.apache.tools.ant.Project.executeTarget(Project.java:536)\n&gt;         at\n&gt; org.apache.tools.ant.Project.executeTargets(Project.java:510)\n&gt;         at org.apache.tools.ant.Main.runBuild(Main.java:421)\n&gt;         at org.apache.tools.ant.Main.main(Main.java:149)\n&gt;\n&gt; --- In junit@y..., bugfix4u@y... wrote:\n&gt; &gt; Yes JUnit is definetly in the classpath. Like I said I use the same\n&gt; &gt; &lt;classpath refid=&quot;test.build.classpath&quot;/&gt; to compile all of my JUnit\n&gt; &gt; test with no problem. But when I use this line in the target that\n&gt; runs\n&gt; &gt; my Junit classes It can not find it. The difference here being that\n&gt; &gt; the javac task def has no problem understanding &lt;classpath\n&gt; &gt; refid=&quot;test.build.classpath&quot;/&gt; statement while the junit taskdef\n&gt; seem\n&gt; &gt; to ignore it. I could redefine my classpath using the form that you\n&gt; &gt; used in your example, but that defeats the purpose of me predefining\n&gt; &gt; my test classpath so that I can using over an over again in\n&gt; different\n&gt; &gt; targets.\n&gt; &gt;\n&gt; &gt; --- In junit@y..., Marc Pages &lt;marc.pages@m...&gt; wrote:\n&gt; &gt; &gt; I don&#39;t know anything about refid but is junit included in the\n&gt; &gt; classpath?\n&gt; &gt; &gt; See the example build file below. (Some of the junit stuff is\n&gt; &gt; derived from\n&gt; &gt; &gt; &lt;http://www-106.ibm.com/developerworks/library/j-ant/?dwzone=java&gt;\n&gt; )\n&gt; &gt; &gt;\n&gt; &gt; &gt; Marc\n&gt; &gt; &gt;\n&gt; &gt; &gt; ============= build.xml begin\n&gt; &gt; &gt; &lt;?xml version=&quot;1.0&quot;?&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; &lt;project name=&quot;xfiles&quot; default=&quot;jar&quot; basedir=&quot;.&quot;&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;init&quot;&gt;\n&gt; &gt; &gt;     &lt;property name=&quot;name&quot; value=&quot;xfiles&quot; /&gt;\n&gt; &gt; &gt;     &lt;property name=&quot;src.dir&quot; value=&quot;src&quot; /&gt;\n&gt; &gt; &gt;     &lt;property name=&quot;lib.dir&quot; value=&quot;lib&quot; /&gt;\n&gt; &gt; &gt;     &lt;property name=&quot;build.dir&quot; value=&quot;build&quot; /&gt;\n&gt; &gt; &gt;     &lt;property name=&quot;dist.dir&quot; value=&quot;dist&quot; /&gt;\n&gt; &gt; &gt;     &lt;property name=&quot;build.compiler&quot; value=&quot;classic&quot; /&gt;\n&gt; &gt; &gt;     &lt;property name=&quot;junit.dir&quot; value=&quot;../junit3.5/junit.jar&quot; /&gt;\n&gt; &gt; &gt;   &lt;/target&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;JUNIT&quot;&gt;\n&gt; &gt; &gt;     &lt;available classname=&quot;junit.framework.TestCase&quot;\n&gt; &gt; &gt; classpath=&quot;${junit.dir}/&quot; property=&quot;junit.present&quot; /&gt;\n&gt; &gt; &gt;   &lt;/target&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;clean&quot; depends=&quot;init&quot;&gt;\n&gt; &gt; &gt;     &lt;delete dir=&quot;${build.dir}&quot; /&gt;\n&gt; &gt; &gt;     &lt;delete dir=&quot;${dist.dir}&quot; /&gt;\n&gt; &gt; &gt;   &lt;/target&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;prepare&quot; depends=&quot;init&quot;&gt;\n&gt; &gt; &gt;     &lt;mkdir dir=&quot;${build.dir}&quot; /&gt;\n&gt; &gt; &gt;     &lt;mkdir dir=&quot;${build.dir}/META-INF&quot; /&gt;\n&gt; &gt; &gt;     &lt;mkdir dir=&quot;${dist.dir}&quot; /&gt;\n&gt; &gt; &gt;   &lt;/target&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;compile&quot; depends=&quot;prepare,JUNIT&quot;&gt;\n&gt; &gt; &gt;     &lt;javac srcdir=&quot;${src.dir}&quot;\n&gt; &gt; &gt;            destdir=&quot;${build.dir}/&quot;\n&gt; &gt; &gt;            classpath=&quot;${lib.dir}/:${junit.dir}/&quot;\n&gt; &gt; &gt;            includes=&quot;**&quot; /&gt;\n&gt; &gt; &gt;   &lt;/target&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;runtests&quot; depends=&quot;compile&quot; if=&quot;junit.present&quot;&gt;\n&gt; &gt; &gt;     &lt;java fork=&quot;yes&quot; classname=&quot;junit.textui.TestRunner&quot;\n&gt; &gt; &gt;       taskname=&quot;junit&quot; failonerror=&quot;true&quot;&gt;\n&gt; &gt; &gt;       &lt;arg value=&quot;se.offex.jnitnpapi.MarketTest&quot;/&gt;\n&gt; &gt; &gt;       &lt;classpath&gt;\n&gt; &gt; &gt;         &lt;pathelement location=&quot;${build.dir}&quot;/&gt;\n&gt; &gt; &gt;         &lt;pathelement path=&quot;${junit.dir}/&quot; /&gt;\n&gt; &gt; &gt;         &lt;pathelement path=&quot;&quot;/&gt;\n&gt; &gt; &gt;         &lt;pathelement path=&quot;${java.class.path}&quot;/&gt;\n&gt; &gt; &gt;       &lt;/classpath&gt;\n&gt; &gt; &gt;     &lt;/java&gt;\n&gt; &gt; &gt;   &lt;/target&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;launchjunit&quot; depends=&quot;compile&quot; if=&quot;junit.present&quot;&gt;\n&gt; &gt; &gt;     &lt;java fork=&quot;yes&quot; classname=&quot;junit.swingui.TestRunner&quot;\n&gt; &gt; &gt;       taskname=&quot;junit&quot; failonerror=&quot;true&quot;&gt;\n&gt; &gt; &gt;       &lt;classpath&gt;\n&gt; &gt; &gt;         &lt;pathelement location=&quot;${build.dir}&quot;/&gt;\n&gt; &gt; &gt;         &lt;pathelement path=&quot;${junit.dir}/&quot; /&gt;\n&gt; &gt; &gt;         &lt;pathelement path=&quot;&quot;/&gt;\n&gt; &gt; &gt;         &lt;pathelement path=&quot;${java.class.path}&quot;/&gt;\n&gt; &gt; &gt;       &lt;/classpath&gt;\n&gt; &gt; &gt;     &lt;/java&gt;\n&gt; &gt; &gt;   &lt;/target&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;   &lt;target name=&quot;lj&quot; depends=&quot;launchjunit&quot;/&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; &lt;/project&gt;\n&gt; &gt; &gt; ============= build.xml end\n&gt; &gt; &gt;\n&gt; &gt; &gt; -----Original Message-----\n&gt; &gt; &gt; From: Denny Chambers\n&gt; &gt; &gt; To: junit@y...\n&gt; &gt; &gt; Sent: 2001-03-15 19:34\n&gt; &gt; &gt; Subject: [junit] JUnit 3.5 & Ant 1.3\n&gt; &gt; &gt;\n&gt; &gt; &gt; All,\n&gt; &gt; &gt;\n&gt; &gt; &gt; I am having a problem running my JUnit tests through Ant. I can\n&gt; &gt; build\n&gt; &gt; &gt; them fine using Ant. All of the classes are found properly.\n&gt; However\n&gt; &gt; when\n&gt; &gt; &gt; I try to run the test the JUnit classes can not be found on the\n&gt; &gt; &gt; classpath. I am using the same &lt;classpath\n&gt; &gt; refid=&quot;test.build.classpath&quot;\n&gt; &gt; &gt; /&gt; to run the tests that I am using to build. This makes me think\n&gt; &gt; that\n&gt; &gt; &gt; there is a bug with classpath refid in JUnit. I have seen postings\n&gt; &gt; on\n&gt; &gt; &gt; the Ant mailing list where people have had similar problems, but I\n&gt; &gt; &gt; haven&#39;t seen any real fixes. Can anyone help?\n&gt; &gt; &gt;\n&gt; &gt; &gt; Thanks,\n&gt; &gt; &gt; --\n&gt; &gt; &gt; Denny Chambers\n&gt; &gt; &gt; Linux Java Engineer\n&gt; &gt; &gt; Connex, Inc\n&gt; &gt; &gt; Voice: 770-455-7653\n&gt; &gt; &gt; Fax: 770-455-7325\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; To unsubscribe from this group, send an email to:\n&gt; &gt; &gt; junit-unsubscribe@y...\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; Your use of Yahoo! Groups is subject to\n&gt; &gt; &gt; http://docs.yahoo.com/info/terms/\n&gt;\n&gt;\n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;\n&gt;\n&gt; Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/\n\n--\nVitezslav Stejskal, Software engineer\n\nSUN Microsystems Czech s.r.o.\ne-mail: vitezslav.stejskal@...\ntel:    +420 2 3300-9232\n\n\n\n", 
    "subject": "Re: [junit] Re: JUnit 3.5 & Ant 1.3"
}