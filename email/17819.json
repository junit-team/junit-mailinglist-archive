{
    "numMessagesInTopic": 287, 
    "nextInTime": 17820, 
    "senderId": "OVB_UxKcFb6-d3cHuFEpLtTvSWAbAbrHAlp5DfYueas1aA12p6FAuaqZ_WvYp2eGoyFsvKBiY3vfrHT0CKOrwJY0jh6Y9iA4w6woEqYAkSpM2A", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Test-friendly, but not caller-friendly?", 
    "from": "Michael Feathers &lt;mfeathers@...&gt;", 
    "authorName": "Michael Feathers", 
    "msgSnippet": "... Joe, I ll answer this assuming that you re talking about API code, not application code.  If that s not the case, let me know. In some systems #1 is the", 
    "msgId": 17819, 
    "profile": "mfeathers256", 
    "topicId": 17266, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 78021826, 
    "messageBody": "<div id=\"ygrps-yiv-1947444735\">J. B. Rainsberger wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;Michael Feathers wrote:<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;&gt;But back to your original point: &quot;It might sometimes be a<br/>\n&gt;&gt;NullPointerException or something else instead, but advertising a<br/>\n&gt;&gt;precondition is not an excuse for misbehavior just because you receive<br/>\n&gt;&gt;bad data.&quot; Under DbC, it is. Fact is, if your precondition fails or you<br/>\n&gt;&gt;get a NullPointerException, there&#39;s a bug in the client. You can have<br/>\n&gt;&gt;checking enabled, or not, but checking is not error handling. The point<br/>\n&gt;&gt;of DbC is to build software robust enough so that you don&#39;t have to<br/>\n&gt;&gt;write error handling code at each level. Relevant section is 11.6<br/>\n&gt;&gt;&quot;Assertions are not an input checking mechanism.&quot;<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt;Indeed. If I violate your precondition, then I am writing defective<br/>\n&gt;code. There are a few remedies:<br/>\n&gt;<br/>\n&gt;1. Be nice and tolerate my indiscretion, say by substituting sensible<br/>\n&gt;default values and continuing.<br/>\n&gt;<br/>\n&gt;2. Telling me directly, &quot;You shouldn&#39;t do that,&quot; by throwing a specific<br/>\n&gt;exception that explains my mistake.<br/>\n&gt;<br/>\n&gt;3. Telling me indirectly, by failing is some deterministic, by<br/>\n&gt;non-obvious way.<br/>\n&gt;<br/>\n&gt;4. Providing me examples of how not to violate your precondition.<br/>\n&gt;<br/>\n&gt;5. Documenting the precondition and warning me that violating it leads <br/>\n&gt;to &quot;undefined behavior&quot;.<br/>\n&gt;<br/>\n&gt;6. Providing Contract Tests that I can inherit to help me know that my <br/>\n&gt;code won&#39;t violate your precondition.<br/>\n&gt;<br/>\n&gt;There are others, I&#39;m sure.<br/>\n&gt;<br/>\n&gt;It looks as though you reject #5 out of hand, and I agree, but all the <br/>\n&gt;others are viable choices. I would choose the one providing the best ROI <br/>\n&gt;for the situation. In a language that checks preconditions for me, I <br/>\n&gt;would get #2 for free. In Java, which doesn&#39;t, it depends on the cost of <br/>\n&gt;violating the precondition. If it&#39;s anything like persistent data <br/>\n&gt;corruption all the way up to loss of life, I would probably insist on <br/>\n&gt;#2. If it&#39;s nothing worse than having to retry one of a batch of <br/>\n&gt;transactions, I might go with #1. Still, I would probably insist on #4 <br/>\n&gt;and prefer #6.<br/>\n&gt;  <br/>\n&gt;<br/>\n </span></blockquote>Joe,<br/>\n<br/>\nI&#39;ll answer this assuming that you&#39;re talking about API code, not <br/>\napplication code.  If that&#39;s not the case, let me know.<br/>\n<br/>\nIn some systems #1 is the best answer, but those situations are rare <br/>\nand, as a strategy, it can lead to misunderstandings..  #2 and #4 are <br/>\ngreat strategies and I like #6 as well. <br/>\n<br/>\nI think it&#39;s interesting to talk about #5, though.    In nearly every <br/>\nother area of life, we deal with warranties and license agreements in <br/>\nwhich we explicitly assume responsibility for our use of products and <br/>\nservices.  In software we often try to protect clients from themselves <br/>\nand don&#39;t consider notice a fair grant of responsibility.<br/>\n<br/>\nThe fact is, it isn&#39;t universally true.  Lots of luck having Win32 save <br/>\nyou from violations of its preconditions, for instance. :-)<br/>\n<br/>\nFrankly, I wouldn&#39;t want to have only #5 at the API level, but I think <br/>\nthat this tendency we have to believe that we can not have an agreement <br/>\nwith users that is not enforced by code leads to a great deal of <br/>\ntrouble. Particularly in the area of visibility.. many developers assume <br/>\nthat no written agreement can be sufficient if something is made <br/>\npublic.  I think that the issue is that we are not used to thinking <br/>\nabout agreements beyond the code and we&#39;re not used to holding people to <br/>\nthem.<br/>\n<br/>\nThere are some exceptions.  One is the Eclipse API Rules of Engagement: <br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.eclipse.org/articles/Article-API%20use/eclipse-api-usage-rules.html\">http://www.eclipse.org/articles/Article-API%20use/eclipse-api-usage-rules.html</a><br/>\n<br/>\nIt&#39;s a contract above the code and it has some great ideas.  I really <br/>\nlike the idea of &quot;soft final&quot; for instance.  It&#39;s like a license <br/>\nagreement.. you can do this (subclass and override, etc) and we won&#39;t <br/>\nprevent you, but if you break the rules we can&#39;t be responsible for you.<br/>\n<br/>\nMichael Feathers<br/>\nwww.objectmentor.com</div>", 
    "prevInTime": 17818, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1157512416", 
    "canDelete": false, 
    "nextInTopic": 17820, 
    "prevInTopic": 17818, 
    "headers": {
        "inReplyToHeader": "PDQ0RkUxRjhGLjYwNDA5MDdAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PDQ0RkUzQ0UwLjIwOTA0MDJAbWluZHNwcmluZy5jb20+", 
        "referencesHeader": "PEQ5M0IwNjVGLUYwMzctNDYyNS1BOTExLTMxRUVDQkVCMTc3OEBvYmplY3RtZW50b3IuY29tPiA8NDRGQUIwMUEuODAzMDYwM0BtZXRhbGFiLnVuYy5lZHU+IDw0NEZBRDRFOC42MDIwNTA1QGlsamFwcmV1c3MuZGU+IDw0NEZCMjMyQS43MDAwNzA1QG1ldGFsYWIudW5jLmVkdT4gPDQ0RkI4M0FBLjUwMjAyMDBAbWluZHNwcmluZy5jb20+IDw0NEZCRkZBQy4zMDIwMzA3QG1ldGFsYWIudW5jLmVkdT4gPDQ0RkMyRjgwLjYwNTA3MDBAbWluZHNwcmluZy5jb20+IDw0NEZFMUY4Ri42MDQwOTA3QHJvZ2Vycy5jb20+"
    }
}