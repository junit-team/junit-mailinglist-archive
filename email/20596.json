{
    "numMessagesInTopic": 8, 
    "nextInTime": 20597, 
    "senderId": "wbKFBgfu7bFbAi9Xr8KCU1ZEMlom78Sh8LC8xt4OEQvWXzhgxoBs5gPHJN15LX-lHrMekeSK7GxJ1-8yhrOhvjlpM0ptzPgF8hng", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing code that depends on today&#39;s date", 
    "from": "Steve Freeman &lt;smgfreeman@...&gt;", 
    "authorName": "Steve Freeman", 
    "msgSnippet": "It s interesting how introducing time properly as part of the domain model helps make the code clearer. On most projects, I find what s actually needed is a", 
    "msgId": 20596, 
    "profile": "smg_freeman", 
    "topicId": 20590, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 206880094, 
    "messageBody": "<div id=\"ygrps-yiv-559417696\">It&#39;s interesting how introducing time properly as part of the domain  <br/>\nmodel helps make the code clearer. On most projects, I find what&#39;s  <br/>\nactually needed is a Date (as in a day) rather than a Date (as in a  <br/>\nTimestamp) which Java confuses, so it&#39;s worth declaring project- <br/>\nspecific time types -- or at least using Joda date.<br/>\n<br/>\nS.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 18 Jun 2008, at 08:26, Nat Pryce wrote:<br/>\n&gt; There are two things you can do.  A) separate code that performs<br/>\n&gt; calculations on dates from the code that gets the current date.  B)<br/>\n&gt; get the current date get it through an abstract interface.<br/>\n&gt;<br/>\n&gt; E.g. suppose I have a method like...<br/>\n&gt;<br/>\n&gt;   Money currentValue() {<br/>\n&gt;       Date today = new Date();<br/>\n&gt;       ...<br/>\n&gt;   }<br/>\n&gt;<br/>\n&gt; I&#39;d turn that into:<br/>\n&gt;<br/>\n&gt;    Money valueAt(Date date) {<br/>\n&gt;        ...<br/>\n&gt;    }<br/>\n&gt;<br/>\n&gt; and have another object decide what date to pass in.<br/>\n&gt;<br/>\n&gt; That other object can get the date through an abstract interface. (I<br/>\n&gt; usually call that interface &quot;Clock&quot; to avoid confusion with the<br/>\n&gt; existing java.util.Calendar class).  I find its usually one of the<br/>\n&gt; first things I write on every project -- if only it was in the<br/>\n&gt; standard library.<br/>\n&gt;<br/>\n&gt; I find that separating calculation with dates from the choice of date<br/>\n&gt; to use means I don&#39;t have to pass the clock around everywhere.  It<br/>\n&gt; also makes the code more flexible.  It can, if asked to, implement<br/>\n&gt; what-if calculations without major redesign, for example.<br/>\n&gt;<br/>\n&gt; --Nat<br/>\n&gt;<br/>\n<br/>\nSteve Freeman<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.mockobjects.com\">http://www.mockobjects.com</a><br/>\n<br/>\nWinner of the Agile Alliance Gordon Pask award 2006 </span></blockquote></div>", 
    "prevInTime": 20595, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1213795402", 
    "canDelete": false, 
    "nextInTopic": 20598, 
    "prevInTopic": 20594, 
    "headers": {
        "inReplyToHeader": "PDE3ZmE1M2QwODA2MTgwMDI2cjdjMTU2ZmRlaDY4MWRhNTY0YzA1M2I0NjZAbWFpbC5nbWFpbC5jb20+", 
        "messageIdInHeader": "PDIwMDgwNjE4MTMyNC5tNUlETzJxczAyNjEwMUByczQ5Lmx1eHNjaS5jb20+", 
        "referencesHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPiA8MTdmYTUzZDA4MDYxODAwMjZyN2MxNTZmZGVoNjgxZGE1NjRjMDUzYjQ2NkBtYWlsLmdtYWlsLmNvbT4="
    }
}