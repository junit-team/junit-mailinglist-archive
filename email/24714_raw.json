{
    "topicId": 24713, 
    "postDate": "1445495053", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Dawid Weiss &lt;dawid.weiss@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "X75PF3x03CHtYe7Wyefu16Wz8LhJodMJo7F58yO051F9WxUIjuQFfV5xotLdTniOyL7PZj3tg8fZJm3KxjS3RA74Knsl0uMfS68", 
    "nextInTime": 24715, 
    "userId": 223548916, 
    "prevInTime": 24713, 
    "prevInTopic": 24713, 
    "headers": {
        "inReplyToHeader": "PDU2Mjc3RkVGLjgwMTAzQGhlYWRpc3N1ZS5jb20+", 
        "messageIdInHeader": "PENBTTIxUnQ5NnlhTTQ0ZFFhMEV2a2hRT1Z3NSs9Zm5yMXVVYTFnTDlwWWJneFhiRkFqQUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDU2Mjc3RkVGLjgwMTAzQGhlYWRpc3N1ZS5jb20+"
    }, 
    "authorName": "Dawid Weiss", 
    "numMessagesInTopic": 8, 
    "msgSnippet": "Hi Andreas, This is not going to be useful if you re using plain JUnit but you can look at the solution in randomizedtesting -- we use it in Lucene and Solr", 
    "contentTrasformed": false, 
    "msgId": 24714, 
    "nextInTopic": 24715, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;dawid.weiss@...&gt;\r\nX-Sender: dawid.weiss@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 33779 invoked by uid 102); 22 Oct 2015 06:24:43 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m13.grp.bf1.yahoo.com with SMTP; 22 Oct 2015 06:24:43 -0000\r\nX-Received: (qmail 26835 invoked from network); 22 Oct 2015 06:24:43 -0000\r\nX-Received: from unknown (HELO mta1003.groups.mail.ne1.yahoo.com) (98.138.215.83)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 22 Oct 2015 06:24:43 -0000\r\nX-Original-Return-Path: &lt;dawid.weiss@...&gt;\r\nX-Received-SPF: pass (domain of gmail.com designates 209.85.223.177 as permitted sender)\r\nX-YMailISG: zCWOKDEWLDtIb2AU1NvgWWG0ig41YqLY6pDZjhvjd2X8uxgt\n fyMQ4HtLA164V9dnePvU0bNzl2ofapdJa0iK.8Gik.wCiBD4AeMoNVoB07ux\n fAFO0h7UyzZhx44UeGRYNK3mwKDVNl9u2WcB1SvNZ7MR.HrY9PDrBmdbnvZR\n 2u.0EtphJHWQyF.WVONRSGu_QoK0Dw18aEb6GRqB_IBOtW3hYwfjXc6umnz0\n EhOWHD57y0gFqcVkgZJAqussmaUQA7d8w03ubyg2Y5Y5jsFDqvkHi8RpGyCF\n wtBWwj4DIQCnOxQQADwvRRsEU284DqU0oNvGlIg.WgSzaU73Z7G0PaFPu2Om\n 6EdtRQFtwNETlbGlzLNUYhaTkGCKD23u_83ybMdBt5CIOQ_2NeNYRaF3IQSR\n evRB_ZytFvRZrYXYjxzDt7Fn.G2A4miNqhOysE9GwboH1l_KooM1OFG4eZJO\n .QP5gjlJKDaRlmaQLvsE5wuT4vv8i5WiO7j4nhFu4v52GmfVki3jtcUBsKLV\n Qoo6VJ74XiOxc1j8_uNC7twIGtAKrODX2FfjluVVHqlIpyKk4jx78cUx1GXS\n wFeAXU2Pk_o.LWrYys7qqLJ2I_TwKhfNnzqjRcKprtYpISMA4iA0X3vKuCjv\n nFv_Hd5AtvEjc4rDIhJbqzAqxR5h2mEQRbA58HRQnG1UrQ2D9wBMYqftSzgq\n TbF562gtLOx_4s8a5vurMzPXvLytFic8dovva1fKy7iT79OvRoXkgCwtbpUH\n TwHU14hRZV4aFlxLo3jTKq737bCp.31pr8zz5Nm5yUOrMhDAI6FvdBzTPb5F\n y3MTPJlZRePfudz7gHQ3ZSYMe79Hr50dsFPfCJ46H0rJ.2LBnl8P04vSBG8g\n DON5xKcw8xLBbubq.mdJcPNzEvdTy6uVU93bhniw4x40wCkvKQlkv5OD0g8N\n 2ejwH1cXSuYNRWiW8hmp4Xrbm6hHF8bXZ4F_4dZj.4mO6ipDHrQ2RkwyIFkJ\n yCTOt7oNHbQ7AYCH19yDDCsoYuiAVvx_ubbYsfY2TbgpkH0TGhnIUGWZyLrc\n wn6P.GUjisxpFiATjS1r0cZQVnmUym4Hl4nEw5I6cA.izn7WNPA0l8.MmEjr\n EV4nmh72XIKRkyeqQQrfcHlVer7EqmnSqUj3Vdvn4GzittQjYvimSeQwRKpK\n ICl29am7F1CzVoKFFJRJ94gmBBI4SBj7rvafI4x2uKfIyebULQzlupCmpUOV\n 1_N4f9eqyNJkQ1n56UiKF.X4p.q_gb6Xg5n1sSmS37T.8rxYG1.Zl6kvrKHi\n u3dmCcI8vkV9GobCxvhisiDc_1ABQkN6psC_DPXz7bUntGF.YwMLmRG9EBmW\n OmnPUxWgsKtTDxkc8_S5bg4Pz5SWXf35HvuplxrROmgZI3Ms_NCD5uLDwV6L\n rrUZRl01R.Tk_0xRgjy2MpXRnLzh1vJZCd78mBNMhKtOJ_AdM1Q2P9ERwyqm\n E6e.xeGPBlMgQT_Xm7yh_ZXnQmiENwNr_ee_scSyU.HYMHaEF1i203jL65mp\n hv7PrDcNGyJ3Xcim0G0XbCN.kKMGrmsQTxlWCUtzZ5cG3prFI7fIhBAjVa46\n NqvbIvktW0ukEtoDZE7KGiMPHf7Q7DkGYZ.BzyKf4wZbWx5xVxao2uruc_4X\n .4keEseBELoUE_nOY9FRTWE85Yw8GaUQY1YmtU2r3tBZQxDyhyuOD0usrP5l\n VOY4RJVmw5MSgzyOtYZMv7uGHT1qntjd7UuotuBaphEnLemPC6wXs24Zd5Pp\n gE7Clfug9fyiOEa8cKE9ZgQHur3.dc93zFGMYIh4eUBZpALwL6GsTKJmW16k\n dlTXwKJTAqw-\r\nAuthentication-Results: mta1003.groups.mail.ne1.yahoo.com  from=gmail.com; domainkeys=neutral (no sig);  from=gmail.com; dkim=pass (ok)\r\nX-Received: from 127.0.0.1  (EHLO mail-io0-f177.google.com) (209.85.223.177)\n  by mta1003.groups.mail.ne1.yahoo.com with SMTPS; Thu, 22 Oct 2015 06:24:43 +0000\r\nX-Received: by iofz202 with SMTP id z202so81604649iof.2\n        for &lt;junit@yahoogroups.com&gt;; Wed, 21 Oct 2015 23:24:42 -0700 (PDT)\r\nX-Received: by 10.107.11.24 with SMTP id v24mr15947828ioi.184.1445495082660;\n Wed, 21 Oct 2015 23:24:42 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.79.68.68 with HTTP; Wed, 21 Oct 2015 23:24:13 -0700 (PDT)\r\nIn-Reply-To: &lt;56277FEF.80103@...&gt;\r\nReferences: &lt;56277FEF.80103@...&gt;\r\nDate: Thu, 22 Oct 2015 08:24:13 +0200\r\nMessage-ID: &lt;CAM21Rt96yaM44dQa0EvkhQOVw5+=fnr1uUa1gL9pYbgxXbFAjA@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: multipart/alternative; boundary=001a113f9070ed3b340522ab8c2d\r\nSubject: Re: [junit] Fail Tests on write to System.out\r\nX-Yahoo-Group-Post: member; u=223548916; y=STbNCZnDLRnR-He9E33YH-VSaYz29vXu_YjyhzK48kXx9aTrBDI\r\nFrom: Dawid Weiss &lt;dawid.weiss@...&gt;\r\n\r\n\r\n--001a113f9070ed3b340522ab8c2d\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi Andreas,\n\nThis is not going to be useful if you&#39;re using plain JUnit but=\r\n you can look\nat the solution in randomizedtesting -- we use it in Lucene a=\r\nnd Solr and it\nworks fairly well.\n\nYou do need to have a common superclass =\r\nor repeat the rule annotation on\nevery class this should be applied to, unf=\r\nortunately. This is the\nannotation:\n\nhttps://github.com/apache/lucene-solr/=\r\nblob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTest=\r\nCase.java#L206\n\nthis annotation is used for suppressing it (for a class):\n\n=\r\nhttps://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/=\r\njava/org/apache/lucene/util/LuceneTestCase.java#L352-L365\n\nand this is rule=\r\n declaration chain:\n\nhttps://github.com/apache/lucene-solr/blob/trunk/lucen=\r\ne/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L581\n\n=\r\nThe scenario in Lucene is quite complex, for example you want to suppress\nc=\r\nertain checks on failures (other rules are permitted to write diagnostics\nt=\r\no sysout if something fails), but you can look for the inspiration on how\ni=\r\nt was done here:\n\nhttps://github.com/apache/lucene-solr/blob/trunk/lucene/t=\r\nest-framework/src/java/org/apache/lucene/util/TestRuleLimitSysouts.java\n\nIf=\r\n you peek at the source code and the comments you&#39;ll see the difficulties\nt=\r\nhis entails (early-on stolen references to System.out, running with a\nsecur=\r\nity manager, etc.).\n\nHope this helps somehow,\nDawid\n\n\nOn Wed, Oct 21, 2015 =\r\nat 2:07 PM, Andreas Worm andreas.worm@...\n[junit] &lt;junit@yahoogro=\r\nups.com&gt; wrote:\n\n&gt;\n&gt;\n&gt; Hi,\n&gt;\n&gt; I am looking for a way to fail unittests whe=\r\nn they write to System.out\n&gt; or System.err. I found different ways to achie=\r\nve that and tried a\n&gt; solution with a RunListener, because these can be con=\r\nfigured using the\n&gt; maven-surefire-plugin. Now I discovered, that RunListen=\r\ners can&#39;t really\n&gt; fail tests because fail() throws an AssertionException a=\r\nnd Exceptions\n&gt; remove the RunListener. Is there a better way to discover o=\r\nutput?\n&gt;\n&gt; To summarize what I want:\n&gt; * a way to discover output via Syste=\r\nm.out without preventing Logger\n&gt; functionality\n&gt; * this way should not inv=\r\nolve huge code changes on the testclasses (\n&gt; like adding TestRules everywh=\r\nere)\n&gt; * all unittests which produced output should be reported as &quot;failing=\r\n&quot;\n&gt; when you run with `mvn test`\n&gt;\n&gt; I tried to answer these questions on S=\r\nO but got only a few helpful\n&gt; responses, so I thought I ask the specialist=\r\ns here and get more\n&gt; opinions. For reference the SO questions:\n&gt; * http://=\r\nstackoverflow.com/questions/33214683\n&gt; * http://stackoverflow.com/questions=\r\n/33207996\n&gt;\n&gt; Any help on this topic is very appreciated.\n&gt;\n&gt; Regards\n&gt; And=\r\nreas Worm\n&gt;\n&gt; \n&gt;\n\r\n--001a113f9070ed3b340522ab8c2d\r\nContent-Type: text/html; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div dir=3D&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&gt;Hi Andreas,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This is not =\r\ngoing to be useful if you&#39;re using plain JUnit but you can look at the =\r\nsolution in randomizedtesting -- we use it in Lucene and Solr and it works =\r\nfairly well.=C2=A0&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You do need to have a common su=\r\nperclass or repeat the rule annotation on every class this should be applie=\r\nd to, unfortunately. This is the annotation:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a hr=\r\nef=3D&quot;https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framewor=\r\nk/src/java/org/apache/lucene/util/LuceneTestCase.java#L206&quot;&gt;https://github.=\r\ncom/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache=\r\n/lucene/util/LuceneTestCase.java#L206&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;this=\r\n annotation is used for suppressing it (for a class):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;=\r\ndiv&gt;&lt;a href=3D&quot;https://github.com/apache/lucene-solr/blob/trunk/lucene/test=\r\n-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L352-L365&quot;&gt;h=\r\nttps://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/j=\r\nava/org/apache/lucene/util/LuceneTestCase.java#L352-L365&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=\r\n&lt;br&gt;&lt;/div&gt;&lt;div&gt;and this is rule declaration chain:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div=\r\n&gt;&lt;a href=3D&quot;https://github.com/apache/lucene-solr/blob/trunk/lucene/test-fr=\r\namework/src/java/org/apache/lucene/util/LuceneTestCase.java#L581&quot;&gt;https://g=\r\nithub.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/=\r\napache/lucene/util/LuceneTestCase.java#L581&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;di=\r\nv&gt;The scenario in Lucene is quite complex, for example you want to suppress=\r\n certain checks on failures (other rules are permitted to write diagnostics=\r\n to sysout if something fails), but you can look for the inspiration on how=\r\n it was done here:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=3D&quot;https://github.com/a=\r\npache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/luce=\r\nne/util/TestRuleLimitSysouts.java&quot;&gt;https://github.com/apache/lucene-solr/bl=\r\nob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/TestRuleLimi=\r\ntSysouts.java&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If you peek at the source co=\r\nde and the comments you&#39;ll see the difficulties this entails (early-on =\r\nstolen references to System.out, running with a security manager, etc.).&lt;/d=\r\niv&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hope this helps somehow,&lt;/div&gt;&lt;div&gt;Dawid&lt;/div&gt;&lt;div&gt;&lt;=\r\nbr&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On=\r\n Wed, Oct 21, 2015 at 2:07 PM, Andreas Worm &lt;a href=3D&quot;mailto:andreas.worm@=\r\nheadissue.com&quot;&gt;andreas.worm@...&lt;/a&gt; [junit] &lt;span dir=3D&quot;ltr&quot;&gt;&lt=\r\n;&lt;a href=3D&quot;mailto:junit@yahoogroups.com&quot; target=3D&quot;_blank&quot;&gt;junit@yahoogrou=\r\nps.com&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;=\r\nmargin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n\n\n&lt;u&gt;&lt;/u&gt;\n\n=\r\n\n\n\n\n\n\n\n\n \n&lt;div style=3D&quot;background-color:#fff&quot;&gt;\n&lt;span&gt;=C2=A0&lt;/span&gt;\n\n\n&lt;div&gt;=\r\n\n  &lt;div&gt;\n\n\n    &lt;div&gt;\n      \n      \n      &lt;p&gt;Hi,&lt;br&gt;\n&lt;br&gt;\nI am looking for a=\r\n way to fail unittests when they write to System.out &lt;br&gt;\nor System.err. I =\r\nfound different ways to achieve that and tried a &lt;br&gt;\nsolution with a RunLi=\r\nstener, because these can be configured using the &lt;br&gt;\nmaven-surefire-plugi=\r\nn. Now I discovered, that RunListeners can&#39;t really &lt;br&gt;\nfail tests bec=\r\nause fail() throws an AssertionException and Exceptions &lt;br&gt;\nremove the Run=\r\nListener. Is there a better way to discover output?&lt;br&gt;\n&lt;br&gt;\nTo summarize w=\r\nhat I want:&lt;br&gt;\n* a way to discover output via System.out without preventin=\r\ng Logger &lt;br&gt;\nfunctionality&lt;br&gt;\n* this way should not involve huge code cha=\r\nnges on the testclasses ( &lt;br&gt;\nlike adding TestRules everywhere)&lt;br&gt;\n* all =\r\nunittests which produced output should be reported as &quot;failing&quot; &lt;=\r\nbr&gt;\nwhen you run with `mvn test`&lt;br&gt;\n&lt;br&gt;\nI tried to answer these questions=\r\n on SO but got only a few helpful &lt;br&gt;\nresponses, so I thought I ask the sp=\r\necialists here and get more &lt;br&gt;\nopinions. For reference the SO questions:&lt;=\r\nbr&gt;\n* &lt;a href=3D&quot;http://stackoverflow.com/questions/33214683&quot; target=3D&quot;_bl=\r\nank&quot;&gt;http://stackoverflow.com/questions/33214683&lt;/a&gt;&lt;br&gt;\n* &lt;a href=3D&quot;http:=\r\n//stackoverflow.com/questions/33207996&quot; target=3D&quot;_blank&quot;&gt;http://stackoverf=\r\nlow.com/questions/33207996&lt;/a&gt;&lt;br&gt;\n&lt;br&gt;\nAny help on this topic is very appr=\r\neciated.&lt;br&gt;\n&lt;br&gt;\nRegards&lt;br&gt;\nAndreas Worm&lt;br&gt;\n&lt;br&gt;\n&lt;/p&gt;\n\n    &lt;/div&gt;\n     \n=\r\n\n    \n    &lt;div style=3D&quot;color:#fff;min-height:0&quot;&gt;&lt;/div&gt;\n\n\n&lt;/div&gt;\n\n\n\n  \n\n\n\n\n=\r\n\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;\n\r\n--001a113f9070ed3b340522ab8c2d--\r\n\n", 
    "subject": "Re: [junit] Fail Tests on write to System.out"
}