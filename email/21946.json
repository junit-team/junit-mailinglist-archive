{
    "numMessagesInTopic": 4, 
    "nextInTime": 21947, 
    "senderId": "aaAC1vn_SsxioRup1RhOoGXGmqZooYl4s_kQQN9ael3z_R-hPeTjmy-69wP2sNo8G-TA_XWURAc0acMHH8-JZSVUOngAcr4SZVEnu38", 
    "systemMessage": true, 
    "subject": "Reading property files fails when running from Ant / Classpath not \tset", 
    "from": "Sampo Niskanen &lt;sampo.niskanen@...&gt;", 
    "authorName": "Sampo Niskanen", 
    "msgSnippet": "Hi, I m having trouble running my JUnit tests from an Ant script, and haven t been able to find any solution in the FAQ or on the net. Though the classpath is", 
    "msgId": 21946, 
    "profile": "samponiskanen", 
    "topicId": 21946, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 80363754, 
    "messageBody": "<div id=\"ygrps-yiv-1735297885\">Hi,<br/>\n<br/>\nI&#39;m having trouble running my JUnit tests from an Ant script, and<br/>\nhaven&#39;t been able to find any solution in the FAQ or on the net.<br/>\nThough the classpath is set so that Junit finds my class files, the<br/>\nclasses themselved cannot find my build.properties file which is read<br/>\nas runtime.<br/>\n<br/>\nI have a file &quot;build.properties&quot; in my main project directory, which<br/>\ncontains e.g. the software version number.  This is automatically<br/>\nloaded by a class that is used by my unit test.  In Eclipse if I<br/>\ndirectly run the test, it fails, but after selecting Run<br/>\nconfigurations and adding the project root directory to the classpath<br/>\nit runs fine.<br/>\n<br/>\nI&#39;ve tried multiple ways of adding the base directory also to the<br/>\nJUnit classpath (in a separate classpath that is referenced and as an<br/>\nexplicit classpath in the &lt;junit&gt; task), but every time it fails to<br/>\nfind the property file.  I&#39;ve also tried copying the property file<br/>\ninto the directory in which the base and/or test classes are compiled<br/>\n(and from which JUnit successfully runs the tests), but it cannot find<br/>\nit even then.<br/>\n<br/>\nI added a line<br/>\n<br/>\n        System.out.println(&quot;TEST CLASSPATH: &quot; +<br/>\nSystem.getProperty(&quot;java.class.path&quot;));<br/>\n<br/>\nto the beginning of my test method to print out the current classpath.<br/>\n When running from Eclipse the classpath contains the base directory,<br/>\nbut when running from Ant it does not, it contains only Ant-related<br/>\njars.  It therefore seems that even though the classpath is set<br/>\ncorrectly to find the classes (and removing the paths causes all tests<br/>\nto fail), the classpath is not propagated to the running system.  Does<br/>\nJUnit use for example a custom class loader, which could cause this<br/>\nkind of behavior?  I&#39;ve tested both forking and non-forking mode<br/>\nwithout avail.<br/>\n<br/>\nBelow is the classpath printed by the tests and excerpts from the Ant<br/>\nbuild file.  The entire build file and test suite can be checked out<br/>\nfrom Subversion as instructed at<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://openrocket.sourceforge.net/download.html\">http://openrocket.sourceforge.net/download.html</a><br/>\n<br/>\nThanks for any help!<br/>\n<br/>\n<br/>\nBest regards,<br/>\n   Sampo Niskanen<br/>\n<br/>\n<br/>\n<br/>\nThe output when running the test from Eclipse:<br/>\n<br/>\nTEST CLASSPATH:<br/>\n/home/sampo/Projects/OpenRocket:/home/sampo/Projects/OpenRocket/bin:/home/sampo/Projects/OpenRocket/lib/miglayout15-swing.jar:/home/sampo/Projects/libs/jfreechart-1.0.13/lib/jcommon-1.0.16.jar:/home/sampo/Projects/libs/jfreechart-1.0.13/lib/jfreechart-1.0.13.jar:/home/sampo/Projects/OpenRocket/extra-lib/RXTXcomm.jar:/home/sampo/eclipse/plugins/org.junit4_4.3.1/junit.jar:/home/sampo/eclipse/configuration/org.eclipse.osgi/bundles/165/1/.cp/:/home/sampo/eclipse/configuration/org.eclipse.osgi/bundles/163/1/.cp/:/home/sampo/eclipse/configuration/org.eclipse.osgi/bundles/164/1/.cp/<br/>\n<br/>\nand from Ant:<br/>\n<br/>\nTEST CLASSPATH:<br/>\n/usr/share/ant/lib/ant-launcher.jar:/usr/share/java/xmlParserAPIs.jar:/usr/share/java/xercesImpl.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-launcher.jar:/usr/share/ant/lib/ant-trax.jar:/usr/share/ant/lib/ant-apache-bsf.jar:/usr/share/ant/lib/catalina5.5-ant.jar:/usr/share/ant/lib/ant.jar:/usr/share/ant/lib/ant-apache-log4j.jar:/usr/share/ant/lib/junit.jar:/usr/share/ant/lib/ant-commons-net.jar:/usr/share/ant/lib/ant-javamail.jar:/usr/share/ant/lib/ant-antlr.jar:/usr/share/ant/lib/ant-jsch.jar:/usr/share/ant/lib/tomcat5.5-jkstatus-ant.jar:/usr/share/ant/lib/ant-jdepend.jar:/usr/share/ant/lib/jsch.jar:/usr/share/ant/lib/bcel.jar:/usr/share/ant/lib/ant-apache-bcel.jar:/usr/share/ant/lib/ant-apache-oro.jar:/usr/share/ant/lib/ant-nodeps.jar:/usr/share/ant/lib/ant-commons-logging.jar:/usr/share/ant/lib/ant-jmf.jar:/usr/share/ant/lib/ant-apache-regexp.jar:/usr/share/ant/lib/ant-swing.jar:/usr/share/ant/lib/junit4.jar:/usr/share/ant/lib/ant-apache-resolver.jar:/usr/share/ant/lib/catalina5.5-ant-jmx.jar:/usr/lib/jvm/java-6-sun-1.6.0.16/lib/tools.jar<br/>\n<br/>\n<br/>\nExcerpts from build.xml:<br/>\n<br/>\n\t&lt;!-- Classpath definitions --&gt;<br/>\n\t&lt;path id=&quot;classpath&quot;&gt;<br/>\n\t\t&lt;fileset dir=&quot;${lib.dir}&quot; includes=&quot;**/*.jar&quot;/&gt;<br/>\n\t&lt;/path&gt;<br/>\n\t<br/>\n\t&lt;path id=&quot;test-classpath&quot;&gt;<br/>\n\t\t&lt;path refid=&quot;classpath&quot;/&gt;<br/>\n\t\t&lt;pathelement location=&quot;${basedir}&quot;/&gt;<br/>\n\t\t&lt;pathelement location=&quot;${build-test.dir}&quot;/&gt;<br/>\n\t\t&lt;pathelement location=&quot;${classes.dir}&quot;/&gt;<br/>\n\t\t&lt;pathelement location=&quot;${ant.library.dir}/junit4.jar&quot;/&gt;<br/>\n\t&lt;/path&gt;<br/>\n\t<br/>\n...<br/>\n<br/>\n\t&lt;!--  Unit tests  --&gt;<br/>\n\t&lt;target name=&quot;unittest&quot; description=&quot;Execute unit tests&quot; depends=&quot;build&quot;&gt;<br/>\n\t\t&lt;echo&gt;Building unit tests&lt;/echo&gt;<br/>\n\t\t&lt;mkdir dir=&quot;${build-test.dir}&quot;/&gt;<br/>\n\t\t&lt;javac srcdir=&quot;${src-test.dir}&quot; destdir=&quot;${build-test.dir}&quot;<br/>\nclasspathref=&quot;test-classpath&quot;/&gt;<br/>\n\t\t<br/>\n\t\t&lt;echo&gt;Running unit tests&lt;/echo&gt;<br/>\n\t\t&lt;mkdir dir=&quot;tmp/rawtestoutput&quot;/&gt;<br/>\n\t\t&lt;junit printsummary=&quot;true&quot; failureproperty=&quot;junit.failure&quot;&gt;<br/>\n\t\t\t&lt;classpath&gt;<br/>\n\t\t\t\t&lt;path refid=&quot;test-classpath&quot;/&gt;<br/>\n\t\t\t\t&lt;path location=&quot;${basedir}&quot;/&gt;<br/>\n\t\t\t&lt;/classpath&gt;<br/>\n\t\t\t&lt;batchtest todir=&quot;tmp/rawtestoutput&quot;&gt;<br/>\n\t\t\t\t&lt;fileset dir=&quot;${build-test.dir}&quot;&gt;<br/>\n\t\t\t\t\t&lt;include name=&quot;**/*Test*.class&quot; /&gt;<br/>\n\t\t\t\t\t&lt;exclude name=&quot;Test.class&quot; /&gt;<br/>\n\t\t\t\t&lt;/fileset&gt;<br/>\n\t\t\t\t&lt;formatter type=&quot;xml&quot;/&gt;<br/>\n\t\t\t&lt;/batchtest&gt;<br/>\n\t\t&lt;/junit&gt;<br/>\n\t\t&lt;junitreport todir=&quot;tmp&quot;&gt;<br/>\n\t\t\t&lt;fileset dir=&quot;tmp/rawtestoutput&quot;/&gt;<br/>\n\t\t\t&lt;report todir=&quot;tmp/test-reports&quot;/&gt;<br/>\n\t\t&lt;/junitreport&gt;<br/>\n\t\t&lt;fail if=&quot;junit.failure&quot; message=&quot;Unit test(s) failed.  See reports!&quot;/&gt;<br/>\n \t&lt;/target&gt;<br/>\n<br/>\n<br/>\n-- <br/>\n   Sampo Niskanen   &lt;=&gt;   <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.iki.fi/sampo.niskanen/\">http://www.iki.fi/sampo.niskanen/</a></div>", 
    "prevInTime": 21945, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1254053919", 
    "canDelete": false, 
    "nextInTopic": 21948, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGJjYTJkOWVhMDkwOTI3MDUxOHY0MzFiZDMxOXU2NDBhYWRlZTQ2YWQzNmEyQG1haWwuZ21haWwuY29tPg=="
    }
}