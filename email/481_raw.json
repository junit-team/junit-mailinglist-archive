{
    "topicId": 472, 
    "postDate": "982356653", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Michael Finney &lt;mfinney@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "2rLB3FyjdJkdl7tDnPfZ8vLa5-hlFycrVJyhIdmjrFIf92aNNNEC2JnaSENWKy3d73tuHxfFAUlPZTDk_MsaZApotXkwzATfLkDG", 
    "nextInTime": 482, 
    "userId": 0, 
    "prevInTime": 480, 
    "prevInTopic": 477, 
    "headers": {
        "messageIdInHeader": "PEQ2ODIzREE4RUEwNkQzMTE4MTVGMDA5MDI3MkE3QjdCQzUyNkY1QGV4Y2hhbmdlLmRtd2dyb3VwLmNvbT4="
    }, 
    "authorName": "Michael Finney", 
    "numMessagesInTopic": 3, 
    "msgSnippet": "Interesting.  I also found that in order to get a meaningful amount of DB and other resources available I must call from a running WOApplication. Perhaps, I", 
    "contentTrasformed": false, 
    "msgId": 481, 
    "nextInTopic": 0, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;mfinney@...&gt;\r\nX-Sender: mfinney@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_0_3); 16 Feb 2001 20:48:49 -0000\r\nReceived: (qmail 96516 invoked from network); 16 Feb 2001 20:48:48 -0000\r\nReceived: from unknown (10.1.10.26) by m8.onelist.org with QMQP; 16 Feb 2001 20:48:48 -0000\r\nReceived: from unknown (HELO exchange.csprings.noochee.com) (205.168.71.236) by mta1 with SMTP; 16 Feb 2001 20:48:48 -0000\r\nReceived: by exchange.dmwgroup.com with Internet Mail Service (5.5.2653.19) id &lt;1SLPQZTJ&gt;; Fri, 16 Feb 2001 13:50:54 -0700\r\nMessage-ID: &lt;D6823DA8EA06D311815F0090272A7B7BC526F5@...&gt;\r\nTo: &quot;&#39;junit@yahoogroups.com&#39;&quot; &lt;junit@yahoogroups.com&gt;\r\nCc: Ted Monogue &lt;Tmonogue@...&gt;\r\nSubject: RE: [junit] RE: WebObjects\r\nDate: Fri, 16 Feb 2001 13:50:53 -0700\r\nMIME-Version: 1.0\r\nX-Mailer: Internet Mail Service (5.5.2653.19)\r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nFrom: Michael Finney &lt;mfinney@...&gt;\r\n\r\nInteresting.  I also found that in order to get a meaningful amount of DB\nand other resources available I must call from a running WOApplication.\nPerhaps, I will need to move this into Main&#39;s constructor method similar to\nwhat you do in order to get a Session object.  Thank you.\nI suppose if I suppress bringing the browser up, make a WORequest, get the\ndefault handler from the Application, and tell the handler to handle the\nrequest, maybe the Main page code will get called without actually launching\na browser window.  I want this all to work in batch mode.\n\nI made a class which extends junit.textui.TestRunner, added a method and\nhave the method call   TestResult theResult = doRun(allTests, false);\nI check to see  if (theResult.wasSuccessful()) and have it do a\nSystem.exit(0); if successful and a System.exit(-1); or -2 if not.  The only\ntime I run the test is if I add a command line argument which says to run\nthe unit tests.   NSSystem.arguments() is useful for that.\nThe reason I extend TestRunner is to get access to the doRun method which\nreturns me a result that I can use. I saw NO other way to get a result.  Is\nthere a better way? The result was important in order to have the build\n(make file) dependent on the outcome of the tests.  (See Martin Fowler&#39;s\nContinuous Integration paper.\nhttp://www.martinfowler.com/articles/continuousIntegration.html  ) The code\nis quite similar to what is in junit.textui.TestRunner.start and\njunit.textui.TestRunner.main.\n(For the record, my supervisor said I could share this code.  Perhaps, I get\ntoo concerned about sharing small chunks of code.)\nIn the Application class&#39;s constructor, runTests gets called if it is time\nto run the tests.   (ok, by now I moved the code but you get the idea.)\n   private void runTests()\n   {\n       final Test allTests = AllTests.suite();\n       class CircumventProtectedTestRunner extends TestRunner\n       {\n           public void runTheTests ()\n           {\n             TestResult theResult = doRun(allTests, false);\n             try {\n               if (theResult.wasSuccessful())\n               {\n                 System.exit(0);                 \n               }\n               else\n               {\n                 System.exit(-1);                 \n               }\n             } catch(Exception e) {\n               System.err.println(e.getMessage());\n               System.exit(-2);\n             }\n           }\n       }\n       CircumventProtectedTestRunner aTestRunner = new\nCircumventProtectedTestRunner();\n       aTestRunner.runTheTests();\n       // should never get here.\n   }\n\nI have not tried launching swing/awt TestRunner from the application, but I\ntried it in the Makefile.postamble and the process ran out of memory.\nRunning it in a separate process may be what I need to do a gui, but batch\nmode is my priority now.\nBTW, WOApplication (which Application extends) has public static\nWOApplication application()\nIt returns a WOApplication object.  That may help you get the application\ninstance when you wish it.   \nhttp://developer.apple.com/techpubs/webobjects/System/Library/Frameworks/Web\nObjects.framework/Java/Classes/WOApplication.html#//apple_ref/java/clm/WOApp\nlication/application\n\n\nMichael Finney\nSun Certified Programmer for the Java 2 Platform\nSun Certified Developer for the Java 2 Platform\n\n\n&gt; -----Original Message-----\n&gt; From:\tEmily Catharine Bache [SMTP:emily.bache@...]\n&gt; Sent:\tFriday, February 16, 2001 8:34 AM\n&gt; To:\t&#39;junit@yahoogroups.com&#39;\n&gt; Subject:\t[junit] RE: WebObjects\n&gt; \n&gt; \n&gt; Yes, we&#39;re using junit with WebObjects. I posted a message to the\n&gt; WebObjects\n&gt; list about it a little while ago, (below). I&#39;ve since upgraded to junit\n&gt; 3.5\n&gt; and the line which starts the test runner has changed to:\n&gt; \n&gt; new junit.awtui.TestRunner().start(new String[]{&quot;AllTests&quot;});\n&gt; \n&gt; Another thing I forgot to mention in the post below is that I&#39;ve added a\n&gt; static inner class to my Application which provides access to Application\n&gt; from within your TestCase. The inner class is constructed with a live\n&gt; application in the Application constructor.\n&gt; \n&gt;     /**\n&gt;      * provides static access to the application instance for the unit\n&gt; tests.\n&gt;      */\n&gt;     public static class Access {\n&gt; \n&gt;         private static Access instance;\n&gt;         private Application app;\n&gt; \n&gt;         private Access(Application app) {\n&gt;             this.app = app;\n&gt;         }\n&gt; \n&gt;         public static Access instance() {\n&gt;             return instance;\n&gt;         }\n&gt; \n&gt;         public Application application() {\n&gt;             return app;\n&gt;         }\n&gt; \n&gt;     }\n&gt; \n&gt; Then in your test case you just write\n&gt; Application.Access.instance().application() to get hold of the reference.\n&gt; From there you can call pageWithName() or whatever to get hold of pages, a\n&gt; Session etc.\n&gt; \n&gt; I havn&#39;t yet got this working in a deployment environment, but it&#39;s been\n&gt; very useful in my development environment.\n&gt; \n&gt; Hope that helps,\n&gt; \n&gt; Emily\n&gt; \n&gt; ----- posted to &#39;webobjects-dev@...&#39; on Mon 5th Feb -------\n&gt; \n&gt; I have started to introduce unit testing to an existing WO application. I\n&gt; have used JUnit on previous pure Java projects and I know how valuable it\n&gt; is\n&gt; to have them. One of the problems I found running JUnit with WO is that\n&gt; your\n&gt; WOComponents etc need to be instantiated with suitably initialised\n&gt; Application and Session objects, so I found I needed to kick the tests off\n&gt; from within the running application, instead of kicking off the tests and\n&gt; having them instantiate the application. Therefore I&#39;ve put this bit of\n&gt; code\n&gt; in the constructor of my Main class, which is called after the application\n&gt; is properly started up and is ready to go:\n&gt; \n&gt;       public Main() {\n&gt;         app = (Application) application();\n&gt;         s = (Session) session();\n&gt; \n&gt;         if (app.shouldRunTests() && !app.testsRunningNow()) {\n&gt;             app.setTestsRunningNow(true);\n&gt; \n&gt;             // run the tests in their own thread\n&gt;             Runnable runnable = new Runnable(){\n&gt;                 public void run() {\n&gt;                     new junit.ui.TestRunner().start(new\n&gt; String[]{&quot;AllTests&quot;}, new junit.util.StandardTestSuiteLoader());\n&gt;                 }\n&gt;             };\n&gt;             Thread testThread = new java.lang.Thread(runnable);\n&gt;             testThread.start();\n&gt;         }\n&gt;     }\n&gt; \n&gt; The unit tests run in their own thread, but my application wasn&#39;t designed\n&gt; for multithreading, so I usually wait until all my unit tests have\n&gt; finished\n&gt; before trying to access the application manually. The other thing is that\n&gt; if\n&gt; you click &quot;exit&quot; on the unit test window, your whole application exits - I\n&gt; havn&#39;t found a way round this yet. Also note that my tests have to be\n&gt; really\n&gt; careful to leave my Application class in the same state it found it. (It&#39;s\n&gt; fairly easy to set it up so that every test gets its own session).\n&gt; \n&gt; As for functional, (black box, user perspective) tests, I tried WOUnit,\n&gt; &lt;http://wounit.jmltech.com/&gt; (I just tried the site and it&#39;s down - anyone\n&gt; know what happened to it?) which is based on httpUnit. I found it to be\n&gt; more\n&gt; designed for static sites, and wasn&#39;t actually giving me much once I\n&gt; needed\n&gt; to log in and keep track of my session state, so I just used plain\n&gt; httpUnit.\n&gt; This was working well until I ran into a brick wall: javascript and\n&gt; VBScript. My pages are absolutely littered with the stuff, and httpUnit\n&gt; doesn&#39;t have any kind of scripting interpreter and can&#39;t imitate a browser\n&gt; in that way. I had to put creation of automated functional tests on hold\n&gt; basically, until either httpUnit adds support for scripting or we manage\n&gt; to\n&gt; refactor out the scripting from our pages.\n&gt; \n&gt; I&#39;d be very interested to hear how other WO developers have been using\n&gt; JUnit\n&gt; or other unit testing frameworks, or if you have criticisms of my\n&gt; approach.\n&gt; \n&gt; Regards,\n&gt; Emily\n&gt; \n&gt; adera + Emily Bache\n&gt; Maskingatan 5\n&gt; 417 64 Gï¿½teborg\n&gt; e-mail:emily.bache@...\n&gt; phone int +46 (0)31 779 35 00\n&gt; direct +46 (0)31 779 35 14\n&gt; mobile +46 (0)703 73 35 14\n&gt; fax +46 (0)31 779 35 99\n&gt; &lt;http://www.aderagroup.com&gt;\n&gt; \n&gt; \n&gt; \n&gt; Yahoo! Groups Sponsor\t \n&gt; \n&gt;  \n&gt; &lt;http://rd.yahoo.com/M=176325.1312152.2904070.1252795/D=egroupmail/S=17000\n&gt; 07181:N/A=590881/R=1/*http://domains.yahoo.com/&gt;\n&gt; &lt;http://rd.yahoo.com/M=176325.1312152.2904070.1252795/D=egroupmail/S=17000\n&gt; 07181:N/A=590881/R=2/*http://domains.yahoo.com/&gt;\t\n&gt; \t\t\n&gt;  \n&gt; &lt;http://us.adserver.yahoo.com/l?M=176325.1312152.2904070.1252795/D=egroupm\n&gt; ail/S=1700007181:N/A=590881/rand=281573470&gt;\t\n&gt; \n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt; \n&gt; \n\n", 
    "subject": "RE: [junit] RE: WebObjects"
}