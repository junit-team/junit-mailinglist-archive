{
    "numMessagesInTopic": 12, 
    "nextInTime": 22383, 
    "senderId": "XhmBf1bTPzwabqKtOwHnB8r3y6BtXV5xaRScHIoMB7wpp7lw9e5DhXBiv9YgdP0HSZTvxJrmswg_AzddeBo0A7JJ", 
    "systemMessage": false, 
    "subject": "Re: [junit] Theories Usability", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Berin, Do you have a stack trace you could share?  That would be really helpful. David On Mon, Feb 8, 2010 at 12:35 PM, Loritsch, Berin C.", 
    "msgId": 22382, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 79822 invoked from network); 8 Feb 2010 18:01:12 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m14.grp.re1.yahoo.com with QMQP; 8 Feb 2010 18:01:12 -0000\r\nX-Received: from unknown (HELO mail-pz0-f194.google.com) (209.85.222.194)\n  by mta2.grp.sp2.yahoo.com with SMTP; 8 Feb 2010 18:01:12 -0000\r\nX-Received: by mail-pz0-f194.google.com with SMTP id 32so213178pzk.27\n        for &lt;junit@yahoogroups.com&gt;; Mon, 08 Feb 2010 10:01:12 -0800 (PST)\r\nMIME-Version: 1.0\r\nX-Received: by 10.140.247.20 with SMTP id u20mr4673596rvh.230.1265652071697; \n\tMon, 08 Feb 2010 10:01:11 -0800 (PST)\r\nIn-Reply-To: &lt;75F5ED8A5A553646A46E00E6EC854FA30378C770@...-ais.com&gt;\r\nReferences: &lt;75F5ED8A5A553646A46E00E6EC854FA30378C76B@...-ais.com&gt;\n\t &lt;4f7da6b91002071848r3458f8c2ob7cda7cab6523ecc@...&gt;\n\t &lt;75F5ED8A5A553646A46E00E6EC854FA30378C76D@...-ais.com&gt;\n\t &lt;4f7da6b91002080813v3d97cdccye1f8879e80dbc396@...&gt;\n\t &lt;75F5ED8A5A553646A46E00E6EC854FA30378C770@...-ais.com&gt;\r\nDate: Mon, 8 Feb 2010 13:01:11 -0500\r\nX-Google-Sender-Auth: e9f51ec237cee2c2\r\nMessage-ID: &lt;4f7da6b91002081001h2382ebdeu8b70f274123c8a5@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: David Saff &lt;david@...&gt;\r\nSubject: Re: [junit] Theories Usability\r\nX-Yahoo-Group-Post: member; u=341876227; y=L8sTMjYj27U2fWN71CbwPIo0NK8EpfpR89u3VOfz88Q\r\nX-Yahoo-Profile: dsaff\r\n\r\nBerin,\n\nDo you have a stack trace you could share?  That would be really he=\r\nlpful.\n\n   David\n\nOn Mon, Feb 8, 2010 at 12:35 PM, Loritsch, Berin C.\n&lt;beri=\r\nn.loritsch@...&gt; wrote:\n&gt;\n&gt; I have JUnit 4.7 which is the most recent=\r\n available from Maven. =A0The parameters that caused the failure were not e=\r\nasily detectable from the stack trace.\n&gt;\n&gt; I&#39;ve added a feature request, th=\r\nat would at least allow a theory to be declared to be run as discrete. =A0A=\r\nKA:\n&gt;\n&gt; @Theory(runAsDiscrete=3Dtrue)\n&gt;\n&gt; which would generate a new &quot;test&quot;=\r\n for each combination of parameters. =A0The name of the test would include =\r\nthe parameters (using the toString method on the parameters of course). =A0=\r\nIt may generate 100+ test names, depending on the number of data points and=\r\n the combinations, but that works better for me than one name and one failu=\r\nre at a time.\n&gt;\n&gt; -----Original Message-----\n&gt; From: junit@yahoogroups.com =\r\non behalf of David Saff\n&gt; Sent: Mon 2/8/2010 11:13 AM\n&gt; To: junit@yahoogrou=\r\nps.com\n&gt; Subject: Re: [junit] Theories Usability\n&gt;\n&gt; Berin,\n&gt;\n&gt; I wouldn&#39;t =\r\nuse Rules, either.\n&gt;\n&gt; One failure per method is currently baked into the a=\r\nrchitecture of the\n&gt; Theories runner--I&#39;d welcome a feature request for the=\r\n right way to\n&gt; make that better.\n&gt;\n&gt; In terms of knowing what failed, the =\r\nTheories runner should show in\n&gt; the stack trace the parameters that trigge=\r\nred the failure. =A0Is that\n&gt; not happening?\n&gt;\n&gt; =A0 David\n&gt;\n&gt; On Mon, Feb =\r\n8, 2010 at 9:24 AM, Loritsch, Berin C.\n&gt; &lt;berin.loritsch@...&gt; wrote:=\r\n\n&gt;&gt; I haven&#39;t logged the feature request, mainly because I might not be usi=\r\nng the right tool for the job. =A0What I would like to see is what I descri=\r\nbed.\n&gt;&gt;\n&gt;&gt; With JUnit 3, I adopted the test nomenclature of something on th=\r\ne order of:\n&gt;&gt;\n&gt;&gt; testMyMethod_withNullParam1()\n&gt;&gt; testMyMethod_withXandYpa=\r\nrams()\n&gt;&gt;\n&gt;&gt; etc.\n&gt;&gt;\n&gt;&gt; that would let me see within the test report (parti=\r\ncularly a continuous integration test report) what exactly failed. =A0If th=\r\ne null parameter failed its check I&#39;d have to fix one thing (boundary check=\r\ning), but if the XandYparams version failed then I knew something may be wr=\r\nong with the algorithm.\n&gt;&gt;\n&gt;&gt; With the particular Theory I&#39;ve written I nee=\r\nd to know not only the class that was tested, but the attribute that did no=\r\nt follow the contracts for using the base class. =A0With only one failure t=\r\nhat can&#39;t happen.\n&gt;&gt;\n&gt;&gt; I didn&#39;t think Rules was the right way to go, becau=\r\nse the MethodRule objects were applied to the tests within that same class =\r\n(unless I&#39;m missing something).\n&gt;&gt;\n&gt;&gt; Theories at least gives me the covera=\r\nge and assurance I&#39;m after, but I&#39;d like to get away from writing to System=\r\n.out to figure out exactly what failed. =A0I would also like to be able to =\r\nsee all my failures at once instead of only after fixing the last failure.\n=\r\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; -----Original Message-----\n&gt;&gt; From: junit@yahoogroups.com on behal=\r\nf of David Saff\n&gt;&gt; Sent: Sun 2/7/2010 9:48 PM\n&gt;&gt; To: junit@yahoogroups.com\n=\r\n&gt;&gt; Subject: Re: [junit] Theories Usability\n&gt;&gt;\n&gt;&gt; Berin,\n&gt;&gt;\n&gt;&gt; I do think th=\r\nat we should eventually have a way to operate at least\n&gt;&gt; optionally in the=\r\n way you describe. =A0Have you logged a feature request\n&gt;&gt; yet?\n&gt;&gt;\n&gt;&gt; =A0 D=\r\navi\n&gt;&gt;\n&gt;&gt; On Fri, Feb 5, 2010 at 3:27 PM, Loritsch, Berin C.\n&gt;&gt; &lt;berin.lori=\r\ntsch@...&gt; wrote:\n&gt;&gt;&gt; Thanks everyone for helping me work through the=\r\n testing challenge I wanted to address. =A0I&#39;ve written a rudimentary Class=\r\nCollector that lets me specify a base package, what base classes I need, an=\r\ny annotations I need applied, etc. =A0I supplimented that with a BeanAttrib=\r\nutes class that will collect all the attributes (setters/getters) on the cl=\r\nass. =A0It&#39;s working very well. =A0Unfortunately, there are a few shortcomi=\r\nngs with this approach:\n&gt;&gt;&gt;\n&gt;&gt;&gt; 1. I cannot easily determine what the actua=\r\nl data point combination was that caused the failure. =A0I have to write th=\r\nose values out to System.out because the test failure does not do that for =\r\nme.\n&gt;&gt;&gt;\n&gt;&gt;&gt; 2. It stops on the very first failure, hiding many more failure=\r\ns that may still be lurking beneath the service.\n&gt;&gt;&gt;\n&gt;&gt;&gt; 3. The theory is t=\r\nhe only line shown in the test report, so there is no way to differentiate =\r\nruns which would handle the above concerns.\n&gt;&gt;&gt;\n&gt;&gt;&gt; What I would really lik=\r\ne to see is that a new test name for each combination of data points. =A0Fo=\r\nr example if you had a @Theory named &quot;checkAddWorks&quot; that took two paramete=\r\nrs and the data points [1,2] then I&#39;d like to see a set of test names that =\r\nlook like this in the test report:\n&gt;&gt;&gt;\n&gt;&gt;&gt; checkAddWorks(1,1)\n&gt;&gt;&gt; checkAddW=\r\norks(1,2)\n&gt;&gt;&gt; checkAddWorks(2,2)\n&gt;&gt;&gt;\n&gt;&gt;&gt; That will address all of the short=\r\ncomings I identified.\n&gt;&gt;&gt;\n&gt;&gt;&gt; My code looks like this:\n&gt;&gt;&gt;\n&gt;&gt;&gt; @RunWith(The=\r\nories.class)\n&gt;&gt;&gt; class TestMyTrackableContract {\n&gt;&gt;&gt; =A0 =A0@DataPoints\n&gt;&gt;&gt;=\r\n =A0 =A0BeanAttribute[] collectAllAttributesToTest() {\n&gt;&gt;&gt; =A0 =A0 =A0 =A0C=\r\nlassCollector collector =3D new ClassCollector();\n&gt;&gt;&gt; =A0 =A0 =A0 =A0collec=\r\ntor.within(&quot;com.mycompany.incident.model&quot;).assignableTo(Trackable.class);\n&gt;=\r\n&gt;&gt; =A0 =A0 =A0 =A0Collection&lt;Class&lt;?&gt;&gt; matchedClasses =3D collector.recurse=\r\n().collect();\n&gt;&gt;&gt;\n&gt;&gt;&gt; =A0 =A0 =A0 =A0List&lt;BeanAttribute&gt; attributes =3D new=\r\n ArrayList&lt;BeanAttribute&gt;();\n&gt;&gt;&gt;\n&gt;&gt;&gt; =A0 =A0 =A0 =A0for (Class&lt;?&gt; trackable=\r\n : matchedClasses) {\n&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0attributes.addAll(BeanAttri=\r\nbute.collectFrom(trackable));\n&gt;&gt;&gt; =A0 =A0 =A0 =A0}\n&gt;&gt;&gt;\n&gt;&gt;&gt; =A0 =A0 =A0 =A0r=\r\neturn attributes.toArray(new BeanAttribute[attributes.size()]);\n&gt;&gt;&gt; =A0 =A0=\r\n}\n&gt;&gt;&gt;\n&gt;&gt;&gt; =A0 =A0@Theory\n&gt;&gt;&gt; =A0 =A0public void checkSideEffectsOnAssign() =\r\nthrows Exception {\n&gt;&gt;&gt; =A0 =A0 =A0 =A0// This is designed to ensure that se=\r\ntters/getters work in concert\n&gt;&gt;&gt; =A0 =A0 =A0 =A0// and that setters set th=\r\ne appropriate message is sent\n&gt;&gt;&gt; =A0 =A0 =A0 =A0if ( ! beanAttribute.hasSe=\r\ntter() || ! beanAttribute.hasGetter() ) return;\n&gt;&gt;&gt; =A0 =A0 =A0 =A0beanAttr=\r\nibute.assertBalanced();\n&gt;&gt;&gt;\n&gt;&gt;&gt; =A0 =A0 =A0 =A0Trackable entity =3D beanAtt=\r\nribute.getEntityAs(Trackable.class);\n&gt;&gt;&gt; =A0 =A0 =A0 =A0// Unfortunately ne=\r\neded to determine when things go bad\n&gt;&gt;&gt; =A0 =A0 =A0 =A0System.out.format(&quot;=\r\nTesting %s&#92;n&quot;, beanAttribute);\n&gt;&gt;&gt;\n&gt;&gt;&gt; =A0 =A0 =A0 =A0Object original =3D b=\r\neanAttribute.getValue();\n&gt;&gt;&gt; =A0 =A0 =A0 =A0Object testValue =3D beanAttrib=\r\nute.generateTestValue(original);\n&gt;&gt;&gt;\n&gt;&gt;&gt; =A0 =A0 =A0 =A0// Ensure the sette=\r\nr works as expected\n&gt;&gt;&gt; =A0 =A0 =A0 =A0beanAttribute.setValue(testValue);\n&gt;=\r\n&gt;&gt; =A0 =A0 =A0 =A0assertEquals(testValue, beanAttribute.getValue());\n&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt; =A0 =A0 =A0 =A0// Ensure properties are set and events were properly\n&gt;&gt;&gt; =\r\n=A0 =A0 =A0 =A0Properties changes =3D entity.getChanges();\n&gt;&gt;&gt; =A0 =A0 =A0 =\r\n=A0assertEquals( String.valueOf(testValue),\n&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0chan=\r\nges.getProperty(beanAttribute.getAttribute()));\n&gt;&gt;&gt; =A0 =A0 =A0 =A0assertEq=\r\nuals( String.valueOf(original),\n&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0changes.getPrope=\r\nrty(beanAttribute.getAttribute() + &quot;.old&quot;));\n&gt;&gt;&gt; =A0 =A0}\n&gt;&gt;&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;=\r\n [Non-text portions of this message have been removed]\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; ----=\r\n--------------------------------\n&gt;&gt;&gt;\n&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; [Non-text portions of this message have been removed]\n&gt;&gt;\n&gt;&gt;\n&gt;=\r\n&gt;\n&gt;&gt; ------------------------------------\n&gt;&gt;\n&gt;&gt; Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;\n&gt;=\r\n&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt; [Non-text portions of this message have been removed]\n&gt;\n&gt;\n&gt;\n&gt; =\r\n------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "dsaff", 
    "topicId": 22365, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "prevInTime": 22381, 
    "contentTrasformed": false, 
    "postDate": "1265652071", 
    "canDelete": false, 
    "nextInTopic": 22383, 
    "prevInTopic": 22381, 
    "headers": {
        "inReplyToHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NzBAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MTAwMjA4MTAwMWgyMzgyZWJkZXU4YjcwZjI3NDEyM2M4YTVAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NkJAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPgkgPDRmN2RhNmI5MTAwMjA3MTg0OHIzNDU4ZjhjMm9iN2NkYTdjYWI2NTIzZWNjQG1haWwuZ21haWwuY29tPgkgPDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NkRAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPgkgPDRmN2RhNmI5MTAwMjA4MDgxM3YzZDk3Y2RjY3llMWY4ODc5ZTgwZGJjMzk2QG1haWwuZ21haWwuY29tPgkgPDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NzBAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg=="
    }
}