{
    "numMessagesInTopic": 8, 
    "nextInTime": 9512, 
    "senderId": "XdXkpo--kutBnSM0jhQTmDOEWE0ygvtc16PVO0a_0-SurPjKwX-_6o3TpcrkU67wP1sa-w5yK6bNNbXxT1hZYUOP5vEyNyaYNpk", 
    "systemMessage": false, 
    "subject": "Re: [junit] How to test threaded method?", 
    "from": "Kevin Klinemeier &lt;zipwow@...&gt;", 
    "authorName": "Kevin Klinemeier", 
    "msgSnippet": "This might be one of those cases where your unit testing is identifying a feature you ll want later.  Your programs will probably also be interested in finding", 
    "msgId": 9511, 
    "profile": "zipwow", 
    "topicId": 9506, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 82914509, 
    "messageBody": "<div id=\"ygrps-yiv-229175829\">This might be one of those cases where your unit testing is identifying<br/>\na feature you&#39;ll want later.  Your programs will probably also be<br/>\ninterested in finding out if/when this action is finished.<br/>\n<br/>\nThat said, I&#39;d change your method to return the thread that it created.<br/>\nIf your application really doesn&#39;t care, it doesn&#39;t have to store it,<br/>\nbut your unit test can then call createdThread.yield(timeout)...<br/>\n<br/>\nKevin<br/>\n--- Kris Henderson &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:khenderson@...\">khenderson@...</a>&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; I have a method that when called creates a thread and does all its<br/>\n&gt; work<br/>\n&gt; in the new thread.  It looks kind of like this:<br/>\n&gt; <br/>\n&gt; public void doSomething()<br/>\n&gt; {<br/>\n&gt;     Thread requestThread = new Thread()<br/>\n&gt;     {<br/>\n&gt;         public void run()<br/>\n&gt;         {<br/>\n&gt;             fireStartEvent();<br/>\n&gt; <br/>\n&gt;             //do some stuff that takes a long time<br/>\n&gt; <br/>\n&gt;             fireDoneEvent();<br/>\n&gt;         }<br/>\n&gt;     };<br/>\n&gt;     requestThread.start();<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; I would like to test this method to make sure it sends the correct<br/>\n&gt; events in the correct order and that the EventObject contains the<br/>\n&gt; correct data.<br/>\n&gt; <br/>\n&gt; So I wrote a test that looks like this:<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; public void testDoSomething()<br/>\n&gt; {<br/>\n&gt;     m_eventCount = 0;<br/>\n&gt;     final MockService service = new MockService();<br/>\n&gt;     service.addOperationListener(new OperationAdapter()<br/>\n&gt;     {<br/>\n&gt;         public void operationUpdate(OperationEvent event)<br/>\n&gt;         {<br/>\n&gt;             m_eventCount += 1;<br/>\n&gt;         }<br/>\n&gt;     });<br/>\n&gt;         <br/>\n&gt;     service.doSomething();<br/>\n&gt;                 <br/>\n&gt;     assertEquals(2, m_eventCount);<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; My test fails because it reaches the assertEquals before all the<br/>\n&gt; events<br/>\n&gt; can be fired.  If I add a call to Thread.sleep after the call to<br/>\n&gt; doSomething() then the test succeeds.  Does anyone know a better way<br/>\n&gt; to<br/>\n&gt; test this so I don&#39;t have to add a call to Thread.sleep?<br/>\n&gt; <br/>\n&gt; Thanks,<br/>\n&gt; Kris<br/>\n&gt; <br/>\n<br/>\n<br/>\n </span></blockquote>__________________________________<br/>\nDo you Yahoo!?<br/>\nThe New Yahoo! Shopping - with improved product search<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://shopping.yahoo.com\">http://shopping.yahoo.com</a></div>", 
    "prevInTime": 9510, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1064532187", 
    "canDelete": false, 
    "nextInTopic": 9512, 
    "prevInTopic": 9510, 
    "headers": {
        "inReplyToHeader": "PEY3QjE2RUI4OTg0QjE0NDA5QUNCMDE1RjEzMjZCQjY2MUZGMkE4QEFUTDFWRVhDMDA1LnVzZG9tMDA0LnRjby50Yz4=", 
        "messageIdInHeader": "PDIwMDMwOTI1MjMyMzA3LjI1NzcucW1haWxAd2ViODA1MDkubWFpbC55YWhvby5jb20+"
    }
}