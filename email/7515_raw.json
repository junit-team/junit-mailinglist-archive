{
    "topicId": 7374, 
    "postDate": "1049437693", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Bernd&quot; &lt;berndq@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "PRR93wdC7KlQNswzjQCvcYXMBqWYhYbrKvmMUqYqT2Ed0lZZgCNdUvzVRLFr5L-jyE6N9bRJwOSjRpT4l-aK", 
    "nextInTime": 7516, 
    "userId": 106754364, 
    "prevInTime": 7514, 
    "prevInTopic": 7492, 
    "headers": {
        "inReplyToHeader": "PDE1My4xZGNiMTIyNC4yYmJjY2JmMUBhb2wuY29tPg==", 
        "messageIdInHeader": "PDAwMjYwMWMyZmE3MyQ2MWNlZWZkMCQxZjAzYThjMEBkZWxsPg=="
    }, 
    "authorName": "Bernd", 
    "numMessagesInTopic": 17, 
    "msgSnippet": "Sam, ... No, anyObject.equals(null) should return false, see javadoc above. ... the result of this expression is always false. question: how is clientObject", 
    "contentTrasformed": false, 
    "msgId": 7515, 
    "nextInTopic": 7516, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;berndq@...&gt;\r\nX-Sender: berndq@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 4 Apr 2003 06:28:19 -0000\r\nReceived: (qmail 90483 invoked from network); 4 Apr 2003 06:28:19 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m9.grp.scd.yahoo.com with QMQP; 4 Apr 2003 06:28:19 -0000\r\nReceived: from unknown (HELO mail.gmx.net) (213.165.64.20)\n  by mta1.grp.scd.yahoo.com with SMTP; 4 Apr 2003 06:28:22 -0000\r\nReceived: (qmail 20040 invoked by uid 65534); 4 Apr 2003 06:28:21 -0000\r\nReceived: from p50916160.dip.t-dialin.net (EHLO dell) (80.145.97.96)\n  by mail.gmx.net (mp016-rz3) with SMTP; 04 Apr 2003 08:28:21 +0200\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nSubject: RE: [junit] Junit and RMI, please help ...\r\nDate: Fri, 4 Apr 2003 08:28:13 +0200\r\nMessage-ID: &lt;002601c2fa73$61ceefd0$1f03a8c0@dell&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;US-ASCII&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook, Build 10.0.4510\r\nImportance: Normal\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106\r\nIn-Reply-To: &lt;153.1dcb1224.2bbccbf1@...&gt;\r\nFrom: &quot;Bernd&quot; &lt;berndq@...&gt;\r\nX-Yahoo-Group-Post: member; u=106754364\r\n\r\nSam, \n\n&gt; &gt;sidenote:\n&gt; &gt;from javadoc Object.equals():\n&gt; &gt;&quot;For any non-null reference value x, x.equals(null) should \n&gt; return false.&quot;\n&gt; \n&gt; So in my case, if the client process is killed, the client \n&gt; reference stored \n&gt; in the server becomes null reference, and so \n&gt; clientObject.equals(null) == \n&gt; true.  Could it be the case? \n\nNo, anyObject.equals(null) should return false, see javadoc above.\n\n&gt; if (clientObject != null && clientObject.equals(null)) { \nthe result of this expression is always false.\n\nquestion: how is clientObject set to null if client disconnects?\nIs this an RMI feature?\n\nIn your other mail I saw that the client passes a this to the\nserver. But client and server do not run in the same VM. What happens\nif the client gets garbage collected (will this happen?) while\nit is connected to the server. Will the server have an\ninvalid reference?  Does it make sence to pass this client VM specific\nrefernece to the server VM?\nI am not familiar with RMI so this questions may be nonsense.\n\n&gt; I tested the server and 2 \n&gt; clients locally (I \n&gt; have no access to a network system) and it *seemed* (I don&#39;t \n&gt; know for sure \n&gt; though) to work fine.  Am I missing something?\n\ndoes not matter where the processes run, on one the same node or on\ndifferent nodes.\nThe process always see the same behaviour from the network interface.\n\n&gt; &gt;However if the tcp connection is not closed properly (client \n&gt; disconnected \n&gt; from net,\n&gt; &gt;client OS crashed, ...) the server ist not informed by the \n&gt; tcp layer about\n&gt; &gt;it. For such cases you will have to add functionality to \n&gt; your server to \n&gt; &gt;actively detect them by a call to a client&#39;s method.\n&gt; \n&gt; I don&#39;t know how to implement this.  Right now, all the \n&gt; server&#39;s methods are \n&gt; declared in the remote interface, and the client gets a \n&gt; remote object of the \n&gt; remote interface&#39;s type to call its method.  If the server \n&gt; calls the client&#39;s \n&gt; method, would it be in another remote interface?  And what \n&gt; does the method \n&gt; do, or just an empty method and may be some kind of Exception will be \n&gt; generated when called on?  \n\nThis callback funtion makes the client a server for this operation.\n\nI would probably start with using a mock object to be able to test\nthe behaviour of the server if a client disconnects:\n\n\non the server side define an interface independet from RMI stuff\n(with possible syntax errors included)\n\ninterface Client{\n   void isClientStillConnected() throw MyNoClientCommunicationException;\n}\n\nbuild your server code to work against the interface only.\n\nin production:\nclass ClientImpl implements client{\n  void isClientStillConnected() throws MyNoClientCommunicationException{\n    try{\n      // force network communication\n      yourRMIStub.isClientStillConnected();\n    } catch (RMIException ex){\n       throw new MyNoClientCommunicationException(&quot;client disconnect&quot;, ex);\n    }\n}\n\nfor unit tests build a mock wich is able to simmulate the error:\n\nclass MockClient implements Client{\n  void isClientStillConnected() throws MyNoClientCommunicationException{\n  if(System.getProperty(&quot;someTriggerKey&quot;).equals(&quot;true&quot;)){\n\tthrow new MyNoClientCommunicationException(&quot;unit test exeption&quot;);\n  } else {\n\t// do nothing\n  }\n}\n\n\nMaybe the easiest solution is to have a timestamp in your locklist when\nthe lock was aquired. let the server thread search for timed out locks.\n\nBernd\n\n\n\n", 
    "subject": "RE: [junit] Junit and RMI, please help ..."
}