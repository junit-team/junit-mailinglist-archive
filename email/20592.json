{
    "numMessagesInTopic": 8, 
    "nextInTime": 20593, 
    "senderId": "AC2GT-j0hnlw7zG7l0AGrUpXkoliUZQhiHcXEmPdcGOPzyBcZiaciRBLunBHBu-xCLG8Z_TsiDYbLlDf5SZN8hSN0lQKk0xLVgvZHhQZj90", 
    "systemMessage": true, 
    "subject": "RE: [junit] Testing code that depends on today&#39;s date", 
    "from": "Per Jacobsson &lt;perjacobsson@...&gt;", 
    "authorName": "Per Jacobsson", 
    "msgSnippet": "That would work, but I wouldn t be really happy about going back to the old singleton factory pattern. It may just be the best fit for this case though. / Per ", 
    "msgId": 20592, 
    "topicId": 20590, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 282257561, 
    "messageBody": "<div id=\"ygrps-yiv-962797638\">That would work, but I wouldn&#39;t be really happy about going back to the old singleton factory pattern. It may just be the best fit for this case though.<br/>\n/ Per<br/>\n________________________________________<br/>\nFrom: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of Andrew McDonagh [<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:andrewmcdonagh@...\">andrewmcdonagh@...</a>]<br/>\nSent: Tuesday, June 17, 2008 4:20 PM<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSubject: Re: [junit] Testing code that depends on today&#39;s date<br/>\n<br/>\nHi,<br/>\n<br/>\nIf you use the Abstract Factory pattern to create the Date() object<br/>\ninstance, instead of calling new Date() yourself or passing it around,<br/>\nthen the production TodaysDateConcreteFactory can simply :<br/>\n<br/>\nreturn new Date();<br/>\n<br/>\nWhereas during your unit or functional tests, you use a<br/>\nMockTodaysDateConcreteFactory object, which returns what ever you want<br/>\n<br/>\nreturn expectedDate;<br/>\n<br/>\nHope this helps<br/>\n<br/>\nAndrew<br/>\n<br/>\n2008/6/17 Per Jacobsson &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:perjacobsson@...\">perjacobsson@...</a>&lt;mailto:perjacobsson%40eharmony.com&gt;&gt;:<br/>\n<blockquote><span title=\"qreply\"> &gt; Hi,<br/>\n&gt; This has been annoying me for a while and I can&#39;t think of a clean solution<br/>\n&gt; for it. Hope this makes sense: I have some code that returns different<br/>\n&gt; results depending on what today&#39;s date is (the number of days since a user<br/>\n&gt; first registered, etc). The simple approach is to just create a new instance<br/>\n&gt; of java.util.Date whenever I need to know the current date, but that tends<br/>\n&gt; to make both unit and automated functional testing difficult.<br/>\n&gt;<br/>\n&gt; I&#39;m currently injecting today&#39;s date into the classes that need it, and then<br/>\n&gt; the tests can just use a static date. It gets pretty ugly though, a lot of<br/>\n&gt; times this date has to be dragged along deep into the domain model.<br/>\n&gt;<br/>\n&gt; An alternative would be to take the old school approach and have a static<br/>\n&gt; factory that everything that needs to know today&#39;s date calls, and allow the<br/>\n&gt; unit tests to override with a test date. Of course, then you run into all<br/>\n&gt; the other issues that dependency injection solves.<br/>\n&gt;<br/>\n&gt; Any thoughts?<br/>\n&gt; Thanks,<br/>\n&gt; / Per<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 20591, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1213762604", 
    "canDelete": false, 
    "nextInTopic": 20593, 
    "prevInTopic": 20591, 
    "headers": {
        "inReplyToHeader": "PDM1YzUwN2QzMDgwNjE3MTYyMHAyODFlNWYyY3Y2YmEwZGExN2E2MGE5ZWI2QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDMwOTE5NkBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPg==", 
        "referencesHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPiw8MzVjNTA3ZDMwODA2MTcxNjIwcDI4MWU1ZjJjdjZiYTBkYTE3YTYwYTllYjZAbWFpbC5nbWFpbC5jb20+"
    }
}