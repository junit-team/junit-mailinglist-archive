{
    "numMessagesInTopic": 30, 
    "nextInTime": 24335, 
    "senderId": "tsD2d2J6suJNdPeOt-DM8xUH35bofc0G7Jqi0eJq6dA6FZKHtrjZKqSorSk82odo-zhaSLrpYTuX7yYUrqANJCVrQxDAYW-z", 
    "systemMessage": true, 
    "subject": "Re: [junit] Re: Feedback requested: Impending changes to RunListener", 
    "from": "Kevin Cooney &lt;kcooney@...&gt;", 
    "authorName": "Kevin Cooney", 
    "msgSnippet": "... Remember, this annotation changes the behavior of JUnit will have when interacting with classes that extend RunListener. It s not simply an indication that", 
    "msgId": 24334, 
    "profile": "kevincooney2000", 
    "topicId": 24274, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 475263748, 
    "messageBody": "<div id=\"ygrps-yiv-1988536827\">On Thu, Feb 14, 2013 at 9:27 AM, tibord47 &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:tibord47@...\">tibord47@...</a>&gt; wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; **<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; David, I can confirm that running annotated listener in 4.11 and compiled<br/>\n&gt; with 4.12 does not throw exception. So the annotation is winner in my eyes.<br/>\n&gt;<br/>\n&gt; Regarding the static inner annotation in RunListener, this would mean that<br/>\n&gt; other classes which will maybe later need the same name of annotation will<br/>\n&gt; just duplicate again.<br/>\n&gt;<br/>\n </span></blockquote>Remember, this annotation changes the behavior of JUnit will have when<br/>\ninteracting with classes that extend RunListener. It&#39;s not simply an<br/>\nindication that the listener is thread-safe (though your listener would<br/>\nhave to be thread-safe to use this annotation). See my comments in<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://goo.gl/6HBNV\">http://goo.gl/6HBNV</a> to see other reasons why I think a top-level JUnit<br/>\nThreadSafe annotation would be problematic<br/>\n<br/>\nI&#39;m personally not too worried about what might happen if we need to think<br/>\nabout indicating the thread-safety of extension points somewhere else in<br/>\nJUnit. We could easily support multiple annotations in the future if we<br/>\nneed to, and when that time comes, perhaps JSR-305 will be more mature.<br/>\n<br/>\n-- Kevin<br/>\n<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt;<br/>\n&gt; Cheers,<br/>\n&gt; Tibor<br/>\n&gt;<br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Kevin Cooney wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Thu, Feb 14, 2013 at 8:38 AM, David Saff wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; Hi, all.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Kevin, thank you very much for the summary document. I think that a<br/>\n&gt; &gt; &gt; JUnit-specific annotation, which is not name-confusable with a standard<br/>\n&gt; &gt; &gt; like @ThreadSafe, seems to be a pretty clear winner. If we feel<br/>\n&gt; strongly<br/>\n&gt; &gt; &gt; that it should remain consonant with @ThreadSafe, we could make it a<br/>\n&gt; static<br/>\n&gt; &gt; &gt; inner annotation, and reference it as @....<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; I&#39;m personally find with that as long as the JavaDoc for the annotation<br/>\n&gt; &gt; makes it clear that a RunListener implementation annotated with that<br/>\n&gt; &gt; interface will be treated differently than one not annotated with that<br/>\n&gt; &gt; interface when addListener() and removeListener() is called.<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; That might<br/>\n&gt; &gt; &gt; also have the advantage of making clear that it&#39;s a single-purpose<br/>\n&gt; &gt; &gt; annotation (I&#39;d rather not, at this point, start speculatively<br/>\n&gt; figuring out<br/>\n&gt; &gt; &gt; what other interfaces might try to pun meanings onto a general-purpose<br/>\n&gt; &gt; &gt; ThreadSafe annotation)<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I&#39;m a little curious about the third-party library implementation.<br/>\n&gt; Let&#39;s<br/>\n&gt; &gt; &gt; say I write a package FooTest which is compiled against JUnit 4.12,<br/>\n&gt; and it<br/>\n&gt; &gt; &gt; contains a FooListener I&#39;d like to mark threadsafe. A client wants to<br/>\n&gt; use<br/>\n&gt; &gt; &gt; it with JUnit 4.11 (she knows she won&#39;t get the concurrent performance<br/>\n&gt; &gt; &gt; boost, but wants it to just work). The document seems to assume that if<br/>\n&gt; &gt; &gt; FooListener has a RunListener.TheadSafe annotation, then our client<br/>\n&gt; won&#39;t<br/>\n&gt; &gt; &gt; have a problem (unless, likely, she actually tries to instantiate all<br/>\n&gt; of<br/>\n&gt; &gt; &gt; the annotations from FooListener in her own code).<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Correct as of JDK 1.5.0_06. See<br/>\n&gt; &gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/3567413/why-doesnt-a-missing-annotation-cause-a-classnotfoundexception-at-runtime\">http://stackoverflow.com/questions/3567413/why-doesnt-a-missing-annotation-cause-a-classnotfoundexception-at-runtime</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; It sounds that if the client wants to write code that extends FooListener<br/>\n&gt; &gt; then JUnit 4.12 will need to be on the compile-time classpath<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; However, the document<br/>\n&gt; &gt; &gt; assumes that declaring a marker interface ThreadSafeRunListener _would_<br/>\n&gt; &gt; &gt; break the client. Is that true?<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; I believe it would result in a NoClassDefFoundError exception. It should<br/>\n&gt; be<br/>\n&gt; &gt; easy to verify.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Note that it may be hard to write a library that has a compile-time<br/>\n&gt; &gt; dependency on JUnit 4.12 while being runtime compatible with 4.11 for<br/>\n&gt; other<br/>\n&gt; &gt; reasons.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Does FooListener fail at bytecode<br/>\n&gt; &gt; &gt; verification because the verifier wants to make sure that it<br/>\n&gt; implements all<br/>\n&gt; &gt; &gt; of ThreadSafeRunListener&#39;s methods?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; That would be my guess.<br/>\n&gt; &gt;<br/>\n&gt; &gt; -- Kevin<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n </span></blockquote>[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 24333, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1360865054", 
    "canDelete": false, 
    "nextInTopic": 24335, 
    "prevInTopic": 24333, 
    "headers": {
        "inReplyToHeader": "PGtmajZwditqOTRjQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBQTNFK2VYeU8zdHdxLSt2b1J5OGhGUm05SGNZYzFpRGU1YTdWK3RuTGVraVZjcENCUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGtmajZwditqOTRjQGVHcm91cHMuY29tPg=="
    }
}