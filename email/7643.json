{
    "numMessagesInTopic": 2, 
    "nextInTime": 7644, 
    "senderId": "5tgPS22KZXo49_uqd5fMxwl4t7VQe2MeWsV0dWR0FVWBid4g6RfLP0NadHIWVzN4KZL1Le2pLdGhD4LO9bNeDFnKSUmL8V9j5EyzkZtrew", 
    "systemMessage": false, 
    "subject": "Re: [junit] What&#39;s wrong with this test?", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "I didn t look at the rest of the test, but... ... DON T CACHE DATABASE CONNECTIONS! Database connections will eventually be orphaned. In your test, it s no", 
    "msgId": 7643, 
    "profile": "nails762", 
    "topicId": 7638, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "messageBody": "<div id=\"ygrps-yiv-978141770\">I didn&#39;t look at the rest of the test, but...<br/>\n<br/>\n... DON&#39;T CACHE DATABASE CONNECTIONS!<br/>\n<br/>\nDatabase connections will eventually be orphaned. In your test, it&#39;s no problem, but if you cache a physical database connection in a class-level variable in real production code, then eventually your connection will be thrown away by the database. As soon as the application runs for more than 30 minutes, it&#39;ll stop working.<br/>\n<br/>\nAlso don&#39;t cache System.getProperties(). Just grab it when you need it. For all you know, Java is caching it. Let Java do its job.<br/>\n<br/>\nNext: why use class-level data when method parameters will do? Resist the urge to use global data, even within the scope of a single class.<br/>\n<br/>\nIf you run this class by running main(), it will work; but if you run it in the TestRunner, it will not. The TestRunner doesn&#39;t touch your main() method.<br/>\n<br/>\nIf your suite() method needs to initialize the database connection, then why isn&#39;t it initializing the database connection?<br/>\n<br/>\nGood luck.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;So said josevnz on 4/9/2003 --------------------<br/>\n&gt;Greetings,<br/>\n&gt;<br/>\n&gt;I got the following TestSuite class:<br/>\n&gt;<br/>\n&gt;public class RunAllDictionaryTests extends TestSuite {<br/>\n&gt;      <br/>\n&gt;      private static Connection _conn;<br/>\n&gt;      private static final Properties _prop = System.getProperties();<br/>\n&gt;<br/>\n&gt;      /**<br/>\n&gt;      * Test entry point. Run all the tests from here. This method expects<br/>\n&gt;than the following system property is defined:<br/>\n&gt;      * &#39;cvebrowser.test.config.basedir&#39; pointing to the test base<br/>\n&gt;configuration directory.<br/>\n&gt;      * @param String [] args - Command line arguments, currently ignored<br/>\n&gt;      */<br/>\n&gt;      public static void main(String args[]) {<br/>\n&gt;            try {<br/>\n&gt;                  // load the system properties<br/>\n&gt;                  _prop.load(new FileInputStream( new<br/>\n&gt;File(System.getProperty(&quot;cvebrowser.test.config.basedir&quot;) +<br/>\n&gt;System.getProperty(&quot;file.separator&quot;) +<br/>\n&gt;&quot;RunAllDictionaryTests.properties&quot;)) ); // Load the aditional properties<br/>\n&gt;                  System.setProperties(_prop);<br/>\n&gt;                  // get the tests database connection<br/>\n&gt;                 <br/>\n&gt;Class.forName(_prop.getProperty(&quot;cvebrowser.test.jdbc.driver&quot;));<br/>\n&gt;                 <br/>\n&gt;System.err.println(_prop.getProperty(&quot;cvebrowser.test.jdbc.url&quot;) +<br/>\n&gt;&quot;, &quot; + _prop.getProperty(&quot;cvebrowser.test.jdbc.user&quot;) + &quot;, &quot; +<br/>\n&gt;_prop.getProperty(&quot;cvebrowser.test.jdbc.password&quot;));<br/>\n&gt;                  _conn =<br/>\n&gt;DriverManager.getConnection(_prop.getProperty(&quot;cvebrowser.test.jdbc.url&quot;),<br/>\n&gt;_prop.getProperty(&quot;cvebrowser.test.jdbc.user&quot;),<br/>\n&gt;_prop.getProperty(&quot;cvebrowser.test.jdbc.password&quot;));<br/>\n&gt;                  junit.textui.TestRunner.run(suite());<br/>\n&gt;            } catch (Exception exp) {<br/>\n&gt;                  exp.printStackTrace();<br/>\n&gt;            } finally {<br/>\n&gt;                  if (_conn != null) {<br/>\n&gt;                        try { _conn.close(); } catch (SQLException ignore)<br/>\n&gt;{}<br/>\n&gt;                  }<br/>\n&gt;            }<br/>\n&gt;        }<br/>\n&gt;      <br/>\n&gt;      /**<br/>\n&gt;      * Defines all the tests to be run. If you need a new tests, add them<br/>\n&gt;here.<br/>\n&gt;      */<br/>\n&gt;      public static Test suite() {<br/>\n&gt;            TestSuite suite= new TestSuite();<br/>\n&gt;            suite.addTest(new<br/>\n&gt;DictionaryTest(&quot;testCVEDictionaryGetVersionEmptyDB&quot;, _conn, _prop));<br/>\n&gt;// Get the CVE / CAN version from an empty database<br/>\n&gt;<br/>\n&gt;            return suite;<br/>\n&gt;      }<br/>\n&gt;}<br/>\n&gt;<br/>\n&gt;but when i run the test i got a &quot;NullPointerException&quot; (the Dictionary<br/>\n&gt;Test class checks if the database connection is != from null) because<br/>\n&gt;the database connection has not been defined yet.<br/>\n&gt;<br/>\n&gt;Does the suite() method is called before the main() method by JUnit<br/>\n&gt;(doesn&#39;t look like, plus my database connection is shared among the<br/>\n&gt;tests).<br/>\n&gt;<br/>\n&gt;Thanks in advance,<br/>\n&gt;<br/>\n&gt;JV.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;Yahoo! Groups Sponsor<br/>\n&gt;ADVERTISEMENT<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;To unsubscribe from this group, send an email to:<br/>\n&gt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.<br/>\n </span></blockquote>J. B. Rainsberger,<br/>\nPresident, Diaspar Software Services<br/>\nLet&#39;s write software that people understand.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com/\">http://www.diasparsoftware.com/</a><br/>\ntelephone: +1 416 791-8603</div>", 
    "prevInTime": 7642, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1049898467", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 7638, 
    "headers": {
        "inReplyToHeader": "PGI3MTBmNitsY2k0QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIwMDMwNDA5MDgyNzQ3MDAzOS4wNTM3MUIyQUBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGI3MTBmNitsY2k0QGVHcm91cHMuY29tPg=="
    }
}