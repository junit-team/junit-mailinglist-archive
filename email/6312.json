{
    "numMessagesInTopic": 4, 
    "nextInTime": 6313, 
    "senderId": "wMPtrV9S7cNPrRsIdFl18LZJh_FFE4Gle102stZvq-l8x3Br1xGmUBz_YZ7iLEh48ZdE1mOJ10-Om3BWAExWPpXUhjPyPGX2PH2lPa4D", 
    "systemMessage": false, 
    "subject": "using inner classes to factor out common tests?", 
    "from": "Greg Wilson &lt;Greg.Wilson@...&gt;", 
    "authorName": "Greg Wilson", 
    "msgSnippet": "So, I want to test a reflexive, associative binary operator (rectangle overlap).  I know that for any two valid rectangles A and B: A * A = A A * B = R  // for", 
    "msgId": 6312, 
    "profile": "gregory_v_wilson", 
    "topicId": 6312, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 131169521, 
    "messageBody": "<div id=\"ygrps-yiv-268092929\">So, I want to test a reflexive, associative binary operator (rectangle<br/>\noverlap).  I know that for any two valid rectangles A and B:<br/>\n<br/>\nA * A = A<br/>\nA * B = R  // for some overlap result R<br/>\nB * A = R  // the same R<br/>\nB * B = B<br/>\n<br/>\nMy first attempt is a class that has lots of &quot;testXYZ&quot; methods, each<br/>\nof which creates two rectangles, and their expected overlap, and does<br/>\na comparison.  The class then has a static main() that constructs and<br/>\nruns the test suite:<br/>\n<br/>\npublic class TestDirect extends junit.framework.TestCase<br/>\n{<br/>\n    public TestDirect(String name)<br/>\n    {<br/>\n        super(name);<br/>\n    }<br/>\n<br/>\n    public void testIdentical()<br/>\n    {<br/>\n        Rect left   = new Rect(0, 0, 1, 1);<br/>\n        Rect right  = new Rect(0, 0, 1, 1);<br/>\n        Rect expect = new Rect(0, 0, 1, 1);<br/>\n        assertEquals(left.overlap(right), expect);<br/>\n    }<br/>\n<br/>\n    ...etc...<br/>\n<br/>\n    public static void main(String[] args)<br/>\n    {<br/>\n\tTestSuite suite = new TestSuite();<br/>\n\tsuite.addTest(new TestDirect(&quot;testIdentical&quot;));<br/>\n\tsuite.addTest(new TestDirect(&quot;testDouble&quot;));<br/>\n\tsuite.addTest(new TestDirect(&quot;testContained&quot;));<br/>\n\tsuite.addTest(new TestDirect(&quot;testOverlap&quot;));<br/>\n\tsuite.addTest(new TestDirect(&quot;testEdge&quot;));<br/>\n\tsuite.addTest(new TestDirect(&quot;testCorner&quot;));<br/>\n\tTestRunner.run(suite);<br/>\n    }<br/>\n}<br/>\n<br/>\nMy second attempt uses jUnit&#39;s reflective capabilities to set up the<br/>\ntest suite from the class object:<br/>\n<br/>\npublic class TestReflect extends junit.framework.TestCase<br/>\n{<br/>\n    ...same tests as above...<br/>\n<br/>\n    public static void main(String[] args)<br/>\n    {<br/>\n\tTestSuite suite = new TestSuite(TestReflect.class);<br/>\n\tTestRunner.run(suite);<br/>\n    }<br/>\n}<br/>\n<br/>\nHowever, this still isn&#39;t trying all four possible tests on each<br/>\nfixture.  So, thinks I, why not derive a class TestMethods from<br/>\nTestCase, leave setUp() abstract, and implement four methods<br/>\ntestLeftLeft, testLeftRight, and so on, to test the four possible<br/>\ncases.  I will then derive concrete classes like TestUnitUnit from<br/>\nTestMethods; each derived class will override setUp() to initialize<br/>\nthis.left, this.right, and this.expected.<br/>\n<br/>\nMy first implementation looks like this:<br/>\n<br/>\npublic class TestDerive extends junit.framework.TestSuite<br/>\n{<br/>\n    public abstract class TestMethods extends junit.framework.TestCase<br/>\n    {<br/>\n        public void testLeftLeft()<br/>\n        {<br/>\n            assertEquals(this.left.overlap(this.left), this.left);<br/>\n        }<br/>\n<br/>\n        ...etc...<br/>\n<br/>\n        protected Rect left, right, expect;<br/>\n    }<br/>\n<br/>\n    public class Identical extends TestMethods<br/>\n    {<br/>\n        public Identical()<br/>\n        {}<br/>\n        public void setUp()<br/>\n        {<br/>\n            this.left   = new Rect(0, 0, 1, 1);<br/>\n            this.right  = new Rect(0, 0, 1, 1);<br/>\n            this.expect = new Rect(0, 0, 1, 1);<br/>\n        }<br/>\n    }<br/>\n<br/>\n    public static void main(String[] args)<br/>\n    {<br/>\n        TestSuite suite = new TestSuite();<br/>\n        suite.addTestSuite(Identical.class);<br/>\n        junit.textui.TestRunner.run(suite);<br/>\n    }<br/>\n}<br/>\n<br/>\nIt compiles just fine, but fails to execute: <br/>\n<br/>\n1) warning(junit.framework.TestSuite$1)junit.framework.AssertionFailedError:<br/>\nClass TestDerive$Identical has no public constructor<br/>\n  TestCase(String name) or TestCase()<br/>\n    at TestDerive.main(TestDerive.java:36)<br/>\n<br/>\nHm... Identical certainly does have an empty constructor.  What&#39;s<br/>\ngoing on here?  Ah, inner classes: I need an instance of the outer<br/>\nclass so that I can do &quot;outer.new inner()&quot;, and the framework doesn&#39;t<br/>\nhandle that.<br/>\n<br/>\nOK, Plan B: move TestMethods and Identical out of TestDerive (but<br/>\nleave them in the same file, since I don&#39;t want to have to create a<br/>\nseparate file for each of my tests):<br/>\n<br/>\nabstract class TestMethods extends junit.framework.TestCase<br/>\n{<br/>\n    public void testLeftLeft()<br/>\n    {<br/>\n        assertEquals(this.left.overlap(this.left), this.left);<br/>\n    }<br/>\n    protected Rect left, right, expect;<br/>\n}<br/>\n<br/>\nclass Identical extends TestMethods<br/>\n{<br/>\n    public Identical()<br/>\n    {}<br/>\n    public void setUp()<br/>\n    {<br/>\n        this.left   = new Rect(0, 0, 1, 1);<br/>\n        this.right  = new Rect(0, 0, 1, 1);<br/>\n        this.expect = new Rect(0, 0, 1, 1);<br/>\n    }<br/>\n}<br/>\n<br/>\npublic class TestDerive extends junit.framework.TestSuite<br/>\n{<br/>\n    public static void main(String[] args)<br/>\n    {<br/>\n        TestSuite suite = new TestSuite();<br/>\n        suite.addTestSuite(Identical.class);<br/>\n        junit.textui.TestRunner.run(suite);<br/>\n    }<br/>\n}<br/>\n<br/>\nThis time, the framework tells me that class Identical is not public.<br/>\nFair enough; make it public --- and of course, now the compiler tells<br/>\nme that it has to be in a file of its own.<br/>\n<br/>\nHm --- what about anonymous classes?  After all, the only method each<br/>\nconcrete test class provides is setUp() --- can I use:<br/>\n<br/>\n    suite.addTestSuite(new TestMethods() {<br/>\n        public void setUp()<br/>\n        {<br/>\n            ...set up instance variables...<br/>\n        }<br/>\n    });<br/>\n<br/>\nNope --- addTestSuite only takes a class argument, not an instance.<br/>\nWhat about double dispatch?  Can I have instances of the concrete test<br/>\nclasses add themselves to the suite?  Maybe, but I can&#39;t see a way to<br/>\ndo it...<br/>\n<br/>\nSo, at this point it looks like factoring out the common code<br/>\n(i.e. the four test cases for overlap) isn&#39;t going to work with jUnit<br/>\n(although it worked just fine with PyUnit --- I built this example in<br/>\nPython first, and it ran just fine).  Suggestions?<br/>\n<br/>\nThanks,<br/>\nGreg<br/>\n<br/>\n<br/>\n-----------------------------------------------------------------------------------------------------------------<br/>\nThe information contained in this message is confidential and is intended<br/>\nfor the addressee(s) only.  If you have received this message in error or<br/>\nthere are any problems please notify the originator immediately.  The <br/>\nunauthorised use, disclosure, copying or alteration of this message is <br/>\nstrictly forbidden. Baltimore Technologies plc will not be liable for<br/>\ndirect, special, indirect or consequential damages arising from alteration of the<br/>\ncontents of this message by a third party or as a result of any virus being <br/>\npassed on.<br/>\n <br/>\nThis footnote confirms that this email message has been swept for Content Security threats, including<br/>\ncomputer viruses.<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.baltimore.com\">http://www.baltimore.com</a><br/>\n<br/>\n <br/>\nThis footnote confirms that this email message has been swept by <br/>\nBaltimore MIMEsweeper for Content Security threats, including<br/>\ncomputer viruses.</div>", 
    "prevInTime": 6311, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1038364115", 
    "canDelete": false, 
    "nextInTopic": 6313, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDkzMEJCQ0E0Q0VCQkQ0MTFCRTY1MDA1MDhCQjMzMjhGNzk4MkI4QG5zYW1jYW5tczEuY2EuYmFsdGltb3JlLmNvbT4="
    }
}