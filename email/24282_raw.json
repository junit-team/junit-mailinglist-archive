{
    "numMessagesInTopic": 30, 
    "nextInTime": 24284, 
    "senderId": "tAcSKUP2ATFxqhgknya8gonUTJ9Ap5F-kzHlViujTvhi9mhWauLGhk-klm2YIMsmCOXvE0rslmJOicUF9Unf1GtAmS-bK4bq", 
    "systemMessage": true, 
    "subject": "Re: [junit] Re: Feedback requested: Impending changes to RunListener", 
    "from": "Kevin Cooney &lt;kcooney@...&gt;", 
    "authorName": "Kevin Cooney", 
    "msgSnippet": "... Interesting idea. It looks like Guice uses this strategy for @Nullable ( https://code.google.com/p/google-guice/wiki/UseNullable) That would require us to", 
    "msgId": 24282, 
    "rawEmail": "Return-Path: &lt;kcooney@...&gt;\r\nReceived: (qmail 350 invoked from network); 7 Feb 2013 13:39:01 -0000\r\nReceived: from unknown (10.193.84.150)\n  by m1.grp.bf1.yahoo.com with QMQP; 7 Feb 2013 13:39:01 -0000\r\nReceived: from unknown (HELO ng18-ip2.bullet.mail.bf1.yahoo.com) (98.139.165.158)\n  by mta2.grp.bf1.yahoo.com with SMTP; 7 Feb 2013 13:39:01 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=echoe; t=1360244341; bh=zpdrhTvshDpmUOjLc9XwebIfHsetyBRys9XY91hSQGQ=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Google-DKIM-Signature:X-Received:MIME-Version:X-Received:In-Reply-To:References:Date:Message-ID:To:X-Gm-Message-State:X-Originating-IP:X-eGroups-Msg-Info:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:Content-Type:Content-Transfer-Encoding:X-YGroups-SubInfo:Sender:X-Yahoo-Newman-Property:X-eGroups-Approved-By:X-eGroups-Auth; b=wh3nMcGNmevp1h8Q+FiykjJ04He2ENXAfhIWaSQhvJF58Y/bwtzr3mRk2NA0L3/cJYpY6NifN/7oJvCxhpMsHuE2hiE+BczOJFutU7Il9BfFEHN2zE6zMmk7bYAaOpMNPXR23S0Hfiawx9hwBV0+1UqQX5pRLTksEmqnq0swq7Q=\r\nReceived: from [98.139.164.126] by ng18.bullet.mail.bf1.yahoo.com with NNFMP; 07 Feb 2013 13:39:01 -0000\r\nReceived: from [10.193.94.43] by tg7.bullet.mail.bf1.yahoo.com with NNFMP; 07 Feb 2013 13:39:01 -0000\r\nX-Sender: kcooney@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 54506 invoked from network); 6 Feb 2013 19:23:56 -0000\r\nX-Received: from unknown (10.193.84.131)\n  by m9.grp.bf1.yahoo.com with QMQP; 6 Feb 2013 19:23:56 -0000\r\nX-Received: from unknown (HELO mail-ia0-f171.google.com) (209.85.210.171)\n  by mta4.grp.bf1.yahoo.com with SMTP; 6 Feb 2013 19:23:56 -0000\r\nX-Received: by mail-ia0-f171.google.com with SMTP id z13so2025072iaz.2\n        for &lt;junit@yahoogroups.com&gt;; Wed, 06 Feb 2013 11:23:56 -0800 (PST)\r\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=google.com; s=20120113;\n        h=x-received:mime-version:in-reply-to:references:from:date:message-id\n         :subject:to:content-type:x-gm-message-state;\n        bh=ba/WGig8HUuPNx3AU48HP6g8BqDTgrIz1vOLRI7m4Eo=;\n        b=M/bYwzPPkWsRK4whO0CRgJg2023VwsCQ2luY2e9nYf6HllnArzUbFeHwzuOl46g7CO\n         9symaVnvm5zklJdw3lY6FyZlMGDXV46BIyKG9KyTWsRj22RImWJeueAdMjP/I9vyK61e\n         tl05NOsxIM53/MA2QFGXn1g3uC+PModCu06CWPoYlP7HaBatq3opu3Dez2wULtpUmC3s\n         r0aUciwOwt8A7/JvzB4adjjFFij+zWLTTGTgIxc6rnmxK/0AfwSOEgFF4Gwz9ooE5bQo\n         7wOYxAyGyN9MsDjbvTgSWsoQowHISkrql7KHi8BHytKIw0UR4x8GVYq8IX3pgsh4MjzE\n         leuQ==\r\nX-Received: by 10.50.151.225 with SMTP id ut1mr8478565igb.110.1360178636128;\n Wed, 06 Feb 2013 11:23:56 -0800 (PST)\r\nMIME-Version: 1.0\r\nX-Received: by 10.43.12.195 with HTTP; Wed, 6 Feb 2013 11:23:26 -0800 (PST)\r\nIn-Reply-To: &lt;keu640+3qmm@...&gt;\r\nReferences: &lt;keu640+3qmm@...&gt;\r\nDate: Wed, 6 Feb 2013 11:23:26 -0800\r\nMessage-ID: &lt;CAA3E+eW2i+fD5S_y_YhKc0Ea9QN93Z4ag=uVO0SCUjH5sE+k=g@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-Gm-Message-State: ALoCoQluc8AxfJRQ2RxxWjZ0xaXtTw0wUuXgMcUty2VnRsRkzaF88rFXdfXfDRIrIZ34kOxkbBQ9EL6lum6Q8nXtAjitBJiVVXR6FgHP5ApZLUZnHU/h49RxyXU9SFHh4aurDJd8s9pt7S1DY3+8s4y/44cP443RbE8oIdQQt1Z38mLsl8JgH6YOsar4TBLxqi0gKrE54a0K\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Kevin Cooney &lt;kcooney@...&gt;\r\nSubject: Re: [junit] Re: Feedback requested: Impending changes to RunListener\r\nX-Yahoo-Group-Post: member; u=475263748; y=1twGBkZUaX10TIQ76SZQrSOltRZXcEurjmHUtKNSbiXIyh3cZWb_lxY8oloK18IxBpXhjO8zaSo_Fvs\r\nX-Yahoo-Profile: kevincooney2000\r\nContent-Type: text/plain\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 07 Feb 2013 13:38:59 -0000\r\n\r\nOn Wed, Feb 6, 2013 at 10:06 AM, sschroev &lt;stephan202@...&gt; wrote:\n\n&gt; =\r\n**\n&gt;\n&gt;\n&gt; I like the idea, a lot!\n&gt;\n&gt; But would like to ask that only the *s=\r\nimple name* of the annotation is\n&gt; considered, without regard for the packa=\r\nge in which it resides.\n&gt;\nInteresting idea.\n\nIt looks like Guice uses this =\r\nstrategy for @Nullable (\nhttps://code.google.com/p/google-guice/wiki/UseNul=\r\nlable)\n\nThat would require us to iterate through all of the class&#39;s annotat=\r\nions, vs\na simple getAnnotation() call, but listeners are not added and rem=\r\noved very\noften.\n\n&gt;  This way one can:\n&gt;\n&gt; 1. Use an alternative third-part=\r\ny annotation, such as\n&gt; javax.annotation.concurrent.ThreadSafe from librari=\r\nes like\n&gt; com.google.code.findbugs:jsr305:1.3.9 and\n&gt; com.google.code.findb=\r\nugs:annotations:2.0.1.\n&gt; 2. Define a private annotation, without adding _an=\r\ny_ additional dependency.\n&gt;\nAlternatively, we could add a JUnit-specific an=\r\nnotation (possibly named\n&quot;Concurrent&quot;) and you could annotate your class wi=\r\nth both annotations (ob\nmeme: http://www.quickmeme.com/meme/3svo5h/)\n\nOne r=\r\neservation I have with using @ThreadSafe is that usually the\njcip-annotatio=\r\nns documents behavior (sure, it is used by findbugs to find\npotential bugs,=\r\n but that&#39;s validation based on behavior documented in\nannotations). Here w=\r\ne are proposing using @ThreadSafe to modify behavior.\nSomeone might not exp=\r\nect by simply adding an annotation to a class they are\nchanging the behavio=\r\nr of code that uses instances of the class.\n\n&gt;\n&gt; I use javax.annotation.con=\r\ncurrent.ThreadSafe quite a lot in my own code,\n&gt; so (1) is quite important =\r\nfrom my perspective. There are precedents for\n&gt; this approach: IIRC, Eclips=\r\ne does something like this for variations on\n&gt; @Nullable and @Nonnull, wher=\r\neas (again, IIRC) Findbugs handles two\n&gt; instances of @SuppressWarnings.\n&gt;\n=\r\n&gt; Cheers,\n&gt; Stephan\n&gt;\n&gt;\n&gt; --- In junit@yahoogroups.com, Kevin Cooney wrote:=\r\n\n&gt; &gt;\n&gt; &gt; Hello, everyone\n&gt; &gt;\n&gt; &gt; Short version: we are thinking of adding a=\r\nn optional dependency from\n&gt; JUnit\n&gt; &gt; to jcip-annotations and are soliciti=\r\nng feedback.\n&gt; &gt;\n&gt; &gt; A few people have noticed that when you use ParallelCo=\r\nmputer, you got\n&gt; poor\n&gt; &gt; performance because calls to registered RunListe=\r\nners are synchronized. We\n&gt; &gt; would like to fix this in the next release of=\r\n JUnit.\n&gt; &gt;\n&gt; &gt; In order to prevent affecting existing users, we are propos=\r\ning having an\n&gt; &gt; annotation that can be added to RunListener implementatio=\r\nns that can\n&gt; safely\n&gt; &gt; be called concurrently from multiple threads. If a=\r\n RunListener passed to\n&gt; a\n&gt; &gt; RunNotifier is not annotated with this annot=\r\nation, JUnit will wrap it\n&gt; with\n&gt; &gt; a decorator that does synchronization.=\r\n\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; We would appreciate feedback on this new annotation.\n&gt; &gt;\n&gt; &gt; W=\r\ne have two options:\n&gt; &gt;\n&gt; &gt; a. Create our own annotation for this\n&gt; &gt; b. Us=\r\ne ThreadSafe (\n&gt; &gt;\n&gt; http://grepcode.com/file/repo1.maven.org/maven2/net.jc=\r\nip/jcip-annotations/1.0/net/jcip/annotations/ThreadSafe.java\n&gt; &gt; )\n&gt; &gt;\n&gt; &gt; =\r\nThe advantages to option b are:\n&gt; &gt;\n&gt; &gt; 1. It&#39;s a well-known annotation\n&gt; &gt;=\r\n 2. Users that use JUnit can add this annotation to their thread-safe\n&gt; &gt; R=\r\nunListener implementations today and get the benefits &quot;for free&quot; later.\n&gt; &gt;=\r\n\n&gt; &gt; Note we can do this without requiring that all users of JUnit have the=\r\n\n&gt; &gt; jcip-annotations jar in their classpath as of JDK 1.5.0_06 (see\n&gt; &gt;\n&gt; =\r\nhttp://stackoverflow.com/questions/3567413/why-doesnt-a-missing-annotation-=\r\ncause-a-classnotfoundexception-at-runtime\n&gt; ).\n&gt; &gt; If jcip-annotations is n=\r\not on the classpath then all RunListener\n&gt; &gt; implementations will be treate=\r\nd as not thread-safe.\n&gt; &gt;\n&gt; &gt; As a specific example, the Maven Surefire plu=\r\ngin would use this\n&gt; dependency\n&gt; &gt; and include jcip-annotations.\n&gt; &gt;\n&gt; &gt; C=\r\nurrently, JUnit only depends on one third-party library (Hamcrest). This\n&gt; =\r\n&gt; has caused us some pain in the past when the Hamcrest code changed in\n&gt; w=\r\nays\n&gt; &gt; that broke existing users of JUnit. We believe this will not be an =\r\nissue\n&gt; &gt; with jcip-annotations because the JAR only contains annotations, =\r\nnot any\n&gt; &gt; code.\n&gt; &gt;\n&gt; &gt; One possible concern would be with other open sou=\r\nrce libraries that\n&gt; provide\n&gt; &gt; RunListener implementations (they would ne=\r\ned to add jcip-annotations to\n&gt; &gt; their compile-time classpath if they have=\r\n thread-safe annotations, and\n&gt; &gt; document this to their users).\n&gt; &gt;\n&gt; &gt; Th=\r\noughts?\n&gt; &gt;\n&gt; &gt; -- Kevin\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; [Non-text portions of this message hav=\r\ne been removed]\n&gt; &gt;\n&gt;\n&gt;  \n&gt;\n\n\n[Non-text portions of this message have been =\r\nremoved]\n\n\n", 
    "profile": "kevincooney2000", 
    "topicId": 24274, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 475263748, 
    "prevInTime": 24281, 
    "contentTrasformed": false, 
    "postDate": "1360178606", 
    "canDelete": false, 
    "nextInTopic": 24287, 
    "prevInTopic": 24280, 
    "headers": {
        "inReplyToHeader": "PGtldTY0MCszcW1tQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBQTNFK2VXMmkrZkQ1U195X1loS2MwRWE5UU45M1o0YWc9dVZPMFNDVWpINXNFK2s9Z0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGtldTY0MCszcW1tQGVHcm91cHMuY29tPg=="
    }
}