{
    "numMessagesInTopic": 14, 
    "nextInTime": 3517, 
    "senderId": "isc7A2e6B9bUa8A_BrFIYd3V01OXdm-2PxQGmkuUKkOXqu61Wa0IPmKr6RMwGseEZ7WiU58-A6XM7LszmneHXm5i60jSb0_MVJAUyaBvHPQxolrI", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing Static class behavior", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "Thomas: A simple solution: don t make this a singleton. Open up the constructor (make it public); it should probably just have some dummy data. Maybe even make", 
    "msgId": 3516, 
    "rawEmail": "Return-Path: &lt;jbr@...&gt;\r\nX-Sender: jbr@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_1_2); 10 Dec 2001 23:31:17 -0000\r\nReceived: (qmail 14086 invoked from network); 10 Dec 2001 23:31:17 -0000\r\nReceived: from unknown (216.115.97.171)\n  by m9.grp.snv.yahoo.com with QMQP; 10 Dec 2001 23:31:17 -0000\r\nReceived: from unknown (HELO tomts6-srv.bellnexxia.net) (209.226.175.26)\n  by mta3.grp.snv.yahoo.com with SMTP; 10 Dec 2001 23:31:17 -0000\r\nReceived: from diasparsoftware.com ([216.209.97.159])\n          by tomts6-srv.bellnexxia.net\n          (InterMail vM.4.01.03.16 201-229-121-116-20010115) with ESMTP\n          id &lt;20011210233111.CAOC20994.tomts6-srv.bellnexxia.net@...&gt;\n          for &lt;junit@yahoogroups.com&gt;; Mon, 10 Dec 2001 18:31:11 -0500\r\nMessage-ID: &lt;3C15460A.5030409@...&gt;\r\nDate: Mon, 10 Dec 2001 18:32:26 -0500\r\nUser-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:0.9.2) Gecko/20010726 Netscape6/6.1\r\nX-Accept-Language: en-us\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] Testing Static class behavior\r\nReferences: &lt;003b01c18101$84711b40$93ee44d4@plop&gt; &lt;3C13E8D0.67A2860@...&gt; &lt;00ee01c1816c$69074620$93ee44d4@plop&gt;\r\nContent-Type: multipart/related;\n boundary=&quot;------------000206010406030800040207&quot;\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;\r\nX-Yahoo-Group-Post: member; u=89240252\r\nX-Yahoo-Profile: nails762\r\n\r\n\r\n--------------000206010406030800040207\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\n\r\nThomas:\n\nA simple solution: don&#39;t make this a singleton. Open up the constructor \n(make it public); it should probably just have some dummy data. Maybe \neven make a constructor that takes a Map of pre-populated database \nobjects, just for testing.\n\nIf your application needs only one DataServer, then let the application \ncreate an instance and hang onto it in a toolbox. Nobody else cares how \nmany instances of the DataServer there are, because your application \nwill simply talk to the one in its toolbox.\n\nIf you have components that shouldn&#39;t be talking to the application \ntoolbox to get a Data object, then see if you can change the design so \nthat the application hands Data objects to the components instead. \nSimply sit on the other side of the table and get a new view. You might \nprefer the view from that side. :)\n\nJBR.\n\nPS: If you still think this object should be a singleton, I want you to \nprove to me in this group that your singleton passes my criteria for \n&quot;when it really is a singleton&quot;. :)\n\nThomas SMETS wrote:\n\n&gt; hi Mike,\n&gt;\n&gt; Like often I can only thank you.\n&gt;\n&gt; I dived into the article.\n&gt;\n&gt; Just a word on the usage I make of the Singelton Pattern.\n&gt;\n&gt; The Developper assignement I received is the one of the airlain \n&gt; reservation ticket. The DataBase should serve multiple-clients.\n&gt;\n&gt; Without altering the source code of the constructor provided, I added \n&gt; the following factory :\n&gt;\n&gt;  \n&gt;\n&gt; &lt;code&gt;\n&gt;\n&gt;   public static Data getDatabase(String aDBName)\n&gt;     throws IOException,\n&gt;             DatabaseException\n&gt;   {\n&gt;     // First find the absolute path of the file.\n&gt;     File f = new File(aDBName);\n&gt;     aDBName = f.getAbsolutePath ();\n&gt;     Data db = null;\n&gt;    \n&gt;     // Check if we still have a reference to\n&gt;     // the DB in the HashpMap\n&gt;     synchronized(DataBaseReferenced)\n&gt;     {\n&gt;       if (DataBaseReferenced.containsKey (aDBName))\n&gt;       {\n&gt;         db = (Data)DataBaseReferenced.get (aDBName);\n&gt;         if (db != null)\n&gt;           return db;\n&gt;       }\n&gt;      \n&gt;       db = new Data(aDBName);\n&gt;       DataBaseReferenced.put (aDBName, db);     \n&gt;     } // End of synchronized element\n&gt;    \n&gt;     return db;\n&gt;   }\n&gt;\n&gt; &lt;/code&gt;\n&gt;\n&gt;  \n&gt;\n&gt; where the Key (should be a primary key) is the file name (absolute \n&gt; path). The DataBaseReferenced is in fact a WeakHashMap with the Data \n&gt; Object being stored as the value - Object.\n&gt;\n&gt;  \n&gt;\n&gt; Any comment on the Pattern used, is most appreciated.\n&gt;\n&gt;  \n&gt;\n&gt; Thomas,\n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;  \n&gt;\n&gt;     ----- Original Message -----\n&gt;\n&gt;     From:Mike Clark &lt;mailto:mike@...&gt;\n&gt;\n&gt;     To: junit@yahoogroups.com &lt;mailto:junit@yahoogroups.com&gt;\n&gt;\n&gt;     Sent: Sunday, December 09, 2001 11:42 PM\n&gt;\n&gt;     Subject: Re: [junit] Testing Static class behavior\n&gt;\n&gt;\n&gt;     Thomas SMETS wrote:\n&gt;\n&gt;     &gt; Hi,\n&gt;     &gt; I&#39;m currently testing a Class behavior onto which the\n&gt;     &gt; Factory (getInstance(param1, param2, ...)) is playing a crucial\n&gt;     role.\n&gt;     &gt; That is the class has some sort of a Singelton pattern where\n&gt;     existing\n&gt;     &gt; reference for the singelton factory are used to determine if a\n&gt;     reference to\n&gt;     &gt; a particula instance already exists.\n&gt;     &gt;\n&gt;     &gt; I therefore would need to regerister the class to have the static\n&gt;     &gt; variablebeing re-initialized. I there something in Java ?\n&gt;     &gt;\n&gt;\n&gt;     Hi Thomas,\n&gt;\n&gt;     Depending on the implementation of the singleton you&#39;re attempting\n&gt;     to test, it\n&gt;     may be possible to obtain a reference to its sole instance (or\n&gt;     instances) and\n&gt;     assign it a null value.  If the implementation uses lazy\n&gt;     initialization, this\n&gt;     may trigger reinitialization on the next invocation of getInstance().\n&gt;\n&gt;     If you haven&#39;t already read J.B. Rainsberger&#39;s article on the use and\n&gt;     testability of singletons, I highly recommend it:\n&gt;\n&gt;        \n&gt;     http://www-106.ibm.com/developerworks/webservices/library/co-single.html\n&gt;\n&gt;\n&gt;     In general, singletons are often overused and can be difficult to\n&gt;     test, and\n&gt;     J.B.&#39;s article offers some practical alternatives.\n&gt;\n&gt;     Regards,\n&gt;\n&gt;     Mike\n&gt;\n&gt;     --\n&gt;     Mike Clark\n&gt;     Clarkware Consulting, Inc.\n&gt;     http://www.clarkware.com\n&gt;     720.851.2014\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;     To unsubscribe from this group, send an email to:\n&gt;     junit-unsubscribe@yahoogroups.com\n&gt;\n&gt;\n&gt;     Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;     Service &lt;http://docs.yahoo.com/info/terms/&gt; .\n&gt;\n&gt;\n&gt; Yahoo! Groups Sponsor\n&gt; ADVERTISEMENT\n&gt; &lt;http://rd.yahoo.com/M=178320.1681224.3270152.1261774/D=egroupweb/S=1705007181:HM/A=879171/R=0/*http://www.fastweb.com/ib/yahoo-57f&gt; \n&gt;\n&gt;\n&gt;\n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;\n&gt;\n&gt; Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service \n&gt; &lt;http://docs.yahoo.com/info/terms/&gt; .\n\n\n\r\n--------------000206010406030800040207--\r\n\n", 
    "profile": "nails762", 
    "topicId": 3503, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "prevInTime": 3515, 
    "contentTrasformed": false, 
    "postDate": "1008027146", 
    "canDelete": false, 
    "nextInTopic": 3517, 
    "prevInTopic": 3515, 
    "headers": {
        "messageIdInHeader": "PDNDMTU0NjBBLjUwMzA0MDlAZGlhc3BhcnNvZnR3YXJlLmNvbT4=", 
        "referencesHeader": "PDAwM2IwMWMxODEwMSQ4NDcxMWI0MCQ5M2VlNDRkNEBwbG9wPiA8M0MxM0U4RDAuNjdBMjg2MEBjbGFya3dhcmUuY29tPiA8MDBlZTAxYzE4MTZjJDY5MDc0NjIwJDkzZWU0NGQ0QHBsb3A+"
    }
}