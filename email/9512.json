{
    "numMessagesInTopic": 8, 
    "nextInTime": 9513, 
    "senderId": "ylz3GcLJ2isOgMt70I6zfgq-Iv9WbJu5dQFBRjpmepkBUjsgTUv32yEdCiMhF2yrEAFT9MCm42WKaCTZMRgQ95Bm56G77AkD3YmEORSsvg", 
    "systemMessage": false, 
    "subject": "RE: [junit] How to test threaded method?", 
    "from": "Kanstren Teemu &lt;teemu.kanstren@...&gt;", 
    "authorName": "Kanstren Teemu", 
    "msgSnippet": "If you can access the thread that should finish, how about the Thread.join method? ... From: Kris Henderson To: junit@yahoogroups.com Sent: 9/26/2003 2:14 AM ", 
    "msgId": 9512, 
    "profile": "kibaltsis", 
    "topicId": 9506, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 160980551, 
    "messageBody": "<div id=\"ygrps-yiv-1032502406\">If you can access the thread that should finish, how about the Thread.join<br/>\nmethod? <br/>\n<br/>\n-----Original Message-----<br/>\nFrom: Kris Henderson<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSent: 9/26/2003 2:14 AM<br/>\nSubject: [junit] How to test threaded method?<br/>\n<br/>\nI have a method that when called creates a thread and does all its work<br/>\nin the new thread.  It looks kind of like this:<br/>\n<br/>\npublic void doSomething()<br/>\n{<br/>\n    Thread requestThread = new Thread()<br/>\n    {<br/>\n        public void run()<br/>\n        {<br/>\n            fireStartEvent();<br/>\n<br/>\n            //do some stuff that takes a long time<br/>\n<br/>\n            fireDoneEvent();<br/>\n        }<br/>\n    };<br/>\n    requestThread.start();<br/>\n}<br/>\n<br/>\nI would like to test this method to make sure it sends the correct<br/>\nevents in the correct order and that the EventObject contains the<br/>\ncorrect data.<br/>\n<br/>\nSo I wrote a test that looks like this:<br/>\n<br/>\n<br/>\npublic void testDoSomething()<br/>\n{<br/>\n    m_eventCount = 0;<br/>\n    final MockService service = new MockService();<br/>\n    service.addOperationListener(new OperationAdapter()<br/>\n    {<br/>\n        public void operationUpdate(OperationEvent event)<br/>\n        {<br/>\n            m_eventCount += 1;<br/>\n        }<br/>\n    });<br/>\n        <br/>\n    service.doSomething();<br/>\n                <br/>\n    assertEquals(2, m_eventCount);<br/>\n}<br/>\n<br/>\nMy test fails because it reaches the assertEquals before all the events<br/>\ncan be fired.  If I add a call to Thread.sleep after the call to<br/>\ndoSomething() then the test succeeds.  Does anyone know a better way to<br/>\ntest this so I don&#39;t have to add a call to Thread.sleep?<br/>\n<br/>\nThanks,<br/>\nKris<br/>\n<br/>\n<br/>\nTo unsubscribe from this group, send an email to:<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n <br/>\n<br/>\nYour use of Yahoo! Groups is subject to<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> <br/>\n<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 9511, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1064575969", 
    "canDelete": false, 
    "nextInTopic": 9515, 
    "prevInTopic": 9511, 
    "headers": {
        "messageIdInHeader": "PDBDM0QwNzEyREEyMkQ2MTE4NTE0MDAwOEM3QzlCQUVDMDQxMzJEQGphZ3Vhci5lbGJpdC5maT4="
    }
}