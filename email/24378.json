{
    "numMessagesInTopic": 3, 
    "nextInTime": 24379, 
    "senderId": "Ej2akVK7j9IT9kfu0_akKDxi3oZSHFcmIwLK2wITiPvTIEODcLDMmVb99-rzkmgYC_SIPaJpYA-4s3YcdbBgFmNeKVQOaHio4Rv7bA", 
    "systemMessage": false, 
    "subject": "JUnit 4.12 issue when using theory + enum type + DataPoint that contains a null", 
    "from": "&quot;willmcqueen&quot; &lt;willmcqueen@...&gt;", 
    "authorName": "willmcqueen", 
    "msgSnippet": "Hi, I have a Theory with a parameter list that includes a String, a boolean, and an enum. The latter 2 should be automatically assigned and should not need any", 
    "msgId": 24378, 
    "profile": "willmcqueen", 
    "topicId": 24378, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 125879749, 
    "messageBody": "<div id=\"ygrps-yiv-1663127502\">Hi,<br/>\n<br/>\nI have a Theory with a parameter list that includes a String, a boolean, and an enum. The latter 2 should be automatically assigned and should not need any explicit @DataPoint declaration (per the release note description below. When I run the test, the enum param is assigned the null value instead of being assigned each value of the enum, and I&#39;m not sure why this is not working for me. I would appreciate any help you can offer, please.<br/>\n<br/>\nI cloned master from here:<br/>\n<br/>\n     <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit\">https://github.com/junit-team/junit</a><br/>\n<br/>\n...and looked at the JUnit 4.12 release notes:<br/>\n<br/>\n     <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit/wiki/4.12-release-notes\">https://github.com/junit-team/junit/wiki/4.12-release-notes</a><br/>\n<br/>\n...and scrolled-down to pull request #654 which says:<br/>\n<br/>\n&quot;Any theory method parameters with boolean or enum types that can&#39;t be supplied with values by any other sources will be automatically supplied with default values: true and false, or every value of the given enum. If other explicitly defined values are available (e.g. from a specified ParameterSupplier or some DataPoints method in the theory class), only those explicitly defined values will be used.&quot;<br/>\n<br/>\nOn that same release notes page, I also see the comment under pull request #549, which says that a @DataPoint-annotated array field can contain null values.<br/>\n<br/>\nSo here&#39;s my test:<br/>\n<br/>\nimport org.junit.experimental.theories.DataPoints;<br/>\nimport org.junit.experimental.theories.Theories;<br/>\nimport org.junit.experimental.theories.Theory;<br/>\nimport org.junit.runner.RunWith;<br/>\n<br/>\n<br/>\n@RunWith(Theories.class)<br/>\npublic class QuickTest {<br/>\n<br/>\n  @DataPoints<br/>\n  public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;, null};<br/>\n<br/>\n  public static enum JDKS {<br/>\n    JDK6,<br/>\n    JDK7,<br/>\n  }<br/>\n<br/>\n  @Theory<br/>\n  public void testFoo(String platform, boolean truth, JDKS j) throws Exception {<br/>\n    System.out.println(platform + &quot;:&quot; + truth + &quot;:&quot; + j);<br/>\n  }<br/>\n<br/>\n}<br/>\n<br/>\n...and here&#39;s the output:<br/>\nwindows:true:null<br/>\nwindows:false:null<br/>\nlinux:true:null<br/>\nlinux:false:null<br/>\nnull:true:null<br/>\nnull:false:null<br/>\n<br/>\n...which is not what I expected... I expected the 3rd value to be JDK6 or JDK7. I run a 2nd test, but this time I remove the null array element from the &#39;platforms&#39; field, and the results are expected:<br/>\n<br/>\nimport org.junit.experimental.theories.DataPoints;<br/>\nimport org.junit.experimental.theories.Theories;<br/>\nimport org.junit.experimental.theories.Theory;<br/>\nimport org.junit.runner.RunWith;<br/>\n<br/>\n<br/>\n@RunWith(Theories.class)<br/>\npublic class QuickTest {<br/>\n<br/>\n  @DataPoints<br/>\n  public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;};<br/>\n<br/>\n  public static enum JDKS {<br/>\n    JDK6,<br/>\n    JDK7,<br/>\n  }<br/>\n<br/>\n  @Theory<br/>\n  public void testFoo(String platform, boolean truth, JDKS j) throws Exception {<br/>\n    System.out.println(platform + &quot;:&quot; + truth + &quot;:&quot; + j);<br/>\n  }<br/>\n<br/>\n}<br/>\n<br/>\n<br/>\n...which results in:<br/>\nwindows:true:JDK6<br/>\nwindows:true:JDK7<br/>\nwindows:false:JDK6<br/>\nwindows:false:JDK7<br/>\nlinux:true:JDK6<br/>\nlinux:true:JDK7<br/>\nlinux:false:JDK6<br/>\nlinux:false:JDK7<br/>\n<br/>\nCool. But now just for fun, I remove the &#39;platform&#39; param from testFoo and I restore the null array element to &#39;platforms&#39; field. Since there is no longer any String param in the param list (and since String is a final class so there&#39;s no possibility of an assignable subclass), I expect that the &#39;platforms&#39; DataPoint will just be silently ignored and I would get the expected output. But I actually see the unexpected output, as if a null array element that exists in a field (that&#39;s not even used in the Theory&#39;s param list) is affecting the values of a totally different type, the enum type (causing the enum param to receive only a null value):<br/>\n<br/>\nimport org.junit.experimental.theories.DataPoints;<br/>\nimport org.junit.experimental.theories.Theories;<br/>\nimport org.junit.experimental.theories.Theory;<br/>\nimport org.junit.runner.RunWith;<br/>\n<br/>\n<br/>\n@RunWith(Theories.class)<br/>\npublic class QuickTest {<br/>\n<br/>\n  @DataPoints<br/>\n  public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;, null};<br/>\n<br/>\n  public static enum JDKS {<br/>\n    JDK6,<br/>\n    JDK7,<br/>\n  }<br/>\n<br/>\n  @Theory<br/>\n  public void testFoo(boolean truth, JDKS j) throws Exception {<br/>\n    System.out.println(truth + &quot;:&quot; + j);<br/>\n  }<br/>\n<br/>\n}<br/>\n<br/>\n...which results in:<br/>\ntrue:null<br/>\nfalse:null<br/>\n<br/>\n<br/>\nMaybe I&#39;m missing something?<br/>\n<br/>\nThank  you.<br/>\n<br/>\nCheers,<br/>\nWill</div>", 
    "prevInTime": 24377, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1367456385", 
    "canDelete": false, 
    "nextInTopic": 24380, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGtsc2RxMStlcWtpQGVHcm91cHMuY29tPg=="
    }
}