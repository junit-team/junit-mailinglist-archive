{
    "topicId": 1308, 
    "postDate": "991411467", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Matt Caswell &lt;m.caswell@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "fvAh8oBfb55WmuTJ0yDWIIQTou8DEcNqScbAftjACT__FIkpEymsB4BPnRj2MsWHgs99KueEC0JJGUyVGsRTvipozzt37c90Oj_d4VnU4g", 
    "nextInTime": 1371, 
    "userId": 0, 
    "prevInTime": 1369, 
    "prevInTopic": 1367, 
    "headers": {
        "messageIdInHeader": "PDI5Qzg0Q0YyNUQwM0Q1MTE5RkNGMDA5MDI3QjY3QjVBNzQwNzZEQEVYQ0hBTkdFMT4="
    }, 
    "authorName": "Matt Caswell", 
    "numMessagesInTopic": 17, 
    "msgSnippet": "This would work for a single test case. However the problem occurs when running a TestSuite, i.e. you want to execute a TestCase for real B, you then want to", 
    "contentTrasformed": false, 
    "msgId": 1370, 
    "nextInTopic": 1373, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;matt.caswell@...&gt;\r\nX-Sender: matt.caswell@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_1_3); 1 Jun 2001 16:05:38 -0000\r\nReceived: (qmail 19900 invoked from network); 1 Jun 2001 16:04:30 -0000\r\nReceived: from unknown (10.1.10.27) by l8.egroups.com with QMQP; 1 Jun 2001 16:04:30 -0000\r\nReceived: from unknown (HELO relay1.hughesrae.co.uk) (212.126.105.136) by mta2 with SMTP; 1 Jun 2001 16:04:29 -0000\r\nReceived: from exchange1.hughesrae.co.uk (mail.hughesrae.co.uk [10.121.202.3]) by relay1.hughesrae.co.uk (8.11.2/8.11.2) with ESMTP id f51G6Zw01851 for &lt;junit@yahoogroups.com&gt;; Fri, 1 Jun 2001 17:06:36 +0100\r\nReceived: by EXCHANGE1 with Internet Mail Service (5.5.2653.19) id &lt;LBPBQXQG&gt;; Fri, 1 Jun 2001 17:04:28 +0100\r\nMessage-ID: &lt;29C84CF25D03D5119FCF009027B67B5A74076D@EXCHANGE1&gt;\r\nTo: &quot;&#39;junit@yahoogroups.com&#39;&quot; &lt;junit@yahoogroups.com&gt;\r\nSubject: RE: [junit] Method Chains, was Re: Testing private methods\r\nDate: Fri, 1 Jun 2001 17:04:27 +0100 \r\nMIME-Version: 1.0\r\nX-Mailer: Internet Mail Service (5.5.2653.19)\r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nX-eGroups-From: Matt Caswell &lt;matt.caswell@...&gt;\r\nFrom: Matt Caswell &lt;m.caswell@...&gt;\r\n\r\nThis would work for a single test case. However the problem occurs when\nrunning a TestSuite, i.e. you want to execute a TestCase for real B, you\nthen want to execute a TestCase for A that uses mock B.\n\nMatt\n \n \nMatt Caswell \nJava Team Leader, Morse Hughes Rae \nTel: +44 (0)1332 826116 Fax: +44 (0)1332 826044\nMobile: 07887 620205 \n&lt;http://www.morse.com/&gt; www.morse.com \n_____ \nThis email and any attachments are confidential and are intended only for \nthe addressee. If you are not the intended recipient of this email and have \nreceived it in error, please notify the sender immediately by reply email \nand then delete it from your system. \n\n\n&gt; -----Original Message-----\n&gt; From: Mike Clark [mailto:mike@...]\n&gt; Sent: 01 June 2001 15:51\n&gt; To: junit@yahoogroups.com\n&gt; Subject: Re: [junit] Method Chains, was Re: Testing private methods\n&gt; \n&gt; \n&gt; Just an observation, but it seems that option 6 could be \n&gt; achieved simply \n&gt; by placing the mock classes in a separate, but parallel, package \n&gt; directory structure as the &quot;real&quot; classes and then placing the mock \n&gt; directory structure ahead of the real directory structure in \n&gt; the CLASSPATH.\n&gt; \n&gt; For example...\n&gt; \n&gt;    /projects/src/com/xyz/\n&gt;    /projects/src/mock/com/xyz/\n&gt; \n&gt; CLASSPATH=/projects/src/mock:/projects/src\n&gt; \n&gt;  From the perspective of the classloader, the mock objects *are* the \n&gt; real objects.\n&gt; \n&gt; Mike\n&gt; \n&gt; -- \n&gt; Mike Clark\n&gt; Clarkware Consulting, Inc.\n&gt; Custom Software Architecture, Design,\n&gt; Development, and Performance Consulting\n&gt; http://www.clarkware.com\n&gt; \n&gt; Matt Caswell wrote:\n&gt; \n&gt; &gt; Very interesting. It seems to me that you could use 1-5 in certain\n&gt; &gt; circumstances. However I think I would be reluctant to \n&gt; change the way my\n&gt; &gt; code was implemented just so that I could test it, as some \n&gt; of the other\n&gt; &gt; posts on this topic have suggested you should do. Option 6 \n&gt; looks like it\n&gt; &gt; could have a lot of potential - I would think it would work \n&gt; in almost all\n&gt; &gt; scenarios without requiring that you write your \n&gt; implementation code in a\n&gt; &gt; specifc way. I agree - it definately looks like a fun thing \n&gt; to try and do!\n&gt; &gt; \n&gt; &gt; Matt\n&gt; &gt; \n&gt; &gt; -----Original Message-----\n&gt; &gt; From: ghouston@...\n&gt; &gt; To: junit@yahoogroups.com\n&gt; &gt; Sent: 01/06/01 14:41\n&gt; &gt; Subject: [junit] Method Chains, was Re: Testing private methods\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; There are several was to get Mock objects into your production code:\n&gt; &gt; \n&gt; &gt; 1. Parameters \n&gt; &gt; \n&gt; &gt; As Mr Freeman shows, you use parameters to pass the Mock into the \n&gt; &gt; class that calls it.\n&gt; &gt; \n&gt; &gt; 2 Reflection\n&gt; &gt; \n&gt; &gt; If B is referenced in a field of A, you can use reflection \n&gt; to modify \n&gt; &gt; A and replace B with it&#39;s Mock.\n&gt; &gt; \n&gt; &gt; 3 Mole Pattern\n&gt; &gt; \n&gt; &gt; Subclass A, and use the subclass to setup the Mock.  [I call this \n&gt; &gt; design the &quot;Mole Pattern&quot;]\n&gt; &gt; \n&gt; &gt; 4 Strategy Pattern\n&gt; &gt; \n&gt; &gt; Use a Strategy design pattern.\n&gt; &gt; \n&gt; &gt; 5 Dynamic Proxy\n&gt; &gt; \n&gt; &gt; If the B is an implementation of an Interface, you can use \n&gt; a Dynamic \n&gt; &gt; Proxy (new feature of Java 1.3b).  The Mock would be an \n&gt; &gt; InvocationHandler, instead of a twin of B.\n&gt; &gt; \n&gt; &gt; 6 Classloader\n&gt; &gt; \n&gt; &gt; Use a classloader to load the Mock instead of the real class.\n&gt; &gt; \n&gt; &gt; ---\n&gt; &gt; \n&gt; &gt; There may be other options, but these are the ones I&#39;ve heard of.  \n&gt; &gt; Personally, I&#39;ve used everything except #6.  Options #1 \n&gt; (parameters) \n&gt; &gt; and #2 (reflection) are my favorites.  They are usually the easiest \n&gt; &gt; to implement and understand.  For #2, I&#39;ve used the \n&gt; &gt; PrivilegedAccessor.java [posted by Mr DiIorio] to make the \n&gt; reflection \n&gt; &gt; work simple.\n&gt; &gt; \n&gt; &gt; I&#39;ve never seen anyone use #6 (classloaders), I think it \n&gt; would be fun \n&gt; &gt; to try.\n&gt; &gt; \n&gt; &gt; - Greg\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; --- In junit@y..., &quot;Steve Freeman&quot; &lt;steve@m...&gt; wrote:\n&gt; &gt; \n&gt; &gt;&gt; RE: Method Chains, was Re: Testing private methodsAlternatively, \n&gt; &gt;&gt; change from:\n&gt; &gt;&gt; \n&gt; &gt;&gt; public class A {\n&gt; &gt;&gt;   public void f() {\n&gt; &gt;&gt;     b = new B();\n&gt; &gt;&gt;     b.doSomething();\n&gt; &gt;&gt;   }\n&gt; &gt;&gt; }\n&gt; &gt;&gt; \n&gt; &gt;&gt; to:\n&gt; &gt;&gt; \n&gt; &gt;&gt; public class A {\n&gt; &gt;&gt;   public void f(B b) {\n&gt; &gt;&gt;     b.doSomething(aValue());\n&gt; &gt;&gt;   }\n&gt; &gt;&gt; }\n&gt; &gt;&gt; \n&gt; &gt;&gt; The test then becomes:\n&gt; &gt;&gt; \n&gt; &gt;&gt; public class TestA {\n&gt; &gt;&gt;   public void testF() {\n&gt; &gt;&gt;     A anA = new A(aValue);\n&gt; &gt;&gt;     MockB mockB = new MockB();\n&gt; &gt;&gt;     mockB.setExpectedSomething(aValue);\n&gt; &gt;&gt; \n&gt; &gt;&gt;     a.f(mockB);\n&gt; &gt;&gt; \n&gt; &gt;&gt;     mockB.verify();\n&gt; &gt;&gt;   }\n&gt; &gt;&gt; }\n&gt; &gt;&gt; \n&gt; &gt;&gt; We have found that changing to a style where you pass behaviours \n&gt; &gt; \n&gt; &gt; around, rather than data, avoids things like subclassing production \n&gt; &gt; code in a test and pushes the code to flexing in the &#39;right&#39; kinda \n&gt; &gt; ways. If you can figure out what to pass in and what to \n&gt; verify, then \n&gt; &gt; the rest of the test usually falls out.\n&gt; &gt; \n&gt; &gt;&gt; Steve\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; To unsubscribe from this group, send an email to:\n&gt; &gt; junit-unsubscribe@yahoogroups.com\n&gt; &gt;  \n&gt; &gt; \n&gt; &gt; Your use of Yahoo! Groups is subject to\n&gt; &gt; http://docs.yahoo.com/info/terms/ \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; To unsubscribe from this group, send an email to:\n&gt; &gt; junit-unsubscribe@yahoogroups.com\n&gt; &gt;  \n&gt; &gt; \n&gt; &gt; Your use of Yahoo! Groups is subject to \n&gt; http://docs.yahoo.com/info/terms/ \n&gt; \n&gt; \n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;  \n&gt; \n&gt; Your use of Yahoo! Groups is subject to \n&gt; http://docs.yahoo.com/info/terms/ \n&gt; \n&gt; \n\n", 
    "subject": "RE: [junit] Method Chains, was Re: Testing private methods"
}