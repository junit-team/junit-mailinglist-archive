{
    "numMessagesInTopic": 2, 
    "nextInTime": 10817, 
    "senderId": "WCpX-O6Vr22zlecaZdh5JjFdo7ColFZ9ZE7SFTLDbrhYk9eqXtB3kAiPvdbFkjVDwCF_Chj3_dpKLdmAtgbI_j2CipU", 
    "systemMessage": false, 
    "subject": "confused about database dependent tests", 
    "from": "&quot;mbil_99&quot; &lt;mbil_99@...&gt;", 
    "authorName": "mbil_99", 
    "msgSnippet": "Hi! Being very new to unit testing and TestDrivenDevelopment, Im having a conceptual problem (mental block) putting things together (and might get cleared up", 
    "msgId": 10816, 
    "profile": "mbil_99", 
    "topicId": 10816, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 103489341, 
    "messageBody": "<div id=\"ygrps-yiv-958887844\">Hi! Being very new to unit testing and TestDrivenDevelopment, Im<br/>\nhaving a conceptual problem (mental block) putting things together<br/>\n(and might get cleared up by my just writing this out, in which case<br/>\nyou won&#39;t be reading this ;-). Im hoping someone can hand hold me<br/>\nthrough my problem:<br/>\n<br/>\nThe business domain problem Im trying to solve is simple:<br/>\nIf &quot;Customer&quot;&#39;s last &quot;Order&quot; was greater than $100,<br/>\n    then record the fact that they are eligible to receive a gift<br/>\n    with their next order.<br/>\n<br/>\nSo I start out with a new class, say GiftManager and start out with 2<br/>\ntests:<br/>\n<br/>\n/* is a Customer eligible to get a Gift? */<br/>\npublic void testGiftEligibility() {<br/>\n    GiftManager GM = new GiftManager();<br/>\n    Customer customer = new Customer(&quot;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:joe@...\">joe@...</a>&quot;);<br/>\n    assertTrue(GM.eligibleForGift(customer));<br/>\n}<br/>\n<br/>\n/* add Gift to customer */<br/>\npublic void testAddGift() {<br/>\n    GiftManager GM = new GiftManager();<br/>\n    Customer customer = new Customer(&quot;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:joe@...\">joe@...</a>&quot;);<br/>\n    GM.addGift(customer);<br/>\n    assertTrue(customer.getGift());<br/>\n}<br/>\n<br/>\nSo for the first test to succeed we need a &quot;Customer&quot; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:joe@...\">joe@...</a><br/>\nand that customer needs to have associated with it &quot;Order&quot;s where the<br/>\nlast order was greater than $100. Now since you can&#39;t tie this test<br/>\nto an actual customer (the test would fail and pass over time<br/>\ndepending on customers last order), here is where you would use Mock<br/>\nobjects to create a fake customer with mock orders where last order is<br/>\ngreater than $100. All well and good.<br/>\n<br/>\nBut what do I do about test 2? Here is where my head is all muddled<br/>\nand I don&#39;t know what I want:<br/>\n<br/>\nSo Im coding this new requirement where I want to record if some<br/>\ncustomer has a gift associated with them or not.<br/>\nIm doing test first development, I&#39;ve coded the interface I want to<br/>\nuse in the test, and the whole point of testing this is to rest<br/>\nassured that I can &quot;addGift()&quot; to a customer correctly, in other words<br/>\nI want to rest assured that I&#39;ve __implemented__ &quot;addGift()&quot; correctly.<br/>\n<br/>\nI decide Im going to create a new table in the database something as<br/>\nsimple as customer_gift which has a customer_id and a gift_id<br/>\nand addGift( customer ) will create a Gift object and then create a<br/>\nrecord in this table with the respective customer_id and associated<br/>\ngift_id.<br/>\nSo addGift() will write to the database and<br/>\ncustomer.getGift() will be implemented to read the said data from the<br/>\ndatabase.<br/>\nSo what do I do here, create a fake Customer in the production db?<br/>\n(Ideally have a test db where this isn&#39;t a problem?) Maybe create a<br/>\nfake customer on test setup and then clean it out during teardown? If<br/>\nmy test breaks I may be littering fake data in the real db.<br/>\nWhats the strategy to use here?<br/>\nHelp!<br/>\n<br/>\n<br/>\nthanks,<br/>\nmbil</div>", 
    "prevInTime": 10815, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1081460018", 
    "canDelete": false, 
    "nextInTopic": 10823, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGM1NGdmaSszbHZwQGVHcm91cHMuY29tPg=="
    }
}