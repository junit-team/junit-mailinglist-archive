{
    "numMessagesInTopic": 9, 
    "nextInTime": 16020, 
    "senderId": "JgSVztzrYhrLuS9OFWeIaE4Kn5YMVGlGnIXvwIsymWdhWvp6jJpNM7QgkytkwJHsJ5VArewZn-DpgkEKNXOdmg-ekGpOOV-tzw", 
    "systemMessage": true, 
    "subject": "testing private methods in Struts Actions ?", 
    "from": "&quot;frank zou&quot; &lt;frankz1998@...&gt;", 
    "authorName": "frank zou", 
    "msgSnippet": "Hi, I am a newbie on JUnit-based testing. This is my first time to post message.I have some questoins here, and hope to get help from you. I am using Struts", 
    "msgId": 16019, 
    "rawEmail": "Return-Path: &lt;frankz1998@...&gt;\r\nReceived: (qmail 50876 invoked from network); 8 Feb 2006 13:14:02 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m31.grp.scd.yahoo.com with QMQP; 8 Feb 2006 13:14:02 -0000\r\nReceived: from unknown (HELO n26.bullet.scd.yahoo.com) (66.94.237.55)\n  by mta5.grp.scd.yahoo.com with SMTP; 8 Feb 2006 13:14:01 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.4] by n26.bullet.scd.yahoo.com with NNFMP; 08 Feb 2006 13:13:42 -0000\r\nReceived: from [66.218.66.76] by t4.bullet.scd.yahoo.com with NNFMP; 08 Feb 2006 13:13:42 -0000\r\nX-Sender: frankz1998@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 58747 invoked from network); 8 Feb 2006 03:13:30 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m31.grp.scd.yahoo.com with QMQP; 8 Feb 2006 03:13:30 -0000\r\nReceived: from unknown (HELO n2a.bullet.scd.yahoo.com) (66.94.237.36)\n  by mta10.grp.scd.yahoo.com with SMTP; 8 Feb 2006 03:13:30 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.1] by n2.bullet.scd.yahoo.com with NNFMP; 08 Feb 2006 03:13:02 -0000\r\nReceived: from [66.218.66.90] by t1.bullet.scd.yahoo.com with NNFMP; 08 Feb 2006 03:13:02 -0000\r\nDate: Wed, 08 Feb 2006 03:12:59 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;dsbnjr+3lci@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;frank zou&quot; &lt;frankz1998@...&gt;\r\nSubject: testing private methods in Struts Actions ?\r\nX-Yahoo-Group-Post: member; u=193176558; y=yxoecnsifPZahQ8DvVqTQqK1H4bXwKEWNCZrKKEw0pUx1qDrfw\r\nX-Yahoo-Profile: frankz1998\r\nX-eGroups-Approved-By: nails762 &lt;jbrains@...&gt; via web; 08 Feb 2006 13:13:33 -0000\r\n\r\n\nHi, I am a newbie on JUnit-based testing. This is my first time to\npost me=\r\nssage.I have some questoins here, and hope to get help from you. \n\nI am usi=\r\nng Struts and I want to test an action similiar to the\nfollowing snippet. \n=\r\n\npublic ActionForward execute(ActionMapping mapping, ActionForm form,\n\t\t\tHt=\r\ntpServletRequest request, HttpServletResponse response)\n\t\t\t{\n\n\t\tcreateEvent=\r\nLog(request);\n\t\t\n\t\thandleSessionAndToken(request);\n\t\t...\n\t\tclearUserRelated=\r\nCookies(siteId, response);\n\n\t\tString returnUrl =3D createReturnUrl(mapping,=\r\n request);\n\t\trequest.setAttribute(LOGIN_RETURN_URL, returnUrl);\n\t\treturn ma=\r\npping.findForward(PAGE_SUCCESS);\n\t}\n\nThe original version of this method im=\r\nplemented all features within\nit. I think it was not good. To make it easie=\r\nr to understand and test,\nI refactor it and abstracted 4 private methods, l=\r\nike createEventLog(),\nclearUserRelatedCookies(), createReturnUrl(), handleS=\r\nessionAndToken(). . \n\nHere are my questions:\n\n* Did I do a right refactoryi=\r\nng in terms of testability ?\n\n* After refactorying, the execute(...) is alm=\r\nost empty. All the\nconcrete work is done by private methods. Is this good i=\r\nn terms of\ndesign ?\n\n* How should I test the private methods ? From what I =\r\nsaw on this\nforum, someone suggest we usually DO NOT test private method. I=\r\nf so,\nhow should I test this class where there is only one public method\nwh=\r\nich actually does very little ?\n\n* Maybe someone would suggest to put these=\r\n private methods to a\nseparate class, right ? If yes, I am afraid we would =\r\nhave so many\nclasses which seems not having reasons to exist on their own. =\r\n\n\n* How should I test execute() method here ? One thing I could see is\njust=\r\n to use StrutsTestCase and assert &quot;returnUrl&quot; is correct and etc. \n\n* When =\r\nusing StrutsTestCase, we have to call all the code down to DB.\nSo we just w=\r\nrote a wrapper for StrutsTestCase and merge the function\nof  JMoock into it=\r\n, this way we can test this action in isolation of\nDB ( by mocking the whol=\r\ne biz layer code ). Is this a right approach ?\n\n\nThe issues really confused=\r\n me. Testing gurus, please give me a hand.\nThanks. \n\n\n\n\n\n\n\n\n", 
    "profile": "frankz1998", 
    "topicId": 16019, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 193176558, 
    "prevInTime": 16018, 
    "contentTrasformed": false, 
    "postDate": "1139368379", 
    "canDelete": false, 
    "nextInTopic": 16031, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGRzYm5qciszbGNpQGVHcm91cHMuY29tPg=="
    }
}