{
    "numMessagesInTopic": 106, 
    "nextInTime": 9037, 
    "senderId": "XV_3ZVkuKdK5Qws_XVIbPjoAH802qP1WUNbolAF-pha7v2iyKa4WPtalDHdgqA55SZC5gkzz9IZcqiTXIbqL9L5Dl87A2BH6sjJK7dmZWQ", 
    "systemMessage": false, 
    "subject": "RE: [junit] Singleton", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... The underlying problem is that you need to initialize the singleton (or toolbox) at some point in time during server startup or application startup. When", 
    "msgId": 9036, 
    "profile": "nails762", 
    "topicId": 8807, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "messageBody": "<div id=\"ygrps-yiv-410058794\"><blockquote><span title=\"ireply\">&gt;So said <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:carlos.manzanares@...\">carlos.manzanares@...</a> on 2003-08-06 --------------------<br/>\n&gt;Hi,<br/>\n&gt;<br/>\n&gt;I read that article some time ago and certainly was very useful: I&#39;ve been<br/>\n&gt;using the Toolbox pattern since then and it works nicely.<br/>\n&gt;<br/>\n&gt;The only problems I&#39;ve encountered so far while using Toolbox are:<br/>\n&gt;- when I ported old RMI servers to EJBs I found that the Toolbox was not<br/>\n&gt;so easy to initialize anymore: it needs to be done in an Application<br/>\n&gt;Server specific way (e.g.: initialization classes in weblogic) or using<br/>\n&gt;the init method from a Servlet, none of this alternatives seem to be very<br/>\n&gt;elegant to me<br/>\n<br/>\n </span></blockquote>The underlying problem is that you need to initialize the singleton (or toolbox) at some point in time during server startup or application startup. When do you do it? What if you have a messaging system, which may process a message before the first servlet loads?<br/>\n<br/>\nI agree that placing this in an application server context makes it all the more difficult. One bad thing about application servers: there is no definite application object that starts before everything else.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;- the setup of the Toolbox can become error prone (or at least tedious) in<br/>\n&gt;complex test cases and during refactorings<br/>\n&gt;Maybe they are experiences you (J.B. Rainsberg) could add to your article<br/>\n<br/>\n </span></blockquote>All the more reason why the toolbox must go. It is a coping mechanism for dealing with many singletons, but not a final solution.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;I have been thinking for a while if there could be any other way to solve<br/>\n&gt;the singleton &quot;testing problem&quot; and the only solution I came across is to<br/>\n&gt;implement a testing framework where class loading is user-tailored:<br/>\n&gt;- in the source code there would not be any need to change the singleton<br/>\n&gt;code<br/>\n<br/>\n </span></blockquote>I dislike this in principle, because the choice to use a singleton is almost always the wrong choice. In general, I dislike anything that enables poor choices.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;- the tester class would need to setup the framework so that the<br/>\n&gt;classloader would load a mock class instead of the singleton class<br/>\n<br/>\n </span></blockquote>Interesting. It could be another good coping strategy. A transition towards a more well-designed system.<br/>\n<br/>\n<br/>\nJ. B. Rainsberger,<br/>\nPresident, Diaspar Software Services<br/>\nLet&#39;s write software that people understand.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com/\">http://www.diasparsoftware.com/</a><br/>\ntelephone: +1 416 791-8603</div>", 
    "prevInTime": 9035, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1060219387", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 9026, 
    "headers": {
        "inReplyToHeader": "PDQ4MUQ2RkZCM0JENjBFNENCNTkwRjM5QzU5MDk4NDAwMDEyRThBODFAdHJlYmUwMDQuZXVyb3BlLm5va2lhLmNvbT4=", 
        "messageIdInHeader": "PDIwMDMwODA2MjEyMzA3MDM4MC4wMEQ2NEY3NUBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "referencesHeader": "PDQ4MUQ2RkZCM0JENjBFNENCNTkwRjM5QzU5MDk4NDAwMDEyRThBODFAdHJlYmUwMDQuZXVyb3BlLm5va2lhLmNvbT4="
    }
}