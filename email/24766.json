{
    "numMessagesInTopic": 6, 
    "nextInTime": 24767, 
    "senderId": "he18IHG_y3jqbbGW9rPIvgHisIm_jX6tjYQsU2Dhl-sJKeYE3AOcUrs7_yw-sejI3x2OY4IzHGv6AYOSTkiED3tunkzCAmDYOJJR6VVLby5rAFlr6Uq7hRYCtrqU", 
    "systemMessage": false, 
    "subject": "Re: [junit] Running ActiveTestSuite from command line", 
    "from": "=?UTF-8?Q?Kevin_Cooney_=E2=98=95?= &lt;kcooney@...&gt;", 
    "authorName": "Kevin Cooney ☕", 
    "msgSnippet": "You might want to ask on a Gradle forum. Note that there were some thread-safety issues fixed in JUnit 4.12, so if you are using an earlier version you may", 
    "msgId": 24766, 
    "profile": "kevinwcooney", 
    "topicId": 24765, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 347643069, 
    "messageBody": "<div id=\"ygrps-yiv-308183926\"><div dir=\"ltr\">You might want to ask on a Gradle forum.<div><br></div><div>Note that there were some thread-safety issues fixed in JUnit 4.12, so if you are using an earlier version you may want to upgrade.</div><div class=\"ygrps-yiv-308183926gmail_extra\"><div><div class=\"ygrps-yiv-308183926gmail_signature\"><br>-- Kevin<br></div></div>\n<br><blockquote><span title=\"qreply\"> <div class=\"ygrps-yiv-308183926gmail_quote\">On Mon, May 1, 2017 at 11:50 PM, <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jonathonjshields@...\">jonathonjshields@...</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-308183926gmail_quote\" style=\"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span style=\"display:none;\"> </span>\n\n\n<div id=\"ygrps-yiv-308183926m_5805016091483623086ygrp-mlmsg\">\n  <div id=\"ygrps-yiv-308183926m_5805016091483623086ygrp-msg\">\n\n\n    <div id=\"ygrps-yiv-308183926m_5805016091483623086ygrp-text\">\n      \n      \n      <p></p><p>Hi all,</p><p><br></p><p>I have a requirement to run the same set of tests concurrently(in separate threads), after doing some digging about I came across ActiveTestSuite. I&#39;ve seen some posts re an equivalent mechanism in JUnit 4, as of yet I&#39;ve not seen a suggested out of the box supported mechanism for JUnit 4. So I&#39;ve continued down the path of ActiveTestSuite, I&#39;m happy to be told there is a different mechanism now.</p><p><br></p><p>So to the issues I&#39;m having, I eventually got my test suite running, our custom base test classes need so updates to be thread safe. So I have two identical test suites added to the ActiveTestSuite and its running in 3500 tests successfully in Eclipse. The issue arrises when I try to execute the test suite on the command line. Unfortunately(for me) the test execution must be done via Gradle, I&#39;m relatively new to Gradle, so I&#39;m not sure if the issue I&#39;m having is solely a Gradle JUnit integration issue or if there is a general issue with running the test suite from the command line. I haven&#39;t came across any real examples of it being used from the command line.</p><p><br></p><p>So the types of errors I&#39;m getting seem to be unexpected JUnit lifecycle errors:</p><p><br></p><p><br></p><p><span style=\"font-style:italic;\">    java.lang.AssertionError: Unexpected start event for test_insert_positiveFlow_ allFields(my.test.MemberTest)</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>at org.gradle.api.internal.tasks. testing.junit. JUnitTestEventAdapter. testStarted( JUnitTestEventAdapter.java:56)</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>at org.junit.runner.notification. RunNotifier$3.notifyListener( RunNotifier.java:87</span>)</p><p><br></p><p><br></p><p>and </p><p><br></p><p><span style=\"font-style:italic;\">    java.lang.AssertionError</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>at org.gradle.api.internal.tasks. testing.processors. TestOutputRedirector. setOutputOwner( TestOutputRedirector.java:49)</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>at org.gradle.api.internal.tasks. testing.processors. CaptureTestOutputTestResultPro cessor.completed( CaptureTestOutputTestResultPro cessor.java:80)</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>at org.gradle.api.internal.tasks. testing.results. AttachParentTestResultProcesso r.completed( AttachParentTestResultProcesso r.java:56)</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>at org.gradle.api.internal.tasks. testing.results. AttachParentTestResultProcesso r.completed( AttachParentTestResultProcesso r.java:56)</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>at org.gradle.api.internal.tasks. testing.junit. TestClassExecutionEventGenerat or.completed( TestClassExecutionEventGenerat or.java:83)</span></p><p><br></p><p>There are other similar unexpected event assertions thrown during the test execution. I&#39;ve dug about a bit and can&#39;t see any examples of the ActiveTestSuite and Gradle(or Ant etc....) with respect to this type of issue. </p><p><br></p><p>The task I&#39;ve declared is:</p><p><br></p><p><span style=\"font-style:italic;\">    task parallelTestSuite(type: Test){</span></p><p><span style=\"font-style:italic;\"><br></span></p><p><span style=\"font-style:italic;\">        //gradle.startParameter. continueOnFailure = true</span></p><p><span style=\"font-style:italic;\">        scanForTestClasses = false</span></p><p><span style=\"font-style:italic;\">        includes = [&#39;**/*MyActiveTestSuite.class&#39; ]</span></p><p><span style=\"font-style:italic;\">      <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span></span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>environment &quot;SERVER_DIR&quot;, &quot;.&quot;</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>maxHeapSize = &quot;1024m&quot;</span></p><p><span style=\"font-style:italic;\"><br></span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>workingDir &quot;../../&quot;</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>afterTest { desc, result -&gt;</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t\t</span>println &quot;Executing test ${<a rel=\"nofollow\" target=\"_blank\" href=\"http://desc.name\">desc.name</a>} [${desc.className}] with result: ${result.resultType}&quot;</span></p><p><span style=\"font-style:italic;\">    <span class=\"ygrps-yiv-308183926m_5805016091483623086Apple-tab-span\" style=\"white-space:pre-wrap;\">\t</span>}</span></p><p><span style=\"font-style:italic;\"><br></span></p><p><span style=\"font-style:italic;\">    }</span></p><p><br></p><p>I&#39;ve tried setting the fork behaviour but to be honest the default configuration is what I want, i.e. parallel threads in the same JVM. Any help much appreciated</p><p><br></p><p><span></span></p><p>Thanks.</p><p><span><br class=\"ygrps-yiv-308183926m_5805016091483623086yui-cursor\"></span></p><p></p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br></span></blockquote></div></div>\n</div>", 
    "prevInTime": 24765, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1493755942", 
    "canDelete": false, 
    "nextInTopic": 24767, 
    "prevInTopic": 24765, 
    "headers": {
        "inReplyToHeader": "PG9lOTlsZytqNmI3NzlAWWFob29Hcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBRFcwVXlTand5RXFOUExhVzJZU3BFU1RMNlhpZmFOaWJPcWVKTFROY0xKZWVvMTdzQUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PG9lOTlsZytqNmI3NzlAWWFob29Hcm91cHMuY29tPg=="
    }
}