{
    "numMessagesInTopic": 41, 
    "nextInTime": 6916, 
    "senderId": "8bC9ltw9i-JHJxqLcrRhKql_aVUZyosfzAmRMUCrAEK0kZyIcJRowMwWl1zMIL2TvfVMRWIfKUxrHyL4922jUwcljgprTh1pWgZtBa5EfiWgBY1E", 
    "systemMessage": false, 
    "subject": "RE: [junit] Programmer Tests and the Database", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "Can you write this up with an example? This would be a useful thing to have in the ol library. So said  Jason Rogers  on  2/7/2003 -------------------- ... ", 
    "msgId": 6915, 
    "rawEmail": "Return-Path: &lt;jbr@...&gt;\r\nX-Sender: jbr@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_3_4); 8 Feb 2003 20:37:31 -0000\r\nReceived: (qmail 27532 invoked from network); 8 Feb 2003 20:37:31 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m1.grp.scd.yahoo.com with QMQP; 8 Feb 2003 20:37:31 -0000\r\nReceived: from unknown (HELO fep03-mail.bloor.is.net.cable.rogers.com) (66.185.86.73)\n  by mta3.grp.scd.yahoo.com with SMTP; 8 Feb 2003 20:37:31 -0000\r\nReceived: from quincy ([24.42.96.247])\n          by fep03-mail.bloor.is.net.cable.rogers.com\n          (InterMail vM.5.01.05.06 201-253-122-126-106-20020509) with ESMTP\n          id &lt;20030208203717.ZHLK121195.fep03-mail.bloor.is.net.cable.rogers.com@quincy&gt;\n          for &lt;junit@yahoogroups.com&gt;; Sat, 8 Feb 2003 15:37:17 -0500\r\nMessage-ID: &lt;200302081537250903.048CC1EF@...&gt;\r\nIn-Reply-To: &lt;000701c2cee9$f5036f20$919cd68d@RHINO&gt;\r\nReferences: &lt;000701c2cee9$f5036f20$919cd68d@RHINO&gt;\r\nX-Mailer: Calypso Version 3.30.00.00 (4)\r\nDate: Sat, 08 Feb 2003 15:37:25 -0500\r\nTo: junit@yahoogroups.com\r\nSubject: RE: [junit] Programmer Tests and the Database\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\nX-Authentication-Info: Submitted using SMTP AUTH LOGIN at fep03-mail.bloor.is.net.cable.rogers.com from [24.42.96.247] using ID &lt;srainsberger5790@...&gt; at Sat, 8 Feb 2003 15:37:10 -0500\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;\r\nReply-To: jbr@...\r\nX-Yahoo-Group-Post: member; u=89240252\r\nX-Yahoo-Profile: nails762\r\n\r\nCan you write this up with an example? This would be a useful thing to\nhave in the ol&#39; library.\n\nSo said  Jason Rogers  on  2/7/2003 --------------------\n\n&gt;OK, I am stepping into this one late, and I haven&#39;t read everything\nbut\n&gt;I just saw this talk on ResourceBundles and SQL statements, etc. and\n&gt;thought I could offer some input.\n&gt;\n&gt;We tend to make objects that represent the database access, why not in\n&gt;this case?  Make objects that represent the selects, inserts, etc.,\n&gt;leverage the package structure of Java, and then you effectively have\n&gt;all of your SQL in one place.\n&gt;\n&gt;On my current project we use a hierarchy of Query objects that do all\nof\n&gt;our selects, and a heirarchy of Records that do inserts, updates,\n&gt;deletes, etc.  Queries return Records, Records are given to model\nlayer\n&gt;objects for construction (which requires a fair amount of discipline\non\n&gt;the team so as not to allow the model layer to muck with the\npersistence\n&gt;layer).  It couldn&#39;t be any simpler...  There are two places to look\nfor\n&gt;changing SQL, and there are extensive functional tests on the objects\n&gt;that represent the database actions.\n&gt;\n&gt;Here&#39;s a snippet:\n&gt;***********************************************************************\n*\n&gt;***\n&gt;DatabaseConnection.allRecords(Query query) {\n&gt;    DatabaseConnectionPool connectionPool =\n&gt;        DatabaseConnectionPool.getInstanceForDatabase(this);\n&gt;    \n&gt;    try {\n&gt;        Connection connection = connectionPool.getConnection();\n&gt;        Statement statement = connection.createStatement();\n&gt;        ResultSet resultSet =\n&gt;statement.executeQuery(query.queryString());\n&gt;\n&gt;        try {\n&gt;            return query.process(resultSet);\n&gt;        } catch (SQLException e) {\n&gt;    .\n&gt;    .\n&gt;    .\n&gt;}\n&gt;\n&gt;Query.allRecords(DatabaseConnection databaseConnection) {\n&gt;    RecordsList results = database.allRecords(this);\n&gt;    return results;\n&gt;}\n&gt;Query.exactlyOneRecord(DatabaseConnection databaseConnection) {\n&gt;    Record results = database.exactlyOneRecord(this);\n&gt;    return results;\n&gt;}\n&gt;***********************************************************************\n*\n&gt;***\n&gt;\n&gt;The public API on Query is allRecords(DatabaseConnection),\n&gt;exactlyOneRecord(DatabaseConnection), process(ResultSet), and\n&gt;queryString().  As you can see we use a DoubleDispatch operation: we\nask\n&gt;the Query for a Record or RecordList, it turns and asks the\n&gt;DatabaseConnection for the appropriate thing, the DatabaseConnection\n&gt;turns back around and asks the Query to process the ResultSet it just\n&gt;got from a java.sql.Connection.  It&#39;s clean, you can now have objects\n&gt;representing your SQL, and it all is stuck in one package structure\n(or\n&gt;at most a few) and not just strewn throughout the codebase.\n&gt;\n&gt;I hope that will help in the discussion.\n&gt;\n&gt;=jason\n&gt;[:question | ^One] \n&gt;-----Original Message-----\n&gt;From: J. B. Rainsberger [mailto:jbr@...] \n&gt;Sent: Friday, February 07, 2003 10:03 AM\n&gt;To: junit@yahoogroups.com; junit@yahoogroups.com\n&gt;Subject: Re: [junit] Programmer Tests and the Database\n&gt;\n&gt;\n&gt;Amen, sir.\n&gt;\n&gt;So said  Bob Koss  on  2003-02-07 --------------------\n&gt;\n&gt;&gt;On 2/7/03 12:34 AM, &quot;Curt Sampson&quot; &lt;yahoo_sucks@...&gt; wrote:\n&gt;&gt;\n&gt;&gt;&gt; On Thu, 6 Feb 2003, J. B. Rainsberger wrote:\n&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; Pushing every SQL statement you use out to a ResourceBundle (or\n&gt;other\n&gt;&gt;&gt;&gt; metadata file) is a good idea.\n&gt;&gt;&gt; \n&gt;&gt;&gt; Eww! I know this tends to be a bit of a personal preference, but I\n&gt;far\n&gt;&gt;&gt; prefer to keep my code together when I can. If a statement is used\n&gt;in\n&gt;&gt;&gt; only one place, keeping it where it&#39;s used makes the code much\n&gt;easier to\n&gt;&gt;&gt; read, because you don&#39;t have to go chasing off into some other file\n&gt;to\n&gt;&gt;&gt; find out what SQL statement is being executed.\n&gt;&gt;&gt; \n&gt;&gt;\n&gt;&gt;That&#39;s probably true if the SQL never has to change. If the schema\n&gt;changes,\n&gt;&gt;I find it more convenient to go to one known place instead of having\n&gt;to\n&gt;&gt;search my entire app for possible changes.\n&gt;&gt;\n&gt;&gt;-- \n&gt;&gt;Robert Koss, Ph.D.     | Training, Mentoring, Contract Development\n&gt;&gt;Senior Consultant      | Object Oriented Design, C++, Java\n&gt;&gt;www.objectmentor.com   | Extreme Programming\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;------------------------ Yahoo! Groups Sponsor\n&gt;---------------------~--&gt;\n&gt;&gt;Get 128 Bit SSL Encryption!\n&gt;&gt;http://us.click.yahoo.com/LIgTpC/vN2EAA/xGHJAA/5cFolB/TM\n&gt;&gt;---------------------------------------------------------------------~\n-\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;To unsubscribe from this group, send an email to:\n&gt;&gt;junit-unsubscribe@yahoogroups.com\n&gt;&gt; \n&gt;&gt;\n&gt;&gt;Your use of Yahoo! Groups is subject to\n&gt;http://docs.yahoo.com/info/terms/\n&gt;\n&gt;\n&gt;J. B. Rainsberger,\n&gt;President, Diaspar Software Services\n&gt;Let&#39;s write software that people understand.\n&gt;http://www.diasparsoftware.com/\n&gt;telephone: +1 416 791-8603\n&gt;All correspondence (c) 2002 Diaspar Software Services.\n&gt;If you want to use it, just ask; don&#39;t steal.\n&gt;\n&gt;\n&gt;To unsubscribe from this group, send an email to:\n&gt;junit-unsubscribe@yahoogroups.com\n&gt;\n&gt;\n&gt;Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. \n&gt;\n&gt;---\n&gt;Outgoing mail is certified Virus Free.\n&gt;Checked by AVG anti-virus system (http://www.grisoft.com).\n&gt;Version: 6.0.438 / Virus Database: 246 - Release Date: 1/7/2003\n&gt; \n&gt;\n&gt;\n&gt;------------------------ Yahoo! Groups Sponsor\n---------------------~--&gt;\n&gt;Get 128 Bit SSL Encryption!\n&gt;http://us.click.yahoo.com/LIgTpC/vN2EAA/xGHJAA/5cFolB/TM\n&gt;---------------------------------------------------------------------~-\n&gt;\n&gt;\n&gt;To unsubscribe from this group, send an email to:\n&gt;junit-unsubscribe@yahoogroups.com\n&gt; \n&gt;\n&gt;Your use of Yahoo! Groups is subject to\nhttp://docs.yahoo.com/info/terms/\n\n\nJ. B. Rainsberger,\nPresident, Diaspar Software Services\nLet&#39;s write software that people understand.\nhttp://www.diasparsoftware.com/\ntelephone: +1 416 791-8603\nAll correspondence (c) 2002 Diaspar Software Services.\nIf you want to use it, just ask; don&#39;t steal.\n\n\n", 
    "profile": "nails762", 
    "topicId": 6711, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "prevInTime": 6914, 
    "contentTrasformed": false, 
    "postDate": "1044736645", 
    "canDelete": false, 
    "nextInTopic": 6916, 
    "prevInTopic": 6914, 
    "headers": {
        "inReplyToHeader": "PDAwMDcwMWMyY2VlOSRmNTAzNmYyMCQ5MTljZDY4ZEBSSElOTz4=", 
        "messageIdInHeader": "PDIwMDMwMjA4MTUzNzI1MDkwMy4wNDhDQzFFRkBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "referencesHeader": "PDAwMDcwMWMyY2VlOSRmNTAzNmYyMCQ5MTljZDY4ZEBSSElOTz4="
    }
}