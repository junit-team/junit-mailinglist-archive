{
    "numMessagesInTopic": 4, 
    "nextInTime": 16543, 
    "senderId": "qtTW_10qYM3C9q7Pet99I0re0HqDML4U4OFjdycW8v1jVaDPVDmWMiyHYAhQF9t7W0X7T_2O3_Szxvwevvla2Uiuuip_q9gLXTIuluRy6kYozRRaTw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Newbie question - Testing Applets", 
    "from": "jason r tibbetts &lt;tibbettj@...&gt;", 
    "authorName": "jason r tibbetts", 
    "msgSnippet": "... Two of your three test methods don t test scenarios that would ever exist in the real world. You ll never really put the applet in a JFrame, so toss", 
    "msgId": 16542, 
    "rawEmail": "Return-Path: &lt;tibbettj@...&gt;\r\nX-Sender: tibbettj@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 82555 invoked from network); 20 Apr 2006 14:38:30 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m34.grp.scd.yahoo.com with QMQP; 20 Apr 2006 14:38:30 -0000\r\nReceived: from unknown (HELO mailhost2.sra.com) (163.252.31.55)\n  by mta8.grp.scd.yahoo.com with SMTP; 20 Apr 2006 14:38:30 -0000\r\nReceived: from verdi.iisd.sra.com ([163.252.29.9]) by mailhost2.sra.com with Microsoft SMTPSVC(6.0.3790.211);\n\t Thu, 20 Apr 2006 10:36:00 -0400\r\nReceived: from [163.252.3.3] (exaiphnes [163.252.3.3])\n\tby verdi.iisd.sra.com (8.9.3p2/8.9.3) with ESMTP id KAA05763\n\tfor &lt;junit@yahoogroups.com&gt;; Thu, 20 Apr 2006 10:36:00 -0400 (EDT)\r\nMessage-ID: &lt;44479C4F.9060802@...&gt;\r\nDate: Thu, 20 Apr 2006 10:35:59 -0400\r\nUser-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.7) Gecko/20040517\r\nX-Accept-Language: en-US, en, ja, ko\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;e280tm+asm6@...&gt;\r\nIn-Reply-To: &lt;e280tm+asm6@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nReturn-Path: tibbettj@...\r\nX-OriginalArrivalTime: 20 Apr 2006 14:36:00.0195 (UTC) FILETIME=[BE414930:01C66487]\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: jason r tibbetts &lt;tibbettj@...&gt;\r\nReply-To: tibbettj@...\r\nSubject: Re: [junit] Newbie question - Testing Applets\r\nX-Yahoo-Group-Post: member; u=224061497; y=6AZaGpRmU9EHxvjs7NetzvgTRUHqT6Nhh-nUNfX9KjZTgBy9A2dJo5ZtEZm73joruYZQWw\r\nX-Yahoo-Profile: tibbettj_at_verdi_sra_com\r\n\r\nAnna Skawinska wrote:\n&gt; Hi guys,\n&gt; \n&gt; The reason I started to learn JUnit and Java in general is that I&#39;ve\n&gt; just begun my internship and I&#39;m going to write unit tests for an\n&gt; existing application, developed by &quot;real&quot; programmers :)\n&gt; \n&gt; The application I&#39;m going to work on first is a Java applet, so I&#39;ve\n&gt; focused on finding out how to use JUnit to test them. Having done some\n&gt; experiments, I&#39;ve tried to find some sample projects to show me if I\n&gt; just do it the right way, but unfortunately I haven&#39;t found much.\n&gt; \n&gt; That&#39;s why I&#39;d be extremely grateful if someone will just take a look\n&gt; at what I&#39;ve written and tell me if I have the right idea of using\n&gt; JUnit to test applet-based applications and if I&#39;ll be able to test\n&gt; real, functional applets this way in the future.\n\nTwo of your three test methods don&#39;t test scenarios that would ever \nexist in the real world. You&#39;ll never really put the applet in a JFrame, \nso toss appletNotNull() and frameContentPaneIncludesApplet(). The third \ntest method, appletComponentsCountOK(), is reasonable, but \nunderspecified, as it doesn&#39;t test whether the applet&#39;s content pane \ncontains a JLabel with the name that you gave it.\n\nFor real-world applets, you should consider the following:\n\n* Refactor the applet so that it&#39;s a thin shell around the content and \nthe business logic that acts on the content. In other words, create a \nclass that handles all of the layout, then pass an instance of this \nclass to the applet&#39;s setContentPane(). This has at least two advantages:\n1) the standalone component can then be tested using one of the Swing \ntesting tools, such as JFCUnit, Abbot & Costello, etc.\n2) the standalone component can be dropped into a JFrame to create a \nstandalone version of your application. In my experience, it&#39;s much, \nmuch faster to develop a standalone app than an applet, especially if \nthat applet has to be deployed to a Web server (as opposed to the \nappletrunner) in order to confirm your changes. And if deployment of the \napplet is via a .war or .ear, then your time savings are even greater.\n\n* Applets have several getters for external information, and most \nreal-world applets call one or more of these. These would be difficult, \nif not impossible, to test without jumping through several hoops. For \nexample, your test&#39;s before() method may have to do something like this:\n\nApplet app = new AppletClass() {\n\n   public String getAppletInfo() { return &quot;info&quot;; }\n\n   public getAppletContext() { return new CustomAppletContext(); }\n\n   public URL getCodeBase() {\n     try {\n       return new URL(&quot;file:///my/codebase&quot;);\n     } catch (MalformedURLException mux) {\n       return null;\n   }\n\n   // etc.\n}\n\nSome of these, like the ApplicationContext, are rather rich interfaces \nthat would be a pain in the a$$ to mock out if they have to do anything \nmeaningful.\n\nIt would be much, much easier to factor out the applet logic, per the \nfirst bullet-point above, into standalone components that can take some \nof this information in the form of something like properties. For \nexample, say your (signed) applet needs a URL for connecting to a remote \ndatabase, and this URL is specified in a &lt;param&gt; tag inside the &lt;applet&gt; \ntag on the HTML page. The applet&#39;s init() will read the URL from the \napplet context and pass it to the factored-out code, like so:\n\npublic class AppletClass extends JApplet {\n   public void init() {\n     String dbUrlStr = getParameter(&quot;db.url&quot;);\n     JPanel content = new ApplicationPanel(dbUrlStr);\n     setContentPane(content);\n   }\n}\n\nA standalone app or a test would get the URL in a different way:\n\n@test public void constructAppPanelWithValidUrl() {\n   String urlStr = &quot;http://my.db.url&quot;;\n   JPanel content = new ApplicationPanel(dbUrlStr);\n   // assert that the connection is valid, etc.\n}\n\nThis response has been long enough. I&#39;ll stop now.\n\n&gt; //-----------------------------------------------------------\n&gt; //  AppletClass.java - simple applet from &quot;Thinking in Java&quot;\n&gt; //-----------------------------------------------------------\n&gt; import javax.swing.*;\n&gt; \n&gt; public class AppletClass extends JApplet {\n&gt; \tpublic void init() {\n&gt;         getContentPane().add(new JLabel(&quot;Applet!&quot;));\n&gt; \t}\n&gt; }\n&gt; \n&gt; \n&gt; //-----------------------------------------------------------\n&gt; //  AppletClassTest.java - what I&#39;ve written\n&gt; //-----------------------------------------------------------\n&gt; \n&gt; import javax.swing.JApplet;\n&gt; import junit.framework.JUnit4TestAdapter;\n&gt; // (and so on...)\n&gt; \n&gt; \n&gt; public class AppletClassTest {\n&gt; \tJApplet applet;\n&gt; \tJFrame frame;\n&gt; \t\n&gt; \t@Before public void before(){\n&gt; \t\tapplet = new AppletClass();\n&gt;         \n&gt;          frame = new JFrame(&quot;AppletClass!&quot;);\n&gt;         // To close the application:\n&gt;         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n&gt;         frame.getContentPane().add(applet);\n&gt;         frame.setSize(100,50);\n&gt;         \n&gt;         applet.init();\n&gt;         applet.start();\n&gt;         \n&gt; \t}\n&gt; \t\n&gt; \t@After public void after(){\n&gt; \t\tapplet.stop();\n&gt; \t\tapplet.destroy();\n&gt; \t}\n&gt; \t\n&gt; \t@Test public void appletNotNull(){\n&gt; \t\tAssert.assertNotNull(&quot;Hey, the applet reference is null!&quot;, applet);\t\t\n&gt; \t}\n&gt; \t\n&gt; \t@Test public void frameContentPaneIncludesApplet(){\n&gt; \t\tComponent[] tbl = frame.getContentPane().getComponents();\t\n&gt; \t\tboolean result = false;\n&gt; \t\t\n&gt; \t\t//search for the applet\n&gt; \t\tfor (int i=0; i&lt;tbl.length; i++)\n&gt; \t\t\tif ( tbl[i].equals(applet) ) {\n&gt; \t\t\t\tresult=true;\n&gt; \t\t\t\tbreak;\n&gt; \t\t\t}\n&gt; \t\tAssert.assertEquals(true, result);\t\t\n&gt; \t}\n&gt; \t\n&gt; \t@Test public void appletComponentsCountOK(){\t\t\n&gt; \t\tAssert.assertEquals(1,applet.getContentPane().getComponentCount());\t\t\n&gt; \t}\n&gt; \t\n&gt;     public static junit.framework.Test suite() {\n&gt;     \t\n&gt;     \treturn new JUnit4TestAdapter(AppletClassTest.class);\n&gt;     }\t\n&gt; }\n\n\n", 
    "profile": "tibbettj_at_verdi_sra_com", 
    "topicId": 16540, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 224061497, 
    "prevInTime": 16541, 
    "contentTrasformed": false, 
    "postDate": "1145543759", 
    "canDelete": false, 
    "nextInTopic": 16543, 
    "prevInTopic": 16540, 
    "headers": {
        "inReplyToHeader": "PGUyODB0bSthc202QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQ0NDc5QzRGLjkwNjA4MDJAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "referencesHeader": "PGUyODB0bSthc202QGVHcm91cHMuY29tPg=="
    }
}