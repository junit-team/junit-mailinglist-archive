{
    "numMessagesInTopic": 4, 
    "nextInTime": 12408, 
    "senderId": "8fC6DQ61HNJdtvl689X_Wm3xQsCGfcE0qAneG339An65XZrZbzQHZVj6IfwSioQjUnSjYo0AiRrgDX11-C0fSKuHJxgvThDZAnScSsdfxe_Uv2Lc", 
    "systemMessage": true, 
    "subject": "Re: Virtualmock in practice", 
    "from": "&quot;wellman_daniel&quot; &lt;daniel_wellman@...&gt;", 
    "authorName": "wellman_daniel", 
    "msgSnippet": "OK, so I played around a bit and was able to get VirtualMock and jMock working with my tests. I used the AspectWerkz offline mode for testing; looking through", 
    "msgId": 12407, 
    "profile": "wellman_daniel", 
    "topicId": 12349, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 203434778, 
    "messageBody": "<div id=\"ygrps-yiv-47731993\">OK, so I played around a bit and was able to get VirtualMock and jMock<br/>\nworking with my tests.<br/>\n<br/>\nI used the AspectWerkz offline mode for testing; looking through the<br/>\nant build script included with virtualmock, I determined that all I<br/>\nreally needed to add was the post-compilation task -- called<br/>\n&quot;virtualmock:transform:aspectwerkz:offline&quot;.  <br/>\n<br/>\nI read this excellent introduction to AOP at OnJava, which gave some<br/>\ndetailed info about AspectWerkz&#39; offline mode.<br/>\n<br/>\n  <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.onjava.com/pub/a/onjava/2004/01/14/aop.html\">http://www.onjava.com/pub/a/onjava/2004/01/14/aop.html</a><br/>\n<br/>\nMy observations:<br/>\n<br/>\n1. I did not play with AspectWerkz&#39; online mode as I didn&#39;t get a<br/>\nchance to learn how it works, and the &quot;virtualmock:vmunit:aspectwerkz&quot;<br/>\nsaid it was under construction.  <br/>\n<br/>\n2. I didn&#39;t try AspectJ because the OnJava article suggested that<br/>\nusing AspectJ required a different compiler which added keywords to<br/>\nthe Java language.  Without too much time to play, this spooked me, so<br/>\nI avoided it.<br/>\n<br/>\n3. It seems like a good idea to follow the virtualmock ant build<br/>\nscript and create a JAR of both the code under test and the unit tests<br/>\n, especially if you use the AspectWerkz offline mode -- which changes<br/>\nyour class files!  This, or make a new directory with a copy of all<br/>\nyour class files so your deployment scripts don&#39;t accidentally ship<br/>\noff the AOP-modified code!<br/>\n<br/>\n4. If I DO put the tests in a JAR, then I&#39;ll need to use something<br/>\nlike JUnit add-ons as described in J.B.&#39;s book to auto locate tests in<br/>\na JAR file.<br/>\n<br/>\n5. The most interesting; I found my existing tests ran *significantly*<br/>\nslower, on the order of six times slower when using Aspectwerkz.  This<br/>\nisn&#39;t a big deal, as my 50 tests which used to run in under two<br/>\nseconds now run in a little over 15 seconds.  Does anyone have a feel<br/>\nfor this; does this figure seem about right?  I&#39;m running on a recent<br/>\nP4 machine with 1 GB of RAM on Win 2000.  Running the AW post-compiler<br/>\nadds another 20 seconds or so.<br/>\n<br/>\n<br/>\nAll in all, it seems like it will do the trick; though the (overall<br/>\nsmall for now) speed hit and extra steps feel a bit &#39;heavy&#39;.  Still,<br/>\nI&#39;m not complaining, because it makes it possible to test the system<br/>\nas it is, which is a great thing!<br/>\n<br/>\n<br/>\nBased on the earlier recommendations I&#39;ve read, I do want to refactor<br/>\nthe system to make it easier to mock my collaborating service and DAO<br/>\nclasses.  The problem I face now is that the way I get my services and<br/>\nDAOs is through a factory; not such a bad thing.  However,<br/>\nthe factories don&#39;t cache the services or DAO&#39;s, instead they delegate<br/>\nto a services finder which caches a map interface full package names<br/>\nto concrete class full package names (both Strings).  The objects are<br/>\nreturned with Class.newInstance() methods from the finder back to the<br/>\nfactory.  It seems like it would be better for the factory to cache<br/>\nactual instances, or have methods in the factories to register new<br/>\nimplementations (and then check the cache before calling the services<br/>\nfinder/newInstance() method).<br/>\n<br/>\n-d</div>", 
    "prevInTime": 12406, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1101777522", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 12357, 
    "headers": {
        "inReplyToHeader": "PDQxOUU2RTI3LjkwNzAxQHJvZ2Vycy5jb20+", 
        "messageIdInHeader": "PGNvZ2hwaSs5bW8yQGVHcm91cHMuY29tPg=="
    }
}