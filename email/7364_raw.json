{
    "topicId": 7330, 
    "postDate": "1049141513", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Frank Burough &lt;fburough@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "56o1e-ojf7ygc1UkjhRa1dYGQA4tl_WEFGOLZ3R_6sMyfUuiCj6ihrkPkyuzd7TTn1jUELVfcee6YSyNDwDthPia_Jhxj1U-Qf0kWHXVJA", 
    "nextInTime": 7365, 
    "userId": 142170960, 
    "prevInTime": 7363, 
    "prevInTopic": 7338, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwMzI1MDU1NjE1LkdKMTgzNUBzeW5hcHAuY29tPg==", 
        "messageIdInHeader": "PDEwNDkxNDE1MTMuMTg1NS42MS5jYW1lbEBmYnVyb3VnaD4=", 
        "referencesHeader": "PDEwNDg1MjMzMTcuMTc0NC4zNi5jYW1lbEBmYnVyb3VnaD4JIDwyMDAzMDMyNTA1NTYxNS5HSjE4MzVAc3luYXBwLmNvbT4="
    }, 
    "authorName": "Frank Burough", 
    "numMessagesInTopic": 7, 
    "msgSnippet": "Hi-- I am still tearing my hair out trying to exercise EJBs with JUnit. Any further insights or help would be greatly appreciated. Based on Alan s comments (in", 
    "contentTrasformed": false, 
    "msgId": 7364, 
    "nextInTopic": 7403, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;fburough@...&gt;\r\nReceived: (qmail 13372 invoked from network); 2 Apr 2003 00:20:03 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m7.grp.scd.yahoo.com with QMQP; 2 Apr 2003 00:20:03 -0000\r\nReceived: from unknown (HELO n6.grp.scd.yahoo.com) (66.218.66.90)\n  by mta2.grp.scd.yahoo.com with SMTP; 2 Apr 2003 00:20:03 -0000\r\nX-eGroups-Return: fburough@...\r\nReceived: from [66.218.67.159] by n6.grp.scd.yahoo.com with NNFMP; 02 Apr 2003 00:20:03 -0000\r\nX-Sender: fburough@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 31 Mar 2003 20:11:55 -0000\r\nReceived: (qmail 60124 invoked from network); 31 Mar 2003 20:11:55 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m14.grp.scd.yahoo.com with QMQP; 31 Mar 2003 20:11:55 -0000\r\nReceived: from unknown (HELO mail.elixirpharm.com) (66.236.179.164)\n  by mta2.grp.scd.yahoo.com with SMTP; 31 Mar 2003 20:11:54 -0000\r\nSubject: Re: [junit] Junit and EJBs\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;20030325055615.GJ1835@...&gt;\r\nReferences: &lt;1048523317.1744.36.camel@fburough&gt;\n\t &lt;20030325055615.GJ1835@...&gt;\r\nOrganization: Elixir Pharmaceuticals\r\nMessage-Id: &lt;1049141513.1855.61.camel@fburough&gt;\r\nMime-Version: 1.0\r\nX-Mailer: Ximian Evolution 1.2.2 \r\nDate: 31 Mar 2003 15:11:53 -0500\r\nFrom: Frank Burough &lt;fburough@...&gt;\r\nReply-To: fburough@...\r\nX-Yahoo-Group-Post: member; u=142170960\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Approved-By: clarkware &lt;mike@...&gt; via web; 02 Apr 2003 00:20:00 -0000\r\n\r\nHi--\n\nI am still tearing my hair out trying to exercise EJBs with JUnit. Any\nfurther insights or help would be greatly appreciated. \nBased on Alan&#39;s comments (in the included message below), I have set a\nsecurity manager, created a policy file and pointed my codebse to the\ndirectory containing my class files. I now get a \n&quot;javax.naming.CommunicationException [Root exception is\njava.rmi.ServerException: RemoteException occurred in server thread;\nnested exception is:\n        java.rmi.UnmarshalException: error unmarshalling arguments;\nnested exception is:\n        java.net.MalformedURLException: no protocol:\n/home/fburough/simplebean/workspace/com/javapro/ejb]&quot;\n\nmessage when I run JUnit. \n\nHere is the code that sets up my test:\n\tif(System.getSecurityManager() == null)\n\t    System.setSecurityManager(new RMISecurityManager());\n\tProperties properties = new Properties();\n\tproperties.put(Context.INITIAL_CONTEXT_FACTORY, \n\t\t       &quot;org.jnp.interfaces.NamingContextFactory&quot;);\n\tproperties.put(Context.PROVIDER_URL,\n&quot;file:///home/fburough/simplebean/workspace&quot;);\n\t\n\ttry {\n\t    // Get an initial context\n\t    InitialContext jndiContext = new InitialContext(properties);\n\n\t    // Get a reference to the Bean\n\t    Object ref  = jndiContext.lookup(&quot;StringProcessor&quot;);\n\t    StringProcessorHome home = (StringProcessorHome)\n\t\t   PortableRemoteObject.narrow (ref, StringProcessorHome.class);\n  }\nThe error occurs on the call to PortableRemoteObject.narrow.\n\nI have tried to load the EJB from the bean container and get errors as\nwell:\n1) Changed the Context.PROVIDER_URL to be &quot;localhost:1099&quot;\n2) Remove the &quot;-Djava.rmi.server.codebase=&quot; line from the java startup\n\nThe error I get then is: java.lang.ClassCastException\n\n\nAny suggestions? I hate to give up on JUnit because it works so well for\nthe other testing I need to do. But how to test those EJBs is still a\nproblem.\n\nThanks,\n\nFrank\n\n\n\nOn Tue, 2003-03-25 at 00:56, Alan Zimmerman wrote:\n\n&gt; I am able to run the tests with the addition of the following code to\n&gt; the setup of the test,\n&gt; \n&gt; if (System.getSecurityManager() == null) {\n&gt;   System.setSecurityManager(new RMISecurityManager());\n&gt; }\n&gt; \n&gt; as well as adding the following parameters to the java startup\n&gt; \n&gt; &lt;jvmarg line=&quot;-Djava.security.policy=${security.policy} -Djava.rmi.server.codebase=${rmi.server.codebase}&quot;/&gt;\n&gt; \n&gt; The ${security.policy} macro points to a java.policy file giving all\n&gt; permissions, and the ${rmi.server.codebase} points to the directory\n&gt; the .class files end up in.\n&gt; \n&gt; Hope this helps\n&gt; \n&gt; Alan Zimmerman\n&gt; \n&gt; On Mon, Mar 24, 2003 at 11:28:37AM -0500, Frank Burough wrote:\n&gt; &gt; I am attempting to access an EJB from a JUnit test. I use the identical\n&gt; &gt; logic in the JUnit test case as I do in a standalone application.\n&gt; &gt; However, when I run the test I get the error:\n&gt; &gt; \n&gt; &gt; javax.naming.CommunicationException.  Root exception is\n&gt; &gt; java.lang.ClassNotFoundException: com.javapro.ejb.StringProcessorHome\n&gt; &gt; (no security manager: RMI class loader disabled)\n&gt; &gt; \n&gt; &gt; Is there any way around this, so I can do some tests which require\n&gt; &gt; connecting to an EJB? If not, I could use any suggestions on integration\n&gt; &gt; testing applications that require access to EJBs.\n&gt; &gt; \n&gt; &gt; Here is the code I use to set up access to the EJB:\n&gt; &gt; \n&gt; &gt;    Properties properties = new Properties();\n&gt; &gt;     properties.put(Context.INITIAL_CONTEXT_FACTORY,\n&gt; &gt; &quot;org.jnp.interfaces.NamingContextFactory&quot;);\n&gt; &gt;     properties.put(Context.PROVIDER_URL, &quot;localhost:1099&quot;);\n&gt; &gt;     properties.put(Context.URL_PKG_PREFIXES,\n&gt; &gt; &quot;org.jboss.naming:org.jnp.interfaces&quot;);\n&gt; &gt; \n&gt; &gt;     InitialContext jndiContext = new InitialContext(properties);\n&gt; &gt;     System.out.println(&quot;Trying to lookup StringProcessor&quot;);\n&gt; &gt;     Object ref = jndiContext.lookup(&quot;StringProcessor&quot;);\n&gt; &gt; \n&gt; &gt; The error occurs on the call to lookup.\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; Thanks for your help,\n&gt; &gt; \n&gt; &gt; Frank\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; To unsubscribe from this group, send an email to:\n&gt; &gt; junit-unsubscribe@yahoogroups.com\n&gt; &gt;  \n&gt; &gt; \n&gt; &gt; Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/\n&gt; &gt; \n&gt; &gt; \n&gt; \n&gt; \n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;  \n&gt; \n&gt; Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/\n&gt; \n&gt; \n\n\n[Non-text portions of this message have been removed]\n\n\n\n", 
    "subject": "Re: [junit] Junit and EJBs"
}