{
    "numMessagesInTopic": 2, 
    "nextInTime": 15415, 
    "senderId": "VqFp3A1RGWpX0uWrKAU_HDUMUyxU6n2QPSASlDUgXNWzx4eamhXhUt-Sz43gbVQLf6204Vqt-y8NeAZQSVi6OO75sopB", 
    "systemMessage": true, 
    "subject": "confusion about testing three layers", 
    "from": "sean liu &lt;seanliugm@...&gt;", 
    "authorName": "sean liu", 
    "msgSnippet": "Hi, I m a java programmer who is now using TDD and junit. In my current project, we are using webwork/spring/hibernate trioes.And in architecture view, there", 
    "msgId": 15414, 
    "profile": "liuzimin15y", 
    "topicId": 15414, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 233114590, 
    "messageBody": "<div id=\"ygrps-yiv-2097512998\">Hi,<br/>\n I&#39;m a java programmer who is now using TDD and junit. In my current<br/>\nproject, we are using webwork/spring/hibernate trioes.And in architecture<br/>\nview, there is a web controller/ service / dao three layer logic separation.<br/>\nAnd there is another important layer called domain model. Sevice layer<br/>\nusually delegate to domain model to complete it&#39;s service and it should be a<br/>\nthin layer. My question is how to test the web && service && domain<br/>\nmodel.After i have tested a particular business logic in domain logic, do i<br/>\nneed to test corresponding conditions in service layer and web<br/>\nlayer.For example, in traditional auction application(citing caveatemptor<br/>\napplication in book &quot;Hibernate In Action&quot;):<br/>\n public class Item implements Serializable {<br/>\npublic Bid placeBid(User bidder, MonetaryAmount bidAmount,<br/>\nBid currentMaxBid, Bid currentMinBid)<br/>\nthrows BusinessException {<br/>\n<br/>\n// Check highest bid (can also be a different Strategy (pattern))<br/>\nif (currentMaxBid != null && currentMaxBid.getAmount().compareTo(bidAmount)&gt;<br/>\n0) {<br/>\nthrow new BusinessException(&quot;Bid too low.&quot;);<br/>\n}<br/>\n<br/>\n// Auction is active<br/>\nif ( !state.equals(ItemState.ACTIVE) )<br/>\nthrow new BusinessException(&quot;Auction is not active yet.&quot;);<br/>\n<br/>\n// Auction still valid<br/>\nif ( this.getEndDate().before( new Date() ) )<br/>\nthrow new BusinessException(&quot;Can&#39;t place new bid, auction already ended.&quot;);<br/>\n<br/>\n// Create new Bid<br/>\nBid newBid = new Bid(bidAmount, this, bidder);<br/>\n<br/>\n// Place bid for this Item<br/>\nthis.getBids.add(newBid);<br/>\n<br/>\nreturn newBid;<br/>\n}<br/>\n}<br/>\n public class ItemManager {<br/>\nprivate ItemDao itemDao;<br/>\npublic void setItemDao(ItemDao itemDao) { this.itemDao = itemDao;}<br/>\npublic Bid loadItemById(Long id) {<br/>\nitemDao.loadItemById(id);<br/>\n}<br/>\npublic Collection listAllItems() {<br/>\nreturn itemDao.findAll();<br/>\n}<br/>\npublic Bid placeBid(Item item, User bidder, MonetaryAmount bidAmount,<br/>\nBid currentMaxBid, Bid currentMinBid) throws BusinessException {<br/>\nitem.placeBid(bidder, bidAmount, currentMaxBid, currentMinBid);<br/>\nitemDao.update(item);<br/>\n }<br/>\n}<br/>\n In this application, i will write four tests for placing bid in domain<br/>\nmodel layer.<br/>\npublic class ItemTest extends TestCase {<br/>\n  public void testPlaceBid() {<br/>\n // all is well<br/>\n // no exception will be thrown<br/>\n }<br/>\n public void testPlaceBidTooLow() { // test placing bid when bid is too low,<br/>\nand there will a exception thrown.<br/>\n }<br/>\npublic void testPlaceBidInactive() { // test placing bid when auction is not<br/>\nactive yet, and there will a exception thrown.<br/>\n }<br/>\n public void testPlaceBidInvalidDate() { // test placing bid when auction<br/>\nalready ended, and there will a exception thrown.<br/>\n }<br/>\n}<br/>\n After i test domain model , do i need to test all the corresponding<br/>\nconditions in service, like this?<br/>\n public class ItemManagerTest extends TestCase {<br/>\n  public void testPlaceBid() {<br/>\n // normal<br/>\n // no exception will be thrown<br/>\n }<br/>\n public void testPlaceBidTooLow() { // test placing bid when bid is too low,<br/>\nand there will a exception thrown.<br/>\n }<br/>\npublic void testPlaceBidInactive() { // test placing bid when auction is not<br/>\nactive yet, and there will a exception thrown.<br/>\n }<br/>\n public void testPlaceBidInvalidDate() { // test placing bid when auction<br/>\nalready ended, and there will a exception thrown.<br/>\n }<br/>\n}<br/>\n I think in both test cases, the tests is nearly same. And if do so, there<br/>\nwill be many tests that look very same spreaded from domain model to service<br/>\nlayer to web layer.But if i don&#39;t do that, it seems that there isn&#39;t tests<br/>\nfor testing service api.<br/>\n I&#39;m a newbie to tdd and junit so maybe this is a silly question for<br/>\nyou.Butanyway i need your help to clear my eyes.<br/>\nThanks a lot!<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 15413, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1131947305", 
    "canDelete": false, 
    "nextInTopic": 15441, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDMzOWQ2NjEwMDUxMTEzMjE0OHFkMTA5ZmU2cmRhMTJkZDg1YWVjNjA1Y0BtYWlsLmdtYWlsLmNvbT4="
    }
}