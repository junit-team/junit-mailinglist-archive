{
    "numMessagesInTopic": 9, 
    "nextInTime": 2906, 
    "senderId": "OllE3AOMmkTghUOVimaOXpQ7eG-nFZmaC0TYT_O7oMClgbVTsDLPyBMmszXiC_OZ7WLkWmXkcRMdJmMvnL2Le-x5Us9C", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: How to test a method without the return value by junit?", 
    "from": "Eric Vought &lt;evought@...&gt;", 
    "authorName": "Eric Vought", 
    "msgSnippet": "// Contrived example /** * Store documents in some fashion or other. Allow them to be * stored and retrieved by a key. All methods will throw an *", 
    "msgId": 2905, 
    "topicId": 2885, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-123165032\">// Contrived example<br/>\n<br/>\n/**<br/>\n * Store documents in some fashion or other. Allow them to be<br/>\n * stored and retrieved by a key. All methods will throw an<br/>\n * InvalidStateException if the map has not<br/>\n * been connected or has already been closed.<br/>\n */<br/>\npublic interface DocumentMap<br/>\n{<br/>\n    /** Connect to the back end datastore. Must be first call. */<br/>\n    public void connect(String connectInfo) throws IOException;<br/>\n<br/>\n    /** Store a document with a key. */<br/>\n    public void put(String key, Reader doc)<br/>\n\tthrows IOException;<br/>\n<br/>\n    public void delete(String key) throws IOException;<br/>\n<br/>\n    public boolean contains(String key) throws IOException;<br/>\n<br/>\n    public Reader get(String key) throws IOException;<br/>\n<br/>\n    /**<br/>\n     * Cleans up persistant resources and closes the connection.<br/>\n     * No other methods may be called once close() has been called.<br/>\n     */<br/>\n    public void close() throws IOException;<br/>\n} // DocumentMap<br/>\n<br/>\nWe have a number of abstract methods here which don&#39;t return anything:<br/>\nconnect, delete, put, close. They are abstract, so we don&#39;t know how they<br/>\nwill be implemented to test side effects. Clearly, though they will change<br/>\nthe state of the object in a way that is detectable from the other<br/>\nmethods. The following:<br/>\n<br/>\npublic void testConnect() throws Exception<br/>\n{<br/>\n    d_docMap.connect(&quot;Some valid connect string&quot;);<br/>\n    d_docMap.close();<br/>\n} // testConnect()<br/>\n<br/>\nShould succeed, just as clearly as:<br/>\n<br/>\npublic void testCloseNotConnected() throws Exception<br/>\n{<br/>\n    d_docMap.connect(&quot;Some valid connect string&quot;);<br/>\n    try {<br/>\n        d_docMap.close();<br/>\n    } catch (InvalidStateException e) {<br/>\n\t// Succeed<br/>\n\treturn;<br/>\n    }<br/>\n<br/>\n    fail(&quot;Didn&#39;t get an InvalidStateException!&quot;);<br/>\n} // testCloseNotConnected()<br/>\n<br/>\nShould get the exception it tests for.<br/>\n<br/>\nSimilarly, assuming d_docMap is always initialized to empty:<br/>\n<br/>\npublic void testContainsWhenEmpty()<br/>\n{<br/>\n    d_docMap.connect(&quot;Some valid connect string&quot;);<br/>\n<br/>\n    try {<br/>\n        assertFalse(d_docMap.contains(&quot;noSuchKey&quot;));<br/>\n    } finally {<br/>\n        d_docMap.close();<br/>\n    }<br/>\n} // testContainsWhenEmpty()<br/>\n<br/>\npublic void testContains()<br/>\n{<br/>\n    d_docMap.connect(&quot;Some valid connect string&quot;);<br/>\n<br/>\n    try {<br/>\n        d_docMap.put(&quot;key&quot;, d_testStringReader);<br/>\n        assertTrue(d_docMap.contains(&quot;key&quot;));<br/>\n    } finally {<br/>\n        d_docMap.close();<br/>\n    }<br/>\n} // testContains()<br/>\n<br/>\nShould succeed. In fact:<br/>\n<br/>\npublic void testContains()<br/>\n{<br/>\n    d_docMap.connect(&quot;Some valid connect string&quot;);<br/>\n    try {<br/>\n        d_docMap.put(&quot;key&quot;, d_testStringReader);<br/>\n    } finally {<br/>\n        d_docMap.close();<br/>\n    }<br/>\n<br/>\n    d_docMap2.connect(&quot;Some valid connect string&quot;);<br/>\n    try {<br/>\n        assertTrue(d_docMap.contains(&quot;key&quot;));<br/>\n    } finally {<br/>\n        d_docMap.close();<br/>\n    }<br/>\n} // testContains()<br/>\n<br/>\nShould succeed given the persistant nature expressed in the interface<br/>\ndefinition. You should be able to come up with a number of other<br/>\ntestcases, e.g. ensureing that contains() returns false after delete(),<br/>\nand so forth.<br/>\n<br/>\nNow, how do you write the testcases for the interface so that you can<br/>\nrerun them against implementation classes?<br/>\n<br/>\npublic class DocumentMapTest extends TestCase<br/>\n{<br/>\n    public DocumentMapTest(String name) {super(name);}<br/>\n<br/>\n    public DocumentMap d_docMap;<br/>\n    public DocumentMap d_docMap2;<br/>\n    public StringReader d_testStringReader;<br/>\n<br/>\n    public void setUp() throws Exception<br/>\n    {<br/>\n        d_docMap = setUpDocMap();<br/>\n        d_docMap2 = setUpDocMap();<br/>\n<br/>\n\td_testStringReader = ...<br/>\n    } // setUp()<br/>\n<br/>\n    /** Override this to return the correct subclass. */<br/>\n    public DocumentMap setUpDocMap() throws Exception<br/>\n    {<br/>\n\treturn new DocumentMapStub();<br/>\n    } // setUpDocMap()<br/>\n<br/>\n    // Add tests here ...<br/>\n} // DocumentMapTest<br/>\n<br/>\nWe create a test case which operates on a generic DocumentMap without<br/>\ncaring about its particular type. An actual implementation is returned<br/>\nfrom setUpDocMap(), which will be overridden in a specific test case<br/>\nclass. To test our tests and make sure we understand the interface, we<br/>\ncreate DocumentMapStub, the simplest possible valid implementation of a<br/>\nDocumentMap, probably using an in-memory HashMap or something to hold its<br/>\ndocuments. When we want to test a specific implementation, say FileDocMap:<br/>\n<br/>\npublic class FileDocMapTest extends DocumentMapTest<br/>\n{<br/>\n    public FileDocMapTest(String name) {super(name);}<br/>\n<br/>\n    public DocumentMap setUpDocMap() throws Exception<br/>\n    {<br/>\n        return new FileDocMap();<br/>\n    }<br/>\n<br/>\n    // Add any specific FileDocMap tests here ...<br/>\n} // FileDocMapTest<br/>\n<br/>\nThe testcases from DocumentMapTest will automatically be pulled in and<br/>\nrun. You very well may need to store the connect string and override it in<br/>\nthe same way you override the actual class of the DocumenMap, i.e. by<br/>\ncreating a setUpConnectString() method.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Wed, 10 Oct 2001 <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:chenhuitao@...\">chenhuitao@...</a> wrote:<br/>\n<br/>\n&gt; Thank you for your help! I got some idea from you. Thanks.<br/>\n&gt;<br/>\n&gt; But if the classes and the methods I want to test are abstract, I<br/>\n&gt; can&#39;t know what will happen in the methods of the subclasses which<br/>\n&gt; extend from these abstract classes. Why I asked this question is that<br/>\n&gt; these classes I will test are a framework of our project, many of<br/>\n&gt; them are abstract classes. Our project team must follow this<br/>\n&gt; framework and extend from these abstract classes to develop our<br/>\n&gt; project. Now I was assigned to test if this framework is correct.<br/>\n&gt; What can I do?<br/>\n&gt; Any help will be appreciated greatly!<br/>\n&gt;<br/>\n&gt; --- In junit@y..., Rob Nielsen &lt;rob@v...&gt; wrote:<br/>\n&gt; &gt; If the method doesn&#39;t return anything then it probably modifies<br/>\n&gt; fields<br/>\n&gt; &gt; of the class somehow.  You can therefore test the value of this<br/>\n&gt; changed<br/>\n&gt; &gt; object. ie:<br/>\n&gt; &gt;<br/>\n&gt; &gt; public class Foo<br/>\n&gt; &gt; {<br/>\n&gt; &gt;   int x;<br/>\n&gt; &gt;<br/>\n&gt; &gt;   public Foo(int x)<br/>\n&gt; &gt;   {<br/>\n&gt; &gt;     this.x=x;<br/>\n&gt; &gt;   }<br/>\n&gt; &gt;<br/>\n&gt; &gt;   public int getX()<br/>\n&gt; &gt;   {<br/>\n&gt; &gt;     return x;<br/>\n&gt; &gt;   }<br/>\n&gt; &gt;<br/>\n&gt; &gt;   public void incrementX()<br/>\n&gt; &gt;   {<br/>\n&gt; &gt;     x++;<br/>\n&gt; &gt;   }<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; public class FooTest extends TestCase<br/>\n&gt; &gt; {<br/>\n&gt; &gt;   public void testIncrementX()<br/>\n&gt; &gt;   {<br/>\n&gt; &gt;     Foo foo=new Foo(5);<br/>\n&gt; &gt;     foo.incrementX();<br/>\n&gt; &gt;     assertEquals(6,foo.getX());<br/>\n&gt; &gt;   }<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; chenhuitao@y... wrote:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I am a newbie to junit.But now i have a job in my hand.I need to<br/>\n&gt; use<br/>\n&gt; &gt; &gt; JUnit to test some existed java programme.Some methods of classes<br/>\n&gt; &gt; &gt; have no return value.I can not change the source programme.How<br/>\n&gt; can I<br/>\n&gt; &gt; &gt; test these programme by JUnit?<br/>\n&gt; &gt; &gt; Thank you for your any help!<br/>\n&gt; &gt; &gt; //BR ChenHuitao<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; &gt; junit-unsubscribe@y...<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Your use of Yahoo! Groups is subject to<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n-- <br/>\nEric Vought<br/>\nChief Technical Officer - QLUE Consulting, Inc.<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a> toll-free: 888-771-3538  RTP area: 919-816-9901 </span></blockquote></div>", 
    "prevInTime": 2904, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1002745529", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 2896, 
    "headers": {
        "inReplyToHeader": "PDlxMGN1cStlaWhwQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PFBpbmUuTE5YLjQuMzAuMDExMDEwMTQxNDQyMC4zMjUwMS0xMDAwMDBAYnJhaW4ucWx1ZS1sYW4+"
    }
}