{
    "numMessagesInTopic": 5, 
    "nextInTime": 11837, 
    "senderId": "BHW9FKoQShbMv5AT3wRXppqOzoPsW4HpZzovDPtqLuDYd8VCo9b5pjsbeFjKXPznWiT3lLqhAK_8RrMTnwnHPop9yXZcj0mRi5ax9g", 
    "systemMessage": true, 
    "subject": "Re: awkward threading situation", 
    "from": "&quot;sagyrozman&quot; &lt;sagyrozman@...&gt;", 
    "authorName": "sagyrozman", 
    "msgSnippet": "Great, this seems to solve the problem and it also makes sense. thanks again. ... this ... In ... the ... are ... handle ... before ... queue? ... let ... ", 
    "msgId": 11836, 
    "profile": "sagyrozman", 
    "topicId": 11797, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190178427, 
    "messageBody": "<div id=\"ygrps-yiv-1606873917\">Great, this seems to solve the problem and it also makes <br/>\nsense.<br/>\nthanks again.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Timothy Wall &lt;twall@o...&gt; wrote:<br/>\n&gt; Add another listener to your window for WINDOW_OPENED (note that <br/>\nthis <br/>\n&gt; event is only posted once for any given window) which sets a flag.  <br/>\nIn <br/>\n&gt; your main test thread, wait for that flag to be set before posting <br/>\nthe <br/>\n&gt; invokeAndWait empty runnable.  This ensures that your runnable gets <br/>\n&gt; processed *after* your original WINDOW_OPENED handler has finished <br/>\n&gt; (unless it spawns threads or some such).<br/>\n&gt; <br/>\n&gt; You might also check out <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:java-gui-testing@yahoogroups.com\">java-gui-testing@yahoogroups.com</a>  There <br/>\nare <br/>\n&gt; several extensions to JUnit which are specifically designed to <br/>\nhandle <br/>\n&gt; such issues (see the Links/Tools area of the group).<br/>\n&gt; <br/>\n&gt; On Aug 22, 2004, at 2:45 AM, sagyrozman wrote:<br/>\n&gt; <br/>\n&gt; &gt; thanks for the reply.<br/>\n&gt; &gt; I was thinking the same thing but didn&#39;t know how to sync with the<br/>\n&gt; &gt; AWT event queue thread.<br/>\n&gt; &gt; I tried it and it passed at first attempt, but the next attempts<br/>\n&gt; &gt; didn&#39;t always pass.<br/>\n&gt; &gt; I think the problem is the empty runnable is sometimes added <br/>\nbefore<br/>\n&gt; &gt; the setVisible(true) event is added to the queue, maybe because a<br/>\n&gt; &gt; different thread (other than the main thread) is responsible for<br/>\n&gt; &gt; adding the events to the AWT queue?<br/>\n&gt; &gt;<br/>\n&gt; &gt; Is a there a different way to synchronize with the swing event <br/>\nqueue?<br/>\n&gt; &gt;<br/>\n&gt; &gt; If this topic is out of scope for this discussion group, please <br/>\nlet<br/>\n&gt; &gt; me know. It might be better suited for a swing discussion group.<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Timothy Wall &lt;twall@o...&gt; wrote:<br/>\n&gt; &gt;&gt; It&#39;s entirely possible that your main thread checks the mock <br/>\nstatus<br/>\n&gt; &gt;&gt; prior to the events actually being handled.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; Consider adding the following after frame.show():<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; SwingUtilities.invokeAndWait(new Runnable() { public void run()<br/>\n&gt; &gt; { }});<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; On Aug 18, 2004, at 2:15 AM, sagyrozman wrote:<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;&gt; hi all,<br/>\n&gt; &gt;&gt;&gt; I was writing a test for a GUI class which should delegate GUI<br/>\n&gt; &gt; events<br/>\n&gt; &gt;&gt;&gt; to another object:<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; class MyFrame extends JFrame implements WindowListener{<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; TargetForEvents target;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; public void setTarget(TargetForEvents t) {<br/>\n&gt; &gt;&gt;&gt;    target = t;<br/>\n&gt; &gt;&gt;&gt; }<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; ....<br/>\n&gt; &gt;&gt;&gt; }<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; in the test case:<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; ...<br/>\n&gt; &gt;&gt;&gt; MyFrame frame = new MyFrame();<br/>\n&gt; &gt;&gt;&gt; frame.setTarget(mockTarget);<br/>\n&gt; &gt;&gt;&gt; frame.setVisible();<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; now I check that the expected functions where called on the <br/>\ntaget<br/>\n&gt; &gt; in<br/>\n&gt; &gt;&gt;&gt; response to the WindowOpened events of MyFrame.<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; the test fails even though it should have passed because using <br/>\nthe<br/>\n&gt; &gt;&gt;&gt; eclipse debuger I can see that the mock is called upon in the<br/>\n&gt; &gt; swing<br/>\n&gt; &gt;&gt;&gt; event handling thread, but when checking back with the main <br/>\nthread<br/>\n&gt; &gt;&gt;&gt; the mock is not affected by these changes.<br/>\n&gt; &gt;&gt;&gt; Another weird thing: I tried to do a similar test only not <br/>\nthrough<br/>\n&gt; &gt;&gt;&gt; junit, instead of asserting that the methods where called, I <br/>\nwrote<br/>\n&gt; &gt;&gt;&gt; the mock log string out to the stdout. This time the output <br/>\nshows<br/>\n&gt; &gt;&gt;&gt; that all methods where called in the correct order.<br/>\n&gt; &gt;&gt;&gt; Am I missing something here? please let me know if any further<br/>\n&gt; &gt;&gt;&gt; clarification is needed.<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt; Yahoo! Groups Links<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;&gt;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; </span></blockquote></div>", 
    "prevInTime": 11835, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1093248958", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 11831, 
    "headers": {
        "inReplyToHeader": "PDc4QUExODdELUY0NjctMTFEOC04NkI0LTAwMzA2NUJGODNEQUBvY3VsdXN0ZWNoLmNvbT4=", 
        "messageIdInHeader": "PGNnYzkzdStmMmZjQGVHcm91cHMuY29tPg=="
    }
}