{
    "numMessagesInTopic": 24, 
    "nextInTime": 8892, 
    "senderId": "n5sjN-z-z0yNTO82uLihWPqrW_PodwqamQt8xEGspcGqADIKF73_py4lLdhdtKGK14nkryin0x6VolmDkHf-UEovQp73xnve", 
    "systemMessage": false, 
    "subject": "Re: How to test a main(String[] args) method?", 
    "from": "&quot;jxingtang&quot; &lt;jxingtang@...&gt;", 
    "authorName": "jxingtang", 
    "msgSnippet": "... Depending ... problem is ... an ... cases ... because ... there is no ... use an ... method has ... use an ... comments ... private package ... // going to", 
    "msgId": 8891, 
    "rawEmail": "Return-Path: &lt;jxingtang@...&gt;\r\nReceived: (qmail 87744 invoked by uid 7800); 31 Jul 2003 23:58:32 -0000\r\nX-Sender: jxingtang@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 19523 invoked from network); 31 Jul 2003 22:33:15 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m6.grp.scd.yahoo.com with QMQP; 31 Jul 2003 22:33:15 -0000\r\nReceived: from unknown (HELO n37.grp.scd.yahoo.com) (66.218.66.105)\n  by mta1.grp.scd.yahoo.com with SMTP; 31 Jul 2003 22:33:15 -0000\r\nReceived: from [66.218.67.169] by n37.grp.scd.yahoo.com with NNFMP; 31 Jul 2003 22:33:15 -0000\r\nDate: Thu, 31 Jul 2003 22:33:13 -0000\r\nTo: junit@yahoogroups.com\r\nSubject: Re: How to test a main(String[] args) method?\r\nMessage-ID: &lt;bgc5f9+l6mp@...&gt;\r\nIn-Reply-To: &lt;NFBBLFDNMJLNLJAJJKNAKEKHFHAA.achepati67@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 4515\r\nX-Mailer: Yahoo Groups Message Poster\r\nFrom: &quot;jxingtang&quot; &lt;jxingtang@...&gt;\r\nX-Yahoo-Group-Post: member; u=126373237\r\nX-Yahoo-Profile: jxingtang\r\nX-eGroups-Approved-By: nails762 &lt;jbrains@...&gt; via email; 31 Jul 2003 23:58:32 -0000\r\n\r\n--- In junit@yahoogroups.com, &quot;David&quot; &lt;achepati67@y...&gt; wrote:\n&gt; &gt;Dear Members,\n&gt; &gt;\n&gt; &gt;I whould like to test a class with a main(String[] args) method. \nDepending\n&gt; &gt;on the input argument it executes one thing or the other. The \nproblem is\n&gt; &gt;that on my main(String[] args) method at the end or when it founds \nan\n&gt; error,\n&gt; &gt;the method System.exit() is invoked. So when I define jUnit test \ncases\n&gt; &gt;(methods with prefix test), jUnits only runs the first test, \nbecause\n&gt; some&gt;System.exit() was invoked.\n&gt; &gt;Is there any way to test such kind of situations?\n&gt; &gt;Thanks in advance,\n&gt; \n&gt; The solution propoused by Bern was:\n&gt; \n&gt; java.lang.System is final and does not implement interfaces,so \nthere is no\n&gt; chance to replace ist behaviour.You may want to replace calls to\n&gt; System.exit() with calls againstan interface you define. Under test \nuse an\n&gt; implementation which allowsyourtest code to chech if the exit \nmethod has\n&gt; been called by main() but whichdoes not exit the VM. In production \nuse an\n&gt; implememtation which delegatesto System.exit().\n&gt; \n&gt; As far as I know what you mean could be implemented like this: (see \ncomments\n&gt; below)\n&gt; \n&gt; package com.my.example\n&gt; \n&gt; public class Example {\n&gt; \tstatic Finish _finish = new Example.ProductionFinish();// \nprivate package\n&gt; (static because it is\n&gt; \t\t\t\t\t\t\t\t\n\t\t// going to be used on main.)\n&gt; \tstatic void setFinish(Finish value){_finish = value;}\t// \nprivate package\n&gt; \n&gt; \tstatic main (String[] args)\n&gt; \n&gt; \t\tboolean goOn = true; \t// because we don&#39;t exit on \ntesting mode,\n&gt; \t\t\t\t\t\t// we need a way for \ncontroling the execution flow.\n&gt; \t\tif (someCondition) {// first checking (exceptional \nflow)\n&gt; \t\t\tgoOn = finish.do(-1);\n&gt; \t\t}\n&gt; \t\t// ... put other checking here\n&gt; \t\tif (goOn && otherCondition) {// main flow\n&gt; \t\t\tfinish.do(0);\n&gt; \t\t}\n&gt; \t}\n&gt; \n&gt; \t/* Now we define the interface Finish and its default \nimplementation (as\n&gt; inner classes\n&gt; \twith private-package visibility, because we have to define \nONLY for testing\n&gt; purpose this\n&gt; \tinterface!)*/\n&gt; \n&gt; \tinterface Finish {\n&gt; \t\tboolean do(int i);\n&gt; \t}\n&gt; \n&gt; \tclass ProductionFinish {// its default implementation (used \non production\n&gt; mode)\n&gt; \t\tProductionFinish(){} // default constructor with \nprivate-package\n&gt; visibility\n&gt; \t\tboolean do(int i) {\n&gt; \t\t\tSystem.exit(i);\n&gt; \t\t}\n&gt; \t}\n&gt; }\n&gt; \n&gt; Now on the testing class defined on the same package:\n&gt; \n&gt; package com.my.example\n&gt; \n&gt; public class ExampleTest extends TestCase{\n&gt; \t// ...\n&gt;     \tprotected void setUp (){Example.setFinish(new\n&gt; ExampleTest.TestingFinish());}\n&gt; \t}\n&gt; \tclass TestingFinish implements Example.Finish{\n&gt; \t\tTestingFinish (){} // default constructor with \nprivate-package visibility\n&gt; \t\tboolean do(int i) { // We have to stop on every case!\n&gt; \t\t\treturn false;\n&gt; \t\t}\n&gt; \t}\n&gt; }\n&gt; \n&gt; COMMENTS:\n&gt; \n&gt; - About this suggestion and the corresponding implementation, \nbecause we\n&gt; need a default implementation ALWAYS (for production), then instead \nof using\n&gt; an INTERFACE, it is BETTER to just define the class Finish as \nABSTRACT (the\n&gt; do(int i) method should be abstract)\n&gt; \n&gt; - You have to write A LOT for makeing a very simple task. I have \nimplemented\n&gt; a simpler solution, just do the following steps:\n&gt; \n&gt; a) Define on the class to test (Example), the static boolean field \n_TEST as\n&gt; private-package. This field is initialized with default value: false\n&gt; (production)\n&gt; \n&gt; b) Define a STATIC PRIVATE method finish, like this:\n&gt; \t\tprivate static boolean finish(int i) {\n&gt; \t\t\tif(!_TEST) {\n&gt; \t\t\t\tSystem.exit(i);\n&gt; \t\t\t}\n&gt; \t\t\treturn false;\n&gt; \t\t}\n&gt; c) On the testing class (ExampleTest), set on the setup() method, \nthe field\n&gt; _TEST to true.\n&gt; \n&gt; \n&gt; Now we have:\n&gt; \n&gt; package com.my.example\n&gt; \n&gt; public class Example {\n&gt; \tstatic boolean _TEST = false;\n&gt; \n&gt; \tstatic main (String[] args)\n&gt; \n&gt; \t\tboolean goOn = true;\n&gt; \t\tif (someCondition) {// fist checking\n&gt; \t\t\tgoOn = finish(-1);\n&gt; \t\t}\n&gt; \t\t// ... put other checking here\n&gt; \t\tif (goOn && otherCondition) {// the last condition \n(end of the program)\n&gt; \t\t\tfinish(-1);\n&gt; \t\t}\n&gt; \t}\n&gt; \n&gt; \tprivate static boolean finish (int i) {\n&gt; \t\tif (!_TEST) {\n&gt; \t\t\tSystem.exit(i);\n&gt; \t\t}\n&gt; \t\treturn false;\n&gt; \t}\n&gt; }\n&gt; \n&gt; package com.my.example\n&gt; \n&gt; public class ExampleTest extends TestCase{\n&gt; \t// ...\n&gt;     \tprotected void setUp (){Example._TEST = true;}\n&gt; \t}\n&gt; }\n&gt; \n&gt; I think this solution is enough. Any suggestion?\n&gt; \n&gt; Thanks in advance,\n&gt; \n&gt; David\n\n\nJust wondering how the testMain() looks like? How do you cover for \nall different arguments combination? Do you have to separate testMain\n() for each scenario? Thanks!\n\n\n", 
    "profile": "jxingtang", 
    "topicId": 8737, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 126373237, 
    "prevInTime": 8890, 
    "contentTrasformed": false, 
    "postDate": "1059690793", 
    "canDelete": false, 
    "nextInTopic": 8919, 
    "prevInTopic": 8859, 
    "headers": {
        "inReplyToHeader": "PE5GQkJMRkROTUpMTkxKQUpKS05BS0VLSEZIQUEuYWNoZXBhdGk2N0B5YWhvby5lcz4=", 
        "messageIdInHeader": "PGJnYzVmOStsNm1wQGVHcm91cHMuY29tPg=="
    }
}