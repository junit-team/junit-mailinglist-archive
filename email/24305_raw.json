{
    "numMessagesInTopic": 30, 
    "nextInTime": 24306, 
    "senderId": "Rl8EBsY_U8DxMd6JDzP_TZORLqzJoRZJI97VD3anLMOhdiELO65sZfAJ5644Yz63P-3V36eS9RThL8ssKYVYDOrYC33z6g", 
    "systemMessage": false, 
    "subject": "Re: Feedback requested: Impending changes to RunListener", 
    "from": "&quot;tibord47&quot; &lt;tibord47@...&gt;", 
    "authorName": "tibord47", 
    "msgSnippet": "Hi All, Stephan, I would also prefer javax package. Let s see this link wich is listing all artifacts having javax.**.ThreadSafe ", 
    "msgId": 24305, 
    "rawEmail": "Return-Path: &lt;tibord47@...&gt;\r\nReceived: (qmail 9277 invoked by uid 7800); 12 Feb 2013 12:25:52 -0000\r\nX-Sender: tibord47@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 54387 invoked from network); 12 Feb 2013 12:06:33 -0000\r\nX-Received: from unknown (10.193.84.150)\n  by m11.grp.bf1.yahoo.com with QMQP; 12 Feb 2013 12:06:33 -0000\r\nX-Received: from unknown (HELO ng5-vm5.bullet.mail.gq1.yahoo.com) (98.136.219.57)\n  by mta2.grp.bf1.yahoo.com with SMTP; 12 Feb 2013 12:06:32 -0000\r\nX-Received: from [98.137.0.87] by ng5.bullet.mail.gq1.yahoo.com with NNFMP; 12 Feb 2013 12:06:32 -0000\r\nX-Received: from [10.193.94.42] by tg7.bullet.mail.gq1.yahoo.com with NNFMP; 12 Feb 2013 12:06:31 -0000\r\nDate: Tue, 12 Feb 2013 12:06:31 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;kfdb87+p64v@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;tibord47&quot; &lt;tibord47@...&gt;\r\nSubject: Re: Feedback requested: Impending changes to RunListener\r\nX-Yahoo-Group-Post: member; u=507342950; y=DrqxeQyWaacr2if0mRazKa4fcnl07TQ_WYnfeuKA6vxKmrg\r\nX-Yahoo-Profile: tibord47\r\nX-eGroups-Approved-By: dsaff &lt;david@...&gt; via email; 12 Feb 2013 12:25:52 -0000\r\n\r\nHi All,\n\nStephan, I would also prefer javax package.\nLet&#39;s see this link wi=\r\nch is listing all artifacts having javax.**.ThreadSafe\n\nhttp://mavenhub.com=\r\n/c/javax/annotation/concurrent/ThreadSafe/dependency\n\nI have also the same =\r\nproblem with their versions. My objection to these is that, there is no uni=\r\nque and final artifact related to JSR-305, and none of them has groupId &quot;su=\r\nn&quot;, &quot;oracle&quot;, nor &quot;javax&quot;.\nThey may change as a long as the JSR changes. Th=\r\ne JSR 305 is not final.\n\nHopefully, the jcip is more considered standard an=\r\nd the version would not change.\nIn worst case your Maven module will have t=\r\nwo @ThreadSafe annotations on the top of listener&#39;s class including two pac=\r\nkages.\n\nThe license of jcip allows us to copy the content of the annotation=\r\n, but I am not sure if we are allowed to repackage it.\nIf not, I already su=\r\nbmited ThreadSafe annotation in junit package\nhttps://github.com/Tibor17/ju=\r\nnit/commit/708d972c904310a65fcf812c343fb9639d29776d\n\nI am not mentioning th=\r\nis commit because it&#39;s mine, nothing but because this issue takes quite lon=\r\ng and we freezed to resolve it.\nHaving such annotation in JUnit package is =\r\nalso not the best idea.\n\nOne solution of not being dependent on findbugs an=\r\nd net.jcip artifacts, either the JUnit annotation is to detect the annotati=\r\non &quot;javax.annotation.concurrent.ThreadSafe&quot; as String : class name but not =\r\nthe class object itself. This allows us to be compatible with the Maven art=\r\nifacts and the finalized JSR 305 in JDK.\n\nOf course we can add such maven d=\r\nependency later and annotate JUnit classes ThreadSafe/NotThreadSafe in othe=\r\nr pulls if we want to.\nBut this is not our goal yet.\n\nSounds promissing?\n\nC=\r\nheers,\nTibor\n\n\n\n\n--- In junit@yahoogroups.com, &quot;sschroev&quot;  wrote:\n&gt;\n&gt; At th=\r\ne risk of repeating myself: my only objection is with the package in which =\r\nsaid annotation resides: net.jcip.annotations instead of javax.annotation.c=\r\noncurrent. But that argument can also be made in reverse. Hence my suggesti=\r\non to inspect the annotation&#39;s simple name only. That also makes the licenc=\r\ning discussion mood, unless one wishes to depend on jcip-annotation to prov=\r\nide a &quot;default&quot; or &quot;preferred&quot; version of the annotation. That&#39;s fine of co=\r\nurse. :) Though then do please mark the dependency : otherwise I have to st=\r\nart explicitly excluding it (I derive my annotations from one of the FindBu=\r\ngs modules mentioned in an earlier email; no need to duplicate classes on t=\r\nhe classpath).\n&gt; \n&gt; Cheers,\n&gt; Stephan\n&gt; \n&gt; --- In junit@yahoogroups.com, &quot;t=\r\nibord47&quot;  wrote:\n&gt; &gt;\n&gt; &gt; Hi all junit guys,\n&gt; &gt; \n&gt; &gt; Let me turn back to th=\r\ne original problem.\n&gt; &gt; \n&gt; &gt; We knew that it&#39;s a good idea to let the users=\r\n to annotated a custom listener by @ThreadSafe if it&#39;s really thread-safe.\n=\r\n&gt; &gt; \n&gt; &gt; In every other case the given listener is wrapped in synchronized =\r\nlistener which is package private class.\n&gt; &gt; \n&gt; &gt; I am convinced that we sh=\r\nould not make synchronized listener public since this is our internal patch=\r\n.\n&gt; &gt; \n&gt; &gt; The user may have whatever thread-safe listener depending on imp=\r\nlementation and still not having it synchronized. Thus s/he can annotated t=\r\nhe clas by @ThreadSafe.\n&gt; &gt; We are synchronizing the listener&#39;s methods int=\r\nernally in the patch only because the user&#39;s implementation is unknown -lis=\r\ntener in not annotated yet.\n&gt; &gt; \n&gt; &gt; Back to jcip-annotations license. Such=\r\n library is under Creative Commons Attribution License (http://creativecomm=\r\nons.org/licenses/by/2.5).\n&gt; &gt; \n&gt; &gt; If we use Maven dependency, we are free =\r\nto share, distribute and transmit.\n&gt; &gt; So there is no legal issue for the J=\r\nUnit.\n&gt; &gt; \n&gt; &gt; Any objections to this lincense?\n&gt; &gt; \n&gt; &gt; Thx, Tibor\n&gt; &gt; \n&gt; =\r\n&gt; \n&gt; &gt; \n&gt; &gt; --- In junit@yahoogroups.com, &quot;sschroev&quot;  wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; I =\r\nunderstand your concerns w.r.t. the intended semantics of third-party @Thre=\r\nadSafe annotations. For that reason I could certainly get behind a differen=\r\ntly-named annotation such as @Concurrent. Adding one more annotation is che=\r\nap, after all ;)\n&gt; &gt; &gt; \n&gt; &gt; &gt; Cheers,\n&gt; &gt; &gt; Stephan\n&gt; &gt; &gt; \n&gt; &gt; &gt; --- In jun=\r\nit@yahoogroups.com, Kevin Cooney  wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; On Wed, Feb 6, 201=\r\n3 at 10:06 AM, sschroev  wrote:\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; &gt; **\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt;=\r\n &gt; &gt; &gt; &gt; I like the idea, a lot!\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; But would like to ask =\r\nthat only the *simple name* of the annotation is\n&gt; &gt; &gt; &gt; &gt; considered, with=\r\nout regard for the package in which it resides.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Interesti=\r\nng idea.\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; It looks like Guice uses this strategy for @Nulla=\r\nble (\n&gt; &gt; &gt; &gt; https://code.google.com/p/google-guice/wiki/UseNullable)\n&gt; &gt; =\r\n&gt; &gt; \n&gt; &gt; &gt; &gt; That would require us to iterate through all of the class&#39;s an=\r\nnotations, vs\n&gt; &gt; &gt; &gt; a simple getAnnotation() call, but listeners are not =\r\nadded and removed very\n&gt; &gt; &gt; &gt; often.\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; &gt;  This way one can:=\r\n\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; 1. Use an alternative third-party annotation, such as\n=\r\n&gt; &gt; &gt; &gt; &gt; javax.annotation.concurrent.ThreadSafe from libraries like\n&gt; &gt; &gt; =\r\n&gt; &gt; com.google.code.findbugs:jsr305:1.3.9 and\n&gt; &gt; &gt; &gt; &gt; com.google.code.fin=\r\ndbugs:annotations:2.0.1.\n&gt; &gt; &gt; &gt; &gt; 2. Define a private annotation, without =\r\nadding _any_ additional dependency.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Alternatively, we cou=\r\nld add a JUnit-specific annotation (possibly named\n&gt; &gt; &gt; &gt; &quot;Concurrent&quot;) an=\r\nd you could annotate your class with both annotations (ob\n&gt; &gt; &gt; &gt; meme: htt=\r\np://www.quickmeme.com/meme/3svo5h/)\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; One reservation I have=\r\n with using @ThreadSafe is that usually the\n&gt; &gt; &gt; &gt; jcip-annotations docume=\r\nnts behavior (sure, it is used by findbugs to find\n&gt; &gt; &gt; &gt; potential bugs, =\r\nbut that&#39;s validation based on behavior documented in\n&gt; &gt; &gt; &gt; annotations).=\r\n Here we are proposing using @ThreadSafe to modify behavior.\n&gt; &gt; &gt; &gt; Someon=\r\ne might not expect by simply adding an annotation to a class they are\n&gt; &gt; &gt;=\r\n &gt; changing the behavior of code that uses instances of the class.\n&gt; &gt; &gt; &gt; =\r\n\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; I use javax.annotation.concurrent.ThreadSafe quite a l=\r\not in my own code,\n&gt; &gt; &gt; &gt; &gt; so (1) is quite important from my perspective.=\r\n There are precedents for\n&gt; &gt; &gt; &gt; &gt; this approach: IIRC, Eclipse does somet=\r\nhing like this for variations on\n&gt; &gt; &gt; &gt; &gt; @Nullable and @Nonnull, whereas =\r\n(again, IIRC) Findbugs handles two\n&gt; &gt; &gt; &gt; &gt; instances of @SuppressWarnings=\r\n.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Cheers,\n&gt; &gt; &gt; &gt; &gt; Stephan\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;=\r\n &gt; --- In junit@yahoogroups.com, Kevin Cooney wrote:\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; =\r\n&gt; Hello, everyone\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; Short version: we are thinking of=\r\n adding an optional dependency from\n&gt; &gt; &gt; &gt; &gt; JUnit\n&gt; &gt; &gt; &gt; &gt; &gt; to jcip-ann=\r\notations and are soliciting feedback.\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; A few people =\r\nhave noticed that when you use ParallelComputer, you got\n&gt; &gt; &gt; &gt; &gt; poor\n&gt; &gt;=\r\n &gt; &gt; &gt; &gt; performance because calls to registered RunListeners are synchroni=\r\nzed. We\n&gt; &gt; &gt; &gt; &gt; &gt; would like to fix this in the next release of JUnit.\n&gt; =\r\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; In order to prevent affecting existing users, we are =\r\nproposing having an\n&gt; &gt; &gt; &gt; &gt; &gt; annotation that can be added to RunListener=\r\n implementations that can\n&gt; &gt; &gt; &gt; &gt; safely\n&gt; &gt; &gt; &gt; &gt; &gt; be called concurrent=\r\nly from multiple threads. If a RunListener passed to\n&gt; &gt; &gt; &gt; &gt; a\n&gt; &gt; &gt; &gt; &gt; =\r\n&gt; RunNotifier is not annotated with this annotation, JUnit will wrap it\n&gt; &gt;=\r\n &gt; &gt; &gt; with\n&gt; &gt; &gt; &gt; &gt; &gt; a decorator that does synchronization.\n&gt; &gt; &gt; &gt; &gt; &gt;\n=\r\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; We would appreciate feedback on this new annotation=\r\n.\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; We have two options:\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; a. C=\r\nreate our own annotation for this\n&gt; &gt; &gt; &gt; &gt; &gt; b. Use ThreadSafe (\n&gt; &gt; &gt; &gt; &gt;=\r\n &gt;\n&gt; &gt; &gt; &gt; &gt; http://grepcode.com/file/repo1.maven.org/maven2/net.jcip/jcip-=\r\nannotations/1.0/net/jcip/annotations/ThreadSafe.java\n&gt; &gt; &gt; &gt; &gt; &gt; )\n&gt; &gt; &gt; &gt; =\r\n&gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; The advantages to option b are:\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; 1. =\r\nIt&#39;s a well-known annotation\n&gt; &gt; &gt; &gt; &gt; &gt; 2. Users that use JUnit can add th=\r\nis annotation to their thread-safe\n&gt; &gt; &gt; &gt; &gt; &gt; RunListener implementations =\r\ntoday and get the benefits &quot;for free&quot; later.\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; Note w=\r\ne can do this without requiring that all users of JUnit have the\n&gt; &gt; &gt; &gt; &gt; =\r\n&gt; jcip-annotations jar in their classpath as of JDK 1.5.0_06 (see\n&gt; &gt; &gt; &gt; &gt;=\r\n &gt;\n&gt; &gt; &gt; &gt; &gt; http://stackoverflow.com/questions/3567413/why-doesnt-a-missin=\r\ng-annotation-cause-a-classnotfoundexception-at-runtime\n&gt; &gt; &gt; &gt; &gt; ).\n&gt; &gt; &gt; &gt;=\r\n &gt; &gt; If jcip-annotations is not on the classpath then all RunListener\n&gt; &gt; &gt;=\r\n &gt; &gt; &gt; implementations will be treated as not thread-safe.\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; =\r\n&gt; &gt; &gt; &gt; As a specific example, the Maven Surefire plugin would use this\n&gt; &gt;=\r\n &gt; &gt; &gt; dependency\n&gt; &gt; &gt; &gt; &gt; &gt; and include jcip-annotations.\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt;=\r\n &gt; &gt; &gt; &gt; Currently, JUnit only depends on one third-party library (Hamcrest=\r\n). This\n&gt; &gt; &gt; &gt; &gt; &gt; has caused us some pain in the past when the Hamcrest c=\r\node changed in\n&gt; &gt; &gt; &gt; &gt; ways\n&gt; &gt; &gt; &gt; &gt; &gt; that broke existing users of JUni=\r\nt. We believe this will not be an issue\n&gt; &gt; &gt; &gt; &gt; &gt; with jcip-annotations b=\r\necause the JAR only contains annotations, not any\n&gt; &gt; &gt; &gt; &gt; &gt; code.\n&gt; &gt; &gt; &gt;=\r\n &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; One possible concern would be with other open source libra=\r\nries that\n&gt; &gt; &gt; &gt; &gt; provide\n&gt; &gt; &gt; &gt; &gt; &gt; RunListener implementations (they w=\r\nould need to add jcip-annotations to\n&gt; &gt; &gt; &gt; &gt; &gt; their compile-time classpa=\r\nth if they have thread-safe annotations, and\n&gt; &gt; &gt; &gt; &gt; &gt; document this to t=\r\nheir users).\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; Thoughts?\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; -- K=\r\nevin\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message=\r\n have been removed]\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;  \n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; \n&gt; =\r\n&gt; &gt; &gt; \n&gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt; =\r\n&gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt;\n\n\n\n", 
    "profile": "tibord47", 
    "topicId": 24274, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 507342950, 
    "prevInTime": 24304, 
    "contentTrasformed": false, 
    "postDate": "1360670791", 
    "canDelete": false, 
    "nextInTopic": 24306, 
    "prevInTopic": 24304, 
    "headers": {
        "messageIdInHeader": "PGtmZGI4NytwNjR2QGVHcm91cHMuY29tPg=="
    }
}