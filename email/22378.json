{
    "numMessagesInTopic": 12, 
    "nextInTime": 22379, 
    "senderId": "iq43cOPWfGcKZMlCBqmhNja58cy1f77EFtFeaOTa4ftFqDzqj3ioWdzXbPX_4Es-9b24aEjRvUNBstWKMIfQKEAq", 
    "systemMessage": false, 
    "subject": "Re: [junit] Theories Usability", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "http://github.com/KentBeck/junit/issues", 
    "msgId": 22378, 
    "profile": "dsaff", 
    "topicId": 22365, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "messageBody": "<div id=\"ygrps-yiv-290942711\"><a rel=\"nofollow\" target=\"_blank\" href=\"http://github.com/KentBeck/junit/issues\">http://github.com/KentBeck/junit/issues</a><br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Sun, Feb 7, 2010 at 9:48 PM, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a>&gt; wrote:<br/>\n&gt; Berin,<br/>\n&gt;<br/>\n&gt; I do think that we should eventually have a way to operate at least<br/>\n&gt; optionally in the way you describe.  Have you logged a feature request<br/>\n&gt; yet?<br/>\n&gt;<br/>\n&gt;   David<br/>\n&gt;<br/>\n&gt; On Fri, Feb 5, 2010 at 3:27 PM, Loritsch, Berin C.<br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:berin.loritsch@...\">berin.loritsch@...</a>&gt; wrote:<br/>\n&gt;&gt; Thanks everyone for helping me work through the testing challenge I wanted to address.  I&#39;ve written a rudimentary ClassCollector that lets me specify a base package, what base classes I need, any annotations I need applied, etc.  I supplimented that with a BeanAttributes class that will collect all the attributes (setters/getters) on the class.  It&#39;s working very well.  Unfortunately, there are a few shortcomings with this approach:<br/>\n&gt;&gt;<br/>\n&gt;&gt; 1. I cannot easily determine what the actual data point combination was that caused the failure.  I have to write those values out to System.out because the test failure does not do that for me.<br/>\n&gt;&gt;<br/>\n&gt;&gt; 2. It stops on the very first failure, hiding many more failures that may still be lurking beneath the service.<br/>\n&gt;&gt;<br/>\n&gt;&gt; 3. The theory is the only line shown in the test report, so there is no way to differentiate runs which would handle the above concerns.<br/>\n&gt;&gt;<br/>\n&gt;&gt; What I would really like to see is that a new test name for each combination of data points.  For example if you had a @Theory named &quot;checkAddWorks&quot; that took two parameters and the data points [1,2] then I&#39;d like to see a set of test names that look like this in the test report:<br/>\n&gt;&gt;<br/>\n&gt;&gt; checkAddWorks(1,1)<br/>\n&gt;&gt; checkAddWorks(1,2)<br/>\n&gt;&gt; checkAddWorks(2,2)<br/>\n&gt;&gt;<br/>\n&gt;&gt; That will address all of the shortcomings I identified.<br/>\n&gt;&gt;<br/>\n&gt;&gt; My code looks like this:<br/>\n&gt;&gt;<br/>\n&gt;&gt; @RunWith(Theories.class)<br/>\n&gt;&gt; class TestMyTrackableContract {<br/>\n&gt;&gt;    @DataPoints<br/>\n&gt;&gt;    BeanAttribute[] collectAllAttributesToTest() {<br/>\n&gt;&gt;        ClassCollector collector = new ClassCollector();<br/>\n&gt;&gt;        collector.within(&quot;com.mycompany.incident.model&quot;).assignableTo(Trackable.class);<br/>\n&gt;&gt;        Collection&lt;Class&lt;?&gt;&gt; matchedClasses = collector.recurse().collect();<br/>\n&gt;&gt;<br/>\n&gt;&gt;        List&lt;BeanAttribute&gt; attributes = new ArrayList&lt;BeanAttribute&gt;();<br/>\n&gt;&gt;<br/>\n&gt;&gt;        for (Class&lt;?&gt; trackable : matchedClasses) {<br/>\n&gt;&gt;            attributes.addAll(BeanAttribute.collectFrom(trackable));<br/>\n&gt;&gt;        }<br/>\n&gt;&gt;<br/>\n&gt;&gt;        return attributes.toArray(new BeanAttribute[attributes.size()]);<br/>\n&gt;&gt;    }<br/>\n&gt;&gt;<br/>\n&gt;&gt;    @Theory<br/>\n&gt;&gt;    public void checkSideEffectsOnAssign() throws Exception {<br/>\n&gt;&gt;        // This is designed to ensure that setters/getters work in concert<br/>\n&gt;&gt;        // and that setters set the appropriate message is sent<br/>\n&gt;&gt;        if ( ! beanAttribute.hasSetter() || ! beanAttribute.hasGetter() ) return;<br/>\n&gt;&gt;        beanAttribute.assertBalanced();<br/>\n&gt;&gt;<br/>\n&gt;&gt;        Trackable entity = beanAttribute.getEntityAs(Trackable.class);<br/>\n&gt;&gt;        // Unfortunately needed to determine when things go bad<br/>\n&gt;&gt;        System.out.format(&quot;Testing %s&#92;n&quot;, beanAttribute);<br/>\n&gt;&gt;<br/>\n&gt;&gt;        Object original = beanAttribute.getValue();<br/>\n&gt;&gt;        Object testValue = beanAttribute.generateTestValue(original);<br/>\n&gt;&gt;<br/>\n&gt;&gt;        // Ensure the setter works as expected<br/>\n&gt;&gt;        beanAttribute.setValue(testValue);<br/>\n&gt;&gt;        assertEquals(testValue, beanAttribute.getValue());<br/>\n&gt;&gt;<br/>\n&gt;&gt;        // Ensure properties are set and events were properly<br/>\n&gt;&gt;        Properties changes = entity.getChanges();<br/>\n&gt;&gt;        assertEquals( String.valueOf(testValue),<br/>\n&gt;&gt;            changes.getProperty(beanAttribute.getAttribute()));<br/>\n&gt;&gt;        assertEquals( String.valueOf(original),<br/>\n&gt;&gt;            changes.getProperty(beanAttribute.getAttribute() + &quot;.old&quot;));<br/>\n&gt;&gt;    }<br/>\n&gt;&gt; }<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; ------------------------------------<br/>\n&gt;&gt;<br/>\n&gt;&gt; Yahoo! Groups Links<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 22377, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1265597339", 
    "canDelete": false, 
    "nextInTopic": 22379, 
    "prevInTopic": 22377, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MTAwMjA3MTg0OHIzNDU4ZjhjMm9iN2NkYTdjYWI2NTIzZWNjQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MTAwMjA3MTg0OHAxYmFlM2U0N3ZmNDYxY2YwMGJlMTFlZDMzQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NkJAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPgkgPDRmN2RhNmI5MTAwMjA3MTg0OHIzNDU4ZjhjMm9iN2NkYTdjYWI2NTIzZWNjQG1haWwuZ21haWwuY29tPg=="
    }
}