{
    "numMessagesInTopic": 7, 
    "nextInTime": 18521, 
    "senderId": "ykvhywY4aMlR7vLBwPLILWA5J4G_6rEzfH_mUApK1HlT099qhGnbAuteCl8TMy8rYmkcqbSEzYFEX8PHW7yz3rpYADcRqV1175HN35Ti9Tw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Philosophical question--Multiple assertions in one test case", 
    "from": "Stephen Smith &lt;steve@...&gt;", 
    "authorName": "Stephen Smith", 
    "msgSnippet": "This question comes up time and again on this mailing list. For what it s worth, I think the idea of having a single assertion per test case is a noble design", 
    "msgId": 18520, 
    "topicId": 18509, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 231973488, 
    "messageBody": "<div id=\"ygrps-yiv-1481155132\">This question comes up time and again on this mailing list. For what <br/>\nit&#39;s worth, I think the idea of having a single assertion per test case <br/>\nis a noble design aim, but it can be tough.<br/>\n<br/>\nWhen I struggle to encapsulate what I want to test in a single <br/>\nassertion, I extract my multiple assertions to a private method - and by <br/>\nmultiple I mean 2 or 3 assertions, tops. Beyond that, and it&#39;s a design <br/>\nsmell.<br/>\n--<br/>\nStephen Smith, MEng (Wales).<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.stephen-smith.co.uk/\">http://www.stephen-smith.co.uk/</a><br/>\n<br/>\nDavid Jackman wrote:<br/>\n<blockquote><span title=\"qreply\"> &gt; <br/>\n&gt; <br/>\n&gt; I do this as well. I always assert early on whatever assumptions my<br/>\n&gt; test code is making about its environment, with error messages that<br/>\n&gt; instruct the user what they need to do to fix the situation (or at least<br/>\n&gt; what&#39;s missing). It&#39;s a whole lot better to see one of those error<br/>\n&gt; messages than some other exception that occurred because an assumption<br/>\n&gt; wasn&#39;t valid. So, in your case, I would even say that every test should<br/>\n&gt; (in the setUp method if possible) verify that everything is in place<br/>\n&gt; with the DAO (if such verification is possible without actually changing<br/>\n&gt; the state). And any time a test does change the state of the system, it<br/>\n&gt; ought to verify that the state is as expected. It&#39;s basically the &quot;fail<br/>\n&gt; fast&quot; philosophy. As you say, it&#39;s good to limit the amount of state<br/>\n&gt; changes occurring in a single test, but sometimes it is necessary.<br/>\n&gt; <br/>\n&gt; ..David..<br/>\n&gt; <br/>\n&gt; ________________________________<br/>\n&gt; <br/>\n&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:junit%40yahoogroups.com&gt; <br/>\n&gt; [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:junit%40yahoogroups.com&gt;] On Behalf Of<br/>\n&gt; shefehs<br/>\n&gt; Sent: Wednesday, December 06, 2006 1:52 PM<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:junit%40yahoogroups.com&gt;<br/>\n&gt; Subject: [junit] Philosophical question--Multiple assertions in one test<br/>\n&gt; case<br/>\n&gt; <br/>\n&gt; I&#39;ve read all over the place that it&#39;s a bad idea to include multiple<br/>\n&gt; assertions in one test case, but it seems to me that sometimes it&#39;s<br/>\n&gt; very useful. For example, I have a fairly straightforward DAO and I<br/>\n&gt; want to test the create method. But to really test it, I need to<br/>\n&gt; retrieve it afterwards and make sure it was successfully created. And<br/>\n&gt; I need to clean it up afterwards (or the test will fail next time I<br/>\n&gt; run it and try to create a duplicate), so I call my delete method.<br/>\n&gt; There I&#39;ve exercised 3 methods of my DAO, not just one. So it feels<br/>\n&gt; like it would save time to assert that each step of the process<br/>\n&gt; succeeded.<br/>\n&gt; <br/>\n&gt; Example:<br/>\n&gt; public void testEmployeeCRUD()<br/>\n&gt; throws Exception<br/>\n&gt; {<br/>\n&gt; int sizeBeforeAdding = em.listEmployees().size();<br/>\n&gt; _employeeId = em.createEmployee(_fname, _lname, _jobtitle);<br/>\n&gt; <br/>\n&gt; int sizeAfterAdding = em.listEmployees().size();<br/>\n&gt; log.debug(&quot;Created employee &quot; + _employeeId);<br/>\n&gt; //Make sure that the new list is longer than the old list<br/>\n&gt; assertTrue(&quot;Create employee failed&quot;, sizeAfterAdding&gt;sizeBeforeAdding);<br/>\n&gt; <br/>\n&gt; Employee emp = em.getEmployee(_employeeId);<br/>\n&gt; assertEquals(&quot;getEmployee failed&quot;, emp.getLName(), _lname);<br/>\n&gt; log.debug(&quot;Retrieved employee &quot; + emp.getLName());<br/>\n&gt; <br/>\n&gt; em.deleteEmployee(emp);<br/>\n&gt; <br/>\n&gt; int sizeAfterDelete = em.listEmployees().size();<br/>\n&gt; <br/>\n&gt; //Make sure that the length of the list after delete<br/>\n&gt; //is the same as it was before we added<br/>\n&gt; assertEquals(&quot;Delete employee failed&quot;, sizeAfterDelete,<br/>\n&gt; sizeBeforeAdding);<br/>\n&gt; log.debug(&quot;Deleted employee&quot;);<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; The preceding code works just fine. If the test fails, I&#39;d look in<br/>\n&gt; the failure message to see which part of it failed, and it seems like<br/>\n&gt; that&#39;s not too difficult. I know it&#39;s not following best practices<br/>\n&gt; because it calls 4 separate methods, but when I tried writing a test<br/>\n&gt; for each of those methods, I ended up either calling the other ones in<br/>\n&gt; the setup/teardown or by essentially recreating them in a sample data<br/>\n&gt; loading operation. I&#39;m trying to do good TDD and to convince a<br/>\n&gt; colleague who resists unit tests at all, so I don&#39;t want to do things<br/>\n&gt; &quot;wrong&quot; but I also don&#39;t want to make life tremendously more difficult<br/>\n&gt; without understanding the real reason behind the recommendations.<br/>\n&gt; <br/>\n&gt; Does anyone have any thoughts on this principle? I appreciate the<br/>\n&gt; intelligent exchanges I&#39;ve seen on the list in the past so I hope to<br/>\n&gt; get a thoughtful discussion going.<br/>\n&gt; <br/>\n&gt; Thanks very much!<br/>\n&gt; Julie<br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ------------------------------------------------------------------------<br/>\n&gt; <br/>\n&gt; No virus found in this incoming message.<br/>\n&gt; Checked by AVG Free Edition.<br/>\n&gt; Version: 7.5.432 / Virus Database: 268.15.15/579 - Release Date: 07/12/2006 13:31 </span></blockquote></div>", 
    "prevInTime": 18519, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1165600396", 
    "canDelete": false, 
    "nextInTopic": 18521, 
    "prevInTopic": 18519, 
    "headers": {
        "inReplyToHeader": "PDBFMEU5QUVDNjJEMUZDNDA4QjUwMjRCQ0ZEQTg4NkVBQUVGMkMxQHNsY2VzMDEuYWQuZmFzdC5ubz4=", 
        "messageIdInHeader": "PDQ1NzlBNjhDLjIwMzA2MDBAc3RlcGhlbi1zbWl0aC5jby51az4=", 
        "referencesHeader": "PDBFMEU5QUVDNjJEMUZDNDA4QjUwMjRCQ0ZEQTg4NkVBQUVGMkMxQHNsY2VzMDEuYWQuZmFzdC5ubz4="
    }
}