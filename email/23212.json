{
    "numMessagesInTopic": 12, 
    "nextInTime": 23213, 
    "senderId": "HErY08ZdihXFQ7GsfxwXAUjtypaDZeqeXTPIWF_N2EOqjgDJ0o4tcC3Zfkodd9uXTQAS7td1pN_FTZlL_JfynbmEyNVybwnLEPMu5w", 
    "systemMessage": false, 
    "subject": "Re: [junit] How to avoid running a test class multiple times", 
    "from": "John Cortell &lt;john.cortell@...&gt;", 
    "authorName": "John Cortell", 
    "msgSnippet": "Nice! Thanks Bill for coming up with the idea of a custom suite runner, and thanks David for writing such a runner! There were a couple of minor snags with", 
    "msgId": 23212, 
    "profile": "johncortell", 
    "topicId": 23199, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 474612707, 
    "messageBody": "<div id=\"ygrps-yiv-2140762733\">Nice! Thanks Bill for coming up with the idea of a custom suite runner, and<br/>\nthanks David for writing such a runner! There were a couple of minor snags<br/>\nwith your attempt below, but with some minor tweaks, it seems to be working<br/>\nnicely.<br/>\n<br/>\n1. [compile time issue] The @RunWith needs to fully qualify OnceOnlySuite<br/>\n(i.e., prefix it with &#39;All.&#39;) I decided to just make it a public top-level<br/>\nclass since its use will not be tied to a particular suite.<br/>\n<br/>\n2. [runtime issue] The collection (Set) has to be a instance field of<br/>\nOnceOnlySuite, not the anonymous inner RunnerBuilder(), since the latter&#39;s<br/>\ninstances are ephemeral.<br/>\n<br/>\nJohn<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Thu, Jan 27, 2011 at 3:27 PM, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a>&gt; wrote:<br/>\n<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; OK, here&#39;s a crazy hack (haven&#39;t tested it) at a solution. Let me<br/>\n&gt; know if you try it and it works...<br/>\n&gt;<br/>\n&gt; @RunWith(OnceOnlySuite.class)<br/>\n&gt; @SuiteClasses({A.class, B.class})<br/>\n&gt; public class All {<br/>\n&gt; public static class OnceOnlySuite extends Suite {<br/>\n&gt; OnceOnlySuite(Class&lt;?&gt; testClass, final RunnerBuilder builder) {<br/>\n&gt; super(testClass, new RunnerBuilder() {<br/>\n&gt; private Set&lt;Class&lt;?&gt;&gt; alreadySeen = new HashSet&lt;Class&lt;?&gt;&gt;();<br/>\n&gt;<br/>\n&gt; public Runner runnerForClass(Class&lt;?&gt; testClass) {<br/>\n&gt; if (alreadySeen.contains(testClass)) {<br/>\n&gt; return new IgnoredClassRunner(testClass);<br/>\n&gt; }<br/>\n&gt; alreadySeen.add(testClass);<br/>\n&gt; return builder.runnerForClass(testClass);<br/>\n&gt; }<br/>\n&gt; });<br/>\n&gt;<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; On Thu, Jan 27, 2011 at 3:55 PM, Bill Venners &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:bill@...\">bill@...</a>&lt;bill%40artima.com&gt;&gt;<br/>\n&gt; wrote:<br/>\n&gt; &gt; Hi John,<br/>\n&gt; &gt;<br/>\n&gt; &gt; I doubt you&#39;ll want to add another dependency, but were you to use a<br/>\n&gt; &gt; ScalaTest Suite of some kind with an @RunWith(classOf[JUnitRunner])<br/>\n&gt; &gt; annotation on it, JUnit would ask ScalaTest to run those test classes.<br/>\n&gt; &gt; In ScalaTest, you could override the run method such that it would<br/>\n&gt; &gt; only run the class if it hadn&#39;t been run before. The good thing is it<br/>\n&gt; &gt; would solve your problem. The bad thing is you&#39;d need to add the Scala<br/>\n&gt; &gt; jar and ScalaTest jar on your class path, and that may not be possible<br/>\n&gt; &gt; or desirable for you. Moreover, you&#39;d need to write the runOnlyOnce<br/>\n&gt; &gt; test classes in Scala.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Actually it occurs to me just now that you should be able to create a<br/>\n&gt; &gt; JUnit runner in Java that does what you want: just executing each test<br/>\n&gt; &gt; class only once. Then annotate your test classes with your own runner:<br/>\n&gt; &gt; @RunWith(RunOnlyOnceRunner.class). I think that should be a possible<br/>\n&gt; &gt; way to do what you want.<br/>\n&gt; &gt;<br/>\n&gt; &gt; If you want to try the ScalaTest way, let me know and I can help further.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Bill<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Thu, Jan 27, 2011 at 12:07 PM, John Cortell &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:john.cortell@...\">john.cortell@...</a>&lt;john.cortell%40gmail.com&gt;&gt;<br/>\n&gt; wrote:<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; I set out to give Categories a shot, and ran into issues using them in<br/>\n&gt; &gt;&gt; Eclipse/JUnit. Wouldn&#39;t you know it...I ran into a post from you in<br/>\n&gt; bugzilla<br/>\n&gt; &gt;&gt; that knocked the wind out of that sail.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=318299\">https://bugs.eclipse.org/bugs/show_bug.cgi?id=318299</a><br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; John<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; On Wed, Jan 26, 2011 at 7:12 PM, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a>&lt;david%40saff.net&gt;&gt;<br/>\n&gt; wrote:<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; Not as simply as you might think. Could you achieve what you want<br/>\n&gt; &gt;&gt; &gt; with Categories (from 4.8?)<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; David Saff<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; On Wed, Jan 26, 2011 at 5:29 PM, johncortell &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:john.cortell@...\">john.cortell@...</a>&lt;john.cortell%40gmail.com&gt;<br/>\n&gt; &lt;john.cortell%40gmail.com&gt;&gt;<br/>\n&gt; &gt;&gt; &gt; wrote:<br/>\n&gt; &gt;&gt; &gt; &gt; Is there a way to tell JUnit to execute a class only once no matter<br/>\n&gt; how<br/>\n&gt; &gt;&gt; &gt; many times it appears in an invoked test suite?<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; E.g., say SomeTestClass.java is included in both test suite &#39;A&#39;<br/>\n&gt; &gt;&gt; &gt; &gt; and test suite &#39;B&#39;. But I have a higher-level suite call &#39;All&#39; which<br/>\n&gt; &gt;&gt; &gt; includes both &#39;A&#39; and &#39;B&#39;. Running &#39;All&#39; will thus run<br/>\n&gt; SomeTestClass.java<br/>\n&gt; &gt;&gt; &gt; twice. Is there a way to prevent that?<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; --<br/>\n&gt; &gt; Bill Venners<br/>\n&gt; &gt; Artima, Inc.<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.artima.com\">http://www.artima.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; ------------------------------------<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 23211, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1296166569", 
    "canDelete": false, 
    "nextInTopic": 23213, 
    "prevInTopic": 23211, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGk9RkVjRnFEcnZ6SnRaM2pnRXFNZHdZR09qaXh4X1pGbj1VLWRFVkBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGltZmhHZmhEdU9TK0VZY2dvQkdDRkNHMkhQK1dtcG5NTEZxNT1UUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGlocTc5NSs5c2l0QGVHcm91cHMuY29tPiA8QUFOTGtUaWtaclYyc3RHNk5VaWdOdzRFdFlFT0dRY2NWUWFLLTZMNndLNnZpQG1haWwuZ21haWwuY29tPiA8QUFOTGtUaT1kRUNMV29OSDB0YmRfT0hQR189TXR3RDV4UFF4c3dtck1YZGJrQG1haWwuZ21haWwuY29tPiA8QUFOTGtUaW1wVVRLR0JidHEzVFVkN1B5N1NlclI5dEw9S0dVRTlTYk5PYjJ6QG1haWwuZ21haWwuY29tPiA8QUFOTGtUaT1GRWNGcURydnpKdFozamdFcU1kd1lHT2ppeHhfWkZuPVUtZEVWQG1haWwuZ21haWwuY29tPg=="
    }
}