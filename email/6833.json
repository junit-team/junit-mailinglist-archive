{
    "numMessagesInTopic": 41, 
    "nextInTime": 6834, 
    "senderId": "DuyvrcUmzC5-dHXybMuZdip2KP0B2ryxQtAYyiXYoSIR2mOcdrJC6qLGGk3Kr1P0nR-K_QKgwB6C5zCJMPY4pzabFFIjRIgu9MHsRshgc1s", 
    "systemMessage": false, 
    "subject": "Re: [junit] Websphere Connection Pool", 
    "from": "Steven Taschuk &lt;staschuk@...&gt;", 
    "authorName": "Steven Taschuk", 
    "msgSnippet": "Quoth Curt Sampson: [...] ... I see your point that having to mock both ConnectionFactory and Connection is annoying, and the addition of the first method ", 
    "msgId": 6833, 
    "topicId": 6711, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 114327599, 
    "messageBody": "<div id=\"ygrps-yiv-175602024\">Quoth Curt Sampson:<br/>\n  [...]<br/>\n<blockquote><span title=\"ireply\"> &gt; I wouldn&#39;t, because it was test-driven development that drove me to the<br/>\n&gt; above solution in the first place. I thought, &quot;Darn, to test this I&#39;ve<br/>\n&gt; got to make another mock object here, and pass it a database connection.<br/>\n&gt; Why not just pass in the connection directly, and save myself the effort?&quot;<br/>\n<br/>\n </span></blockquote>For reference, I quote the original code snippet again:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Object doMyThing(Connection con, String something)<br/>\n&gt; {<br/>\n&gt;     // do stuff on the connection and return the object.<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; public Object doMyThing(ConnectionFactory factory, String something)<br/>\n&gt; {<br/>\n&gt;     Connection con = factory.getConnection();<br/>\n&gt;     return doMyThing(con, something);<br/>\n&gt;     con.close();<br/>\n&gt; }<br/>\n<br/>\n </span></blockquote>I see your point that having to mock both ConnectionFactory and<br/>\nConnection is annoying, and the addition of the first method<br/>\nsolves this problem.<br/>\n<br/>\nI do wonder, however, why the second method (i.e., the original<br/>\none before the testability question came up) requires a<br/>\nConnectionFactory in the first place.  If the code&#39;s use of the<br/>\nfactory is as simple as the above example suggests, why not write<br/>\na Connection proxy which grabs a real connection from the pool as<br/>\nneeded?  In other words, what use is the Factory pattern here, and<br/>\nwhy does the caller need to know about it?<br/>\n<br/>\n(Would I know the answers to these questions if I knew what<br/>\nWebsphere is?)<br/>\n<br/>\n-- <br/>\nSteven Taschuk           |   ,&#92;<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:staschuk@...\">staschuk@...</a> | }&lt;__`O=<br/>\n                         |  &#39;  &quot;     Pleiosaur</div>", 
    "prevInTime": 6832, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1044173869", 
    "canDelete": false, 
    "nextInTopic": 6834, 
    "prevInTopic": 6830, 
    "headers": {
        "inReplyToHeader": "PFBpbmUuTkVCLjQuNTEuMDMwMjAxMDkzODM1MC41MTdAYW5nZWxpYy5jeW5pYy5uZXQ+OyBmcm9tIHlhaG9vX3N1Y2tzQGN5bmljLm5ldCBvbiBTYXQsIEZlYiAwMSwgMjAwMyBhdCAwOTo0NjozOEFNICswOTAw", 
        "messageIdInHeader": "PDIwMDMwMjAyMDExNzQ4LkEzODhAdGliaWEuYW1vdGxwYWEuYm9ndXM+", 
        "referencesHeader": "PEtJRUhJQklPQkFFTEpBSElQTkhER0VLQkNPQUEuc2NvdHRzdGlybGluZ0ByY24uY29tPiA8UGluZS5ORUIuNC41MS4wMzAyMDEwOTM4MzUwLjUxN0BhbmdlbGljLmN5bmljLm5ldD4="
    }
}