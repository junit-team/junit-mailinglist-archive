{
    "numMessagesInTopic": 11, 
    "nextInTime": 24504, 
    "senderId": "7w_dCMJTL_fkfmJH2ZIhQ3SObK0TKkVRMUGNlo4wBPJNx2L3WZqPrYPrzxGyLO_zlreQpkB7StJMaYvj31Ge29knqPKl9uc", 
    "systemMessage": false, 
    "subject": "Re: [junit] Is it possible to have write NonBlocking Junit tests", 
    "from": "Neil Swingler &lt;neil@...&gt;", 
    "authorName": "Neil Swingler", 
    "msgSnippet": "Bah sent an incomplete example by accident. Here is the whole message Use a SettableFuture from guava. To borrow Colin s example @Test public void testAsync()", 
    "msgId": 24503, 
    "rawEmail": "Return-Path: &lt;neil@...&gt;\r\nX-Sender: neil@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 40152 invoked by uid 102); 10 Apr 2014 19:17:02 -0000\r\nX-Received: from unknown (HELO mtaq1.grp.bf1.yahoo.com) (10.193.84.32)\n  by m6.grp.bf1.yahoo.com with SMTP; 10 Apr 2014 19:17:02 -0000\r\nX-Received: (qmail 31292 invoked from network); 10 Apr 2014 19:17:02 -0000\r\nX-Received: from unknown (HELO mail-pb0-f48.google.com) (209.85.160.48)\n  by mtaq1.grp.bf1.yahoo.com with SMTP; 10 Apr 2014 19:17:02 -0000\r\nX-Received: by mail-pb0-f48.google.com with SMTP id md12so4337620pbc.7\n        for &lt;junit@yahoogroups.com&gt;; Thu, 10 Apr 2014 12:17:01 -0700 (PDT)\r\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20130820;\n        h=x-gm-message-state:mime-version:in-reply-to:references:date\n         :message-id:subject:from:to:content-type;\n        bh=h/oRH18EQg9bTsaX5loADUVyfrtbs0iAYSvPZ4UZFoM=;\n        b=Tl3yXtqzNjT3ZNgFt96YsOf+dw7tyErpYZwdOdGRF/m+Ul4TpL+MjYkOiwV5uKDbIE\n         AROTShLNa7z6DiudVpVt9DyaULgmpaNww/0yWHXrTdTd0YNxLSqrmikBd0zL/D2x2ikH\n         2Q2pPF3iVxLMTGNXweilnaokMMUEOdnufGhnp3fQLEkreSMJCtlT42if6SBnaGZmMjBO\n         zy7s14C/ABs1n4NpqkUUBCiZJp8C0JILPQ9YvaStWzzoRtLLa9kIEdW0Y9J6JnIjW2LY\n         bgTuNFfuPlzLU3xbw0Kndo+qAZYAqOQPzRsrwbA4CA9CT8tScvb6gPTbtIz6GPCM8veW\n         1JZA==\r\nX-Gm-Message-State: ALoCoQl5XURv+XSG2UDCdDDMjuE0LvHohIngH13/7lwq+14eSWKZ/kV2aDxSCXUzHzQElF8BR4nQ\r\nMIME-Version: 1.0\r\nX-Received: by 10.66.150.169 with SMTP id uj9mr21855151pab.148.1397157421896;\n Thu, 10 Apr 2014 12:17:01 -0700 (PDT)\r\nX-Received: by 10.70.92.165 with HTTP; Thu, 10 Apr 2014 12:17:01 -0700 (PDT)\r\nIn-Reply-To: &lt;CAKi4273twX35iRgMg95Lyw+pBHprsBQRqo1tcLa+Cx4HFT3wrw@...&gt;\r\nReferences: &lt;li6ctj+h5l6qk@...&gt;\n\t&lt;CAKi4273twX35iRgMg95Lyw+pBHprsBQRqo1tcLa+Cx4HFT3wrw@...&gt;\r\nDate: Thu, 10 Apr 2014 20:17:01 +0100\r\nMessage-ID: &lt;CAFYH9Bqro5jJfeqHsuYaoA2G+fEQ3KuUamAYCE4xxdpwDUP5RQ@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: multipart/alternative; boundary=047d7b6788bed41d5304f6b50fbf\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Neil Swingler &lt;neil@...&gt;\r\nSubject: Re: [junit] Is it possible to have write NonBlocking Junit tests\r\nX-Yahoo-Group-Post: member; u=230174996; y=kFJ2PnQu6TuErRCVlGHhy-dqx-bwK5f4RukvOVHZvkbhtWNLP4r05Q\r\nX-Yahoo-Profile: neil_swingler\r\n\r\n\r\n--047d7b6788bed41d5304f6b50fbf\r\nContent-Type: text/plain; charset=ISO-8859-1\r\n\r\nBah sent an incomplete example by accident. Here is the whole message\n\nUse a SettableFuture from guava. To borrow Colin&#39;s example\n\n@Test\npublic void testAsync() throws Exception {\nfinal SettableFuture&lt;Message&gt; future = SettableFuture.create();\nsomeAsyncCode(new Handler() {\npublic void handle(Message message) {\n                            future.set(message);\n}\n});\n assertThat(future.get(), is(something));\n}\n\n- Neil\n\n\nOn 10 April 2014 18:32, Colin Vipurs &lt;zodiaczx6@...&gt; wrote:\n\n&gt;\n&gt;\n&gt; You could use a locking mechanism shared between your test and handler so\n&gt; that progress continues as quick as possible and then put an overall\n&gt; timeout on your test in the event of failure.\n&gt;\n&gt; Something like this should work just fine:\n&gt;\n&gt; @Test\n&gt; public void testAsync() throws Exception {\n&gt;  final Semaphore lock = new Semaphore(0);\n&gt; someAsyncCode(new Handler() {\n&gt; public void handle() {\n&gt;  // put your assertions in here\n&gt; lock.release();\n&gt; }\n&gt;  });\n&gt;  lock.acquire();\n&gt;  }\n&gt;\n&gt;\n&gt; On Thu, Apr 10, 2014 at 4:21 PM, &lt;abhijeet.kushe@...&gt; wrote:\n&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; I am writing a Junit tests for Amqp Message Listener.This is how the test\n&gt;&gt; is written.I send a message to a exchange and introduce a delay of 1s\n&gt;&gt; (assuming that the listener will do its job within that time frame).This\n&gt;&gt; approach slows down the build process as there 15-20 tests like these which\n&gt;&gt; take a minimum of 20 seconds to execute.Is there a way in which I can do\n&gt;&gt; this is a non blocking way.For pass a call handler which verifies the tests\n&gt;&gt; after the listener does it job.Something like Actors might be internally\n&gt;&gt; used\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt; --\n&gt; Maybe she awoke to see the roommate&#39;s boyfriend swinging from the\n&gt; chandelier wearing a boar&#39;s head.\n&gt;\n&gt; Something which you, I, and everyone else would call &quot;Tuesday&quot;, of course.\n&gt;\n&gt;\n&gt; \n&gt;\n\r\n--047d7b6788bed41d5304f6b50fbf\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div dir=3D&quot;ltr&quot;&gt;Bah sent an incomplete example by accident. Here is the wh=\r\nole message&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;font-family:arial,sans-serif;=\r\nfont-size:12.800000190734863px&quot;&gt;Use a SettableFuture from guava. To borrow =\r\nColin&#39;s example&lt;/span&gt;&lt;div style=3D&quot;font-family:arial,sans-serif;font-s=\r\nize:12.800000190734863px&quot;&gt;\n&lt;br&gt;&lt;/div&gt;&lt;div style=3D&quot;font-family:arial,sans-s=\r\nerif;font-size:12.800000190734863px&quot;&gt;&lt;div dir=3D&quot;ltr&quot;&gt;&lt;div class=3D&quot;im&quot;&gt;&lt;di=\r\nv&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;@Test&lt;/div&gt;&lt;div&gt;&lt;span style=\r\n=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;public void testAsync() throws Exception =\r\n{&lt;/div&gt;\n&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;final Sett=\r\nableFuture&lt;Message&gt; future =3D SettableFuture.create();&lt;/div&gt;&lt;div&gt;&lt;sp=\r\nan style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;someAsyncCode(new Handler() {&lt;/d=\r\niv&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;public void handle(M=\r\nessage message) {&lt;/div&gt;\n&lt;div&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbs=\r\np; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; future.set(message);&lt;/d=\r\niv&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;} &nbsp;&lt;br&gt;&lt;/div&gt;&lt;d=\r\niv&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;});&lt;/div&gt;&lt;div&gt;&lt;span style=\r\n=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;\n&lt;div&gt;&lt;span style=3D&quot;white-space:p=\r\nre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;=\r\nassertThat(future.get(), is(something));&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-spa=\r\nce:pre-wrap&quot;&gt;\t&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;\n- Neil&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/=\r\ndiv&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On =\r\n10 April 2014 18:32, Colin Vipurs &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:z=\r\nodiaczx6@...&quot; target=3D&quot;_blank&quot;&gt;zodiaczx6@...&lt;/a&gt;&gt;&lt;/span&gt; wr=\r\note:&lt;br&gt;\n&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;borde=\r\nr-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n\n\n\n\n\n\n        \n\n\n\n\n&lt;div&gt;\n\n\n\n\n\n&lt;br&gt;=\r\n&lt;br&gt;\n\n\n\n\n&lt;div dir=3D&quot;ltr&quot;&gt;You could use a locking mechanism shared between =\r\nyour test and handler so that progress continues as quick as possible and t=\r\nhen put an overall timeout on your test in the event of failure.&lt;div&gt;&lt;br&gt;&lt;/=\r\ndiv&gt;&lt;div&gt;\n\nSomething like this should work just fine:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;=\r\ndiv&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;@Test&lt;/div&gt;&lt;div&gt;&lt;span=\r\n style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;public void testAsync() throws Exce=\r\nption {&lt;/div&gt;\n\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;final Sem=\r\naphore lock =3D new Semaphore(0);&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-=\r\nwrap&quot;&gt;\t\t&lt;/span&gt;someAsyncCode(new Handler() {&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white=\r\n-space:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;public void handle() {&lt;/div&gt;\n\n&lt;div&gt;&lt;span style=\r\n=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t\t&lt;/span&gt;// put your assertions in here&lt;/div&gt;&lt;d=\r\niv&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t\t&lt;/span&gt;lock.release();&lt;/div&gt;&lt;di=\r\nv&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;} &nbsp;&lt;/div&gt;\n&lt;div&gt;&lt;span =\r\nstyle=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;});&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-=\r\nspace:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t=\r\n&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;lock.acquir=\r\ne();&lt;/div&gt;\n\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;}&lt;/div&gt;&lt;/div&gt;=\r\n&lt;/div&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;&lt;div class=3D&quot;&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmai=\r\nl_quote&quot;&gt;On Thu, Apr 10, 2014 at 4:21 PM,  &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D=\r\n&quot;mailto:abhijeet.kushe@...&quot; target=3D&quot;_blank&quot;&gt;abhijeet.kushe@...=\r\nm&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;\n\n&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;mar=\r\ngin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n\n\n&lt;u&gt;&lt;/u&gt;\n\n\n\n\n=\r\n\n\n\n\n\n \n&lt;div&gt;\n&lt;span&gt;&nbsp;&lt;/span&gt;\n\n\n&lt;div&gt;\n  &lt;div&gt;\n\n\n    &lt;div&gt;\n      \n      \n=\r\n      &lt;p&gt;&lt;span style=3D&quot;font-family:Arial,&#39;Liberation Sans&#39;,&#39;De=\r\njaVu Sans&#39;,sans-serif;font-size:14px&quot;&gt;I am writing a Junit tests for Am=\r\nqp Message Listener.This is how the test is written.I send a message to a e=\r\nxchange and introduce a delay of 1s (assuming that the listener will do its=\r\n job within that time frame).This approach slows down the build process as =\r\nthere 15-20 tests like these which take a minimum of 20 seconds to execute.=\r\nIs there a way in which I can do this is a non blocking way.For pass a call=\r\n handler which verifies the tests after the listener does it job.Something =\r\nlike Actors might be internally used&lt;/span&gt;&lt;/p&gt;\n\n\n\n    &lt;/div&gt;\n     \n\n    \n =\r\n   &lt;div style=3D&quot;color:#fff;min-height:0&quot;&gt;&lt;/div&gt;\n\n\n&lt;/div&gt;\n\n\n\n  \n\n\n\n\n\n\n&lt;/div=\r\n&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br clear=3D&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;span =\r\nclass=3D&quot;HOEnZb&quot;&gt;&lt;font color=3D&quot;#888888&quot;&gt;-- &lt;br&gt;Maybe she awoke to see the =\r\nroommate&#39;s boyfriend swinging from the chandelier wearing a boar&#39;s =\r\nhead.&lt;br&gt;\n&lt;br&gt;Something which you, I, and everyone else would call &quot;Tu=\r\nesday&quot;, of course.\n&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=3D&quot;&quot;&gt;\n\n\n\n\n\n\n&lt;br&gt;\n\n\n&lt;=\r\nbr&gt;\n\n\n\n\n&lt;div width=3D&quot;1&quot; style=3D&quot;color:white;clear:both&quot;&gt;&lt;/div&gt;\n\n\n\n&lt;/block=\r\nquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;\n\r\n--047d7b6788bed41d5304f6b50fbf--\r\n\n", 
    "profile": "neil_swingler", 
    "topicId": 24500, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 230174996, 
    "prevInTime": 24502, 
    "contentTrasformed": false, 
    "postDate": "1397157421", 
    "canDelete": false, 
    "nextInTopic": 24504, 
    "prevInTopic": 24502, 
    "headers": {
        "inReplyToHeader": "PENBS2k0MjczdHdYMzVpUmdNZzk1THl3K3BCSHByc0JRUnFvMXRjTGErQ3g0SEZUM3dyd0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBRllIOUJxcm81akpmZXFIc3VZYW9BMkcrZkVRM0t1VWFtQVlDRTR4eGRwd0RVUDVSUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGxpNmN0aitoNWw2cWtAWWFob29Hcm91cHMuY29tPgk8Q0FLaTQyNzN0d1gzNWlSZ01nOTVMeXcrcEJIcHJzQlFScW8xdGNMYStDeDRIRlQzd3J3QG1haWwuZ21haWwuY29tPg=="
    }
}