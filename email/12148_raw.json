{
    "numMessagesInTopic": 7, 
    "nextInTime": 12149, 
    "senderId": "imkRwpqfYqQgmK2ahUrz6WoqjmgkfHlgsZX8gHmZEgexIIju1EJkv7S_v507NeMBsIzZVSaZlDjblJfvIV9PHQeSXLvw512TwHFygdBeKnimMhbxlQ", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: How to go about TDDing a doclet class?", 
    "from": "&quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;", 
    "authorName": "Jeff Nielsen", 
    "msgSnippet": "I took Harald s challenge and sent him my solution privately.  I also had no prior experience implementing doclets, but I m going on 3+ years of experience", 
    "msgId": 12148, 
    "rawEmail": "Return-Path: &lt;jeff.nielsen@...&gt;\r\nX-Sender: jeff.nielsen@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 39366 invoked from network); 15 Oct 2004 05:01:51 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m20.grp.scd.yahoo.com with QMQP; 15 Oct 2004 05:01:51 -0000\r\nReceived: from unknown (HELO smtp3-cm.mail.eni.net) (155.229.51.73)\n  by mta6.grp.scd.yahoo.com with SMTP; 15 Oct 2004 05:01:51 -0000\r\nReceived: from laptop100 (0-1pool248-19.nas2.vienna1.va.us.da.qwest.net [63.158.248.19])\n\tby smtp3-cm.mail.eni.net (8.12.10/8.12.10) with SMTP id i9F51mo5017404\n\tfor &lt;junit@yahoogroups.com&gt;; Thu, 14 Oct 2004 22:01:49 -0700\r\nMessage-ID: &lt;018001c4b274$12778630$4b07000a@laptop100&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;5667.1096905435@...&gt;\r\nDate: Fri, 15 Oct 2004 01:01:45 -0400\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 6.00.2800.1437\r\nX-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1441\r\nX-eGroups-Remote-IP: 155.229.51.73\r\nFrom: &quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;\r\nSubject: Re: [junit] Re: How to go about TDDing a doclet class?\r\nX-Yahoo-Group-Post: member; u=65487161\r\nX-Yahoo-Profile: jeffreymads\r\n\r\nI took Harald&#39;s challenge and sent him my solution privately.  I also had no\nprior experience implementing doclets, but I&#39;m going on 3+ years of\nexperience with TDD.\n\nOne comment that may be of general interest to the group, regarding J.B.&#39;s\nobservation:\n\n   &gt; &gt;Now fortunately, RootDoc is an interface, so we ought to be able to\nmock\n   &gt; &gt;it, or provide a simple implementation of it, to pass in to the method\n   &gt; &gt;start(), which I /assume/ you&#39;re trying to test-drive.\n\nThis was also my assumption going in, and the way that I started.  But doing\neither a mock or stub of RootDoc did turn out to be more of a hassle than I\nbargained for.  This is because RootDoc returns a collection of ClassDoc\nobjects (also an interface), and ClassDoc returns collectons of FieldDoc,\nMethodDoc, etc.  Each of these XXXDoc interfaces extends ProgramElementDoc,\nDoc, and Type--more interfaces.  We&#39;re talking on the order of 45 * 4 = ~200\ntotal methods among the interfaces you need for a simple test.\n\nSo the stub approach gets unwieldy (it makes javax.sql.ResultSet or\nHttpServletRequest seem easy).  And the mock approach using dynamic proxies\njust feels funny.  By the time you tell RootDoc what ClassDocs to return,\nthen tell each of those ClassDocs which FieldDocs to spit out based on what\nparameters, you do feel like you&#39;re re-writing a lot of what you&#39;re trying\nto test--with a lot of guess work as to the precise behavior of the actual\ncom.sun.tools.javadoc.* implementations.\n\nInstead, I finally ended up digging through the javadoc source from Sun and\nfiguring out what incantations I needed to create a bona-fide\ncom.sun.tools.javadoc.RootDocImpl (also not as straightforward as you would\nthink).  Once I had the 20-line method\n\n  RootDocImpl createRootDoc(ListBuffer javaNames)\n\nthen TDD was straightforward.  I could create actual RootDoc objects in my\nsetUp methods, and write JUnit tests with them, feeling more confident\nknowing that my RootDocImpl was the same one that the javadoc executable\nwould use.  The resulting 15 or so tests I ended up with to implement\nHarald&#39;s problem all run in about a second, so I still had the short cycle\ntime that is essential for TDD.\n\nAnway, for me it was an interesting example of how using mocks/stubs can\nsometimes make unit testing more difficult rather than less.\n\n--\nJeff Nielsen\nDigital Focus\nwww.digitalfocus.com\n\n\n\nHarald Mueller wrote:\n\n&gt; And I&#39;m not satisfied with the result and the TDD-ing we did ... But\nbefore\n&gt; I share my questions and concerns, I&#39;d like to see how TDDing our\nassignment\n&gt; would or should really work. For this,\n&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; I invite you to also implement the tool we had to write. &lt;&lt;&lt;&lt;&lt;\n&gt;\n&gt; For this, I have put a sort of spec on my website at\n&gt; http://www.haraldmmueller.de/swe_tdd1.html.\n&gt;\n&gt; It took us 2 hours 16 minutes end-to-end (including the shaky acceptance\n&gt; test on the website), and we were as unknowing about doclets as one can\nbe -\n&gt; so you have every chance to do the same thing in an hour or so.\n&gt;\n&gt; Everyone sending me (or posting) a &quot;TDD solution&quot; (including unit tests)\n&gt; will get in return our code ... if you like to criticize others&#39; code,\nthat\n&gt; should really be an incentive ;-)\n&gt;\n&gt; When I have two working solutions, I&#39;ll post - if I may - our code (maybe\non\n&gt; the refactoring mailing list? don&#39;t know where it suites better) so that\nyou\n&gt; can tear it apart.\n&gt;\n&gt; Is this a deal ;-) ?\n&gt;\n&gt;\n&gt; JB (Joe - now I know it!) Rainsberger found time to answer - I&#39;ll only\n&gt; comment on one part:\n&gt;\n&gt; &gt;Now fortunately, RootDoc is an interface, so we ought to be able to mock\n&gt; &gt;it, or provide a simple implementation of it, to pass in to the method\n&gt; &gt;start(), which I /assume/ you&#39;re trying to test-drive.\n&gt;\n&gt; &quot;Yes, but ...&quot; (my children&#39;s answer to almost everything ...): If you\nlook\n&gt; at the documentation of RootDoc and related interfaces - i.e., the javadoc\n&gt; API -, it&#39;s not too small. Should I really mock this? I cannot see that\nI&#39;ll\n&gt; then create a software that will run with the real javadoc API - I will\n&gt; misinterpret the Javadoc and implement mocks that do what I think they\n&gt; should do, not what the real thing does.\n&gt; So, I need learning tests for RootDoc etc. anyway, so why not write the\n&gt; doclet so that *is* the learning test object?\n&gt; But when I find time, I&#39;ll try also the mock approach - otherwise, I&#39;ll\n&gt; never lose my prejudice about it; and post the result without any feeling\nof\n&gt; guilt.\n&gt;\n&gt; Ok - now I&#39;m waiting for contributions ...\n&gt;\n&gt; Regards\n&gt; Harald M. Mueller\n\n\n", 
    "profile": "jeffreymads", 
    "topicId": 12076, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65487161, 
    "prevInTime": 12147, 
    "contentTrasformed": false, 
    "postDate": "1097816505", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 12097, 
    "headers": {
        "messageIdInHeader": "PDAxODAwMWM0YjI3NCQxMjc3ODYzMCQ0YjA3MDAwYUBsYXB0b3AxMDA+", 
        "referencesHeader": "PDU2NjcuMTA5NjkwNTQzNUB3d3c1OC5nbXgubmV0Pg=="
    }
}