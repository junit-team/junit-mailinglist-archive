{
    "topicId": 313, 
    "postDate": "980453925", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Kevin Bourrillion &lt;kevinb@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "Pvvq6IAxdLvmztd1gBtffIM6kQPGe_6i40SW0cN6iszMourT1Ui3Tp5ItjqyfHUt-284iNmcveaMH9jCafHwENtpbvdVOMLk_5Oe0g", 
    "nextInTime": 321, 
    "userId": 0, 
    "prevInTime": 319, 
    "prevInTopic": 315, 
    "headers": {
        "messageIdInHeader": "PDU5Mzk2QTYzMjJBN0Q0MTFBNDUxMDAwMkIzMEExMjJBNTcwMUVCQGVtYWlsLm1vZGVsdDEuY29tPg=="
    }, 
    "authorName": "Kevin Bourrillion", 
    "numMessagesInTopic": 9, 
    "msgSnippet": "Testing for thread-safety is a statistical proposition. The best strategy I can think of is to have n different copies of your suite, each in random order,", 
    "contentTrasformed": false, 
    "msgId": 320, 
    "nextInTopic": 321, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;kevinb@...&gt;\r\nX-Sender: kevinb@...\r\nX-Apparently-To: junit@egroups.com\r\nReceived: (EGP: mail-7_0_2); 25 Jan 2001 20:41:19 -0000\r\nReceived: (qmail 7715 invoked from network); 25 Jan 2001 20:20:45 -0000\r\nReceived: from unknown (10.1.10.26) by l7.egroups.com with QMQP; 25 Jan 2001 20:20:45 -0000\r\nReceived: from unknown (HELO bgpmail1.modeln.com) (63.114.1.68) by mta1 with SMTP; 25 Jan 2001 20:20:44 -0000\r\nReceived: by email.modelt1.com with Internet Mail Service (5.5.2650.21) id &lt;DGHD1FQ7&gt;; Thu, 25 Jan 2001 12:18:55 -0800\r\nMessage-ID: &lt;59396A6322A7D411A4510002B30A122A5701EB@...&gt;\r\nTo: &quot;&#39;junit@egroups.com&#39;&quot; &lt;junit@egroups.com&gt;\r\nSubject: RE: [junit] how to test if something is thread safe?\r\nDate: Thu, 25 Jan 2001 12:18:45 -0800\r\nMIME-Version: 1.0\r\nX-Mailer: Internet Mail Service (5.5.2650.21)\r\nContent-Type: multipart/alternative; boundary=&quot;----_=_NextPart_001_01C0870C.04D3A370&quot;\r\nFrom: Kevin Bourrillion &lt;kevinb@...&gt;\r\n\r\n\r\n------_=_NextPart_001_01C0870C.04D3A370\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\n\r\nTesting for thread-safety is a statistical proposition.\n \nThe best strategy I can think of is to have n different copies of your\nsuite, each in random order, each running repeatedly in its own thread (n\nthreads total), and let them all run for an extraordinarily long time.  If a\nfailure is detected, you should write out a full thread dump so that you can\nsee exactly what every thread was doing.  (Not sure if there&#39;s an easy way\nto do that--can the JVM send a SIGQUIT to itself??)\n \nYou want it to test every conceivable combination of things that could be\nhappening at once.  It may or may not be advantageous to add a short random\nsleep interval between test cases (say, between 1 and 100 milliseconds?  the\nlonger it is, the fewer threads are actively testing at any moment).\n \nBut, theoretically speaking, you could test that way for a hundred million\nyears, then deploy in production and have it bomb out on a user in the first\nhour.  :-)\n \nThoughts?\n \nKevin\n\n-----Original Message-----\nFrom: John Brewer [mailto:jbrewer@...]\nSent: Wednesday, January 24, 2001 4:36 PM\nTo: junit@egroups.com\nSubject: Re: [junit] how to test if something is thread safe?\n\n\nAt 12:08 PM 1/24/01 , Peter Bismuti wrote:\n&gt;Are there any standard tests to verify that class is thread safe?\n\nThere&#39;s no easy way to do verify thread safety with tests, because the race\ncondition may only happen very rarely, and possibly not at all on the VM\nyou are using.\n\nWriting thread safe classes is tricky.  Doug Lea, author of &quot;Concurrent\nProgramming in Java&quot;, says they still give him trouble.\n\nA few simplifications that might work for you:\n\n* Do everything in one thread (the Swing approach).\n* Immutable classes are always thread safe.\n* Classes not reachable from outside the current thread are always thread\nsafe.\n\nFor everything else, you&#39;re on your own.  Try reading Concurrent\nProgramming in Java for a good overview of the issues involved.\n\nJohn Brewer\nJera Design\n\n\neGroups Sponsor\t\n \n&lt;http://rd.yahoo.com/M=168002.1291681.2888959.2/D=egroupmail/S=1700007181:N/\nA=564957/*http://www.columbiahouse.com/gateway?token=7416&gt; Choose 3 DVDs for\n$0.49 each!\nChoose 3 DVDs for $0.49 each!\t\n \n&lt;http://us.adserver.yahoo.com/l?M=168002.1291681.2888959.2/D=egroupmail/S=17\n00007181:N/A=564957/rand=105486240&gt; \t\n\nTo unsubscribe from this group, send an email to:\njunit-unsubscribe@egroups.com\n\n\n\n\n\r\n------_=_NextPart_001_01C0870C.04D3A370\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;\n&lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; charset=iso-8859-1&quot;&gt;\n\n\n&lt;META content=&quot;MSHTML 5.50.4522.1800&quot; name=GENERATOR&gt;&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;Testing for thread-safety is&nbsp;a statistical \nproposition.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff size=2&gt;The \nbest strategy I can think of is to have n different copies of your suite, each \nin random order, each running repeatedly in its own thread (n threads total), \nand let them all run for an extraordinarily long time.&nbsp; If a failure is \ndetected, you should write out a full thread dump so that you can see exactly \nwhat every thread was doing.&nbsp; (Not sure if there&#39;s an easy way to do \nthat--can the JVM send a SIGQUIT to itself??)&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff size=2&gt;You \nwant it to test every conceivable combination of things that could be happening \nat once.&nbsp; It may or may not be advantageous to add a short random sleep \ninterval between test cases (say, between 1 and 100 milliseconds?&nbsp; the \nlonger it is, the fewer threads are actively testing at any \nmoment).&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff size=2&gt;But, \ntheoretically speaking, you could test that way for a hundred million years, \nthen deploy in production and have it bomb out on a user in the first \nhour.&nbsp; :-)&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;Thoughts?&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=406151220-25012001&gt;&lt;FONT face=Arial color=#0000ff \nsize=2&gt;Kevin&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;BLOCKQUOTE&gt;\n  &lt;DIV class=OutlookMessageHeader dir=ltr align=left&gt;&lt;FONT face=Tahoma \n  size=2&gt;-----Original Message-----&lt;BR&gt;&lt;B&gt;From:&lt;/B&gt; John Brewer \n  [mailto:jbrewer@...]&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt; Wednesday, January 24, 2001 4:36 \n  PM&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt; junit@egroups.com&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [junit] how to test \n  if something is thread safe?&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;TT&gt;At 12:08 PM 1/24/01 , \n  Peter Bismuti wrote:&lt;BR&gt;&gt;Are there any standard tests to verify that class \n  is thread safe?&lt;BR&gt;&lt;BR&gt;There&#39;s no easy way to do verify thread safety with \n  tests, because the race&lt;BR&gt;condition may only happen very rarely, and possibly \n  not at all on the VM&lt;BR&gt;you are using.&lt;BR&gt;&lt;BR&gt;Writing thread safe classes is \n  tricky.&nbsp; Doug Lea, author of &quot;Concurrent&lt;BR&gt;Programming in Java&quot;, says \n  they still give him trouble.&lt;BR&gt;&lt;BR&gt;A few simplifications that might work for \n  you:&lt;BR&gt;&lt;BR&gt;* Do everything in one thread (the Swing approach).&lt;BR&gt;* Immutable \n  classes are always thread safe.&lt;BR&gt;* Classes not reachable from outside the \n  current thread are always thread safe.&lt;BR&gt;&lt;BR&gt;For everything else, you&#39;re on \n  your own.&nbsp; Try reading Concurrent&lt;BR&gt;Programming in Java for a good \n  overview of the issues involved.&lt;BR&gt;&lt;BR&gt;John Brewer&lt;BR&gt;Jera \nDesign&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To \n  unsubscribe from this group, send an email \n  to:&lt;BR&gt;junit-unsubscribe@egroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------_=_NextPart_001_01C0870C.04D3A370--\r\n\n", 
    "subject": "RE: [junit] how to test if something is thread safe?"
}