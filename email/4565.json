{
    "numMessagesInTopic": 52, 
    "nextInTime": 4566, 
    "senderId": "SvNPyvxtaGo3_BaDH9_AAGJE_9fhzJp0hzkkhCLChwfxSNwEabWF0-4zgrXq323mTXVmO3ZGG9-HTmRIanz2o7rugyptsXfMoI4", 
    "systemMessage": false, 
    "subject": "Re: FieldAccessor - was Re: [junit] testing private methods", 
    "from": "John Goodsen &lt;jgoodsen@...&gt;", 
    "authorName": "John Goodsen", 
    "msgSnippet": "You can rip out the copyrights also ... it s not rocket science what s going on ... -- John Goodsen           RADSoft / Rapid Software Delivery Specialists ", 
    "msgId": 4565, 
    "profile": "jgoodsen", 
    "topicId": 3179, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 29621510, 
    "messageBody": "<div id=\"ygrps-yiv-370299618\">You can rip out the copyrights also ... it&#39;s not rocket<br/>\nscience what&#39;s going on ...<br/>\n<br/>\n-- <br/>\nJohn Goodsen           RADSoft / Rapid Software Delivery Specialists<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jgoodsen@...\">jgoodsen@...</a>             eXtreme Java Internet Consultants<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.radsoft.com\">http://www.radsoft.com</a>           Toll Free: 866-RADSOFT (723-7638)<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt;<br/>\n&gt; I almost hate to do this, but here&#39;s a couple of classes that<br/>\n&gt; let you access private fields and invoke private methods.<br/>\n&gt; FieldAccessor and MethodAccessor, respectively.  I admit<br/>\n&gt; to helping write this code and since then, I try very hard<br/>\n&gt; to never use it.<br/>\n&gt;<br/>\n&gt; If you want to pop your brains out and you can handle the<br/>\n&gt; smell in your unit tests ... have at it! :-)<br/>\n&gt;<br/>\n&gt; ------- class Fieldccessor.java ------------<br/>\n&gt;<br/>\n&gt; //<br/>\n&gt; // (C) 1999-2001, RADSoft.  All Rights Reserved.<br/>\n&gt; // This code may be used freely as long as the above copyright is included.<br/>\n&gt; //<br/>\n&gt; import java.lang.reflect.Field;<br/>\n&gt;<br/>\n&gt; public final class FieldAccessor {<br/>\n&gt;<br/>\n&gt;     public static Object get(Object object, String fieldName) {<br/>\n&gt;         if (object == null) throw new IllegalArgumentException(&quot;Object<br/>\n&gt; passed to FieldAccessor.get is null&quot;);<br/>\n&gt;         Exception exception = null;<br/>\n&gt;         for (Class objectClass = object.getClass(); objectClass != null;<br/>\n&gt; objectClass = objectClass.getSuperclass()) {<br/>\n&gt;             try {<br/>\n&gt;                 Field field = objectClass.getDeclaredField(fieldName);<br/>\n&gt;                 field.setAccessible(true);<br/>\n&gt;                 Object obj = field.get(object);<br/>\n&gt;                 return obj;<br/>\n&gt;             } catch (Exception ex) {<br/>\n&gt;                 exception = ex;<br/>\n&gt;             }<br/>\n&gt;         }<br/>\n&gt;         throw new RuntimeException(&quot;Could get value for field &quot; +<br/>\n&gt; object.getClass().getName() + &quot;.&quot; + fieldName);<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     public static Object getStatic(Class clazz, String fieldName) {<br/>\n&gt;         Exception exception = null;<br/>\n&gt;         for (; clazz != null; clazz = clazz.getSuperclass()) {<br/>\n&gt;             try {<br/>\n&gt;                 Field field = clazz.getDeclaredField(fieldName);<br/>\n&gt;                 field.setAccessible(true);<br/>\n&gt;                 Object obj = field.get(clazz);<br/>\n&gt;                 return obj;<br/>\n&gt;             } catch (Exception ex) {<br/>\n&gt;                 exception = ex;<br/>\n&gt;             }<br/>\n&gt;         }<br/>\n&gt;         throw new RuntimeException(&quot;Could get value for static field &quot; +<br/>\n&gt; clazz.getName() + &quot;.&quot; + fieldName);<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     public static void set(Object object, String fieldName, Object value) {<br/>\n&gt;         if (object == null) throw new IllegalArgumentException(&quot;Object<br/>\n&gt; passed to FieldAccessor.set is null&quot;);<br/>\n&gt;         Class objectClass = object.getClass();<br/>\n&gt;         Exception exception = null;<br/>\n&gt;         for (; objectClass != null; objectClass =<br/>\n&gt; objectClass.getSuperclass()) try {<br/>\n&gt;                 Field field = objectClass.getDeclaredField(fieldName);<br/>\n&gt;                 field.setAccessible(true);<br/>\n&gt;                 field.set(object, value);<br/>\n&gt;                 return;<br/>\n&gt;             } catch (Exception ex) {<br/>\n&gt;                 exception = ex;<br/>\n&gt;             }<br/>\n&gt;         throw new RuntimeException(&quot;Could set value for field &quot; +<br/>\n&gt; object.getClass().getName() + &quot;.&quot; + fieldName);<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     public static void setStatic(Class clazz, String fieldName, Object<br/>\n&gt; value) {<br/>\n&gt;         if (clazz == null) throw new IllegalArgumentException(&quot;Object<br/>\n&gt; passed to FieldAccessor.setStatic<br/>\n&gt; is null&quot;);<br/>\n&gt;         Exception exception = null;<br/>\n&gt;         for (; clazz != null; clazz = clazz.getSuperclass()) {<br/>\n&gt;             try {<br/>\n&gt;                 Field field = clazz.getDeclaredField(fieldName);<br/>\n&gt;                 field.setAccessible(true);<br/>\n&gt;                 field.set(clazz, value);<br/>\n&gt;                 return;<br/>\n&gt;             } catch (Exception ex) {<br/>\n&gt;                 exception = ex;<br/>\n&gt;             }<br/>\n&gt;         }<br/>\n&gt;         throw new RuntimeException(&quot;Could set value for static field &quot; +<br/>\n&gt; clazz.getName() + &quot;.&quot; + fieldName);<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; ------- class MethodAccessor.java ------------<br/>\n&gt;<br/>\n&gt; //<br/>\n&gt; // (C) 1999-2001, RADSoft.  All Rights Reserved.<br/>\n&gt; // This code may be used freely as long as the above copyright is included.<br/>\n&gt; //<br/>\n&gt;<br/>\n&gt; import java.lang.reflect.Method;<br/>\n&gt;<br/>\n&gt; public final class MethodAccessor {<br/>\n&gt;<br/>\n&gt;     public static Object invoke(Object object, String methodName, Class<br/>\n&gt; parameterTypes[], Object parameters[]) {<br/>\n&gt;         try {<br/>\n&gt;             Method method = object.getClass().getDeclaredMethod(methodName,<br/>\n&gt; parameterTypes);<br/>\n&gt;             method.setAccessible(true);<br/>\n&gt;             Object obj = method.invoke(object, parameters);<br/>\n&gt;             return obj;<br/>\n&gt;         } catch (Exception ex) {<br/>\n&gt;             ex.printStackTrace();<br/>\n&gt;         }<br/>\n&gt;         throw new RuntimeException(&quot;Failed method invocation: &quot; +<br/>\n&gt; object.getClass().getName() + &quot;.&quot; + methodName + &quot;()&quot;);<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     public static Object invokeStatic(Class clazz, String methodName, Class<br/>\n&gt; parameterTypes[], Object parameters[]) {<br/>\n&gt;         try {<br/>\n&gt;             Method method = clazz.getDeclaredMethod(methodName,<br/>\n&gt; parameterTypes);<br/>\n&gt;             method.setAccessible(true);<br/>\n&gt;             Object obj = method.invoke(clazz, parameters);<br/>\n&gt;             return obj;<br/>\n&gt;         } catch (Exception ex) {<br/>\n&gt;             ex.printStackTrace();<br/>\n&gt;         }<br/>\n&gt;         throw new RuntimeException(&quot;Failed static method invocation: &quot; +<br/>\n&gt; clazz.getName() + &quot;.&quot; + methodName + &quot;()&quot;);<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> </span></blockquote></div>", 
    "prevInTime": 4564, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1017783740", 
    "canDelete": false, 
    "nextInTopic": 4567, 
    "prevInTopic": 4564, 
    "headers": {
        "inReplyToHeader": "PDIwMDIwNDAyMjE0My5nMzJMaDRjMDY2ODVAbWFpbGhvc3Qud2ViLWhvc3RpbmcuY29tPg==", 
        "referencesHeader": "PEY4OU9BbmpMR1hZQjFKNU5QQWswMDAwNGM2ZUBob3RtYWlsLmNvbT4gPDIwMDIwNDAyMjE0My5nMzJMaDRjMDY2ODVAbWFpbGhvc3Qud2ViLWhvc3RpbmcuY29tPg=="
    }
}