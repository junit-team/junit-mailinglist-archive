{
    "numMessagesInTopic": 8, 
    "nextInTime": 20592, 
    "senderId": "J_OyTwxdSGgfNVxUxvP7iq58tvPLjuPeIbbfGdhUV42EqGooQoQjA5MNvbaGiOAPKP9QTPaZyQ6tGz7aqdv22eibOJ4tbTU9lbdbf_QNjPUGHDY", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing code that depends on today&#39;s date", 
    "from": "&quot;Andrew McDonagh&quot; &lt;andrewmcdonagh@...&gt;", 
    "authorName": "Andrew McDonagh", 
    "msgSnippet": "Hi, If you use the Abstract Factory pattern to create the Date() object instance, instead of calling new Date() yourself or passing it around, then the", 
    "msgId": 20591, 
    "profile": "andy_ipaccess", 
    "topicId": 20590, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 283773244, 
    "messageBody": "<div id=\"ygrps-yiv-900947169\">Hi,<br/>\n<br/>\nIf you use the Abstract Factory pattern to create the Date() object<br/>\ninstance, instead of calling new Date() yourself or passing it around,<br/>\nthen the production TodaysDateConcreteFactory can simply :<br/>\n<br/>\nreturn new Date();<br/>\n<br/>\n<br/>\nWhereas during your unit or functional tests, you use a<br/>\nMockTodaysDateConcreteFactory object, which returns what ever you want<br/>\n<br/>\nreturn expectedDate;<br/>\n<br/>\nHope this helps<br/>\n<br/>\nAndrew<br/>\n<br/>\n<br/>\n2008/6/17 Per Jacobsson &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:perjacobsson@...\">perjacobsson@...</a>&gt;:<br/>\n<blockquote><span title=\"qreply\"> &gt; Hi,<br/>\n&gt; This has been annoying me for a while and I can&#39;t think of a clean solution<br/>\n&gt; for it. Hope this makes sense: I have some code that returns different<br/>\n&gt; results depending on what today&#39;s date is (the number of days since a user<br/>\n&gt; first registered, etc). The simple approach is to just create a new instance<br/>\n&gt; of java.util.Date whenever I need to know the current date, but that tends<br/>\n&gt; to make both unit and automated functional testing difficult.<br/>\n&gt;<br/>\n&gt; I&#39;m currently injecting today&#39;s date into the classes that need it, and then<br/>\n&gt; the tests can just use a static date. It gets pretty ugly though, a lot of<br/>\n&gt; times this date has to be dragged along deep into the domain model.<br/>\n&gt;<br/>\n&gt; An alternative would be to take the old school approach and have a static<br/>\n&gt; factory that everything that needs to know today&#39;s date calls, and allow the<br/>\n&gt; unit tests to override with a test date. Of course, then you run into all<br/>\n&gt; the other issues that dependency injection solves.<br/>\n&gt;<br/>\n&gt; Any thoughts?<br/>\n&gt; Thanks,<br/>\n&gt; / Per<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 20590, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1213744800", 
    "canDelete": false, 
    "nextInTopic": 20592, 
    "prevInTopic": 20590, 
    "headers": {
        "inReplyToHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPg==", 
        "messageIdInHeader": "PDM1YzUwN2QzMDgwNjE3MTYyMHAyODFlNWYyY3Y2YmEwZGExN2E2MGE5ZWI2QG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPg=="
    }
}