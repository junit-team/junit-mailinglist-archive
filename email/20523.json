{
    "numMessagesInTopic": 21, 
    "nextInTime": 20524, 
    "senderId": "jPqURn6t_udRhQYlxavPStLu21XGYVQBDGgbk8ccfe5ZkmxKRP1fJPO9Ig5Mbh-FkmroCpzCvtUp9CnnbIRlb8nozoNzBmHwZz087xJHkSK7", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: What is expected behavior on Assert.assertEquals on Number object?", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains762@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... That s almost certainly what is happening, and good deduction. Now we ask the question, what s the better answer? Defeat the purpose of ", 
    "msgId": 20523, 
    "profile": "nails762", 
    "topicId": 20513, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 282027414, 
    "messageBody": "<div id=\"ygrps-yiv-1860352551\">On 2008-06-06, at 08:45 , Roger Glover wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Nattapong Sirilappanich &lt;natta@...&gt;  <br/>\n&gt; wrote:<br/>\n&gt; &gt; Actually, my point here is i&#39;m expecting<br/>\n&gt; &gt; org.junit.Assert.assertEquals(Object obj1, Object obj2) to call<br/>\n&gt; &gt; its obj1.equals(obj2) or something like this. However, the<br/>\n&gt; &gt; outcome surprise me. Assertion success but obj1.equals(obj2)<br/>\n&gt; &gt; return false.<br/>\n&gt; &gt;<br/>\n&gt; &gt; What&#39;s going on inside assertEquals() operation? Is this what<br/>\n&gt; &gt; it&#39;s suppose to be?<br/>\n&gt;<br/>\n&gt; As I stated, albeit not very clearly the first time (Curse you &quot;Rich<br/>\n&gt; Text Editor(Beta)&quot;!), I suspect that the culprit here is that<br/>\n&gt; &quot;Assert.assertEquals(Object, Object)&quot; is not being called at all. This<br/>\n&gt; is borne out by the fact that a J2SE 1.4 compiler and a JavaSE 1.5<br/>\n&gt; compiler treat the same call completely differently.<br/>\n&gt;<br/>\n&gt; I *SUSPECT* that the 1.5 compiler is unboxing the Double objects into<br/>\n&gt; primitive longs and that the method that is *ACTUALLY* called is<br/>\n&gt; &quot;Assert.assertEquals(long,long)&quot;. This accounts for the behavior since<br/>\n&gt; the integer parts of your two numbers are the same.<br/>\n&gt; &quot;Assert.assertEquals(long,long)&quot; yields is successful after the<br/>\n&gt; Doubles are converted (truncated) to longs.<br/>\n&gt;<br/>\n </span></blockquote>That&#39;s almost certainly what is happening, and good deduction. Now we  <br/>\nask the question, what&#39;s the better answer? Defeat the purpose of  <br/>\nassertEquals(Object,Object) or letting programmers hoist themselves on  <br/>\ntheir own petards?<br/>\n<br/>\nJUnit could detect this situation, but if it did, I&#39;d prefer it to  <br/>\nwarn the programmer rather than fix the problem, because I want to  <br/>\nencourage programmers to improve their design: either the test should  <br/>\ncompare the Double values with a tolerance, or perhaps the production  <br/>\ncode ought not to use Doubles.<br/>\n<br/>\nTake care.<br/>\n----<br/>\nJ. B. (Joe) Rainsberger :: <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.jbrains.ca\">http://www.jbrains.ca</a><br/>\nYour guide to software craftsmanship<br/>\nJUnit Recipes: Practical Methods for Programmer Testing<br/>\n2005 Gordon Pask Award for contributions to Agile Software Practice</div>", 
    "prevInTime": 20522, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1212799198", 
    "canDelete": false, 
    "nextInTopic": 20527, 
    "prevInTopic": 20522, 
    "headers": {
        "inReplyToHeader": "PGcyYmYxdCtyMml1QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PEYxMTA2NUY5LUM4RTktNDg5Qi1CNjBCLTkwNDlFMjExMDM1Q0BnbWFpbC5jb20+", 
        "referencesHeader": "PGcyYmYxdCtyMml1QGVHcm91cHMuY29tPg=="
    }
}