{
    "numMessagesInTopic": 7, 
    "nextInTime": 18523, 
    "senderId": "-_TR7ozOOltdUrHJsD7h6RoDR5LPTrP1QpTN02MYsxed-ZA7JWOE8x3yZn0_HlVA9tJVqtR-Id79kV66THtOtq30goV2sUEIPzA", 
    "systemMessage": false, 
    "subject": "Re: Philosophical question--Multiple assertions in one test case", 
    "from": "&quot;lancezant&quot; &lt;lancezant@...&gt;", 
    "authorName": "lancezant", 
    "msgSnippet": "Short answer: To my understanging, the intent of the rule is to test one thing in each test.  If it takes multiple assertions to do so, go for it. ", 
    "msgId": 18522, 
    "profile": "lancezant", 
    "topicId": 18509, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 291419863, 
    "messageBody": "<div id=\"ygrps-yiv-1795249788\">Short answer:<br/>\nTo my understanging, the intent of the rule is to test one thing in<br/>\neach test.  If it takes multiple assertions to do so, go for it.<br/>\n<br/>\nPhilosophical rationale:<br/>\nHaving many separate tests offers several advantages over having fewer<br/>\nbigger tests.  Having a smaller scope, smaller tests better pinpoint<br/>\nany bugs they reveal.  When a small test fails, the others still run,<br/>\nwhereas if a bigger test fails early, the later portions get skipped.<br/>\n With separate tests, you can add new tests without having to be too<br/>\ncareful stitching them into the old ones.  You get the idea, it&#39;s<br/>\nsimply the modularity concept applied to tests.<br/>\n<br/>\nHence the heuristic that each test should test only one thing.  But<br/>\nwhat constitutes &quot;one thing&quot; can be subtle, and should be approached<br/>\nthe same as for other modules.  That is to say, it&#39;s best defined in<br/>\nterms of the function accomplished rather than the syntax in which it<br/>\nis expressed.  From your example of testing a DAO, you probably want<br/>\nto test the CRUD functions separately, but within, say, the update,<br/>\nthe point is to test that all and only updated fields actually change.<br/>\n That will naturally lead to multiple assertions, and probably<br/>\nmultiple updates of various field combinations.  Usually, it would be<br/>\nsilly to repeat the whole test for each field.<br/>\n<br/>\nThat said, when it comes to testing cross-field rules and invariants,<br/>\nyou&#39;ll want separate tests for each, but the reason is that now you&#39;re<br/>\ntesting different things, not because you want to limit the number of<br/>\nassert statements.  <br/>\n<br/>\nAs often happens, pithy one-line rules make great reminders of things<br/>\nwe already know, but poor explanations of ideas that are new to us.  I<br/>\nthink this is a good example.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;shefehs&quot; &lt;julie_sheffield@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; I&#39;ve read all over the place that it&#39;s a bad idea to include multiple<br/>\n&gt; assertions in one test case, but it seems to me that sometimes it&#39;s<br/>\n&gt; very useful. For example, I have a fairly straightforward DAO and I<br/>\n&gt; want to test the create method.  But to really test it, I need to<br/>\n&gt; retrieve it afterwards and make sure it was successfully created.  And<br/>\n&gt; I need to clean it up afterwards (or the test will fail next time I<br/>\n&gt; run it and try to create a duplicate), so I call my delete method. <br/>\n&gt; There I&#39;ve exercised 3 methods of my DAO, not just one.  So it feels<br/>\n&gt; like it would save time to assert that each step of the process<br/>\n&gt; succeeded.  <br/>\n&gt; <br/>\n&gt; Example:<br/>\n&gt;   public void testEmployeeCRUD()<br/>\n&gt;   throws Exception<br/>\n&gt;   {<br/>\n&gt; \tint sizeBeforeAdding = em.listEmployees().size();<br/>\n&gt; \t_employeeId = em.createEmployee(_fname, _lname, _jobtitle);<br/>\n&gt; \t<br/>\n&gt;         int sizeAfterAdding = em.listEmployees().size();<br/>\n&gt;         log.debug(&quot;Created employee &quot; + _employeeId);<br/>\n&gt;         //Make sure that the new list is longer than the old list<br/>\n&gt; \tassertTrue(&quot;Create employee failed&quot;, sizeAfterAdding&gt;sizeBeforeAdding);<br/>\n&gt;                <br/>\n&gt;         Employee emp = em.getEmployee(_employeeId);<br/>\n&gt;         assertEquals(&quot;getEmployee failed&quot;, emp.getLName(), _lname);<br/>\n&gt;         log.debug(&quot;Retrieved employee &quot; + emp.getLName());<br/>\n&gt;                 <br/>\n&gt;         em.deleteEmployee(emp);<br/>\n&gt;                 <br/>\n&gt;         int sizeAfterDelete = em.listEmployees().size();<br/>\n&gt;                 <br/>\n&gt;         //Make sure that the length of the list after delete <br/>\n&gt;         //is the same as it was before we added<br/>\n&gt;         assertEquals(&quot;Delete employee failed&quot;, sizeAfterDelete,<br/>\n&gt; sizeBeforeAdding);<br/>\n&gt;         log.debug(&quot;Deleted employee&quot;);<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt; The preceding code works just fine.  If the test fails, I&#39;d look in<br/>\n&gt; the failure message to see which part of it failed, and it seems like<br/>\n&gt; that&#39;s not too difficult.  I know it&#39;s not following best practices<br/>\n&gt; because it calls 4 separate methods, but when I tried writing a test<br/>\n&gt; for each of those methods, I ended up either calling the other ones in<br/>\n&gt; the setup/teardown or by essentially recreating them in a sample data<br/>\n&gt; loading operation.  I&#39;m trying to do good TDD and to convince a<br/>\n&gt; colleague who resists unit tests at all, so I don&#39;t want to do things<br/>\n&gt; &quot;wrong&quot; but I also don&#39;t want to make life tremendously more difficult<br/>\n&gt; without understanding the real reason behind the recommendations.<br/>\n&gt; <br/>\n&gt; Does anyone have any thoughts on this principle?  I appreciate the<br/>\n&gt; intelligent exchanges I&#39;ve seen on the list in the past so I hope to<br/>\n&gt; get a thoughtful discussion going.<br/>\n&gt; <br/>\n&gt; Thanks very much!<br/>\n&gt; Julie<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 18521, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1165599866", 
    "canDelete": false, 
    "nextInTopic": 18550, 
    "prevInTopic": 18521, 
    "headers": {
        "inReplyToHeader": "PGVsN2FncCtkaTJwQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGVsYzg5cSs0M2VvQGVHcm91cHMuY29tPg=="
    }
}