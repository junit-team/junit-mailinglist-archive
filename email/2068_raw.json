{
    "topicId": 2066, 
    "postDate": "995919480", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Mathieu Gervais&quot; &lt;egoine_@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "J4IEOiWC2sOJarYGWZNNnAkyuj2fwGa2ZIzv7nUcg0zJ3KQ8HumFqzpq7_gXuE_Q391fUccPG7dLaQkWuibCSaPPJnPjbK_aFSlUqtK8", 
    "nextInTime": 2069, 
    "userId": 0, 
    "prevInTime": 2067, 
    "prevInTopic": 2067, 
    "headers": {
        "messageIdInHeader": "PE9FNTBSZ2NwZmlTQnRBTTlyNWgwMDAwMWIyN0Bob3RtYWlsLmNvbT4=", 
        "referencesHeader": "PDUuMS4wLjE0LjAuMjAwMTA3MjMxNDI5MjYuMDIzYjNiZTBAbWFpbC5tbmguY29tPg=="
    }, 
    "authorName": "Mathieu Gervais", 
    "numMessagesInTopic": 3, 
    "msgSnippet": "Hi, I didn t read your entire thread / problem, but I could give you a hint that could possibly help. If your method throws a InvocationTargetException, Junit", 
    "contentTrasformed": false, 
    "msgId": 2068, 
    "nextInTopic": 0, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;egoine_@...&gt;\r\nX-Sender: egoine_@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_2_0); 23 Jul 2001 20:19:07 -0000\r\nReceived: (qmail 79422 invoked from network); 23 Jul 2001 20:19:03 -0000\r\nReceived: from unknown (10.1.10.27) by m8.onelist.org with QMQP; 23 Jul 2001 20:19:03 -0000\r\nReceived: from unknown (HELO hotmail.com) (216.33.236.86) by mta2 with SMTP; 23 Jul 2001 20:19:03 -0000\r\nReceived: from mail pickup service by hotmail.com with Microsoft SMTPSVC; Mon, 23 Jul 2001 13:19:03 -0700\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;5.1.0.14.0.20010723142926.023b3be0@...&gt;\r\nSubject: Re: [junit] Digest Number 238\r\nDate: Mon, 23 Jul 2001 16:18:00 -0400\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4133.2400\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400\r\nMessage-ID: &lt;OE50RgcpfiSBtAM9r5h00001b27@...&gt;\r\nX-OriginalArrivalTime: 23 Jul 2001 20:19:03.0297 (UTC) FILETIME=[B7466710:01C113B4]\r\nFrom: &quot;Mathieu Gervais&quot; &lt;egoine_@...&gt;\r\n\r\nHi,\n\n I didn&#39;t read your entire thread / problem, but I could give you a hint\nthat could possibly help. If your method throws a InvocationTargetException,\nJunit will look inside it ( exception.getTargetException() ) and only tell\nyou about the target exception, so it could look like your code didn&#39;t catch\nthe exception.\n\nExample :\n\n the tested code throws an invocation target exception wrapping an sql\nexception.\n\nyour code tries to catch a sql exception and fails do to so.\n\njunit runner catches the invocation target exception, un wrapps the\nexception and tells you the exception was a sql exception.\n\nRelevant code is at:\n\nhttp://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/junit/junit/junit/runner/Base\nTestRunner.java?rev=1.7&content-type=text/vnd.viewcvs-markup\n\ngood luck,\n\n mathieu\n\n\n\n----- Original Message -----\nFrom: Frank Enos\nTo: junit@yahoogroups.com\nSent: Monday, July 23, 2001 3:17 PM\nSubject: Re: [junit] Digest Number 238\n\n\nHi Erik;\nIt gets stranger. In trying to write a simple set of test cases, I\ndiscovered that the problem only exists if the exception is thrown from a\nclass named &quot;PersistenceManager&quot; (or PersistenceManager2...).That is, I\ncan&#39;t catch an exception in a test method in Junit if that exception is\nthrown by a class named PersistenceManager. Renaming the class\n&quot;PersistManager&quot; causes the expected behavior. I&#39;m also unable to duplicate\nthe persistence manager problem on a Win2k machine (I&#39;m working on Solaris)\nso I&#39;m assuming that it has to do with my environment, although my initial\nsuspicion that there was some conflicting &quot;PersistenceManager&quot; on my\nclasspath has shown to be fruitless.\n\nIf it turns out to be something more interesting than a conflict in my\nenvironment, I&#39;ll post some test cases; for now, thanks for pointing me in\nthe direction of a solution.\n\nFrank\n\n&gt;    Date: Sun, 22 Jul 2001 09:48:59 -0700\n&gt;    From: &quot;Erik Meade&quot; &lt;emeade@...&gt;\n&gt;Subject: RE: Re: Junit manipulating exceptions\n&gt;\n&gt;Frank,\n&gt;\n&gt;Can you write up a TestCase illustrating this?\n&gt;\n&gt;--\n&gt;Erik Meade             emeade@...\n&gt;Senior Consultant      Object Mentor, Inc.\n&gt;http://www.junit.org\n&gt;\n&gt;\n&gt; &gt; -----Original Message-----\n&gt; &gt; From: Frank Enos [mailto:fenos@...]\n&gt; &gt; Sent: Saturday, July 21, 2001 8:39 AM\n&gt; &gt; To: junit@yahoogroups.com\n&gt; &gt; Subject: [junit] Re: Junit manipulating exceptions\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Hi Jason. Thanks for responding.\n&gt; &gt;\n&gt; &gt; It&#39;s definitely not reaching the catch block. The assertions aren&#39;t\nbeing\n&gt; &gt; checked, and even adding a System.out.println(&quot;help me&quot;) or what\n&gt; &gt; have you,\n&gt; &gt; or a System.exit(); to the catch block has no effect. For some reason\nthe\n&gt; &gt; catch block is not catching the SQLException, even though if I catch the\n&gt; &gt; superclass Exception (as in my example testBadWrite2()), e.getClass()\n&gt; &gt; returns the expected java.sql.SQLException. One of my initial\n&gt; &gt; thoughts was\n&gt; &gt; that perhaps the Exception was being held somewhere in a Collection when\n&gt; &gt; the test methods are executed (there&#39;s a lot of reflection going on, and\n&gt; &gt; I&#39;m not sure I know exactly what&#39;s happening) and implicitly upcast to\n&gt; &gt; Exception, but the attempt to cast the caught Exception to SQLException\n&gt; &gt; throws a ClassCastException. I&#39;m mystified.\n&gt; &gt;\n&gt; &gt; BTW, toString(), when called on a subclass of Throwable returns the\n&gt; &gt; concatenation of : the full name of the class, &quot;: &quot;, and the result of\n&gt; &gt; getMessage(). If the Throwable was created without a message, it simply\n&gt; &gt; returns  the name of the class.\n&gt; &gt;\n&gt; &gt; Take care.\n&gt; &gt; Frank\n&gt; &gt;\n&gt;________________________________________________________________________\n&gt; &gt; &gt;\n&gt; &gt; &gt;Message: 9\n&gt; &gt; &gt;    Date: Fri, 20 Jul 2001 16:24:45 -0400\n&gt; &gt; &gt;    From: &quot;Jason Rogers&quot; &lt;jason.rogers@...&gt;\n&gt; &gt; &gt;Subject: RE: Junit manipulating exceptions?\n&gt; &gt; &gt;\n&gt; &gt; &gt;Frank,\n&gt; &gt; &gt;\n&gt; &gt; &gt;Are you sure that it isn&#39;t getting into the catch block?  Also, I\ndidn&#39;t\n&gt; &gt; &gt;know that e.toString() returned the same thing as\n&gt; &gt; e.getMessage().  Is that\n&gt; &gt; &gt;so?\n&gt; &gt; &gt;\n&gt; &gt; &gt;-Jason\n&gt; &gt; &gt;\n&gt; &gt; &gt;     &gt; -----Original Message-----\n&gt; &gt; &gt;     &gt; From: Frank Enos [mailto:fenos@...]\n&gt; &gt; &gt;     &gt; Sent: Friday, July 20, 2001 3:13 PM\n&gt; &gt; &gt;     &gt; To: junit@yahoogroups.com\n&gt; &gt; &gt;     &gt; Subject: [junit] Junit manipulating exceptions?\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; I&#39;ve provided coded examples below. My basic question is\n&gt; &gt; &gt;     &gt; this: Does Junit\n&gt; &gt; &gt;     &gt; (3.7) manipulate exceptions in some way that would\n&gt; &gt; &gt;     &gt; prevent an exception\n&gt; &gt; &gt;     &gt; from being caught in a normal try/catch block? The\n&gt; &gt; &gt;     &gt; behavior I&#39;m seeing is\n&gt; &gt; &gt;     &gt; that if I attempt to catch the specific exception thrown\n&gt; &gt; &gt;     &gt; by a method (e.g.\n&gt; &gt; &gt;     &gt; catch (java.sql.SQLException e), the catch block fails to\n&gt; &gt; &gt;     &gt; catch it and\n&gt; &gt; &gt;     &gt; Junit logs it as an error. If I use catch (Exception e),\n&gt; &gt; &gt;     &gt; the exception is\n&gt; &gt; &gt;     &gt; caught as I would expect. I find that I can call\n&gt; &gt; &gt;     &gt; getClass() on the caught\n&gt; &gt; &gt;     &gt; Exception and that it returns the expected SQLException,\n&gt; &gt; &gt;     &gt; whereas using\n&gt; &gt; &gt;     &gt; instanceof fails.\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; Examples (behaves the same using other methods throwing\n&gt; &gt; &gt;     &gt; other exception types)\n&gt; &gt; &gt;     &gt; methods are from:\n&gt; &gt; &gt;     &gt; public class PersistenceTest extends TestCase {...}\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt;    public static void main(String[] args) {\n&gt; &gt; &gt;     &gt;   try {\n&gt; &gt; &gt;     &gt;        PersistenceManager.singleton().write(&quot;insert into\n&gt; &gt; &gt;     &gt; noSuchTable\n&gt; &gt; &gt;     &gt; values(&#39;junk&#39;)&quot;);\n&gt; &gt; &gt;     &gt;     System.out.println(&quot;No exception writing to\n&gt; &gt; &gt;     &gt; non-existent table&quot;);\n&gt; &gt; &gt;     &gt;   } catch (SQLException e) {\n&gt; &gt; &gt;     &gt;     System.out.println(e.getClass().toString());\n&gt; &gt; &gt;     &gt;   }\n&gt; &gt; &gt;     &gt;    }\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; If I simply invoke this main()  method which I have added\n&gt; &gt; &gt;     &gt; to the test\n&gt; &gt; &gt;     &gt; class, it behaves as expected, printing the expected name\n&gt; &gt; &gt;     &gt; of the class and\n&gt; &gt; &gt;     &gt; exiting normally.\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt;    public void testBadWrite() {\n&gt; &gt; &gt;     &gt;   try {\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; PersistenceManager.singleton().write(&quot;insert into noSuchTable\n&gt; &gt; &gt;     &gt; values(&#39;hey&#39;)&quot;);\n&gt; &gt; &gt;     &gt;           fail(&quot;No exception writing to non-existent table&quot;);\n&gt; &gt; &gt;     &gt;   } catch (SQLException e) {\n&gt; &gt; &gt;     &gt;     assertTrue(e.toString().indexOf(&quot;ORA-00942&quot;) &gt; -1);\n&gt; &gt; &gt;     &gt;   }\n&gt; &gt; &gt;     &gt;    }\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; This test method fails to catch the SQLException, passing\n&gt; &gt; &gt;     &gt; it upwards and\n&gt; &gt; &gt;     &gt; logging an error.\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; The following test passes, however:\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt;    public void testBadWrite2() {\n&gt; &gt; &gt;     &gt;   try {\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; PersistenceManager.singleton().write(&quot;insert into noSuchTable\n&gt; &gt; &gt;     &gt; values(&#39;hey&#39;)&quot;);\n&gt; &gt; &gt;     &gt;           fail(&quot;No exception writing to non-existent table&quot;);\n&gt; &gt; &gt;     &gt;   } catch (Exception e) {\n&gt; &gt; &gt;     &gt;     assertEquals(&quot;java.sql.SQLException&quot;,\ne.getClass().getName())\n&gt; &gt; &gt;     &gt;     assertTrue(e.toString().indexOf(&quot;ORA-00942&quot;) &gt; -1);\n&gt; &gt; &gt;     &gt;   }\n&gt; &gt; &gt;     &gt;    }\n&gt; &gt; &gt;     &gt;\n&gt; &gt; &gt;     &gt; What am I missing?\n&gt; &gt; &gt;     &gt; Thanks,\n&gt; &gt; &gt;     &gt; Frank\n&gt; &gt; &gt;     &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; To unsubscribe from this group, send an email to:\n&gt; &gt; junit-unsubscribe@yahoogroups.com\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Your use of Yahoo! Groups is subject to\nhttp://docs.yahoo.com/info/terms/\n&gt; &gt;\n\n\nYahoo! Groups Sponsor\n\n\n\nTo unsubscribe from this group, send an email to:\njunit-unsubscribe@yahoogroups.com\n\n\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service.\n\n", 
    "subject": "Re: [junit] Digest Number 238"
}