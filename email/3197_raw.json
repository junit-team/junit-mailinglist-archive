{
    "numMessagesInTopic": 52, 
    "nextInTime": 3198, 
    "senderId": "khd35Z5BmPlpVFWZpR2LTY4B-EmP558rOO2t4vUWODZ5rsA-8RrmZ7gLT-X0MMWfJYmC9sHD1nZmbLVFUjUnIYjm6_UGMLOv", 
    "systemMessage": false, 
    "subject": "Re: [junit] testing private methods", 
    "from": "Jason Rogers &lt;jacaetev@...&gt;", 
    "authorName": "Jason Rogers", 
    "msgSnippet": "I would suggest searching the archives for this topic. There are several opinions there about testing your privates and package protecteds. -jason ... Keep it", 
    "msgId": 3197, 
    "rawEmail": "Return-Path: &lt;jacaetev@...&gt;\r\nX-Sender: jacaetev@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_0_1); 7 Nov 2001 13:30:41 -0000\r\nReceived: (qmail 92056 invoked from network); 7 Nov 2001 13:30:41 -0000\r\nReceived: from unknown (216.115.97.167)\n  by m4.grp.snv.yahoo.com with QMQP; 7 Nov 2001 13:30:41 -0000\r\nReceived: from unknown (HELO web14806.mail.yahoo.com) (216.136.224.222)\n  by mta1.grp.snv.yahoo.com with SMTP; 7 Nov 2001 13:30:40 -0000\r\nMessage-ID: &lt;20011107133037.75527.qmail@...&gt;\r\nReceived: from [66.19.19.161] by web14806.mail.yahoo.com via HTTP; Wed, 07 Nov 2001 05:30:37 PST\r\nDate: Wed, 7 Nov 2001 05:30:37 -0800 (PST)\r\nSubject: Re: [junit] testing private methods\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;Pine.LNX.4.30.0111061032530.1865-100000@...-lan&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nFrom: Jason Rogers &lt;jacaetev@...&gt;\r\nX-Yahoo-Profile: jacaetev\r\n\r\nI would suggest searching the archives for this topic. \nThere are several opinions there about testing your\nprivates and package protecteds.\n\n-jason\n\n--- Eric Vought &lt;evought@...&gt; wrote:\n&gt; \n&gt; Typically, the way you accomplish both objectives (hiding\n&gt; functionality\n&gt; and exposing it for unit testing) is to use a Facade. You\n&gt; expose the\n&gt; methods that you want available for testing within the\n&gt; package (package\n&gt; private methods and/or classes). You create a public\n&gt; class (the Facade)\n&gt; which exposes just the methods (for the package) you\n&gt; want. You hide the\n&gt; actual classes you return from the Facade behind simple\n&gt; interfaces. Your\n&gt; test classes are declared in the same package as your\n&gt; code and therefore\n&gt; have access to the package protected functionality.\n&gt; \n&gt; The second option you suggest runInternalTests(..) is\n&gt; also a good thing to\n&gt; do. We call our equivalent interface InvariantsChecker\n&gt; and the method\n&gt; checkInvariants(). We use this method to ensure that an\n&gt; object is in an\n&gt; internally consistent state (e.g. that a stack&#39;s top\n&gt; index does not\n&gt; exceed the capacity of the underlying array). You can\n&gt; then call this\n&gt; method from within your test code:\n&gt; \n&gt; void testPop() throws Exception\n&gt; {\n&gt; \td_stack.push(d_item1);\n&gt; \td_stack.checkInvariants();\n&gt; \n&gt; \tObject poppedItem = stack.pop();\n&gt; \td_stack.checkInvariants();\n&gt; \n&gt; \tassertSame(item1, poppedItem);\n&gt; } // testPop()\n&gt; \n&gt; With a little care, you can have runInternalTests() or\n&gt; checkInvariants()\n&gt; run recursively to run consistency checks on contained or\n&gt; referenced\n&gt; components. The key is to make sure the checks terminate\n&gt; at some point.\n&gt; We define a simple InvariantsTracker class which monitors\n&gt; the recursion\n&gt; for us and ensures that it terminates. InvariantsTracker\n&gt; just keeps a list\n&gt; of object instances that it has already seen. We pass a\n&gt; new\n&gt; InvariantsTracker to the first checkInvariants(..) call\n&gt; which in turn\n&gt; passes the same instance to recursive calls.\n&gt; \n&gt; boolean checkInvariants(InvariantsTracker hitList)\n&gt; {\n&gt; \tif (hitList.alreadyHit(this)) return false;\n&gt; \n&gt; \tAssert.invariant(d_top &lt; d_size);\n&gt; \n&gt; \treturn true;\n&gt; } // checkInvariants(..)\n&gt; \n&gt; In a subclass, the form is slightly different, since the\n&gt; base class\n&gt; performs the check:\n&gt; \n&gt; boolean checkInvariants(InvariantsTracker hitList)\n&gt; {\n&gt; \tif (!(super.checkInvariants(hitList))) return false;\n&gt; \n&gt; \t// ...\n&gt; \n&gt; \treturn true;\n&gt; } // checkInvariants(..)\n&gt; \n&gt; The test code then looks like this:\n&gt; \n&gt; void testPop() throws Exception\n&gt; {\n&gt; \td_stack.push(item1);\n&gt; \td_stack.checkInvariants(new InvariantsTracker());\n&gt; \n&gt; \t// ...\n&gt; } // testPop()\n&gt; \n&gt; This ends up being a very simple and powerful technique.\n&gt; Having the unit\n&gt; tests run the consistency checks in addition to checking\n&gt; external logic\n&gt; allows you to catch many more errors with far fewer\n&gt; tests. You begin to\n&gt; catch errors early on that don&#39;t normally show up until\n&gt; load or soak\n&gt; testing and are much harder to diagnose then. Our code is\n&gt; available for\n&gt; download if you are interested. There is also a package\n&gt; out\n&gt; there called iContract which generates invariant checking\n&gt; code based on\n&gt; special javadoc comments. iContract has the advantage\n&gt; that the invariants,\n&gt; preconditions, and postconditions are clearly specified\n&gt; in your docs, but\n&gt; its disadvantage is that it is a preprocessor.\n&gt; \n&gt; On Tue, 6 Nov 2001 john_naylor@... wrote:\n&gt; \n&gt; &gt; i have been assigned the task of pushing our\n&gt; development team toward\n&gt; &gt; unit testing.  i have been working with junit for a few\n&gt; weeks now but\n&gt; &gt; continue to struggle with one issue.  it seems to me\n&gt; there is tension\n&gt; &gt; between unit testing and my preferred api.  for a given\n&gt; class i would\n&gt; &gt; like to expose only a handful of methods, yet do not\n&gt; want to forfeit\n&gt; &gt; testing my private methods.  my feeling is that i\n&gt; should be concerned\n&gt; &gt; with continually testing those methods, and yet fail to\n&gt; see why i\n&gt; &gt; should expose methods which are meaningless outside the\n&gt; &quot;blackbox&quot;.\n&gt; &gt;\n&gt; &gt; perhaps i am missing something obvious about good\n&gt; design.  in the\n&gt; &gt; mean time i have set up a simple interface which\n&gt; classes i test\n&gt; &gt; internally must implement.\n&gt; &gt;\n&gt; &gt; public interface Testable\n&gt; &gt; {\n&gt; &gt; \tpublic static final boolean INTERNAL_MODE = true;\n&gt; &gt;\n&gt; &gt; \tpublic void runInternalTests() throws Exception;\n&gt; &gt; }\n&gt; &gt;\n&gt; &gt; this allows me to run internal tests and handle\n&gt; assertions by calling\n&gt; &gt; the static methods of Assert.  INTERNAL_MODE must be\n&gt; checked within\n&gt; &gt; runInternalTests().  This allows internal testing to be\n&gt; turned off\n&gt; &gt; for production builds.\n&gt; &gt;\n&gt; &gt; any insight about this dilemna would be appreciated.\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; To unsubscribe from this group, send an email to:\n&gt; &gt; junit-unsubscribe@yahoogroups.com\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Your use of Yahoo! Groups is subject to\n&gt; http://docs.yahoo.com/info/terms/\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; \n&gt; -- \n&gt; Eric Vought\n&gt; Chief Technical Officer - QLUE Consulting, Inc.\n&gt; \n&gt; evought@... toll-free: 888-771-3538  RTP area:\n&gt; 919-816-9901\n&gt; \n&gt; \n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;  \n&gt; \n&gt; Your use of Yahoo! Groups is subject to\n&gt; http://docs.yahoo.com/info/terms/ \n&gt; \n&gt; \n\n\n=====\n-----------------------------------------\n             Keep it simple...\n(1 Corinthians 2:2, Galatians 2:20, 6:14)\n\n__________________________________________________\nDo You Yahoo!?\nFind a job, post your resume.\nhttp://careers.yahoo.com\n\n", 
    "profile": "jacaetev", 
    "topicId": 3179, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "prevInTime": 3196, 
    "contentTrasformed": false, 
    "postDate": "1005139837", 
    "canDelete": false, 
    "nextInTopic": 4512, 
    "prevInTopic": 3182, 
    "headers": {
        "inReplyToHeader": "PFBpbmUuTE5YLjQuMzAuMDExMTA2MTAzMjUzMC4xODY1LTEwMDAwMEBicmFpbi5xbHVlLWxhbj4=", 
        "messageIdInHeader": "PDIwMDExMTA3MTMzMDM3Ljc1NTI3LnFtYWlsQHdlYjE0ODA2Lm1haWwueWFob28uY29tPg=="
    }
}