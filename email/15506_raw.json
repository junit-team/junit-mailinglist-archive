{
    "numMessagesInTopic": 9, 
    "nextInTime": 15507, 
    "senderId": "hkK6jEoR8iwdSI6GBCJTXLGLONX_D-tT0zEvgr8snKur-a70jDKoAwqzG50pq_3_3e_s7ch8YilAS4nvH1emI3eh3vztiI_Fd48KMRs", 
    "systemMessage": true, 
    "subject": "Parameterisation of tests in JUnit4", 
    "from": "&quot;Jon Skeet&quot; &lt;jon.skeet@...&gt;", 
    "authorName": "Jon Skeet", 
    "msgSnippet": "I ve had a look at the Parameterized runner in JUnit4 (current CVS) and I have a few suggestions. It s probably easiest to demonstrate them in some code which", 
    "msgId": 15506, 
    "rawEmail": "Return-Path: &lt;Jon.Skeet@...&gt;\r\nReceived: (qmail 59747 invoked from network); 24 Nov 2005 20:50:45 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m28.grp.scd.yahoo.com with QMQP; 24 Nov 2005 20:50:45 -0000\r\nReceived: from unknown (HELO n7.bullet.dcn.yahoo.com) (216.155.201.60)\n  by mta5.grp.scd.yahoo.com with SMTP; 24 Nov 2005 20:50:44 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [216.155.201.64] by n7.bullet.dcn.yahoo.com with NNFMP; 24 Nov 2005 20:50:04 -0000\r\nReceived: from [66.218.69.5] by mailer1.bulk.dcn.yahoo.com with NNFMP; 24 Nov 2005 20:50:04 -0000\r\nReceived: from [66.218.66.92] by mailer5.bulk.scd.yahoo.com with NNFMP; 24 Nov 2005 20:50:04 -0000\r\nX-Sender: Jon.Skeet@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 47376 invoked from network); 24 Nov 2005 09:09:28 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m35.grp.scd.yahoo.com with QMQP; 24 Nov 2005 09:09:28 -0000\r\nReceived: from unknown (HELO uk-app-2.clearswift.com) (213.146.158.166)\n  by mta4.grp.scd.yahoo.com with SMTP; 24 Nov 2005 09:09:27 -0000\r\nReceived: from uk-msw-a.clearswift.com ([10.44.30.43])\n\tby uk-app-2.clearswift.com (8.13.4/8.13.4) with ESMTP id jAO8xelt028276\n\tfor &lt;junit@yahoogroups.com&gt;; Thu, 24 Nov 2005 08:59:40 GMT\r\nReceived: from GEMINI.EUROPE.CLEARSWIFT.COM (unverified) by \n    uk-msw-a.clearswift.com (Clearswift SMTPRS 5.2.2) with ESMTP id \n    &lt;T74cdf0d3950a2c1e2ba88@...&gt; for \n    &lt;junit@yahoogroups.com&gt;; Thu, 24 Nov 2005 09:08:38 +0000\r\nReceived: from exchclusta.EUROPE.CLEARSWIFT.COM ([10.44.16.98]) by \n    GEMINI.EUROPE.CLEARSWIFT.COM with Microsoft SMTPSVC(5.0.2195.6713); \n    Thu, 24 Nov 2005 08:59:40 +0000\r\nX-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0\r\ncontent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nDate: Thu, 24 Nov 2005 08:59:40 -0000\r\nMessage-ID: &lt;6EAA8AD82D7EBF478CCE262FA32C6C6401B569B7@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: Parameterisation of tests in JUnit4\r\nThread-Index: AcXw1Wb/5kYCFnbNReSv8uWBRSJevQ==\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nX-OriginalArrivalTime: 24 Nov 2005 08:59:40.0255 (UTC) \n    FILETIME=[67598EF0:01C5F0D5]\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Jon Skeet&quot; &lt;jon.skeet@...&gt;\r\nSubject: Parameterisation of tests in JUnit4\r\nX-Yahoo-Group-Post: member; u=246518675; y=oSoJw-iWBFu-Xeoj54kWE4HNG77eezScJQEI56AkEknyjTs\r\nX-Yahoo-Profile: jskeetuk\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: vbossica &lt;vladimir@...&gt; via web; 24 Nov 2005 20:50:03 -0000\r\n\r\nI&#39;ve had a look at the Parameterized runner in JUnit4 (current CVS) and\nI h=\r\nave a few suggestions. It&#39;s probably easiest to demonstrate them in\nsome co=\r\nde which I&#39;d *like* to work (and I&#39;m quite happy to do the\nappropriate codi=\r\nng to *make* work):\n\n    @RunWith(Parameterized.class)\n    @Parameters(&quot;cla=\r\nssParameters&quot;)\n//     Or equivalently @Parameters strings=3D{&quot;Oracle&quot;, &quot;SQL=\r\n&quot;}\n    public class WishfulTest\n    {\n        private String m_dbName;\n    =\r\n    private static final File RootTestFileDirectory =3D new\nFile(&quot;c:&#92;&#92;Tests=\r\n&quot;); \n        \n\t  // In actual code, these would probably be enums, in my\nex=\r\nperience -\n        // they would provide mechanisms for connecting to the\na=\r\nppropriate database,\n        // setting it up and tearing it down etc.\n    =\r\n    public static String[] classParameters =3D {&quot;Oracle&quot;, &quot;SQL&quot;};\n        \n=\r\n        public WishfulTest(String dbName)\n        {\n            m_dbName =\r\n=3D dbName;\n        }\n        \n        // Note - array of arrays here. See =\r\ncomments afterwards.\n        public static int[][] test1Parameters =3D {{0,=\r\n1}, {1, 2}, {3, 4}};\n        @Test\n        // Uses a field to get the param=\r\neters\n        @Parameters(&quot;test1Parameters&quot;)\n        public void test1(int =\r\nfirst, int second)\n        {\n            assertEquals(first+1, second);\n   =\r\n     }\n        \n        /**\n         * Finds all the test files for the cur=\r\nrent database. The File\nexample\n         * here isn&#39;t as good as I&#39;d like i=\r\nt to be - hardcoding paths is\nobviously\n         * far from ideal. I hope i=\r\nt gives an indication of what&#39;s\nwanted though\n         * - a way to get par=\r\nameters for a specific test, where those\nparameters\n         * may vary by =\r\ntest class parameters.\n         */ \n        public File[] getTest2Parameter=\r\ns()\n        {\n            File directory =3D new File (RootTestFileDirector=\r\ny, m_dbName);\n            return directory.listFiles();\n        }\n        \n=\r\n        @Test\n        // Calls a method to get the parameters\n        @Para=\r\nmeters(&quot;getTest2Parameters&quot;)\n        public void test2(File testFile)\n     =\r\n   {\n            assertNotNull(testFile);\n        }\n        \n        @Test\n=\r\n        @Parameters(strings=3D{&quot;hello&quot;, &quot;there&quot;})\n        public void test3=\r\n(String input)\n        {\n            assertEquals(input, input.toLowerCase(=\r\n));\n        }\n        \n        @Test\n        @Parameters(ints=3D{1, 2, 3})\n=\r\n        public void test4(int input)\n        {\n            assertTrue (inpu=\r\nt &lt; 4);\n        }\n        \n        @Test\n        public void test5()\n      =\r\n  {\n        }\n        \n        // etc for all primitives, String and class =\r\n(but not arrays)\n        \n        // Not allowed:\n        // @Parameters(in=\r\nts=3D{1,2,3}, strings=3D{&quot;hello&quot;})\n        // @Parameters(value=3D&quot;somethin=\r\ng non-empty&quot;, strings=3D{&quot;hello&quot;})\n        // Multiple parameters annotatio=\r\nns for a single method/class\n    }\n\n\nSo, the notes:\n1) Tests are allowed to=\r\n be parameterised as well as test classes\n2) Unless multiple parameters are=\r\n required, a single array (rather than\nan array of arrays) causes less conf=\r\nusion. I know that the\ncounter-argument to that is that having two forms, o=\r\nne for\nsingle-parameter tests/constructors and one for multi-parameter\ntest=\r\ns/constructors is ugly, but I personally believe that it&#39;s justified\nin thi=\r\ns case.\n3) Parameters can be specified in two ways:\n   i) As a simple name =\r\nof a field or method (currently using the &quot;value&quot;\nannotation element; possi=\r\nbly specifying field=3D&quot;...&quot; or method=3D&quot;...&quot;\nwould be better though. For =\r\nconstructor parameters, the field/method\nwould have to be static. For test =\r\nparameters, it\ncould be static or instance.\n   ii) As an array of one of th=\r\ne primitive types, string or class,\ndirectly in the parameters annotation\n4=\r\n) As mentioned in a previous post, it may be worth having yet another\nlevel=\r\n of setup/teardown for parameterised test classes - for instance,\nin the ex=\r\nample above, where you&#39;d run all Oracle tests, then all SQL\nServer tests, i=\r\nt may well be advantageous to set the database up once\nbefore running all t=\r\nhe tests for a particular database (assuming they&#39;re\nread-only tests). The =\r\nsequence would then go:\n\n   Run @BeforeClass methods\n   Run @BeforeParamete=\r\nrisedClass methods (with parameter &quot;Oracle&quot;?)\n   Call constructor with para=\r\nmeter &quot;Oracle&quot;\n   Run @Before methods\n   Run test1(0, 1)\n   Run @After meth=\r\nods\n   Call constructor with parameter &quot;Oracle&quot;\n   Run @Before methods\n   R=\r\nun test1(1, 2)\n   ...\n   Call constructor with parameter &quot;Oracle&quot;\n   Run te=\r\nst5()\n   Run @After methods\n   Run @AfterParameterisedClass methods\n   Run =\r\n@BeforeParameterisedClass methods (with parameter &quot;SQL&quot;?)\n   Call construct=\r\nor with parameter &quot;SQL&quot;\n   ...\n   Call constructor with parameter &quot;SQL&quot;\n   =\r\nRun test5()\n   Run @After methods\n   Run @AfterParameterisedClass methods\n =\r\n  Run @AfterClass methods\n\nNote the question over whether @BeforeParameteri=\r\nsedClass (bad name -\nplease come up with a better one if you can!) should t=\r\nake the same\nparameters as the constructor. As an alternative, they could b=\r\ne instance\nmethods called *after* the constructor is called for the first t=\r\nime, and\nbe parameterless. (Likewise @AfterParameterisedClass could be an\ni=\r\nnstance method.)\n\n5) One nasty problem: you need to construct instances of =\r\nthe test class\njust to count the test cases - and hope that the parameters =\r\nyou get back\nthen is the same as the ones you get when you&#39;re ready to run =\r\nthe tests.\n(You could cache the results, of course...)\n\nAnyway, the bottom =\r\nline is that I can see *huge* benefits in this\napproach in quite a few of o=\r\nur existing test code. Does anyone have any\nmajor objections to the above, =\r\nor shall I give it a whirl?\n\nJon Skeet\nSenior Software Engineer\nCLEARSWIFT\n=\r\nThe MIMEsweeper Company\n\nDDI:               +44 (0) 1189  038  109\nMobile: =\r\n          +44 (0) 7970 158 865\nSwitchboard:   +44 (0) 1189  038  903 \nFax: =\r\n              +44 (0) 1189  039  000      \nWeb: www.clearswift.com \n\n\nClear=\r\nswift monitors, controls and protects all its messaging traffic in complian=\r\nce with its corporate email policy using Clearswift products.\nFind out more=\r\n about Clearswift, its solutions and services at http://www.clearswift.com\n=\r\n\nThis communication is confidential and may contain privileged information =\r\nintended solely for the named addressee(s). It may not be used or disclosed=\r\n except for the purpose for which it has been sent. If you are not the inte=\r\nnded recipient, you must not copy, distribute or take any action in relianc=\r\ne on it. Unless expressly stated, opinions in this message are those of the=\r\n individual sender and not of Clearswift. If you have received this communi=\r\ncation in error, please notify Clearswift by emailing support@...=\r\nm quoting the sender and delete the message and any attached documents. Cle=\r\narswift accepts no liability or responsibility for any onward transmission =\r\nor use of emails and attachments having left the Clearswift domain.\n\nThis f=\r\nootnote confirms that this email message has been swept by MIMEsweeper for =\r\nContent Security threats, including computer viruses.\n\n\n\n\n", 
    "profile": "jskeetuk", 
    "topicId": 15506, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 246518675, 
    "prevInTime": 15505, 
    "contentTrasformed": false, 
    "postDate": "1132822780", 
    "canDelete": false, 
    "nextInTopic": 15557, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDZFQUE4QUQ4MkQ3RUJGNDc4Q0NFMjYyRkEzMkM2QzY0MDFCNTY5QjdAR0VNSU5JLkVVUk9QRS5DTEVBUlNXSUZULkNPTT4="
    }
}