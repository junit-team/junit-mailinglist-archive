{
    "numMessagesInTopic": 9, 
    "nextInTime": 7402, 
    "senderId": "Ln_Cv4kkBh-Goq3NwMMWPnMwiBY5azCXlinsx1vAz292M-ILUvYPnE-pkdMPLwJXdxFqUjMpUrLwuGD6yfccZ4yuAIXvEp_WvzTav3ONMGdbpE2Ylg", 
    "systemMessage": false, 
    "subject": "Re: [junit] ThreadLocal", 
    "from": "&quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;", 
    "authorName": "Jeff Nielsen", 
    "msgSnippet": "This architecture did evolve from TDD.  Without the strong desire to test drive the development of all business methods in our EJB tier, I doubt that we", 
    "msgId": 7401, 
    "profile": "jeffreymads", 
    "topicId": 7316, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65487161, 
    "messageBody": "<div id=\"ygrps-yiv-1515245914\">This architecture did evolve from TDD.  Without the strong desire to &quot;test<br/>\ndrive&quot; the development of all &quot;business&quot; methods in our EJB tier, I doubt<br/>\nthat we would have come up with something like this.<br/>\n<br/>\nAs it is, it has turned out to have a lot of nice side benefits.  For<br/>\nexample, because we end up writing a &quot;mock&quot; implementation of the<br/>\npersistence API as well as any other external systems, we can run almost all<br/>\nof our apps without a database or even an internet connection (just by<br/>\nchanging a property file setting).  This makes it much easier to test, write<br/>\nsome code at home, etc.<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> ----- Original Message -----<br/>\nFrom: &quot;Shellman, Joel&quot; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:joel.shellman@...\">joel.shellman@...</a>&gt;<br/>\nTo: &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;<br/>\nSent: Tuesday, March 25, 2003 4:30 PM<br/>\nSubject: RE: [junit] ThreadLocal<br/>\n<br/>\n<br/>\n&gt; Jeff, did you design this up front, or did this evolve from TDD (Test<br/>\nDriven Development)?<br/>\n&gt;<br/>\n&gt; I&#39;m curious as to what solution would naturally evolve out of TDD for this<br/>\n(and whether there is only one design that would given strict conformance to<br/>\ncertain guidelines). Extrapolating Kent Beck&#39;s example in his TDD book, one<br/>\nmight expect what Jeff has outlined below--with factories passed in to the<br/>\nconstructors since he refactored out duplication by passing it in to the<br/>\nconstructor (at least in a couple cases).<br/>\n&gt;<br/>\n&gt; One of the great benefits of passing in factories and collaborators is<br/>\nthat you can significantly increase the reuse and usefulness of each class.<br/>\nNew functionality could be added by simply passing in a different factory.<br/>\n&gt;<br/>\n&gt; Having said that, I&#39;ve used the ThreadLocal approach before and it seems<br/>\nto work fine both in production and for testing, but I&#39;m still a little<br/>\nuncomfortable with it from a design standpoint.<br/>\n&gt;<br/>\n&gt; Joel Shellman<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; &gt; -----Original Message-----<br/>\n&gt; &gt; From: Jeff Nielsen<br/>\n&gt; &gt; Sent: Monday, March 24, 2003 5:24 PM<br/>\n&gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; &gt; Subject: Re: [junit] ThreadLocal<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; A common pattern we use with our web apps is this.<br/>\n&gt; &gt;<br/>\n&gt; &gt; - Factories manage the creation of resources for the next<br/>\n&gt; &gt; level down (e.g., web tier -&gt; EJB tier, EJB tier -&gt; integration tier)<br/>\n&gt; &gt;<br/>\n&gt; &gt; - Classes that need to access/instantiate resources in a<br/>\n&gt; &gt; lower layer (e.g., an EJB that needs a DB connection) take a<br/>\n&gt; &gt; factory object at construction time.<br/>\n&gt; &gt;<br/>\n&gt; &gt; - The factories are configured at runtime using simple java<br/>\n&gt; &gt; property files (e.g., use.database=true, use.ejbs=false)<br/>\n&gt; &gt;<br/>\n&gt; &gt; - Test code can configure factories using parameters (e.g.,<br/>\n&gt; &gt; testFactory = new DataSourceFactory(false) . . . ) and pass<br/>\n&gt; &gt; these factories in to the<br/>\n&gt; &gt; object(s) under test.<br/>\n&gt; &gt;<br/>\n&gt; &gt; This allows us to ensure that tests always use the mock<br/>\n&gt; &gt; objects, without &quot;cluttering&quot; the production code with lots<br/>\n&gt; &gt; of conditional logic or extra method parameters.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Jeff Nielsen<br/>\n&gt; &gt; Digital Focus<br/>\n&gt; &gt; www.digitalfocus.com<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;       Yahoo! Groups Sponsor<br/>\n&gt;             ADVERTISEMENT<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 7400, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1049258561", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 7381, 
    "headers": {
        "messageIdInHeader": "PDA1YzcwMWMyZjhkMiQ0ZDZmZDMzMCRlNzA1MDAwYUBqbmllbHNlbjI+", 
        "referencesHeader": "PEVYLTIwMDMwMzI1LTE1MzM0Ni0wMDA1QGV4Y2hhbmdlLmZpc2Vydi1taXNzaXZlMS5maXNlcnYubmV0Pg=="
    }
}