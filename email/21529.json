{
    "numMessagesInTopic": 8, 
    "nextInTime": 21530, 
    "senderId": "QhBE4T_OFsFcoqIDFV3GfKqfK2f-f7dwGKQzslwEnIeKIDv6CWFZ1OqzfRHUnRxmFu2sIOrzP0tPPwJxiyGqb9UVAfSLP3wP", 
    "systemMessage": true, 
    "subject": "Re: execute code upon failed test in junit 4", 
    "from": "&quot;mykro76&quot; &lt;danieljcarr@...&gt;", 
    "authorName": "mykro76", 
    "msgSnippet": "Hi David, If the scope within catchFailure() can access variables and methods of the enclosing MykroTest instance then yes, that would work very well. Out of", 
    "msgId": 21529, 
    "profile": "mykro76", 
    "topicId": 21515, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 208318621, 
    "messageBody": "<div id=\"ygrps-yiv-953276828\">Hi David,<br/>\n<br/>\nIf the scope within catchFailure() can access variables and methods of the enclosing MykroTest instance then yes, that would work very well.<br/>\n<br/>\nOut of curiosity, did you decide against a simple @OnFail annotation only because it can&#39;t pass Throwable?  So are you thinking of @Decorator becoming a broader platform to support additional event classes with various parameters?<br/>\n<br/>\nSorry if I&#39;m off track here - I had to google up on the pattern!<br/>\n<br/>\n<br/>\nP.S. - I&#39;m working on the custom Runner/Listener as suggested, and it promptly got a little messy:<br/>\n<br/>\npublic class MyTestFailedListener extends RunListener {<br/>\n\tpublic void testFailure(Failure failure) throws java.lang.Exception {<br/>\n\t\t// How to access the Test from here?<br/>\n\t}<br/>\n}<br/>\n<br/>\nAt best I can try to dissect Failure.getDescription().getDisplayName() to figure out the Test instance ... ugh.  Is there a way to access the Runner or the Test from the Listener?<br/>\n<br/>\nThanks and regards!<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, David Saff &lt;david@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Mykro, all,<br/>\n&gt; <br/>\n&gt; Here&#39;s the syntax I&#39;m playing with for 4.7:<br/>\n&gt; <br/>\n&gt; public class MykroTest {<br/>\n&gt; \t@Decorator public OnFail noticeFailures = new OnFail() {<br/>\n&gt; \t\tpublic void catchFailure(Throwable t) {<br/>\n&gt; \t\t\tdumpCacheAppenderToConsoleAppender();<br/>\n&gt; \t\t}<br/>\n&gt; \t};<br/>\n&gt; <br/>\n&gt; \t//...<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Would that do what you need?<br/>\n&gt; <br/>\n&gt; On Fri, Apr 17, 2009 at 2:02 AM, mykro76 &lt;danieljcarr@...&gt; wrote:<br/>\n&gt; &gt; I&#39;m using Junit 4 annotations, @Before, @After, @Test, etc.  I can&#39;t find a way to execute code only when a test fails.   In essence, an @OnFail annotation.  Is this possible?<br/>\n&gt; &gt; The only solutions I&#39;ve seen posted in this list were for Junit3, or involved setting a success flag at the end of *every* test.  Neither of which is very appealing.<br/>\n&gt; &gt; Backstory: I created a CacheAppender for log4j which stores large volumes of DEBUG level logging.  ERROR, WARN, INFO etc continue to go to the default ConsoleAppender in realtime.  If the test fails, I want to dump the contents of CacheAppender to the ConsoleAppender.  If the test succeeds I want to discard this extra logging.   Is there a better way I could be doing this?<br/>\n&gt; &gt; Thanks! </span></blockquote></div>", 
    "prevInTime": 21528, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1240391296", 
    "canDelete": false, 
    "nextInTopic": 21536, 
    "prevInTopic": 21527, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MDkwNDIxMDYzNWs3YTM0NTdiM3ViZGI4OGYxYmY5ZTRhNmZhQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGdzbW1xMCs1aG5rQGVHcm91cHMuY29tPg=="
    }
}