{
    "numMessagesInTopic": 3, 
    "nextInTime": 3498, 
    "senderId": "OhkuGeI36X6HBWFkmxG-_bcXRovOyP7s--YR9tNbZlYiiQLXp1np7ZoF-80aSuNSsI4pCr6M8e_Llwf4n6bSYee-cYZK419D", 
    "systemMessage": false, 
    "subject": "trouble with JUnit and XML", 
    "from": "&quot;nthali&quot; &lt;nilesh.thali@...&gt;", 
    "authorName": "nthali", 
    "msgSnippet": "We are not able to run any JUnit tests for any of our classes that use XML. We get a java.lang.IncompatibleClassChangeError . Using a main() method within", 
    "msgId": 3497, 
    "rawEmail": "Return-Path: &lt;nilesh.thali@...&gt;\r\nX-Sender: nilesh.thali@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_1_2); 8 Dec 2001 20:41:51 -0000\r\nReceived: (qmail 73496 invoked from network); 8 Dec 2001 20:41:51 -0000\r\nReceived: from unknown (216.115.97.172)\n  by m9.grp.snv.yahoo.com with QMQP; 8 Dec 2001 20:41:51 -0000\r\nReceived: from unknown (HELO n10.groups.yahoo.com) (216.115.96.60)\n  by mta2.grp.snv.yahoo.com with SMTP; 8 Dec 2001 20:41:52 -0000\r\nReceived: from [216.115.96.37] by n10.groups.yahoo.com with NNFMP; 08 Dec 2001 20:41:52 -0000\r\nDate: Sat, 08 Dec 2001 20:41:51 -0000\r\nTo: junit@yahoogroups.com\r\nSubject: trouble with JUnit and XML\r\nMessage-ID: &lt;9uttuf+mcu9@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 4129\r\nX-Mailer: Yahoo Groups Message Poster\r\nFrom: &quot;nthali&quot; &lt;nilesh.thali@...&gt;\r\nX-Yahoo-Group-Post: member; u=90391555\r\nX-Yahoo-Profile: nthali\r\n\r\nWe are not able to run any JUnit tests for any of our classes that\nuse XML. We get a &quot;java.lang.IncompatibleClassChangeError&quot;. Using\na main() method within that class seems to run the methods being\ntested just fine.\nHas anyone else encountered anything similar ? \nI am adding some test source code and xml file for anyone that\nmight want to run this. \nAny help would be greatly appreciated.\nThanks,\nNilesh\n\n------------------- MyXMLClass.java ---------------------------\nimport org.xml.sax.InputSource;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.NamedNodeMap;\n\nimport java.io.File;\nimport java.util.Hashtable;\n\nimport com.sun.xml.parser.Resolver;\nimport com.sun.xml.tree.XmlDocument;\n\npublic class MyXMLClass {\n    public static void main(String[] args) {\n        String psFileName = &quot;test.xml&quot;;\n        if (args.length &gt; 0)\n            psFileName = args[0];\n\n        MyXMLClass xml = new MyXMLClass(psFileName);\n\n        System.out.println(&quot;Error msg for id=1: &quot; + \n                           xml.getErrorMessage(1));\n    }\n\n    private Hashtable ht = new Hashtable();\n\n    public MyXMLClass(String psFileName) {\n        XmlDocument doc = null;\n\n        try {\n        File lsXmlFile = new File(psFileName);\n        System.out.println(&quot;Reading: &quot; + lsXmlFile.getAbsolutePath());\n        InputSource is = Resolver.createInputSource(lsXmlFile);\n        // create a DOM Document\n        doc = XmlDocument.createXmlDocument(is, true);\n        normalizeDocument(doc.getDocumentElement());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        Element root = doc.getDocumentElement();\n        NodeList errNodes = root.getChildNodes();\n        for (int i=0; i&lt;errNodes.getLength(); i++) {\n            Node errNode = errNodes.item(i);\n            NamedNodeMap attrs = errNode.getAttributes();\n            Node errIdNode = attrs.getNamedItem(&quot;id&quot;);\n            Node errMsgNode = attrs.getNamedItem(&quot;msg&quot;);\n            ht.put(new Integer(errIdNode.getNodeValue()), \n                   errMsgNode.getNodeValue());\n        }\n    }\n\n    public String getErrorMessage(int piErrId) {\n        return ht.get(new Integer(piErrId)).toString();\n    }\n\n    public static void normalizeDocument(Node n)\n    {\n      if (!n.hasChildNodes())\n        return;\n\n      NodeList nl = n.getChildNodes();\n      for (int i = 0; i &lt; nl.getLength(); i++)\n      {\n        Node cn = nl.item(i);\n        if (cn.getNodeType() == Node.TEXT_NODE && \n            isBlank(cn.getNodeValue()))\n        {\n          n.removeChild(cn);\n          i--;\n        }\n        else\n          normalizeDocument(cn);\n      }\n    }\n\n    public static boolean isBlank(String buf) {\n      if (buf == null)\n        return(false);\n\n      int len = buf.length();\n      for (int i=0; i &lt; len; i++)\n      {\n        char c = buf.charAt(i);\n        if (!Character.isWhitespace(c))\n          return(false);\n      }\n      return(true);\n    }\n}\n---------------------------------------------------------------\n\n------------------------- MyXMLClassTest.java -----------------\nimport junit.framework.TestCase;\n\npublic class MyXMLClassTest extends TestCase {\n\n    public MyXMLClassTest(String name) {\n        super(name);\n    }\n\n    protected void setUp() {\n        xmlTest = new MyXMLClass(&quot;test.xml&quot;);\n    }\n\n    public void testGetErrorMessage() {\n      assertEquals(&quot;Connection failed, Please try again&quot;, \n                   xmlTest.getErrorMessage(1));\n    }\n\n    private MyXMLClass xmlTest;\n}\n---------------------------------------------------------------\n\n----------------------- test.xml -------------------------------\n&lt;?xml version=&quot;1.0&quot; ?&gt;\n&lt;!DOCTYPE ERRORS SYSTEM &quot;test.dtd&quot;&gt;\n\n&lt;ERRORS&gt;\n  &lt;ERROR id=&quot;1&quot; msg=&quot;Connection failed, Please try again&quot;/&gt;\n  &lt;ERROR id=&quot;2&quot; msg=&quot;Server Name not found&quot;/&gt;\n&lt;/ERRORS&gt;\n----------------------------------------------------------------\n\n----------------------- test.dtd -------------------------------\n&lt;!ELEMENT ERRORS (ERROR)+&gt;\n&lt;!ELEMENT ERROR EMPTY&gt;\n&lt;!ATTLIST ERROR id CDATA #REQUIRED msg CDATA #REQUIRED&gt;\n----------------------------------------------------------------\n\n\n", 
    "profile": "nthali", 
    "topicId": 3497, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 90391555, 
    "prevInTime": 3496, 
    "contentTrasformed": false, 
    "postDate": "1007844111", 
    "canDelete": false, 
    "nextInTopic": 3498, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDl1dHR1ZittY3U5QGVHcm91cHMuY29tPg=="
    }
}