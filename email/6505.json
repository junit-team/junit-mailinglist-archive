{
    "numMessagesInTopic": 108, 
    "nextInTime": 6506, 
    "senderId": "f5UDaSGkCN-0Qcb2zrp27sAKIAOBYUuVGRVZQA63p3UxHnBl4A6d7ZKYR6vBsAVd28bZ_m_Om-IOh10EYu2-wdqpG4PleEPpmNEYY5jte3VN-JiH", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Testing Private Methods", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "So said  Steven Taschuk  on  2002-12-19 -------------------- ... to ... now the problem arises. Your class now does two things: it represents a date on the", 
    "msgId": 6505, 
    "profile": "nails762", 
    "topicId": 1696, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "messageBody": "<div id=\"ygrps-yiv-1779659498\">So said  Steven Taschuk  on  2002-12-19 --------------------<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;Quoth Dave Astels &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:dave@...\">dave@...</a>&gt;:<br/>\n&gt;  [...last Friday...]<br/>\n&gt;&gt; With TDD you define what you need in terms of external behavior, <br/>\n&gt;&gt; write a test for it, them implement it.  Finally you clean up by <br/>\n&gt;&gt; refactoring.  So as far as your tests are concerned everything that <br/>\n&gt;&gt; the class has to do IS public.  When I add a new method in reponse<br/>\n </span></blockquote>to <br/>\n<blockquote><span title=\"ireply\"> &gt;&gt; a test, it&#39;s public.  When I refactor and extract methods, I make <br/>\n&gt;&gt; them private.  That&#39;s the only way I make methods private.<br/>\n&gt;<br/>\n&gt;I happened to run into something today which made me think about<br/>\n&gt;this a bit more.  I&#39;d be interested in comments, especially on<br/>\n&gt;these two questions: (1) Is this situation typical of those in<br/>\n&gt;which people want to test private methods?  (2) Is there a better<br/>\n&gt;solution in this case than the one I give below?<br/>\n&gt;<br/>\n&gt;Here&#39;s the situation: A class GregorianDate represents a specific<br/>\n&gt;day in the proleptic Gregorian calendar, expressed (from the<br/>\n&gt;user&#39;s point of view at least) as an ordered triple of ints:<br/>\n&gt;(year,month,date).  Certain constraints apply to this triple: year<br/>\n&gt;zero is forbidden, months must be in [1..12], the valid range of<br/>\n&gt;dates depends in familiar ways on the year and month.<br/>\n&gt;<br/>\n&gt;So, I decide I want a partwise constructor<br/>\n&gt;\tpublic GregorianDate( int year, int month, int date )<br/>\n&gt;which will throw IllegalArgumentException if any of these<br/>\n&gt;constraints are violated.  I write some tests to express the<br/>\n&gt;expectation of such exceptions, watch them fail, write the<br/>\n&gt;constructor, watch them pass, go for a beer.<br/>\n&gt;<br/>\n&gt;Now I want a parsing constructor<br/>\n&gt;\tpublic GregorianDate( String s ) throws DateParseException<br/>\n&gt;which will parse strings in ISO 8601 format (such as<br/>\n&gt;&quot;2002-12-18&quot;), throwing a DateParseException if the string is<br/>\n&gt;malformed or if the constraints on valid dates are violated.  I<br/>\n&gt;factor the constraint checking out of the partwise constructor and<br/>\n&gt;into private methods so it can be reused by this new constructor,&gt;and<br/>\n </span></blockquote>now the problem arises.<br/>\n<br/>\nYour class now does two things: it represents a date on the Gregorian<br/>\nCalendar and it parses a string into a date on the Gregorian Calendar.<br/>\nReally, you have two classes here. The fact that you provide a<br/>\nconvenience constructor GregorianDate(String) is a design choice based<br/>\non usability, and I think it&#39;s a good choice. I think, however, that<br/>\nthis constructor should be using DateParser to get from a String to<br/>\nthree ints. The parsing is therefore separated into another class and<br/>\nyou&#39;ll find that you need to answer a question:<br/>\n<br/>\n* Should the parser be concerned with validating the SEMANTICS of what<br/>\nit parses?<br/>\n<br/>\nThink of a compiled programming language. The compiler verifies syntax,<br/>\nwhile the program&#39;s tests verify semantics. This is a clean separation<br/>\nthat makes sense. The parser doesn&#39;t know that the program is logically<br/>\nincorrect; only that its instructions are well-formed. Should the<br/>\nparser try to verify semantic correctness? Perhaps not, since the<br/>\nprogram&#39;s tests already perform that function.<br/>\n<br/>\nSo it should be with your DateParser. Let the DateParser worry about<br/>\nthe dateAsString being well-formed, parse it into erstwhile year, month<br/>\nand day and leverage GregorianDate to check the semantics of the<br/>\n&quot;date&quot;? in question. Since it already performs that function, your<br/>\nconvenience constructor becomes very simple -- it may throw a<br/>\nDateParseException because the parser may find that the string is<br/>\nill-formed, and it may throw an InvalidDateException because the three<br/>\nvalues do not form a semantically-correct date.<br/>\n<br/>\nLet&#39;s not talk about &quot;good&quot; and &quot;bad&quot;, but notice that your solution is<br/>\nmore coupled than the one I have described here. In your case, the<br/>\nparsing and validating is interrelated. In my case, parsing from a<br/>\nstring is an extra feature tacked on to GregorianDate. In fact, if it<br/>\nweren&#39;t for the convenience constructor, GregorianDate wouldn&#39;t know<br/>\nabout the parsing feature. Perhaps a factory would be better. :)<br/>\n<br/>\nOpen/Closed principle, free of charge. Woo-hoo!<br/>\n<br/>\n<br/>\nJ. B. Rainsberger,<br/>\nPresident, Diaspar Software Services<br/>\nLet&#39;s write software that people understand.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com/\">http://www.diasparsoftware.com/</a><br/>\ntelephone: +1 416 791-8603<br/>\nAll correspondence (c) 2002 Diaspar Software Services.<br/>\nIf you want to use it, just ask; don&#39;t steal.</div>", 
    "prevInTime": 6504, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1040316233", 
    "canDelete": false, 
    "nextInTopic": 6523, 
    "prevInTopic": 6504, 
    "headers": {
        "inReplyToHeader": "PDIwMDIxMjE5MDA0MDQ5LkEyMDkxQHRpYmlhLmFtb3RscGFhLmJvZ3VzPg==", 
        "messageIdInHeader": "PDIwMDIxMjE5MTE0MzUzMDE3OS4wMDM4M0Q5M0BzbXRwLnltLnBodWIubmV0LmNhYmxlLnJvZ2Vycy5jb20+", 
        "referencesHeader": "PDY2QzUzQjBDODhEM0Q0MTE4RjRBMDA5MDI3RENFMDY0MDIwMzYzQkJAeWxhY3lidGV4YzAxLnlvdWJldC5jb20+IDxhdGN0azMrdTFvOEBlR3JvdXBzLmNvbT4gPDIwMDIxMjE5MDA0MDQ5LkEyMDkxQHRpYmlhLmFtb3RscGFhLmJvZ3VzPg=="
    }
}