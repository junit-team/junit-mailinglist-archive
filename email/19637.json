{
    "numMessagesInTopic": 43, 
    "nextInTime": 19638, 
    "senderId": "iwKyWVU54LbjhfyVxyQhmZ3BG5ip53lfiBvygWJXU4h-32ZRlDOicZ8QTc_gO3pAB03PIf9Ni11ua5W9l85SDO1qzi7uPEwKXv-EJGL-X4E", 
    "systemMessage": true, 
    "subject": "Re: [junit] Testing singleton patterns", 
    "from": "Dean Wampler &lt;dean@...&gt;", 
    "authorName": "Dean Wampler", 
    "msgSnippet": "1) Instantiate instances of the factory ... Pat, The main benefit you ve gained is that you ve moved the bad karma ;) to one location. There is a fundamental", 
    "msgId": 19637, 
    "profile": "deanwampler", 
    "topicId": 19636, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 171044160, 
    "messageBody": "<div id=\"ygrps-yiv-1242906453\">1) Instantiate instances of the factory<br/>\n<blockquote><span title=\"qreply\"> On Jul 28, 2007, at 8:15 AM, Pat Farrell wrote:<br/>\n<br/>\n&gt; This may be a bit off charter, but I&#39;ve been reading some well argued<br/>\n&gt; articles that have names such as &quot;Why is Singleton evil?&quot; and at  <br/>\n&gt; the top<br/>\n&gt; of the list are troubles that the singleton pattern causes for unit<br/>\n&gt; testing. (which is on topic.)<br/>\n&gt;<br/>\n&gt; The usual suggestions for rewriting the code are offered, such as  <br/>\n&gt; using<br/>\n&gt; a factory class to allocate/create objects, and always always just<br/>\n&gt; returning the one and only.<br/>\n&gt;<br/>\n&gt; So far, so good. But, the Factory class has to keep a store of<br/>\n&gt; anti-singletons. And the usual call is something like<br/>\n&gt; AntiSingleton anAnti = Factory.createAntiSingleton();<br/>\n&gt;<br/>\n&gt; Which is used statically, and implies that the Factory is a  <br/>\n&gt; singleton so<br/>\n&gt; its cache of AntiSingletons can be kept in one and only one store.<br/>\n&gt;<br/>\n&gt; I&#39;m not seeing how changing the Singleton class to a class that needs<br/>\n&gt; the singleton Factory class has done anything. We&#39;ve still got a<br/>\n&gt; singleton, and so all arguments that there is implied coupling, and  <br/>\n&gt; bad<br/>\n&gt; karma for testing still hold.<br/>\n&gt;<br/>\n&gt; Thanks<br/>\n&gt; Pat<br/>\n&gt;<br/>\nPat,<br/>\n<br/>\nThe main benefit you&#39;ve gained is that you&#39;ve moved the bad karma ;)  <br/>\nto one location. There is a fundamental &quot;chicken and egg&quot; problem  <br/>\nthat some module somewhere has to know how to instantiate objects and  <br/>\nwhich ones to instantiate. Localizing that logic in a factory or  <br/>\nsimilar mechanism means that the rest of your code is easier to test,  <br/>\nas well as being more modular, etc.<br/>\n<br/>\nHowever, there is one other crucial change required; rather than have  <br/>\nyour objects invoke the factory themselves, you should supply  <br/>\nconstructor parameters or setters where the dependencies can be  <br/>\n&quot;injected&quot;. The factories should do this &quot;wiring&quot; themselves, rather  <br/>\nthan having each object call a factory (or new) to satisfy its  <br/>\ndependencies.<br/>\n<br/>\nWith this &quot;dependency inversion&quot; and 1 (or a few) factory(ies), the  <br/>\nproblem of the factory singleton itself isn&#39;t so hard to solve. In  <br/>\nyour production code, &quot;main&quot; would instantiate it. Or, you could use  <br/>\na dedicated dependency-injection framework, like the one in the  <br/>\nSpring Framework.<br/>\n<br/>\nIn your unit tests, you just instantiate mocks, etc. for the  <br/>\ndependencies that your factory &quot;mechanism&quot; would create in production  <br/>\nruns. That is, your test setup code does the work that the factory  <br/>\nwould normally do.<br/>\n<br/>\nHTH,<br/>\n<br/>\nDean<br/>\n<br/>\n<br/>\nDean Wampler, Ph.D.<br/>\ndean at objectmentor.com<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.objectmentor.com\">http://www.objectmentor.com</a><br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.aspectprogramming.com\">http://www.aspectprogramming.com</a><br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.contract4j.org\">http://www.contract4j.org</a><br/>\n<br/>\n<br/>\n&gt; p.s. any hints of forums/lists where this topic could be explored  <br/>\n&gt; would<br/>\n&gt; be greatly appreciated. I&#39;ve found lots of places where rookies can  <br/>\n&gt; ask<br/>\n&gt; how to use a HashMap, and lots where folks argue about JSRs, but I&#39;m<br/>\n&gt; really looking for somewhere where professional, experienced Java<br/>\n&gt; developers can get answers to hard questions.<br/>\n&gt;<br/>\n&gt; -- <br/>\n&gt; Pat Farrell\t<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:pfarrell@...\">pfarrell@...</a><br/>\n&gt; www.bioinformatx.com<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 19636, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1185633622", 
    "canDelete": false, 
    "nextInTopic": 19638, 
    "prevInTopic": 19636, 
    "headers": {
        "inReplyToHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg==", 
        "messageIdInHeader": "PDBGMTgxQUE4LTg0OEUtNDUyOS1CNzk0LTdBQTJFQTQzQTEyMEBhc3BlY3Rwcm9ncmFtbWluZy5jb20+", 
        "referencesHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg=="
    }
}