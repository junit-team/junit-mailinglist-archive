{
    "numMessagesInTopic": 8, 
    "nextInTime": 18741, 
    "senderId": "8TXaXxUUzM0xl48H0UVbHt_bVVR3x4haQ1UQIu-yZxlkBKuarhfE3dHIGdhSQVmPp4yBmAM_hwERewfQo9TussQ_", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Custom Runner Delegation", 
    "from": "&quot;David Saff&quot; &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Gabriel, Thank you very much for that example.  The mystery thickens--your test passes in my environment!  (Eclipse compiler on jdk 1.5.0_04).  What compiler", 
    "msgId": 18740, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 25148 invoked from network); 15 Jan 2007 16:02:01 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m41.grp.scd.yahoo.com with QMQP; 15 Jan 2007 16:02:01 -0000\r\nReceived: from unknown (HELO nf-out-0910.google.com) (64.233.182.190)\n  by mta5.grp.scd.yahoo.com with SMTP; 15 Jan 2007 16:02:01 -0000\r\nReceived: by nf-out-0910.google.com with SMTP id a25so2141480nfc\n        for &lt;junit@yahoogroups.com&gt;; Mon, 15 Jan 2007 08:00:49 -0800 (PST)\r\nReceived: by 10.49.13.14 with SMTP id q14mr4344383nfi.1168876848505;\n        Mon, 15 Jan 2007 08:00:48 -0800 (PST)\r\nReceived: by 10.49.43.11 with HTTP; Mon, 15 Jan 2007 08:00:47 -0800 (PST)\r\nMessage-ID: &lt;4f7da6b90701150800v7e4c58bs39fa9a2635c3472@...&gt;\r\nDate: Mon, 15 Jan 2007 11:00:47 -0500\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;eo88cs+panr@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nReferences: &lt;4f7da6b90701110826t75087211n668e8ba1030c0b7e@...&gt;\n\t &lt;eo88cs+panr@...&gt;\r\nX-Google-Sender-Auth: f33d562d705fcf50\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: &quot;David Saff&quot; &lt;saff@...&gt;\r\nSubject: Re: [junit] Re: Custom Runner Delegation\r\nX-Yahoo-Group-Post: member; u=139771899; y=ZUCNbQTEZ0RYwuFlfpX8AdARyn4Lb6i6v9gid0pdYrA\r\nX-Yahoo-Profile: dsaff\r\n\r\nGabriel,\n\nThank you very much for that example.  The mystery thickens--your test\npasses in my environment!  (Eclipse compiler on jdk 1.5.0_04).  What\ncompiler and runtime are you using?  I&#39;m beginning to suspect\ndifferences in support for the @Inherited annotation.  Thanks,\n\n   David Saff\n\nOn 1/12/07, gabrielcooper &lt;gabriel.cooper@...&gt; wrote:\n&gt; --- In junit@yahoogroups.com, &quot;David Saff&quot; &lt;saff@...&gt; wrote:\n&gt; &gt;\n&gt; &gt; Gabriel,\n&gt; &gt;\n&gt; &gt; On 1/10/07, gabrielcooper &lt;gabriel.cooper@...&gt; wrote:\n&gt; &gt; &gt; What runner should it use if none is specified in the subclass? The\n&gt; &gt; &gt; default &quot;TestClassRunner&quot; or the parent class&#39;s &quot;MyCustomRunner&quot;?\n&gt; &gt; &gt;\n&gt; &gt; &gt; Currently it uses the default runner rather than its parents&#39; custom\n&gt; &gt; &gt; one. Would it make sense to have runners be inherited from their\n&gt; parents?\n&gt; &gt;\n&gt; &gt; Yes, it would, and the current implementation should--there&#39;s even a\n&gt; &gt; passing test that says it does.  Hmm...\n&gt; &gt;\n&gt; &gt; Could you simplify and post a failing test to help us figure out the\n&gt; &gt; problem you&#39;re having?  Thanks,\n&gt; &gt;\n&gt; &gt;    David Saff\n&gt; &gt;\n&gt;\n&gt; I probably could have come up with a slightly shorter example by\n&gt; shortening NameAwareTestClassRunner, but ... it&#39;s pretty darn short as\n&gt; it is and actually serves a purpose, so I left it at a whopping 54 lines.\n&gt;\n&gt; The gist here is that Bar, superclass to Foo, specifies a custom\n&gt; runner (NameAware). An @Test verifies that the Listener really is\n&gt; working here.\n&gt;\n&gt; Then inside Foo, we have the same @Test. Per previous conversation\n&gt; here, in theory it should run correctly here as well, but does not.\n&gt; The Listener is not, well, listening.\n&gt;\n&gt; // Foo.java\n&gt; import static junit.framework.Assert.assertEquals;\n&gt;\n&gt; import org.junit.Test;\n&gt;\n&gt; public class Foo extends Bar {\n&gt;         @Test\n&gt;         public void testName() {\n&gt;                 // fails\n&gt;                 assertEquals(&quot;testName&quot;,example);\n&gt;         }\n&gt; }\n&gt;\n&gt; // Bar.java\n&gt; import static junit.framework.Assert.assertEquals;\n&gt; import org.junit.Before;\n&gt; import org.junit.Test;\n&gt; import org.junit.runner.RunWith;\n&gt;\n&gt; @RunWith(NameAwareTestClassRunner.class)\n&gt; public class Bar {\n&gt;         String example;\n&gt;\n&gt;         @Before\n&gt;         public void setUp() {\n&gt;                 example = NameAwareTestClassRunner.getTestName();\n&gt;         }\n&gt;\n&gt;         @Test\n&gt;         public void testName() {\n&gt;                 // succeeds\n&gt;                 assertEquals(&quot;testName&quot;,example);\n&gt;         }\n&gt; }\n&gt;\n&gt; // NameAwareTesetClassRunner.java\n&gt; import org.junit.internal.runners.InitializationError;\n&gt; import org.junit.internal.runners.TestClassRunner;\n&gt; import org.junit.runner.Description;\n&gt; import org.junit.runner.notification.RunListener;\n&gt; import org.junit.runner.notification.RunNotifier;\n&gt;\n&gt; public class NameAwareTestClassRunner extends TestClassRunner {\n&gt;         public NameAwareTestClassRunner(Class&lt;?&gt; klass) throws\n&gt; InitializationError {\n&gt;                 super(klass);\n&gt;         }\n&gt;\n&gt;         private static String testName;\n&gt;\n&gt;         protected static String getName() {\n&gt;                 return testName;\n&gt;         }\n&gt;\n&gt;         protected static void setName(final String name) {\n&gt;                 testName = name;\n&gt;         }\n&gt;\n&gt;         protected static String getTestName() {\n&gt;                 if (testName == null)\n&gt;                         return null;\n&gt;\n&gt;                 int last = testName.indexOf(&#39;(&#39;);\n&gt;                 if (last &lt; 0)\n&gt;                         last = testName.length() + 1;\n&gt;                 return testName.substring(0, last);\n&gt;         }\n&gt;\n&gt;         private static class NameListener extends RunListener {\n&gt;                 /** Record start of tests, not suites */\n&gt;                 public void testStarted(Description description) throws Exception {\n&gt;                         System.err.println(&quot; STARTED: &quot; + description.getDisplayName());\n&gt;                         setName(description.isTest() ? description.getDisplayName() : null);\n&gt;                 }\n&gt;\n&gt;                 public void testFinished(Description description) throws Exception {\n&gt;\n&gt;                         System.err.println(&quot;FINISHED: &quot; + description.getDisplayName());\n&gt;                         if (getName() != null)\n&gt;                                 if (getName().equals(description.getDisplayName()))\n&gt;                                         setName(null);\n&gt;                                 else\n&gt;                                         throw new Exception(&quot;DAMMIT! - test name mismatch&quot;);\n&gt;                 }\n&gt;         }\n&gt;\n&gt;         public void run(final RunNotifier notifier) {\n&gt;                 notifier.addListener(new NameListener());\n&gt;                 super.run(notifier);\n&gt;         }\n&gt; }\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "dsaff", 
    "topicId": 18695, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "prevInTime": 18739, 
    "contentTrasformed": false, 
    "postDate": "1168876847", 
    "canDelete": false, 
    "nextInTopic": 18741, 
    "prevInTopic": 18729, 
    "headers": {
        "inReplyToHeader": "PGVvODhjcytwYW5yQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDcwMTE1MDgwMHY3ZTRjNThiczM5ZmE5YTI2MzVjMzQ3MkBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDRmN2RhNmI5MDcwMTExMDgyNnQ3NTA4NzIxMW42NjhlOGJhMTAzMGMwYjdlQG1haWwuZ21haWwuY29tPgkgPGVvODhjcytwYW5yQGVHcm91cHMuY29tPg=="
    }
}