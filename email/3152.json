{
    "numMessagesInTopic": 6, 
    "nextInTime": 3153, 
    "senderId": "Debu4aOpn1WlZDl8NiSN6w2G9HdnH46ZEYGFsu_wdVYI3rUvAB6ZnYnA7phBf4Qr0YUZ-xAhJ4aJITwtK4F-vnAOfIuS", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: Behavior of tearDown and exceptions", 
    "from": "Eric Vought &lt;evought@...&gt;", 
    "authorName": "Eric Vought", 
    "msgSnippet": "It looks like Matt may have just misread your question. I agree that junit should handle this case better. Both exceptions should always be printed. The", 
    "msgId": 3152, 
    "profile": "eric_vought", 
    "topicId": 3084, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-706152625\">It looks like Matt may have just misread your question.<br/>\n<br/>\nI agree that junit should handle this case better. Both exceptions should<br/>\nalways be printed. The modifications to the code should not be hard.<br/>\n<br/>\nOn the other hand, in most cases, this behavior *also* indicates a bug in<br/>\nyour test code. Since the point of testing is to discover bugs, your<br/>\nteardown should assume that testcase errors will occur and should not<br/>\ndepend on any testcase having completed. Always test the state in your<br/>\nteardown before taking action.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Wed, 31 Oct 2001, Di Iorio, Matthew (ISS Atlanta) wrote:<br/>\n<br/>\n&gt; Thanks for the reply.  Your proposed solution would not solve the problem I<br/>\n&gt; am trying to address.  My situation is the following:<br/>\n&gt;<br/>\n&gt; 1. My test method throws an exception.  This exception indicates the real<br/>\n&gt; problem.<br/>\n&gt; 2. My tearDown method throws an exception.  This exception is caused by an<br/>\n&gt; invalid state because my test method did not run all way through.<br/>\n&gt;<br/>\n&gt; This is a problem because of #2.  The way the JUnit framework is written,<br/>\n&gt; any exception coming out of tearDown will mask any exception coming out of a<br/>\n&gt; test method.<br/>\n&gt;<br/>\n&gt; Remember that fail() is really just a method that throws an<br/>\n&gt; AssertionFailedError.  So, your solution below will still cause the<br/>\n&gt; exception thrown from tearDown to mask the exception thrown by fail() in the<br/>\n&gt; test method.<br/>\n&gt;<br/>\n&gt; In my case the exception thrown in the test method is the root of the<br/>\n&gt; problem.  But, I can&#39;t see that exception without modifying my code to print<br/>\n&gt; the exception.  Once I fix the problem, I have to go back and remove the<br/>\n&gt; code I added to print the exception.<br/>\n&gt;<br/>\n&gt; Matt<br/>\n&gt;<br/>\n&gt; -----Original Message-----<br/>\n&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:nils_khare@...\">nils_khare@...</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:nils_khare@...\">nils_khare@...</a>]<br/>\n&gt; Sent: Friday, October 26, 2001 7:12 PM<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; Subject: [junit] Re: Behavior of tearDown and exceptions<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Hi Matt,<br/>\n&gt;<br/>\n&gt; JUnit behaves in the following way for catching Exceptions and a<br/>\n&gt; little modification in the test code would help solving your problem.<br/>\n&gt;<br/>\n&gt; 1) public void testFoo() throws SomeDBException{<br/>\n&gt;      //Some code that would throw SomeDBException<br/>\n&gt;    }<br/>\n&gt;<br/>\n&gt; JUnit would automatically catch the Exception and display that as an<br/>\n&gt; Error (denoted by E in the output). In the description below it would<br/>\n&gt; give details about this Exception.<br/>\n&gt;<br/>\n&gt; 2) public void testFoo(){<br/>\n&gt;       try{<br/>\n&gt;         //Some code that would throw SomeDBException<br/>\n&gt;       }<br/>\n&gt;       catch(SomeDBException e){<br/>\n&gt;         //Option I  - Nothing<br/>\n&gt;         //Option II -<br/>\n&gt;         fail(&quot;SomeDBException caught&quot;);<br/>\n&gt;       }<br/>\n&gt;<br/>\n&gt; In this second case when SomeDBException is thrown with Option I,<br/>\n&gt; JUnit would assume that you are trying to catch this Exception and<br/>\n&gt; assuming that this is a negative test would &#39;PASS&#39; the test.<br/>\n&gt;<br/>\n&gt; In this second case when Option II is put into effect by giving a<br/>\n&gt; specific fail() command, JUnit makes the method to &#39;FAIL&#39;.<br/>\n&gt;<br/>\n&gt; Out of the two of the above, if you are really not interested in<br/>\n&gt; catching the Exeption then it should be just declared to be thrown<br/>\n&gt; and not explicitly caught and then JUnit would give you the result<br/>\n&gt; the way you want it.<br/>\n&gt;<br/>\n&gt; If you are doing this all and still getting the mentioned<br/>\n&gt; SomeDBException then that means something needs to be investigated<br/>\n&gt; further.<br/>\n&gt;<br/>\n&gt; I would never modify the Production code in order to make my tests<br/>\n&gt; pass or fail.<br/>\n&gt;<br/>\n&gt; - Nilesh<br/>\n&gt;<br/>\n&gt; --- In junit@y..., &quot;Di Iorio, Matthew (ISS Atlanta)&quot; &lt;mdiiorio@i...&gt;<br/>\n&gt; wrote:<br/>\n&gt; &gt; Laurent&#39;s message about tearDown getting called reminded me of<br/>\n&gt; something<br/>\n&gt; &gt; I&#39;ve wanted to post to the list.<br/>\n&gt; &gt;<br/>\n&gt; &gt; A few weeks back I was working with some database tests and was<br/>\n&gt; getting odd<br/>\n&gt; &gt; behavior.  It took me a little while to figure it out, but what was<br/>\n&gt; &gt; happening was a test method was throwing an exception because of<br/>\n&gt; some<br/>\n&gt; &gt; database error.  The tearDown method attempted to cleanup after the<br/>\n&gt; test and<br/>\n&gt; &gt; it also threw a database exception.  All I got back was the<br/>\n&gt; exception that<br/>\n&gt; &gt; occurred in tearDown, not the exception that occurred in the test<br/>\n&gt; method.<br/>\n&gt; &gt;<br/>\n&gt; &gt; It was a real pain because I had to modify the production code to<br/>\n&gt; catch and<br/>\n&gt; &gt; print the exception so I could uncover the actual problem.<br/>\n&gt; &gt;<br/>\n&gt; &gt; My preferred solution would be to print both exceptions.  If I get<br/>\n&gt; an<br/>\n&gt; &gt; exception in testFoo and in tearDown, JUnit should print the<br/>\n&gt; following:<br/>\n&gt; &gt;<br/>\n&gt; &gt; 1) testFoo(net.iss.FooTest)<br/>\n&gt; &gt; java.lang.Exception<br/>\n&gt; &gt; \tat ...<br/>\n&gt; &gt; Exception in tearDown:<br/>\n&gt; &gt; java.lang.Exception<br/>\n&gt; &gt; \tat ...<br/>\n&gt; &gt;<br/>\n&gt; &gt; I would be willing to put together a patch to do this.  Comments?<br/>\n&gt; &gt;<br/>\n&gt; &gt; Matt<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n-- <br/>\nEric Vought<br/>\nChief Technical Officer - QLUE Consulting, Inc.<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a> toll-free: 888-771-3538  RTP area: 919-816-9901 </span></blockquote></div>", 
    "prevInTime": 3151, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1004568840", 
    "canDelete": false, 
    "nextInTopic": 3157, 
    "prevInTopic": 3151, 
    "headers": {
        "inReplyToHeader": "PEZENkIwMjQ0NzY2REQ1MTE4QUMwMDAzMDZFMDBCMEIxMkYwRDI3QG1zZ2F0bDA3Lmlzcy5uZXQ+", 
        "messageIdInHeader": "PFBpbmUuTE5YLjQuMzAuMDExMDMxMTc0NzE5MC4xODY1LTEwMDAwMEBicmFpbi5xbHVlLWxhbj4="
    }
}