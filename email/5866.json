{
    "numMessagesInTopic": 9, 
    "nextInTime": 5867, 
    "senderId": "PbbjpOJHItYOPurfpQpcddTIVlznCkS-FLi6xyYROTcivd-UpJFcwbmls9fZ3mWmTE9HubllNOM73MN6a2oalqrdRttKbpGqL4KDvJ5-oeY", 
    "systemMessage": false, 
    "subject": "Re: [junit] writing testcase for data read from a file", 
    "from": "Singh Manpreet &lt;speak2manpreet@...&gt;", 
    "authorName": "Singh Manpreet", 
    "msgSnippet": "Dear Rainsberger, Thank you so very much for an excellent clarification. Regards, Manpreet ... === message truncated === ", 
    "msgId": 5866, 
    "profile": "speak2manpreet", 
    "topicId": 5818, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 70582458, 
    "messageBody": "<div id=\"ygrps-yiv-221148461\">Dear Rainsberger,<br/>\n<br/>\nThank you so very much for an excellent clarification.<br/>\n<br/>\nRegards,<br/>\nManpreet<br/>\n<br/>\n--- &quot;J. B. Rainsberger&quot; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jbr@...\">jbr@...</a>&gt;<br/>\nwrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; So said  Singh Manpreet  on  2002-09-24 <br/>\n&gt; <br/>\n&gt; &gt;Hi Rainsberger,<br/>\n&gt; &gt;<br/>\n&gt; &gt;&gt; How do you know whether your method works? What<br/>\n&gt; &gt;&gt; would you do to verify<br/>\n&gt; &gt;&gt; for yourself that the method reads the data<br/>\n&gt; &gt;&gt; correctly? Explain that in<br/>\n&gt; &gt;&gt; words and we can convert it to code.<br/>\n&gt; &gt;<br/>\n&gt; &gt;The method which i want to test returns the file as<br/>\n&gt; a<br/>\n&gt; &gt;String object.<br/>\n&gt; <br/>\n&gt; I assume you mean that the method answers the<br/>\n&gt; contents of a file as a<br/>\n&gt; String.<br/>\n&gt; <br/>\n&gt;      String readContents(final File file);<br/>\n&gt; <br/>\n&gt; &gt; Now, i was thinking if i have to test<br/>\n&gt; &gt;what is read from the file, in the testcase i would<br/>\n&gt; &gt;again be reading from the file. The contents read<br/>\n&gt; from<br/>\n&gt; &gt;the file would be converted to String which would<br/>\n&gt; be<br/>\n&gt; &gt;compared to the value returned by the method for<br/>\n&gt; which<br/>\n&gt; &gt;the testcase is being written (sorry no TFD). But i<br/>\n&gt; &gt;found it to be weird idea, so i asked the question<br/>\n&gt; :-)<br/>\n&gt; <br/>\n&gt; In this case, you could do this:<br/>\n&gt; <br/>\n&gt; public void testReadContents() {<br/>\n&gt;     final File newFile = new File(&quot;newfile.txt&quot;);<br/>\n&gt;     assertFalse(newFile.exists());<br/>\n&gt;     final FileOutputStream newFileOutputStream = new<br/>\n&gt; FileOutputStream(newFile);<br/>\n&gt;     final PrintWriter out = new<br/>\n&gt; PrintWriter(newFileOutputStream);<br/>\n&gt;     final String contents = &quot;blah&quot;;<br/>\n&gt;     out.print(blah);<br/>\n&gt;     newFileOutputStream.flush();<br/>\n&gt;     newFileOutputStream.close();<br/>\n&gt; <br/>\n&gt;     assertEquals(contents, readContents(newFile));<br/>\n&gt; <br/>\n&gt;     // delete newFile in tearDown()<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Write the file with known contents, then compare<br/>\n&gt; those known contents<br/>\n&gt; with the answer from &#39;readContents&#39;.<br/>\n&gt; <br/>\n&gt; Now ask yourself, what are you really testing? In<br/>\n&gt; this test, we test<br/>\n&gt; the following:<br/>\n&gt; <br/>\n&gt; * File.exists() correctly identifies whether a file<br/>\n&gt; exists, so that I<br/>\n&gt; don&#39;t accidentally overwrite an existing file.<br/>\n&gt; * FileOutputStream and PrintWriter correctly write<br/>\n&gt; my String out to the<br/>\n&gt; file.<br/>\n&gt; * readContents reads the file contents correctly.<br/>\n&gt; <br/>\n&gt; That&#39;s too much to test at once. It relies too much<br/>\n&gt; on the file system,<br/>\n&gt; and you should probably assume that the file system<br/>\n&gt; works.<br/>\n&gt; <br/>\n&gt; What do you really want to test? It&#39;s simple: the<br/>\n&gt; JDK doesn&#39;t include a<br/>\n&gt; library call to return the contents of a text file<br/>\n&gt; as a String. The<br/>\n&gt; closest thing it does it return the contents of a<br/>\n&gt; text file,<br/>\n&gt; line-by-line. Your job is to construct the lines<br/>\n&gt; into a String with the<br/>\n&gt; proper line separator. Perhaps you should just test<br/>\n&gt; that!<br/>\n&gt; <br/>\n&gt; OK, your job may also include handling the<br/>\n&gt; exceptions thrown by<br/>\n&gt; BufferedFileReader, which are all IOExceptions, as I<br/>\n&gt; recall. Test that,<br/>\n&gt; too!<br/>\n&gt; <br/>\n&gt; You can do both without involving the file system.<br/>\n&gt; That makes your<br/>\n&gt; tests faster and more focussed on testing the code<br/>\n&gt; *you* write and not<br/>\n&gt; the code already written by others in the JDK. Much<br/>\n&gt; better!<br/>\n&gt; <br/>\n&gt;     testHandleFileNotFound<br/>\n&gt;     testHandleIoExceptionWhileReading<br/>\n&gt;     testJoinLines_EmptyLineSet<br/>\n&gt;     testJoinLines<br/>\n&gt; <br/>\n&gt; Those four tests ought to do it. Now readContents<br/>\n&gt; does this:<br/>\n&gt; <br/>\n&gt; String readContents(final File file) throws<br/>\n&gt; IOException {<br/>\n&gt;     final BufferedReader reader = new<br/>\n&gt; BufferedReader(new<br/>\n&gt; FileInputStream(file));<br/>\n&gt;     final List lines = new ArrayList();<br/>\n&gt;     while (true) {<br/>\n&gt;         final String line = reader.readLine();<br/>\n&gt;         if (line == null) { break; }<br/>\n&gt;         lines.add(line);        <br/>\n&gt;     }<br/>\n&gt;     return joinLines(lines,<br/>\n&gt; System.getProperty(&quot;line.separator&quot;,<br/>\n&gt; &quot;&#92;n&quot;));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; You write joinLines and test it, or find it from a<br/>\n&gt; library. If<br/>\n&gt; necessary, you test how to handle the exceptions.<br/>\n&gt; <br/>\n&gt; You may consider the act of reading all the lines in<br/>\n&gt; a file and storing<br/>\n&gt; them in a list something worth testing. I don&#39;t. If<br/>\n&gt; you do want to test<br/>\n&gt; it, instead do something like this:<br/>\n&gt; <br/>\n&gt; interface LineProvider {<br/>\n&gt;     String readLine() throws IOException;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; class FileLineProvider implements LineProvider {<br/>\n&gt;     File file;<br/>\n&gt; <br/>\n&gt;     FileLineProvider(File file) {<br/>\n&gt;         this.file = file;<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt;     String readLine() throws IOException {<br/>\n&gt;         return getBufferedReader().readLine();<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt;     BufferedReader getBufferedReader() throws<br/>\n&gt; IOException {<br/>\n&gt;         // lazily instantiate BufferedReader<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; class StringLineProvider implements LineProvider {<br/>\n&gt;     List strings;<br/>\n&gt;     Iterator iterator;<br/>\n&gt; <br/>\n&gt;     FileLineProvider(List strings) {<br/>\n&gt;         this.strings = new ArrayList(strings);<br/>\n&gt;         iterator = this.strings.iterator();<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt;     String readLine() {<br/>\n&gt;         if (iterator.hasNext()) {<br/>\n&gt;             return (String) iterator.next();<br/>\n&gt;         }<br/>\n&gt;         else {<br/>\n&gt;             return null;<br/>\n&gt;         }<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Use StringLineProvider in the test and<br/>\n&gt; FileLineProvider in production.<br/>\n&gt; Now you have<br/>\n&gt; <br/>\n&gt; String readContents(LineProvider lineProvider) {<br/>\n&gt;     final List lines = new ArrayList();<br/>\n&gt;     while (true) {<br/>\n&gt;         final String line = lineProvider.readLine();<br/>\n&gt;         if (line == null) { break; }<br/>\n&gt;         lines.add(line);        <br/>\n&gt;     }<br/>\n&gt;     return joinLines(lines,<br/>\n&gt; System.getProperty(&quot;line.separator&quot;,<br/>\n&gt; &quot;&#92;n&quot;));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Even better would be to have LineProvider provide<br/>\n&gt; the collection of<br/>\n&gt; lines. The loop, after all, only talks to<br/>\n&gt; lineProvider.<br/>\n&gt; <br/>\n&gt; abstract class LineProvider {<br/>\n&gt;     LineProvider() {}<br/>\n&gt; <br/>\n&gt;     abstract String readLine() throws IOException;<br/>\n&gt;     <br/>\n&gt;     List readContents() {<br/>\n&gt;         final List lines = new ArrayList();<br/>\n&gt;         while (true) {<br/>\n&gt;             final String line =<br/>\n&gt; lineProvider.readLine();<br/>\n&gt; <br/>\n </span></blockquote>=== message truncated ===<br/>\n<br/>\n<br/>\n__________________________________________________<br/>\nDo you Yahoo!?<br/>\nNew DSL Internet Access from SBC & Yahoo!<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://sbc.yahoo.com\">http://sbc.yahoo.com</a></div>", 
    "prevInTime": 5865, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1033110484", 
    "canDelete": false, 
    "nextInTopic": 5870, 
    "prevInTopic": 5847, 
    "headers": {
        "inReplyToHeader": "PDIwMDIwOTI0MTYzMjMxMDczMS4wMDg5QzMyOEBzbXRwPg==", 
        "messageIdInHeader": "PDIwMDIwOTI3MDcwODA0LjMzNDQ1LnFtYWlsQHdlYjEzOTA2Lm1haWwueWFob28uY29tPg=="
    }
}