{
    "numMessagesInTopic": 5, 
    "nextInTime": 4307, 
    "senderId": "Z7Mi88mww5JN8Hqbog9vuKVCq2Yt5gG3xn6fqQPS3yUEUm_ekUtpJ-3tH7WQE45v-cxix-RYnpHPGl-uCbbbfWl7Izg7lQIZD9rxo5TcWfU-k-my2w", 
    "systemMessage": false, 
    "subject": "Re: [junit] Test Locator", 
    "from": "&quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;", 
    "authorName": "Jeff Nielsen", 
    "msgSnippet": "Below is the class that we use that does what you ask.  It defines a static suite() method that collects all of the valid tests found under the directory", 
    "msgId": 4306, 
    "profile": "jeffreymads", 
    "topicId": 4296, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65487161, 
    "messageBody": "<div id=\"ygrps-yiv-2084780829\">\n<html><head>\n \n \n<style></style>\n</head>\n \n<div><font size=\"2\">Below is the class that we use that does what you ask.&nbsp; \nIt defines a static suite() method that collects all of the valid tests found \nunder the directory specified in the &quot;test.root.dir&quot; property.&nbsp; \n</font></div>\n<div>&nbsp;</div>\n<div><font\n size=\"2\">=====================================================================</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">package com.digitalfocus.unittest;</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">import junit.framework.*;<br>import java.io.*;<br>import \njava.lang.reflect.*;</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\"><br>/**<br>&nbsp;* Traverses a file tree hierarchy to find \ntest classes matching<br>&nbsp;* a specified pattern and add to a single \nsuite<br>&nbsp;*<br>&nbsp;* @author&nbsp; Jeff Nielsen<br>&nbsp;*/<br>public \nclass MasterTestSuite {</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; static final char PACKAGE_SEPARATOR = \n&#39;.&#39;;</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; static final String ROOT_DIRECTORY \n=<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nSystem.getProperty(&quot;test.root.dir&quot;, &quot;test&quot;);</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\"><br>&nbsp;&nbsp;&nbsp; public static Test suite() \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TestSuite containerSuite = new \nTestSuite(ROOT_DIRECTORY);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ncollectAllTests(containerSuite);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nreturn containerSuite;<br>&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; protected static void \ncollectAllTests(TestSuite holder) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; File rootDir = new \nFile(ROOT_DIRECTORY);</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; trace(&quot;Adding tests \nfrom:&quot;);</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if \n(rootDir.isDirectory()) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntraverseDirectories(holder, rootDir, \n&quot;&quot;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntrace(&quot;&quot;);<br>&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; protected static void \ntraverseDirectories(TestSuite \nholder,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nFile \ndirectory,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nString packagePrefix) {</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String[] files = \ndirectory.list(new \nTestCaseFileNameFilter());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; File[] \ndirectories \n=<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndirectory.listFiles(new DirectoryFileNameFilter());</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int fileCount = \n(files != null) ? files.length : \n0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int charsToChop = \nTestCaseFileNameFilter.CLASS_FILE_EXTENSION.length();</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i \n&lt; fileCount; i++) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String \nunqualified \n=<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nfiles[i].substring(0, files[i].length() - \ncharsToChop);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nString className = packagePrefix + unqualified;</font></div>\n<div>&nbsp;</div>\n<div><font\n size=\"2\"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntry \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nholder.addTest(getTestSuiteForClass(className));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntrace(&quot;&nbsp;&nbsp;&nbsp; &quot; + \nclassName);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch \n(NotValidTestCase ignore) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n// Do nothing</font></div>\n<div>&nbsp;</div>\n<div><font\n size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } \ncatch (ClassNotFoundException cnfe) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntrace(&quot;&nbsp;&nbsp;&nbsp; &lt;ClassNotFoundException&gt; &quot; + \nclassName);</font></div>\n<div>&nbsp;</div>\n<div><font\n size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } \ncatch (Throwable t) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntrace(&quot;&nbsp;&nbsp;&nbsp; &lt;&quot; + t.getClass().getName() + &quot;&gt; &quot; + \nclassName);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n// If we can&#39;t load a class or \nsomething<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Now call this \nrecursively on all directories<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int \ndirectoryCount = (directories != null) ? directories.length : \n0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; \ndirectoryCount; i++) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntraverseDirectories(holder, \ndirectories[i],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \npackagePrefix + \ndirectories[i].getName()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n+ PACKAGE_SEPARATOR);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}<br>&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp;&nbsp; * Make a \nTestSuite out of a fully qualified test name.<br>&nbsp;&nbsp;&nbsp;&nbsp; \n*/<br>&nbsp;&nbsp;&nbsp; public static Test getTestSuiteForClass(String \nclassName)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nthrows ClassNotFoundException, NotValidTestCase {</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class tc = \nClass.forName(className);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Make sure it&#39;s a subclass of \nTestCase<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if \n(!(TestCase.class).isAssignableFrom(tc)) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw \nnew NotValidTestCase();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Ignore abstract \ntests<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if \n(Modifier.isAbstract(tc.getModifiers())) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw \nnew NotValidTestCase();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // See if there is \na suite() method defined and use \nthat<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Method \nsuiteMethod = tc.getMethod(&quot;suite&quot;, \nnull);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nreturn (Test)suiteMethod.invoke(null, \nnull);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (Exception e) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // If \nnot, build \none<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return \nnew TestSuite(tc);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; static class NotValidTestCase extends \nException {}</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp;&nbsp; * Enable \nrunning from the command line<br>&nbsp;&nbsp;&nbsp;&nbsp; \n*/<br>&nbsp;&nbsp;&nbsp; public static void main(String[] args) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \njunit.textui.TestRunner.run(suite());<br>&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\"><br>&nbsp;&nbsp;&nbsp; static boolean TRACE = \ntrue;</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; static void trace(String s) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (TRACE) \nSystem.out.println(s);<br>&nbsp;&nbsp;&nbsp; }</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">}</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\"><br>/**<br>&nbsp;* Test case file name \nfilter.<br>&nbsp;*/<br>class TestCaseFileNameFilter implements FilenameFilter \n{<br>&nbsp;&nbsp;&nbsp; static final String CLASS_SUFFIX \n=<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nSystem.getProperty(&quot;test.class.suffix&quot;, &quot;Test&quot;);</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">&nbsp;&nbsp;&nbsp; static final String CLASS_FILE_EXTENSION = \n&quot;.class&quot;;<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; public boolean \naccept(File dir, String name) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nreturn (name.endsWith(CLASS_SUFFIX + \nCLASS_FILE_EXTENSION));<br>&nbsp;&nbsp;&nbsp; }<br>}</font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\"><br>/**<br>&nbsp;* Directory file name \nfilter.<br>&nbsp;*/<br>class DirectoryFileNameFilter implements FilenameFilter \n{<br>&nbsp;&nbsp;&nbsp; public boolean accept(File dir, String name) \n{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return (new File(dir, \nname)).isDirectory();<br>&nbsp;&nbsp;&nbsp; }<br>}<br></font></div>\n<div>&nbsp;</div>\n<div><font size=\"2\">\n<div><font\n size=\"2\">=====================================================================</font></div></font></div>\n<blockquote><span title=\"qreply\"> <blockquote\n style=\"BORDER-LEFT:#000000 2px solid;MARGIN-LEFT:5px;MARGIN-RIGHT:0px;PADDING-LEFT:5px;PADDING-RIGHT:0px;\">\n  <div style=\"FONT:10pt arial;\">----- Original Message ----- </div>\n  <div\n style=\"BACKGROUND:#e4e4e4;FONT:10pt arial;\"><b>From:</b> \n  <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:ron.difrango@...\"\n title=\"ron.difrango@...\">DiFrango, Ron</a> </div>\n  <div style=\"FONT:10pt arial;\"><b>To:</b> <a rel=\"nofollow\"\n target=\"_blank\" href=\"mailto:junit@yahoogroups.com\"\n title=\"junit@yahoogroups.com\">junit@yahoogroups.com</a> </div>\n  <div style=\"FONT:10pt arial;\"><b>Sent:</b> Friday, March 08, 2002 1:50 \nPM</div>\n  <div style=\"FONT:10pt arial;\"><b>Subject:</b> [junit] Test Locator</div>\n  <div><br></div><tt>Guys,<br><br>I know that I have seen something about this, \n  but I could not find it<br>anywhere.&nbsp; What I am looking for is code that \n  will search the classpath for<br>all the available tests.&nbsp; If it could \n  also execute the tests that would be<br>great.<br><br>I do know that this is \n  available as an ANT task, but it is not possible at<br>this time to add that \n  into our ANT build process.<br><br>Thanks in \n  advance,<br><br>Ron<br><br><br><br>**************************************************************************<br>The \n  information transmitted herewith is sensitive information intended only<br>for \n  use by the individual or entity to which it is addressed. If the reader<br>of \n  this message is not the intended recipient, you are hereby notified \n  that<br>any review, retransmission, dissemination, distribution, copying or \n  other<br>use of, or taking of any action in reliance upon this information \n  is<br>strictly prohibited. If you have received this communication in \n  error,<br>please contact the sender and delete the material from your \n  computer.<br></tt><br><br><tt>To \n  unsubscribe from this group, send an email \n  to:<br>junit-unsubscribe@yahoogroups.com<br></tt><br><br><tt>Your use of \n  Yahoo! Groups is subject to the <a rel=\"nofollow\"\n target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">Yahoo! Terms of Service</a>.</tt> \n<br></blockquote></span></blockquote></html> \n</div>", 
    "prevInTime": 4305, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1015625148", 
    "canDelete": false, 
    "nextInTopic": 4318, 
    "prevInTopic": 4301, 
    "headers": {
        "messageIdInHeader": "PDAwZmIwMWMxYzZlZCQ2OWFjZGRkMCRmMTA1MDAwYUBqbmllbHNlbjI+", 
        "referencesHeader": "PEE1NEY1QTBFMThEM0Q0MTFCNEYzMDAwMkE1MkNDNEVBMEE4NDFGQzhAa2RjbnQ0bWJ4MDEua2RjLmNhcGl0YWxvbmUuY29tPg=="
    }
}