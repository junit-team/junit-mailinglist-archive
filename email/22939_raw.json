{
    "numMessagesInTopic": 8, 
    "nextInTime": 22940, 
    "senderId": "SMRx9X7YsS2Dorxq1GzKtcvU3PInEvC1cPgdkE5VSnYZKCiepcUbiOQv43ykcKwqP5dZJoYGPHEgCpiZO441GsO2DNzTVcGWG-U", 
    "systemMessage": false, 
    "subject": "Re: [junit] Common Test Runner for JVM", 
    "from": "Mike Forsberg &lt;bigmike.f@...&gt;", 
    "authorName": "Mike Forsberg", 
    "msgSnippet": "I may be wrong, but it sounds like this project will be a JUnit engine geared specifically for IntelliJ. Is there any chance that the core functionality", 
    "msgId": 22939, 
    "rawEmail": "Return-Path: &lt;bigmike.f@...&gt;\r\nReceived: (qmail 37541 invoked by uid 7800); 13 Sep 2010 21:45:23 -0000\r\nX-Sender: bigmike.f@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 55498 invoked from network); 13 Sep 2010 19:47:24 -0000\r\nX-Received: from unknown (66.196.94.105)\n  by m11.grp.re1.yahoo.com with QMQP; 13 Sep 2010 19:47:24 -0000\r\nX-Received: from unknown (HELO mail-yw0-f54.google.com) (209.85.213.54)\n  by mta1.grp.re1.yahoo.com with SMTP; 13 Sep 2010 19:47:23 -0000\r\nX-Received: by ywt2 with SMTP id 2so2792677ywt.27\n        for &lt;junit@yahoogroups.com&gt;; Mon, 13 Sep 2010 12:47:23 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.150.228.11 with SMTP id a11mr14050ybh.27.1284406748794; Mon,\n 13 Sep 2010 12:39:08 -0700 (PDT)\r\nX-Received: by 10.150.229.18 with HTTP; Mon, 13 Sep 2010 12:39:08 -0700 (PDT)\r\nIn-Reply-To: &lt;4C8E791D.5040704@...&gt;\r\nReferences: &lt;4C8BFDE7.3010603@...&gt;\n\t&lt;AANLkTin4AXk8BGcbXGfm68KQFzLqbVzk+m22CrcUgRt1@...&gt;\n\t&lt;AANLkTim11ORO68irFhHrVCBvqH8vK9BQG26wiUxWd9Zd@...&gt;\n\t&lt;4C8E791D.5040704@...&gt;\r\nDate: Mon, 13 Sep 2010 14:39:08 -0500\r\nMessage-ID: &lt;AANLkTik_hZAnWFjedN3N=jKW1kwje1trYbA=CaP31nKV@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nFrom: Mike Forsberg &lt;bigmike.f@...&gt;\r\nSubject: Re: [junit] Common Test Runner for JVM\r\nX-Yahoo-Group-Post: member; u=421392598; y=98YLS4Q2cTMKIQ46kHlVKMbVZiiIb3qJUDuLWDQ1Sz_5H-kr\r\nX-Yahoo-Profile: bigmike_f\r\nX-eGroups-Approved-By: dsaff &lt;david@...&gt; via email; 13 Sep 2010 21:45:23 -0000\r\n\r\nI may be wrong, but it sounds like this project will be a JUnit\n&quot;engine&quot; ge=\r\nared specifically for IntelliJ.\n\nIs there any chance that the core function=\r\nality could be written in a\nway that other tools could leverage it&#39;s design=\r\n.  It would be great if\nthe project would be broken into a core with module=\r\ns per IDE.  I think\nthis paradigm would benifit the project in the followin=\r\ng ways:\n-- Adoption may slow if every developer were forced into a specific=\r\n\nIDE to gain access to this tool.\n-- Integration with common tools like Ant=\r\n, Maven, and other CI tools\nmight be harder if too much design is IntelliJ =\r\nspecific.\n-- I want to use it, but prefer eclipse for no other reason then,=\r\n &quot;I&#39;m lazy&quot;.\n\nSound like a great project, a refactoring of the @RunWith wou=\r\nld be a\nnice-ity.  If you head the eclipse route, I&#39;d be willing to give it=\r\n a\ntry and supply feed back.\n\nBig Mike\n\n\nOn Mon, Sep 13, 2010 at 2:18 PM, E=\r\nsko Luontola &lt;esko.luontola@...&gt; wrote:\n&gt;&gt; =A0&gt; I notice that a\n&gt;&gt; =\r\n=A0&gt; number of the issues you&#39;re tackling are mostly about IDE\n&gt;&gt; =A0&gt; inte=\r\ngration\n&gt;\n&gt; Yes. In addition to programming I do also interaction design, a=\r\nnd\n&gt; usability is very important to me. My development process is to first\n=\r\n&gt; design the UI and after that think about what is needed to implement it.\n=\r\n&gt; Quite many times a good user interface affects all levels of the\n&gt; implem=\r\nentation.\n&gt;\n&gt;\n&gt;&gt; =A0&gt; I wonder if thinking about the interface you wish IDE=\r\ns\n&gt;&gt; =A0&gt; would talk to, and then getting at least one IDE to agree to it, =\r\nwould\n&gt;&gt; =A0&gt; be a good approach.\n&gt;\n&gt; Yes, that&#39;s what I&#39;m planning. As Lin=\r\nus Torvalds says, &quot;Talk is cheap.\n&gt; Show me the code.&quot;\n&gt;\n&gt; My current plan =\r\nis to implement a minimal set of features, create a UI\n&gt; and integrate it w=\r\nith IntelliJ IDEA. Then people can better see what\n&gt; this is all about, and=\r\n can better decide whether it&#39;s something that\n&gt; they like. I will setup a =\r\ndedicated mailing list and contact the major\n&gt; tool vendors after I have so=\r\nmething working to show (right now I&#39;m only\n&gt; gauging some interest on JUni=\r\nt, scala-tools and simple-build-tool\n&gt; mailing lists).\n&gt;\n&gt;\n&gt;&gt; I think the m=\r\nain advantage to being able to count the tests before\n&gt;&gt; you run\n&gt;&gt; them is=\r\n that is that you can make a progress bar that gives feedback to the\n&gt;&gt; use=\r\nr as the tests run. That&#39;s a really nice feature in GUI test runners that\n&gt;=\r\n&gt; is lost if you can&#39;t count tests in advance. It would be possible to make=\r\n\n&gt;&gt; the advance test count an optional feature, but then when tests can&#39;t b=\r\ne\n&gt;&gt; counted, you couldn&#39;t show a progress bar. And I think that would be a=\r\n\n&gt;&gt; pretty big loss.\n&gt;\n&gt; I&#39;ve thought about that. It&#39;s possible to measure =\r\nprogress at least on\n&gt; the class level. And within a class, the completion =\r\nof a class can be\n&gt; approximated as more tests are discovered.\n&gt;\n&gt; I&#39;m also=\r\n planning on making the tool remember statistics from previous\n&gt; test runs =\r\n(and do some classloader caching of external libraries, to\n&gt; speed up the t=\r\nest runs), so after the first test run the tool will know\n&gt; quite accuratel=\r\ny that how many tests there are and how long each of them\n&gt; takes to execut=\r\ne.\n&gt;\n&gt; I&#39;ve also thought about some ways to detect which classes are covere=\r\nd by\n&gt; a test, which information can be used to run first the tests for the=\r\n\n&gt; recently modified classes. So there might be some features similar to\n&gt; =\r\nJUnit Max (I haven&#39;t used Max because it&#39;s not available on IntelliJ IDEA).=\r\n\n&gt;\n&gt;\n&gt;&gt; =A0&gt; In terms of IDE integration, JUnit just reports a tree of\n&gt;&gt; =\r\n=A0&gt; Descriptions, and results against them. Runners are free to structure\n=\r\n&gt;&gt; =A0&gt; these trees however they wish. Have you run into IDE limitations fo=\r\nr\n&gt;&gt; =A0&gt; displaying/interacting with these trees?\n&gt;&gt; =A0&gt;\n&gt;&gt; I would quest=\r\nion the need for nesting tests. I can easily see the benefit\n&gt;&gt; of nesting =\r\nclosures in test code. Several traits in ScalaTest do that, but\n&gt;&gt; the mode=\r\nl I use in ScalaTest is that each leaf node is one test. The\n&gt;&gt; closures su=\r\nrrounding the leaf nodes are descriptions, not tests themselves.\n&gt;&gt; I would=\r\n think you and Eric could adopt that approach in Specs and Specsy\n&gt;&gt; withou=\r\nt much trouble.\n&gt;\n&gt; It would be possible for me to detect the leaf nodes af=\r\nter the tests\n&gt; have been run, but I prefer the UI to show the correct ment=\r\nal model of\n&gt; what is happening during test runs.\n&gt;\n&gt; To illustrate, here i=\r\ns a partial version of one of Specsy&#39;s example\n&gt; specs with some println() =\r\ndebug statements.\n&gt;\n&gt; @RunWith(classOf[Specsy])\n&gt; class StackSpec extends S=\r\npec {\n&gt; =A0 val stack =3D new scala.collection.mutable.Stack[String]\n&gt; =A0 =\r\nprintln(stack)\n&gt;\n&gt; =A0 &quot;When objects have been pushed onto a stack&quot; &gt;&gt; {\n&gt; =\r\n=A0 =A0 stack.push(&quot;pushed first&quot;)\n&gt; =A0 =A0 stack.push(&quot;pushed last&quot;)\n&gt; =\r\n=A0 =A0 println(stack)\n&gt;\n&gt; =A0 =A0 &quot;the object pushed last is popped first&quot;=\r\n &gt;&gt; {\n&gt; =A0 =A0 =A0 val poppedFirst =3D stack.pop()\n&gt; =A0 =A0 =A0 assertTha=\r\nt(poppedFirst, is(&quot;pushed last&quot;))\n&gt; =A0 =A0 =A0 println(stack)\n&gt; =A0 =A0 }\n=\r\n&gt; =A0 =A0 &quot;the object pushed first is popped last&quot; &gt;&gt; {\n&gt; =A0 =A0 =A0 stack=\r\n.pop()\n&gt; =A0 =A0 =A0 val poppedLast =3D stack.pop()\n&gt; =A0 =A0 =A0 assertTha=\r\nt(poppedLast, is(&quot;pushed first&quot;))\n&gt; =A0 =A0 =A0 println(stack)\n&gt; =A0 =A0 }\n=\r\n&gt; =A0 }\n&gt; }\n&gt;\n&gt; To execute that, Specsy needs to instantiate and run the cl=\r\nass two\n&gt; times. The first test run will print:\n&gt;\n&gt; Stack()\n&gt; Stack(pushed =\r\nlast, pushed first)\n&gt; Stack(pushed first)\n&gt;\n&gt; The second test run will prin=\r\nt:\n&gt;\n&gt; Stack()\n&gt; Stack(pushed last, pushed first)\n&gt; Stack()\n&gt;\n&gt; My vision i=\r\ns that the UI would visualize where one test ends and another\n&gt; begins. It =\r\nwould provide the same information as the following examples\n&gt; (but better =\r\nvisualized ;).\n&gt;\n&gt; Test run 1:\n&gt;\n&gt; -- &lt;net.orfjackal.specsy.examples.StackS=\r\npec&gt;\n&gt; Stack()\n&gt; -- =A0 =A0 &lt;When objects have been pushed onto a stack&gt;\n&gt; =\r\nStack(pushed last, pushed first)\n&gt; -- =A0 =A0 =A0 =A0 &lt;the object pushed la=\r\nst is popped first&gt;\n&gt; Stack(pushed first)\n&gt; -- =A0 =A0 =A0 =A0 &lt;/the object=\r\n pushed last is popped first&gt;\n&gt; -- =A0 =A0 &lt;/When objects have been pushed =\r\nonto a stack&gt;\n&gt; -- &lt;/net.orfjackal.specsy.examples.StackSpec&gt;\n&gt;\n&gt; Test run =\r\n2:\n&gt;\n&gt; -- &lt;net.orfjackal.specsy.examples.StackSpec&gt;\n&gt; Stack()\n&gt; -- =A0 =A0 =\r\n&lt;When objects have been pushed onto a stack&gt;\n&gt; Stack(pushed last, pushed fi=\r\nrst)\n&gt; -- =A0 =A0 =A0 =A0 &lt;the object pushed first is popped last&gt;\n&gt; Stack(=\r\n)\n&gt; -- =A0 =A0 =A0 =A0 &lt;/the object pushed first is popped last&gt;\n&gt; -- =A0 =\r\n=A0 &lt;/When objects have been pushed onto a stack&gt;\n&gt; -- &lt;/net.orfjackal.spec=\r\nsy.examples.StackSpec&gt;\n&gt;\n&gt; Then when I select &quot;StackSpec&quot; or &quot;When objects =\r\nhave been pushed onto a\n&gt; stack&quot; in the tree of tests shown by the UI, it w=\r\nould show both of those\n&gt; test runs, because those tests were included in b=\r\noth of them. But if I\n&gt; select &quot;the object pushed last is popped first&quot; the=\r\nn it will show only\n&gt; test run 1, and if I select &quot;the object pushed first =\r\nis popped last&quot; it\n&gt; will show only test run 2.\n&gt;\n&gt;\n&gt;&gt; =A0&gt; That assumption=\r\n is in the IDE&#39;s. It&#39;s a useful one, but it&#39;s neither\n&gt;&gt; =A0&gt; required nor =\r\nassumed by JUnit itself.\n&gt;\n&gt; True. I would like to make that concept explic=\r\nit, so that the testing\n&gt; framework could help the IDE with code navigation=\r\n.\n&gt;\n&gt;\n&gt;&gt; =A0&gt; We&#39;ve taken several stabs at this. The biggest hurdle is how =\r\nto\n&gt;&gt; =A0&gt; extend the test-definition language: while many tests can be\n&gt;&gt; =\r\n=A0&gt; parallelized without cost, and test writers should not depend on\n&gt;&gt; =\r\n=A0&gt; order, they currently might depend on only test being written at the\n&gt;=\r\n&gt; =A0&gt; time.\n&gt;\n&gt; I&#39;ve been thinking whether to make parallelization enabled=\r\n by default.\n&gt; =A0From a usability point of view, I would prefer to &quot;design=\r\n for one user&quot;\n&gt; (as advocated for example by Alan Cooper) and as such I&#39;m =\r\ntempted to\n&gt; write the test runner for programmers who write tests which do=\r\nn&#39;t depend\n&gt; on any global state (i.e. I would design it for myself :).\n&gt;\n&gt;=\r\n For tests which cannot be executed safely in parallel, my plan is to\n&gt; mak=\r\ne it possible to annotate the class with @LocallySequential or\n&gt; @GloballyS=\r\nequential. The first annotation would still allow running\n&gt; tests from othe=\r\nr classes in parallel, but the second annotation would\n&gt; execute this one t=\r\nest class all alone.\n&gt;\n&gt;\n&gt;&gt; =A0&gt; Test discovery seems to be yet another fea=\r\nture of a common IDE interface.\n&gt;\n&gt; And build tools.\n&gt;\n&gt; One thing that I&#39;m=\r\n also trying to solve, is minor differences between\n&gt; running tests in the =\r\nIDE vs. running them through a build tool. For\n&gt; example IntelliJ IDEA exec=\r\nutes all tests in the project using the same\n&gt; classpath, but Maven uses th=\r\ne classpath of the module which contains the\n&gt; tests. If two modules use di=\r\nfferent versions of a library (I have one\n&gt; such project), then this differ=\r\nence might be important.\n&gt;\n&gt; Also I want to get rid of bugs such as\n&gt; http:=\r\n//youtrack.jetbrains.net/issue/IDEA-57696 &quot;IDEA&#39;s JUnit test runner\n&gt; does =\r\nnot run Scala classes which are annotated with\n&gt; org.junit.runner.RunWith&quot;.=\r\n Running tests is such an important feature,\n&gt; that I don&#39;t want it to have=\r\n any bugs.\n&gt;\n&gt; --\n&gt; Esko Luontola\n&gt; www.orfjackal.net\n&gt;\n&gt;\n&gt; ---------------=\r\n---------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "bigmike_f", 
    "topicId": 22933, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 421392598, 
    "prevInTime": 22938, 
    "contentTrasformed": false, 
    "postDate": "1284406748", 
    "canDelete": false, 
    "nextInTopic": 22940, 
    "prevInTopic": 22938, 
    "headers": {
        "inReplyToHeader": "PDRDOEU3OTFELjUwNDA3MDRAZ21haWwuY29tPg==", 
        "messageIdInHeader": "PEFBTkxrVGlrX2haQW5XRmplZE4zTj1qS1cxa3dqZTF0clliQT1DYVAzMW5LVkBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDRDOEJGREU3LjMwMTA2MDNAZ21haWwuY29tPgk8QUFOTGtUaW40QVhrOEJHY2JYR2ZtNjhLUUZ6THFiVnprK20yMkNyY1VnUnQxQG1haWwuZ21haWwuY29tPgk8QUFOTGtUaW0xMU9STzY4aXJGaEhyVkNCdnFIOHZLOUJRRzI2d2lVeFdkOVpkQG1haWwuZ21haWwuY29tPgk8NEM4RTc5MUQuNTA0MDcwNEBnbWFpbC5jb20+"
    }
}