{
    "numMessagesInTopic": 14, 
    "nextInTime": 15674, 
    "senderId": "KlJs3lrlbRcEiDbCHw9w3-E2OtDMM6Uu3eA2WW_4qrnOe3JXMKoNciCsBXWiqYLlfwl9-krkDcSkhOHVREfUr62TpcxQq_zIOWtbpLZFJQ", 
    "systemMessage": false, 
    "subject": "Re: [junit] Clarifying how to use unit tests", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... Yes, it is. ... I never start with an interface. I assume you want to test the behavior of the implementation of the Postcode service. In that case, do you", 
    "msgId": 15673, 
    "profile": "nails762", 
    "topicId": 15467, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "messageBody": "<div id=\"ygrps-yiv-411118304\">Rakesh Patel wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; have a bit of an update on my new TDD experiment.<br/>\n&gt; <br/>\n&gt; Apparently it is good practice to use interfaces and provide pluggable<br/>\n&gt; implementations as needed. I have heard this is good for testing.<br/>\n<br/>\n </span></blockquote>Yes, it is.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; So let me explain what I am trying to do. I am building my first web<br/>\n&gt; services application but sticking with POJOs in the service layer<br/>\n&gt; initially. I want to create a web service for a postcode lookup servlet<br/>\n&gt; we already have. This servlet produces XML output but the code to<br/>\n&gt; connect and send in paramters is all done manually (the author did not<br/>\n&gt; know about web services at the time).<br/>\n&gt; <br/>\n&gt; So here&#39;s my initial design.<br/>\n&gt; <br/>\n&gt; public interface PostcodeService {<br/>\n&gt;     public String getAddressAsXML(String postcode);<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; now, should I write a test class against the<br/>\n&gt; interface(PostcodeServiceTest) or against the implementation<br/>\n&gt; class(PostcodeServiceImplTest)?<br/>\n<br/>\n </span></blockquote>I never start with an interface. I assume you want to test the behavior <br/>\nof the implementation of the Postcode service. In that case, do you even <br/>\nneed to extract an interface yet? When do you think you&#39;ll need the <br/>\ninterface? Probably when it&#39;s time to expose the service as a web <br/>\nservice. Worry about the interface then. In the meantime, test-drive <br/>\nPostcodeService.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Now calling the underlying postcode servlet actually costs money so I<br/>\n&gt; know I will need to produce a mock version of it also. So do I create a<br/>\n&gt; test class for this also(PostcodeServiceMockImpl)?<br/>\n<br/>\n </span></blockquote>I&#39;m confused here. Are you /building/ PostcodeService? or using it?<br/>\n<br/>\nIf you&#39;re building it, then you&#39;d only fake/mock/substitute it when you <br/>\nwanted to test something else that uses PostcodeService. Don&#39;t worry <br/>\nabout it until you get there.<br/>\n<br/>\nIf you&#39;re using PostcodeService, then I&#39;m still confused and can&#39;t offer <br/>\nmore advice.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Thats 3 potential test classes and also they will probably be very<br/>\n&gt; similar. Is that right? I can also see when I come to code DAOs i will<br/>\n&gt; be in a similar situation since I will probably want to mock db access<br/>\n&gt; (perhaps the mock will return hard coded values).<br/>\n<br/>\n </span></blockquote>Check out my weblog (diasparsoftware.com/weblog) and look for an entry <br/>\ncalled &quot;When to fake, when to mock.&quot; It might help you understand how I <br/>\nuse those two concepts in interaction testing.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; I am spending way too long thinking about this rather than writing code<br/>\n&gt; which has me a bit worried.<br/>\n<br/>\n </span></blockquote>Test-drive your implementation of PostcodeService. If that <br/>\nimplementation uses other expensive services, hide those behind <br/>\ninterfaces and fake/mock them. When you&#39;re done, decide whether you need <br/>\nto extract an interface from PostcodeService to publish. Does that help?<br/>\n-- <br/>\nJ. B. (Joe) Rainsberger :: <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.jbrains.info\">http://www.jbrains.info</a><br/>\nYour guide to software craftsmanship<br/>\nJUnit Recipes: Practical Methods for Programmer Testing<br/>\n2005 Gordon Pask Award for contribution Agile Software Practice</div>", 
    "prevInTime": 15672, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1134255090", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 15656, 
    "headers": {
        "inReplyToHeader": "PDQzOTg0MkM0LjgwOTA3MDBAZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDQzOUI1QkYyLjYwNzAxQHJvZ2Vycy5jb20+", 
        "referencesHeader": "PDQzODBDRUM5LjYwMDA3MDRAZ21haWwuY29tPiA8MTEzMjU4MzE5My40MzgxZDkxOWNlZjEwQGltYXAuY3NhaWwubWl0LmVkdT4gPDQzOTg0MkM0LjgwOTA3MDBAZ21haWwuY29tPg=="
    }
}