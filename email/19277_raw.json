{
    "numMessagesInTopic": 4, 
    "nextInTime": 19278, 
    "senderId": "zebMtSBC01b9xJaZrJBaAktyA4IvWFV2KdRvVYI_tDDDkrjU51K6vj-QCNMJhH-fp0y94D0fKw3NP8HS81v97GnD", 
    "systemMessage": false, 
    "subject": "Re: [junit] Custom suites with filter", 
    "from": "&quot;David Saff&quot; &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Matthias, The easiest thing to do is to go ahead and create a suite with all of the tests (call it AllMyTests, for example). Then, you can create a separate", 
    "msgId": 19277, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 76959 invoked from network); 12 Apr 2007 14:35:27 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m25.grp.scd.yahoo.com with QMQP; 12 Apr 2007 14:35:27 -0000\r\nReceived: from unknown (HELO py-out-1112.google.com) (64.233.166.178)\n  by mta8.grp.scd.yahoo.com with SMTP; 12 Apr 2007 14:35:26 -0000\r\nReceived: by py-out-1112.google.com with SMTP id f31so503567pyh\n        for &lt;junit@yahoogroups.com&gt;; Thu, 12 Apr 2007 07:34:52 -0700 (PDT)\r\nDKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;\n        d=gmail.com; s=beta;\n        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;\n        b=W4HfqIMy7ZUwEyPqnhYPiGx4Y92Ygt43yxZWSKSG5wtZPsPNHPsJ5Sfgh/rf679qMB7C53JlG4FpItWKcYhAFtBHs4dHIegmYO0K8wIWOMYiRN+AkF/jppGQlY/HbF9qrp3YLWwgp7YBS2apZvLJSegBXxy2qcN2I9irGmpd4uk=\r\nReceived: by 10.114.168.1 with SMTP id q1mr768899wae.1176388491942;\n        Thu, 12 Apr 2007 07:34:51 -0700 (PDT)\r\nReceived: by 10.114.158.7 with HTTP; Thu, 12 Apr 2007 07:34:51 -0700 (PDT)\r\nMessage-ID: &lt;4f7da6b90704120734h745fab9dvdf8d5bdf9073d0ea@...&gt;\r\nDate: Thu, 12 Apr 2007 10:34:51 -0400\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;evkv84+7d3s@...&gt;\r\nMIME-Version: 1.0\r\nReferences: &lt;evkv84+7d3s@...&gt;\r\nX-Google-Sender-Auth: d070d7e144faa2f5\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: &quot;David Saff&quot; &lt;saff@...&gt;\r\nSubject: Re: [junit] Custom suites with filter\r\nX-Yahoo-Group-Post: member; u=139771899; y=fKDjy6v6DJyxQXDetrg7oet-LgwoMrRcA1mloQnYRgw\r\nX-Yahoo-Profile: dsaff\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nMatthias,\n\nThe easiest thing to do is to go ahead and create a suite with all of the\ntests (call it AllMyTests, for example).\n\nThen, you can create a separate class AllMyTestsFiltered, which looks like\nthis:\n\n@RunWith(FilterRunner.class)\n@FilteredClass(testClass = AllMyTests.class, filterClass =\nCategoryFilter.class)\npublic class AllMyTestsFiltered {}\n\nYou&#39;ll need FilterRunner, which I&#39;ve provided below, with tests (the tests\ncome first--a personal quirk).  I&#39;m not terribly familiar with JUnitExt, so\nthere might be a CategoryFilter you can immediately grab, or you might have\nto roll your own.  Good luck,\n\n   David Saff\n\n\npackage filter;\n\nimport static org.junit.Assert.*;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport org.junit.Test;\nimport org.junit.runner.Description;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Request;\nimport org.junit.runner.Result;\nimport org.junit.runner.RunWith;\nimport org.junit.runner.Runner;\nimport org.junit.runner.manipulation.Filter;\nimport org.junit.runner.notification.RunNotifier;\n\npublic class FilterTest {\n\n\n    // TEST\n\n\n    public static class AFilter extends PrefixFilter {\n        @Override\n        protected String getPrefix() {\n            return &quot;a&quot;;\n        }\n    }\n\n    public static class BFilter extends PrefixFilter {\n        @Override\n        protected String getPrefix() {\n            return &quot;b&quot;;\n        }\n    }\n\n    public static class OneAOneB {\n        @Test\n        public void a1() {\n\n        }\n\n        @Test\n        public void b1() {\n\n        }\n    }\n\n    public static class TwoAsOneB extends OneAOneB {\n        @Test\n        public void a2() {\n\n        }\n    }\n\n    @RunWith(FilterRunner.class)\n    @FilteredClass(testClass = OneAOneB.class, filterClass = AFilter.class)\n    public static class OneA {\n\n    }\n\n    @RunWith(FilterRunner.class)\n    @FilteredClass(testClass = TwoAsOneB.class, filterClass = AFilter.class)\n    public static class TwoAs {\n\n    }\n\n    @RunWith(FilterRunner.class)\n    @FilteredClass(testClass = TwoAsOneB.class, filterClass = BFilter.class)\n    public static class OneB {\n\n    }\n\n    @Test\n    public void filterRunnerWorksOnTwoAs() {\n        Result result = JUnitCore.runClasses(TwoAs.class);\n        assertEquals(2, result.getRunCount());\n    }\n\n    @Test\n    public void filterRunnerWorksOnB() {\n        Result result = JUnitCore.runClasses(OneB.class);\n        assertEquals(1, result.getRunCount());\n    }\n\n    @Test\n    public void filterRunnerWorksOnA() {\n        Result result = JUnitCore.runClasses(OneA.class);\n        assertEquals(1, result.getRunCount());\n    }\n\n\n\n\n    // IMPLEMENTATION\n\n\n\n\n    @Retention(RetentionPolicy.RUNTIME)\n    public @interface FilteredClass {\n\n        Class&lt;?&gt; testClass();\n\n        Class&lt;? extends Filter&gt; filterClass();\n\n    }\n\n    public abstract static class PrefixFilter extends Filter {\n        @Override\n        public String describe() {\n            return &quot;methods beginning with &quot; + getPrefix();\n        }\n\n        @Override\n        public boolean shouldRun(Description description) {\n            return (description.getDisplayName().startsWith(getPrefix()));\n        }\n\n        protected abstract String getPrefix();\n    }\n\n    public static class FilterRunner extends Runner {\n        private final Runner delegate;\n\n        public FilterRunner(Class&lt;?&gt; testClass) throws Exception {\n            Request classRequest = Request.aClass(getTestClass(testClass));\n            Filter filter = getFilter(testClass);\n            delegate = classRequest.filterWith(filter).getRunner();\n        }\n\n        private Class&lt;?&gt; getTestClass(Class&lt;?&gt; testClass) {\n            return annotation(testClass).testClass();\n        }\n\n        private Filter getFilter(Class&lt;?&gt; testClass) throws Exception {\n            return annotation(testClass).filterClass().newInstance();\n        }\n\n        private FilteredClass annotation(Class&lt;?&gt; testClass) {\n            return testClass.getAnnotation(FilteredClass.class);\n        }\n\n        @Override\n        public Description getDescription() {\n            return delegate.getDescription();\n        }\n\n        @Override\n        public void run(RunNotifier notifier) {\n            delegate.run(notifier);\n        }\n    }\n}\n\n\nOn 4/12/07, matthiasluebken &lt;matthias.luebken@...&gt; wrote:\n&gt;\n&gt; Hi\n&gt;\n&gt; I&#39;m just exploring JUnit4 for our project.\n&gt;\n&gt; What we like to do is to distinguish between integration tests, unit\n&gt; tests and database tests. Therefor I&#39;m using JUnitExt\n&gt; (http://junitext.sourceforge.net/) categories to annotate my tests.\n&gt;\n&gt; Now my question is, how I create suites where I can apply a certain\n&gt; filter. Looking for documentation I always ended up with the example\n&gt; with @RunWith(Suite.class).\n&gt;\n&gt; Thanks\n&gt; Matthias\n&gt; BTW: Since we are developing Eclipse-Plugins, we would like to stick\n&gt; to JUnit4 so we can use the standard run-configurations.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "dsaff", 
    "topicId": 19276, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "prevInTime": 19276, 
    "contentTrasformed": false, 
    "postDate": "1176388491", 
    "canDelete": false, 
    "nextInTopic": 19282, 
    "prevInTopic": 19276, 
    "headers": {
        "inReplyToHeader": "PGV2a3Y4NCs3ZDNzQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDcwNDEyMDczNGg3NDVmYWI5ZHZkZjhkNWJkZjkwNzNkMGVhQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGV2a3Y4NCs3ZDNzQGVHcm91cHMuY29tPg=="
    }
}