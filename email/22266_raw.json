{
    "numMessagesInTopic": 38, 
    "nextInTime": 22267, 
    "senderId": "GO6d7u6R2RWv6Cw9M1THMwiYd0vIYPbEr1Gz2yRTWd-MYyC-ZNPyLXkt_ROWhuOHBvaFCduEee0RLNt-PssaIDQHIT-m-g", 
    "systemMessage": false, 
    "subject": "Re: [junit] Order of execution for tests", 
    "from": "Kent Beck &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Rocco, Thank you for the complete and carefully considered example. I think from it I can understand the value you would like to gain from expressing", 
    "msgId": 22266, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 32881 invoked from network); 6 Jan 2010 20:04:45 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m13.grp.re1.yahoo.com with QMQP; 6 Jan 2010 20:04:45 -0000\r\nX-Received: from unknown (HELO elasmtp-kukur.atl.sa.earthlink.net) (209.86.89.65)\n  by mta2.grp.re1.yahoo.com with SMTP; 6 Jan 2010 20:04:45 -0000\r\nX-Received: from [71.32.122.223] (helo=[192.168.0.79])\n\tby elasmtp-kukur.atl.sa.earthlink.net with esmtpa (Exim 4.67)\n\t(envelope-from &lt;kentb@...&gt;)\n\tid 1NSc5l-0002KH-Rs\n\tfor junit@yahoogroups.com; Wed, 06 Jan 2010 15:02:54 -0500\r\nMime-Version: 1.0 (Apple Message framework v1077)\r\nDate: Wed, 6 Jan 2010 12:02:52 -0800\r\nIn-Reply-To: &lt;81FB491EEF5EA34F97FF706AC1AB356314E6E32456@...&gt;\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;C0A8D10D-2CB9-40A4-ACC6-427DB6A5D660@...&gt; &lt;003301ca8d73$bd242ae0$6401a8c0@ferrari&gt; &lt;b86b6a9c1001041128p3558fe37ycb7f4febc9b509a0@...&gt; &lt;4dd5a46c1001041242t4830fc4fi4d97d871e65cb9a6@...&gt; &lt;81FB491EEF5EA34F97FF706AC1AB356314E6D1304E@...&gt; &lt;103C1C5E-79B6-4B4F-90E7-7218C9600691@...&gt; &lt;81FB491EEF5EA34F97FF706AC1AB356314E6E32456@...&gt;\r\nMessage-Id: &lt;B10EA841-A3C2-4704-AA23-B1931617205C@...&gt;\r\nX-Mailer: Apple Mail (2.1077)\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d4785b72077434040365c7a03365a4a712d4f8d4ea9177315193350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Kent Beck &lt;kentb@...&gt;\r\nSubject: Re: [junit] Order of execution for tests\r\nX-Yahoo-Group-Post: member; u=173198504; y=7MmaUXtjOwXEv0lzSSvBUaemnx44AiSc9paWXt10LngVuTXS\r\nX-Yahoo-Profile: kentlbeck\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nRocco,\n\nThank you for the complete and carefully considered example. I thin=\r\nk from it I can understand the value you would like to gain from expressing=\r\n dependencies. My questions are:\n  * How frequently does this value accrue?=\r\n\n  * What is the magnitude of the value? (That is, how long does it take to=\r\n find the most-fundamental error when you have one test failing vs. when yo=\r\nu have many?)\n  * What is the cost of creating the dependencies?\n  * What i=\r\ns the cost of maintaining the dependencies?\n  * What is the cost of teachin=\r\ng about dependencies?\n  * What is the cost to people who don&#39;t use dependen=\r\ncies?\n  * How many people would use dependencies?\n  * Do the dependencies e=\r\nver provide misleading results? How frequently? At what cost?\n  * What is t=\r\nhe cost and opportunity cost of both the initial implementation of dependen=\r\ncies and the maintenance of the code? (This is primarily a concern for Davi=\r\nd and I as our implementation budget for JUnit is so tight, but the opportu=\r\nnity cost is a factor for everyone.)\n\nI don&#39;t necessarily expect &quot;the answe=\r\nrs&quot; to these questions from you, but these are the things we&#39;re thinking ab=\r\nout when we consider whether to implement any feature.\n\nRegards,\n\nKent\n\nOn =\r\nJan 6, 2010, at 9:47 AM, Pigneri, Rocco wrote:\n\n&gt; Dear Kent, \n&gt; \n&gt; Let=E2=\r\n=80=99s say that you are building a reporting tool for a financial firm and=\r\n that you have three major indices to manage: consumer spending, average na=\r\ntional income, and average consumer debt load. The calculation and presenta=\r\ntion of each of these indices is rather involved, especially given the amou=\r\nnt of background material required for regulatory compliance, so you have a=\r\n separate three-tier class structure for each index. Each index has a few =\r\n=E2=80=9Chelper classes=E2=80=9D that are shared among the three indices an=\r\nd also between the logic and data layers: consumer, consumer region (a grou=\r\np of consumers within a particular region), and some analysis classes. On t=\r\nop of the presentation layer for each tier, there is a single =E2=80=9Crepo=\r\nrter=E2=80=9D class that collates the three index reports, provides some su=\r\nmmary data, and personalizes the package for the individual recipients. \n&gt; =\r\n\n&gt; So, if you imagine that each of these parts is implemented in a single c=\r\nlass=E2=80=94I=E2=80=99ve found this organization to be pretty reasonable i=\r\nn the past=E2=80=94you would have a few classes: Consumer, ConsumerRegion, =\r\nConsumerAnalysis at the bottom, then a single class for each tier of each i=\r\nndex (SpendingDataLayer, SpendingLogicLayer, SpendingPresentationLayer, Inc=\r\nomeDataLayer, etc.), and then a final Reporter class at the top. The logic =\r\nlayers may also call upon the analysis classes for certain common statistic=\r\nal functions. The data layers would, in addition to poking directly into th=\r\ne database, utilize the =E2=80=9Chelper classes=E2=80=9D for some basic DB =\r\naccess. You could also imagine having a single test class for each of the a=\r\nbove classes (also reasonable in my experience). \n&gt; \n&gt; In JUnit, then, you =\r\nwould say that the ReporterTestFixture depends upon the SpendingPresentatio=\r\nnLayerTestFixture, the IncomePresentationLayerTestFixture, and the DebtLoad=\r\nPresentationLayerTestFixture, let=E2=80=99s say via an Annotation on Report=\r\nerTestFixture. Each presentation layer would be marked to depend upon its l=\r\nogic layer. The logics would depend upon the datas, any additional helper c=\r\nlasses, and finally the Analysis class. Finally, the data layers would be m=\r\narked to depend upon any =E2=80=9Chelper classes=E2=80=9D that they use. \n&gt;=\r\n \n&gt; Under this schema, if any of the DebtLoadLogicLayer=E2=80=99s tests wer=\r\ne to fail, the DebtLoadPresentationLayerTestFixture and the ReporterTestFix=\r\nture would be skipped, and the DebtLoadLogicLayerTestFixture=E2=80=99s test=\r\ns would be highlighted as since they failed. The ConsumerSpendingLogic and =\r\nPresentaionLayerTestFixtures would be run along with their analogues in Inc=\r\nome as they do not depend upon the DebtLoadLogicLayer and report any errors=\r\n found as described above. As another example, if any of Consumer=E2=80=99s=\r\n tests fail, then nearly the entire tree would be skipped (all of the n-tie=\r\nr code plus the Reporter), thus showing only a failure in Consumer and mayb=\r\ne a failure in some other helper classes. In other words, you very quickly =\r\nfind the lowest level class where a failure occurred before it can percolat=\r\ne up through your test suite. This would greatly simplify life when running=\r\n regression suites as the class that caused the error (along with its devel=\r\noper, hopefully) is easy identifiable. \n&gt; \n&gt; The major value-add of this ap=\r\nproach is that you get most of the benefits of dependency trees without the=\r\n hassle of maintaining thousands of dependency links. The class relationshi=\r\nps above are rarely going to change=E2=80=94in other words, if the logic la=\r\nyer stops depending upon the data layer, you=E2=80=99ve probably rearchitec=\r\nted the system and are already being careful about what you are doing=E2=80=\r\n=94and the annotations are very easy to write. Also, due to the hierarchica=\r\nl nature of the dependencies, you do have a bit of a safety net: if a Logic=\r\n Layer forgets to claim a helper class dependency, but that Logic Layer=E2=\r\n=80=99s Data Layer does claim that dependency, then the Logic Layer=E2=80=\r\n=99s tests are still skipped when the helper class fails. \n&gt; \n&gt; The biggest=\r\n shortcoming of this approach involves situations where you have lots of cl=\r\nasses that all depend upon one helper class: for example, if we had thirty =\r\nindices, we would have to maintain thirty annotations for each helper class=\r\n on each data layer, thus requiring more maintenance to track the dependenc=\r\ny. Another negative is that a single failing test in your test fixture coul=\r\nd skip over 95% of your tests since this information is stored on a class r=\r\nather than method level. However, the maintenance costs are much lower, and=\r\n the method dependencies could be added later if we are smart about our fra=\r\nmework. \n&gt; \n&gt; How does that sound? \n&gt; \n&gt; Thank you, \n&gt; \n&gt; Rocco \n&gt; \n&gt; From:=\r\n junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of Kent Bec=\r\nk \n&gt; Sent: Tuesday, January 05, 2010 1:07 PM \n&gt; To: junit@yahoogroups.com \n=\r\n&gt; Subject: Re: [junit] Order of execution for tests \n&gt; \n&gt; \n&gt; \n&gt; Could you p=\r\nrovide a concrete example so I&#39;m sure I understand what you&#39;re saying? \n&gt; \n=\r\n&gt; Thanks, \n&gt; \n&gt; Kent \n&gt; \n&gt; On Jan 5, 2010, at 8:21 AM, Pigneri, Rocco wrote=\r\n: \n&gt; \n&gt; &gt; Dear all, \n&gt; &gt; \n&gt; &gt; An interesting 80-20 solution for this scenar=\r\nio could be something as simple as an attribute indicating that a test fixt=\r\nure depends upon the passing of all tests in another fixture. This would al=\r\nlow for failure scenarios to be on the scale of C=C3=A9dric=E2=80=99s =E2=\r\n=80=9C10 tests failed=E2=80=9D for James=E2=80=99s large regression suite w=\r\nithout requiring a lot of effort from the user-developers. What makes this =\r\nparticularly nice in my mind is that you only have to change these dependen=\r\ncies when you rearchitect the system, thus making them rather light on the =\r\nmaintenance side. \n&gt; &gt; \n&gt; &gt; What do you all think? \n&gt; &gt; \n&gt; &gt; Rocco \n&gt; &gt; \n&gt; =\r\n&gt; From: junit@yahoogroups.com&lt;mailto:junit%40yahoogroups.com&gt; [mailto:junit=\r\n@yahoogroups.com&lt;mailto:junit%40yahoogroups.com&gt;] On Behalf Of James Lee \n&gt;=\r\n &gt; Sent: Monday, January 04, 2010 3:43 PM \n&gt; &gt; To: junit@yahoogroups.com&lt;ma=\r\nilto:junit%40yahoogroups.com&gt; \n&gt; &gt; Subject: Re: [junit] Order of execution =\r\nfor tests \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; Or in my case, something like this: \n&gt; &gt; \n&gt; &gt;=\r\n 1 test failed, 585 tests skipped (how it would have looked in a recent tes=\r\nt \n&gt; &gt; run). \n&gt; &gt; \n&gt; &gt; Our suite has well over 5000 tests and couple dozen =\r\ndevelopers all \n&gt; &gt; adding/changing in parallel. \n&gt; &gt; \n&gt; &gt; Luckily we use a=\r\n continuous integration environment, so get a small set of \n&gt; &gt; changes for=\r\n every run (run the tests every 2hrs). So it can usually be \n&gt; &gt; tracked do=\r\nwn in 20-30m of work. But it would be almost instant if there was \n&gt; &gt; a &quot;c=\r\nore&quot; test that failed first. Or even if it wasn&#39;t perfect, like: 25 \n&gt; &gt; te=\r\nsts failed, 585 tests skipped. \n&gt; &gt; \n&gt; &gt; Gets much worse when the folks wat=\r\nching the builds are busy, as it can fail \n&gt; &gt; for long enough to cloud the=\r\n build history, as failure states start to \n&gt; &gt; overlap. \n&gt; &gt; \n&gt; &gt; Just thr=\r\nowing in the, &quot;Crazy large test suite&quot; perspective. \n&gt; &gt; \n&gt; &gt; Regards, \n&gt; &gt;=\r\n James Lee \n&gt; &gt; \n&gt; &gt; 2010/1/4 C=C3=A9dric Beust =E2=99=94 &lt;cbeust@...=\r\nm&lt;mailto:cbeust%40google.com&gt;&lt;mailto:cbeust%40google.com&gt;&gt; \n&gt; &gt; \n&gt; &gt; &gt; \n&gt; &gt;=\r\n &gt; \n&gt; &gt; &gt; On Mon, Jan 4, 2010 at 11:25 AM, Charlie Poole \n&gt; &gt; &gt; &lt;charlie@po=\r\noleconsulting.com&lt;mailto:charlie%40pooleconsulting.com&gt;&lt;mailto:charlie%40po=\r\noleconsulting.com&gt; &lt;charlie%40pooleconsulting.com&gt;&gt;wrote: \n&gt; &gt; &gt; \n&gt; &gt; &gt; &gt; A=\r\nnd yet, I get reports of other folks having this interpretation \n&gt; &gt; &gt; &gt; pr=\r\noblem all the time. It may be that the problem lies in how they \n&gt; &gt; &gt; &gt; ar=\r\ne doing their development. \n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; \n&gt; &gt; &gt; I don&#39;t think so, it&#39;s ju=\r\nst that \n&gt; &gt; &gt; \n&gt; &gt; &gt; &quot;1 test failed, 9 tests skipped&quot; \n&gt; &gt; &gt; \n&gt; &gt; &gt; is muc=\r\nh easier to read and diagnose than \n&gt; &gt; &gt; \n&gt; &gt; &gt; &quot;10 tests failed&quot;. \n&gt; &gt; &gt; =\r\n\n&gt; &gt; &gt; -- \n&gt; &gt; &gt; ***C=C3=A9dric \n&gt; &gt; &gt; * \n&gt; &gt; &gt; \n&gt; &gt; &gt; [Non-text portions o=\r\nf this message have been removed] \n&gt; &gt; &gt; \n&gt; &gt; &gt; \n&gt; &gt; &gt; \n&gt; &gt; \n&gt; &gt; [Non-text =\r\nportions of this message have been removed] \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; [Non-text portio=\r\nns of this message have been removed] \n&gt; &gt; \n&gt; &gt; \n&gt; \n&gt; [Non-text portions of=\r\n this message have been removed] \n&gt; \n&gt; \n&gt; [Non-text portions of this messag=\r\ne have been removed]\n&gt; \n&gt; \n\n\n\n[Non-text portions of this message have been =\r\nremoved]\n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 22219, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 22265, 
    "contentTrasformed": false, 
    "postDate": "1262808172", 
    "canDelete": false, 
    "nextInTopic": 22267, 
    "prevInTopic": 22265, 
    "headers": {
        "inReplyToHeader": "PDgxRkI0OTFFRUY1RUEzNEY5N0ZGNzA2QUMxQUIzNTYzMTRFNkUzMjQ1NkBib3N0b24tbWFpbC5sYXZhc3Rvcm0ubG9jYWwuY29tPg==", 
        "messageIdInHeader": "PEIxMEVBODQxLUEzQzItNDcwNC1BQTIzLUIxOTMxNjE3MjA1Q0BlYXJ0aGxpbmsubmV0Pg==", 
        "referencesHeader": "PEMwQThEMTBELTJDQjktNDBBNC1BQ0M2LTQyN0RCNkE1RDY2MEBlYXJ0aGxpbmsubmV0PiA8MDAzMzAxY2E4ZDczJGJkMjQyYWUwJDY0MDFhOGMwQGZlcnJhcmk+IDxiODZiNmE5YzEwMDEwNDExMjhwMzU1OGZlMzd5Y2I3ZjRmZWJjOWI1MDlhMEBtYWlsLmdtYWlsLmNvbT4gPDRkZDVhNDZjMTAwMTA0MTI0MnQ0ODMwZmM0Zmk0ZDk3ZDg3MWU2NWNiOWE2QG1haWwuZ21haWwuY29tPiA8ODFGQjQ5MUVFRjVFQTM0Rjk3RkY3MDZBQzFBQjM1NjMxNEU2RDEzMDRFQGJvc3Rvbi1tYWlsLmxhdmFzdG9ybS5sb2NhbC5jb20+IDwxMDNDMUM1RS03OUI2LTRCNEYtOTBFNy03MjE4Qzk2MDA2OTFAZWFydGhsaW5rLm5ldD4gPDgxRkI0OTFFRUY1RUEzNEY5N0ZGNzA2QUMxQUIzNTYzMTRFNkUzMjQ1NkBib3N0b24tbWFpbC5sYXZhc3Rvcm0ubG9jYWwuY29tPg=="
    }
}