{
    "numMessagesInTopic": 19, 
    "nextInTime": 19921, 
    "senderId": "Byw08AoiDFzLISHrAni1w4U7Ou6PGfzvpXnccOt9hANxdYpLvxbDb42FM_cDeAZOJzxL-8xRRDdDD6O8uz0dnjJVTEwfV5zh", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: How to change dynamically (runtime) the classpath for a given test", 
    "from": "&quot;Nat Pryce&quot; &lt;nat.pryce@...&gt;", 
    "authorName": "Nat Pryce", 
    "msgSnippet": "Here s a simple solution that will not lead you into dynamic class-loading class-path hell... Create a directory in your project.  Check that directory into", 
    "msgId": 19920, 
    "rawEmail": "Return-Path: &lt;nat.pryce@...&gt;\r\nX-Sender: nat.pryce@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 80464 invoked from network); 23 Sep 2007 19:25:47 -0000\r\nReceived: from unknown (69.147.108.200)\n  by m41.grp.scd.yahoo.com with QMQP; 23 Sep 2007 19:25:47 -0000\r\nReceived: from unknown (HELO an-out-0708.google.com) (209.85.132.240)\n  by mta1.grp.re1.yahoo.com with SMTP; 23 Sep 2007 19:25:46 -0000\r\nReceived: by an-out-0708.google.com with SMTP id b15so279380ana\n        for &lt;junit@yahoogroups.com&gt;; Sun, 23 Sep 2007 12:25:29 -0700 (PDT)\r\nReceived: by 10.100.96.9 with SMTP id t9mr9068129anb.1190575528825;\n        Sun, 23 Sep 2007 12:25:28 -0700 (PDT)\r\nReceived: by 10.70.41.3 with HTTP; Sun, 23 Sep 2007 12:25:28 -0700 (PDT)\r\nMessage-ID: &lt;17fa53d0709231225y2c0d56f8t77e3e469d7a0fa3d@...&gt;\r\nDate: Sun, 23 Sep 2007 20:25:28 +0100\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;fd5qdi+tat5@...&gt;\r\nMIME-Version: 1.0\r\nReferences: &lt;3975e2d10709210015o5e3d8e97i4185d7bdf4a4d592@...&gt;\n\t &lt;fd5qdi+tat5@...&gt;\r\nX-eGroups-Msg-Info: 2:4:8:0:2\r\nFrom: &quot;Nat Pryce&quot; &lt;nat.pryce@...&gt;\r\nSubject: Re: [junit] Re: How to change dynamically (runtime) the classpath for a given test\r\nX-Yahoo-Group-Post: member; u=216973656; y=mF_GkIqcsAkdGwlaz3YUJNsUlivAN_QpMIr0A8WaIEsgQsIH\r\nX-Yahoo-Profile: nat_pryce\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nHere&#39;s a simple solution that will not lead you into dynamic class-loading\nclass-path hell...\n\nCreate a directory in your project.  Check that directory into your\nproject&#39;s source repository.  Stick an unused readme file in there if your\nsource control system does not check out empty directories.  Ensure that\ndirectory is on the classpath.  If it is not on the classpath, fail the\ntest.\n\nCreate project files for your IDE that has that directory on the classpath.\n\nCreate a &quot;golden build&quot;, using Ant or some other widely used build tool,\nthat will reliably and repeatably build your software.  The golden build is\nthe *only* build that is used to create release packages.  Developers should\nnot be running pre-commit tests using anything but the configuration in the\ngolden build.  They must definitely not be creating release packages using\nanything but the golden build in a separate integration environment.\n\nIn the golden build, put that directory on the classpath.\n\nIf programmers want to use unsupported IDEs, they need to configure their\nproject to put that directory on the classpath.  If they don&#39;t, the test you\ncreated will fail and tell them to do so.\n\nEnsure that the failure message generated by the test when that directory is\nnot on the classpath is very clear about what has gone wrong and what the\ndeveloper needs to do to fix it.\n\n--Nat\n\nOn 23/09/2007, David &lt;achepati67@...&gt; wrote:\n&gt;\n&gt;   --- In junit@yahoogroups.com &lt;junit%40yahoogroups.com&gt;, &quot;Lasse Koskela&quot;\n&gt; &lt;lasse.koskela@...&gt;\n&gt; wrote:\n&gt; &gt;\n&gt; &gt; Hi David,\n&gt; &gt;\n&gt; &gt; On 9/21/07, David &lt;achepati67@...&gt; wrote:\n&gt; &gt; &gt; Thanks for your reply, but you are assuming to much, because you\n&gt; &gt; &gt; have to modify the classpath by hand. For example under eclipse\n&gt; the\n&gt; &gt; &gt; current folder (.) is not on the classpath, so you have addapt\n&gt; the\n&gt; &gt; &gt; test to the IDE configuration. I know this can be done very easy\n&gt; &gt; &gt; using Ant, but I don&#39;t want to impose to use such tools for this\n&gt; &gt; &gt; particular example.\n&gt; &gt;\n&gt; &gt; Actually, I don&#39;t need to modify the classpath by hand because\n&gt; under\n&gt; &gt; Eclipse the source folders are in the class path. For example, you\n&gt; can\n&gt; &gt; do the following successfully in your tests:\n&gt; &gt;\n&gt; &gt; getClass().getResource(&quot;/com/acme/stuff/testdata.txt&quot;);\n&gt; &gt;\n&gt; &gt; ...which will give you access to the testdata.txt file you&#39;ve\n&gt; placed\n&gt; &gt; under your source directory:\n&gt; &gt;\n&gt; &gt; ${basedir}/src/com/acme/stuff/testdata.txt\n&gt; &gt;\n&gt; &gt; Or maybe I misunderstood what you meant?\n&gt;\n&gt; Dear Lasse,\n&gt;\n&gt; I have the opossite problem, I would like to create a file during\n&gt; the testing process on some place on the classpath. What I would\n&gt; like is to know for sure a place that will be always on classpath\n&gt; (such place doesn&#39;t exist, it depends on IDE&#39;s). After the test I\n&gt; will delete the file. Becuse, there is no universal place that will\n&gt; be always on classpath, another solution would be to add a place\n&gt; dinamycally on classpath during the test, that was the reason of my\n&gt; original post.\n&gt;\n&gt; Your suggestion requires to have at the begining of the test to have\n&gt; a certain file on the classpath. Such information you have assuming\n&gt; you are using Eclipse IDE, because the source files are on\n&gt; classpath, but you have to assume that some particular folders are\n&gt; on classpath.\n&gt;\n&gt; I show you now on my test (it works because I assume\n&gt; System.getProperty(&quot;user.dir&quot;)/bin in on classpath. What I prefer is\n&gt; to add location (dinamycally) of: System.getProperty\n&gt; (&quot;java.io.tmpdir&quot;) on classpath,\n&gt; then create a file and at the end of execution to set the classpath\n&gt; into original value and also delete the temporary file.\n&gt;\n&gt; public class TestFileUtils extends TestCase {\n&gt;\n&gt; final String testFileName = &quot;fileInClassPath.txt&quot;;\n&gt;\n&gt; final String parent = &quot;bin&quot;;\n&gt;\n&gt; final static File TMP_DIR = new File(&quot;bin&quot;);\n&gt;\n&gt; /**\n&gt; * {@link com.b2b2000.FileUtils#findFileInClasspath\n&gt; (java.lang.String)}.\n&gt; *\n&gt; * Note: We assume: {@linkplain System#getProperty(String)\n&gt; System.getProperty(&quot;user.dir&quot;)/bin} is on &lt;code&gt;classpath&lt;/code&gt;.\n&gt; *\n&gt; */\n&gt; public void testFindFileInClasspath() throws Exception {\n&gt; File newFile = new File(TMP_DIR, testFileName);\n&gt; newFile.createNewFile();\n&gt; modifyClasspath();\n&gt; File foundFile = FileUtils.findFileInClasspath(testFileName);\n&gt; assertEquals(newFile.getAbsoluteFile(),\n&gt; foundFile.getAbsoluteFile());\n&gt; }\n&gt;\n&gt; protected void setUp() throws Exception {\n&gt; modifyClasspath();\n&gt; File newFile = new File(TMP_DIR, testFileName);\n&gt; if (newFile.exists()) {\n&gt; if (!newFile.delete()) {\n&gt; throw new FileNotFoundException(newFile.toString());\n&gt;\n&gt; }\n&gt; }\n&gt; super.setUp();\n&gt; }\n&gt;\n&gt; protected void tearDown() throws Exception {\n&gt; File file = new File(TMP_DIR, testFileName);\n&gt; file.deleteOnExit();\n&gt; super.tearDown();\n&gt; }\n&gt; }\n&gt;\n&gt; Thanks in advance,\n&gt;\n&gt; David\n&gt;\n&gt; &gt;\n&gt; &gt; Lasse\n&gt; &gt;\n&gt; &gt; --\n&gt; &gt; Lasse Koskela\n&gt; &gt; * Author of &quot;Test Driven&quot; (Manning Publications, 2007) *\n&gt; &gt; * Reaktor Innovations * http://www.ri.fi/en *\n&gt; &gt;\n&gt;\n&gt;  \n&gt;\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "nat_pryce", 
    "topicId": 19905, 
    "spamInfo": {
        "reason": "4", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 216973656, 
    "prevInTime": 19919, 
    "contentTrasformed": false, 
    "postDate": "1190575528", 
    "canDelete": false, 
    "nextInTopic": 19921, 
    "prevInTopic": 19919, 
    "headers": {
        "inReplyToHeader": "PGZkNXFkaSt0YXQ1QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDE3ZmE1M2QwNzA5MjMxMjI1eTJjMGQ1NmY4dDc3ZTNlNDY5ZDdhMGZhM2RAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDM5NzVlMmQxMDcwOTIxMDAxNW81ZTNkOGU5N2k0MTg1ZDdiZGY0YTRkNTkyQG1haWwuZ21haWwuY29tPgkgPGZkNXFkaSt0YXQ1QGVHcm91cHMuY29tPg=="
    }
}