{
    "topicId": 1308, 
    "postDate": "991422051", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "ghouston@...", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "e9k4vDJLPS-XhCDY-dssKv9A48fl6jm8m4Q55sw6TxHxXr5hhOW95EoVem7OO_A0J1JMVhryWw", 
    "nextInTime": 1374, 
    "userId": 0, 
    "prevInTime": 1372, 
    "prevInTopic": 1370, 
    "headers": {
        "inReplyToHeader": "PDI5Qzg0Q0YyNUQwM0Q1MTE5RkNGMDA5MDI3QjY3QjVBNzQwNzZDQEVYQ0hBTkdFMT4=", 
        "messageIdInHeader": "PDlmOG9wMys2ZzA5QGVHcm91cHMuY29tPg=="
    }, 
    "authorName": "ghouston@iss.net", 
    "numMessagesInTopic": 17, 
    "msgSnippet": "I also have the requirement that I don t have any test code in my production code.  This also means I don t change the code just to enable testing.", 
    "contentTrasformed": false, 
    "msgId": 1373, 
    "nextInTopic": 1374, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;ghouston@...&gt;\r\nX-Sender: ghouston@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_1_3); 1 Jun 2001 19:02:01 -0000\r\nReceived: (qmail 45537 invoked from network); 1 Jun 2001 19:00:57 -0000\r\nReceived: from unknown (10.1.10.26) by m8.onelist.org with QMQP; 1 Jun 2001 19:00:57 -0000\r\nReceived: from unknown (HELO hl.egroups.com) (10.1.10.44) by mta1 with SMTP; 1 Jun 2001 19:00:56 -0000\r\nX-eGroups-Return: ghouston@...\r\nReceived: from [10.1.10.97] by hl.egroups.com with NNFMP; 01 Jun 2001 19:00:55 -0000\r\nDate: Fri, 01 Jun 2001 19:00:51 -0000\r\nTo: junit@yahoogroups.com\r\nSubject: Method Chains, was Re: Testing private methods\r\nMessage-ID: &lt;9f8op3+6g09@...&gt;\r\nIn-Reply-To: &lt;29C84CF25D03D5119FCF009027B67B5A74076C@EXCHANGE1&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 3881\r\nX-Mailer: eGroups Message Poster\r\nFrom: ghouston@...\r\n\r\nI also have the requirement that I don&#39;t have any test code in my \nproduction code.  This also means I don&#39;t change the code just to \nenable testing.  (Test-first design has resulted in better designs \nwithout compromising the integrity of the code)\n\nIf you are reluctant to change your code just so you can test it, you \nshould consider #2, #3 and #5.  With Reflection (#2), your production \ncode stays the same, the test code just modifies it at run-time to \ninstall the Mock objects.  With #3, the subclasses could exist \ncompletely in your testcode.  Your production code would remain the \nsame.  With Dynamic Proxies (#5), the proxy is created at run-time so \nyour production code is never modified.\n\n- Greg\n\n\n\n--- In junit@y..., Matt Caswell &lt;m.caswell@h...&gt; wrote:\n&gt; Very interesting. It seems to me that you could use 1-5 in certain\n&gt; circumstances. However I think I would be reluctant to change the \nway my\n&gt; code was implemented just so that I could test it, as some of the \nother\n&gt; posts on this topic have suggested you should do. Option 6 looks \nlike it\n&gt; could have a lot of potential - I would think it would work in \nalmost all\n&gt; scenarios without requiring that you write your implementation code \nin a\n&gt; specifc way. I agree - it definately looks like a fun thing to try \nand do!\n&gt; \n&gt; Matt\n&gt; \n&gt; -----Original Message-----\n&gt; From: ghouston@i...\n&gt; To: junit@y...\n&gt; Sent: 01/06/01 14:41\n&gt; Subject: [junit] Method Chains, was Re: Testing private methods\n&gt; \n&gt; \n&gt; There are several was to get Mock objects into your production code:\n&gt; \n&gt; 1. Parameters \n&gt; \n&gt; As Mr Freeman shows, you use parameters to pass the Mock into the \n&gt; class that calls it.\n&gt; \n&gt; 2 Reflection\n&gt; \n&gt; If B is referenced in a field of A, you can use reflection to \nmodify \n&gt; A and replace B with it&#39;s Mock.\n&gt; \n&gt; 3 Mole Pattern\n&gt; \n&gt; Subclass A, and use the subclass to setup the Mock.  [I call this \n&gt; design the &quot;Mole Pattern&quot;]\n&gt; \n&gt; 4 Strategy Pattern\n&gt; \n&gt; Use a Strategy design pattern.\n&gt; \n&gt; 5 Dynamic Proxy\n&gt; \n&gt; If the B is an implementation of an Interface, you can use a \nDynamic \n&gt; Proxy (new feature of Java 1.3b).  The Mock would be an \n&gt; InvocationHandler, instead of a twin of B.\n&gt; \n&gt; 6 Classloader\n&gt; \n&gt; Use a classloader to load the Mock instead of the real class.\n&gt; \n&gt; ---\n&gt; \n&gt; There may be other options, but these are the ones I&#39;ve heard of.  \n&gt; Personally, I&#39;ve used everything except #6.  Options #1 \n(parameters) \n&gt; and #2 (reflection) are my favorites.  They are usually the easiest \n&gt; to implement and understand.  For #2, I&#39;ve used the \n&gt; PrivilegedAccessor.java [posted by Mr DiIorio] to make the \nreflection \n&gt; work simple.\n&gt; \n&gt; I&#39;ve never seen anyone use #6 (classloaders), I think it would be \nfun \n&gt; to try.\n&gt; \n&gt; - Greg\n&gt; \n&gt; \n&gt; --- In junit@y..., &quot;Steve Freeman&quot; &lt;steve@m...&gt; wrote:\n&gt; &gt; RE: Method Chains, was Re: Testing private methodsAlternatively, \n&gt; &gt; change from:\n&gt; &gt; \n&gt; &gt; public class A {\n&gt; &gt;   public void f() {\n&gt; &gt;     b = new B();\n&gt; &gt;     b.doSomething();\n&gt; &gt;   }\n&gt; &gt; }\n&gt; &gt; \n&gt; &gt; to:\n&gt; &gt; \n&gt; &gt; public class A {\n&gt; &gt;   public void f(B b) {\n&gt; &gt;     b.doSomething(aValue());\n&gt; &gt;   }\n&gt; &gt; }\n&gt; &gt; \n&gt; &gt; The test then becomes:\n&gt; &gt; \n&gt; &gt; public class TestA {\n&gt; &gt;   public void testF() {\n&gt; &gt;     A anA = new A(aValue);\n&gt; &gt;     MockB mockB = new MockB();\n&gt; &gt;     mockB.setExpectedSomething(aValue);\n&gt; &gt; \n&gt; &gt;     a.f(mockB);\n&gt; &gt; \n&gt; &gt;     mockB.verify();\n&gt; &gt;   }\n&gt; &gt; }\n&gt; &gt; \n&gt; &gt; We have found that changing to a style where you pass behaviours \n&gt; around, rather than data, avoids things like subclassing production \n&gt; code in a test and pushes the code to flexing in the &#39;right&#39; kinda \n&gt; ways. If you can figure out what to pass in and what to verify, \nthen \n&gt; the rest of the test usually falls out.\n&gt; &gt; \n&gt; &gt; Steve\n&gt; \n&gt; \n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@y...\n&gt;  \n&gt; \n&gt; Your use of Yahoo! Groups is subject to\n&gt; http://docs.yahoo.com/info/terms/\n\n\n", 
    "subject": "Method Chains, was Re: Testing private methods"
}