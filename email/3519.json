{
    "numMessagesInTopic": 14, 
    "nextInTime": 3520, 
    "senderId": "iN0NoJQsiY_ke3yHpVPuxf2z1MbjDiv2JfPqKL-srzyEtKTTGybGGwNoaZNbjFT2LxsGBB8gnI8AkrqArYM4zlbEusEFHxzg9A", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing Static class behavior", 
    "from": "&quot;Thomas SMETS&quot; &lt;tsmets@...&gt;", 
    "authorName": "Thomas SMETS", 
    "msgSnippet": "Nope Bwana I m not gonna make a fool of myself in public that way... ... I ve taken the day to rewrite my code & made the constructor definitively public. the", 
    "msgId": 3519, 
    "profile": "smetsthomas", 
    "topicId": 3503, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 20361908, 
    "messageBody": "<div id=\"ygrps-yiv-1148643414\">\n<html><head>\n \n \n<style></style>\n</head>\n \n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">Nope Bwana</font></div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">I&#39;m not gonna make a fool of \nmyself in public that way...</font></div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">:-))</font></div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">I&#39;ve taken the day to rewrite \nmy code </font></div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">&amp; made the constructor \ndefinitively public.</font></div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">the plight in all these is \nthe time I&#39;ve taken to </font></div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">write nice code but not nice \nenough...</font></div>\n<div>&nbsp;</div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">Tx for the profitable \nday,</font></div>\n<div>&nbsp;</div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">Thomas,</font></div>\n<div>&nbsp;</div>\n<div>&nbsp;</div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">p.s. :</font></div>\n<div><font color=\"#008080\" face=\"Courier New\" size=\"2\">I&#39;m still wandering how to \nmake the docs appropriate to have the people knowing they should try to talk to \nthe factory rather that the class to have the complete Thread safe behavior. \nWill start with @see ...</font></div>\n<div>&nbsp;</div>\n<div>&nbsp;</div>\n<blockquote><span title=\"qreply\"> <blockquote\n style=\"BORDER-LEFT:#008080 2px solid;MARGIN-LEFT:5px;MARGIN-RIGHT:0px;PADDING-LEFT:5px;PADDING-RIGHT:0px;\">\n  <div style=\"FONT:10pt arial;\">----- Original Message ----- </div>\n  <div\n style=\"BACKGROUND:#e4e4e4;FONT:10pt arial;\"><b>From:</b> \n  <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jbr@...\" title=\"jbr@...\">J. B. \n  Rainsberger</a> </div>\n  <div style=\"FONT:10pt arial;\"><b>To:</b> <a rel=\"nofollow\"\n target=\"_blank\" href=\"mailto:junit@yahoogroups.com\"\n title=\"junit@yahoogroups.com\">junit@yahoogroups.com</a> </div>\n  <div style=\"FONT:10pt arial;\"><b>Sent:</b> Tuesday, December 11, 2001 12:32 \n  AM</div>\n  <div style=\"FONT:10pt arial;\"><b>Subject:</b> Re: [junit] Testing Static class \n  behavior</div>\n  <div><br></div><tt>Thomas:<br><br>A simple solution: don&#39;t make this a \n  singleton. Open up the constructor <br>(make it public); it should probably \n  just have some dummy data. Maybe <br>even make a constructor that takes a Map \n  of pre-populated database <br>objects, just for testing.<br><br>If your \n  application needs only one DataServer, then let the application <br>create an \n  instance and hang onto it in a toolbox. Nobody else cares how <br>many \n  instances of the DataServer there are, because your application <br>will \n  simply talk to the one in its toolbox.<br><br>If you have components that \n  shouldn&#39;t be talking to the application <br>toolbox to get a Data object, then \n  see if you can change the design so <br>that the application hands Data \n  objects to the components instead. <br>Simply sit on the other side of the \n  table and get a new view. You might <br>prefer the view from that side. \n  :)<br><br>JBR.<br><br>PS: If you still think this object should be a \n  singleton, I want you to <br>prove to me in this group that your singleton \n  passes my criteria for <br>&quot;when it really is a singleton&quot;. :)<br><br>Thomas \n  SMETS wrote:<br><br>&gt; hi Mike,<br>&gt;<br>&gt; Like often I can only thank \n  you.<br>&gt;<br>&gt; I dived into the article.<br>&gt;<br>&gt; Just a word on \n  the usage I make of the Singelton Pattern.<br>&gt;<br>&gt; The Developper \n  assignement I received is the one of the airlain <br>&gt; reservation ticket. \n  The DataBase should serve multiple-clients.<br>&gt;<br>&gt; Without altering \n  the source code of the constructor provided, I added <br>&gt; the following \n  factory :<br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt; \n  &lt;code&gt;<br>&gt;<br>&gt;&nbsp;&nbsp; public static Data getDatabase(String \n  aDBName)<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; throws \n  IOException,<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n  DatabaseException<br>&gt;&nbsp;&nbsp; {<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; // \n  First find the absolute path of the file.<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; File \n  f = new File(aDBName);<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; aDBName = \n  f.getAbsolutePath ();<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Data db = \n  null;<br>&gt;&nbsp;&nbsp;&nbsp; <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; // Check if \n  we still have a reference to<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; // the DB in the \n  HashpMap<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  synchronized(DataBaseReferenced)<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  {<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if \n  (DataBaseReferenced.containsKey \n  (aDBName))<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n  {<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; db = \n  (Data)DataBaseReferenced.get \n  (aDBName);<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (db != \n  null)<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n  return db;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n  }<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n  <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; db = new \n  Data(aDBName);<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n  DataBaseReferenced.put (aDBName, db);&nbsp;&nbsp;&nbsp;&nbsp; \n  <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; } // End of synchronized \n  element<br>&gt;&nbsp;&nbsp;&nbsp; <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; return \n  db;<br>&gt;&nbsp;&nbsp; }<br>&gt;<br>&gt; &lt;/code&gt;<br>&gt;<br>&gt;&nbsp; \n  <br>&gt;<br>&gt; where the Key (should be a primary key) is the file name \n  (absolute <br>&gt; path). The DataBaseReferenced is in fact a WeakHashMap with \n  the Data <br>&gt; Object being stored as the value - \n  Object.<br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt; Any comment on the Pattern \n  used, is most appreciated.<br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt; \n  Thomas,<br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; \n  <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; \n  <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; \n  <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; \n  <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; \n  <br>&gt;<br>&gt;&nbsp; <br>&gt;<br>&gt;&nbsp; \n  <br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; ----- Original Message \n  -----<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; From:Mike Clark \n  &lt;mailto:mike@...&gt;<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; To: \n  junit@yahoogroups.com \n  &lt;mailto:junit@yahoogroups.com&gt;<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  Sent: Sunday, December 09, 2001 11:42 \n  PM<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Subject: Re: [junit] Testing Static \n  class behavior<br>&gt;<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Thomas SMETS \n  wrote:<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &gt; \n  Hi,<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &gt; I&#39;m currently testing a Class \n  behavior onto which the<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &gt; Factory \n  (getInstance(param1, param2, ...)) is playing a \n  crucial<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; role.<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  &gt; That is the class has some sort of a Singelton pattern \n  where<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; existing<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  &gt; reference for the singelton factory are used to determine if \n  a<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; reference to<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  &gt; a particula instance already exists.<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  &gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &gt; I therefore would need to regerister \n  the class to have the static<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &gt; \n  variablebeing re-initialized. I there something in Java \n  ?<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &gt;<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  Hi Thomas,<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Depending on the \n  implementation of the singleton you&#39;re \n  attempting<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; to test, \n  it<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; may be possible to obtain a reference to \n  its sole instance (or<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; instances) \n  and<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; assign it a null value.&nbsp; If the \n  implementation uses lazy<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; initialization, \n  this<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; may trigger reinitialization on the next \n  invocation of getInstance().<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; If you \n  haven&#39;t already read J.B. Rainsberger&#39;s article on the use \n  and<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; testability of singletons, I highly \n  recommend it:<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n  <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; <a rel=\"nofollow\"\n target=\"_blank\" href=\"http://www-106.ibm.com/developerworks/webservices/library/co-single.html\">http://www-106.ibm.com/developerworks/webservices/library/co-single.html</a><br>&gt;<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  In general, singletons are often overused and can be difficult \n  to<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; test, and<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  J.B.&#39;s article offers some practical \n  alternatives.<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  Regards,<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  Mike<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  --<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Mike Clark<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  Clarkware Consulting, Inc.<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; <a rel=\"nofollow\"\n target=\"_blank\" href=\"http://www.clarkware.com\">http://www.clarkware.com</a><br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  720.851.2014<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  To unsubscribe from this group, send an email \n  to:<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  junit-unsubscribe@yahoogroups.com<br>&gt;<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; \n  Your use of Yahoo! Groups is subject to the Yahoo! Terms \n  of<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Service &lt;<a rel=\"nofollow\"\n target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt; \n  .<br>&gt;<br>&gt;<br>&gt; Yahoo! Groups Sponsor<br>&gt; ADVERTISEMENT<br>&gt; \n  &lt;<a rel=\"nofollow\"\n target=\"_blank\" href=\"http://rd.yahoo.com/M=178320.1681224.3270152.1261774/D=egroupweb/S=1705007181:HM/A=879171/R=0/*http://www.fastweb.com/ib/yahoo-57f\">http://rd.yahoo.com/M=178320.1681224.3270152.1261774/D=egroupweb/S=1705007181:HM/A=879171/R=0/*http://www.fastweb.com/ib/yahoo-57f</a>&gt; \n  <br>&gt;<br>&gt;<br>&gt;<br>&gt; To unsubscribe from this group, send an email \n  to:<br>&gt; junit-unsubscribe@yahoogroups.com<br>&gt;<br>&gt;<br>&gt; Your use \n  of Yahoo! Groups is subject to the Yahoo! Terms of Service <br>&gt; &lt;<a rel=\"nofollow\"\n target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a>&gt; \n  .<br><br><br></tt><br><br><tt>To \n  unsubscribe from this group, send an email \n  to:<br>junit-unsubscribe@yahoogroups.com<br></tt><br><br><tt>Your use of \n  Yahoo! Groups is subject to the <a rel=\"nofollow\"\n target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">Yahoo! Terms of Service</a>.</tt> \n<br></blockquote></span></blockquote></html> \n</div>", 
    "prevInTime": 3518, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1008030854", 
    "canDelete": false, 
    "nextInTopic": 3520, 
    "prevInTopic": 3518, 
    "headers": {
        "messageIdInHeader": "PDAwYzkwMWMxODFkZSQ4ZDBiZDQxMCQ5M2VlNDRkNEBwbG9wPg==", 
        "referencesHeader": "PDAwM2IwMWMxODEwMSQ4NDcxMWI0MCQ5M2VlNDRkNEBwbG9wPiA8M0MxM0U4RDAuNjdBMjg2MEBjbGFya3dhcmUuY29tPiA8MDBlZTAxYzE4MTZjJDY5MDc0NjIwJDkzZWU0NGQ0QHBsb3A+IDwzQzE1NDYwQS41MDMwNDA5QGRpYXNwYXJzb2Z0d2FyZS5jb20+"
    }
}