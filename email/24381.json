{
    "numMessagesInTopic": 3, 
    "nextInTime": 24382, 
    "senderId": "LSLwIh2AYQd6zMT8G6mHzmpuf8YuENCAOBljlMVvBjZrZ1V-z2MGBj9Kz15lLEhnOfXMmPE-9rbOClka1eqX5ZqNe95cuV6_WFHt2A", 
    "systemMessage": true, 
    "subject": "Re: JUnit 4.12 issue when using theory + enum type + DataPoint that contains a null", 
    "from": "&quot;willmcqueen&quot; &lt;willmcqueen@...&gt;", 
    "authorName": "willmcqueen", 
    "msgSnippet": "Done: https://github.com/junit-team/junit/issues/673 Thanks, David. Cheers, Will", 
    "msgId": 24381, 
    "profile": "willmcqueen", 
    "topicId": 24378, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 125879749, 
    "messageBody": "<div id=\"ygrps-yiv-1646344051\">Done:<br/>\n     <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit/issues/673\">https://github.com/junit-team/junit/issues/673</a><br/>\nThanks, David.<br/>\n<br/>\nCheers,<br/>\nWill<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, David Saff &lt;saff@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Will,<br/>\n&gt; <br/>\n&gt; I think this is relevant to recent work on theories by @pimterry.  Can you<br/>\n&gt; create a bug on github, and mention @pimterry in the description?  Thanks,<br/>\n&gt; <br/>\n&gt;    David<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; On Wed, May 1, 2013 at 5:59 PM, willmcqueen &lt;willmcqueen@...&gt; wrote:<br/>\n&gt; <br/>\n&gt; &gt; **<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Hi,<br/>\n&gt; &gt;<br/>\n&gt; &gt; I have a Theory with a parameter list that includes a String, a boolean,<br/>\n&gt; &gt; and an enum. The latter 2 should be automatically assigned and should not<br/>\n&gt; &gt; need any explicit @DataPoint declaration (per the release note description<br/>\n&gt; &gt; below. When I run the test, the enum param is assigned the null value<br/>\n&gt; &gt; instead of being assigned each value of the enum, and I&#39;m not sure why this<br/>\n&gt; &gt; is not working for me. I would appreciate any help you can offer, please.<br/>\n&gt; &gt;<br/>\n&gt; &gt; I cloned master from here:<br/>\n&gt; &gt;<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit\">https://github.com/junit-team/junit</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; ...and looked at the JUnit 4.12 release notes:<br/>\n&gt; &gt;<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit/wiki/4.12-release-notes\">https://github.com/junit-team/junit/wiki/4.12-release-notes</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; ...and scrolled-down to pull request #654 which says:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &quot;Any theory method parameters with boolean or enum types that can&#39;t be<br/>\n&gt; &gt; supplied with values by any other sources will be automatically supplied<br/>\n&gt; &gt; with default values: true and false, or every value of the given enum. If<br/>\n&gt; &gt; other explicitly defined values are available (e.g. from a specified<br/>\n&gt; &gt; ParameterSupplier or some DataPoints method in the theory class), only<br/>\n&gt; &gt; those explicitly defined values will be used.&quot;<br/>\n&gt; &gt;<br/>\n&gt; &gt; On that same release notes page, I also see the comment under pull request<br/>\n&gt; &gt; #549, which says that a @DataPoint-annotated array field can contain null<br/>\n&gt; &gt; values.<br/>\n&gt; &gt;<br/>\n&gt; &gt; So here&#39;s my test:<br/>\n&gt; &gt;<br/>\n&gt; &gt; import org.junit.experimental.theories.DataPoints;<br/>\n&gt; &gt; import org.junit.experimental.theories.Theories;<br/>\n&gt; &gt; import org.junit.experimental.theories.Theory;<br/>\n&gt; &gt; import org.junit.runner.RunWith;<br/>\n&gt; &gt;<br/>\n&gt; &gt; @RunWith(Theories.class)<br/>\n&gt; &gt; public class QuickTest {<br/>\n&gt; &gt;<br/>\n&gt; &gt; @DataPoints<br/>\n&gt; &gt; public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;, null};<br/>\n&gt; &gt;<br/>\n&gt; &gt; public static enum JDKS {<br/>\n&gt; &gt; JDK6,<br/>\n&gt; &gt; JDK7,<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; @Theory<br/>\n&gt; &gt; public void testFoo(String platform, boolean truth, JDKS j) throws<br/>\n&gt; &gt; Exception {<br/>\n&gt; &gt; System.out.println(platform + &quot;:&quot; + truth + &quot;:&quot; + j);<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; ...and here&#39;s the output:<br/>\n&gt; &gt; windows:true:null<br/>\n&gt; &gt; windows:false:null<br/>\n&gt; &gt; linux:true:null<br/>\n&gt; &gt; linux:false:null<br/>\n&gt; &gt; null:true:null<br/>\n&gt; &gt; null:false:null<br/>\n&gt; &gt;<br/>\n&gt; &gt; ...which is not what I expected... I expected the 3rd value to be JDK6 or<br/>\n&gt; &gt; JDK7. I run a 2nd test, but this time I remove the null array element from<br/>\n&gt; &gt; the &#39;platforms&#39; field, and the results are expected:<br/>\n&gt; &gt;<br/>\n&gt; &gt; import org.junit.experimental.theories.DataPoints;<br/>\n&gt; &gt; import org.junit.experimental.theories.Theories;<br/>\n&gt; &gt; import org.junit.experimental.theories.Theory;<br/>\n&gt; &gt; import org.junit.runner.RunWith;<br/>\n&gt; &gt;<br/>\n&gt; &gt; @RunWith(Theories.class)<br/>\n&gt; &gt; public class QuickTest {<br/>\n&gt; &gt;<br/>\n&gt; &gt; @DataPoints<br/>\n&gt; &gt; public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;};<br/>\n&gt; &gt;<br/>\n&gt; &gt; public static enum JDKS {<br/>\n&gt; &gt; JDK6,<br/>\n&gt; &gt; JDK7,<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; @Theory<br/>\n&gt; &gt; public void testFoo(String platform, boolean truth, JDKS j) throws<br/>\n&gt; &gt; Exception {<br/>\n&gt; &gt; System.out.println(platform + &quot;:&quot; + truth + &quot;:&quot; + j);<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; ...which results in:<br/>\n&gt; &gt; windows:true:JDK6<br/>\n&gt; &gt; windows:true:JDK7<br/>\n&gt; &gt; windows:false:JDK6<br/>\n&gt; &gt; windows:false:JDK7<br/>\n&gt; &gt; linux:true:JDK6<br/>\n&gt; &gt; linux:true:JDK7<br/>\n&gt; &gt; linux:false:JDK6<br/>\n&gt; &gt; linux:false:JDK7<br/>\n&gt; &gt;<br/>\n&gt; &gt; Cool. But now just for fun, I remove the &#39;platform&#39; param from testFoo and<br/>\n&gt; &gt; I restore the null array element to &#39;platforms&#39; field. Since there is no<br/>\n&gt; &gt; longer any String param in the param list (and since String is a final<br/>\n&gt; &gt; class so there&#39;s no possibility of an assignable subclass), I expect that<br/>\n&gt; &gt; the &#39;platforms&#39; DataPoint will just be silently ignored and I would get the<br/>\n&gt; &gt; expected output. But I actually see the unexpected output, as if a null<br/>\n&gt; &gt; array element that exists in a field (that&#39;s not even used in the Theory&#39;s<br/>\n&gt; &gt; param list) is affecting the values of a totally different type, the enum<br/>\n&gt; &gt; type (causing the enum param to receive only a null value):<br/>\n&gt; &gt;<br/>\n&gt; &gt; import org.junit.experimental.theories.DataPoints;<br/>\n&gt; &gt; import org.junit.experimental.theories.Theories;<br/>\n&gt; &gt; import org.junit.experimental.theories.Theory;<br/>\n&gt; &gt; import org.junit.runner.RunWith;<br/>\n&gt; &gt;<br/>\n&gt; &gt; @RunWith(Theories.class)<br/>\n&gt; &gt; public class QuickTest {<br/>\n&gt; &gt;<br/>\n&gt; &gt; @DataPoints<br/>\n&gt; &gt; public static String[] platforms = new String[]{&quot;windows&quot;, &quot;linux&quot;, null};<br/>\n&gt; &gt;<br/>\n&gt; &gt; public static enum JDKS {<br/>\n&gt; &gt; JDK6,<br/>\n&gt; &gt; JDK7,<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; @Theory<br/>\n&gt; &gt; public void testFoo(boolean truth, JDKS j) throws Exception {<br/>\n&gt; &gt; System.out.println(truth + &quot;:&quot; + j);<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; ...which results in:<br/>\n&gt; &gt; true:null<br/>\n&gt; &gt; false:null<br/>\n&gt; &gt;<br/>\n&gt; &gt; Maybe I&#39;m missing something?<br/>\n&gt; &gt;<br/>\n&gt; &gt; Thank you.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Cheers,<br/>\n&gt; &gt; Will<br/>\n&gt; &gt;<br/>\n&gt; &gt;  <br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 24380, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1367664096", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 24380, 
    "headers": {
        "inReplyToHeader": "PENBTHJ3LVB5K3FhMnZnV3ZBZUJ1QTV4QjBWa1JCOF9KaEtjQTg1MW1TT0hlLVFXPUtOd0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PGttMm9sMCtmM2s2QGVHcm91cHMuY29tPg=="
    }
}