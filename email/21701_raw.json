{
    "numMessagesInTopic": 14, 
    "nextInTime": 21702, 
    "senderId": "APXXXtnCLjhW_Bou1Q2wgxsszAix9RyCmWVENaar1ePIzQYvBnpR9Srt8zty8N8xrNpKwYtp-6pHsMbISizK6N3W", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Change generic signature of assert that", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "With the most recent snapshot build of JUnit 4.7, you can basically use the JUnitMatchers.matches() method as type-checking duct tape, so this should compile: ", 
    "msgId": 21701, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 75645 invoked from network); 1 Jun 2009 17:22:18 -0000\r\nX-Received: from unknown (69.147.108.201)\n  by m2.grp.sp2.yahoo.com with QMQP; 1 Jun 2009 17:22:18 -0000\r\nX-Received: from unknown (HELO mail-bw0-f166.google.com) (209.85.218.166)\n  by mta2.grp.re1.yahoo.com with SMTP; 1 Jun 2009 17:22:18 -0000\r\nX-Received: by bwz10 with SMTP id 10so8065410bwz.16\n        for &lt;junit@yahoogroups.com&gt;; Mon, 01 Jun 2009 10:21:14 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.239.167.212 with SMTP id h20mr412182hbe.68.1243876867599; Mon, \n\t01 Jun 2009 10:21:07 -0700 (PDT)\r\nIn-Reply-To: &lt;gvub22+i2dq@...&gt;\r\nReferences: &lt;4f7da6b90905261030s3cb9fc0bp8f660e58bdfbe44f@...&gt;\n\t &lt;gvub22+i2dq@...&gt;\r\nDate: Mon, 1 Jun 2009 13:21:07 -0400\r\nX-Google-Sender-Auth: 53c27bf5da009d5f\r\nMessage-ID: &lt;4f7da6b90906011021l737d57fm8853a7cb4a066c85@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: David Saff &lt;david@...&gt;\r\nSubject: Re: [junit] Re: Change generic signature of assert that\r\nX-Yahoo-Group-Post: member; u=341876227; y=6Awzxjz4bftVnidX-TAj6dSsdR6XY1tz7EEimpzdBxg\r\nX-Yahoo-Profile: dsaff\r\n\r\nWith the most recent snapshot build of JUnit 4.7, you can basically\nuse the=\r\n JUnitMatchers.matches() method as type-checking duct tape, so\nthis should =\r\ncompile:\n\nassertThat(result, matches(hasEntry(&quot;Key&quot;, Date.class)));\n\n  Davi=\r\nd Saff\n\nOn Sun, May 31, 2009 at 12:25 PM, yme0987654321 &lt;yme0987654321@yaho=\r\no.com&gt; wrote:\n&gt; Me too, it does generally work fine. It works fine for clas=\r\nses without generic parameters (they just have to be of the same type). Whe=\r\nre it broke down is when comparing classes with generic parameters. The wor=\r\nkaround was:\n&gt;\n&gt; Map&lt;String, Class&lt;? extends Serializable&gt;&gt; result =3D null=\r\n;\n&gt; Matcher matches =3D hasEntry(&quot;Key&quot;, java.util.Date.class);\n&gt; assertThat=\r\n(result, matches);\n&gt;\n&gt; It makes a compiler warning that has to be suppresse=\r\nd, but it gets around the problem.\n&gt;\n&gt;\n&gt; --- In junit@yahoogroups.com, Davi=\r\nd Saff &lt;david@...&gt; wrote:\n&gt;&gt;\n&gt;&gt; For the record,\n&gt;&gt;\n&gt;&gt; I use assertThat in J=\r\nUnit a lot every day, and don&#39;t run into these\n&gt;&gt; corner cases all that oft=\r\nen. =A0This probably means that I&#39;ve learned to\n&gt;&gt; keep away from problem a=\r\nreas, but also means that it&#39;s fairly possible\n&gt;&gt; to keep away from problem=\r\n areas.\n&gt;&gt;\n&gt;&gt; Didn&#39;t want to leave the thread on the impression that everyo=\r\nne agrees\n&gt;&gt; that assertThat is totally broken in JUnit.\n&gt;&gt;\n&gt;&gt; =A0 =A0David=\r\n Saff\n&gt;&gt;\n&gt;&gt; On Tue, May 26, 2009 at 10:47 AM, Pigneri, Rocco &lt;rpigneri@...&gt;=\r\n wrote:\n&gt;&gt; &gt; Yme,\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; NUnit has a nice implementation of th=\r\nese sort of matchers that works\n&gt;&gt; &gt; pretty seamlessly-which might imply th=\r\nat .NET handles these typing\n&gt;&gt; &gt; issues better than Java. =A0I can&#39;t remem=\r\nber running into any situations\n&gt;&gt; &gt; like what you are describing. =A0I hav=\r\ne run into a few scenarios like\n&gt;&gt; &gt; yours involving lists, but, if I remem=\r\nber correctly, those errors had\n&gt;&gt; &gt; more to do with an interesting design =\r\nchoice that Microsoft had made\n&gt;&gt; &gt; rather than with anything to do in NUni=\r\nt itself. =A0I&#39;m not familiar\n&gt;&gt; &gt; enough with the NUnit source code so I a=\r\nm not sure if any .NET magic was\n&gt;&gt; &gt; required to build NUnit or if it was =\r\na rather straightforward\n&gt;&gt; &gt; implementation.\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Rocco\n&gt;&gt; =\r\n&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; From: junit@yahoogroups.com [mailto:junit@yahoogroups.com]=\r\n On Behalf Of\n&gt;&gt; &gt; yme0987654321\n&gt;&gt; &gt; Sent: Friday, May 22, 2009 3:36 PM\n&gt;&gt;=\r\n &gt; To: junit@yahoogroups.com\n&gt;&gt; &gt; Subject: [junit] Re: Change generic signa=\r\nture of assert that\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; I&#39;m curiou=\r\ns if you know of a language that does do such things well. It\n&gt;&gt; &gt; seems li=\r\nke the popular ones are moving away from compiler-level type\n&gt;&gt; &gt; safety al=\r\nl together.\n&gt;&gt; &gt;\n&gt;&gt; &gt; --- In junit@yahoogroups.com &lt;mailto:junit%40yahoogro=\r\nups.com&gt; , David\n&gt;&gt; &gt; Saff &lt;david@&gt; wrote:\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; That much is true. I=\r\n think that in the end, we&#39;ll probably be forced\n&gt;&gt; &gt;&gt; back to the untyped =\r\nversion. It was a good dream, but Java just\n&gt;&gt; &gt;&gt; really isn&#39;t functional e=\r\nnough to pretend to do functional things with\n&gt;&gt; &gt;&gt; it.\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; David S=\r\naff\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; On Fri, May 22, 2009 at 2:48 PM, yme0987654321 &lt;yme09876543=\r\n21@&gt;\n&gt;&gt; &gt; wrote:\n&gt;&gt; &gt;&gt; &gt; I&#39;m also curious the motivation for using generics=\r\n on the\n&gt;&gt; &gt; assertThat. It seems the only thing it gains is that the param=\r\neter to\n&gt;&gt; &gt; the matcher is the right type for the comparison, but the actu=\r\nal\n&gt;&gt; &gt; underlying matches method does not look at the generic, so if it wa=\r\nsn&#39;t\n&gt;&gt; &gt; the right type and generics were not used, the assert would just =\r\nfail?\n&gt;&gt; &gt; I&#39;m I reading that right?\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt; --- In junit@yahoogrou=\r\nps.com &lt;mailto:junit%40yahoogroups.com&gt; ,\n&gt;&gt; &gt; &quot;yme0987654321&quot; &lt;yme09876543=\r\n21@&gt; wrote:\n&gt;&gt; &gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; &gt;&gt; hasEntry is part of the Hamcrest library. Her=\r\ne is the signature:\n&gt;&gt; &gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; &gt;&gt; public static &lt;K, V&gt; org.hamcrest.Mat=\r\ncher&lt;java.util.Map&lt;K, V&gt;&gt;\n&gt;&gt; &gt; hasEntry(K key, V value)\n&gt;&gt; &gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; &gt;&gt; I=\r\n&#39;m curious if you know of a reason that\n&gt;&gt; &gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; &gt;&gt; public static &lt;T&gt;=\r\n void assertThat(T actual, Matcher&lt;? extends T&gt;\n&gt;&gt; &gt; matcher)\n&gt;&gt; &gt;&gt; &gt;&gt;\n&gt;&gt; &gt;=\r\n&gt; &gt;&gt; is wrong. Does it break something that you know of?\n&gt;&gt; &gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; &gt;&gt;\n=\r\n&gt;&gt; &gt;&gt; &gt;&gt; --- In junit@yahoogroups.com &lt;mailto:junit%40yahoogroups.com&gt; ,\n&gt;&gt;=\r\n &gt; David Saff &lt;david@&gt; wrote:\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; On Fri, May 22, 2009 at=\r\n 1:18 PM, yme0987654321 &lt;yme0987654321@&gt;\n&gt;&gt; &gt; wrote:\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt; Consider =\r\nthe following case:\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt; Map&lt;String, Class&lt;? extends S=\r\nerializable&gt;&gt; result =3D null;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt; assertThat(result,=\r\n hasEntry(&quot;Key&quot;, java.util.Date.class));\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt; This wil=\r\nl not compile, but if the method signature of\n&gt;&gt; &gt; assertThat was changed t=\r\no:\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt; public static &lt;T&gt; void assertThat(T actual, Ma=\r\ntcher&lt;? extends\n&gt;&gt; &gt; T&gt; matcher)\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt; It would compile=\r\n.\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; &gt; I would seem that it would be an appropriate ch=\r\nange for such\n&gt;&gt; &gt; cases (unless there is something I don&#39;t understand abou=\r\nt the deep\n&gt;&gt; &gt; implications of Generics).\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; Sigh.\n&gt;&gt; &gt;=\r\n&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; Unfortunately, it was all too easy for the hamcrest team,=\r\n a\n&gt;&gt; &gt; couple\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; months ago, to come up with a list of 6 or 7 asse=\r\nrtThat\n&gt;&gt; &gt; statements\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; that all looked like they should obviousl=\r\ny compile or not\n&gt;&gt; &gt; compile, but\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; no Java typing that would mak=\r\ne them all work. =A0It does get deep,\n&gt;&gt; &gt; and\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; in some cases, co=\r\nmpiler-dependent, if I remember correctly.\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; However, w=\r\ne did find that in some cases, the signature of the\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; _Matcher_ co=\r\nuld be improved. =A0What&#39;s the signature of hasEntry?\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;=\r\n This is also pushing me to keep on my &quot;Dotmesh&quot; project, which\n&gt;&gt; &gt; would =\r\nallow this:\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; assertThat(result.entrySet()).contains(en=\r\ntry(&quot;Key&quot;, Date.class));\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; [if the &quot;entry&quot; factory conv=\r\nenience method were written]\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt; &gt; Thanks,\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt;=\r\n &gt;&gt; &gt; =A0 =A0David Saff\n&gt;&gt; &gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;=\r\n\n&gt;&gt; &gt;&gt; &gt; ------------------------------------\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt; Yahoo! Groups=\r\n Links\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt; &gt;\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; =\r\n[Non-text portions of this message have been removed]\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; -=\r\n-----------------------------------\n&gt;&gt; &gt;\n&gt;&gt; &gt; Yahoo! Groups Links\n&gt;&gt; &gt;\n&gt;&gt; &gt;=\r\n\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Gro=\r\nups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "dsaff", 
    "topicId": 21666, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "prevInTime": 21700, 
    "contentTrasformed": false, 
    "postDate": "1243876867", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 21698, 
    "headers": {
        "inReplyToHeader": "PGd2dWIyMitpMmRxQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDkwNjAxMTAyMWw3MzdkNTdmbTg4NTNhN2NiNGEwNjZjODVAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDRmN2RhNmI5MDkwNTI2MTAzMHMzY2I5ZmMwYnA4ZjY2MGU1OGJkZmJlNDRmQG1haWwuZ21haWwuY29tPgkgPGd2dWIyMitpMmRxQGVHcm91cHMuY29tPg=="
    }
}