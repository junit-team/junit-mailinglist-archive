{
    "numMessagesInTopic": 22, 
    "nextInTime": 21430, 
    "senderId": "Pzdmy0DSMzaLrHP_QyZFTyeyqovZic8cREL812Ij5BZpVHHG_9uFffZ0haj1WVrCk2aigbnhcHGDGWjf6wc7In1-RAk", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: Runner for non static inner class in JUnit 4.x", 
    "from": "&quot;kentb&quot; &lt;kentb@...&gt;", 
    "authorName": "kentb", 
    "msgSnippet": "Tuomas, I apologize for the long delay in replying. I was just avoiding conflict, which isn t fair to you. I still see the API you suggest as too magical for", 
    "msgId": 21429, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 40518 invoked from network); 12 Mar 2009 13:43:18 -0000\r\nX-Received: from unknown (69.147.108.202)\n  by m2.grp.re1.yahoo.com with QMQP; 12 Mar 2009 13:43:18 -0000\r\nX-Received: from unknown (HELO elasmtp-banded.atl.sa.earthlink.net) (209.86.89.70)\n  by mta3.grp.re1.yahoo.com with SMTP; 12 Mar 2009 13:43:18 -0000\r\nX-Received: from [71.32.120.185] (helo=kentspavilion)\n\tby elasmtp-banded.atl.sa.earthlink.net with esmtpa (Exim 4.67)\n\t(envelope-from &lt;kentb@...&gt;)\n\tid 1LhlBr-0002vL-De\n\tfor junit@yahoogroups.com; Thu, 12 Mar 2009 09:43:18 -0400\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;4f7da6b90902040715v7d8f4f45t9524d37579550f32@...&gt; &lt;gn1q6h+qn14@...&gt;\r\nDate: Thu, 12 Mar 2009 06:43:10 -0700\r\nMessage-ID: &lt;EF75210A87C44C85BB19D42A3E4EDCCA@kentspavilion&gt;\r\nMIME-Version: 1.0\r\nX-Mailer: Microsoft Office Outlook 11\r\nIn-Reply-To: &lt;gn1q6h+qn14@...&gt;\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579\r\nThread-Index: AcmNQMRyJuMnth4ASHujLmHcfRUNyAV069kg\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d4781642863310c87720e6bdff5e1aaa252d54dadf78004885fa350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 2:4:8:0:1\r\nFrom: &quot;kentb&quot; &lt;kentb@...&gt;\r\nReply-To: &lt;kentb@...&gt;\r\nSubject: RE: [junit] Re: Runner for non static inner class in JUnit 4.x\r\nX-Yahoo-Group-Post: member; u=173198504; y=f7voS4FWkJxZXkap-nfbGtZyGrEftsIXZSEFKnhUzTLGQVyt\r\nX-Yahoo-Profile: kentlbeck\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nTuomas,\n \nI apologize for the long delay in replying. I was just avoiding conflict,\nwhich isn&#39;t fair to you.\n \nI still see the API you suggest as too &quot;magical&quot; for JUnit. That is, it\nisn&#39;t apparent to the eye what is going on without an explanation. There is\nalready too much implicit behavior in JUnit and I&#39;m loathe to add more. The\nway I think of it is there is a fixed number of words I can use to describe\nJUnit to users. If I want to add a feature that doesn&#39;t require explanation,\nno problem. If a feature needs an explanation, then I need to figure out\nwhat to remove first.\n \nThat said, we&#39;re in a new era after the move to GitHub. You are welcome to\ncreate your own branch and maintain your builder there. If it turns out lots\nof folks use it or there is a simple way to express its behavior, we&#39;ll be\nglad to incorporate it into our branch.\n \nRegards,\n \nKent Beck\nThree Rivers Institute\n\n  _____  \n\nFrom: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of\ntuomaskarkkainenri\nSent: Thursday, February 12, 2009 10:36 AM\nTo: junit@yahoogroups.com\nSubject: [junit] Re: Runner for non static inner class in JUnit 4.x\n\n\n\nDavid,\n\nI rewrote my patch into AnnotatedBuilder.\nI wrote it in such a way that it decreases the complexity of the\noriginal AnnotatedBuilder. The net effect of adding JDave support is\nthus a reduction in complexity.\n\nWhat do you think?\n\nBest regards,\nTuomas\n\nAnnotatedBuilder.java:\n\npackage org.junit.internal.builders;\n\nimport static java.util.Arrays.asList;\n\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.Modifier;\nimport java.util.List;\n\nimport org.junit.runner.RunWith;\nimport org.junit.runner.Runner;\nimport org.junit.runners.model.InitializationError;\nimport org.junit.runners.model.RunnerBuilder;\n\npublic class AnnotatedBuilder extends RunnerBuilder {\nprivate static final String CONSTRUCTOR_ERROR_FORMAT= &quot;Custom runner\nclass %1$s should have a public constructor with signature %1$s(Class\ntestClass) or %1$s(Class testClass, RunnerBuilder builder)&quot;;\n\nprivate final RunnerBuilder fSuiteBuilder;\n\npublic AnnotatedBuilder(final RunnerBuilder suiteBuilder) {\nfSuiteBuilder= suiteBuilder;\n}\n\n@Override\npublic Runner runnerForClass(final Class&lt;?&gt; testClass) throws Exception {\nfinal RunWith annotation= getRunWithAnnotation(testClass);\nif (annotation != null) {\nreturn buildRunner(annotation.value(), testClass);\n}\nreturn null;\n}\n\nprivate RunWith getRunWithAnnotation(final Class&lt;?&gt; testClass) {\nif (testClass.isAnnotationPresent(RunWith.class)) {\nreturn testClass.getAnnotation(RunWith.class);\n}\nif (testClassIsANonStaticInnerClass(testClass)) {\nreturn testClass.getDeclaringClass().getAnnotation(RunWith.class);\n}\nreturn null;\n}\n\nprivate boolean testClassIsANonStaticInnerClass(final Class&lt;?&gt;\ntestClass) {\nreturn testClass.isMemberClass()\n&& !Modifier.isStatic(testClass.getModifiers());\n}\n\nprivate &lt;T extends Runner&gt; T buildRunner(final Class&lt;T&gt; runnerClass,\nfinal Class&lt;?&gt; testClass) throws Exception {\nreturn new InternalBuilder&lt;T&gt;(runnerClass,\nfSuiteBuilder).build(testClass);\n}\n\nprivate static class InternalBuilder&lt;T extends Runner&gt; {\nprivate final RunnerBuilder suiteBuilder;\n\nprivate final Class&lt;T&gt; runnerClass;\n\npublic InternalBuilder(final Class&lt;T&gt; runnerClass,\nfinal RunnerBuilder suiteBuilder) {\nthis.runnerClass= runnerClass;\nthis.suiteBuilder= suiteBuilder;\n\n}\n\nprivate T build(final Class&lt;?&gt; testClass) throws Exception {\nif (hasValidConstructor()) {\nreturn instantiateRunner(testClass);\n}\nthrow new InitializationError(String.format(\nCONSTRUCTOR_ERROR_FORMAT, runnerClass.getSimpleName()));\n}\n\nprivate T instantiateRunner(final Class&lt;?&gt; testClass) throws Exception {\nif (hasSimpleConstructor()) {\nreturn getSimpleConstructor().newInstance(testClass);\n}\nreturn getConstructorWithSuite(runnerClass).newInstance(testClass,\nsuiteBuilder);\n}\n\nprivate boolean hasValidConstructor() {\nreturn hasSimpleConstructor()\n|| hasConstructorWithSuite();\n}\n\nprivate boolean hasSimpleConstructor() {\nreturn getSimpleConstructor() != null;\n}\n\nprivate boolean hasConstructorWithSuite() {\nreturn getConstructorWithSuite(runnerClass) != null;\n}\n\nprivate Constructor&lt;T&gt; getSimpleConstructor() {\nfor (final Constructor&lt;T&gt; constructor : getConstructors()) {\nfinal List&lt;Class&lt;?&gt;&gt; parameters= asList(constructor\n.getParameterTypes());\nif (parameters.equals(asList(Class.class))) {\nreturn constructor;\n}\n}\nreturn null;\n}\n\nprivate Constructor&lt;T&gt; getConstructorWithSuite(\nfinal Class&lt;T&gt; runnerClass) {\nfor (final Constructor&lt;T&gt; constructor : getConstructors()) {\nfinal List&lt;Class&lt;?&gt;&gt; parameters= asList(constructor\n.getParameterTypes());\nif (parameters.equals(asList(Class.class, RunnerBuilder.class))) {\nreturn constructor;\n}\n}\nreturn null;\n}\n\n@SuppressWarnings(&quot;unchecked&quot;)\nprivate List&lt;Constructor&lt;T&gt;&gt; getConstructors() {\nreturn asList((Constructor&lt;T&gt;[]) runnerClass.getConstructors());\n}\n\n}\n}\n\nAnnotatedBuilderTest.java:\n\npackage org.junit.tests.running.classes;\n\nimport static org.hamcrest.core.Is.is;\nimport static org.junit.Assert.assertThat;\nimport org.hamcrest.core.IsNull;\nimport org.junit.Test;\nimport org.junit.internal.builders.AnnotatedBuilder;\nimport org.junit.runner.Description;\nimport org.junit.runner.RunWith;\nimport org.junit.runner.Runner;\nimport org.junit.runner.notification.RunNotifier;\nimport org.junit.runners.model.InitializationError;\nimport org.junit.runners.model.RunnerBuilder;\n\npublic class AnnotatedBuilderTest {\n@Test\npublic void aClassWithARunWithAnnotationHasRunnerBuilt() throws\nException {\nfinal Runner runner= new AnnotatedBuilder(null)\n.runnerForClass(ClassWithRunWithAnnotation.class);\nassertThat(runner, is(FakeRunner.class));\n}\n\n@Test\npublic void\naClassWithARunWithAnnotationThatRequiresASuiteBuilderHasRunnerBuilt()\nthrows Exception {\nfinal Runner runner= new AnnotatedBuilder(null)\n\n.runnerForClass(ClassWithRunWithAnnotationWhereTheRunnerRequiresASuiteBuilde\nr.class);\nassertThat(runner, is(FakeRunnerThatRequiresSuiteBuilder.class));\n\n}\n\n@Test\npublic void aClassWithoutARunWithAnnotationReturnsNull() throws\nException {\nfinal Runner runner= new AnnotatedBuilder(null)\n.runnerForClass(ClassWithoutRunWithAnnotation.class);\nassertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));\n\n}\n\n@Test\npublic void\naNonStaticInnerClassWithARunWithAnnotationOnTheDeclaringClassHasRunnerBuilt(\n)\nthrows Exception {\nfinal Runner runner= new AnnotatedBuilder(null)\n\n.runnerForClass(DeclaringClassWithRunWithAnnotation.NonStaticInnerClass.clas\ns);\nassertThat(runner, is(FakeRunner.class));\n}\n\n@Test\npublic void aStaticInnerClassWithARunWithAnnotationHasRunnerBuilt()\nthrows Exception {\nfinal Runner runner= new AnnotatedBuilder(null)\n\n.runnerForClass(DeclaringClassWithRunWithAnnotation.StaticInnerClassWithRunW\nithAnnotation.class);\nassertThat(runner, is(FakeRunner.class));\n}\n\n@Test\npublic void\naStaticInnerClassWithARunWithAnnotationOnTheDeclaringClassReturnsNull()\nthrows Exception {\nfinal Runner runner= new AnnotatedBuilder(null)\n\n.runnerForClass(DeclaringClassWithRunWithAnnotation.StaticInnerClass.class);\nassertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));\n}\n\n@Test(expected= InitializationError.class)\npublic void\naClassWithARunWithAnnotationThatSpecifiesAnInvalidRunnerThrowsException()\nthrows Exception {\nfinal Runner runner= new AnnotatedBuilder(null)\n\n.runnerForClass(ClassWithRunWithAnnotationThatSpecifiesAndInvalidRunner.clas\ns);\nassertThat(runner, is(IsNull.&lt;Runner&gt; nullValue()));\n}\n\n@RunWith(FakeRunner.class)\nprivate static class ClassWithRunWithAnnotation {\n}\n\n@RunWith(InvalidRunner.class)\nprivate static class\nClassWithRunWithAnnotationThatSpecifiesAndInvalidRunner {\n}\n\n@RunWith(FakeRunnerThatRequiresSuiteBuilder.class)\nprivate static class\nClassWithRunWithAnnotationWhereTheRunnerRequiresASuiteBuilder {\n}\n\nprivate static class ClassWithoutRunWithAnnotation {\n}\n\n@RunWith(FakeRunner.class)\nprivate static class DeclaringClassWithRunWithAnnotation {\n\npublic class NonStaticInnerClass {\n}\n\npublic static class StaticInnerClass {\n}\n\n@RunWith(FakeRunner.class)\npublic static class StaticInnerClassWithRunWithAnnotation {\n}\n\n}\n\npublic static class InvalidRunner extends Runner {\n@Override\npublic Description getDescription() {\nreturn Description.EMPTY;\n}\n\n@Override\npublic void run(final RunNotifier notifier) {\n}\n}\n\npublic static class FakeRunner extends Runner {\npublic FakeRunner(final Class&lt;?&gt; testClass) {\n}\n\n@Override\npublic Description getDescription() {\nreturn Description.EMPTY;\n}\n\n@Override\npublic void run(final RunNotifier notifier) {\n}\n}\n\npublic static class FakeRunnerThatRequiresSuiteBuilder extends Runner {\npublic FakeRunnerThatRequiresSuiteBuilder(final Class&lt;?&gt; testClass,\nfinal RunnerBuilder suiteBilder) {\n}\n\n@Override\npublic Description getDescription() {\nreturn Description.EMPTY;\n}\n\n@Override\npublic void run(final RunNotifier notifier) {\n}\n}\n}\n\nAnd RunWithTest.java, I fixed the error message to:\n\n@Test\npublic void characterizeErrorMessageFromBadRunner() {\nassertEquals(\n&quot;Custom runner class BadRunner should have a public constructor\nwith signature BadRunner(Class testClass) or BadRunner(Class\ntestClass, RunnerBuilder builder)&quot;,\nJUnitCore.runClasses(Empty.class).getFailures().get(0)\n.getMessage());\n}\n\n--- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, David Saff\n&lt;david@...&gt; wrote:\n&gt;\n&gt; I&#39;m unexcited about bumping up the JUnit complexity for a single\nfeature.\n&gt; Again, I love JDave, but I&#39;d love a feature suggestion that used one\nstone\n&gt; to kill at least two birds.\n&gt; \n&gt; David Saff\n&gt; \n&gt; On Tue, Feb 3, 2009 at 11:33 AM, tuomaskarkkainenri &lt;\n&gt; tuomaskarkkainenri@...&gt; wrote:\n&gt; \n&gt; &gt; Hi David, Kent,\n&gt; &gt;\n&gt; &gt; Did you guys decide on what to do with this issue?\n&gt; &gt;\n&gt; &gt; Best regards,\n&gt; &gt; Tuomas\n&gt; &gt;\n&gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, &quot;Lasse\nKoskela&quot; &lt;lasse.koskela@&gt; wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; David,\n&gt; &gt; &gt;\n&gt; &gt; &gt; I&#39;m not sure if I misinterpreted the below solution but from my\n&gt; &gt; &gt; perspective the perfect solution would be to make JUnit look for a\n&gt; &gt; &gt; runner from the declaring class of a non-static inner class. The\n&gt; &gt; &gt; rationale being that this would be the only change necessary - the\n&gt; &gt; &gt; feature would be immediately supported by all IDEs and build tools.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Lasse\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, &quot;David\nSaff&quot; &lt;david@&gt; wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; All,\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; It would seem that the perfect solution would be:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; 1) The ability to add to the default Runner builder\n&gt; &gt; &gt; &gt; 2) A command-line flag to configure #1\n&gt; &gt; &gt; &gt; 3) An Eclipse setting to set #2\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; It sounds like everyone who is requesting this feature is a\nuser of\n&gt; &gt; &gt; JDave,\n&gt; &gt; &gt; &gt; and a quick Eclipse setting would give them everything they want.\n&gt; &gt; &gt; It would\n&gt; &gt; &gt; &gt; also allow users of other JUnit-based frameworks to do similar\nthings.\n&gt; &gt; &gt; &gt; Thoughts?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; David Saff\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; On Wed, Jan 14, 2009 at 3:42 AM, Lasse Koskela\n&lt;lasse.koskela@&gt;wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Hi David, Tuomas,\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; I&#39;m not exactly unbiased either, having submitted a couple of\n&gt; &gt; patches\n&gt; &gt; &gt; &gt; &gt; for JDave back in the day and just having joined a project\nthat has\n&gt; &gt; &gt; &gt; &gt; 5000+ JDave tests.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; With that said, I don&#39;t think the increase in complexity\nthat we&#39;re\n&gt; &gt; &gt; &gt; &gt; talking about here is all that big. If you don&#39;t specify a\nrunner\n&gt; &gt; &gt; &gt; &gt; (non-static inner class), one is inherited from one level up\n&gt; &gt; &gt; &gt; &gt; (declaring class).\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Again, I might be biased but I sure would like to be able to run\n&gt; &gt; just\n&gt; &gt; &gt; &gt; &gt; one of the tests.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Lasse\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com,\n&quot;David Saff&quot; &lt;david@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt; Do you think the overall ease of use to people who need this\n&gt; &gt; feature\n&gt; &gt; &gt; &gt; &gt; will be\n&gt; &gt; &gt; &gt; &gt; &gt; worth a 20% increase in complexity for everyone who needs to\n&gt; &gt; &gt; &gt; &gt; understand the\n&gt; &gt; &gt; &gt; &gt; &gt; default running rules?\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; David Saff\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; On Wed, Dec 31, 2008 at 3:08 AM, tuomaskarkkainenri &lt;\n&gt; &gt; &gt; &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; hey David,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; i uploaded the patch as a file,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\nhttp://f1.grp.\n&lt;http://f1.grp.yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2Pq\nfQBWFNQwiqbje7jxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstaticinner\nclasses.patch&gt;\nyahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2PqfQBWFNQwiqbje7j\nxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstaticinnerclasses.patch\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; or if that link is relative to my session it&#39;s\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; nonstaticinnerclasses.patch under files here in Yahoo\nGroups.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; in JUnit4 speak:\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; public class RegularJunit4 {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; public class NonStaticInnerClass {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; @Test\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; public void testMethod() {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; running testMethod() is not possible since\nNonStaticInnerClass\n&gt; &gt; &gt; cannot\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; be instantiated from the outside.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; in JDave:\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; @RunWith(JDaveRunner.class)\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; public static class ASpec extends Specification&lt;Void&gt; {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; public class AContext {\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; public void aBehavior() {}\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; AContext is instantiated by SpecRunner which JDaveRunner\n&gt; &gt; &gt; delegates to.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; When I run this with current JUnit,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; AllDefaultPossibilitiesBuilder#runnerForClass(final Class&lt;?&gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; testClass) picks out the @RunWith annotation and uses\nthat to\n&gt; &gt; &gt; run my\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; spec(test class).\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; However if I want to run just a single behavior (test\n&gt; &gt; method) from\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; this spec for example from Eclipse. Eclipse tells JUnit to\n&gt; &gt; &gt; run class\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; ASpec.AContext and method aBehavior JUnit then sees what\n&gt; &gt; &gt; builder it\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; should use for AContext, and doesn&#39;t find the annotation\n&gt; &gt; there and\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; tries to use the regular JUnit4 builder and since it&#39;s a\nJDave\n&gt; &gt; &gt; spec it\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; fails to run.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; What I want to do is: in case AllDefaultPossibilitiesBuilder\n&gt; &gt; &gt; notices\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; that the TestClass is a non-static member class, which\nit has no\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; chance of being able run anyway, it checks whether the\n&gt; &gt; &gt; declaring class\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; of the testclass would be able to run it instead.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; In the case of JDave, the declaring class would have the\n&gt; &gt; @RunWith\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; annotation, and with the Filter created by FilterRequest,\n&gt; &gt; &gt; JDave can\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; then choose which Context and Spec it should actually\nallow to\n&gt; &gt; &gt; run.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; br,\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; Tuomas\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt;\ncom, &quot;David Saff&quot; &lt;david@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; JDave is cool. I&#39;m not 100% clear what you want to\ndo, and\n&gt; &gt; &gt; I don&#39;t\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; see the\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; patch. Could you perhaps include a small test case as\n&gt; &gt; &gt; inline text?\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; David Saff\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; On Tue, Dec 30, 2008 at 10:27 AM, tuomaskarkkainenri &lt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I participate in JDave (http://jdave. &lt;http://jdave.org&gt;\norg). A BDD\nframework\n&gt; &gt; &gt; &gt; &gt; for Java\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; that takes advantage of JUnit for example for Eclipse\n&gt; &gt; &gt; integration.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; We have tests in non-static inner classes of our test\n&gt; &gt; classes.\n&gt; &gt; &gt; &gt; &gt; These\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; run wonderfully using the @RunWith annotation and\nour own\n&gt; &gt; &gt; runner.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; however, for individual tests, this doesn&#39;t work. What I\n&gt; &gt; would\n&gt; &gt; &gt; &gt; &gt; like\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; to do is that AllDefaultPossibilitiesBuilder would check\n&gt; &gt; &gt; &gt; &gt; whether or\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; not the test class is a non static member class. if\nit is,\n&gt; &gt; &gt; then I\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; would grab the runner of the declaring class instead.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I made a patch implementing this. I will try to\nattach it.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; ------------------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; \n&gt; \n&gt; [Non-text portions of this message have been removed]\n&gt;\n\n\n\n\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 21238, 
    "spamInfo": {
        "reason": "4", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 21428, 
    "contentTrasformed": false, 
    "postDate": "1236865390", 
    "canDelete": false, 
    "nextInTopic": 21433, 
    "prevInTopic": 21374, 
    "headers": {
        "inReplyToHeader": "PGduMXE2aCtxbjE0QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PEVGNzUyMTBBODdDNDRDODVCQjE5RDQyQTNFNEVEQ0NBQGtlbnRzcGF2aWxpb24+", 
        "referencesHeader": "PDRmN2RhNmI5MDkwMjA0MDcxNXY3ZDhmNGY0NXQ5NTI0ZDM3NTc5NTUwZjMyQG1haWwuZ21haWwuY29tPiA8Z24xcTZoK3FuMTRAZUdyb3Vwcy5jb20+"
    }
}