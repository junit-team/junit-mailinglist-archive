{
    "numMessagesInTopic": 27, 
    "nextInTime": 24114, 
    "senderId": "y4pVprIKL_68TtSGGlzEO4vsXGlGLZCHsQpXPi1ryvzpFXa4al1ZizMEEpP9Dkny4qKHShCJ3MU1wy20ef3sTLGm9TW6B8-RWtgpmpzf", 
    "systemMessage": false, 
    "subject": "Re: [junit] assertArrayEquals on arrays of objects", 
    "from": "Matthew Farwell &lt;matthew@...&gt;", 
    "authorName": "Matthew Farwell", 
    "msgSnippet": "I partially disagree with this statement. Yes, adding more code adds more scope for introducing bugs, but if you re adding code that allows your code to be", 
    "msgId": 24113, 
    "rawEmail": "Return-Path: &lt;matthewjfarwell@...&gt;\r\nReceived: (qmail 33276 invoked by uid 7800); 19 Nov 2012 11:00:20 -0000\r\nX-Sender: matthewjfarwell@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 33264 invoked from network); 19 Nov 2012 07:47:52 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m2.grp.sp2.yahoo.com with QMQP; 19 Nov 2012 07:47:52 -0000\r\nX-Received: from unknown (HELO mail-qa0-f50.google.com) (209.85.216.50)\n  by mta3.grp.sp2.yahoo.com with SMTP; 19 Nov 2012 07:47:51 -0000\r\nX-Received: by mail-qa0-f50.google.com with SMTP id k1so3740616qaf.16\n        for &lt;junit@yahoogroups.com&gt;; Sun, 18 Nov 2012 23:47:51 -0800 (PST)\r\nX-Received: by 10.224.40.14 with SMTP id i14mr10832523qae.37.1353311271218; Sun,\n 18 Nov 2012 23:47:51 -0800 (PST)\r\nMIME-Version: 1.0\r\nX-Received: by 10.229.144.131 with HTTP; Sun, 18 Nov 2012 23:47:30 -0800 (PST)\r\nIn-Reply-To: &lt;CA+nPnMwgGQ8WGHnOQU9_mDbOQEHWEZAg9Z2W1vez4q_Jjs+E_g@...&gt;\r\nReferences: &lt;k88p63+p6jc@...&gt; &lt;DA6E9228-6EDC-44AE-92A0-35B06F81104C@...&gt;\n &lt;20121117153056.53bc6f70@habanero&gt; &lt;24D3CBB2-4D7C-4EED-B45B-9DC5106DA473@...&gt;\n &lt;20121117162005.7760a9d4@habanero&gt; &lt;CA+nPnMzsWg2zg8avA86PAwgoRzHJpkKkEFoKYiH5j6T5bCCu=A@...&gt;\n &lt;CAOphgJAjeM_u5XABQ8Zc481Q1cH-w-jKDBze06f5HTj_Lr2Y3g@...&gt; &lt;CA+nPnMwgGQ8WGHnOQU9_mDbOQEHWEZAg9Z2W1vez4q_Jjs+E_g@...&gt;\r\nDate: Mon, 19 Nov 2012 08:47:30 +0100\r\nX-Google-Sender-Auth: WN2RidPdR-r9d-ezdNgn7GnjoBA\r\nMessage-ID: &lt;CAOBkoFULbk0DMQiid5V-UUyAJF3ORHiChMet9_siAadb8zY0Bg@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Matthew Farwell &lt;matthew@...&gt;\r\nSubject: Re: [junit] assertArrayEquals on arrays of objects\r\nX-Yahoo-Group-Post: member; u=499556184; y=AaoPma5L0TTxtSsjA0vtk9YnaayJXYyDz_0TWAKpPubLK7-O\r\nX-Yahoo-Profile: mjfarwell\r\nContent-Type: text/plain\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Approved-By: dsaff &lt;david@...&gt; via email; 19 Nov 2012 11:00:20 -0000\r\n\r\nI partially disagree with this statement. Yes, adding more code adds more\ns=\r\ncope for introducing bugs, but if you&#39;re adding code that allows your code\n=\r\nto be tested, then that is a good thing. When I&#39;m dealing with dates and\nti=\r\nmes in code, then it&#39;s a very common idiom to see a DateTimeHelper which\nan=\r\n be injected so that you can test code which depends on the current date\nan=\r\nd time. Without this, it&#39;s very hard to test this sort of code.\n\nSo adding =\r\ncode can make my code more reliable. Within reason, of course.\n\nI would say=\r\n that if your equals/hashCode aren&#39;t necessary except for tests,\nthen don&#39;t=\r\n put them in. You can always override/mock them in your tests if\nyou really=\r\n really need them. However, I would feel that having equals and\nhashCode *o=\r\nnly* in the tests is probably a code smell. I can&#39;t think of an\nexample whe=\r\nre this would be necessary. Most of the time, I suspect you can\ndo a sort w=\r\nith an explicit comparator if you want to compare two\ncollections.\n\nMatthew=\r\n Farwell.\n\n2012/11/18 Stephen Connolly &lt;stephen.alan.connolly@...&gt;\n\n&gt;=\r\n **\n&gt;\n&gt; Every line of code you write introduces another place for you to wr=\r\nite a\n&gt; bug. So adding test hooks to your production code, whatever form th=\r\nose\n&gt; hooks take, is adding more scope for bugs.\n&gt;\n&gt; Production code should=\r\n be just what is required and no more, ie no dead\n&gt; code please.\n&gt;\n&gt; That i=\r\ns the ideal we should strive for, just as 100% coverage is the ideal\n&gt; we s=\r\nhould strive for.\n&gt;\n&gt; Now in practice, for my code, I usually implement equ=\r\nals and hash code...\n&gt; But I do so *following the correct contract for equa=\r\nls and hashcode*\n&gt;\n&gt; One of the elements of that contract is that hashCode =\r\nof two equal objects\n&gt; should be identical, and that it should be based on =\r\nthe objects final\n&gt; fields.\n&gt;\n&gt; often enough to warrant mentioning (though =\r\nnot every day), unless your\n&gt; objects are immutable (I like immutable objec=\r\nts too btw which is why this\n&gt; doesn&#39;t happen every day for me) you will fi=\r\nnd that the necessities of the\n&gt; equals and hashCode contracts with respect=\r\n to collections etc, results in\n&gt; equals methods that only compare on a sub=\r\nset of the objects fields, in\n&gt; which case you need, in your tests, to comp=\r\nare on the non-final fields too.\n&gt;\n&gt; On other occasions I have found it nec=\r\nessary to leave the equals and\n&gt; hashCode methods unimplemented because I n=\r\need specific behaviour within\n&gt; collections. In such cases I typically have=\r\n test cases to verify that\n&gt; equals is inherited from Object so that future=\r\n maintainers do not\n&gt; accidentally add an implementation.\n&gt;\n&gt; Normally, I u=\r\nse a wrapper class for adding such objects to collections so\n&gt; that it is s=\r\nafe to use equals... But that can put an excessive GC load, and\n&gt; as a resu=\r\nlt you may be forced to go without the wrapper... In a sense it\n&gt; is a pity=\r\n that the collections classes do not allow for plugable hashCode\n&gt; and equa=\r\nlity strategies,\n&gt;\n&gt;\n&gt; &gt;\n&gt; &gt; You might never have to test for equality of y=\r\nour objects in production\n&gt; but\n&gt; &gt; need it for testing.\n&gt;\n&gt; Or you might h=\r\nave need for the Object.equals behaviour\n&gt;\n&gt;\n&gt; &gt;\n&gt; &gt; And more generally, th=\r\nere is really nothing wrong with implementing\n&gt; &gt; hashCode()/equals() for y=\r\nour objects that match their purpose.\n&gt;\n&gt; The point is that such purpose ma=\r\ny not match the needs of testing.\n&gt;\n&gt; I agree that 95% if the time adding e=\r\nquals and hashCode is perfectly fine.\n&gt; And since we often use IDE tooling =\r\nor Guava&#39;s helpers (or equivalent\n&gt; helpers) to implement these methods it =\r\nis very low risk. My point is that\n&gt; there are times when it is less clear,=\r\n and a subset of those where it is\n&gt; the wrong thing to do.\n&gt;\n&gt; You should =\r\nalways know *why* you are adding code to production. Adding code\n&gt; *just be=\r\ncause your tests need it* is a bad code smell... It indicates that\n&gt; either=\r\n you don&#39;t understand a production requirement of your code (which\n&gt; may me=\r\nan that the equals method is needed anyway) or you have a bad design\n&gt; of y=\r\nour production code in the first place.\n&gt;\n&gt; Another final point is that rel=\r\nying on equals comparing equality as opposed\n&gt; to identity within your test=\r\ns can hinder refactoring as it may make it\n&gt; harder to split the class give=\r\nn that you then have to take care that the\n&gt; equals methods are split corre=\r\nctly... Using duck comparison based on eg\n&gt; Guava&#39;s helpers is very little =\r\nwork and allows for correct testing.\n&gt;\n&gt;\n&gt; &gt; --\n&gt; &gt; C=E9dric\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; [N=\r\non-text portions of this message have been removed]\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; -------=\r\n-----------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;=\r\n\n&gt;\n&gt; [Non-text portions of this message have been removed]\n&gt;\n&gt;  \n&gt;\n\n\n[Non-t=\r\next portions of this message have been removed]\n\n\n", 
    "profile": "mjfarwell", 
    "topicId": 24091, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 499556184, 
    "prevInTime": 24112, 
    "contentTrasformed": false, 
    "postDate": "1353311250", 
    "canDelete": false, 
    "nextInTopic": 24114, 
    "prevInTopic": 24112, 
    "headers": {
        "inReplyToHeader": "PENBK25Qbk13Z0dROFdHSG5PUVU5X21EYk9RRUhXRVpBZzlaMlcxdmV6NHFfSmpzK0VfZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBT0Jrb0ZVTGJrMERNUWlpZDVWLVVVeUFKRjNPUkhpQ2hNZXQ5X3NpQWFkYjh6WTBCZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGs4OHA2MytwNmpjQGVHcm91cHMuY29tPiA8REE2RTkyMjgtNkVEQy00NEFFLTkyQTAtMzVCMDZGODExMDRDQGdtYWlsLmNvbT4gPDIwMTIxMTE3MTUzMDU2LjUzYmM2ZjcwQGhhYmFuZXJvPiA8MjREM0NCQjItNEQ3Qy00RUVELUI0NUItOURDNTEwNkRBNDczQGdtYWlsLmNvbT4gPDIwMTIxMTE3MTYyMDA1Ljc3NjBhOWQ0QGhhYmFuZXJvPiA8Q0ErblBuTXpzV2cyemc4YXZBODZQQXdnb1J6SEpwa0trRUZvS1lpSDVqNlQ1YkNDdT1BQG1haWwuZ21haWwuY29tPiA8Q0FPcGhnSkFqZU1fdTVYQUJROFpjNDgxUTFjSC13LWpLREJ6ZTA2ZjVIVGpfTHIyWTNnQG1haWwuZ21haWwuY29tPiA8Q0ErblBuTXdnR1E4V0dIbk9RVTlfbURiT1FFSFdFWkFnOVoyVzF2ZXo0cV9KanMrRV9nQG1haWwuZ21haWwuY29tPg=="
    }
}