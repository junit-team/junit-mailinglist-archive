{
    "topicId": 3350, 
    "postDate": "1006901087", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Michael Silverstein&quot; &lt;msilverstein@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "GkWx43fD2WpFSC3IZXkYNef7UQdIGPeJEbjJ6VklOjM0fJw2-ro6CK39u7Rt3s1SUNd42ov7F5-c7WgHSalV7OXowku9wskrV0-DcrUN3TJN89knoNaUuPX3", 
    "nextInTime": 3364, 
    "userId": 0, 
    "prevInTime": 3362, 
    "prevInTopic": 3362, 
    "headers": {
        "inReplyToHeader": "PFBpbmUuTE5YLjQuMzAuMDExMTI3MTU1MDQ4MC4xODg4Ny0xMDAwMDBAYnJhaW4ucWx1ZS1sYW4+", 
        "messageIdInHeader": "PE5EQkJKRUZLTURHRklCRUtLRUxFT0VDQ0RKQUEubXNpbHZlcnN0ZWluQHNpbHZlcm1hcmsuY29tPg=="
    }, 
    "authorName": "Michael Silverstein", 
    "numMessagesInTopic": 19, 
    "msgSnippet": "I am using the Java Platform Debugger Architecture (JPDA) (http://java.sun.com/products/jpda/) APIs to launch and connect to another VM that will then run the", 
    "contentTrasformed": false, 
    "msgId": 3363, 
    "nextInTopic": 3364, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;msilverstein@...&gt;\r\nX-Sender: msilverstein@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_0_1); 27 Nov 2001 22:52:15 -0000\r\nReceived: (qmail 10648 invoked from network); 27 Nov 2001 22:52:14 -0000\r\nReceived: from unknown (216.115.97.171)\n  by m6.grp.snv.yahoo.com with QMQP; 27 Nov 2001 22:52:14 -0000\r\nReceived: from unknown (HELO Mail6.nc.rr.com) (24.93.67.53)\n  by mta3.grp.snv.yahoo.com with SMTP; 27 Nov 2001 22:52:14 -0000\r\nReceived: from kenetiks.net ([24.163.47.10]) by Mail6.nc.rr.com  with Microsoft SMTPSVC(5.5.1877.687.68);\n\t Tue, 27 Nov 2001 17:52:13 -0500\r\nReceived: from 66.26.245.149 ([66.26.245.149]) by kenetiks.net (WinRoute Pro 4.1) with SMTP; Tue, 27 Nov 2001 17:54:04 -0500\r\nReply-To: &lt;msilverstein@...&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nSubject: RE: [junit] RE: [Junit-devel] Making JUnit more pluggable for add-ons\r\nDate: Tue, 27 Nov 2001 17:44:47 -0500\r\nMessage-ID: &lt;NDBBJEFKMDGFIBEKKELEOECCDJAA.msilverstein@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;US-ASCII&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)\r\nIn-Reply-To: &lt;Pine.LNX.4.30.0111271550480.18887-100000@...-lan&gt;\r\nImportance: Normal\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.00.3018.1300\r\nReturn-Path: msilverstein@...\r\nFrom: &quot;Michael Silverstein&quot; &lt;msilverstein@...&gt;\r\n\r\n\nI am using the Java Platform Debugger Architecture (JPDA)\n(http://java.sun.com/products/jpda/) APIs to launch and connect to another\nVM that will then run the test under &#39;instrumentation&#39;. The way JPDA works\nis that the launching VM then gets notified via callbacks of various events\nin the launched VM, such as method entry, exceptions, etc. This is the\nmechanism that most Java debuggers use, with the exception of VisualAge\nJava, which provides its own (far, far better) VM instrumentation scheme.\nI&#39;ve got all the code together that does this. What I need is a generic\nmechanism for threading this behavior into JUnit test execution that does\nnot require changes to the base code and does not require changes to the way\npeople already use JUnit (apart from a preference setting somewhere). I\nsuspect a scheme like this might be of use in other JUnit extensions and\nvariations.\n\nThe TestCaseProxy class you mentioned sounds a lot like using a decorator in\nthat it decorates test execution behavior with the additional behavior of\nlaunching and running the test on an instrumented VM. So I do think we&#39;re\nthinking alike.\n\n^^^^^^^^^^^^^^^^^^^^^^^^^\nMike Silverstein\nSilverMark, Inc.\nThe object testing company\nhttp://www.silvermark.com\n\n&gt; -----Original Message-----\n&gt; From: evought@... [mailto:evought@...]\n&gt; Sent: Tuesday, November 27, 2001 4:15 PM\n&gt; To: Junit@Yahoogroups. Com\n&gt; Cc: junit-devel@...\n&gt; Subject: Re: [junit] RE: [Junit-devel] Making JUnit more pluggable for\n&gt; add-ons\n&gt;\n&gt;\n&gt; I&#39;m a little confused. If you are using an instrumented VM, why would you\n&gt; want the TestRunner to launch it? Don&#39;t you normally launch the TestRunner\n&gt; from within a VM?\n&gt;\n&gt; java junit.textui.TestRunner\n&gt;\n&gt; becomes:\n&gt;\n&gt; myvm junit.textui.TestRunner\n&gt;\n&gt; It&#39;s easy enough to use an &lt;exec&gt; statement in ANT or use ANT&#39;s extension\n&gt; mechanism to have it use a different VM for your unit test target.\n&gt;\n&gt; Are you looking to have the TestRunner run in a different VM from the\n&gt; testcases? In that case, a good generic mechansim would be to have a\n&gt; TestCaseProxy or some such which causes a test case to be invoked in a\n&gt; different VM. I have had to do something like that in the past for a\n&gt; client&#39;s project. The TestCaseProxy invoked a set of tests in a remote VM\n&gt; via RMI. Unfortunately, this was using a different test harness and the\n&gt; code is not available to me now.\n&gt;\n&gt; On Tue, 27 Nov 2001, Michael Silverstein wrote:\n&gt;\n&gt; &gt; &lt; at the request of several people, I&#39;m continuing to\n&gt; cross-post. Anyway,\n&gt; &gt; junit-devel@... seems to have a lot of noise\n&gt; from build\n&gt; &gt; updates that are probably not interesting to most people and would\n&gt; &gt; discourage them from subscribing &gt;\n&gt; &gt;\n&gt; &gt; ....\n&gt; &gt;\n&gt; &gt; In http://www.geocrawler.com/archives/3/8174/2001/7/0/6256758/\n&gt; there is a\n&gt; &gt; description of a TestRunListener interface that would\n&gt; accomplish what I need\n&gt; &gt; for being notified when a test starts and ends. The thing I\n&gt; didn&#39;t mention\n&gt; &gt; is that for the purpose of profiling I will be launching the test in an\n&gt; &gt; instrumented VM, so I need to completely override the present\n&gt; test execution\n&gt; &gt; scheme.\n&gt; &gt;\n&gt; &gt; At first blush, one might approach this by implementing a new TestRunner\n&gt; &gt; that launches an instrumented VM, but I would have to do this\n&gt; several times\n&gt; &gt; to support each TestRunner presentation, which is not\n&gt; practical.  That&#39;s why\n&gt; &gt; I proposed a simple decorator, because it requires the least\n&gt; rework of the\n&gt; &gt; existing architecture (simplest thing that could possibly work). Perhaps\n&gt; &gt; once the model and view have been sufficiently separated, the TestRunner\n&gt; &gt; approach will become more practical.\n&gt; &gt;\n&gt; &gt; ^^^^^^^^^^^^^^^^^^^^^^^^^\n&gt; &gt; Mike Silverstein\n&gt; &gt; SilverMark, Inc.\n&gt; &gt; The object testing company\n&gt; &gt; http://www.silvermark.com\n&gt; &gt;\n&gt; &gt; &gt; -----Original Message-----\n&gt; &gt; &gt;\n&gt; &gt; &gt; Problem statement\n&gt; &gt; &gt; -----------------\n&gt; &gt; &gt; I am adding some additional profiling and metrics to JUnit\n&gt; test execution.\n&gt; &gt; &gt; In order to do this I need to plug in to JUnit in such a way\n&gt; as to perform\n&gt; &gt; &gt; some operations before and after test execution, and to\n&gt; extend the test\n&gt; &gt; &gt; results to contain the new metrics. Presently the framework\n&gt; does not allow\n&gt; &gt; &gt; me to do this without altering it.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Process\n&gt; &gt; &gt; -------\n&gt; &gt; &gt; I can either graft a new branch on to the JUnit source tree\n&gt; that contains\n&gt; &gt; &gt; various extensions built in and give it a new name (like JUnit XYZ or\n&gt; &gt; &gt; whatever) or provide some tweaks to the present framework\n&gt; that satisfy my\n&gt; &gt; &gt; needs in the hope they are accepted as part of the next version.\n&gt; &gt; &gt; The purpose\n&gt; &gt; &gt; of this email is to start a discussion about this so that\n&gt; whatever changes\n&gt; &gt; &gt; are necessary fit in with the architectural spirit of JUnit and\n&gt; &gt; &gt; are suitable\n&gt; &gt; &gt; for inclusion in a base release. If possible, I&#39;d like to\n&gt; wrap this up and\n&gt; &gt; &gt; make it publicly available by the end of the year.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Note: I realize test cases are the recognized currency for\n&gt; &gt; &gt; articulating new\n&gt; &gt; &gt; functionality, so once there is agreement in principle to an\n&gt; &gt; &gt; approach, I can\n&gt; &gt; &gt; provide test cases to provide more detail.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Wrapping test execution\n&gt; &gt; &gt; -----------------------\n&gt; &gt; &gt; I need to be able to start profiling immediately before a\n&gt; user test starts\n&gt; &gt; &gt; and end profiling immediately afterward. One approach is to\n&gt; wrap the user\n&gt; &gt; &gt; test class that is presently instantiated in\n&gt; &gt; &gt; junit.runner.BaseTestRunner.getTest(String) with a\n&gt; TestDecorator subclass\n&gt; &gt; &gt; instance that manages profiling during test execution. Creating the\n&gt; &gt; &gt; decorator sounds like a job for factory method [Gamma95].\n&gt; &gt; &gt;\n&gt; &gt; &gt; Extending the results\n&gt; &gt; &gt; ---------------------\n&gt; &gt; &gt; This is presently not easy because all the various test runners\n&gt; &gt; &gt; (subclasses\n&gt; &gt; &gt; of BaseTestRunner) implement their own createTestResult() method,\n&gt; &gt; &gt; where the\n&gt; &gt; &gt; reference to the TestResult class is hard coded. I&#39;d like to\n&gt; be able to\n&gt; &gt; &gt; specify that dynamically as well. This also sounds like a job\n&gt; for factory\n&gt; &gt; &gt; method [Gamma95].\n&gt; &gt; &gt;\n&gt; &gt; &gt; Toward a unified pluggable configuration approach\n&gt; &gt; &gt; -------------------------------------------------\n&gt; &gt; &gt; A possible approach is to employ the abstract factory pattern\n&gt; [Gamma95]\n&gt; &gt; &gt; where the concrete factory class contains factory methods for\n&gt; the above\n&gt; &gt; &gt; classes and others, is specified in the preferences file or\n&gt; &gt; &gt; elsewhere. This\n&gt; &gt; &gt; sort of architectural change would substantially enable the sort of\n&gt; &gt; &gt; pluggability that I&#39;m after.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Some questions and observations about the framework\n&gt; &gt; &gt; ---------------------------------------------------\n&gt; &gt; &gt; Having spent some time digging into JUnit I have the following\n&gt; &gt; &gt; questions and\n&gt; &gt; &gt; comments:\n&gt; &gt; &gt;\n&gt; &gt; &gt; - The preferences file is read in more than one place:\n&gt; &gt; &gt;   - junit.runner.BaseTestRunner.readPreferences()\n&gt; &gt; &gt;   - junit.runner.TestCaseClassLoader.readExcludedPackages()\n&gt; &gt; &gt;   I could be wrong but it seems like this is redundant execution,\n&gt; &gt; &gt; especially\n&gt; &gt; &gt; since the preferences is kept in a static variable.\n&gt; &gt; &gt;\n&gt; &gt; &gt; - The preferences (junit.runner.BaseTestRunner.fPreferences)\n&gt; is static. It\n&gt; &gt; &gt; strikes me that this hampers testability of the framework\n&gt; because it makes\n&gt; &gt; &gt; it difficult to isolate the framework preferences from the\n&gt; preferences for\n&gt; &gt; &gt; instances of framework classes under test.\n&gt; &gt; &gt;\n&gt; &gt; &gt; - The TestResult class provides semantics for running and\n&gt; stopping tests.\n&gt; &gt; &gt; This seems like a stretch for a results class, which I would\n&gt; imagine is\n&gt; &gt; &gt; primarily a container for execution metrics and other downstream\n&gt; &gt; &gt; information.\n&gt; &gt; &gt;\n&gt; &gt; &gt; - The TestRunner variants are very tied to presentation\n&gt; layer. I see this\n&gt; &gt; &gt; has been discussed at length in the past so I won&#39;t belabor it.\n&gt; &gt; &gt;\n&gt; &gt; &gt; - It seems that since all the methods in\n&gt; junit.framework.Assert are static\n&gt; &gt; &gt; and it does not hold any state, there is really no need to\n&gt; make this class\n&gt; &gt; &gt; the root of all tests, except for the convenience of not\n&gt; &gt; &gt; prefixing assertion\n&gt; &gt; &gt; methods with &#39;junit.framework.Assert&#39;. I&#39;m sure I&#39;m missing\n&gt; &gt; &gt; something here.\n&gt; &gt; &gt;\n&gt; &gt; &gt; References\n&gt; &gt; &gt; ----------\n&gt; &gt; &gt; [Gamma95] Erich Gamma et al. &quot;Design Patterns - Elements of Rusable\n&gt; &gt; &gt; Object-Oriented Software&quot;, Addison-Wesley, Reading, MA, 1995.\n&gt; &gt; &gt;\n&gt; &gt; &gt; ^^^^^^^^^^^^^^^^^^^^^^^^^\n&gt; &gt; &gt; Mike Silverstein\n&gt; &gt; &gt; SilverMark, Inc.\n&gt; &gt; &gt; The object testing company\n&gt; &gt; &gt; http://www.silvermark.com\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; _______________________________________________\n&gt; &gt; &gt; Junit-devel mailing list\n&gt; &gt; &gt; Junit-devel@...\n&gt; &gt; &gt; https://lists.sourceforge.net/lists/listinfo/junit-devel\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; To unsubscribe from this group, send an email to:\n&gt; &gt; junit-unsubscribe@yahoogroups.com\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Your use of Yahoo! Groups is subject to\nhttp://docs.yahoo.com/info/terms/\n&gt;\n&gt;\n&gt;\n\n--\nEric Vought\nChief Technical Officer - QLUE Consulting, Inc.\n\nevought@... toll-free: 888-771-3538  RTP area: 919-816-9901\n\n\n\nTo unsubscribe from this group, send an email to:\njunit-unsubscribe@yahoogroups.com\n\n\nYour use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/\n\n\n\n\n", 
    "subject": "RE: [junit] RE: [Junit-devel] Making JUnit more pluggable for add-ons"
}