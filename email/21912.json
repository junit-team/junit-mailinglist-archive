{
    "numMessagesInTopic": 17, 
    "nextInTime": 21913, 
    "senderId": "6KXDD-fsFJtnk2PVZ6avSCeOWLauTY7tTsY8hVEoStHHOAPNnssa-Yk4Wkxdn8rhSCd268v3lpShL8hD4ON1nDaIEC8", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: Rule annotation", 
    "from": "&quot;kentb&quot; &lt;kentb@...&gt;", 
    "authorName": "kentb", 
    "msgSnippet": "I m a bit confused. @Before and @After are inherited. Superclass @Before s are executed before subclass @Before s and subclass @After s are executed before", 
    "msgId": 21912, 
    "profile": "kentlbeck", 
    "topicId": 21887, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "messageBody": "<div id=\"ygrps-yiv-1251557197\">I&#39;m a bit confused. @Before and @After are inherited. Superclass @Before&#39;s<br/>\nare executed before subclass @Before&#39;s and subclass @After&#39;s are executed<br/>\nbefore superclass @After&#39;s. If you have a scenario where inheritance doesn&#39;t<br/>\nwork as you expected, I&#39;d appreciate a failing test case that will pass when<br/>\nJUnit does what you expect.<br/>\n <br/>\nIn any case, I&#39;m glad you got your tests running as expected. As you noted,<br/>\n@Rule&#39;s aren&#39;t executed in any particular order. This is by design. If you<br/>\nneed to express temporal dependency, the best way I know of is to have<br/>\nsequential lines of code.<br/>\n <br/>\nRegards,<br/>\n <br/>\nKent<br/>\n<br/>\n  _____  <br/>\n<br/>\nFrom: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of<br/>\nyme0987654321<br/>\nSent: Tuesday, August 25, 2009 8:19 PM<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSubject: [junit] Re: Rule annotation<br/>\n<br/>\n<br/>\n  <br/>\n<br/>\nIt doesn&#39;t fit my scenario because I would essentially not want to engage<br/>\nthe external resources, so I guess I could combine them the other way around<br/>\nand fail with an assumeThat (would that work? Or would it report a crash?).<br/>\n<br/>\nBut anyway, after playing with this for a while, I just did an assumeThat in<br/>\nthe @BeforeClass method, and that worked out fine. IDEA doesn&#39;t report the<br/>\nignored tests as nicely, but that&#39;s life. I got to eliminate a lot of<br/>\nbrittle complicated code around the runner, so it was worthwhile.<br/>\n<br/>\nI used the @Rule for the external resource, which really saved the @Before<br/>\nand @After inheritence issue (the fact that it doesn&#39;t inherit), so<br/>\nultimately 4.7 really improved my testing code infrastructure.<br/>\n<br/>\nSo good job.<br/>\n<br/>\nThe thing that got my brain tied in knots is the expectation that rules<br/>\ninteract, or have some kind of series to them. But that is just an<br/>\nassociation with the word &quot;rule&quot; and has nothing to do with how JUnit is<br/>\ndoing the @Rule annotation, which is fine once you get it.<br/>\n<br/>\n--- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, David Saff<br/>\n&lt;david@...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; I&#39;m trying to think this one through. I&#39;m thinking I have:<br/>\n&gt; <br/>\n&gt; public ExternalResource myResource = new ExternalResource() {<br/>\n&gt; // ...<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public MethodRule myConditionalIgnore = new MethodRule() {<br/>\n&gt; // ...<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public class CombinedRule implements MethodRule {<br/>\n&gt; public final Statement apply(final Statement base,<br/>\n&gt; FrameworkMethod method, Object target) {<br/>\n&gt; return myConditionalIgnore.apply(myResource.apply(base,<br/>\n&gt; method, target), method, target);<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Does that work?<br/>\n&gt; <br/>\n&gt; David Saff<br/>\n&gt; <br/>\n&gt; On Thu, Aug 20, 2009 at 1:38 PM, yme0987654321&lt;yme0987654321@...&gt; wrote:<br/>\n&gt; &gt; For the big class hierarchy that I had, this worked out. I had to make<br/>\n </span></blockquote>one rule which composed and delegated to an ExternalResource rule and had<br/>\nits own before and after methods because ExternalResource does not allow the<br/>\noverriding of its apply method. I certainly understand the inclination to<br/>\nmake it final, but I would suggest that it be reconsidered.<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;<br/>\n&gt; &gt; Regardless, going further replacing my custom runner, I did hit another<br/>\n </span></blockquote>wall, with @BeforeClass and @AfterClass. I assume there is nothing to do<br/>\nabout those (other than an assumeThat in @BeforeClass)?<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, David<br/>\n </span></blockquote>Saff &lt;david@&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt;<br/>\n&gt; &gt;&gt; That&#39;s right: Rules can affect the processing after @Before and before<br/>\n&gt; &gt;&gt; @After.  Could you replace your setup/teardown with an<br/>\n&gt; &gt;&gt; ExternalResource rule?<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;    David Saff<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; On Thu, Aug 20, 2009 at 11:11 AM, yme0987654321&lt;yme0987654321@&gt; wrote:<br/>\n&gt; &gt;&gt; &gt; OK, I figured out the problem. What happens is that I have a custom<br/>\n </span></blockquote>runner that suppresses the test (these are slow tests, so they are only run<br/>\nat check-in, not by the developer while developing).<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; However, when I replace that with a Rule, the setup method is still<br/>\n </span></blockquote>run (looks slow). So I guess the conclusion is that @Rule can&#39;t interrupt or<br/>\noverride the setup and teardown process, so if you need to do that you are<br/>\nback to a Runner? (Or making your own setups rule-aware I guess).<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, David<br/>\n </span></blockquote>Saff &lt;david@&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; Yishai,<br/>\n&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; I just ran a test, and the Rules in the superclass were picked up.<br/>\n&gt; &gt;&gt; &gt;&gt; Can you post a small example?  Thanks,<br/>\n&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt;    David Saff<br/>\n&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; On Thu, Aug 20, 2009 at 10:21 AM, David Saff&lt;david@&gt; wrote:<br/>\n&gt; &gt;&gt; &gt;&gt; &gt; Yishai,<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt; Sounds like a bug.  Can you file it at github?  Sorry for the<br/>\n </span></blockquote>oversight,<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;   David Saff<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt; On Wed, Aug 19, 2009 at 8:26 PM, yme0987654321&lt;yme0987654321@&gt;<br/>\n </span></blockquote>wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;&gt; &gt;&gt; I&#39;m looking at the new Rule annotation in JUnit4. It&#39;s pretty<br/>\n </span></blockquote>nice, but it doesn&#39;t seem to inherit.<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt; That is if I have a super class that has the @Rule, sub class<br/>\n </span></blockquote>tests don&#39;t run the rule on its tests.<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt; Combined with the requirement that the rules field be public,<br/>\n </span></blockquote>this is surprising.<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt; The practical effect for me is that it can&#39;t really replace my<br/>\n </span></blockquote>custom runner, as the @RunWith annotation is inherited by subclasses.<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt; Am I missing something?<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt; Yishai.<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt; ------------------------------------<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt; Yahoo! Groups Links<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; ------------------------------------<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; ------------------------------------<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n </span></blockquote>[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 21911, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1251303234", 
    "canDelete": false, 
    "nextInTopic": 21914, 
    "prevInTopic": 21909, 
    "headers": {
        "inReplyToHeader": "PGg3MjlqbStobGxsQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDkxQzAyRTVGNTdCRTRFNzhCQTkyNTkyREQwOEM0QUI0QGtlbnRzcGF2aWxpb24+", 
        "referencesHeader": "PDRmN2RhNmI5MDkwODIxMDgyMmc2OThlMWRiMWphMDAwZWQ4ODc4MTIyYTdkQG1haWwuZ21haWwuY29tPiA8aDcyOWptK2hsbGxAZUdyb3Vwcy5jb20+"
    }
}