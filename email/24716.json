{
    "numMessagesInTopic": 8, 
    "nextInTime": 24717, 
    "senderId": "q6Xuw48Re9eUJbdH3h7PIppWhKwjitIGCsjYgNFw5P7ArT67eX5jWsrAQHeg1wP6CBwTj7sKFyHhZ8RM0Zm_ejU1S6RGGTGMBxdWg7wZLA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Fail Tests on write to System.out", 
    "from": "Stefan Bechtold &lt;stefan.bechtold@me.com&gt;", 
    "authorName": "Stefan Bechtold", 
    "msgSnippet": "Hi Andreas. I find it difficult to find out whether a call to System.out is being okay or not in your setup. are you saying that you want to suppress calls to", 
    "msgId": 24716, 
    "topicId": 24713, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 558173103, 
    "messageBody": "<div id=\"ygrps-yiv-782558839\"><html><head></head><div>Hi Andreas.</div><div><br></div><div>I find it difficult to find out whether a call to System.out is being okay or not in your setup. are you saying that you want to suppress calls to System.out for your test execution entirely? it will be difficult to find out if it was your code that called it or if it was some kind of the testing framework for example.</div><div><br></div><div>The only way I currently see is to wrap your test execution with some kind of filter. The mechanism for that in JUnit is the Rule annotation. To avoid the definition of a rule in each test class your could introduce a base class that supports this for all your tests - still not very flexible.</div><div><br></div><div>I would recommend to avoid System.out to be used in the code directly. Instead use some kind of writer that you can mock out entirely for the tests. if that is not possible you probably have to rely on rules for the moment.</div><div><br></div><div>All the best</div><div><br></div><div>Stefan</div><div><div><br></div></div><div><br>Am 22.10.2015 um 08:24 schrieb Dawid Weiss <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:dawid.weiss@gmail.com\">dawid.weiss@gmail.com</a> [junit] &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;:<br><br></div><blockquote><span title=\"qreply\"> <blockquote type=\"cite\"><div>\n\n\n\n\n\n\n\n\n\n\n\n\n \n\n<span style=\"display:none;\">&nbsp;</span>\n\n\n\n    <div id=\"ygrps-yiv-782558839ygrp-text\">\n      \n      \n      <p></p><div dir=\"ltr\"><br><div>Hi Andreas,</div><div><br></div><div>This is not going to be useful if you&#39;re using plain JUnit but you can look at the solution in randomizedtesting -- we use it in Lucene and Solr and it works fairly well.&nbsp;</div><div><br></div><div>You do need to have a common superclass or repeat the rule annotation on every class this should be applied to, unfortunately. This is the annotation:</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L206\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L206</a><br></div><div><br></div><div>this annotation is used for suppressing it (for a class):</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L352-L365\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L352-L365</a><br></div><div><br></div><div>and this is rule declaration chain:</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L581\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L581</a><br></div><div><br></div><div>The scenario in Lucene is quite complex, for example you want to suppress certain checks on failures (other rules are permitted to write diagnostics to sysout if something fails), but you can look for the inspiration on how it was done here:</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/TestRuleLimitSysouts.java\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/TestRuleLimitSysouts.java</a><br></div><div><br></div><div>If you peek at the source code and the comments you&#39;ll see the difficulties this entails (early-on stolen references to System.out, running with a security manager, etc.).</div><div><br></div><div>Hope this helps somehow,</div><div>Dawid</div><div><br></div></div><div class=\"ygrps-yiv-782558839gmail_extra\"><br><div class=\"ygrps-yiv-782558839gmail_quote\">On Wed, Oct 21, 2015 at 2:07 PM, Andreas Worm <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:andreas.worm@headissue.com\">andreas.worm@headissue.com</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-782558839gmail_quote\" style=\"border-left:1px #ccc solid;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span>&nbsp;</span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p>Hi,<br>\n<br>\nI am looking for a way to fail unittests when they write to System.out <br>\nor System.err. I found different ways to achieve that and tried a <br>\nsolution with a RunListener, because these can be configured using the <br>\nmaven-surefire-plugin. Now I discovered, that RunListeners can&#39;t really <br>\nfail tests because fail() throws an AssertionException and Exceptions <br>\nremove the RunListener. Is there a better way to discover output?<br>\n<br>\nTo summarize what I want:<br>\n* a way to discover output via System.out without preventing Logger <br>\nfunctionality<br>\n* this way should not involve huge code changes on the testclasses ( <br>\nlike adding TestRules everywhere)<br>\n* all unittests which produced output should be reported as &quot;failing&quot; <br>\nwhen you run with `mvn test`<br>\n<br>\nI tried to answer these questions on SO but got only a few helpful <br>\nresponses, so I thought I ask the specialists here and get more <br>\nopinions. For reference the SO questions:<br>\n* <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/33214683\">http://stackoverflow.com/questions/33214683</a><br>\n* <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/33207996\">http://stackoverflow.com/questions/33207996</a><br>\n<br>\nAny help on this topic is very appreciated.<br>\n<br>\nRegards<br>\nAndreas Worm<br>\n<br>\n</p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br></div>\n<p></p>\n\n    </div>\n     \n\n    \n\n\n\n\n\n\n\n</div></blockquote></span></blockquote></html></div>", 
    "prevInTime": 24715, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1445496033", 
    "canDelete": false, 
    "nextInTopic": 24717, 
    "prevInTopic": 24715, 
    "headers": {
        "inReplyToHeader": "PENBTTIxUnQ5NnlhTTQ0ZFFhMEV2a2hRT1Z3NSs9Zm5yMXVVYTFnTDlwWWJneFhiRkFqQUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENFQUU2MzIxLTE4MkMtNDJDMi1CNjY0LTQzMkVGNDVDMzA5QUBtZS5jb20+", 
        "referencesHeader": "PDU2Mjc3RkVGLjgwMTAzQGhlYWRpc3N1ZS5jb20+IDxDQU0yMVJ0OTZ5YU00NGRRYTBFdmtoUU9WdzUrPWZucjF1VWExZ0w5cFliZ3hYYkZBakFAbWFpbC5nbWFpbC5jb20+"
    }
}