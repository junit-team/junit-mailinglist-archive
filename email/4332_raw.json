{
    "numMessagesInTopic": 1, 
    "nextInTime": 4333, 
    "senderId": "zl0VqN6-l7qLGxPev-r9bx5L8vbQxwWmVlI6B2iwWzTp5Uh5NnIQv8TgRmpujOm1XzEDZXo", 
    "systemMessage": false, 
    "subject": "Big oops! on string diff patch (+ant)", 
    "from": "alex@...", 
    "authorName": "alex@jguru.com", 
    "msgSnippet": "Oops! Somehow a bogus patched junit.jar made it onto the web site. I just corrected the error. The bogus one was apparently a fully functional version of JUnit", 
    "msgId": 4332, 
    "rawEmail": "Return-Path: &lt;guru@...&gt;\r\nX-Sender: guru@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: unknown); 13 Mar 2002 15:10:09 -0000\r\nReceived: (qmail 53702 invoked from network); 13 Mar 2002 15:10:08 -0000\r\nReceived: from unknown (216.115.97.171)\n  by m12.grp.snv.yahoo.com with QMQP; 13 Mar 2002 15:10:08 -0000\r\nReceived: from unknown (HELO edamame.stinky.com) (64.139.9.222)\n  by mta3.grp.snv.yahoo.com with SMTP; 13 Mar 2002 15:10:08 -0000\r\nReceived: (qmail 19933 invoked by uid 510); 13 Mar 2002 15:10:08 -0000\r\nDate: Wed, 13 Mar 2002 07:10:08 -0800\r\nTo: junit@yahoogroups.com\r\nSubject: Big oops! on string diff patch (+ant)\r\nMessage-ID: &lt;20020313071008.B2456@...&gt;\r\nMime-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nContent-Disposition: inline\r\nUser-Agent: Mutt/1.2.5i\r\nX-eGroups-From: guru@...\r\nFrom: alex@...\r\nReply-To: alex@...\r\nX-Yahoo-Group-Post: member; u=9029569\r\nX-Yahoo-Profile: stinkysage\r\n\r\nOops! Somehow a bogus patched junit.jar made it onto the web site. I\njust corrected the error. The bogus one was apparently a fully\nfunctional version of JUnit 3.7, but four times as big, and with the\nunpatched version of Assert (though, oddly, containing my new string\nutility class, which fooled me into thinking it was correct).\n\nI&#39;ve since made a unit test for my web deploy script to stop this from\nhappening again. \n\nThe version that&#39;s up now works fine, knock wood.\n\n\thttp://www.purpletech.com/junit-patch/\n\n - A\n\nP.S. The patch itself always worked; this was just me building and/or\ndeploying the wrong JAR file somehow.\n\nP.P.S. I also fixed a problem where JUnit 3.7 wasn&#39;t compatible with\nthe junit Ant task; now it is.\n\nOn Mon, Feb 18, 2002 at 08:55:55AM -0800, guru@... wrote:\n&gt; The method assertEquals(String, String) is very useful, but breaks\n&gt; down with large strings.  The problem is that, if the strings differ\n&gt; in only a few characters, or start to differ more than a few lines in,\n&gt; the error message is almost completely useless.  \n&gt; \n&gt; expected:&lt;HUGE STRING&gt; but was:&lt;NEARLY IDENTICAL HUGE STRING&gt;\n&gt; \n&gt; When you add in line breaks it gets impossible to &quot;eyeball&quot; the error\n&gt; message and know what&#39;s going wrong.  It also breaks up the format of\n&gt; the output report with miles of strings, possibly including line\n&gt; breaks.\n&gt; \n&gt; I&#39;ve written some code that fixes this.  The output for a failed test\n&gt; with message &quot;HTML Report&quot; is:\n&gt; \n&gt; HTML Report: strings differ at character 22\n&gt; Expected: ...&gt;Poll:&lt;/b&gt; dummy&lt;br&gt;&#92;n&lt;b&gt;Question:&lt;/b&gt; Vote for your favor...\n&gt;   Actual: ...&gt;Poll:&lt;/b&gt; dummy&lt;br&gt;&#92;r&#92;n&lt;b&gt;Question:&lt;/b&gt; Vote for your favo...\n&gt; \n&gt; Note that you can tell right off the bat that the problem is a\n&gt; difference in line endings (since my code escapes those).  This\n&gt; particular bug was actually impossible for me to track down using the\n&gt; normal failure message, since line endings are invisible.\n&gt; \n&gt; I&#39;d like to contribute the code to JUnit.  I&#39;m just not sure where you\n&gt; want to put it.\n&gt; \n&gt; I see three options:\n&gt; \n&gt; 1. Change the behavior of the existing Assert.assertEquals(String, String)\n&gt; \n&gt; \t(I don&#39;t think this would break anybody&#39;s tests, and I doubt\n&gt; \tanyone has written code that depends on the actual format of\n&gt; \tthe string error messages.  I could be wrong, of course.)\n&gt; \n&gt; 2. Add a new assertEqualsDiff to class Assert\n&gt; \n&gt; \t(This would mean that the benefit of the new messages would\n&gt; \tnot be given to existing tests without massive test code\n&gt; \trewrites.)\n&gt; \n&gt; 3. Make a new DiffTestCase that overrides assertEquals\n&gt; \n&gt; \t(Same problem as above -- existing test code would need to be\n&gt; \trewritten.  It&#39;s also a sloppy substitute for mixins...)\n&gt; \n&gt; If you guys want the code, let me know, and I&#39;ll download the JUnit\n&gt; source and give you a patch.\n&gt; \n&gt;  - A\n&gt; \n&gt; P.S.  I&#39;ve attached the current version below.  I don&#39;t think this is\n&gt; the final version, though -- I want it to be smarter about diffs close\n&gt; to the start and end of the strings.\n&gt; \n&gt; -- \n&gt; Alex Chaffee                       mailto:alex@...\n&gt; jGuru - Java News and FAQs         http://www.jguru.com/alex/\n&gt; Creator of Gamelan                 http://www.gamelan.com/\n&gt; Founder of Purple Technology       http://www.purpletech.com/\n&gt; Curator of Stinky Art Collective   http://www.stinky.com/\n&gt; \n&gt; \n&gt;     void assertEqualsDiff(String message, String expected, String actual)\n&gt;     {\n&gt; \tif (!expected.equals(actual)) {\n&gt; \t    if (expected.length() &lt; 20 || actual.length() &lt; 20) {\n&gt; \t\tassertEquals(message, expected, actual);\n&gt; \t\treturn;\t// we&#39;ll get an exception, but just in case\n&gt; \t    }\n&gt; \t    int at = strdiffat(actual, expected);\n&gt; \t    String expectedContext =\n&gt; \t\tUtils.abbreviate(expected.substring(at - 20), 60);\n&gt; \t    String actualContext =\n&gt; \t\tUtils.abbreviate(actual.substring(at - 20), 60);\n&gt; \t    assertTrue(message + &quot;: strings differ at character &quot; + at + &quot;&#92;n&quot; +\n&gt; \t\t       &quot;Expected: ...&quot; + Utils.jsEscape(expectedContext) + &quot;&#92;n&quot; +\n&gt; \t\t       &quot;  Actual: ...&quot; + Utils.jsEscape(actualContext) + &quot;&#92;n&quot;,\n&gt; \t\t       false);\n&gt; \t}\n&gt;     }\n&gt; \n&gt;     /**\n&gt;      * returns the index where the strings diverge&lt;p&gt;\n&gt;      * strdiff(&quot;i am a machine&quot;, &quot;i am a robot&quot;) -&gt; 7&lt;p&gt;\n&gt;      * @return -1 if they are the same\n&gt;      *\n&gt;      **/\n&gt;     public static int strdiffat(String s1, String s2) {\n&gt; \tint i;\n&gt; \tfor (i=0; i&lt;s1.length() && i&lt;s2.length(); ++i) {\n&gt; \t    if (s1.charAt(i) != s2.charAt(i)) {\n&gt; \t\tbreak;\n&gt; \t    }\n&gt; \t}\n&gt; \tif (i&lt;s2.length() || i&lt;s1.length())\n&gt; \t    return i;\n&gt; \treturn -1;\n&gt;     }\n&gt; \n&gt; for abbreviate() and jsEscape() see http://www.purpletech.com/code/src/com/purpletech/util/Utils.java\n&gt; \n&gt; _______________________________________________\n&gt; Junit-devel mailing list\n&gt; Junit-devel@...\n&gt; https://lists.sourceforge.net/lists/listinfo/junit-devel\n\n-- \nAlex Chaffee                       mailto:alex@...\njGuru - Java News and FAQs         http://www.jguru.com/alex/\nCreator of Gamelan                 http://www.gamelan.com/\nFounder of Purple Technology       http://www.purpletech.com/\nCurator of Stinky Art Collective   http://www.stinky.com/\n\n_______________________________________________\nJunit-devel mailing list\nJunit-devel@...\nhttps://lists.sourceforge.net/lists/listinfo/junit-devel\n\n----- End forwarded message -----\n\n-- \nAlex Chaffee                       mailto:alex@...\njGuru - Java News and FAQs         http://www.jguru.com/alex/\nCreator of Gamelan                 http://www.gamelan.com/\nFounder of Purple Technology       http://www.purpletech.com/\nCurator of Stinky Art Collective   http://www.stinky.com/\n\n", 
    "profile": "stinkysage", 
    "topicId": 4332, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 9029569, 
    "prevInTime": 4331, 
    "contentTrasformed": false, 
    "postDate": "1016032208", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDIwMDIwMzEzMDcxMDA4LkIyNDU2QHN0aW5reS5jb20+"
    }
}