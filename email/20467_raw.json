{
    "numMessagesInTopic": 6, 
    "nextInTime": 20468, 
    "senderId": "pLWSfJXM53kmK4OrQS1Ljj9N350jJrOfQ_Z0gzVsF83zbHaHRH2pQmhv1HRgBp2jeNZbWvVHxUftlBsuIekoE7WdAY_DkyLZ", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: TextListener improvement", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Alex, It would help me if you provided test cases that break with the current code and pass with the changes below. Regards, Kent Beck Three Rivers Institute ", 
    "msgId": 20467, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 50821 invoked from network); 29 Apr 2008 02:46:03 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m55.grp.scd.yahoo.com with QMQP; 29 Apr 2008 02:46:03 -0000\r\nX-Received: from unknown (HELO mail.globalsuite.net) (69.46.103.200)\n  by mta16.grp.scd.yahoo.com with SMTP; 29 Apr 2008 02:46:02 -0000\r\nX-AuditID: c0a8013c-ac7c8bb0000053ad-0e-48168be81556\r\nX-Received: from kentspavilion (unknown [63.83.39.195])\n\tby mail.globalsuite.net (Symantec Mail Security) with ESMTP id 070F34DC006\n\tfor &lt;junit@yahoogroups.com&gt;; Mon, 28 Apr 2008 20:45:59 -0600 (MDT)\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;fr8ets+dk2g@...&gt; &lt;fv5ms3+mntn@...&gt;\r\nDate: Mon, 28 Apr 2008 19:45:54 -0700\r\nMessage-ID: &lt;018701c8a9a3$27c4c730$0200a8c0@kentspavilion&gt;\r\nMIME-Version: 1.0\r\nX-Mailer: Microsoft Office Outlook 11\r\nIn-Reply-To: &lt;fv5ms3+mntn@...&gt;\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198\r\nThread-Index: Acipi21W06OFnjOCQleoDmOsmzdDrQAF3HFg\r\nX-Brightmail-Tracker: AAAAAA==\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Kent Beck&quot; &lt;kentb@...&gt;\r\nSubject: RE: [junit] Re: TextListener improvement\r\nX-Yahoo-Group-Post: member; u=173198504; y=CErQUtwP6NKJ2MzuGnCL-hf31zN3AdUd2fosijpic3f59lxQ\r\nX-Yahoo-Profile: kentlbeck\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nAlex,\n \nIt would help me if you provided test cases that break with the current code\nand pass with the changes below.\n \nRegards,\n \nKent Beck\nThree Rivers Institute\n\n  _____  \n\nFrom: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of\ntoalexsmail\nSent: Monday, April 28, 2008 4:33 PM\nTo: junit@yahoogroups.com\nSubject: [junit] Re: TextListener improvement\n\n\n\nPrintStreamListener has a bug. Here is correct version:\n\npublic class PrintStreamListener extends RunListener{\n//Definition of delimiters is in Description\nprivate static final Pattern DISPAY_NAME_PATTERN =\nPattern.compile(&quot;[()]&quot;); \nprivate TextListener textListener;\nprivate PrintStream writer;\n\npublic PrintStreamListener() {\nthis(System.out);\n}\n\npublic PrintStreamListener(PrintStream writer) {\nsuper();\nthis.textListener = new TextListener(writer);\nthis.writer = writer;\n}\n\n/**\n* For sub-classes use.\n* \n* @return\n*/\nprotected PrintStream getWriter(){\nreturn writer;\n}\n\nprivate PrintStream getNotNullWriter(){\nPrintStream writer = getWriter();\nif(writer==null){\nthrow new IllegalStateException(&quot;writer should be not null&quot;);\n}\nreturn writer;\n}\n\n\n/**\n* This method can be overriden in sub-classes.\n* \n* @param description\n* @throws IllegalArgumentException if description is null.\n*/\nprotected void writeMethodName(Description description){\nif(description==null){\nthrow new IllegalArgumentException(&quot;description should be not null&quot;);\n}\nString displayName = description.getDisplayName();\n//third place is empty, workaround to avoid ) at the end of the String\nString[] complexNames = DISPAY_NAME_PATTERN.split(displayName, 3); \nString methodName = (complexNames==null ||\ncomplexNames.length==0)?null:complexNames[0];\nif(methodName == null || &quot;&quot;.equals(methodName)){\nmethodName = displayName;\n}\nPrintStream writer = getNotNullWriter();\n\nwriter.print(methodName);\nwriter.print(&#39; &#39;);\n}\n\n\n/**\n* Called when an atomic test is about to be started.\n* @param description the description of the test that is about to be\nrun \n* (generally a class and method name)\n*/\n@Override\npublic void testStarted(Description description) {\ntextListener.testStarted(description);\n}\n\n/** \n* Called when an atomic test fails.\n* @param failure describes the test that failed and the exception\nthat was thrown\n*/\n@Override\npublic void testFailure(Failure failure) {\nDescription description = failure.getDescription();\nPrintStream writer = getNotNullWriter();\n\nwriteMethodName(description);\ntextListener.testFailure(failure);\nwriter.println();\n}\n\n/**\n* Called when a test will not be run, generally because a test\nmethod is annotated \n* with {@link org.junit.Ignore}.\n* @param description describes the test that will not be run\n*/\n@Override\npublic void testIgnored(Description description) {\nwriteMethodName(description);\nPrintStream writer = getNotNullWriter();\ntextListener.testIgnored(description);\nwriter.println();\n}\n\n\n@Override\npublic void testRunFinished(Result result) {\ntextListener.testRunFinished(result);\n}\n\n/**\n* Called before any tests have been run.\n* @param description describes the tests to be run\n*/\n@Override\npublic void testRunStarted(Description description) throws Exception {\nPrintStream writer = getNotNullWriter();\nString displayName = description.getDisplayName();\n//third place is empty, workaround to avoid ) at the end of the String\nString[] complexNames = DISPAY_NAME_PATTERN.split(displayName, 3); \nString className = (complexNames==null ||\ncomplexNames.length&lt;2)?null:complexNames[1];\nif(className == null || &quot;&quot;.equals(className)){\nclassName = displayName;\n}\nwriter.print(&quot;started to test &quot;+className);\nwriter.println(); \n}\n\n\n\n\n\n}\n\n\n\n \n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 20361, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 20466, 
    "contentTrasformed": false, 
    "postDate": "1209437154", 
    "canDelete": false, 
    "nextInTopic": 20469, 
    "prevInTopic": 20466, 
    "headers": {
        "inReplyToHeader": "PGZ2NW1zMyttbnRuQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDAxODcwMWM4YTlhMyQyN2M0YzczMCQwMjAwYThjMEBrZW50c3BhdmlsaW9uPg==", 
        "referencesHeader": "PGZyOGV0cytkazJnQGVHcm91cHMuY29tPiA8ZnY1bXMzK21udG5AZUdyb3Vwcy5jb20+"
    }
}