{
    "numMessagesInTopic": 21, 
    "nextInTime": 15541, 
    "senderId": "xIAM4TDymw4wV83-kBRh5YzyMJYfNfKIFouAmp6FJPL72MiSXfQFiGgeagAXLrUVWhnTvgxyVfIGIRhS7TPs3s6f4mt7VB1aqWEoeE13WvF2B-8Qb5uG_pA7diTwu2kXRNT-", 
    "systemMessage": false, 
    "subject": "Re: [junit] Expected exception pitfall and pattern", 
    "from": "=?UTF-8?Q?C=C3=A9dric_Beust_=E2=99=94_?= &lt;cbeust@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "Interesting catch, Jon. Still, I wonder if it s worth the trouble:  how likely is it that the exception you expect will be thrown in a different location than", 
    "msgId": 15540, 
    "rawEmail": "Return-Path: &lt;cbeust@...&gt;\r\nX-Sender: cbeust@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 22780 invoked from network); 28 Nov 2005 18:59:34 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m11.grp.scd.yahoo.com with QMQP; 28 Nov 2005 18:59:34 -0000\r\nReceived: from unknown (HELO smtp-out.google.com) (216.239.45.12)\n  by mta1.grp.scd.yahoo.com with SMTP; 28 Nov 2005 18:59:34 -0000\r\nReceived: from lois.corp.google.com (lois.corp.google.com [172.24.0.50])\n\tby smtp-out.google.com with ESMTP id jASIxL2O006834\n\tfor &lt;junit@yahoogroups.com&gt;; Mon, 28 Nov 2005 10:59:21 -0800\r\nReceived: from smtp-out2.google.com (epa7.prod.google.com [10.253.129.7])\n\tby lois.corp.google.com with ESMTP id jASIriTi023941\n\tfor &lt;junit@yahoogroups.com&gt;; Mon, 28 Nov 2005 10:57:48 -0800\r\nReceived: by smtp-out2.google.com with SMTP id 7so57178epa\n        for &lt;junit@yahoogroups.com&gt;; Mon, 28 Nov 2005 10:57:48 -0800 (PST)\r\nReceived: by 10.253.130.11 with SMTP id 11mr114680epb;\n        Mon, 28 Nov 2005 10:57:48 -0800 (PST)\r\nReceived: by 10.253.129.8 with HTTP; Mon, 28 Nov 2005 10:57:48 -0800 (PST)\r\nMessage-ID: &lt;b86b6a9c0511281057m5123ff07g3271fa1e69391aa4@...&gt;\r\nDate: Mon, 28 Nov 2005 10:57:48 -0800\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;6EAA8AD82D7EBF478CCE262FA32C6C6401B56A1A@...&gt;\r\nMIME-Version: 1.0\r\nReferences: &lt;6EAA8AD82D7EBF478CCE262FA32C6C6401B56A1A@...&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: =?UTF-8?Q?C=C3=A9dric_Beust_=E2=99=94_?= &lt;cbeust@...&gt;\r\nSubject: Re: [junit] Expected exception pitfall and pattern\r\nX-Yahoo-Group-Post: member; u=199443513; y=1--Qqp0ym8xu_pLVthX8v2oYXgXXkfBs6DcxMzqSzB-0\r\nX-Yahoo-Profile: cbeust\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nInteresting catch, Jon.\n\nStill, I wonder if it&#39;s worth the trouble:  how li=\r\nkely is it that the\nexception you expect will be thrown in a different loca=\r\ntion than where you\nexpect it?\n\nAs for your solution, I&#39;m a bit worried by =\r\nits black magic (where is\nexceptionFlag declared?  Not in the base class si=\r\nnce that base class is no\nlonger a requirement).\n\nNote that you can already=\r\n solve this problem yourself, by the way:\n\n@Test(expected=3DIllegalArgument=\r\nException.class)\npublic void test()\n{\n   Account f =3D null;\n   try {\n     =\r\nf =3D new Account(10);\n   }\n   catch(Exception ex) {\n     fail(...);\n   }\n =\r\n  f.withdrawCash(20);\n}\n\n--\nC=E9dric\nhttp://testng.org\n\n\n\nOn 11/28/05, Jon =\r\nSkeet &lt;jon.skeet@...&gt; wrote:\n&gt;\n&gt; There is a problem with the @Te=\r\nst(expected=3D...) pattern which I&#39;m sure\n&gt; has been noted elsewhere. Namel=\r\ny, it covers up problems if the expected\n&gt; exception is thrown at an unexpe=\r\ncted point. The desired behaviour is\n&gt; really a try/catch around one partic=\r\nular line of code. For instance:\n&gt;\n&gt; @Test(expected=3DIllegalArgumentExcept=\r\nion.class)\n&gt; public void test()\n&gt; {\n&gt;     Account f =3D new Account(10);\n&gt; =\r\n    f.withdrawCash(20);\n&gt; }\n&gt;\n&gt; is equivalent to:\n&gt;\n&gt; try\n&gt; {\n&gt;     Account=\r\n f =3D new Account(10);\n&gt;     f.withdrawCash(20);\n&gt;     fail(&quot;Expected exce=\r\nption&quot;);\n&gt; }\n&gt; catch (IllegalArgumentException e)\n&gt; {\n&gt; }\n&gt;\n&gt; instead of th=\r\ne desired:\n&gt;\n&gt; Account f =3D new Account(10);\n&gt; try\n&gt; {\n&gt;     f.withdrawCas=\r\nh(20);\n&gt;     fail(&quot;Expected exception&quot;);\n&gt; }\n&gt; catch (IllegalArgumentExcept=\r\nion e)\n&gt; {\n&gt; }\n&gt;\n&gt;\n&gt; Now, there is a way around this (other than writing th=\r\ne code\n&gt; &quot;long-hand&quot;) - by keeping a flag which is checked during tear-down=\r\n, and\n&gt; only set immediately before the last line of the code:\n&gt;\n&gt; @Test(ex=\r\npected=3DIllegalArgumentException.class)\n&gt; public void test()\n&gt; {\n&gt;     exc=\r\neptionFlag.clear();\n&gt;     Account f =3D new Account(10);\n&gt;     execeptionFl=\r\nag.set();\n&gt;     f.withdrawCash(20);\n&gt; }\n&gt;\n&gt; If this were only used when the=\r\n test had an expected exception, it could\n&gt; be cleared on set-up.\n&gt;\n&gt; I *su=\r\nspect* there&#39;s no point in making this part of the framework\n&gt; itself, but =\r\nI just wondered whether anyone else had been thinking about\n&gt; it. It&#39;s neve=\r\nr *actually* bitten me (as far as I&#39;m aware) when using\n&gt; NUnit, but it&#39;s a=\r\nlways been a slight source of concern.\n&gt;\n&gt; Jon Skeet\n&gt; Senior Software Engi=\r\nneer\n&gt; CLEARSWIFT\n&gt; The MIMEsweeper Company\n&gt;\n&gt; DDI:               +44 (0) =\r\n1189  038  109\n&gt; Mobile:           +44 (0) 7970 158 865\n&gt; Switchboard:   +4=\r\n4 (0) 1189  038  903\n&gt; Fax:               +44 (0) 1189  039  000\n&gt; Web: www=\r\n.clearswift.com\n&gt;\n&gt; Clearswift monitors, controls and protects all its mess=\r\naging traffic in\n&gt; compliance with its corporate email policy using Clearsw=\r\nift products.\n&gt; Find out more about Clearswift, its solutions and services =\r\nat\n&gt; http://www.clearswift.com\n&gt;\n&gt; This communication is confidential and m=\r\nay contain privileged information\n&gt; intended solely for the named addressee=\r\n(s). It may not be used or disclosed\n&gt; except for the purpose for which it =\r\nhas been sent. If you are not the\n&gt; intended recipient, you must not copy, =\r\ndistribute or take any action in\n&gt; reliance on it. Unless expressly stated,=\r\n opinions in this message are those\n&gt; of the individual sender and not of C=\r\nlearswift. If you have received this\n&gt; communication in error, please notif=\r\ny Clearswift by emailing\n&gt; support@... quoting the sender and de=\r\nlete the message and any\n&gt; attached documents. Clearswift accepts no liabil=\r\nity or responsibility for\n&gt; any onward transmission or use of emails and at=\r\ntachments having left the\n&gt; Clearswift domain.\n&gt;\n&gt; This footnote confirms t=\r\nhat this email message has been swept by\n&gt; MIMEsweeper for Content Security=\r\n threats, including computer viruses.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;=\r\n\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "cbeust", 
    "topicId": 15536, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 199443513, 
    "prevInTime": 15539, 
    "contentTrasformed": false, 
    "postDate": "1133204268", 
    "canDelete": false, 
    "nextInTopic": 15545, 
    "prevInTopic": 15536, 
    "headers": {
        "inReplyToHeader": "PDZFQUE4QUQ4MkQ3RUJGNDc4Q0NFMjYyRkEzMkM2QzY0MDFCNTZBMUFAR0VNSU5JLkVVUk9QRS5DTEVBUlNXSUZULkNPTT4=", 
        "messageIdInHeader": "PGI4NmI2YTljMDUxMTI4MTA1N201MTIzZmYwN2czMjcxZmExZTY5MzkxYWE0QG1haWwuZ29vZ2xlLmNvbT4=", 
        "referencesHeader": "PDZFQUE4QUQ4MkQ3RUJGNDc4Q0NFMjYyRkEzMkM2QzY0MDFCNTZBMUFAR0VNSU5JLkVVUk9QRS5DTEVBUlNXSUZULkNPTT4="
    }
}