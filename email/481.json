{
    "numMessagesInTopic": 3, 
    "nextInTime": 482, 
    "senderId": "Isb0P_u-D-cvdMeybzyIjzPO1KVQu3JlwQbElCNqKvDrumZP8bQqa2T55xlB0iUdgXSvEtnMCG04zGSMEWfy-4XgKrTD3yHyZ-FI", 
    "systemMessage": false, 
    "subject": "RE: [junit] RE: WebObjects", 
    "from": "Michael Finney &lt;mfinney@...&gt;", 
    "authorName": "Michael Finney", 
    "msgSnippet": "Interesting.  I also found that in order to get a meaningful amount of DB and other resources available I must call from a running WOApplication. Perhaps, I", 
    "msgId": 481, 
    "topicId": 472, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-1664390266\">Interesting.  I also found that in order to get a meaningful amount of DB<br/>\nand other resources available I must call from a running WOApplication.<br/>\nPerhaps, I will need to move this into Main&#39;s constructor method similar to<br/>\nwhat you do in order to get a Session object.  Thank you.<br/>\nI suppose if I suppress bringing the browser up, make a WORequest, get the<br/>\ndefault handler from the Application, and tell the handler to handle the<br/>\nrequest, maybe the Main page code will get called without actually launching<br/>\na browser window.  I want this all to work in batch mode.<br/>\n<br/>\nI made a class which extends junit.textui.TestRunner, added a method and<br/>\nhave the method call   TestResult theResult = doRun(allTests, false);<br/>\nI check to see  if (theResult.wasSuccessful()) and have it do a<br/>\nSystem.exit(0); if successful and a System.exit(-1); or -2 if not.  The only<br/>\ntime I run the test is if I add a command line argument which says to run<br/>\nthe unit tests.   NSSystem.arguments() is useful for that.<br/>\nThe reason I extend TestRunner is to get access to the doRun method which<br/>\nreturns me a result that I can use. I saw NO other way to get a result.  Is<br/>\nthere a better way? The result was important in order to have the build<br/>\n(make file) dependent on the outcome of the tests.  (See Martin Fowler&#39;s<br/>\nContinuous Integration paper.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.martinfowler.com/articles/continuousIntegration.html\">http://www.martinfowler.com/articles/continuousIntegration.html</a>  ) The code<br/>\nis quite similar to what is in junit.textui.TestRunner.start and<br/>\njunit.textui.TestRunner.main.<br/>\n(For the record, my supervisor said I could share this code.  Perhaps, I get<br/>\ntoo concerned about sharing small chunks of code.)<br/>\nIn the Application class&#39;s constructor, runTests gets called if it is time<br/>\nto run the tests.   (ok, by now I moved the code but you get the idea.)<br/>\n   private void runTests()<br/>\n   {<br/>\n       final Test allTests = AllTests.suite();<br/>\n       class CircumventProtectedTestRunner extends TestRunner<br/>\n       {<br/>\n           public void runTheTests ()<br/>\n           {<br/>\n             TestResult theResult = doRun(allTests, false);<br/>\n             try {<br/>\n               if (theResult.wasSuccessful())<br/>\n               {<br/>\n                 System.exit(0);                 <br/>\n               }<br/>\n               else<br/>\n               {<br/>\n                 System.exit(-1);                 <br/>\n               }<br/>\n             } catch(Exception e) {<br/>\n               System.err.println(e.getMessage());<br/>\n               System.exit(-2);<br/>\n             }<br/>\n           }<br/>\n       }<br/>\n       CircumventProtectedTestRunner aTestRunner = new<br/>\nCircumventProtectedTestRunner();<br/>\n       aTestRunner.runTheTests();<br/>\n       // should never get here.<br/>\n   }<br/>\n<br/>\nI have not tried launching swing/awt TestRunner from the application, but I<br/>\ntried it in the Makefile.postamble and the process ran out of memory.<br/>\nRunning it in a separate process may be what I need to do a gui, but batch<br/>\nmode is my priority now.<br/>\nBTW, WOApplication (which Application extends) has public static<br/>\nWOApplication application()<br/>\nIt returns a WOApplication object.  That may help you get the application<br/>\ninstance when you wish it.   <br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://developer.apple.com/techpubs/webobjects/System/Library/Frameworks/Web\">http://developer.apple.com/techpubs/webobjects/System/Library/Frameworks/Web</a><br/>\nObjects.framework/Java/Classes/WOApplication.html#//apple_ref/java/clm/WOApp<br/>\nlication/application<br/>\n<br/>\n<br/>\nMichael Finney<br/>\nSun Certified Programmer for the Java 2 Platform<br/>\nSun Certified Developer for the Java 2 Platform<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; -----Original Message-----<br/>\n&gt; From:\tEmily Catharine Bache [SMTP:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:emily.bache@...\">emily.bache@...</a>]<br/>\n&gt; Sent:\tFriday, February 16, 2001 8:34 AM<br/>\n&gt; To:\t&#39;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&#39;<br/>\n&gt; Subject:\t[junit] RE: WebObjects<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Yes, we&#39;re using junit with WebObjects. I posted a message to the<br/>\n&gt; WebObjects<br/>\n&gt; list about it a little while ago, (below). I&#39;ve since upgraded to junit<br/>\n&gt; 3.5<br/>\n&gt; and the line which starts the test runner has changed to:<br/>\n&gt; <br/>\n&gt; new junit.awtui.TestRunner().start(new String[]{&quot;AllTests&quot;});<br/>\n&gt; <br/>\n&gt; Another thing I forgot to mention in the post below is that I&#39;ve added a<br/>\n&gt; static inner class to my Application which provides access to Application<br/>\n&gt; from within your TestCase. The inner class is constructed with a live<br/>\n&gt; application in the Application constructor.<br/>\n&gt; <br/>\n&gt;     /**<br/>\n&gt;      * provides static access to the application instance for the unit<br/>\n&gt; tests.<br/>\n&gt;      */<br/>\n&gt;     public static class Access {<br/>\n&gt; <br/>\n&gt;         private static Access instance;<br/>\n&gt;         private Application app;<br/>\n&gt; <br/>\n&gt;         private Access(Application app) {<br/>\n&gt;             this.app = app;<br/>\n&gt;         }<br/>\n&gt; <br/>\n&gt;         public static Access instance() {<br/>\n&gt;             return instance;<br/>\n&gt;         }<br/>\n&gt; <br/>\n&gt;         public Application application() {<br/>\n&gt;             return app;<br/>\n&gt;         }<br/>\n&gt; <br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt; Then in your test case you just write<br/>\n&gt; Application.Access.instance().application() to get hold of the reference.<br/>\n&gt; From there you can call pageWithName() or whatever to get hold of pages, a<br/>\n&gt; Session etc.<br/>\n&gt; <br/>\n&gt; I havn&#39;t yet got this working in a deployment environment, but it&#39;s been<br/>\n&gt; very useful in my development environment.<br/>\n&gt; <br/>\n&gt; Hope that helps,<br/>\n&gt; <br/>\n&gt; Emily<br/>\n&gt; <br/>\n&gt; ----- posted to &#39;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:webobjects-dev@...\">webobjects-dev@...</a>&#39; on Mon 5th Feb -------<br/>\n&gt; <br/>\n&gt; I have started to introduce unit testing to an existing WO application. I<br/>\n&gt; have used JUnit on previous pure Java projects and I know how valuable it<br/>\n&gt; is<br/>\n&gt; to have them. One of the problems I found running JUnit with WO is that<br/>\n&gt; your<br/>\n&gt; WOComponents etc need to be instantiated with suitably initialised<br/>\n&gt; Application and Session objects, so I found I needed to kick the tests off<br/>\n&gt; from within the running application, instead of kicking off the tests and<br/>\n&gt; having them instantiate the application. Therefore I&#39;ve put this bit of<br/>\n&gt; code<br/>\n&gt; in the constructor of my Main class, which is called after the application<br/>\n&gt; is properly started up and is ready to go:<br/>\n&gt; <br/>\n&gt;       public Main() {<br/>\n&gt;         app = (Application) application();<br/>\n&gt;         s = (Session) session();<br/>\n&gt; <br/>\n&gt;         if (app.shouldRunTests() && !app.testsRunningNow()) {<br/>\n&gt;             app.setTestsRunningNow(true);<br/>\n&gt; <br/>\n&gt;             // run the tests in their own thread<br/>\n&gt;             Runnable runnable = new Runnable(){<br/>\n&gt;                 public void run() {<br/>\n&gt;                     new junit.ui.TestRunner().start(new<br/>\n&gt; String[]{&quot;AllTests&quot;}, new junit.util.StandardTestSuiteLoader());<br/>\n&gt;                 }<br/>\n&gt;             };<br/>\n&gt;             Thread testThread = new java.lang.Thread(runnable);<br/>\n&gt;             testThread.start();<br/>\n&gt;         }<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt; The unit tests run in their own thread, but my application wasn&#39;t designed<br/>\n&gt; for multithreading, so I usually wait until all my unit tests have<br/>\n&gt; finished<br/>\n&gt; before trying to access the application manually. The other thing is that<br/>\n&gt; if<br/>\n&gt; you click &quot;exit&quot; on the unit test window, your whole application exits - I<br/>\n&gt; havn&#39;t found a way round this yet. Also note that my tests have to be<br/>\n&gt; really<br/>\n&gt; careful to leave my Application class in the same state it found it. (It&#39;s<br/>\n&gt; fairly easy to set it up so that every test gets its own session).<br/>\n&gt; <br/>\n&gt; As for functional, (black box, user perspective) tests, I tried WOUnit,<br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://wounit.jmltech.com/\">http://wounit.jmltech.com/</a>&gt; (I just tried the site and it&#39;s down - anyone<br/>\n&gt; know what happened to it?) which is based on httpUnit. I found it to be<br/>\n&gt; more<br/>\n&gt; designed for static sites, and wasn&#39;t actually giving me much once I<br/>\n&gt; needed<br/>\n&gt; to log in and keep track of my session state, so I just used plain<br/>\n&gt; httpUnit.<br/>\n&gt; This was working well until I ran into a brick wall: javascript and<br/>\n&gt; VBScript. My pages are absolutely littered with the stuff, and httpUnit<br/>\n&gt; doesn&#39;t have any kind of scripting interpreter and can&#39;t imitate a browser<br/>\n&gt; in that way. I had to put creation of automated functional tests on hold<br/>\n&gt; basically, until either httpUnit adds support for scripting or we manage<br/>\n&gt; to<br/>\n&gt; refactor out the scripting from our pages.<br/>\n&gt; <br/>\n&gt; I&#39;d be very interested to hear how other WO developers have been using<br/>\n&gt; JUnit<br/>\n&gt; or other unit testing frameworks, or if you have criticisms of my<br/>\n&gt; approach.<br/>\n&gt; <br/>\n&gt; Regards,<br/>\n&gt; Emily<br/>\n&gt; <br/>\n&gt; adera + Emily Bache<br/>\n&gt; Maskingatan 5<br/>\n&gt; 417 64 GÃ¶teborg<br/>\n&gt; e-mail:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:emily.bache@...\">emily.bache@...</a><br/>\n&gt; phone int +46 (0)31 779 35 00<br/>\n&gt; direct +46 (0)31 779 35 14<br/>\n&gt; mobile +46 (0)703 73 35 14<br/>\n&gt; fax +46 (0)31 779 35 99<br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.aderagroup.com\">http://www.aderagroup.com</a>&gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Yahoo! Groups Sponsor\t <br/>\n&gt; <br/>\n&gt;  <br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://rd.yahoo.com/M=176325.1312152.2904070.1252795/D=egroupmail/S=17000\">http://rd.yahoo.com/M=176325.1312152.2904070.1252795/D=egroupmail/S=17000</a><br/>\n&gt; 07181:N/A=590881/R=1/*<a rel=\"nofollow\" target=\"_blank\" href=\"http://domains.yahoo.com/\">http://domains.yahoo.com/</a>&gt;<br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://rd.yahoo.com/M=176325.1312152.2904070.1252795/D=egroupmail/S=17000\">http://rd.yahoo.com/M=176325.1312152.2904070.1252795/D=egroupmail/S=17000</a><br/>\n&gt; 07181:N/A=590881/R=2/*<a rel=\"nofollow\" target=\"_blank\" href=\"http://domains.yahoo.com/\">http://domains.yahoo.com/</a>&gt;\t<br/>\n&gt; \t\t<br/>\n&gt;  <br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://us.adserver.yahoo.com/l?M=176325.1312152.2904070.1252795/D=egroupm\">http://us.adserver.yahoo.com/l?M=176325.1312152.2904070.1252795/D=egroupm</a><br/>\n&gt; ail/S=1700007181:N/A=590881/rand=281573470&gt;\t<br/>\n&gt; <br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; <br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 480, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "982356653", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 477, 
    "headers": {
        "messageIdInHeader": "PEQ2ODIzREE4RUEwNkQzMTE4MTVGMDA5MDI3MkE3QjdCQzUyNkY1QGV4Y2hhbmdlLmRtd2dyb3VwLmNvbT4="
    }
}