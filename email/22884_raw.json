{
    "numMessagesInTopic": 14, 
    "nextInTime": 22885, 
    "senderId": "mf7djKddK4b9awge36Tl-JS2NY8yNhGTFNSa9eHD7o4ru8YICls8rFfbhfik4WIYi60YFeYxAPXUiE9ccN8G_sSTFIpKm35BwNT_JFPuaX88JJer3MXy7Vw-Mqac2A", 
    "systemMessage": false, 
    "subject": "Re: [junit] More example JUnit code", 
    "from": "=?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "Simon, Actually, I was wrong: using @BeforeClass will break your tests. Since JUnit reinstantiates a brand new class before each test method, only the first ", 
    "msgId": 22884, 
    "rawEmail": "Return-Path: &lt;cbeust@...&gt;\r\nX-Sender: cbeust@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 87352 invoked from network); 23 Aug 2010 02:37:14 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m12.grp.re1.yahoo.com with QMQP; 23 Aug 2010 02:37:14 -0000\r\nX-Received: from unknown (HELO mail-gw0-f51.google.com) (74.125.83.51)\n  by mta2.grp.re1.yahoo.com with SMTP; 23 Aug 2010 02:37:14 -0000\r\nX-Received: by gwb17 with SMTP id 17so2085667gwb.38\n        for &lt;junit@yahoogroups.com&gt;; Sun, 22 Aug 2010 19:37:14 -0700 (PDT)\r\nX-Received: by 10.151.59.20 with SMTP id m20mr4659650ybk.88.1282531032082; Sun,\n 22 Aug 2010 19:37:12 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.150.12.21 with HTTP; Sun, 22 Aug 2010 19:36:52 -0700 (PDT)\r\nIn-Reply-To: &lt;AANLkTimv6ah8drxKtaxDkFrZFJEta-eKHSqgFkmPfoXS@...&gt;\r\nReferences: &lt;AANLkTikv4gPxGg-hCw+svedTeYebT+k9wRNXZEFdwFTE@...&gt;\n &lt;AANLkTimHBRFMs6agA+jHUNSXCpR5rxN5TfvvruQz2wTb@...&gt; &lt;AANLkTimv6ah8drxKtaxDkFrZFJEta-eKHSqgFkmPfoXS@...&gt;\r\nDate: Sun, 22 Aug 2010 19:36:52 -0700\r\nX-Google-Sender-Auth: KH9z00Qg8zfAFFOhrbRJN-LV3Xw\r\nMessage-ID: &lt;AANLkTi=wwf8Tfi-y1Uaqaw4jJhERKo_JKdLBcZfOwAEs@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: =?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;\r\nSubject: Re: [junit] More example JUnit code\r\nX-Yahoo-Group-Post: member; u=31449770; y=bFFQiOk_O2rqepn_9xUUCLkY2EO1sEbxmGmLQezrybWe\r\nX-Yahoo-Profile: cbeust\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nSimon,\n\nActually, I was wrong: using @BeforeClass will break your tests. Si=\r\nnce JUnit\nreinstantiates a brand new class before each test method, only th=\r\ne first\nmethod will get the correct values for these fields. Subsequent met=\r\nhods will\nsee null.\n\nAnyway, these values are constants, so they should be =\r\nstatic final. Which\nsolves the problem and also gets rid of @Before and @Af=\r\nter.\n\nAbout the fields: what bothers me with this approach is that you&#39;re e=\r\nxposing\na lot of fields to all your test methods and they only use a very s=\r\nmall\nsubset of these. In effect, fields are like global variables and they =\r\nmake\nit harder for someone coming to improve your class to understand exact=\r\nly\nwhat fields are okay to modify and which tests need to be updated as wel=\r\nl. I\nlike to keep the data needed by each test method as local as possible =\r\nto\navoid this kind of problem.\n\nParameterized tests help a lot with this ki=\r\nnd of locality, and they turn out\nto be a great match for this particular p=\r\nroblem.\n\nWith all this in mind, here is my version (TestNG syntax, porting =\r\nto JUnit\nis left as an exercise to the reader):\n\npublic class FractionTest =\r\n{\n\n  // A few useful constants\n  private static final Fraction F_1_1 =3D ne=\r\nw Fraction(1, 1);\n  private static final Fraction F_1_2 =3D new Fraction(1,=\r\n 2);\n  private static final Fraction F_1_3 =3D new Fraction(1, 3);\n  privat=\r\ne static final Fraction F_2_1 =3D new Fraction(2, 1);\n\n  /**\n   * The data =\r\nset used to verify reduction, the last parameter of each\n   * row is the ex=\r\npected value.\n   */\n  @DataProvider\n  public Object[][] reduceData() {\n    =\r\nreturn new Object[][] {\n      new Object[] { F_1_1, F_1_1 },\n      new Obje=\r\nct[] { new Fraction(2, 2), F_1_1 },\n      new Object[] { new Fraction(4, 2)=\r\n, F_2_1 },\n      // ...\n    };\n  }\n\n  @Test(dataProvider =3D &quot;reduceData&quot;)\n=\r\n  public void verifyReduce(Fraction input, Fraction expected) {\n    Assert.=\r\nassertEquals(input.reduce(), expected);\n  }\n\n  /**\n   * The data set used t=\r\no verify multiplication, the last parameter of each\n   * row is the expecte=\r\nd value after rediction\n   */\n  @DataProvider\n  public Object[][] multiplic=\r\nationData() {\n    return new Object[][] {\n      new Object[] { F_1_1, F_1_1=\r\n, F_1_1 },\n      new Object[] { new Fraction(2, 2), new Fraction(3, 2), new=\r\n Fraction(3,\n2) },\n      // ...\n    };\n  }\n\n  @Test(dataProvider =3D &quot;multi=\r\nplicationData&quot;)\n  public void verifyReduce(Fraction f1, Fraction f2, Fracti=\r\non expected) {\n    // Assuming that multiply() will call reduce() before re=\r\nturning its\nresult\n    Assert.Equals(f1.multiply(f2), expected);\n    Assert=\r\n.Equals(f2.multiply(f1), expected);\n  }\n}\n\nYou can probably see how paramet=\r\nerized tests improve the locality of your\ntests and how adding values to ex=\r\ntend the coverage is trivial.\n\nAlso note that this is a great example of ho=\r\nw misleading code coverage can\nbe: you would get 100% test coverage if you =\r\nonly returned 1 data set in each\ndata provider, but your tests would be ver=\r\ny poor. Adding values to your data\nprovider will do nothing for your code c=\r\noverage but it will considerably\nimprove the quality of your tests.\n\n-- \nC=\r\n=C3=A9dric\n\n\nOn Sun, Aug 22, 2010 at 6:11 PM, Simon Chappell &lt;\nsimonpeterch=\r\nappell@...&gt; wrote:\n\n&gt; Cedric,\n&gt;\n&gt; Good points.\n&gt;\n&gt; 1. I&#39;m not used to=\r\n the @BeforeClass. I will make that change, as it is a\n&gt; better fit.\n&gt; 2. T=\r\nhe assigning of nulls is just to emphasize cleaning up after yourself.\n&gt; I\n=\r\n&gt; agree that it&#39;s technically unnecessary.\n&gt; 3. Let me think about the para=\r\nmeterized thing. I think for eight values,\n&gt; with their descriptive names, =\r\nit brings more value leaving them as they\n&gt; are,\n&gt; although I may change wh=\r\nere they are defined.\n&gt;\n&gt; Thank you for you considered points. Hopefully th=\r\nis will help us all\n&gt; sharpen\n&gt; our JUnit writing.\n&gt;\n&gt; Simon\n&gt;\n&gt;\n&gt; 2010/8/2=\r\n2 C=C3=A9dric Beust =E2=99=94 &lt;cedric@...&gt;\n&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Hi Simon,\n&gt; =\r\n&gt;\n&gt; &gt; A few quick questions/remarks:\n&gt; &gt;\n&gt; &gt; - Why do you initialize the fr=\r\nactions in @Before and not @BeforeClass,\n&gt; &gt; since you don&#39;t seem to ever m=\r\nodify them?\n&gt; &gt; - Why assigning them to null in @After?\n&gt; &gt; - Given the nat=\r\nure of your tests, I would probably use parameterized\n&gt; &gt; tests to supply o=\r\nnly the data that each test needs instead of making\n&gt; these\n&gt; &gt; eight field=\r\ns available to all the test methods all the time.\n&gt; &gt;\n&gt; &gt; --\n&gt; &gt; C=C3=A9dri=\r\nc\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; On Sun, Aug 22, 2010 at 3:47 PM, Simon Chappell &lt;\n&gt; &gt; simonpe=\r\nterchappell@... &lt;simonpeterchappell%40gmail.com&gt;&gt; wrote:\n&gt; &gt;\n&gt; &gt; &gt; Fo=\r\nllowing up on my previous offering of example JUnit code, I have\n&gt; pushed\n&gt;=\r\n &gt; a\n&gt; &gt; &gt; project called Fraction to GitHub. This implements classic mathe=\r\nmatical\n&gt; &gt; &gt; fractions and was written in a test first manner and has docu=\r\nmented\n&gt; unit\n&gt; &gt; &gt; tests to help those learning JUnit see one style (my st=\r\nyle!) of test\n&gt; &gt; &gt; implementation.\n&gt; &gt; &gt;\n&gt; &gt; &gt; The code may be found at:\n&gt;=\r\n &gt; &gt;\n&gt; &gt; &gt; http://github.com/simonpeter/Fraction\n&gt; &gt; &gt;\n&gt; &gt; &gt; I hope that yo=\r\nu find it useful.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Simon\n&gt; &gt; &gt; (one of the JUnit mailing list mo=\r\nderators)\n&gt; &gt; &gt;\n&gt; &gt; &gt; --\n&gt; &gt; &gt; simonpeter.org | simonpeter.com | newlife-up=\r\nc.org\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; [Non-text portions of this message have been remove=\r\nd]\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt;\n&gt; &gt; &gt;=\r\n Yahoo! Groups Links\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt; --\n&gt; &gt; C=C3=A9dric\n&gt; &gt;=\r\n\n&gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;\n=\r\n&gt;\n&gt; --\n&gt; simonpeter.org | simonpeter.com | newlife-upc.org\n&gt;\n&gt;\n&gt; [Non-text =\r\nportions of this message have been removed]\n&gt;\n&gt;\n&gt;\n&gt; -----------------------=\r\n-------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n-- \nC=C3=A9dric\n\n\n[Non-text=\r\n portions of this message have been removed]\n\n\n", 
    "profile": "cbeust", 
    "topicId": 22880, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 31449770, 
    "prevInTime": 22883, 
    "contentTrasformed": false, 
    "postDate": "1282531012", 
    "canDelete": false, 
    "nextInTopic": 22885, 
    "prevInTopic": 22883, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PEFBTkxrVGlrdjRnUHhHZy1oQ3crc3ZlZFRlWWViVCtrOXdSTlhaRUZkd0ZURUBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltSEJSRk1zNmFnQStqSFVOU1hDcFI1cnhONVRmdnZydVF6MndUYkBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4="
    }
}