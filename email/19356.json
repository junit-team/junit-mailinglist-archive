{
    "numMessagesInTopic": 3, 
    "nextInTime": 19357, 
    "senderId": "J30iiC-OJFgZcJLoNWQPL1cOySoCKpQKvWtXynCixJFDuWmEz75_x85CIWqqNkXwZdY30U_cyKw8L_axeTAf3MNquDFBugvEF3zN6lpZcnex754", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing An Inherited Class", 
    "from": "&quot;Andrew McDonagh&quot; &lt;andrewmcdonagh@...&gt;", 
    "authorName": "Andrew McDonagh", 
    "msgSnippet": "I think the real issue here is using Inheritance when its not suitable. We are having to test the logic of the derived classes by using the functioanlity of", 
    "msgId": 19356, 
    "profile": "andy_ipaccess", 
    "topicId": 19351, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 283773244, 
    "messageBody": "<div id=\"ygrps-yiv-1334008055\">I think the real issue here is using Inheritance when its not suitable.<br/>\n<br/>\nWe are having to test the logic of the derived classes by using the<br/>\nfunctioanlity of the base class to parse the xml files.<br/>\n<br/>\nUsing a Delegation design, the unit tests can be created that test a class<br/>\nparses the xml file correctly, by having that class delegate each node type<br/>\nto a stand-alone separate class, not an inherited method.<br/>\n<br/>\nThis way you can use Mock Node handlers to see if the parsing class called<br/>\nthem correctly and with the right data.<br/>\n<br/>\nThen the node handling classes can be unit test on their own, without the<br/>\nneed to load an XML file...just provide them the data they need.<br/>\n<br/>\nIn other words, Google &#39;replace conditional with strategy&#39;<br/>\n<br/>\nRegards<br/>\n<br/>\nAndrew<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 5/14/07, James Abley &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:james.abley@...\">james.abley@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt;   On 11/05/07, melvinmah &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:melvinmah@...\">melvinmah@...</a> &lt;melvinmah%40yahoo.com&gt;&gt;<br/>\n&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; I have created a class that literally inherits other classes. This new<br/>\n&gt; &gt; class is specifically written to read my new XML nodes that I have<br/>\n&gt; &gt; introduced in the new file. This is done to avoid creating potential<br/>\n&gt; &gt; complications or shall I say dependency problems from adding material<br/>\n&gt; &gt; to an existing class.<br/>\n&gt; &gt;<br/>\n&gt; &gt; The class reads this setting from this file called config.xml<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;section-manage&gt;<br/>\n&gt; &gt; &lt;display section_id=&quot;accession&quot; order=&quot;asc&quot; sort_column=&quot;1&quot; /&gt;<br/>\n&gt; &gt; &lt;display section_id=&quot;serials&quot; order=&quot;asc&quot; sort_column=&quot;2&quot; /&gt;<br/>\n&gt; &gt; &lt;/section-manage&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; So my new class literally reads as follows:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Class name is: SectionManageHandler<br/>\n&gt; &gt; The following is the main method of how it reads the XML node.<br/>\n&gt; &gt;<br/>\n&gt; &gt; protected void readFullDisplayLinkabilityConfig(Element elmDisplay) {<br/>\n&gt; &gt; lDisplayTags = new Vector();<br/>\n&gt; &gt; Element[] aelmFull =<br/>\n&gt; &gt; DOMUtils.getChildElementsByTagName(elmDisplay, &quot;full-display&quot;);<br/>\n&gt; &gt; if (aelmFull != null) {<br/>\n&gt; &gt; Element[] aelmSectionView =<br/>\n&gt; &gt; DOMUtils.getChildElementsByTagName(aelmFull[0],<br/>\n&gt; &gt; &quot;section-manage&quot;);<br/>\n&gt; &gt; Element[] aelmSectionDisplay =<br/>\n&gt; &gt; DOMUtils.getChildElementsByTagName(aelmSectionView[0],<br/>\n&gt; &gt; &quot;display&quot;);<br/>\n&gt; &gt; for (int i=0; i &lt;<br/>\n&gt; &gt; ArrayLengthCounter.countLength(aelmSectionDisplay); i++) {<br/>\n&gt; &gt; String szSectionId =<br/>\n&gt; &gt; aelmSectionDisplay[i].getAttribute(&quot;section_id&quot;);<br/>\n&gt; &gt; if (szSectionId.equalsIgnoreCase(&quot;acquisition&quot;)) {<br/>\n&gt; &gt; szSectionId = &quot;acquisition&quot;;<br/>\n&gt; &gt; } else if (szSectionId.equalsIgnoreCase(&quot;serials&quot;)) {<br/>\n&gt; &gt; szSectionId = &quot;serials&quot;;<br/>\n&gt; &gt; } else if (szSectionId.equalsIgnoreCase(&quot;accession&quot;)) {<br/>\n&gt; &gt; szSectionId = &quot;accession&quot;;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; lDisplayTags.add(szSectionId);<br/>\n&gt; &gt; String szSortOrder =<br/>\n&gt; &gt; aelmSectionDisplay[i].getAttribute(&quot;order&quot;);<br/>\n&gt; &gt; if (szSortOrder != null) {<br/>\n&gt; &gt; if (szSortOrder.equalsIgnoreCase(&quot;asc&quot;)){<br/>\n&gt; &gt; szSortOrder = &quot;ASC&quot;;<br/>\n&gt; &gt; } else if (szSortOrder.equalsIgnoreCase(&quot;desc&quot;)) {<br/>\n&gt; &gt; szSortOrder = &quot;DESC&quot;;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; } else {<br/>\n&gt; &gt; szSortOrder = &quot;ASC&quot;;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; lDisplayTags.add(&quot;szSortOrder&quot;);<br/>\n&gt; &gt; int iSortColumn =<br/>\n&gt; &gt; Integer.parseInt(aelmSectionDisplay[i].getAttribute(&quot;sort_column&quot;));<br/>\n&gt; &gt; if(iSortColumn &lt; 1) {<br/>\n&gt; &gt; iSortColumn = 1;<br/>\n&gt; &gt; } else if (iSortColumn &gt; 10) {<br/>\n&gt; &gt; iSortColumn = 1;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; lDisplayTags.add(iSortColumn);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; }<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; I want to make sure that the class work so it means that I have to<br/>\n&gt; &gt; write a Test class file. I tried writing various ways but without<br/>\n&gt; &gt; success. My test conditions are:<br/>\n&gt; &gt;<br/>\n&gt; &gt; 1. Only proceeds to read the node if section_id is not null.<br/>\n&gt;<br/>\n&gt; public void testSectionWithNullIdIsIgnored() {<br/>\n&gt; Config config = Config.readXML(&quot;/path/to/some/xml&quot;);<br/>\n&gt; assertEquals(0, config.getSections().length);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; Where the XML has a suitably null section id and getSections() returns<br/>\n&gt; an array of Section objects.<br/>\n&gt;<br/>\n&gt; &gt; 2. If value of order is incorrect or blank, default value &quot;asc&quot; will<br/>\n&gt; &gt; be used in place.<br/>\n&gt;<br/>\n&gt; public void testSectionWithBlankOrderIsAscending() {<br/>\n&gt; Config config = Config.readXML<br/>\n&gt; (&quot;/path/to/some/xml/with/unspecified/order&quot;);<br/>\n&gt; assertEquals(Order.ASCENDING, config.getSections()[0].getOrder());<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; pubilc void testSectionWithInvalidOrderIsAscending() {<br/>\n&gt; Config config = Config.readXML(&quot;/path/to/some/xml/with/invalid/order&quot;);<br/>\n&gt; assertEquals(Order.ASCENDING, config.getSections()[0].getOrder());<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; &gt; 3. If value of sort_column is blank or it is either less than 1 or<br/>\n&gt; &gt; more than 10, the value 1 will be used.<br/>\n&gt;<br/>\n&gt; Similar to my second answer.<br/>\n&gt;<br/>\n&gt; I hope this gives you some avenues of thought to explore.<br/>\n&gt;<br/>\n&gt; Cheers,<br/>\n&gt;<br/>\n&gt; James<br/>\n&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Pls advise or suggest workaround solutions to this -seriously I need<br/>\n&gt; &gt; help. Thanks.<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 19355, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1179155778", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 19355, 
    "headers": {
        "inReplyToHeader": "PDIzZmNlOGU2MDcwNTE0MDY1MGgzN2RjY2Y3N244ODIxNTkwYTg3OTI2YTcyQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDM1YzUwN2QzMDcwNTE0MDgxNm40ODBhMjg3N3A4MTA3YTkxMmIwOTdjNzJkQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGYyMjBvbytzYWk1QGVHcm91cHMuY29tPgkgPDIzZmNlOGU2MDcwNTE0MDY1MGgzN2RjY2Y3N244ODIxNTkwYTg3OTI2YTcyQG1haWwuZ21haWwuY29tPg=="
    }
}