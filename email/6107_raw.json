{
    "topicId": 6097, 
    "postDate": "1036584637", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Timothy Wall &lt;twall@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "si-9kPorehndSeNpq_ZVpTqTxyDiDbTlzwf_RPcgI2-szwTjzOR93BrJoPIQrZxCJoRXDJLNZDshTqWrN6S83m135sbRsrCUVdw", 
    "nextInTime": 6108, 
    "userId": 106503903, 
    "prevInTime": 6106, 
    "prevInTopic": 6101, 
    "headers": {
        "inReplyToHeader": "PDAwMDAwMWMyODUyZiRlMTJhMmQzMCQwNTAxYThjMEBqYXZhbGFwdG9wPg==", 
        "messageIdInHeader": "PEMyNjA5RURDLUYxODAtMTFENi05NDJFLTAwMzA2NUJGODNEQUBvY3VsdXN0ZWNoLmNvbT4="
    }, 
    "authorName": "Timothy Wall", 
    "numMessagesInTopic": 4, 
    "msgSnippet": "This is the real kicker.  How does JUnit specify the classpath for the code under test?  The original assumption was to use the existing classpath (I suppose", 
    "contentTrasformed": false, 
    "msgId": 6107, 
    "nextInTopic": 0, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;twall@...&gt;\r\nX-Sender: twall@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_3_0); 6 Nov 2002 12:10:35 -0000\r\nReceived: (qmail 68398 invoked from network); 6 Nov 2002 12:10:35 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m1.grp.scd.yahoo.com with QMQP; 6 Nov 2002 12:10:35 -0000\r\nReceived: from unknown (HELO mail00.oculustech.com) (64.221.47.99)\n  by mta1.grp.scd.yahoo.com with SMTP; 6 Nov 2002 12:10:34 -0000\r\nReceived: from oculustech.com (dsl-64-192-85-73.telocity.com [64.192.85.73])\n\tby mail00.oculustech.com (Postfix) with ESMTP id 2F33DBE12\n\tfor &lt;junit@yahoogroups.com&gt;; Wed,  6 Nov 2002 07:09:16 -0500 (EST)\r\nDate: Wed, 6 Nov 2002 07:10:37 -0500\r\nSubject: Re: [junit] loader constraints violated\r\nContent-Type: text/plain; delsp=yes; charset=US-ASCII; format=flowed\r\nMime-Version: 1.0 (Apple Message framework v546)\r\nTo: junit@yahoogroups.com\r\nContent-Transfer-Encoding: 7bit\r\nIn-Reply-To: &lt;000001c2852f$e12a2d30$0501a8c0@javalaptop&gt;\r\nMessage-Id: &lt;C2609EDC-F180-11D6-942E-003065BF83DA@...&gt;\r\nX-Mailer: Apple Mail (2.546)\r\nFrom: Timothy Wall &lt;twall@...&gt;\r\nX-Yahoo-Group-Post: member; u=106503903\r\n\r\nThis is the real kicker.  How does JUnit specify the classpath for the  \ncode under test?  The original assumption was to use the existing  \nclasspath (I suppose you can call this the simplest thing that could  \npossibly work at the time).  But it doesn&#39;t work for a certain class of  \nproblems, so the choice is either re-do an implementation or use  \nsomething else.\n\nI think it&#39;s probably reasonable to require additional setup if you  \nwant to reload your test classes (since this wouldn&#39;t break existing  \nstuff).   Maybe a &quot;test.class.path&quot; property set that the TestRunners  \ncan use to create a new class loader per test case instance.\n\nWhile you might argue that you only want the reloading overhead when  \nyou really need it, the way tests run now they don&#39;t *really* run in a  \nclean environment each time, although with most small unit tests that&#39;s  \nnot really an issue.\n\n\nOn Tuesday, November 5, 2002, at 08:00 PM, Scott Stirling wrote:\n\n&gt; This is indeed the solution.  I&#39;ve yet to see any other working  \n&gt; solution\n&gt; for a dynamically reloading classloader.  Every J2EE app server and\n&gt; Servlet container has had to deal with this same problem to make rapid\n&gt; dev/deploy cycles possible (ditto for Ant).\n&gt;\n&gt; I think Erich Gamma took a stab at fixing this, but I&#39;m not sure why he\n&gt; never followed through on it.  Busy, probably.\n&gt;\n&gt; How can it be made as easy as possible for people to set up their\n&gt; &quot;test-case classpath?&quot;  Some thought should go into how to implement\n&gt; this.  Most app server have deploy dirs or component packaging  \n&gt; contracts\n&gt; that ensure things get loaded by the appropriate custom classloader(s).\n&gt; What should JUnit do?\n&gt;\n&gt; Scott Stirling\n&gt;\n&gt;&gt; -----Original Message-----\n&gt;&gt; From: Timothy Wall [mailto:twall@...]\n&gt;&gt; Sent: Tuesday, November 05, 2002 7:43 AM\n&gt;&gt; To: junit@yahoogroups.com\n&gt;&gt; Subject: Re: [junit] loader constraints violated\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; I think the real solution to the (broken) class loader is to\n&gt;&gt; fix it so\n&gt;&gt; that it only searches a more narrowly specified classpath\n&gt;&gt; when loading\n&gt;&gt; test classes, delegating loading of all other classes to the\n&gt;&gt; app class\n&gt;&gt; loader (or some other suitably defined parent).\n&gt;&gt;\n&gt;&gt; The custom class loader doesn&#39;t even have to &quot;preload&quot; the test\n&gt;&gt; classes, since its parent will not find the test classes in\n&gt;&gt; question.\n&gt;&gt; As long as a new instance is used for each test case, you\n&gt;&gt; will have a\n&gt;&gt; fresh load of the class under test on each run.\n&gt;&gt;\n&gt;&gt; A URLClassLoader might even be sufficient for this purpose.\n&gt;&gt;\n&gt;&gt; If I get some time I&#39;ll submit a patch, since I&#39;m using a similar\n&gt;&gt; solution for the abbot junit extension...\n&gt;&gt;\n&gt;&gt; On Monday, November 4, 2002, at 01:57 AM, Chris wrote:\n&gt;&gt;\n&gt;&gt;&gt; Here&#39;s a weird error and the solution, so that the next poor shmuck\n&gt;&gt;&gt; can find it:\n&gt;&gt;&gt;\n&gt;&gt;&gt; When running a junit test suite via Ant, I got this error: [junit]\n&gt;&gt;&gt; loader constraints violated when linking\n&gt;&gt; org/xml/sax/InputSource class\n&gt;&gt;&gt;\n&gt;&gt;&gt; This appeas to be the same problem with junit&#39;s custom class loader\n&gt;&gt;&gt; that is widely documented, and solved by adding\n&gt;&gt;&gt; excluded.6=org.w3c.dom.* and excluded.7=org.xml.sax.* to the file\n&gt;&gt;&gt; excluded.properties. Only problem is, I already have those lines.\n&gt;&gt;&gt;\n&gt;&gt;&gt; The root of the problem for me was that I had jrun.jar in my\n&gt;&gt;&gt; classpath. jrun.jar is an 8 meg monster that comes with JRun4 and\n&gt;&gt;&gt; includes its own copy of the sax classes. Taking jrun.jar out of my\n&gt;&gt;&gt; classpath solved the problem and the tests ran fine.\n&gt;&gt;&gt;\n&gt;&gt;&gt; If anyone happens to know why, I&#39;d like to hear it.\n&gt;\n&gt;\n&gt;\n&gt; ------------------------ Yahoo! Groups Sponsor  \n&gt; ---------------------~--&gt;\n&gt; Get 128 Bit SSL Encryption!\n&gt; http://us.click.yahoo.com/JjlUgA/vN2EAA/kG8FAA/5cFolB/TM\n&gt; --------------------------------------------------------------------- \n&gt; ~-&gt;\n&gt;\n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;\n&gt;\n&gt; Your use of Yahoo! Groups is subject to  \n&gt; http://docs.yahoo.com/info/terms/\n&gt;\n&gt;\n\n\n", 
    "subject": "Re: [junit] loader constraints violated"
}