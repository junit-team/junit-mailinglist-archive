{
    "numMessagesInTopic": 21, 
    "nextInTime": 15541, 
    "senderId": "zYbUUaoUecYtdj2xaq94DAEf72i7LYE8X8CM5Vjhdd7Tx0xM5r9SWGgya6GWZKjexc357fePdpjOdKbYiilFaq70zs9DDNDByJMfOWo3pPH-blz_QH2bCF3qVXYnp1AeuzSF", 
    "systemMessage": false, 
    "subject": "Re: [junit] Expected exception pitfall and pattern", 
    "from": "=?UTF-8?Q?C=C3=A9dric_Beust_=E2=99=94_?= &lt;cbeust@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "Interesting catch, Jon. Still, I wonder if it s worth the trouble:  how likely is it that the exception you expect will be thrown in a different location than", 
    "msgId": 15540, 
    "profile": "cbeust", 
    "topicId": 15536, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 199443513, 
    "messageBody": "<div id=\"ygrps-yiv-1515497025\">Interesting catch, Jon.<br/>\n<br/>\nStill, I wonder if it&#39;s worth the trouble:  how likely is it that the<br/>\nexception you expect will be thrown in a different location than where you<br/>\nexpect it?<br/>\n<br/>\nAs for your solution, I&#39;m a bit worried by its black magic (where is<br/>\nexceptionFlag declared?  Not in the base class since that base class is no<br/>\nlonger a requirement).<br/>\n<br/>\nNote that you can already solve this problem yourself, by the way:<br/>\n<br/>\n@Test(expected=IllegalArgumentException.class)<br/>\npublic void test()<br/>\n{<br/>\n   Account f = null;<br/>\n   try {<br/>\n     f = new Account(10);<br/>\n   }<br/>\n   catch(Exception ex) {<br/>\n     fail(...);<br/>\n   }<br/>\n   f.withdrawCash(20);<br/>\n}<br/>\n<br/>\n--<br/>\nCédric<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://testng.org\">http://testng.org</a><br/>\n<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 11/28/05, Jon Skeet &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jon.skeet@...\">jon.skeet@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt; There is a problem with the @Test(expected=...) pattern which I&#39;m sure<br/>\n&gt; has been noted elsewhere. Namely, it covers up problems if the expected<br/>\n&gt; exception is thrown at an unexpected point. The desired behaviour is<br/>\n&gt; really a try/catch around one particular line of code. For instance:<br/>\n&gt;<br/>\n&gt; @Test(expected=IllegalArgumentException.class)<br/>\n&gt; public void test()<br/>\n&gt; {<br/>\n&gt;     Account f = new Account(10);<br/>\n&gt;     f.withdrawCash(20);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; is equivalent to:<br/>\n&gt;<br/>\n&gt; try<br/>\n&gt; {<br/>\n&gt;     Account f = new Account(10);<br/>\n&gt;     f.withdrawCash(20);<br/>\n&gt;     fail(&quot;Expected exception&quot;);<br/>\n&gt; }<br/>\n&gt; catch (IllegalArgumentException e)<br/>\n&gt; {<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; instead of the desired:<br/>\n&gt;<br/>\n&gt; Account f = new Account(10);<br/>\n&gt; try<br/>\n&gt; {<br/>\n&gt;     f.withdrawCash(20);<br/>\n&gt;     fail(&quot;Expected exception&quot;);<br/>\n&gt; }<br/>\n&gt; catch (IllegalArgumentException e)<br/>\n&gt; {<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Now, there is a way around this (other than writing the code<br/>\n&gt; &quot;long-hand&quot;) - by keeping a flag which is checked during tear-down, and<br/>\n&gt; only set immediately before the last line of the code:<br/>\n&gt;<br/>\n&gt; @Test(expected=IllegalArgumentException.class)<br/>\n&gt; public void test()<br/>\n&gt; {<br/>\n&gt;     exceptionFlag.clear();<br/>\n&gt;     Account f = new Account(10);<br/>\n&gt;     execeptionFlag.set();<br/>\n&gt;     f.withdrawCash(20);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; If this were only used when the test had an expected exception, it could<br/>\n&gt; be cleared on set-up.<br/>\n&gt;<br/>\n&gt; I *suspect* there&#39;s no point in making this part of the framework<br/>\n&gt; itself, but I just wondered whether anyone else had been thinking about<br/>\n&gt; it. It&#39;s never *actually* bitten me (as far as I&#39;m aware) when using<br/>\n&gt; NUnit, but it&#39;s always been a slight source of concern.<br/>\n&gt;<br/>\n&gt; Jon Skeet<br/>\n&gt; Senior Software Engineer<br/>\n&gt; CLEARSWIFT<br/>\n&gt; The MIMEsweeper Company<br/>\n&gt;<br/>\n&gt; DDI:               +44 (0) 1189  038  109<br/>\n&gt; Mobile:           +44 (0) 7970 158 865<br/>\n&gt; Switchboard:   +44 (0) 1189  038  903<br/>\n&gt; Fax:               +44 (0) 1189  039  000<br/>\n&gt; Web: www.clearswift.com<br/>\n&gt;<br/>\n&gt; Clearswift monitors, controls and protects all its messaging traffic in<br/>\n&gt; compliance with its corporate email policy using Clearswift products.<br/>\n&gt; Find out more about Clearswift, its solutions and services at<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.clearswift.com\">http://www.clearswift.com</a><br/>\n&gt;<br/>\n&gt; This communication is confidential and may contain privileged information<br/>\n&gt; intended solely for the named addressee(s). It may not be used or disclosed<br/>\n&gt; except for the purpose for which it has been sent. If you are not the<br/>\n&gt; intended recipient, you must not copy, distribute or take any action in<br/>\n&gt; reliance on it. Unless expressly stated, opinions in this message are those<br/>\n&gt; of the individual sender and not of Clearswift. If you have received this<br/>\n&gt; communication in error, please notify Clearswift by emailing<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:support@...\">support@...</a> quoting the sender and delete the message and any<br/>\n&gt; attached documents. Clearswift accepts no liability or responsibility for<br/>\n&gt; any onward transmission or use of emails and attachments having left the<br/>\n&gt; Clearswift domain.<br/>\n&gt;<br/>\n&gt; This footnote confirms that this email message has been swept by<br/>\n&gt; MIMEsweeper for Content Security threats, including computer viruses.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 15539, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1133204268", 
    "canDelete": false, 
    "nextInTopic": 15545, 
    "prevInTopic": 15536, 
    "headers": {
        "inReplyToHeader": "PDZFQUE4QUQ4MkQ3RUJGNDc4Q0NFMjYyRkEzMkM2QzY0MDFCNTZBMUFAR0VNSU5JLkVVUk9QRS5DTEVBUlNXSUZULkNPTT4=", 
        "messageIdInHeader": "PGI4NmI2YTljMDUxMTI4MTA1N201MTIzZmYwN2czMjcxZmExZTY5MzkxYWE0QG1haWwuZ29vZ2xlLmNvbT4=", 
        "referencesHeader": "PDZFQUE4QUQ4MkQ3RUJGNDc4Q0NFMjYyRkEzMkM2QzY0MDFCNTZBMUFAR0VNSU5JLkVVUk9QRS5DTEVBUlNXSUZULkNPTT4="
    }
}