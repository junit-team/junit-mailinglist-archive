{
    "numMessagesInTopic": 16, 
    "nextInTime": 11550, 
    "senderId": "NFADwkp6N-Et_joLNjVjV37V7vQRbecwywZ25_YT00RtifkrpfgmWm8CnyPoAS3bmKU9zaTE_7xNDwIIPExSYk3Q6OAi7VenbK_Y9MnZmg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Mock objects...", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... Only when it actually has the answer. :) ... Well, Part 2 uses them extensively, almost 100% dynamic mocks, even though it doesn t specifically have a", 
    "msgId": 11549, 
    "rawEmail": "Return-Path: &lt;jbrains@...&gt;\r\nX-Sender: jbrains@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 18475 invoked from network); 16 Jul 2004 21:33:25 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m7.grp.scd.yahoo.com with QMQP; 16 Jul 2004 21:33:25 -0000\r\nReceived: from unknown (HELO smtp100.rog.mail.re2.yahoo.com) (206.190.36.78)\n  by mta3.grp.scd.yahoo.com with SMTP; 16 Jul 2004 21:33:24 -0000\r\nReceived: from unknown (HELO ?192.168.1.119?) (jbrains@24.156.43.226 with plain)\n  by smtp100.rog.mail.re2.yahoo.com with SMTP; 16 Jul 2004 21:33:18 -0000\r\nMessage-ID: &lt;40F84974.6030508@...&gt;\r\nDate: Fri, 16 Jul 2004 17:32:36 -0400\r\nUser-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;cd9eat+mhvo@...&gt;\r\nIn-Reply-To: &lt;cd9eat+mhvo@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Remote-IP: 206.190.36.78\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;\r\nSubject: Re: [junit] Re: Mock objects...\r\nX-Yahoo-Group-Post: member; u=127224993\r\nX-Yahoo-Profile: nails762\r\n\r\ncypherfox wrote:\n&gt; Greetings,\n&gt; \n&gt; --- In junit@yahoogroups.com, &quot;J. B. Rainsberger&quot; &lt;jbrains@r...&gt;\n&gt; wrote:\n&gt;  &gt; cypherfox wrote:\n&gt;  &gt;\n&gt;  &gt; &gt; How the heck do people mock things like database\n&gt;  &gt; &gt; access classes, mail servers, arbitrary web requests,\n&gt;  &gt; &gt; etc., without writing a huge amount of logic?\n&gt;  &gt;\n&gt;  &gt; Surprisingly easily. You might just need some good examples. See\n&gt; _JUnit\n&gt;  &gt; Recipes_, part 2, for details.\n&gt; \n&gt; Heh...  Plug, plug, plug.  \n\nOnly when it actually has the answer. :)\n\n&gt; No argument, I&#39;ll probably read it, I&#39;m\n&gt; enough of a JUnit fan for that.  I&#39;ve read several other books and\n&gt; none seems to clearly define how a mock object is supposed to\n&gt; behave, or how complex you&#39;re supposed to make them.\n\nWell, Part 2 uses them extensively, almost 100% dynamic mocks, even \nthough it doesn&#39;t specifically have a chapter on &quot;Here&#39;s how to use mock \nobjects&quot;. I recommend Chapter 10 for you: Testing and JDBC.\n\n&gt;  &gt; &gt; What am I missing?\n&gt;  &gt;\n&gt;  &gt; It&#39;s tough to say. Without looking at a specific example, I can&#39;t\n&gt; say\n&gt;  &gt; much more. Can you get concrete about a mock you wrote that\n&gt; exploded out\n&gt;  &gt; of control? Can we see code?\n&gt; \n&gt; Sure, the most recent example of this to me, was this class:\n&gt;   http://www.vixen.com/code/JournalHash.java\n&gt; implementing\n&gt;   http://www.vixen.com/code/JournalDataStore.java\n\nAha! It&#39;s a common mistake: you&#39;ve created an in-memory implementation \nof JournalDataStore, when you didn&#39;t really need one. I can understand \nyour pain. Been there.\n\nSolution? jMock. www.jmock.org\n\nFirst, it looks like you just want a &quot;fake&quot; and not a full-blown mock -- \nthat is, a stand-in JournalDataStore that returns hardcoded data on demand.\n\nYou can use a dynamic mock to implement a fake data store. You simply \n&quot;record&quot; the desired output for each desired input, then play it back. \nSince Journal and JournalEntry appear both to be simple value objects, \nit should be easy.\n\nWhen you want to test logic that uses a JournalDataStore, simply record \nthe behavior you want to /simulate/ during the &quot;Arrange&quot; portion, then \nplay it back during the &quot;Act&quot; portion. In the &quot;Assert&quot; portion, ask the \nfake to verify() itself, and if the fake was used incorrectly, it will \nfail the test.\n\nIf you give us a test for an object that talks to JournalHash, then we \ncan convert it into a test using the fake. You can then decide whether \nJournalHash is worth keeping for some other use....\n\n&gt; One of the things that isn&#39;t even in there, is the concept of\n&gt; &#39;get most recent &#39;n&#39; entries&#39;, because that would require me\n&gt; to walk backwards through the TreeMap, or add a *third*\n&gt; representation of the same data, as a linked list or something.\n\nHere you&#39;re implementing getMostRecentNEntries() in terms of the \nexisting JournalDataStore methods? That&#39;s not too hard, although it \nmight surprise you that I would put getMostRecentNEntries() on a \ndifferent interface from JournalDataStore!\n\ntestGetMostRecentNEntries_Empty:\n     // this moves to setUp() once you have 3 tests that need it\n     mock := new Mock(JournalDataStore.class)\n     journalDataStore := mock.proxy()\n\n     // record interactions for this test\n     emptyJournal := create journal with no entries\n\n     mock.will(once()).method(&quot;getJournalInfo&quot;)\n         .withParameters(new String[] {&quot;1234&quot;})\n         .return(new ReturnValue(emptyJournal))\n\n     // now use the fake...\n     journalQuery := new GetMostRecentNEntriesQuery(1)\n     entries := journalQuery.execute(journalDataStore)   // uses the fake\n\n     // assert\n     assertTrue(entries.isEmpty())\n     mock.verify()\n\nNow note that this is pseudocode, and I&#39;m only a green belt in jMock (I \nused EasyMock before, and am still learning jMock), but this is the \nidea. Ignoring my choice of design for the GetMostRecentNEntriesQuery \nclass, does this smaller amount of mock code look easier to maintain?\n\n&gt; I found it frustrating to have to do this much work for what\n&gt; was really just a testing class.  It DID let me put off doing\n&gt; the JDBC code until later, however.  Thankfully it was a\n&gt; &#39;generic&#39; enough interface that the code didn&#39;t change\n&gt; noticably when doing the actual DB storage code.\n\nWell, you definitely got some value from it, then. That&#39;s better than \nnothing. Still, you would have been able to focus on the interactions, \nrather than implementing the book-keeping, if you&#39;d known about dynamic \nmocks. Ah, well... it&#39;s never too late.\n-- \nJ. B. Rainsberger,\nDiaspar Software Services\nhttp://www.diasparsoftware.com :: +1 416 791-8603\nLet&#39;s write software that people understand\n\n", 
    "profile": "nails762", 
    "topicId": 11542, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "prevInTime": 11548, 
    "contentTrasformed": false, 
    "postDate": "1090013556", 
    "canDelete": false, 
    "nextInTopic": 11551, 
    "prevInTopic": 11548, 
    "headers": {
        "inReplyToHeader": "PGNkOWVhdCttaHZvQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQwRjg0OTc0LjYwMzA1MDhAcm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGNkOWVhdCttaHZvQGVHcm91cHMuY29tPg=="
    }
}