{
    "numMessagesInTopic": 5, 
    "nextInTime": 11826, 
    "senderId": "BtWI2zNbDlD996ljS9V7azDF0KDzZQ9B3w8-Tu-Xqthg0xfrfKswFrtTtm1SGjV9olhl-uqJWDz4W3QzLLEMfipHhJxrH927J76QPw", 
    "systemMessage": true, 
    "subject": "Re: awkward threading situation", 
    "from": "&quot;sagyrozman&quot; &lt;sagyrozman@...&gt;", 
    "authorName": "sagyrozman", 
    "msgSnippet": "thanks for the reply. I was thinking the same thing but didn t know how to sync with the AWT event queue thread. I tried it and it passed at first attempt, but", 
    "msgId": 11825, 
    "profile": "sagyrozman", 
    "topicId": 11797, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190178427, 
    "messageBody": "<div id=\"ygrps-yiv-639759105\">thanks for the reply.<br/>\nI was thinking the same thing but didn&#39;t know how to sync with the <br/>\nAWT event queue thread.<br/>\nI tried it and it passed at first attempt, but the next attempts <br/>\ndidn&#39;t always pass.<br/>\nI think the problem is the empty runnable is sometimes added before <br/>\nthe setVisible(true) event is added to the queue, maybe because a <br/>\ndifferent thread (other than the main thread) is responsible for <br/>\nadding the events to the AWT queue?<br/>\n<br/>\nIs a there a different way to synchronize with the swing event queue?<br/>\n<br/>\nIf this topic is out of scope for this discussion group, please let <br/>\nme know. It might be better suited for a swing discussion group.<br/>\n<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Timothy Wall &lt;twall@o...&gt; wrote:<br/>\n&gt; It&#39;s entirely possible that your main thread checks the mock status <br/>\n&gt; prior to the events actually being handled.<br/>\n&gt; <br/>\n&gt; Consider adding the following after frame.show():<br/>\n&gt; <br/>\n&gt; SwingUtilities.invokeAndWait(new Runnable() { public void run() <br/>\n{ }});<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; On Aug 18, 2004, at 2:15 AM, sagyrozman wrote:<br/>\n&gt; <br/>\n&gt; &gt; hi all,<br/>\n&gt; &gt; I was writing a test for a GUI class which should delegate GUI <br/>\nevents<br/>\n&gt; &gt; to another object:<br/>\n&gt; &gt;<br/>\n&gt; &gt; class MyFrame extends JFrame implements WindowListener{<br/>\n&gt; &gt;<br/>\n&gt; &gt; TargetForEvents target;<br/>\n&gt; &gt;<br/>\n&gt; &gt; public void setTarget(TargetForEvents t) {<br/>\n&gt; &gt;    target = t;<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; ....<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; in the test case:<br/>\n&gt; &gt;<br/>\n&gt; &gt; ...<br/>\n&gt; &gt; MyFrame frame = new MyFrame();<br/>\n&gt; &gt; frame.setTarget(mockTarget);<br/>\n&gt; &gt; frame.setVisible();<br/>\n&gt; &gt;<br/>\n&gt; &gt; now I check that the expected functions where called on the taget <br/>\nin<br/>\n&gt; &gt; response to the WindowOpened events of MyFrame.<br/>\n&gt; &gt;<br/>\n&gt; &gt; the test fails even though it should have passed because using the<br/>\n&gt; &gt; eclipse debuger I can see that the mock is called upon in the <br/>\nswing<br/>\n&gt; &gt; event handling thread, but when checking back with the main thread<br/>\n&gt; &gt; the mock is not affected by these changes.<br/>\n&gt; &gt; Another weird thing: I tried to do a similar test only not through<br/>\n&gt; &gt; junit, instead of asserting that the methods where called, I wrote<br/>\n&gt; &gt; the mock log string out to the stdout. This time the output shows<br/>\n&gt; &gt; that all methods where called in the correct order.<br/>\n&gt; &gt; Am I missing something here? please let me know if any further<br/>\n&gt; &gt; clarification is needed.<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; </span></blockquote></div>", 
    "prevInTime": 11824, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1093157116", 
    "canDelete": false, 
    "nextInTopic": 11831, 
    "prevInTopic": 11802, 
    "headers": {
        "inReplyToHeader": "PDUzMTczMzBELUYxMjgtMTFEOC04MkVGLTAwMzA2NUJGODNEQUBvY3VsdXN0ZWNoLmNvbT4=", 
        "messageIdInHeader": "PGNnOWZkcyszZGpmQGVHcm91cHMuY29tPg=="
    }
}