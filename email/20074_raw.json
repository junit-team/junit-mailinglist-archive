{
    "numMessagesInTopic": 10, 
    "nextInTime": 20075, 
    "senderId": "pfs_IxRWC8qgrCPi8XaQS9IcmChWzNxSczTw2QYA3kegdZMg01CTus6nofiFVAwQM3d8OFgJm6MLxcfjNt3cXxcrvXPy6CRNh66Gusljr0Mr80KJDNA", 
    "systemMessage": true, 
    "subject": "Re:How to test a method that logs to a file", 
    "from": "&quot;Pascale, Peter H.&quot; &lt;peter.pascale@...&gt;", 
    "authorName": "Pascale, Peter H.", 
    "msgSnippet": "I ll offer a different implementation of JN s #2: Mock or stub the logging, in case you are not using commons logging: You can achieve similar stubbing", 
    "msgId": 20074, 
    "rawEmail": "Return-Path: &lt;Peter.Pascale@...&gt;\r\nReceived: (qmail 91648 invoked from network); 7 Nov 2007 17:21:49 -0000\r\nReceived: from unknown (66.218.67.95)\n  by m51.grp.scd.yahoo.com with QMQP; 7 Nov 2007 17:21:49 -0000\r\nReceived: from unknown (HELO n50a.bullet.mail.sp1.yahoo.com) (66.163.168.144)\n  by mta16.grp.scd.yahoo.com with SMTP; 7 Nov 2007 17:21:49 -0000\r\nReceived: from [216.252.122.218] by n50.bullet.mail.sp1.yahoo.com with NNFMP; 07 Nov 2007 17:21:49 -0000\r\nReceived: from [66.218.69.5] by t3.bullet.sp1.yahoo.com with NNFMP; 07 Nov 2007 17:21:48 -0000\r\nReceived: from [66.218.67.197] by t5.bullet.scd.yahoo.com with NNFMP; 07 Nov 2007 17:21:48 -0000\r\nX-Sender: Peter.Pascale@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 65447 invoked from network); 7 Nov 2007 17:08:49 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m48.grp.scd.yahoo.com with QMQP; 7 Nov 2007 17:08:49 -0000\r\nX-Received: from unknown (HELO ncspsmtp2.ncs.com) (159.182.31.5)\n  by mta18.grp.scd.yahoo.com with SMTP; 7 Nov 2007 17:08:49 -0000\r\nX-Received: from IOWACSRVE3WM02.NCSP.PEROOT.COM (Not Verified[10.25.5.29]) by ncspsmtp2.ncs.com with NetIQ MailMarshal (v5.5.6.7)\n\tid &lt;BB0df32e8e&gt;; Wed, 07 Nov 2007 09:42:03 -0600\r\nX-Received: from IOWACSRVE3MX01.NCSP.PEROOT.COM ([10.25.4.27]) by IOWACSRVE3WM02.NCSP.PEROOT.COM with Microsoft SMTPSVC(6.0.3790.1830);\n\t Wed, 7 Nov 2007 09:41:55 -0600\r\nX-Received: from BGTMNSRVE3MX01.NCSP.PEROOT.COM ([159.182.250.165]) by IOWACSRVE3MX01.NCSP.PEROOT.COM with Microsoft SMTPSVC(6.0.3790.1830);\n\t Wed, 7 Nov 2007 09:41:55 -0600\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;US-ASCII&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nDate: Wed, 7 Nov 2007 09:41:51 -0600\r\nMessage-ID: &lt;6E84FB9FA1B330419ED4091A7766E34F09FDE484@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic:  Re:How to test a method that logs to a file\r\nThread-Index: AcghVL085irCM/5HQ3CS7DWp26HGug==\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nX-OriginalArrivalTime: 07 Nov 2007 15:41:55.0584 (UTC) FILETIME=[B9A84000:01C82154]\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Pascale, Peter H.&quot; &lt;peter.pascale@...&gt;\r\nSubject: Re:How to test a method that logs to a file\r\nX-Yahoo-Group-Post: member; u=143310412; y=BuYwsIq0cE0NFjIdeAWTisv28jvJ0Ds3sQiXKQ9w0_w8kaXwIfA\r\nX-Yahoo-Profile: artisanzero\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: copabella &lt;joe@...&gt; via web; 07 Nov 2007 17:21:47 -0000\r\n\r\nI&#39;ll offer a different implementation of JN&#39;s #2: Mock or stub the\nlogging,=\r\n in case you are not using commons logging:\n\nYou can achieve similar stubbi=\r\nng behavior by writing your own Unit Test\nappender. Simply extend log4j&#39;s A=\r\nppenderSkeleton for an appender than\ncan track log messages and assert vari=\r\nous logging conditions. Again,\nyou&#39;ll want to use your imagination on how f=\r\nancy of an appender to\nimplement. But you can start by just overriding:\n\npr=\r\notected void append(LoggingEvent loggingEvent)\npublic void close()\npublic b=\r\noolean requiresLayout()\n\nStore loggingEvents submitted to append(LoggingEve=\r\nnt) in as simple or\nfancy a way as you want, and write assertions to verify=\r\n certain events\nwere received on append(LoggingEvent).\n\nNow how to inject t=\r\nhe appender in your unit tests? Configure log4j via\nfile or programmaticall=\r\ny in your unit test to just set up the one\nappender for the root logger - a=\r\nll logged messages will flow to your\nunit test appender. If you only care a=\r\nbout one level of message (only\nINFO say) or anything at or above a certain=\r\n level (if you wanted to keep\ndebug logging from being submitted to you app=\r\nender) you can configure\nlog4j accordingly. \n\n\nIf you are already using com=\r\nmons logging - great - JN&#39;s solution seems\nsound. But if not, unit testing =\r\nalone is not enough reason to use\ncommons logging. It is increasingly dispa=\r\nraged for its classloader hack\nemployed to identify the logging implementat=\r\nion. If you are considering\ncommons logging for a variety of reasons, consi=\r\nder SLF4J instead (and\nlogback).\n\n\nPeter Pascale\n\n---------------------\n\nYo=\r\nu can also just \n\nI&#39;ve used two techniques in similar situations, but I&#39;m s=\r\nure there are\nothers (including some more elegant than my quick hacks).\n\n1)=\r\n Inspect the log file:\n\n1.1) Start logging with a fresh log file name.\n1.2)=\r\n Run code under test.\n1.3) Run an assertion against the content of the file=\r\n from step one.\n\nThe clean way to do the above, of course, is to have a sma=\r\nll library\nof tools that e.g. given a file name return the entire content o=\r\nf the\nfile as a single string, given a file name and a string, verify that\n=\r\nsome line in the file contains the given string, etc.\n\n2) Mock or stub the =\r\nlogging:\n\nBreak the dependency that&#39;s hanging you up.\n\nApache commons loggi=\r\nng provides an interface-oriented wrapper around\nseveral widely-used loggin=\r\ng implementations (including Log4J). By\nwriting against the apache.commons.=\r\nlogging.Log interface in your\nactual code, you break the dependency on Log4=\r\nJ implementation details.\nFor unit testing, you can then:\n\n2.1) create a st=\r\nub implementation of Log that e.g. puts all log\nmessages in a StringWriter =\r\nwhich you can then inspect, or\n2.2) write a mock that implements Log and ve=\r\nrifies that the expected\nseverity call was made with the expected message p=\r\nroperties, or\n2.3) use your imagination for more options.\n\nIf you have reas=\r\nons for not bringing in another set of outside code\n(e.g. time-consuming ce=\r\nrtification/approval/legal processes), you can\nwrite your own simple interf=\r\nace that has the key &quot;level&quot; methods\n(error(...), warn(...), etc.) and crea=\r\nte two implementations: one that\nproxies for Log4J and the other that provi=\r\ndes the stub/mock\ncapabilities you need for testing.\n\nHope this helps!\n-jn-=\r\n\n\nOn 11/7/07, Hemanth &lt;hemanthdv_yid@...&gt; wrote:\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Hi\n&gt;\n&gt;=\r\n I would like to know how to JUnit test a method that writes logs to a\n&gt; fi=\r\nle. I am using log4j and I have methods that write different logs to\n&gt; a fi=\r\nle. How do I Junit test that these methods are working fine.\n&gt;\n&gt; Regards\n&gt; =\r\nHemanth\n&gt;\n&gt; \n\n-- \nProgramming is the art of writing essays in crystal clear=\r\n prose and\nmaking them execute. - Per Brinch Hansen\n***********************=\r\n***************************************************** \nThis email may conta=\r\nin material confidential to\nPearson.  If you were not an intended recipient=\r\n, \nplease notify the sender and delete all copies. \nWe may monitor email to=\r\n and from our network. \n***************************************************=\r\n*************************\n\n", 
    "profile": "artisanzero", 
    "topicId": 20070, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 143310412, 
    "prevInTime": 20073, 
    "contentTrasformed": false, 
    "postDate": "1194450111", 
    "canDelete": false, 
    "nextInTopic": 20076, 
    "prevInTopic": 20071, 
    "headers": {
        "messageIdInHeader": "PDZFODRGQjlGQTFCMzMwNDE5RUQ0MDkxQTc3NjZFMzRGMDlGREU0ODRAQkdUTU5TUlZFM01YMDEuTkNTUC5QRVJPT1QuQ09NPg=="
    }
}