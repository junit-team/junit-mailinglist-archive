{
    "numMessagesInTopic": 11, 
    "nextInTime": 24503, 
    "senderId": "YWYeLC4nYAmlNZnfA6WIcFlR6UNrmQzEa739qkt2RlppzF-oVwTADgBFC6483pozcMA5dJGFWeJXLn1tq37663-Lw7QVNYQ", 
    "systemMessage": false, 
    "subject": "Re: [junit] Is it possible to have write NonBlocking Junit tests", 
    "from": "Neil Swingler &lt;neil@...&gt;", 
    "authorName": "Neil Swingler", 
    "msgSnippet": "Use a SettableFuture from guava. To borrow Colin s example @Test public void testAsync() throws Exception { final SettableFuture future =", 
    "msgId": 24502, 
    "rawEmail": "Return-Path: &lt;neil@...&gt;\r\nX-Sender: neil@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 14690 invoked by uid 102); 10 Apr 2014 19:14:11 -0000\r\nX-Received: from unknown (HELO mtaq3.grp.bf1.yahoo.com) (10.193.84.142)\n  by m14.grp.bf1.yahoo.com with SMTP; 10 Apr 2014 19:14:11 -0000\r\nX-Received: (qmail 32421 invoked from network); 10 Apr 2014 19:14:11 -0000\r\nX-Received: from unknown (HELO mail-pa0-f47.google.com) (209.85.220.47)\n  by mtaq3.grp.bf1.yahoo.com with SMTP; 10 Apr 2014 19:14:11 -0000\r\nX-Received: by mail-pa0-f47.google.com with SMTP id lj1so4314453pab.6\n        for &lt;junit@yahoogroups.com&gt;; Thu, 10 Apr 2014 12:14:11 -0700 (PDT)\r\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20130820;\n        h=x-gm-message-state:mime-version:in-reply-to:references:date\n         :message-id:subject:from:to:content-type;\n        bh=pTdP7uoOuMOK8pXPxh/Qk6BxmK/PMsrVosIE/rNLcWs=;\n        b=eugsOZ+AXu7elg+3xW9o3U+S81qBB4ldkojoiK3gAQsRIJA9a1Fig3TDGPcwnenCXg\n         FdsPhR6r1FrdEP8mIdb9MnvgKlx1qwv6i6cNEWVplGbk4yj7n1EVvsR2+qKIXa/RiKET\n         tOlPFri77/xd3dZA+qPeS9E8ZgO/GTTCnxiju3jC6mzynP0RfBI5CpgjLQDWn41jf3G2\n         RcQoAhwY4FHIWC6uSnWpxZrnYFojre0Q8LryicdPnHdvzx6asm0L8yzhFaFgxfqyEsFu\n         B0Gjht9iI1DbnHQuhCPFOUprpBV9rxXAcPsCTbqAGndHUuhdddsaW8iW+tty3kp1haa1\n         Rweg==\r\nX-Gm-Message-State: ALoCoQmlpRGzKQtDR7FZr8F44Tth+SETGFfkGcVe89oHxaLIfxwT1qIKFAeaZGSekERyJhCB548H\r\nMIME-Version: 1.0\r\nX-Received: by 10.67.5.233 with SMTP id cp9mr21620872pad.147.1397157251302;\n Thu, 10 Apr 2014 12:14:11 -0700 (PDT)\r\nX-Received: by 10.70.92.165 with HTTP; Thu, 10 Apr 2014 12:14:11 -0700 (PDT)\r\nIn-Reply-To: &lt;CAKi4273twX35iRgMg95Lyw+pBHprsBQRqo1tcLa+Cx4HFT3wrw@...&gt;\r\nReferences: &lt;li6ctj+h5l6qk@...&gt;\n\t&lt;CAKi4273twX35iRgMg95Lyw+pBHprsBQRqo1tcLa+Cx4HFT3wrw@...&gt;\r\nDate: Thu, 10 Apr 2014 20:14:11 +0100\r\nMessage-ID: &lt;CAFYH9BphW+EK9EGdGwAHxUC11cyGZ=gZHXTPgH6W8S-_7xW-JQ@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: multipart/alternative; boundary=047d7b15b1e5a8df7704f6b50598\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Neil Swingler &lt;neil@...&gt;\r\nSubject: Re: [junit] Is it possible to have write NonBlocking Junit tests\r\nX-Yahoo-Group-Post: member; u=230174996; y=Lk4lNd9iIfyI4dSzzjCYLfYY-AlUgu-Y-obfXVtQm4uDRJ27Lqz17A\r\nX-Yahoo-Profile: neil_swingler\r\n\r\n\r\n--047d7b15b1e5a8df7704f6b50598\r\nContent-Type: text/plain; charset=ISO-8859-1\r\n\r\nUse a SettableFuture from guava. To borrow Colin&#39;s example\n\n@Test\npublic void testAsync() throws Exception {\nfinal SettableFuture&lt;Message&gt; future = SettableFuture.create();\nsomeAsyncCode(new Handler() {\npublic void handle(Message message) {\n\n}\n});\n lock.acquire();\n}\n\n\n\nOn 10 April 2014 18:32, Colin Vipurs &lt;zodiaczx6@...&gt; wrote:\n\n&gt;\n&gt;\n&gt; You could use a locking mechanism shared between your test and handler so\n&gt; that progress continues as quick as possible and then put an overall\n&gt; timeout on your test in the event of failure.\n&gt;\n&gt; Something like this should work just fine:\n&gt;\n&gt; @Test\n&gt; public void testAsync() throws Exception {\n&gt;  final Semaphore lock = new Semaphore(0);\n&gt; someAsyncCode(new Handler() {\n&gt; public void handle() {\n&gt;  // put your assertions in here\n&gt; lock.release();\n&gt; }\n&gt;  });\n&gt;  lock.acquire();\n&gt;  }\n&gt;\n&gt;\n&gt; On Thu, Apr 10, 2014 at 4:21 PM, &lt;abhijeet.kushe@...&gt; wrote:\n&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; I am writing a Junit tests for Amqp Message Listener.This is how the test\n&gt;&gt; is written.I send a message to a exchange and introduce a delay of 1s\n&gt;&gt; (assuming that the listener will do its job within that time frame).This\n&gt;&gt; approach slows down the build process as there 15-20 tests like these which\n&gt;&gt; take a minimum of 20 seconds to execute.Is there a way in which I can do\n&gt;&gt; this is a non blocking way.For pass a call handler which verifies the tests\n&gt;&gt; after the listener does it job.Something like Actors might be internally\n&gt;&gt; used\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt; --\n&gt; Maybe she awoke to see the roommate&#39;s boyfriend swinging from the\n&gt; chandelier wearing a boar&#39;s head.\n&gt;\n&gt; Something which you, I, and everyone else would call &quot;Tuesday&quot;, of course.\n&gt;\n&gt;\n&gt; \n&gt;\n\r\n--047d7b15b1e5a8df7704f6b50598\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div dir=3D&quot;ltr&quot;&gt;Use a SettableFuture from guava. To borrow Colin&#39;s exa=\r\nmple&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div dir=3D&quot;ltr&quot; style=3D&quot;font-family:arial,sans-se=\r\nrif;font-size:12.800000190734863px&quot;&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wra=\r\np&quot;&gt;\t&lt;/span&gt;@Test&lt;/div&gt;\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;pu=\r\nblic void testAsync() throws Exception {&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-spa=\r\nce:pre-wrap&quot;&gt;\t\t&lt;/span&gt;final SettableFuture&lt;Message&gt; future =3D Settab=\r\nleFuture.create();&lt;/div&gt;&lt;div&gt;\n&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span=\r\n&gt;someAsyncCode(new Handler() {&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wra=\r\np&quot;&gt;\t\t\t&lt;/span&gt;public void handle(Message message) {&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div=\r\n&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;} &nbsp;&lt;br&gt;\n&lt;/div&gt;&lt;div&gt;&lt;sp=\r\nan style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;});&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;whi=\r\nte-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;=\r\n&gt;\t\t&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;lock.acq=\r\nuire();&lt;/div&gt;\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;}&lt;/div&gt;&lt;div=\r\n&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_extra&quot; style=3D&quot;font-family:arial,sans=\r\n-serif;font-size:12.800000190734863px&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=3D&quot;gmai=\r\nl_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;\nOn 10 April 2014 18:32, Colin =\r\nVipurs &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:zodiaczx6@...&quot; target=\r\n=3D&quot;_blank&quot;&gt;zodiaczx6@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote class=\r\n=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:1px #ccc solid;padd=\r\ning-left:1ex&quot;&gt;\n\n\n\n\n\n\n\n        \n\n\n\n\n&lt;div&gt;\n\n\n\n\n\n&lt;br&gt;&lt;br&gt;\n\n\n\n\n&lt;div dir=3D&quot;ltr&quot;=\r\n&gt;You could use a locking mechanism shared between your test and handler so =\r\nthat progress continues as quick as possible and then put an overall timeou=\r\nt on your test in the event of failure.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;\n\nSomething like=\r\n this should work just fine:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=3D&quot;w=\r\nhite-space:pre-wrap&quot;&gt;\t&lt;/span&gt;@Test&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre=\r\n-wrap&quot;&gt;\t&lt;/span&gt;public void testAsync() throws Exception {&lt;/div&gt;\n\n&lt;div&gt;&lt;span=\r\n style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;final Semaphore lock =3D new Semap=\r\nhore(0);&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;someAsyncC=\r\node(new Handler() {&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t\t&lt;/spa=\r\nn&gt;public void handle() {&lt;/div&gt;\n\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t=\r\n\t\t\t&lt;/span&gt;// put your assertions in here&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-spa=\r\nce:pre-wrap&quot;&gt;\t\t\t\t&lt;/span&gt;lock.release();&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-spac=\r\ne:pre-wrap&quot;&gt;\t\t\t&lt;/span&gt;} &nbsp;&lt;/div&gt;\n&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wr=\r\nap&quot;&gt;\t\t&lt;/span&gt;});&lt;/div&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/=\r\ndiv&gt;&lt;div&gt;&lt;span style=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span sty=\r\nle=3D&quot;white-space:pre-wrap&quot;&gt;\t\t&lt;/span&gt;lock.acquire();&lt;/div&gt;\n\n&lt;div&gt;&lt;span styl=\r\ne=3D&quot;white-space:pre-wrap&quot;&gt;\t&lt;/span&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_e=\r\nxtra&quot;&gt;&lt;div class=3D&quot;&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Thu, Apr 10, 20=\r\n14 at 4:21 PM,  &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:abhijeet.kushe@gmai=\r\nl.com&quot; target=3D&quot;_blank&quot;&gt;abhijeet.kushe@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;=\r\n\n\n&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:=\r\n1px #ccc solid;padding-left:1ex&quot;&gt;\n\n\n&lt;u&gt;&lt;/u&gt;\n\n\n\n\n\n\n\n\n\n \n&lt;div&gt;\n&lt;span&gt;&nbsp;&lt;/=\r\nspan&gt;\n\n\n&lt;div&gt;\n  &lt;div&gt;\n\n\n    &lt;div&gt;\n      \n      \n      &lt;p&gt;&lt;span style=3D&quot;fon=\r\nt-family:Arial,&#39;Liberation Sans&#39;,&#39;DejaVu Sans&#39;,sans-serif;f=\r\nont-size:14px&quot;&gt;I am writing a Junit tests for Amqp Message Listener.This is=\r\n how the test is written.I send a message to a exchange and introduce a del=\r\nay of 1s (assuming that the listener will do its job within that time frame=\r\n).This approach slows down the build process as there 15-20 tests like thes=\r\ne which take a minimum of 20 seconds to execute.Is there a way in which I c=\r\nan do this is a non blocking way.For pass a call handler which verifies the=\r\n tests after the listener does it job.Something like Actors might be intern=\r\nally used&lt;/span&gt;&lt;/p&gt;\n\n\n\n    &lt;/div&gt;\n     \n\n    \n    &lt;div style=3D&quot;color:#fff=\r\n;min-height:0&quot;&gt;&lt;/div&gt;\n\n\n&lt;/div&gt;\n\n\n\n  \n\n\n\n\n\n\n&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;=\r\nbr&gt;&lt;br clear=3D&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;span class=3D&quot;HOEnZb&quot;&gt;&lt;font colo=\r\nr=3D&quot;#888888&quot;&gt;-- &lt;br&gt;Maybe she awoke to see the roommate&#39;s boyfriend sw=\r\ninging from the chandelier wearing a boar&#39;s head.&lt;br&gt;\n&lt;br&gt;Something whi=\r\nch you, I, and everyone else would call &quot;Tuesday&quot;, of course.\n&lt;/f=\r\nont&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=3D&quot;&quot;&gt;\n\n\n\n\n\n\n&lt;br&gt;\n\n\n&lt;br&gt;\n\n\n\n\n&lt;div width=3D&quot;1&quot; st=\r\nyle=3D&quot;color:white;clear:both&quot;&gt;&lt;/div&gt;\n\n\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;\n\r\n--047d7b15b1e5a8df7704f6b50598--\r\n\n", 
    "profile": "neil_swingler", 
    "topicId": 24500, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 230174996, 
    "prevInTime": 24501, 
    "contentTrasformed": false, 
    "postDate": "1397157251", 
    "canDelete": false, 
    "nextInTopic": 24503, 
    "prevInTopic": 24501, 
    "headers": {
        "inReplyToHeader": "PENBS2k0MjczdHdYMzVpUmdNZzk1THl3K3BCSHByc0JRUnFvMXRjTGErQ3g0SEZUM3dyd0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBRllIOUJwaFcrRUs5RUdkR3dBSHhVQzExY3lHWj1nWkhYVFBnSDZXOFMtXzd4Vy1KUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGxpNmN0aitoNWw2cWtAWWFob29Hcm91cHMuY29tPgk8Q0FLaTQyNzN0d1gzNWlSZ01nOTVMeXcrcEJIcHJzQlFScW8xdGNMYStDeDRIRlQzd3J3QG1haWwuZ21haWwuY29tPg=="
    }
}