{
    "numMessagesInTopic": 125, 
    "nextInTime": 14657, 
    "senderId": "UzB3cpr8CxeeNRFGUT0UksJ6Gvco1NTeYSrPiF_pKHkkIic1cDg8pLGbnG2czYT8tbY2Kx8OahZ57LsJ_N7iQfHqfw", 
    "systemMessage": false, 
    "subject": "Re: How to test private methods in a class.", 
    "from": "&quot;Robert&quot; &lt;yahoo@...&gt;", 
    "authorName": "Robert", 
    "msgSnippet": "... is ... readable. ... and it ... I extract private methods out of public methods to improve readability. I transform private methods into methods on new", 
    "msgId": 14656, 
    "rawEmail": "Return-Path: &lt;yahoo@...&gt;\r\nX-Sender: yahoo@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 22980 invoked from network); 5 Sep 2005 11:22:06 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m25.grp.scd.yahoo.com with QMQP; 5 Sep 2005 11:22:06 -0000\r\nReceived: from unknown (HELO n18a.bulk.scd.yahoo.com) (66.94.237.47)\n  by mta4.grp.scd.yahoo.com with SMTP; 5 Sep 2005 11:22:05 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.6] by n18.bulk.scd.yahoo.com with NNFMP; 05 Sep 2005 11:19:18 -0000\r\nReceived: from [66.218.66.73] by mailer6.bulk.scd.yahoo.com with NNFMP; 05 Sep 2005 11:19:18 -0000\r\nDate: Mon, 05 Sep 2005 11:19:15 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;dfh9jj+dplj@...&gt;\r\nIn-Reply-To: &lt;9BEAA1B86783344BA6CF9B95F5B620923C1888@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 3555\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Robert&quot; &lt;yahoo@...&gt;\r\nSubject: Re: How to test private methods in a class.\r\nX-Yahoo-Group-Post: member; u=189784721; y=ABOUDNmyydGWUhAvXIjCAMUS65ZMuraNM5YTVmPU71nI7fet1w\r\nX-Yahoo-Profile: robertdw26\r\n\r\n--- In junit@yahoogroups.com, &quot;Iliya Agoshkov&quot; &lt;Iliya.Agoshkov@a...&gt;\nwrote:\n&gt; Continuing about testing private methods.\n&gt; What if a private method represent some kind of functionality that\nis\n&gt; needed only to this concrete class.\n&gt; You know sometimes there is a big method which is not clearly\nreadable.\n&gt; So usually I extract some smaller pieces of code naming them\n&gt; correspondingly.\n&gt; So the code becomes more readable. But these methods are private\nand it\n&gt; seems to me,\n&gt; that there is no way to extract them to a separate class.\n\nI extract private methods out of public methods to improve\nreadability. I transform private methods into methods on new classes\nto improve testability - there are different drivers in force.\n\nIn your particular example, I&#39;d create a QueryBuilder class, and I&#39;d\nprobably put some more smarts into the FlightSearchParameters. Try\nsomething like this:\n\npublic static Collection&lt;Flight&gt; search(FlightSearchParameters\nparams) {\n  QueryBuilder builder = new QueryBuilder(params);\n  builder.addDirections();\n  builder.addAirline();\n  builder.addDate();\n\n  Query&lt;Flight&gt; query = builder.buildQuery(Flight.class);\n  return query.execute();\n}\n\nThis should be reasonably testable - if you need a bit more, consider\nadding a QueryBuilderFactory, which would let you drop in mock\nQueryBuilders to test the construction of the query.\n\nThe &quot;addDirections()&quot;, &quot;addAirline()&quot;, &quot;addDate()&quot; methods would\nessentially do the logic you&#39;ve got in each part of the query\nconstruction. For example, addDirections() would look like this:\n\npublic void addDirections() {\n  if ( params.getCityId() != null ) {          \n    addDirectionFilter( params, whereString, whereParams,\n&quot;T_AIRPORT.XM_CITY_ID&quot;, params.getCityId() );\n  } else {\n    addDirectionFilter( params, whereString, whereParams,\n&quot;T_AIRPORT.M_ID&quot;, params.getAirportId() );\n  }\n}\n\nThe Query class would be constructed with SQL and parameters, as built\nup by the QueryBuilder. The execute method would execute the SQL.\n\nThe first time I did this, it would end up as an inner class of\nwhatever the search() method is in. Over time, as other methods would\nget written, I would extract out bits and pieces. For example, the\nQuery class is extremely re-usable would come out very fast. The\nQueryBuilder class, by contrast, would become public fairly slowly,\nand there may well be a few different implementations to present a\nsuitable specialised interface. It&#39;s also possible that I would move\nthe smarts back to the SearchParameters - this would allow me to have\na reasonable generic QueryBuilder, with customised search parameters.\n\nThe interesting part here is that I can obtain this solution from the\nexisting code fairly easily by applying some simple &quot;Extract Method&quot;\nrefactorings, plus a coulple of &quot;Extract Method Object&quot; refactorings.\nThese tend to be very &quot;safe&quot; refactorings, which means I would be\nconfident enough to do it on a code base with otherwise shaky tests.\n\nHope this helps.\n\n&gt; How do I test these all &#39;addXXXFilter&#39; methods? \n\nAs you&#39;d eat an elephant - one bite at a time.\n \n&gt; Or I don&#39;t need to test em at all (cause they are tested through the\n&gt; test of &#39;public search(...)&#39; method)??\n\nNo, you do need to test them, because they can fail. However, you\ndon&#39;t want to test all the permutations. By breaking them out, you can\neasily see what happens.\n \n&gt; Or may be you can suggest a better design solution?\n\nMaybe. Maybe I didn&#39;t - I don&#39;t have the context to answer the\nquestion. I can confidently say I&#39;ve presented a _different_ design\nsolution, though.\n\nRobert.\n\n\n\n\n", 
    "profile": "robertdw26", 
    "topicId": 14490, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 189784721, 
    "prevInTime": 14655, 
    "contentTrasformed": false, 
    "postDate": "1125919155", 
    "canDelete": false, 
    "nextInTopic": 14658, 
    "prevInTopic": 14655, 
    "headers": {
        "inReplyToHeader": "PDlCRUFBMUI4Njc4MzM0NEJBNkNGOUI5NUY1QjYyMDkyM0MxODg4QG5ld3Rvbi5ocS5hY3Rpcy5ydT4=", 
        "messageIdInHeader": "PGRmaDlqaitkcGxqQGVHcm91cHMuY29tPg=="
    }
}