{
    "numMessagesInTopic": 30, 
    "nextInTime": 24291, 
    "senderId": "l00BzMCqCudMMdEcIG4xiW0uvEbHn2ACl3pCxeZbBZ1Gul7-L2MuFkv-oqAQSH_T_skbZdud0NsdNKR9kxwDV0H3yUW3Bvww", 
    "systemMessage": true, 
    "subject": "Re: Feedback requested: Impending changes to RunListener", 
    "from": "&quot;sschroev&quot; &lt;stephan202@...&gt;", 
    "authorName": "sschroev", 
    "msgSnippet": "I understand your concerns w.r.t. the intended semantics of third-party @ThreadSafe annotations. For that reason I could certainly get behind a", 
    "msgId": 24290, 
    "rawEmail": "Return-Path: &lt;stephan202@...&gt;\r\nReceived: (qmail 67329 invoked from network); 8 Feb 2013 13:19:08 -0000\r\nReceived: from unknown (10.193.84.151)\n  by m1.grp.bf1.yahoo.com with QMQP; 8 Feb 2013 13:19:08 -0000\r\nReceived: from unknown (HELO ng8-vm5.bullet.mail.gq1.yahoo.com) (98.136.219.96)\n  by mta5.grp.bf1.yahoo.com with SMTP; 8 Feb 2013 13:19:07 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=echoe; t=1360329547; bh=n4dyXGXt7MqazOq2cMDhs2rW24DcQne4+8CWIii8RbQ=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:Date:To:Message-ID:User-Agent:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-Yahoo-Newman-Property:X-Originating-IP:X-eGroups-Msg-Info:X-Yahoo-Post-IP:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:X-YGroups-SubInfo:Sender:X-eGroups-Approved-By:X-eGroups-Auth; b=rEFuMT/5YeYmF72DpNVkPxdhnDcTmnCcrSkDxC1RLFOseD8OrdlHOPVon8ey8yqaRjGsBvXwmcplLtKsX4D2JEccP6Ae+LH/V02Y7vbmZfiR8LJUYfpyuTUvCYRl4POnPH6trQARg+nLy1a9WzDnfnSxwuPh0M9A8LHEgS/7MuA=\r\nReceived: from [98.137.0.85] by ng8.bullet.mail.gq1.yahoo.com with NNFMP; 08 Feb 2013 13:19:07 -0000\r\nReceived: from [10.193.94.42] by tg5.bullet.mail.gq1.yahoo.com with NNFMP; 08 Feb 2013 13:19:07 -0000\r\nX-Sender: stephan202@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 99344 invoked from network); 8 Feb 2013 09:14:59 -0000\r\nX-Received: from unknown (10.193.84.168)\n  by m6.grp.bf1.yahoo.com with QMQP; 8 Feb 2013 09:14:59 -0000\r\nX-Received: from unknown (HELO ng9-ip2.bullet.mail.bf1.yahoo.com) (98.139.165.68)\n  by mta6.grp.bf1.yahoo.com with SMTP; 8 Feb 2013 09:14:59 -0000\r\nX-Received: from [98.139.164.120] by ng9.bullet.mail.bf1.yahoo.com with NNFMP; 08 Feb 2013 09:14:59 -0000\r\nX-Received: from [10.193.94.45] by tg1.bullet.mail.bf1.yahoo.com with NNFMP; 08 Feb 2013 09:14:59 -0000\r\nDate: Fri, 08 Feb 2013 09:14:58 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;kf2fmi+ai9a@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 2:3:4:0:0\r\nFrom: &quot;sschroev&quot; &lt;stephan202@...&gt;\r\nSubject: Re: Feedback requested: Impending changes to RunListener\r\nX-Yahoo-Group-Post: member; u=495664717; y=fi-CB1nkcdX7BxzwlVjEt7i0vQDXcpLC2_iMxhskxDg_bV4\r\nX-Yahoo-Profile: sschroev\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 08 Feb 2013 13:19:04 -0000\r\n\r\nI understand your concerns w.r.t. the intended semantics of third-party @Th=\r\nreadSafe annotations. For that reason I could certainly get behind a differ=\r\nently-named annotation such as @Concurrent. Adding one more annotation is c=\r\nheap, after all ;)\n\nCheers,\nStephan\n\n--- In junit@yahoogroups.com, Kevin Co=\r\noney  wrote:\n&gt;\n&gt; On Wed, Feb 6, 2013 at 10:06 AM, sschroev  wrote:\n&gt; \n&gt; &gt; *=\r\n*\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; I like the idea, a lot!\n&gt; &gt;\n&gt; &gt; But would like to ask that on=\r\nly the *simple name* of the annotation is\n&gt; &gt; considered, without regard fo=\r\nr the package in which it resides.\n&gt; &gt;\n&gt; Interesting idea.\n&gt; \n&gt; It looks li=\r\nke Guice uses this strategy for @Nullable (\n&gt; https://code.google.com/p/goo=\r\ngle-guice/wiki/UseNullable)\n&gt; \n&gt; That would require us to iterate through a=\r\nll of the class&#39;s annotations, vs\n&gt; a simple getAnnotation() call, but list=\r\neners are not added and removed very\n&gt; often.\n&gt; \n&gt; &gt;  This way one can:\n&gt; &gt;=\r\n\n&gt; &gt; 1. Use an alternative third-party annotation, such as\n&gt; &gt; javax.annota=\r\ntion.concurrent.ThreadSafe from libraries like\n&gt; &gt; com.google.code.findbugs=\r\n:jsr305:1.3.9 and\n&gt; &gt; com.google.code.findbugs:annotations:2.0.1.\n&gt; &gt; 2. De=\r\nfine a private annotation, without adding _any_ additional dependency.\n&gt; &gt;\n=\r\n&gt; Alternatively, we could add a JUnit-specific annotation (possibly named\n&gt;=\r\n &quot;Concurrent&quot;) and you could annotate your class with both annotations (ob\n=\r\n&gt; meme: http://www.quickmeme.com/meme/3svo5h/)\n&gt; \n&gt; One reservation I have =\r\nwith using @ThreadSafe is that usually the\n&gt; jcip-annotations documents beh=\r\navior (sure, it is used by findbugs to find\n&gt; potential bugs, but that&#39;s va=\r\nlidation based on behavior documented in\n&gt; annotations). Here we are propos=\r\ning using @ThreadSafe to modify behavior.\n&gt; Someone might not expect by sim=\r\nply adding an annotation to a class they are\n&gt; changing the behavior of cod=\r\ne that uses instances of the class.\n&gt; \n&gt; &gt;\n&gt; &gt; I use javax.annotation.concu=\r\nrrent.ThreadSafe quite a lot in my own code,\n&gt; &gt; so (1) is quite important =\r\nfrom my perspective. There are precedents for\n&gt; &gt; this approach: IIRC, Ecli=\r\npse does something like this for variations on\n&gt; &gt; @Nullable and @Nonnull, =\r\nwhereas (again, IIRC) Findbugs handles two\n&gt; &gt; instances of @SuppressWarnin=\r\ngs.\n&gt; &gt;\n&gt; &gt; Cheers,\n&gt; &gt; Stephan\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; --- In junit@yahoogroups.com, K=\r\nevin Cooney wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; Hello, everyone\n&gt; &gt; &gt;\n&gt; &gt; &gt; Short version: w=\r\ne are thinking of adding an optional dependency from\n&gt; &gt; JUnit\n&gt; &gt; &gt; to jci=\r\np-annotations and are soliciting feedback.\n&gt; &gt; &gt;\n&gt; &gt; &gt; A few people have no=\r\nticed that when you use ParallelComputer, you got\n&gt; &gt; poor\n&gt; &gt; &gt; performanc=\r\ne because calls to registered RunListeners are synchronized. We\n&gt; &gt; &gt; would=\r\n like to fix this in the next release of JUnit.\n&gt; &gt; &gt;\n&gt; &gt; &gt; In order to pre=\r\nvent affecting existing users, we are proposing having an\n&gt; &gt; &gt; annotation =\r\nthat can be added to RunListener implementations that can\n&gt; &gt; safely\n&gt; &gt; &gt; =\r\nbe called concurrently from multiple threads. If a RunListener passed to\n&gt; =\r\n&gt; a\n&gt; &gt; &gt; RunNotifier is not annotated with this annotation, JUnit will wra=\r\np it\n&gt; &gt; with\n&gt; &gt; &gt; a decorator that does synchronization.\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; =\r\n&gt; We would appreciate feedback on this new annotation.\n&gt; &gt; &gt;\n&gt; &gt; &gt; We have =\r\ntwo options:\n&gt; &gt; &gt;\n&gt; &gt; &gt; a. Create our own annotation for this\n&gt; &gt; &gt; b. Use=\r\n ThreadSafe (\n&gt; &gt; &gt;\n&gt; &gt; http://grepcode.com/file/repo1.maven.org/maven2/net=\r\n.jcip/jcip-annotations/1.0/net/jcip/annotations/ThreadSafe.java\n&gt; &gt; &gt; )\n&gt; &gt;=\r\n &gt;\n&gt; &gt; &gt; The advantages to option b are:\n&gt; &gt; &gt;\n&gt; &gt; &gt; 1. It&#39;s a well-known a=\r\nnnotation\n&gt; &gt; &gt; 2. Users that use JUnit can add this annotation to their th=\r\nread-safe\n&gt; &gt; &gt; RunListener implementations today and get the benefits &quot;for=\r\n free&quot; later.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Note we can do this without requiring that all us=\r\ners of JUnit have the\n&gt; &gt; &gt; jcip-annotations jar in their classpath as of J=\r\nDK 1.5.0_06 (see\n&gt; &gt; &gt;\n&gt; &gt; http://stackoverflow.com/questions/3567413/why-d=\r\noesnt-a-missing-annotation-cause-a-classnotfoundexception-at-runtime\n&gt; &gt; ).=\r\n\n&gt; &gt; &gt; If jcip-annotations is not on the classpath then all RunListener\n&gt; &gt;=\r\n &gt; implementations will be treated as not thread-safe.\n&gt; &gt; &gt;\n&gt; &gt; &gt; As a spe=\r\ncific example, the Maven Surefire plugin would use this\n&gt; &gt; dependency\n&gt; &gt; =\r\n&gt; and include jcip-annotations.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Currently, JUnit only depends o=\r\nn one third-party library (Hamcrest). This\n&gt; &gt; &gt; has caused us some pain in=\r\n the past when the Hamcrest code changed in\n&gt; &gt; ways\n&gt; &gt; &gt; that broke exist=\r\ning users of JUnit. We believe this will not be an issue\n&gt; &gt; &gt; with jcip-an=\r\nnotations because the JAR only contains annotations, not any\n&gt; &gt; &gt; code.\n&gt; =\r\n&gt; &gt;\n&gt; &gt; &gt; One possible concern would be with other open source libraries th=\r\nat\n&gt; &gt; provide\n&gt; &gt; &gt; RunListener implementations (they would need to add jc=\r\nip-annotations to\n&gt; &gt; &gt; their compile-time classpath if they have thread-sa=\r\nfe annotations, and\n&gt; &gt; &gt; document this to their users).\n&gt; &gt; &gt;\n&gt; &gt; &gt; Though=\r\nts?\n&gt; &gt; &gt;\n&gt; &gt; &gt; -- Kevin\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; [Non-text portions of this messa=\r\nge have been removed]\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;  \n&gt; &gt;\n&gt; \n&gt; \n&gt; [Non-text portions of thi=\r\ns message have been removed]\n&gt;\n\n\n\n", 
    "profile": "sschroev", 
    "topicId": 24274, 
    "spamInfo": {
        "reason": "3", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 495664717, 
    "prevInTime": 24289, 
    "contentTrasformed": false, 
    "postDate": "1360314898", 
    "canDelete": false, 
    "nextInTopic": 24303, 
    "prevInTopic": 24289, 
    "headers": {
        "messageIdInHeader": "PGtmMmZtaSthaTlhQGVHcm91cHMuY29tPg=="
    }
}