{
    "numMessagesInTopic": 5, 
    "nextInTime": 19769, 
    "senderId": "cLdzeDnYwk8hXp3-hOt70MfVyb3csxyVVAnlLpzg8X4K43MgVqW_VayD2St-Fat_pJJP_0TZ_Ksm-iJkcjqZSBNM4vWJbFjpV1ckaJ2mjUucmlEq20s", 
    "systemMessage": true, 
    "subject": "Re: Junit4 new features ?", 
    "from": "&quot;Roger Chen @ RevZoom&quot; &lt;coderobochen@...&gt;", 
    "authorName": "Roger Chen @ RevZoom", 
    "msgSnippet": "Hi David - I would really appreciate any comments from the Junit dev team to my response below. Thanks ... them. ... through a", 
    "msgId": 19768, 
    "profile": "coderobochen", 
    "topicId": 19748, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 320628451, 
    "messageBody": "<div id=\"ygrps-yiv-451116071\">Hi David -<br/>\n<br/>\nI would really appreciate any comments from the Junit dev team<br/>\nto my response below.<br/>\n<br/>\nThanks<br/>\n<br/>\n--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;Roger Chen @ RevZoom&quot;<br/>\n&lt;coderobochen@...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;David Saff&quot; &lt;saff@&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Roger,<br/>\n&gt; &gt; <br/>\n&gt; &gt; Good questions.<br/>\n&gt; &gt; <br/>\n&gt; &gt; 1) I would be interested in seeing the patch.  It strikes me as<br/>\n&gt; &gt; something that could be done with a custom runner, without patching<br/>\n&gt; &gt; JUnit: have you found that to be true?<br/>\n&gt; <br/>\n&gt; Me and another colleague at work looked at the Junit sources and felt<br/>\n&gt; we should do the failure recording in<br/>\n&gt; org.junit.runner.notification.RunNotifier#fireTestFailure() method.<br/>\n&gt; That would allow any runner to be able to get a list of failed<br/>\n&gt; testcases in an XML or a plain text file.<br/>\n&gt; <br/>\n&gt; To re-run the failed tests, we were envisioning a custom test runner<br/>\n&gt; and/or modification to the Ant Junit task (since we use Ant heavily)<br/>\n&gt; that would take a flag to pick up the failed test XML/text file from <br/>\n&gt; a known location ($HOME/.junit/failed-tests.xml for e.g.) and re-run<br/>\n </span></blockquote>them.<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt;  <br/>\n&gt; &gt; <br/>\n&gt; &gt; 2) I&#39;ve heard of wanting to only instantiate a test class once (you<br/>\n&gt; &gt; can do that in JUnit, see<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://tech.groups.yahoo.com/group/junit/message/19159)\">http://tech.groups.yahoo.com/group/junit/message/19159)</a>.  Is that what<br/>\n&gt; &gt; you&#39;re looking for, or is there another advantage in having non-static<br/>\n&gt; &gt; @BeforeClass, etc?<br/>\n&gt; &gt; <br/>\n&gt; <br/>\n&gt; Yes, consider the following usage pattern we see in our testing:<br/>\n&gt; <br/>\n&gt;   @BeforeClass(<br/>\n&gt;   public void setup() throws IOException {<br/>\n&gt; <br/>\n&gt;     String cname = getClass().getPackage().getName();<br/>\n&gt;     String rd = cname.replace(&#39;.&#39;, &#39;/&#39;);<br/>\n&gt;     File f = MyEnv.getRootDir();<br/>\n&gt; <br/>\n&gt;     <br/>\n&gt;     File newRd = new File(f, &quot;/tests/unit/src/java/&quot;+rd);<br/>\n&gt;     MyEnv.setRootDir(newRd.getCanonicalPath());<br/>\n&gt;     MyEnv.setLogPropsFile(newRd.getCanonicalPath()+&quot;/log.properties&quot;);<br/>\n&gt;     setupModules();<br/>\n&gt;   }<br/>\n&gt; <br/>\n&gt; This works nicely with TestNG as the beforeClass non-static method can<br/>\n&gt; be used to determine the current testclass name. In the above snippet<br/>\n&gt; the class name is use to construct the path to the log.properties<br/>\n&gt; (every test class has its own properties file)<br/>\n&gt; <br/>\n&gt; With Juni4 we are forced to use @Before to get the non-static behavior.<br/>\n&gt; <br/>\n&gt; &gt; 3) As I understand it, dependsOnMethods allows one test method to be<br/>\n&gt; &gt; skipped if another one fails.  I had a version of this in my own JUnit<br/>\n&gt; &gt; sandbox for a while, and found it not as useful as I&#39;d liked.  If used<br/>\n&gt; &gt; to truly say &quot;this test, valid on its own, will fail if this other<br/>\n&gt; &gt; test, valid on its own, fails&quot;, I found that the dependencies became<br/>\n&gt; &gt; stale, and tests ended up skipped that I wanted to run.  However,<br/>\n&gt; &gt; there were two situations in which it was useful:<br/>\n&gt; &gt; <br/>\n&gt; &gt; a) In some other cases, I found I was using the method dependency as a<br/>\n&gt; &gt; way of specifying preconditions for a test case.  This meant that I<br/>\n&gt; &gt; needed a test that stated, for example, whether the test database was<br/>\n&gt; &gt; up, or whether I was connected to the Internet, or whether I felt like<br/>\n&gt; &gt; clicking on some buttons to help test the UI.  In JUnit 4.4, these<br/>\n&gt; &gt; kinds of dependencies are now marked by assumptions:<br/>\n&gt; &gt; <br/>\n&gt; &gt; @Test public void parseGoogleCorrectly() {<br/>\n&gt; &gt;    assumeTrue(internetConnected());<br/>\n&gt; &gt;   //...<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; I might decide that if the internet is not connected, my tests should<br/>\n&gt; &gt; fail, in which case I can test the condition directly:<br/>\n&gt; &gt; <br/>\n&gt; &gt; @Test public void internetShouldBeConnected() {<br/>\n&gt; &gt;   assertTrue(internetConnected());<br/>\n&gt; &gt; }<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Certainly the pre-conditions will help. <br/>\n&gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; b) Dependencies between tests can be useful in initial TDD<br/>\n&gt; &gt; development: I write a test A, and find out that I&#39;ve bitten off more<br/>\n&gt; &gt; than I can chew.  I write a test B for a smaller chunk of<br/>\n&gt; &gt; functionality, and make A dependent on B, so that I can ignore A until<br/>\n&gt; &gt; B passes.  However, I found that these dependencies cluttered the<br/>\n&gt; &gt; code, and weren&#39;t much help once initial development was done.  I<br/>\n&gt; &gt; actually made the dependency method deprecated, so that I remembered<br/>\n&gt; &gt; to remove the dependencies once everything was working.<br/>\n&gt; &gt; <br/>\n&gt; &gt; My guess is that using assumptions will handle most reasons that<br/>\n&gt; &gt; people use dependsOnMethod.  If you do find the temporary dependency<br/>\n&gt; &gt; scaffolding from 3b interesting, let&#39;s talk more about it.<br/>\n&gt; &gt; <br/>\n&gt; <br/>\n&gt; The reason I like the dependency model is basically software layering.<br/>\n&gt;   If a module or subsystem is failing unit tests I want to exclude<br/>\n&gt; subsystems or modules that are consumer of the &#39;bad&#39; modules. Prior to<br/>\n&gt;  Junit4 assumptions we were using the pattern of invoking test method<br/>\n&gt; B (if it was a prerequisite for A) again in the test method A:<br/>\n&gt; <br/>\n&gt;  void testMethodA() { ..}<br/>\n&gt;  void testMethod B() {<br/>\n&gt;    testMethodA();<br/>\n&gt;    .. now the code for N..<br/>\n&gt;   }<br/>\n&gt; <br/>\n&gt; For some of the methods that have a non-trivial execution time it<br/>\n&gt; would be great to:<br/>\n&gt; <br/>\n&gt; 1) Avoid re-running them as part of assumptions check again and again<br/>\n&gt; 2) Skip the methods that would fail for sure because of dependent<br/>\n&gt; methods failing<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; An example from our project - we have a TCP networking module that<br/>\n&gt; deals with message transfer and RPC. It depends on [un]marshaling<br/>\n&gt; module that does the encoding/decoding of various message types. if<br/>\n&gt; the marshalling logic is not working, I would want to avoid running<br/>\n&gt; the TCP networking tests and save time and effort debugging the ones<br/>\n&gt; that truly failed. <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; &gt; Thanks,<br/>\n&gt; &gt; <br/>\n&gt; &gt;    David Saff<br/>\n&gt; &gt; <br/>\n&gt; &gt; On 8/16/07, Roger Chen @ RevZoom &lt;coderobochen@&gt; wrote:<br/>\n&gt; &gt; &gt; Hi -<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Is there any plan in the near future to support some TestNG<br/>\n&gt; features like:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; 1) Ability to re-run only the failed tests by storing the list of<br/>\n&gt; &gt; &gt; failed tests persistently in an XML file etc. I have thought<br/>\n </span></blockquote>through a<br/>\n<blockquote><span title=\"qreply\"> &gt; &gt; &gt; patch to Junit to address this. Would there be any interest in using<br/>\n&gt; &gt; &gt; this patch?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; 2) Allow non-static Before|After Class methods?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; 3) Support dependsOnMethods annotation like TestNG ?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 19767, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1187629709", 
    "canDelete": false, 
    "nextInTopic": 19774, 
    "prevInTopic": 19753, 
    "headers": {
        "inReplyToHeader": "PGZhNTVjdCtkcGtyQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGZhY2hxZStlYjJpQGVHcm91cHMuY29tPg=="
    }
}