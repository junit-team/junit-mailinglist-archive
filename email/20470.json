{
    "numMessagesInTopic": 6, 
    "nextInTime": 20471, 
    "senderId": "6nIpXSzac6uUr_SNnKmaP81naCBgjnEvXBEiQTh1cdcPK9zmZyar3v2zmytixKLjbs6w9SVAy_POBlH2bgFpoUEJIXYcEF4xrTNn5w", 
    "systemMessage": true, 
    "subject": "Re: TextListener improvement", 
    "from": "&quot;toalexsmail&quot; &lt;toalexsmail@...&gt;", 
    "authorName": "toalexsmail", 
    "msgSnippet": "I actually did it now. There are many files their, so see https://sourceforge.net/tracker/?func=detail&atid=365278&aid=1913115&group_id=15278 file", 
    "msgId": 20470, 
    "profile": "toalexsmail", 
    "topicId": 20361, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 340165037, 
    "messageBody": "<div id=\"ygrps-yiv-1390150071\">I actually did it now. <br/>\nThere are many files their, so see<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"https://sourceforge.net/tracker/?func=detail&atid=365278&aid=1913115&group_id=15278\">https://sourceforge.net/tracker/?func=detail&atid=365278&aid=1913115&group_id=15278</a><br/>\n<br/>\nfile RunListenerTest.zip<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;toalexsmail&quot; &lt;toalexsmail@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Kent, I will do it in the future, maybe in this weekend, but I don&#39;t<br/>\n&gt; promise.<br/>\n&gt; <br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;Kent Beck&quot; &lt;kentb@&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Alex,<br/>\n&gt; &gt;  <br/>\n&gt; &gt; It would help me if you provided test cases that break with the<br/>\n&gt; current code<br/>\n&gt; &gt; and pass with the changes below.<br/>\n&gt; &gt;  <br/>\n&gt; &gt; Regards,<br/>\n&gt; &gt;  <br/>\n&gt; &gt; Kent Beck<br/>\n&gt; &gt; Three Rivers Institute<br/>\n&gt; &gt; <br/>\n&gt; &gt;   _____  <br/>\n&gt; &gt; <br/>\n&gt; &gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On<br/>\nBehalf Of<br/>\n&gt; &gt; toalexsmail<br/>\n&gt; &gt; Sent: Monday, April 28, 2008 4:33 PM<br/>\n&gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; &gt; Subject: [junit] Re: TextListener improvement<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; PrintStreamListener has a bug. Here is correct version:<br/>\n&gt; &gt; <br/>\n&gt; &gt; public class PrintStreamListener extends RunListener{<br/>\n&gt; &gt; //Definition of delimiters is in Description<br/>\n&gt; &gt; private static final Pattern DISPAY_NAME_PATTERN =<br/>\n&gt; &gt; Pattern.compile(&quot;[()]&quot;); <br/>\n&gt; &gt; private TextListener textListener;<br/>\n&gt; &gt; private PrintStream writer;<br/>\n&gt; &gt; <br/>\n&gt; &gt; public PrintStreamListener() {<br/>\n&gt; &gt; this(System.out);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; public PrintStreamListener(PrintStream writer) {<br/>\n&gt; &gt; super();<br/>\n&gt; &gt; this.textListener = new TextListener(writer);<br/>\n&gt; &gt; this.writer = writer;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; /**<br/>\n&gt; &gt; * For sub-classes use.<br/>\n&gt; &gt; * <br/>\n&gt; &gt; * @return<br/>\n&gt; &gt; */<br/>\n&gt; &gt; protected PrintStream getWriter(){<br/>\n&gt; &gt; return writer;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; private PrintStream getNotNullWriter(){<br/>\n&gt; &gt; PrintStream writer = getWriter();<br/>\n&gt; &gt; if(writer==null){<br/>\n&gt; &gt; throw new IllegalStateException(&quot;writer should be not null&quot;);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; return writer;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; /**<br/>\n&gt; &gt; * This method can be overriden in sub-classes.<br/>\n&gt; &gt; * <br/>\n&gt; &gt; * @param description<br/>\n&gt; &gt; * @throws IllegalArgumentException if description is null.<br/>\n&gt; &gt; */<br/>\n&gt; &gt; protected void writeMethodName(Description description){<br/>\n&gt; &gt; if(description==null){<br/>\n&gt; &gt; throw new IllegalArgumentException(&quot;description should be not null&quot;);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; String displayName = description.getDisplayName();<br/>\n&gt; &gt; //third place is empty, workaround to avoid ) at the end of the String<br/>\n&gt; &gt; String[] complexNames = DISPAY_NAME_PATTERN.split(displayName, 3); <br/>\n&gt; &gt; String methodName = (complexNames==null ||<br/>\n&gt; &gt; complexNames.length==0)?null:complexNames[0];<br/>\n&gt; &gt; if(methodName == null || &quot;&quot;.equals(methodName)){<br/>\n&gt; &gt; methodName = displayName;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; PrintStream writer = getNotNullWriter();<br/>\n&gt; &gt; <br/>\n&gt; &gt; writer.print(methodName);<br/>\n&gt; &gt; writer.print(&#39; &#39;);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; /**<br/>\n&gt; &gt; * Called when an atomic test is about to be started.<br/>\n&gt; &gt; * @param description the description of the test that is about to be<br/>\n&gt; &gt; run <br/>\n&gt; &gt; * (generally a class and method name)<br/>\n&gt; &gt; */<br/>\n&gt; &gt; @Override<br/>\n&gt; &gt; public void testStarted(Description description) {<br/>\n&gt; &gt; textListener.testStarted(description);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; /** <br/>\n&gt; &gt; * Called when an atomic test fails.<br/>\n&gt; &gt; * @param failure describes the test that failed and the exception<br/>\n&gt; &gt; that was thrown<br/>\n&gt; &gt; */<br/>\n&gt; &gt; @Override<br/>\n&gt; &gt; public void testFailure(Failure failure) {<br/>\n&gt; &gt; Description description = failure.getDescription();<br/>\n&gt; &gt; PrintStream writer = getNotNullWriter();<br/>\n&gt; &gt; <br/>\n&gt; &gt; writeMethodName(description);<br/>\n&gt; &gt; textListener.testFailure(failure);<br/>\n&gt; &gt; writer.println();<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; /**<br/>\n&gt; &gt; * Called when a test will not be run, generally because a test<br/>\n&gt; &gt; method is annotated <br/>\n&gt; &gt; * with {@link org.junit.Ignore}.<br/>\n&gt; &gt; * @param description describes the test that will not be run<br/>\n&gt; &gt; */<br/>\n&gt; &gt; @Override<br/>\n&gt; &gt; public void testIgnored(Description description) {<br/>\n&gt; &gt; writeMethodName(description);<br/>\n&gt; &gt; PrintStream writer = getNotNullWriter();<br/>\n&gt; &gt; textListener.testIgnored(description);<br/>\n&gt; &gt; writer.println();<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; @Override<br/>\n&gt; &gt; public void testRunFinished(Result result) {<br/>\n&gt; &gt; textListener.testRunFinished(result);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; /**<br/>\n&gt; &gt; * Called before any tests have been run.<br/>\n&gt; &gt; * @param description describes the tests to be run<br/>\n&gt; &gt; */<br/>\n&gt; &gt; @Override<br/>\n&gt; &gt; public void testRunStarted(Description description) throws Exception {<br/>\n&gt; &gt; PrintStream writer = getNotNullWriter();<br/>\n&gt; &gt; String displayName = description.getDisplayName();<br/>\n&gt; &gt; //third place is empty, workaround to avoid ) at the end of the String<br/>\n&gt; &gt; String[] complexNames = DISPAY_NAME_PATTERN.split(displayName, 3); <br/>\n&gt; &gt; String className = (complexNames==null ||<br/>\n&gt; &gt; complexNames.length&lt;2)?null:complexNames[1];<br/>\n&gt; &gt; if(className == null || &quot;&quot;.equals(className)){<br/>\n&gt; &gt; className = displayName;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; writer.print(&quot;started to test &quot;+className);<br/>\n&gt; &gt; writer.println(); <br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; }<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt;  <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 20469, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1209610453", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 20469, 
    "headers": {
        "inReplyToHeader": "PGZ2OXY3YytqZjl0QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGZ2YmJjbCtrdjhAZUdyb3Vwcy5jb20+"
    }
}