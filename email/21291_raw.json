{
    "numMessagesInTopic": 22, 
    "nextInTime": 21292, 
    "senderId": "fBQdoHfSGsidhteoNbV9fERR-uMYph8vF__fo4AGenafgBkmwTf7K498k7aN_ycYzUSEVi1_qHRoxhqhywG6N6cvBLyxo2AZ41qdNeS6r3TN0aPivUAIxgmO", 
    "systemMessage": false, 
    "subject": "Re: Runner for non static inner class in JUnit 4.x", 
    "from": "&quot;tuomaskarkkainenri&quot; &lt;tuomaskarkkainenri@...&gt;", 
    "authorName": "tuomaskarkkainenri", 
    "msgSnippet": "Kent, I am not sure what you mean. The test I posted starts passing if my original patch is applied, or the feature is implemented another way for example in", 
    "msgId": 21291, 
    "rawEmail": "Return-Path: &lt;tuomaskarkkainenri@...&gt;\r\nX-Sender: tuomaskarkkainenri@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 28720 invoked from network); 15 Jan 2009 08:15:21 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m57.grp.scd.yahoo.com with QMQP; 15 Jan 2009 08:15:21 -0000\r\nX-Received: from unknown (HELO n18c.bullet.sp1.yahoo.com) (69.147.64.129)\n  by mta18.grp.scd.yahoo.com with SMTP; 15 Jan 2009 08:15:21 -0000\r\nX-Received: from [69.147.65.173] by n18.bullet.sp1.yahoo.com with NNFMP; 15 Jan 2009 08:15:21 -0000\r\nX-Received: from [66.218.67.226] by t15.bullet.mail.sp1.yahoo.com with NNFMP; 15 Jan 2009 08:15:20 -0000\r\nDate: Thu, 15 Jan 2009 08:15:18 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;gkmram+v01o@...&gt;\r\nIn-Reply-To: &lt;822161AE16634CB9A6D08CF931FEE677@kentspavilion&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 2:2:2:0:2\r\nFrom: &quot;tuomaskarkkainenri&quot; &lt;tuomaskarkkainenri@...&gt;\r\nSubject: Re: Runner for non static inner class in JUnit 4.x\r\nX-Yahoo-Group-Post: member; u=373866241; y=H3xPBFtRt9DVNEGJixTOtgHWHAALJ97anb2YA8b9YJpFRzbdv6uyg61zTJ1e\r\nX-Yahoo-Profile: tuomaskarkkainenri\r\n\r\nKent,\n\nI am not sure what you mean.\n\nThe test I posted starts passing if my=\r\n original patch is applied, or\nthe feature is implemented another way for e=\r\nxample in AnnotatedBuilder.\n\nThe test below can however be made to pass wit=\r\nhout implementing the\nfeature completely.  I am not sure if it is timely to=\r\n write those\nother tests yet.  Most prominently, the test doesn&#39;t check tha=\r\nt the\nRunner is filtered with a proper method name filter.  However the\nfil=\r\ntering is likely to be a side effect of the most straightforward\nway of imp=\r\nlementing the feature.\n\nBr,\nTuomas\n\n\n--- In junit@yahoogroups.com, &quot;kentb&quot; =\r\n&lt;kentb@...&gt; wrote:\n&gt;\n&gt; Tuomas,\n&gt;  \n&gt; This is most of the way to what I was =\r\nlooking for. Can you take one more\n&gt; step and write a test which fails curr=\r\nently but would succeed if the\nfeature\n&gt; outlined below were present?\n&gt;  \n&gt;=\r\n Cheers,\n&gt;  \n&gt; Kent Beck\n&gt; Three Rivers Institute\n&gt; \n&gt;   _____  \n&gt; \n&gt; From:=\r\n junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of\n&gt; tuomas=\r\nkarkkainenri\n&gt; Sent: Tuesday, January 06, 2009 2:52 PM\n&gt; To: junit@yahoogro=\r\nups.com\n&gt; Subject: [junit] Re: Runner for non static inner class in JUnit 4=\r\n.x\n&gt; \n&gt; \n&gt; \n&gt; Kent,\n&gt; \n&gt; essentially:\n&gt; \n&gt; @Test\n&gt; public void findsRunnerF=\r\nromDeclaringClass() {\n&gt; final Request request=3D Request.method(NonStaticIn=\r\nnerClass.class,\n&gt; &quot;methodName&quot;);\n&gt; Assert.assertThat(request.getRunner(), I=\r\ns.is(FakeRunner.class));\n&gt; }\n&gt; \n&gt; @RunWith(FakeRunner.class)\n&gt; public stati=\r\nc class DeclaringClass {\n&gt; \n&gt; public class NonStaticInnerClass {\n&gt; }\n&gt; }\n&gt; =\r\n\n&gt; public static class FakeRunner extends Runner {\n&gt; public FakeRunner(fina=\r\nl Class&lt;?&gt; testClass) {\n&gt; }\n&gt; \n&gt; @Override\n&gt; public Description getDescript=\r\nion() {\n&gt; return Description.EMPTY;\n&gt; }\n&gt; \n&gt; @Override\n&gt; public void run(fi=\r\nnal RunNotifier notifier) {\n&gt; }\n&gt; }\n&gt; \n&gt; as Eclipse enters JUnit4 from:\n&gt; o=\r\nrg.eclipse.jdt.internal.junit4.runner.JUnit4TestMethodReference\n&gt; construct=\r\nor with a call to: Request.method(clazz, methodName)\n&gt; \n&gt; best regards,\n&gt; t=\r\nuomas\n&gt; \n&gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, =\r\n&quot;kentb&quot;\n&gt; &lt;kentb@&gt; wrote:\n&gt; &gt;\n&gt; &gt; PMFBI, but another way to ask that questi=\r\non is: what is the first test\n&gt; you&#39;d\n&gt; &gt; like to see pass that doesn&#39;t yet=\r\n pass?\n&gt; &gt;\n&gt; &gt; Cheers,\n&gt; &gt;\n&gt; &gt; Kent\n&gt; &gt;\n&gt; &gt; _____\n&gt; &gt;\n&gt; &gt; From: junit@yahoo=\r\ngroups. &lt;mailto:junit%40yahoogroups.com&gt; com\n&gt; [mailto:junit@yahoogroups. &lt;=\r\nmailto:junit%40yahoogroups.com&gt; com] On\nBehalf\n&gt; Of\n&gt; &gt; David Saff\n&gt; &gt; Sent=\r\n: Tuesday, January 06, 2009 8:12 AM\n&gt; &gt; To: junit@yahoogroups. &lt;mailto:juni=\r\nt%40yahoogroups.com&gt; com\n&gt; &gt; Subject: Re: [junit] Re: Runner for non static=\r\n inner class in JUnit\n&gt; 4.x\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; On Tue, Jan 6, 2009 at 6:27 AM,=\r\n tuomaskarkkainenri &lt;\n&gt; &gt; tuomaskarkkainenri@ &lt;mailto:tuomaskarkkainenri%40=\r\nyahoo.com&gt; yahoo.com&gt;\n&gt; &gt; wrote:\n&gt; &gt;\n&gt; &gt; &gt; there are no hooks for JDave to\n=\r\n&gt; &gt; &gt; attach to before the discovery of the runner.\n&gt; &gt;\n&gt; &gt; Let&#39;s push on t=\r\nhat. What would be the ideal hook here?\n&gt; &gt;\n&gt; &gt; David Saff\n&gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n=\r\n&gt; &gt; &gt; br,\n&gt; &gt; &gt; Tuomas\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%=\r\n40yahoogroups.com&gt; com,\n&gt; &quot;David\n&gt; &gt; Saff&quot; david@ wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Do=\r\n you think the overall ease of use to people who need this\n&gt; feature\n&gt; &gt; &gt; =\r\nwill be\n&gt; &gt; &gt; &gt; worth a 20% increase in complexity for everyone who needs t=\r\no\n&gt; &gt; &gt; understand the\n&gt; &gt; &gt; &gt; default running rules?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; David=\r\n Saff\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; On Wed, Dec 31, 2008 at 3:08 AM, tuomaskarkkainenri &lt;=\r\n\n&gt; &gt; &gt; &gt; tuomaskarkkainenri@ wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; hey David,\n&gt; &gt; &gt; &gt; &gt;\n=\r\n&gt; &gt; &gt; &gt; &gt; i uploaded the patch as a file,\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt;=\r\n &gt;\n&gt; &gt; &gt; http://f1.grp.\n&gt; &gt;\n&gt; &lt;http://f1.grp.\n&gt;\n&lt;http://f1.grp.yahoofs.com/=\r\nv1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2Pq\n&gt; &gt; yahoofs.com/v1/cBhbSQ=\r\nYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMT&#92;\n&gt; D2Pq\n&gt; &gt;\n&gt;\nfQBWFNQwiqbje7jxu7yGSHFH=\r\nijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstatici&#92;\n&gt; nner\n&gt; &gt; classes.patch&gt;=\r\n\n&gt; &gt;\n&gt;\nyahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2PqfQBWFNQ=\r\nwiqb&#92;\n&gt; je7j\n&gt; &gt;\n&gt;\nxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstatic=\r\ninnerclasses.pat&#92;\n&gt; ch\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; or if that link is relative to m=\r\ny session it&#39;s\n&gt; &gt; &gt; &gt; &gt; nonstaticinnerclasses.patch under files here in Ya=\r\nhoo Groups.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; in JUnit4 speak:\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; public=\r\n class RegularJunit4 {\n&gt; &gt; &gt; &gt; &gt; public class NonStaticInnerClass {\n&gt; &gt; &gt; &gt;=\r\n &gt; @Test\n&gt; &gt; &gt; &gt; &gt; public void testMethod() {\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt;=\r\n &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; running testMethod() is not possible since NonSt=\r\naticInnerClass\n&gt; cannot\n&gt; &gt; &gt; &gt; &gt; be instantiated from the outside.\n&gt; &gt; &gt; &gt;=\r\n &gt;\n&gt; &gt; &gt; &gt; &gt; in JDave:\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; @RunWith(JDaveRunner.class)\n&gt; &gt; =\r\n&gt; &gt; &gt; public static class ASpec extends Specification&lt;Void&gt; {\n&gt; &gt; &gt; &gt; &gt; pub=\r\nlic class AContext {\n&gt; &gt; &gt; &gt; &gt; public void aBehavior() {}\n&gt; &gt; &gt; &gt; &gt; }\n&gt; &gt; &gt;=\r\n &gt; &gt; }\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; AContext is instantiated by SpecRunner which JDa=\r\nveRunner\n&gt; delegates to.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; When I run this with current J=\r\nUnit,\n&gt; &gt; &gt; &gt; &gt; AllDefaultPossibilitiesBuilder#runnerForClass(final Class&lt;?=\r\n&gt;\n&gt; &gt; &gt; &gt; &gt; testClass) picks out the @RunWith annotation and uses that to\n&gt;=\r\n run my\n&gt; &gt; &gt; &gt; &gt; spec(test class).\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; However if I want t=\r\no run just a single behavior (test method)\n&gt; from\n&gt; &gt; &gt; &gt; &gt; this spec for e=\r\nxample from Eclipse. Eclipse tells JUnit to run\n&gt; class\n&gt; &gt; &gt; &gt; &gt; ASpec.ACo=\r\nntext and method aBehavior JUnit then sees what builder\n&gt; it\n&gt; &gt; &gt; &gt; &gt; shou=\r\nld use for AContext, and doesn&#39;t find the annotation there\n&gt; and\n&gt; &gt; &gt; &gt; &gt; =\r\ntries to use the regular JUnit4 builder and since it&#39;s a JDave\n&gt; spec it\n&gt; =\r\n&gt; &gt; &gt; &gt; fails to run.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; What I want to do is: in case All=\r\nDefaultPossibilitiesBuilder\n&gt; notices\n&gt; &gt; &gt; &gt; &gt; that the TestClass is a non=\r\n-static member class, which it has no\n&gt; &gt; &gt; &gt; &gt; chance of being able run an=\r\nyway, it checks whether the declaring\n&gt; class\n&gt; &gt; &gt; &gt; &gt; of the testclass wo=\r\nuld be able to run it instead.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; In the case of JDave, th=\r\ne declaring class would have the\n&gt; @RunWith\n&gt; &gt; &gt; &gt; &gt; annotation, and with =\r\nthe Filter created by FilterRequest, JDave\n&gt; can\n&gt; &gt; &gt; &gt; &gt; then choose whic=\r\nh Context and Spec it should actually allow to\n&gt; run.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; b=\r\nr,\n&gt; &gt; &gt; &gt; &gt; Tuomas\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:j=\r\nunit%40yahoogroups.com&gt; com,\n&gt; &quot;David\n&gt; &gt; Saff&quot; &lt;david@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt;=\r\n\n&gt; &gt; &gt; &gt; &gt; &gt; JDave is cool. I&#39;m not 100% clear what you want to do, and I\n&gt;=\r\n don&#39;t\n&gt; &gt; &gt; &gt; &gt; see the\n&gt; &gt; &gt; &gt; &gt; &gt; patch. Could you perhaps include a sma=\r\nll test case as inline\n&gt; text?\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; David Saff\n&gt; &gt; &gt; &gt; &gt;=\r\n &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; On Tue, Dec 30, 2008 at 10:27 AM, tuomaskarkkainenri &lt;\n&gt; &gt; &gt;=\r\n &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; I participate =\r\nin JDave (http://jdave. &lt;http://jdave.\n&gt; &lt;http://jdave.org&gt; org&gt;\n&gt; org). A\n=\r\n&gt; &gt; BDD framework\n&gt; &gt; &gt; for Java\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; that takes advantage of JUni=\r\nt for example for Eclipse\n&gt; integration.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; We hav=\r\ne tests in non-static inner classes of our test\n&gt; classes.\n&gt; &gt; &gt; These\n&gt; &gt; =\r\n&gt; &gt; &gt; &gt; &gt; run wonderfully using the @RunWith annotation and our own\n&gt; runne=\r\nr.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; however, for individual tests, this doesn&#39;t =\r\nwork. What I\n&gt; would\n&gt; &gt; &gt; like\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; to do is that AllDefaultPossi=\r\nbilitiesBuilder would check\n&gt; &gt; &gt; whether or\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; not the test cla=\r\nss is a non static member class. if it is,\n&gt; then I\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; would gra=\r\nb the runner of the declaring class instead.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; I =\r\nmade a patch implementing this. I will try to attach it.\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; =\r\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; &gt; [Non-text porti=\r\nons of this message have been removed]\n&gt; &gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; =\r\n&gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Ya=\r\nhoo! Groups Links\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt;=\r\n &gt; &gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n=\r\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; ------------------------------------\n&gt; &gt; &gt;\n&gt; &gt; &gt; Yahoo! G=\r\nroups Links\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt; [Non-text portions of this mess=\r\nage have been removed]\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; [Non-text portions of th=\r\nis message have been removed]\n&gt; &gt;\n&gt; \n&gt; [Non-text portions of this message h=\r\nave been removed]\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n&gt; [Non-text portions of this message h=\r\nave been removed]\n&gt;\n\n\n\n", 
    "profile": "tuomaskarkkainenri", 
    "topicId": 21238, 
    "spamInfo": {
        "reason": "2", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 373866241, 
    "prevInTime": 21290, 
    "contentTrasformed": false, 
    "postDate": "1232007318", 
    "canDelete": false, 
    "nextInTopic": 21295, 
    "prevInTopic": 21290, 
    "headers": {
        "inReplyToHeader": "PDgyMjE2MUFFMTY2MzRDQjlBNkQwOENGOTMxRkVFNjc3QGtlbnRzcGF2aWxpb24+", 
        "messageIdInHeader": "PGdrbXJhbSt2MDFvQGVHcm91cHMuY29tPg=="
    }
}