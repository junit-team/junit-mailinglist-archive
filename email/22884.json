{
    "numMessagesInTopic": 14, 
    "nextInTime": 22885, 
    "senderId": "bpd4x2Y2uo5s1GFZTTDInjzBrXstWE62J6yULGZkgkuccEW1n_zjRSqZ-mcwGa_MkhnhAGC-FkDaIgScFqyPGCsZUmdtCYQQFLiHla4E3VM8x8k7L9Tu88zuwfickg", 
    "systemMessage": false, 
    "subject": "Re: [junit] More example JUnit code", 
    "from": "=?UTF-8?B?Q8OpZHJpYyBCZXVzdCDimZQ=?= &lt;cedric@...&gt;", 
    "authorName": "Cédric Beust ♔", 
    "msgSnippet": "Simon, Actually, I was wrong: using @BeforeClass will break your tests. Since JUnit reinstantiates a brand new class before each test method, only the first ", 
    "msgId": 22884, 
    "profile": "cbeust", 
    "topicId": 22880, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 31449770, 
    "messageBody": "<div id=\"ygrps-yiv-2123890287\">Simon,<br/>\n<br/>\nActually, I was wrong: using @BeforeClass will break your tests. Since JUnit<br/>\nreinstantiates a brand new class before each test method, only the first<br/>\nmethod will get the correct values for these fields. Subsequent methods will<br/>\nsee null.<br/>\n<br/>\nAnyway, these values are constants, so they should be static final. Which<br/>\nsolves the problem and also gets rid of @Before and @After.<br/>\n<br/>\nAbout the fields: what bothers me with this approach is that you&#39;re exposing<br/>\na lot of fields to all your test methods and they only use a very small<br/>\nsubset of these. In effect, fields are like global variables and they make<br/>\nit harder for someone coming to improve your class to understand exactly<br/>\nwhat fields are okay to modify and which tests need to be updated as well. I<br/>\nlike to keep the data needed by each test method as local as possible to<br/>\navoid this kind of problem.<br/>\n<br/>\nParameterized tests help a lot with this kind of locality, and they turn out<br/>\nto be a great match for this particular problem.<br/>\n<br/>\nWith all this in mind, here is my version (TestNG syntax, porting to JUnit<br/>\nis left as an exercise to the reader):<br/>\n<br/>\npublic class FractionTest {<br/>\n<br/>\n  // A few useful constants<br/>\n  private static final Fraction F_1_1 = new Fraction(1, 1);<br/>\n  private static final Fraction F_1_2 = new Fraction(1, 2);<br/>\n  private static final Fraction F_1_3 = new Fraction(1, 3);<br/>\n  private static final Fraction F_2_1 = new Fraction(2, 1);<br/>\n<br/>\n  /**<br/>\n   * The data set used to verify reduction, the last parameter of each<br/>\n   * row is the expected value.<br/>\n   */<br/>\n  @DataProvider<br/>\n  public Object[][] reduceData() {<br/>\n    return new Object[][] {<br/>\n      new Object[] { F_1_1, F_1_1 },<br/>\n      new Object[] { new Fraction(2, 2), F_1_1 },<br/>\n      new Object[] { new Fraction(4, 2), F_2_1 },<br/>\n      // ...<br/>\n    };<br/>\n  }<br/>\n<br/>\n  @Test(dataProvider = &quot;reduceData&quot;)<br/>\n  public void verifyReduce(Fraction input, Fraction expected) {<br/>\n    Assert.assertEquals(input.reduce(), expected);<br/>\n  }<br/>\n<br/>\n  /**<br/>\n   * The data set used to verify multiplication, the last parameter of each<br/>\n   * row is the expected value after rediction<br/>\n   */<br/>\n  @DataProvider<br/>\n  public Object[][] multiplicationData() {<br/>\n    return new Object[][] {<br/>\n      new Object[] { F_1_1, F_1_1, F_1_1 },<br/>\n      new Object[] { new Fraction(2, 2), new Fraction(3, 2), new Fraction(3,<br/>\n2) },<br/>\n      // ...<br/>\n    };<br/>\n  }<br/>\n<br/>\n  @Test(dataProvider = &quot;multiplicationData&quot;)<br/>\n  public void verifyReduce(Fraction f1, Fraction f2, Fraction expected) {<br/>\n    // Assuming that multiply() will call reduce() before returning its<br/>\nresult<br/>\n    Assert.Equals(f1.multiply(f2), expected);<br/>\n    Assert.Equals(f2.multiply(f1), expected);<br/>\n  }<br/>\n}<br/>\n<br/>\nYou can probably see how parameterized tests improve the locality of your<br/>\ntests and how adding values to extend the coverage is trivial.<br/>\n<br/>\nAlso note that this is a great example of how misleading code coverage can<br/>\nbe: you would get 100% test coverage if you only returned 1 data set in each<br/>\ndata provider, but your tests would be very poor. Adding values to your data<br/>\nprovider will do nothing for your code coverage but it will considerably<br/>\nimprove the quality of your tests.<br/>\n<br/>\n-- <br/>\nCédric<br/>\n<br/>\n<br/>\nOn Sun, Aug 22, 2010 at 6:11 PM, Simon Chappell &lt;<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:simonpeterchappell@...\">simonpeterchappell@...</a>&gt; wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Cedric,<br/>\n&gt;<br/>\n&gt; Good points.<br/>\n&gt;<br/>\n&gt; 1. I&#39;m not used to the @BeforeClass. I will make that change, as it is a<br/>\n&gt; better fit.<br/>\n&gt; 2. The assigning of nulls is just to emphasize cleaning up after yourself.<br/>\n&gt; I<br/>\n&gt; agree that it&#39;s technically unnecessary.<br/>\n&gt; 3. Let me think about the parameterized thing. I think for eight values,<br/>\n&gt; with their descriptive names, it brings more value leaving them as they<br/>\n&gt; are,<br/>\n&gt; although I may change where they are defined.<br/>\n&gt;<br/>\n&gt; Thank you for you considered points. Hopefully this will help us all<br/>\n&gt; sharpen<br/>\n&gt; our JUnit writing.<br/>\n&gt;<br/>\n&gt; Simon<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; 2010/8/22 Cédric Beust ♔ &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cedric@...\">cedric@...</a>&gt;<br/>\n&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Hi Simon,<br/>\n&gt; &gt;<br/>\n&gt; &gt; A few quick questions/remarks:<br/>\n&gt; &gt;<br/>\n&gt; &gt; - Why do you initialize the fractions in @Before and not @BeforeClass,<br/>\n&gt; &gt; since you don&#39;t seem to ever modify them?<br/>\n&gt; &gt; - Why assigning them to null in @After?<br/>\n&gt; &gt; - Given the nature of your tests, I would probably use parameterized<br/>\n&gt; &gt; tests to supply only the data that each test needs instead of making<br/>\n&gt; these<br/>\n&gt; &gt; eight fields available to all the test methods all the time.<br/>\n&gt; &gt;<br/>\n&gt; &gt; --<br/>\n&gt; &gt; Cédric<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Sun, Aug 22, 2010 at 3:47 PM, Simon Chappell &lt;<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:simonpeterchappell@...\">simonpeterchappell@...</a> &lt;simonpeterchappell%40gmail.com&gt;&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; Following up on my previous offering of example JUnit code, I have<br/>\n&gt; pushed<br/>\n&gt; &gt; a<br/>\n&gt; &gt; &gt; project called Fraction to GitHub. This implements classic mathematical<br/>\n&gt; &gt; &gt; fractions and was written in a test first manner and has documented<br/>\n&gt; unit<br/>\n&gt; &gt; &gt; tests to help those learning JUnit see one style (my style!) of test<br/>\n&gt; &gt; &gt; implementation.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; The code may be found at:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://github.com/simonpeter/Fraction\">http://github.com/simonpeter/Fraction</a><br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I hope that you find it useful.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Simon<br/>\n&gt; &gt; &gt; (one of the JUnit mailing list moderators)<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; --<br/>\n&gt; &gt; &gt; simonpeter.org | simonpeter.com | newlife-upc.org<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; --<br/>\n&gt; &gt; Cédric<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt; simonpeter.org | simonpeter.com | newlife-upc.org<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n </span></blockquote>-- <br/>\nCédric<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 22883, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1282531012", 
    "canDelete": false, 
    "nextInTopic": 22885, 
    "prevInTopic": 22883, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PEFBTkxrVGlrdjRnUHhHZy1oQ3crc3ZlZFRlWWViVCtrOXdSTlhaRUZkd0ZURUBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltSEJSRk1zNmFnQStqSFVOU1hDcFI1cnhONVRmdnZydVF6MndUYkBtYWlsLmdtYWlsLmNvbT4gPEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4="
    }
}