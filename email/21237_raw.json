{
    "numMessagesInTopic": 19, 
    "nextInTime": 21238, 
    "senderId": "oMoNhOTiPU8S7ZpCuU5eqKJKpxOgx0L8-iGn_MxKnSHhOPEO6K1SxUQV8EUC7h8LLLGorXymWuBLgA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Priority of Assertion?", 
    "from": "nat.pryce@...", 
    "authorName": "nat.pryce@gmail.com", 
    "msgSnippet": "Regarding comparability with the assert keyword, I think JUnit is in an odd situation with this already. A failing assertion in a test should be, and is,", 
    "msgId": 21237, 
    "rawEmail": "Return-Path: &lt;nat.pryce@...&gt;\r\nX-Sender: nat.pryce@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 27017 invoked from network); 30 Dec 2008 23:17:20 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m55.grp.scd.yahoo.com with QMQP; 30 Dec 2008 23:17:20 -0000\r\nX-Received: from unknown (HELO yx-out-1718.google.com) (74.125.44.158)\n  by mta15.grp.scd.yahoo.com with SMTP; 30 Dec 2008 23:17:20 -0000\r\nX-Received: by yx-out-1718.google.com with SMTP id 4so2733015yxp.54\n        for &lt;junit@yahoogroups.com&gt;; Tue, 30 Dec 2008 15:17:20 -0800 (PST)\r\nX-Received: by 10.100.33.4 with SMTP id g4mr4188653ang.43.1230679039570;\n        Tue, 30 Dec 2008 15:17:19 -0800 (PST)\r\nX-Received: by 10.100.95.17 with HTTP; Tue, 30 Dec 2008 15:17:19 -0800 (PST)\r\nMessage-ID: &lt;17fa53d0812301517i3cb1d4e5qf60d6759c0758ae1@...&gt;\r\nDate: Tue, 30 Dec 2008 23:17:19 +0000\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;D52463F7D60348A4A3536AB499EDA7ED@kentspavilion&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nReferences: &lt;gjcoh4+a6v5@...&gt;\n\t &lt;B6D159719D97430CB9DD6CC4DB5F0DC2@kentspavilion&gt;\n\t &lt;fba296970812300818i4d920db4o4321ab7dc6dcab14@...&gt;\n\t &lt;17fa53d0812301014n4ce50c45yb5f72d7daa9d4171@...&gt;\n\t &lt;D52463F7D60348A4A3536AB499EDA7ED@kentspavilion&gt;\r\nX-eGroups-Msg-Info: 2:2:2:0:2\r\nFrom: nat.pryce@...\r\nSubject: Re: [junit] Priority of Assertion?\r\nX-Yahoo-Group-Post: member; u=216973656; y=ZrftudIxvBEQ7belmufAcJHhdmhnyp_HMShqXnGvJeEAeAYH\r\nX-Yahoo-Profile: nat_pryce\r\n\r\nRegarding comparability with the assert keyword, I think JUnit is in\nan odd=\r\n situation with this already. A failing assertion in a test\nshould be, and =\r\nis, treated as a test failure, not an error. But a\nfailing assertion in the=\r\n code under test should, I think, be treated\nas an unexpected error, like a=\r\n null pointer exception or an array\nindex out of bounds. In JUnit 4 it is i=\r\nmpossible to make that\ndistinction.\n\n--Nat.\n\n\nOn 30/12/2008, kentb &lt;kentb@e=\r\narthlink.net&gt; wrote:\n&gt; Point taken (and props to Yosef for bringing this up=\r\n). Restating, the fact\n&gt; that assertion failures are implemented as thrown =\r\nexceptions should be\n&gt; invisible to users. So,\n&gt;\n&gt; @Test(expected=3DWhateve=\r\nrException.class) public void whatever() {\n&gt;     assertTrue(false);\n&gt; }\n&gt;\n&gt;=\r\n should be reported as an assertion error. Makes sense to me. I was about t=\r\no\n&gt; dive in and implement it when I thought of:\n&gt;\n&gt; @Test(expected=3DAssert=\r\nionError.class) public void whatever() {\n&gt;     //...call some code which sh=\r\nould fail a native Java assertion...\n&gt; }\n&gt;\n&gt; This ought to be reported as a=\r\nn error if the assertion isn&#39;t thrown. Now how\n&gt; about:\n&gt;\n&gt; @Test(expected=\r\n=3DAssertionError.class) public void whatever() {\n&gt;     //...call some code=\r\n which should fail a native Java assertion...\n&gt;     assertTrue(false);\n&gt; }\n=\r\n&gt;\n&gt; This is impossible (given our current implementation) to get right. If =\r\nthe\n&gt; code doesn&#39;t fail the assertion, the assertion is still thrown by the=\r\n call\n&gt; to assertTrue(). The implementation still leaks but only in this st=\r\nrange\n&gt; case. If we use our own private subclass of Error instead of using\n=\r\n&gt; java.lang.AssertionError, we lose compatibility with the assert keyword.\n=\r\n&gt;\n&gt; The optimum resolution seems to me to special case AssertionError in th=\r\ne\n&gt; &quot;expected=3D...&quot; code and add a caveat to the documentation.\n&gt;\n&gt; Commen=\r\nts?\n&gt;\n&gt; Kent Beck\n&gt; Three Rivers Institute\n&gt;\n&gt;   _____\n&gt;\n&gt; From: junit@yaho=\r\nogroups.com [mailto:junit@yahoogroups.com] On Behalf Of\n&gt; nat.pryce@gmail.c=\r\nom\n&gt; Sent: Tuesday, December 30, 2008 10:14 AM\n&gt; To: junit@yahoogroups.com\n=\r\n&gt; Subject: Re: [junit] Priority of Assertion?\n&gt;\n&gt;\n&gt;\n&gt; I agree. The &quot;expecte=\r\nd&quot; construct feels like a form of assertion that\n&gt; Junit performs after the=\r\n body of the test has completed. It is\n&gt; confusing that it does not compose=\r\n in the same way as other\n&gt; assertions. If a test has two consecutive asser=\r\ntions, it is not an\n&gt; error for the first assertion to fail and the second =\r\nnever to be\n&gt; called. Likewise I&#39;d expect it not to be an error for an asse=\r\nrtion to\n&gt; fail and the &quot;expected&quot; constraint not to be checked.\n&gt;\n&gt; What h=\r\nappens when a test with an expected exception throws an\n&gt; assumption except=\r\nion?\n&gt;\n&gt; --Nat\n&gt;\n&gt; On 30/12/2008, Ilja Preu=DF &lt;iljapreuss@googlema\n&gt; &lt;mail=\r\nto:iljapreuss%40googlemail.com&gt; il.com&gt; wrote:\n&gt;&gt; Kent, I agree that it is =\r\nexpected behavior, technically. I think you\n&gt;&gt; could also make an argument =\r\nthat it would be better if the behavior\n&gt;&gt; was different.\n&gt;&gt;\n&gt;&gt; In my view,=\r\n the behavior is in fact an artifact of an implementation\n&gt;&gt; detail - namel=\r\ny that asserts indicate failures by throwing an\n&gt;&gt; exception. It could be m=\r\nade the case that JUnit &quot;should&quot; report those\n&gt;&gt; failing asserts as failing=\r\n asserts, not as unexpected exceptions.\n&gt;&gt; Basically, the current behavior =\r\nmasks the true test failure.\n&gt;&gt;\n&gt;&gt; Frankly, I have a hunch that the best so=\r\nlution to this problem\n&gt;&gt; actually is to split the test in two, that is, to=\r\n not mix &quot;expected&quot;\n&gt;&gt; and &quot;assert&quot; in the same test method.\n&gt;&gt;\n&gt;&gt; Cheers, =\r\nIlja\n&gt;&gt;\n&gt;&gt; 2008/12/30 kentb &lt;kentb@earthlink. &lt;mailto:kentb%40earthlink.net=\r\n&gt; net&gt;:\n&gt;&gt;&gt; Yosef,\n&gt;&gt;&gt;\n&gt;&gt;&gt; The behavior you describe is what I would expect=\r\n to see. In the test, you\n&gt;&gt;&gt; declared that an ArrayIndexOutOfBounds except=\r\nion would be thrown. It was\n&gt;&gt;&gt; not\n&gt;&gt;&gt; thrown, so the test fails. The erro=\r\nr message says that the &quot;wrong&quot;\n&gt;&gt;&gt; exception\n&gt;&gt;&gt; that was thrown was an As=\r\nsertionError, which is generated by the\n&gt;&gt;&gt; assertTrue(false). The &quot;expecte=\r\nd=3D...&quot; means that a test can fail if no\n&gt;&gt;&gt; exception is thrown or if the=\r\n wrong exception is thrown.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Regards,\n&gt;&gt;&gt;\n&gt;&gt;&gt; Kent Beck\n&gt;&gt;&gt; Three Ri=\r\nvers Institute\n&gt;&gt;&gt;\n&gt;&gt;&gt; _____\n&gt;&gt;&gt;\n&gt;&gt;&gt; From: junit@yahoogroups. &lt;mailto:junit=\r\n%40yahoogroups.com&gt; com\n&gt; [mailto:junit@yahoogroups. &lt;mailto:junit%40yahoog=\r\nroups.com&gt; com] On Behalf\n&gt; Of\n&gt;&gt;&gt; yosefshariat\n&gt;&gt;&gt; Sent: Tuesday, December=\r\n 30, 2008 1:10 AM\n&gt;&gt;&gt; To: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.co=\r\nm&gt; com\n&gt;&gt;&gt; Subject: [junit] Priority of Assertion?\n&gt;&gt;&gt;\n&gt;&gt;&gt; Hi\n&gt;&gt;&gt; I use &quot;@T=\r\nest(expected =3D AnyClassException.class&quot;) and one\n&gt;&gt;&gt; &quot;assertTrue(false)&quot; =\r\ntogether for example following code:\n&gt;&gt;&gt;\n&gt;&gt;&gt; @Test(expected =3D ArrayIndexO=\r\nutOfBoundsException.class)\n&gt;&gt;&gt; public void test()\n&gt;&gt;&gt; {\n&gt;&gt;&gt; String s[] =3D =\r\nnew String[]{&quot;1&quot;};\n&gt;&gt;&gt; assertTrue(false);\n&gt;&gt;&gt; System.out.println(s[10]);\n&gt;&gt;=\r\n&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt; I expect to see an assertion but I see following error:\n&gt;&gt;&gt; jav=\r\na.lang.Exception: Unexpected exception,\n&gt;&gt;&gt; expected&lt;java.lang.ArrayIndexOu=\r\ntOfBoundsException&gt; but\n&gt;&gt;&gt; was&lt;java.lang.AssertionError&gt;..\n&gt;&gt;&gt;\n&gt;&gt;&gt; In your=\r\n opinion, this test must be Assertion or Exception.\n&gt;&gt;&gt; In &quot;JUnit&quot; we canno=\r\nt use &quot;@Test(expected =3D AnyClassException.class&quot;)\n&gt;&gt;&gt; and Assertion toget=\r\nher at the same time.\n&gt;&gt;&gt; In my opinion this test must be failed for &quot;asser=\r\ntion&quot; and not for\n&gt;&gt;&gt; ArrayIndexOutOfBoundsException.\n&gt;&gt;&gt; Is this a bug in =\r\nJUnit or my test is wrong and shouldn&#39;t use two item\n&gt;&gt;&gt; together?\n&gt;&gt;&gt; Tank=\r\ns.\n&gt;&gt;&gt;\n&gt;&gt;&gt; [Non-text portions of this message have been removed]\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;=\r\n\n&gt;\n&gt; --\n&gt; http://www.natpryce &lt;http://www.natpryce.com&gt; .com\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; [N=\r\non-text portions of this message have been removed]\n&gt;\n&gt;\n\n\n-- \nhttp://www.na=\r\ntpryce.com\n\n", 
    "profile": "nat_pryce", 
    "topicId": 21230, 
    "spamInfo": {
        "reason": "2", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 216973656, 
    "prevInTime": 21236, 
    "contentTrasformed": false, 
    "postDate": "1230679039", 
    "canDelete": false, 
    "nextInTopic": 21243, 
    "prevInTopic": 21236, 
    "headers": {
        "inReplyToHeader": "PEQ1MjQ2M0Y3RDYwMzQ4QTRBMzUzNkFCNDk5RURBN0VEQGtlbnRzcGF2aWxpb24+", 
        "messageIdInHeader": "PDE3ZmE1M2QwODEyMzAxNTE3aTNjYjFkNGU1cWY2MGQ2NzU5YzA3NThhZTFAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PGdqY29oNCthNnY1QGVHcm91cHMuY29tPgkgPEI2RDE1OTcxOUQ5NzQzMENCOURENkNDNERCNUYwREMyQGtlbnRzcGF2aWxpb24+CSA8ZmJhMjk2OTcwODEyMzAwODE4aTRkOTIwZGI0bzQzMjFhYjdkYzZkY2FiMTRAbWFpbC5nbWFpbC5jb20+CSA8MTdmYTUzZDA4MTIzMDEwMTRuNGNlNTBjNDV5YjVmNzJkN2RhYTlkNDE3MUBtYWlsLmdtYWlsLmNvbT4JIDxENTI0NjNGN0Q2MDM0OEE0QTM1MzZBQjQ5OUVEQTdFREBrZW50c3BhdmlsaW9uPg=="
    }
}