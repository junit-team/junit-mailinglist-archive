{
    "numMessagesInTopic": 287, 
    "nextInTime": 17820, 
    "senderId": "Iy4NXIRpkkmBkXCfxi8D90dXtfyjq0wSqGNVbyDn2tkxa_AX-4V1WsIqKRZDnCHeTJbjvkQKz0QY5uge3C1KSHsMXyUlKwGZUCCP-OOP90lmMQ", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Test-friendly, but not caller-friendly?", 
    "from": "Michael Feathers &lt;mfeathers@...&gt;", 
    "authorName": "Michael Feathers", 
    "msgSnippet": "... Joe, I ll answer this assuming that you re talking about API code, not application code.  If that s not the case, let me know. In some systems #1 is the", 
    "msgId": 17819, 
    "rawEmail": "Return-Path: &lt;mfeathers@...&gt;\r\nX-Sender: mfeathers@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 52555 invoked from network); 6 Sep 2006 03:14:15 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m24.grp.scd.yahoo.com with QMQP; 6 Sep 2006 03:14:14 -0000\r\nReceived: from unknown (HELO elasmtp-spurfowl.atl.sa.earthlink.net) (209.86.89.66)\n  by mta10.grp.scd.yahoo.com with SMTP; 6 Sep 2006 03:14:10 -0000\r\nReceived: from [66.32.11.168] (helo=[192.168.2.5])\n\tby elasmtp-spurfowl.atl.sa.earthlink.net with asmtp (Exim 4.34)\n\tid 1GKnr9-0002DL-Dq\n\tfor junit@yahoogroups.com; Tue, 05 Sep 2006 23:13:39 -0400\r\nMessage-ID: &lt;44FE3CE0.2090402@...&gt;\r\nDate: Tue, 05 Sep 2006 23:13:36 -0400\r\nUser-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;D93B065F-F037-4625-A911-31EECBEB1778@...&gt; &lt;44FAB01A.8030603@...&gt; &lt;44FAD4E8.6020505@...&gt; &lt;44FB232A.7000705@...&gt; &lt;44FB83AA.5020200@...&gt; &lt;44FBFFAC.3020307@...&gt; &lt;44FC2F80.6050700@...&gt; &lt;44FE1F8F.6040907@...&gt;\r\nIn-Reply-To: &lt;44FE1F8F.6040907@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-ELNK-Trace: dfc3550eb2f12a8d819ed13a7e3bf8f140683398e744b8a403b2b920e47a340baf5496d6928cc1ea350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Michael Feathers &lt;mfeathers@...&gt;\r\nReply-To: mfeathers@...\r\nSubject: Re: [junit] Re: Test-friendly, but not caller-friendly?\r\nX-Yahoo-Group-Post: member; u=78021826; y=L53mZX5Li9BM7e6UUM73DRv1ilp1W4gH0FDVjqB3F5v6GjkA1d47\r\nX-Yahoo-Profile: mfeathers256\r\n\r\nJ. B. Rainsberger wrote:\n\n&gt;Michael Feathers wrote:\n&gt;  \n&gt;\n&gt;&gt;But back to your original point: &quot;It might sometimes be a\n&gt;&gt;NullPointerException or something else instead, but advertising a\n&gt;&gt;precondition is not an excuse for misbehavior just because you receive\n&gt;&gt;bad data.&quot; Under DbC, it is. Fact is, if your precondition fails or you\n&gt;&gt;get a NullPointerException, there&#39;s a bug in the client. You can have\n&gt;&gt;checking enabled, or not, but checking is not error handling. The point\n&gt;&gt;of DbC is to build software robust enough so that you don&#39;t have to\n&gt;&gt;write error handling code at each level. Relevant section is 11.6\n&gt;&gt;&quot;Assertions are not an input checking mechanism.&quot;\n&gt;&gt;    \n&gt;&gt;\n&gt;\n&gt;Indeed. If I violate your precondition, then I am writing defective\n&gt;code. There are a few remedies:\n&gt;\n&gt;1. Be nice and tolerate my indiscretion, say by substituting sensible\n&gt;default values and continuing.\n&gt;\n&gt;2. Telling me directly, &quot;You shouldn&#39;t do that,&quot; by throwing a specific\n&gt;exception that explains my mistake.\n&gt;\n&gt;3. Telling me indirectly, by failing is some deterministic, by\n&gt;non-obvious way.\n&gt;\n&gt;4. Providing me examples of how not to violate your precondition.\n&gt;\n&gt;5. Documenting the precondition and warning me that violating it leads \n&gt;to &quot;undefined behavior&quot;.\n&gt;\n&gt;6. Providing Contract Tests that I can inherit to help me know that my \n&gt;code won&#39;t violate your precondition.\n&gt;\n&gt;There are others, I&#39;m sure.\n&gt;\n&gt;It looks as though you reject #5 out of hand, and I agree, but all the \n&gt;others are viable choices. I would choose the one providing the best ROI \n&gt;for the situation. In a language that checks preconditions for me, I \n&gt;would get #2 for free. In Java, which doesn&#39;t, it depends on the cost of \n&gt;violating the precondition. If it&#39;s anything like persistent data \n&gt;corruption all the way up to loss of life, I would probably insist on \n&gt;#2. If it&#39;s nothing worse than having to retry one of a batch of \n&gt;transactions, I might go with #1. Still, I would probably insist on #4 \n&gt;and prefer #6.\n&gt;  \n&gt;\nJoe,\n\nI&#39;ll answer this assuming that you&#39;re talking about API code, not \napplication code.  If that&#39;s not the case, let me know.\n\nIn some systems #1 is the best answer, but those situations are rare \nand, as a strategy, it can lead to misunderstandings..  #2 and #4 are \ngreat strategies and I like #6 as well. \n\nI think it&#39;s interesting to talk about #5, though.    In nearly every \nother area of life, we deal with warranties and license agreements in \nwhich we explicitly assume responsibility for our use of products and \nservices.  In software we often try to protect clients from themselves \nand don&#39;t consider notice a fair grant of responsibility.\n\nThe fact is, it isn&#39;t universally true.  Lots of luck having Win32 save \nyou from violations of its preconditions, for instance. :-)\n\nFrankly, I wouldn&#39;t want to have only #5 at the API level, but I think \nthat this tendency we have to believe that we can not have an agreement \nwith users that is not enforced by code leads to a great deal of \ntrouble. Particularly in the area of visibility.. many developers assume \nthat no written agreement can be sufficient if something is made \npublic.  I think that the issue is that we are not used to thinking \nabout agreements beyond the code and we&#39;re not used to holding people to \nthem.\n\nThere are some exceptions.  One is the Eclipse API Rules of Engagement: \nhttp://www.eclipse.org/articles/Article-API%20use/eclipse-api-usage-rules.html\n\nIt&#39;s a contract above the code and it has some great ideas.  I really \nlike the idea of &quot;soft final&quot; for instance.  It&#39;s like a license \nagreement.. you can do this (subclass and override, etc) and we won&#39;t \nprevent you, but if you break the rules we can&#39;t be responsible for you.\n\nMichael Feathers\nwww.objectmentor.com\n\n\n\n\n\n", 
    "profile": "mfeathers256", 
    "topicId": 17266, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 78021826, 
    "prevInTime": 17818, 
    "contentTrasformed": false, 
    "postDate": "1157512416", 
    "canDelete": false, 
    "nextInTopic": 17820, 
    "prevInTopic": 17818, 
    "headers": {
        "inReplyToHeader": "PDQ0RkUxRjhGLjYwNDA5MDdAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PDQ0RkUzQ0UwLjIwOTA0MDJAbWluZHNwcmluZy5jb20+", 
        "referencesHeader": "PEQ5M0IwNjVGLUYwMzctNDYyNS1BOTExLTMxRUVDQkVCMTc3OEBvYmplY3RtZW50b3IuY29tPiA8NDRGQUIwMUEuODAzMDYwM0BtZXRhbGFiLnVuYy5lZHU+IDw0NEZBRDRFOC42MDIwNTA1QGlsamFwcmV1c3MuZGU+IDw0NEZCMjMyQS43MDAwNzA1QG1ldGFsYWIudW5jLmVkdT4gPDQ0RkI4M0FBLjUwMjAyMDBAbWluZHNwcmluZy5jb20+IDw0NEZCRkZBQy4zMDIwMzA3QG1ldGFsYWIudW5jLmVkdT4gPDQ0RkMyRjgwLjYwNTA3MDBAbWluZHNwcmluZy5jb20+IDw0NEZFMUY4Ri42MDQwOTA3QHJvZ2Vycy5jb20+"
    }
}