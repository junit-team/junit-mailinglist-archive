{
    "numMessagesInTopic": 22, 
    "nextInTime": 11627, 
    "senderId": "lKNZjBqIQSKvAM4WvqHQtMZ0KJznmOKX9fyUTB9sqYWe1ZQxckG7GYE7N1z9ou2l5AUKw4f-i5o-TMw04c6QsPyIrm7fxqHR8IEM4Ks4yRE", 
    "systemMessage": false, 
    "subject": "Re: Using JMock, example of the after() MatchBuilder?", 
    "from": "&quot;cliftonccraig&quot; &lt;cliftonccraig@...&gt;", 
    "authorName": "cliftonccraig", 
    "msgSnippet": "J.B. Thanx for all your help. This is the part where I get too deeply involved with the project and my interests begin to feign. (I ll try to stay in tune this", 
    "msgId": 11626, 
    "rawEmail": "Return-Path: &lt;cliftonccraig@...&gt;\r\nX-Sender: cliftonccraig@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 57494 invoked from network); 21 Jul 2004 19:55:28 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m14.grp.scd.yahoo.com with QMQP; 21 Jul 2004 19:55:28 -0000\r\nReceived: from unknown (HELO n15.grp.scd.yahoo.com) (66.218.66.70)\n  by mta2.grp.scd.yahoo.com with SMTP; 21 Jul 2004 19:55:28 -0000\r\nReceived: from [66.218.66.120] by n15.grp.scd.yahoo.com with NNFMP; 21 Jul 2004 19:55:14 -0000\r\nDate: Wed, 21 Jul 2004 19:55:13 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;cdmhn1+suk1@...&gt;\r\nIn-Reply-To: &lt;40FE980B.9060703@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 4078\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-eGroups-Remote-IP: 66.218.66.70\r\nFrom: &quot;cliftonccraig&quot; &lt;cliftonccraig@...&gt;\r\nSubject: Re: Using JMock, example of the after() MatchBuilder?\r\nX-Yahoo-Group-Post: member; u=190580959\r\nX-Yahoo-Profile: cliftonccraig\r\n\r\nJ.B.\n\nThanx for all your help. This is the part where I get too deeply\ninvolved with the project and my interests begin to feign. (I&#39;ll try\nto stay in tune this time.) I&#39;m getting so comfortable with the JMock\nsyntax that I&#39;ve found a subtle &quot;feature&quot; that may appear as a\ngot&#39;cha. When nesting a StubSequence  in a StubSequence the nested\nsequence is treated as a stub and not as a sequence. What I mean is this.\n\n        mockParserController.expects(exactly(5))\n                .method(&quot;nextDataModel&quot;)\n                .withNoArguments()\n                .will(\n                    onConsecutiveCalls(\n                        returnArrayValuesInSequence(stubbedDataModels),\n                        returnValue(null)\n                    )\n                );\n\nWhere returnArrayValuesInSequence() is defined below:\n\n    public Stub returnArrayValuesInSequence(Object[] values)\n    {\n        Stub[] stubSeq = new Stub[values.length];\n        for(int i = 0; i &lt; stubSeq.length; i++)\n            stubSeq[i] = returnValue(values[i]);\n        return new StubSequence(stubSeq);\n    }\n\nThe intent here is to create a sequence consisting of 5 stubs. The\nonConsecutiveCalls() method only takes a max of 4 stub objects. It\nwraps all parameters in a StubSequence. It would appear natural that\nthe above logic would cause the mock to cycle through all of the stubs\nin the nested sequence prior to calling the next stub in the outer\nsequence. It came to me almost immediately that this was the intent\ndue to how StubSequence extends Stub and can be easily given to the\nonConsecutiveCalls() method. But here&#39;s the twist. This logic only\ncreates two &quot;Stub&quot; objects in the internal mocker. The 1st of which is\na sequence and the 2nd a normal Stub. The resulting behaviour is\ncounter-intuitive where the mocker invokes the 1st StubSequence as a\nStub which invokes its nested stub. Since the rest of the internal\nsequence are not flattened to the internal Stub array the next\ninvocation goes to the next Stub in teh outer-most sequence completely\nbypassing all of the nested Stubs in the inner Sequence. \n\nBottom line is a StubSequence nested in another StubSequence is\ntreated as a plain Stub and not as a sequence. My immediate solution\nwas to patch the onConsecutiveCalls() method to flatten out all nested\nsequences into one. Something in my gut (experience?) is telling me\nthat this is not the optimal solution and may cause other undesirable\nfeatures. Like I said, this is where I end up getting to roped into\nthese open source projects and then when the going gets tough I go\naway. I&#39;ve had a similar experience with XDoclet finding a bug but not\nbeing able to commit the patch. What I&#39;m really trying to say here is\nthat I&#39;d love to enhance this feature and work on the project myself\nand with this feature I have a strong urge to do so. However, it\nreally isn&#39;t practical for me to do so at this point in time. (Unless\nfixing the bug was as easy as uploading a code snippet.)\n\nCliff\n--- In junit@yahoogroups.com, &quot;J. B. Rainsberger&quot; &lt;jbrains@r...&gt; wrote:\n&gt; cliftonccraig wrote:\n&gt; \n&gt; &gt; I think I know what&#39;s up! I was reading the changelist wrong. I\n&gt; &gt; thought the change list was saying the new exactly() method was in\n&gt; &gt; version-1.0.1 but it appears above the version-1.0.1 title which, I\n&gt; &gt; guess, means that it&#39;s in a later version. I&#39;ll look into the snapshot\n&gt; &gt; version. I know it&#39;ll be in there. I just get a little leary using\n&gt; &gt; snapshots and/or nightly builds.\n&gt; \n&gt; If you want the latest and greatest features....\n&gt; \n&gt; At any rate, in the worst case, you could have built your own \n&gt; InvocationMatcher, or whatever that thing is. A little scary at first, \n&gt; but likely not too difficult. Note that once() and exactly() are merely \n&gt; convenience methods to make the syntax easier on the eyes. They just \n&gt; create InvocationMatcher objects (or whatever they really are) that \n&gt; match the number of invocations on verify().\n&gt; -- \n&gt; J. B. Rainsberger,\n&gt; Diaspar Software Services\n&gt; http://www.diasparsoftware.com :: +1 416 791-8603\n&gt; Let&#39;s write software that people understand\n\n\n", 
    "profile": "cliftonccraig", 
    "topicId": 11604, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190580959, 
    "prevInTime": 11625, 
    "contentTrasformed": false, 
    "postDate": "1090439713", 
    "canDelete": false, 
    "nextInTopic": 11628, 
    "prevInTopic": 11622, 
    "headers": {
        "inReplyToHeader": "PDQwRkU5ODBCLjkwNjA3MDNAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PGNkbWhuMStzdWsxQGVHcm91cHMuY29tPg=="
    }
}