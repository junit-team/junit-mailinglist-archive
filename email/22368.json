{
    "numMessagesInTopic": 7, 
    "nextInTime": 22369, 
    "senderId": "iwypM8rVmkhPd8hAs3_pmOq1zdw9knYnCr6PctZE51aGgCb7qTnawTsDrrko2IpjtI5_UWuPEnsGF0Hiz0_RkaXe3b8Azj4YDg0p", 
    "systemMessage": true, 
    "subject": "Re: [junit] Re: Using JUnit 4 to drive a test DSL", 
    "from": "Edson Tirelli &lt;ed.tirelli@...&gt;", 
    "authorName": "Edson Tirelli", 
    "msgSnippet": "Hmmm, it seems you are right actually. I will do some research on how surefire is handling that. Thanks, Edson 2010/2/5 krosenvold  ...", 
    "msgId": 22368, 
    "profile": "edsontirelli", 
    "topicId": 22366, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 303667645, 
    "messageBody": "<div id=\"ygrps-yiv-1078076521\">Hmmm, it seems you are right actually. I will do some research on how<br/>\nsurefire is handling that.<br/>\n<br/>\n    Thanks,<br/>\n      Edson<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n2010/2/5 krosenvold &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:kristian@...\">kristian@...</a>&gt;<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt;<br/>\n&gt; Is NodeTest actually a test class ? I think you may be victim of a hotly<br/>\n&gt; debated issue in surefire, where surefire by default assumes every class<br/>\n&gt; ending with &quot;Test&quot; is a test-case.<br/>\n&gt;<br/>\n&gt; Kristian<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt;, Edson Tirelli<br/>\n&gt; &lt;ed.tirelli@...&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Hi all,<br/>\n&gt; &gt;<br/>\n&gt; &gt; Facing a problem a could not find an answer for yet.<br/>\n&gt; &gt;<br/>\n&gt; &gt; We use JUnit as the testing framework for Drools (<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.jboss.org/drools/)\">http://www.jboss.org/drools/)</a>. It happens, though, that some of the<br/>\n&gt; internal<br/>\n&gt; &gt; low level stuff are really hard to test using pure java code, so, we<br/>\n&gt; created<br/>\n&gt; &gt; a DSL to define some of our low level tests. Example here (but it does<br/>\n&gt; not<br/>\n&gt; &gt; really matter for the problem at hand):<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/resources/org/drools/reteoo/test/AccumulateNodeAssertRetractTest.nodeTestCase\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/resources/org/drools/reteoo/test/AccumulateNodeAssertRetractTest.nodeTestCase</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; The DSL follows a simplified test structure, similar to previous JUnit<br/>\n&gt; &gt; versions, i.e., each file is a test case that might have a setup and<br/>\n&gt; &gt; teardown sections, plus a bunch of tests. Simple and works fine for us.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Now, since we use JUnit to drive all our tests, I would like to use junit<br/>\n&gt; &gt; to drive these DSL test cases as well during our build (maven), to keep<br/>\n&gt; all<br/>\n&gt; &gt; reports, etc integrated. So, I created a test runner class:<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/JUnitNodeTestRunner.java\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/JUnitNodeTestRunner.java</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; And then I created a bootstrap class (not sure if there is a way to avoid<br/>\n&gt; &gt; having the bootstrap class):<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/NodeTestsSuite.java\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/NodeTestsSuite.java</a><br/>\n&gt; &gt;<br/>\n&gt; &gt; As you can see, the bootstrap class has the annotation:<br/>\n&gt; &gt; @RunWith(JUnitNodeTestRunner.class)<br/>\n&gt; &gt;<br/>\n&gt; &gt; Now, when I right click that class and choose &quot;Run as... JUnit test case&quot;<br/>\n&gt; &gt; in eclipse, the class loads and executes all tests defined in our dsl<br/>\n&gt; test<br/>\n&gt; &gt; files without any problem. It shows all tests with success/error messages<br/>\n&gt; in<br/>\n&gt; &gt; the eclipse junit view, etc. BUT, when I run the tests from our maven<br/>\n&gt; build,<br/>\n&gt; &gt; I get the following error:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.005 sec<br/>\n&gt; &gt; &lt;&lt;&lt; FAILURE!<br/>\n&gt; &gt; initializationError(org.drools.reteoo.test.dsl.NodeTest) Time elapsed: 0<br/>\n&gt; &gt; sec &lt;&lt;&lt; ERROR!<br/>\n&gt; &gt; java.lang.IllegalArgumentException: Test class can only have one<br/>\n&gt; constructor<br/>\n&gt; &gt; at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:32)<br/>\n&gt; &gt; at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:54)<br/>\n&gt; &gt; ...<br/>\n&gt; &gt;<br/>\n&gt; &gt; I am at a loss right now, so any insights on how to fix that (or even if<br/>\n&gt; &gt; we are using the wrong approach here) are most appreciated.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Thanks,<br/>\n&gt; &gt; Edson<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; --<br/>\n&gt; &gt; Edson Tirelli<br/>\n&gt; &gt; JBoss Drools Core Development<br/>\n&gt; &gt; JBoss by Red Hat @ www.jboss.com<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n<br/>\n </span></blockquote>-- <br/>\n Edson Tirelli<br/>\n JBoss Drools Core Development<br/>\n JBoss by Red Hat @ www.jboss.com<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 22367, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1265409731", 
    "canDelete": false, 
    "nextInTopic": 22369, 
    "prevInTopic": 22367, 
    "headers": {
        "inReplyToHeader": "PGhraTM5ZCszdTczQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGU2ZGQ1YmEzMTAwMjA1MTQ0MmoxY2VmYWY4N245ZDY1NmE1OTcyODJlNmFiQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGU2ZGQ1YmEzMTAwMjA1MTMwOHkxYThlY2MyZmw2MGUzZTViMDQxOTZmNWMxQG1haWwuZ21haWwuY29tPgkgPGhraTM5ZCszdTczQGVHcm91cHMuY29tPg=="
    }
}