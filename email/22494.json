{
    "numMessagesInTopic": 9, 
    "nextInTime": 22495, 
    "senderId": "XPz4lLZzNZ-LlAGCF50FQ4lxHK4U3WXEszdBxdnFntwAczZK0jVutzyhSeNrVo1srBFxUbz3LsVDWaA1M3XaGkQ5vhJcHBTScgi4vyPhwOU-oA", 
    "systemMessage": false, 
    "subject": "Re: Spring in JUnit (was RE: [junit] [RT] JUnit Core, Parallelism, Documentation)", 
    "from": "Kristian Rosenvold &lt;kristian@...&gt;", 
    "authorName": "Kristian Rosenvold", 
    "msgSnippet": "Just for the record; Spring s SpringJUnit4ClassRunner is not thread safe without the patch in http://jira.springframework.org/browse/SPR-5863 (vote please!). ", 
    "msgId": 22494, 
    "profile": "krosenvold", 
    "topicId": 22487, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 403861045, 
    "messageBody": "<div id=\"ygrps-yiv-345248398\">Just for the record; Spring&#39;s SpringJUnit4ClassRunner is not thread safe<br/>\nwithout the patch in <a rel=\"nofollow\" target=\"_blank\" href=\"http://jira.springframework.org/browse/SPR-5863\">http://jira.springframework.org/browse/SPR-5863</a><br/>\n(vote please!). <br/>\n<br/>\nWe use stub-wired spring tests for running unit tests of gui-layer<br/>\ncontrols, which is a really nice way to avoid 10 tons of mocks and/or<br/>\nredundant construction of &quot;hard to construct&quot; classes. We also use<br/>\nspring in our selenium tests. So there are different use cases that may<br/>\nhave value with spring; we run all of these tests concurrently.<br/>\n<br/>\nJudging by this discussion it seems to me like documentation on the<br/>\nconcurrency features probably needs to be created/updated, since the<br/>\nvisibility of these features seem to be limited. I am also not sure if<br/>\nthe design is final in any real way.<br/>\n<br/>\nAs for the design; I think the current implementation allows a<br/>\n&quot;ParalellComputer&quot; to choose between a &quot;queue of tasks&quot; approach or any<br/>\nother solution. I think this is a real benefit; I can easily see <br/>\nscenarios where an external source actually wants to control the <br/>\nallocation of threading resources to a given test runner ( a concurrent<br/>\nmulti-module maven build would be one such case, where an external <br/>\nscheduler would prioritize different modules)<br/>\n <br/>\nAs usual; here&#39;s a little blogpost on spring/junit;<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://incodewetrustinc.blogspot.com/2010/01/run-your-junit-tests-concurrently-with.html\">http://incodewetrustinc.blogspot.com/2010/01/run-your-junit-tests-concurrently-with.html</a><br/>\n<br/>\nKristian<br/>\n<br/>\n<br/>\nti., 02.03.2010 kl. 08.31 -0500, skrev Loritsch, Berin C.:<br/>\n<blockquote><span title=\"qreply\"> &gt;   <br/>\n&gt; That brings up a good point about Spring. I personally would prefer<br/>\n&gt; not<br/>\n&gt; to set up a Spring environment in my code for the purpose of testing,<br/>\n&gt; but Spring has so many goodies that add to the desired function of<br/>\n&gt; what<br/>\n&gt; you are writing you can&#39;t do otherwise.<br/>\n&gt; <br/>\n&gt; For example, the Spring/Hibernate integration is a pretty common<br/>\n&gt; solution for most folks. The problem is that ThreadSafe bound<br/>\n&gt; transaction manager. Maybe I just need to know how to configure the<br/>\n&gt; transaction manager to always roll back the transaction at the end of<br/>\n&gt; a<br/>\n&gt; test, but essentially this combination forces you down the road of<br/>\n&gt; performing integration tests when all you want to do is perform unit<br/>\n&gt; tests. There&#39;s a really good video out there on why &quot;Integration Tests<br/>\n&gt; are a Scam&quot;, which describes in pretty simple terms the problem of<br/>\n&gt; this<br/>\n&gt; approach.<br/>\n&gt; <br/>\n&gt; I really am not a fan of frameworks that don&#39;t let you do perform<br/>\n&gt; simple<br/>\n&gt; unit testing. At the same time these frameworks are very useful and<br/>\n&gt; help solve problems more quickly. I just want my cake and eat it too.<br/>\n&gt; <br/>\n&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf<br/>\n&gt; Of<br/>\n&gt; Malte Finsterwalder<br/>\n&gt; Sent: Tuesday, March 02, 2010 7:50 AM<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; Subject: Re: [junit] [RT] JUnit Core, Parallelism, Documentation<br/>\n&gt; <br/>\n&gt; On 2 March 2010 13:27, Loritsch, Berin C. &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:berin.loritsch@...\">berin.loritsch@...</a><br/>\n&gt; &lt;mailto:berin.loritsch%40gd-ais.com&gt; &gt; wrote:<br/>\n&gt; &gt; Right. I wouldn&#39;t necessarily suggest making parallel execution the<br/>\n&gt; &gt; default, and your observation is the same as mine.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Spring code is threadsafe, or at least designed to work in a heavily<br/>\n&gt; &gt; threaded environment like serving up web pages. There are ways of<br/>\n&gt; &gt; enforcing a perceived order, even if the actual order is different.<br/>\n&gt; &gt; That&#39;s basically how Tomcat and Apache operate with the non-blocking<br/>\n&gt; IO.<br/>\n&gt; <br/>\n&gt; That&#39;s not what I meant.<br/>\n&gt; I know that Spring itself is thread safe, but since Spring uses mostly<br/>\n&gt; singletons, my spring beans have to be thread safe. And if I execute n<br/>\n&gt; tests in parallel in any random order and they all execute on the same<br/>\n&gt; object (singleton spring bean), this might result in problems.<br/>\n&gt; Maybe that&#39;s just part of a good test, because my beans need to be<br/>\n&gt; thread safe anyhow.<br/>\n&gt; But maybe not.<br/>\n&gt; <br/>\n&gt; Greetings,<br/>\n&gt; Malte<br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 22493, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1267540361", 
    "canDelete": false, 
    "nextInTopic": 22497, 
    "prevInTopic": 22493, 
    "headers": {
        "inReplyToHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDQ0Qjk4OTNAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg==", 
        "messageIdInHeader": "PDEyNjc1NDAzNjEuMTU3NDIuNjMuY2FtZWxAb2ZmaWNlPg==", 
        "referencesHeader": "CSA8NzVGNUVEOEE1QTU1MzY0NkE0NkUwMEU2RUM4NTRGQTMwNDRCOTdGMkB2YWZmMDEtbWFpbDAxLmFkLmdkLWFpcy5jb20+CSA8NTM4NzRlYzAxMDAzMDIwMDM1cDNlYjQ4M2Q1cDViZmUyMjU0M2RlMjM1YWJAbWFpbC5nbWFpbC5jb20+CSA8NzVGNUVEOEE1QTU1MzY0NkE0NkUwMEU2RUM4NTRGQTMwNDRCOTg0NUB2YWZmMDEtbWFpbDAxLmFkLmdkLWFpcy5jb20+CSA8NTM4NzRlYzAxMDAzMDIwNDQ5bjFlNzk3MjQ3dzg3MmM3NGE0ZDEwMzY2YWNAbWFpbC5nbWFpbC5jb20+CSA8NzVGNUVEOEE1QTU1MzY0NkE0NkUwMEU2RUM4NTRGQTMwNDRCOTg5M0B2YWZmMDEtbWFpbDAxLmFkLmdkLWFpcy5jb20+"
    }
}