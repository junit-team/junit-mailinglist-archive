{
    "numMessagesInTopic": 6, 
    "nextInTime": 13185, 
    "senderId": "w94sqW-pPrSO7Tu4afWvfkyqB8eSwR0v1ANXTKXeJWAk9t8PLFY-ykpoJRjCPJPWxUGxZY-MxwuoIchIHeE_N8lkieiB9UvPFmMdRbgcOQ", 
    "systemMessage": false, 
    "subject": "Re: [unclassified] [junit] Re: Testing DAOs?", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... So it looks like you need to verify that some code somewhere invokes these Builder methods the right way (right methods, parameters. order). In that case,", 
    "msgId": 13184, 
    "rawEmail": "Return-Path: &lt;jbrains@...&gt;\r\nX-Sender: jbrains@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 94037 invoked from network); 28 Mar 2005 23:03:36 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m22.grp.scd.yahoo.com with QMQP; 28 Mar 2005 23:03:36 -0000\r\nReceived: from unknown (HELO smtp102.rog.mail.re2.yahoo.com) (206.190.36.80)\n  by mta1.grp.scd.yahoo.com with SMTP; 28 Mar 2005 23:03:35 -0000\r\nReceived: from unknown (HELO ?192.168.1.110?) (srainsberger5790@69.197.252.57 with plain)\n  by smtp102.rog.mail.re2.yahoo.com with SMTP; 28 Mar 2005 23:03:34 -0000\r\nMessage-ID: &lt;42488D47.8040201@...&gt;\r\nDate: Mon, 28 Mar 2005 18:03:35 -0500\r\nUser-Agent: Mozilla Thunderbird 0.9 (Macintosh/20041103)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;d1vi9a+qpn3@...&gt;\r\nIn-Reply-To: &lt;d1vi9a+qpn3@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;\r\nSubject: Re: [unclassified] [junit] Re: Testing DAOs?\r\nX-Yahoo-Group-Post: member; u=127224993\r\nX-Yahoo-Profile: nails762\r\n\r\nhaefeleuser wrote:\n&gt; \n&gt; The application we write is an ERP software, so it is a little bit\n&gt; different than other applications.\n&gt; \n&gt;  &gt;&gt;What does it mean to test these validation rules? Pretend you could\n&gt;  &gt;&gt;do\n&gt;  &gt;&gt;it easily; what would the test look like? This will help me\n&gt;  &gt;&gt;understand\n&gt;  &gt;&gt;enough to respond.\n&gt; \n&gt; The data validation rules (ArticleRules.java) look like this for\n&gt; example (builder pattern):\n&gt; \n&gt; // id\n&gt; builder.beginAspect(&quot;id&quot;); // &quot;aspect&quot; means attribute\n&gt;   builder.notNull(); // means mandatory\n&gt;   builder.maxLength(14);\n&gt;   builder.ruleUnique(&quot;id&quot;, ArticleProvider.class);\n&gt; builder.endAspect();\n\nSo it looks like you need to verify that some code somewhere invokes \nthese Builder methods the right way (right methods, parameters. order). \nIn that case, I would test that code with a mock builder, verifying that \nthe methods are invoked correctly.\n\nGoing a step beyond that, I would build a domain language that I could \nverify with text, that looks like this:\n\naspect id\n     notNull\n     maxLength 14\n     ruleUnique &quot;id&quot;, ArticleProvider.class\nend\n\nNotice that this language is very similar to the methods and so you \ncould write an interpreter for that language that uses reflection to \ninvoke the builder methods. TEST THIS INTERPRETER ONCE. :)\n\nNow you can just test your &quot;builder scripts&quot; by comparing text. All \nthose tests will run quickly and be easy to write: substitute a mock \ninterpreter and check the strings sent to it.\n\nFinally, you could try XML-based configuration, which allows you to \nverify configuration with XPath. It might be well suited to this \nproject. Tests now check XML documents with XPath. (_JUnit Recipes_, \nchapter 9.)\n\n&gt; public void testIdValidation()\n&gt; {\n&gt;   // A &quot;made&quot; Article is not yet persisted\n&gt;   Article madeArticle = articleData.makeCompleteArticle();\n&gt;   // Convenience method:\n&gt;   checkNotNullValidation(&quot;id&quot;, madeArticle);\n&gt;   // Convenience method:\n&gt;   checkMaxLengthValidation(14, &quot;id&quot;, madeArticle);\n&gt;   // Persist an Article which has the same ID as madeArticle:\n&gt;   articleData.createCompleteArticle();\n&gt;   checkValidation(madeArticle, false, &quot;Validating unique id&quot;);\n&gt; }\n\nWe can test each validation rule once. Example:\n\nIf I give an object a not-null aspect, then try to make that aspect \nnull, it should blow up.\n\nI only have to test this once for every object/aspect I might ever \nbuild. No need to test that aspect for every non-nullable aspect and \nevery object. For all the objects, I only need to test my specification \n(see above).\n\n&gt;  &gt;&gt; I generally need to know whether the implementation of the finder\n&gt;  &gt;&gt; returns the proper result set, so yes.\n&gt; \n&gt; You wrote that in your book. I didn&#39;t read it at the time I wrote this\n&gt; question. A great book by the way!\n\nI&#39;m glad you like it!\n\n\n&gt; Something like this:\n&gt; \n&gt; public void testInitializationWithDefaultValues()\n&gt; {\n&gt;   CountryFactory factory = countryManager.getCountryFactory();\n&gt;   Country newCountry = factory.getNewCountryInstance();\n&gt;   assertTrue(&quot;Country.isActivated&quot;, newCountry.getIsActivated());\n&gt;   assertFalse(&quot;Country.isMemberOfEu&quot;, newCountry.getIsMemberOfEu());\n&gt; }\n\nI see: you&#39;re testing the initial state of an object. I would definitely \ndo that. Is this initial state the same if I create a Country directly? \nWould this be enough?\n\nCountry newCountry = new Country();\n...\n\nIf so, I prefer it.\n\n&gt; The managers and providers are generated, same as the test below.\n&gt; However, the test needs to be completed manually.\n&gt; \n&gt; public void testCreateUpdateDelete()\n&gt; {\n\nI intensely dislike testing three things at once. I would make this \nthree tests.\n\n&gt;   // Create-test:\n&gt;   Country createdCountry = countryData.createCompleteCountry();\n&gt;   assertFalse(&quot;Country.isNew&quot;, createdCountry.isNew());\n&gt;   // TODO If the entity contains other entities, test if the relations\n&gt; have been set.\n&gt;   // Use assertNotNull(...) for One:One relations.\n&gt;   // Use assertEquals(...) for One:Many relations.\n&gt; \n&gt;   // Update-test:\n&gt;   // TODO Modify an attribute.\n&gt;   Country updatedCountry = countryManager.updateCountry(createdCountry);\n&gt;   // TODO Expect that the update succeeded.\n&gt;   assertEquals(&quot;Country.yourAttribute&quot;,\n&gt; createdCountry.getYourAttribute(), updatedCountry.getYourAttribute());\n&gt;     \n&gt;   // Delete-test:\n&gt;   countryManager.deleteCountry(updatedCountry);\n&gt;   try\n&gt;   {\n&gt;       countryProvider.getCountryByKey(updatedCountry.getKey());\n&gt;       fail(&quot;Country has not been deleted successfully&quot;);\n&gt;   }\n&gt;   catch(NoObjectFoundException e)\n&gt;   {\n&gt;       // Its okay. We expect that the deleted entity cannot be found\n&gt; anymore.\n&gt;   }\n&gt;   // TODO If full cascade, test that child entities have been deleted.\n&gt; }\n&gt; \n&gt; Too much or okay?\n\n1. Too much in one test. This should be three tests.\n2. You don&#39;t need to test the relationships for every domain object -- \nyou should be able to test that relationships work (as learning tests \nfor JCoffee, if I remember correctly) and then, for each object, verify \nthe relationships you expect it to specify for itself. Does that make \nsense to you?\n-- \nJ. B. (Joe) Rainsberger\nDiaspar Software Services\nhttp://www.diasparsoftware.com\nAuthor, JUnit Recipes: Practical Methods for Programmer Testing\n\n", 
    "profile": "nails762", 
    "topicId": 13132, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "prevInTime": 13183, 
    "contentTrasformed": false, 
    "postDate": "1112051015", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 13159, 
    "headers": {
        "inReplyToHeader": "PGQxdmk5YStxcG4zQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQyNDg4RDQ3LjgwNDAyMDFAcm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGQxdmk5YStxcG4zQGVHcm91cHMuY29tPg=="
    }
}