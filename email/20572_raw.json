{
    "numMessagesInTopic": 21, 
    "nextInTime": 20573, 
    "senderId": "ju0etmClSFDsuhWXCLZjNakA97YW0X6cUp9R8QIYhhjNUIkYE9L-cDVGgtncky5n5tsaSm9x1snukOcPpVy4GfcX3hT1gtGluEOoRWVeVzkqWg", 
    "systemMessage": true, 
    "subject": "Re: What is expected behavior on Assert.assertEquals on Number object?", 
    "from": "&quot;putnam_david_t&quot; &lt;davidtputnam@...&gt;", 
    "authorName": "putnam_david_t", 
    "msgSnippet": "To figure out what was happening, I wrote a few tests, set some breakpoints and saw what was going on.  However, what I saw seems to disagree with the other", 
    "msgId": 20572, 
    "rawEmail": "Return-Path: &lt;davidtputnam@...&gt;\r\nReceived: (qmail 95377 invoked from network); 13 Jun 2008 16:59:49 -0000\r\nReceived: from unknown (66.218.67.96)\n  by m45.grp.scd.yahoo.com with QMQP; 13 Jun 2008 16:59:49 -0000\r\nReceived: from unknown (HELO n48c.bullet.mail.sp1.yahoo.com) (66.163.168.182)\n  by mta17.grp.scd.yahoo.com with SMTP; 13 Jun 2008 16:59:49 -0000\r\nReceived: from [216.252.122.218] by n48.bullet.mail.sp1.yahoo.com with NNFMP; 13 Jun 2008 16:59:49 -0000\r\nReceived: from [66.218.69.6] by t3.bullet.sp1.yahoo.com with NNFMP; 13 Jun 2008 16:59:49 -0000\r\nReceived: from [66.218.66.85] by t6.bullet.scd.yahoo.com with NNFMP; 13 Jun 2008 16:59:48 -0000\r\nX-Sender: davidtputnam@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 47516 invoked from network); 13 Jun 2008 14:38:34 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m42.grp.scd.yahoo.com with QMQP; 13 Jun 2008 14:38:34 -0000\r\nX-Received: from unknown (HELO n52b.bullet.mail.sp1.yahoo.com) (66.163.168.166)\n  by mta16.grp.scd.yahoo.com with SMTP; 13 Jun 2008 14:38:34 -0000\r\nX-Received: from [216.252.122.219] by n52.bullet.mail.sp1.yahoo.com with NNFMP; 13 Jun 2008 14:38:34 -0000\r\nX-Received: from [66.218.69.6] by t4.bullet.sp1.yahoo.com with NNFMP; 13 Jun 2008 14:38:34 -0000\r\nX-Received: from [66.218.67.199] by t6.bullet.scd.yahoo.com with NNFMP; 13 Jun 2008 14:38:34 -0000\r\nDate: Fri, 13 Jun 2008 14:38:34 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;g2u0pa+fvgs@...&gt;\r\nIn-Reply-To: &lt;g2i38j+q01p@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;putnam_david_t&quot; &lt;davidtputnam@...&gt;\r\nSubject: Re: What is expected behavior on Assert.assertEquals on Number object?\r\nX-Yahoo-Group-Post: member; u=92755177; y=ifJoPUJF5txD4lubq7hdxWIi62SVr_5HwyH7BNdaxWK-p9tNyadkP6k\r\nX-Yahoo-Profile: putnam_david_t\r\nX-eGroups-Approved-By: mark_l_salter &lt;marksalter@...&gt; via web; 13 Jun 2008 16:59:48 -0000\r\n\r\nTo figure out what was happening, I wrote a few tests, set some\nbreakpoints=\r\n and saw what was going on.  However, what I saw seems to\ndisagree with the=\r\n other observations in this thread.  This is what I\nexecuted: \npublic class=\r\n DoubleTest extends TestCase {\n    public void testDouble () {\n        asse=\r\nrtEquals( 12.3d, 12.4d );\n    }\n}\nI set break points in the various methods=\r\n of Assert and confirmed that\n assertEquals( Object, Object ) was invoked w=\r\nith two Double\nparameters. Now Object.equals would always fail because thes=\r\ne\nparameters are not at the same address in memory.  According to the\ndocum=\r\nentation for 1.5 the Double.equals method creates long&#39;s from the\nIEEE spec=\r\nified bits for the double value and compares their values for\nequality.  Th=\r\nis was in fact the behavior I saw during my tests.\n\nThis may not help expla=\r\nin the other behavior Nattapong saw, but at\nleast the behavior I saw confor=\r\nms to the Principle of least astonishment.\n\nDavid Putnam\n\n--- In junit@yaho=\r\nogroups.com, &quot;nat_tul&quot; &lt;natta@...&gt; wrote:\n&gt;\n&gt; --- In junit@yahoogroups.com,=\r\n &quot;Roger Glover&quot; &lt;glover_roger@&gt; \n&gt; wrote:\n&gt; &gt;\n&gt; &gt; --- In junit@yahoogroups.=\r\ncom, &quot;J. B. Rainsberger&quot; &lt;jbrains762@&gt; \n&gt; wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; On 2008-06-06,=\r\n at 08:45 , Roger Glover wrote:\n&gt; &gt; &gt; &gt; --- In junit@yahoogroups.com, Natta=\r\npong Sirilappanich &lt;natta@&gt;\n&gt; &gt; &gt; &gt; wrote:\n&gt; &gt; &gt; &gt; &gt; Actually, my point her=\r\ne is i&#39;m expecting\n&gt; &gt; &gt; &gt; &gt; org.junit.Assert.assertEquals(Object obj1, Obj=\r\nect obj2) to\n&gt; &gt; &gt; &gt; &gt; call its obj1.equals(obj2) or something like this. H=\r\nowever,\n&gt; &gt; &gt; &gt; &gt; the outcome surprise me. Assertion success but\n&gt; &gt; &gt; &gt; &gt; =\r\nobj1.equals(obj2) return false.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; What&#39;s going on inside =\r\nassertEquals() operation? Is this\n&gt; &gt; &gt; &gt; &gt; what it&#39;s suppose to be?\n&gt; &gt; &gt; =\r\n&gt;\n&gt; &gt; &gt; &gt; As I stated, albeit not very clearly the first time (Curse you\n&gt; =\r\n&gt; &gt; &gt; &quot;Rich Text Editor(Beta)&quot;!), I suspect that the culprit here is\n&gt; &gt; &gt; =\r\n&gt; that &quot;Assert.assertEquals(Object, Object)&quot; is not being called\n&gt; &gt; &gt; &gt; at=\r\n all. This is borne out by the fact that a J2SE 1.4 compiler\n&gt; &gt; &gt; &gt; and a =\r\nJavaSE 1.5 compiler treat the same call completely\n&gt; &gt; &gt; &gt; differently.\n&gt; &gt;=\r\n &gt; &gt;\n&gt; &gt; &gt; &gt; I *SUSPECT* that the 1.5 compiler is unboxing the Double\n&gt; &gt; &gt;=\r\n &gt; objects into primitive longs and that the method that is\n&gt; &gt; &gt; &gt; *ACTUAL=\r\nLY* called is &quot;Assert.assertEquals(long,long)&quot;. This\n&gt; &gt; &gt; &gt; accounts for t=\r\nhe behavior since the integer parts of your two\n&gt; &gt; &gt; &gt; numbers are the sam=\r\ne. &quot;Assert.assertEquals(long,long)&quot; yields\n&gt; &gt; &gt; &gt; successful after the Dou=\r\nbles are converted (truncated) to\n&gt; &gt; &gt; &gt; longs.\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; That&#39;s almo=\r\nst certainly what is happening, and good deduction.\n&gt; &gt; \n&gt; &gt; Thank you very=\r\n much!\n&gt; &gt; \n&gt; &gt; &gt; Now we ask the question, what&#39;s the better answer? Defeat=\r\n the  \n&gt; &gt; &gt; purpose of assertEquals(Object,Object) or letting programmers =\r\n \n&gt; &gt; &gt; hoist themselves on their own petards?\n&gt; &gt; &gt; \n&gt; &gt; &gt; JUnit could det=\r\nect this situation, but if it did, I&#39;d prefer  \n&gt; &gt; &gt; it to warn the progra=\r\nmmer rather than fix the problem, because  \n&gt; &gt; &gt; I want to encourage progr=\r\nammers to improve their design:  \n&gt; &gt; &gt; either the test should compare the =\r\nDouble values with a  \n&gt; &gt; &gt; tolerance, or perhaps the production code ough=\r\nt not to use\n&gt; &gt; &gt; Doubles.\n&gt; &gt; \n&gt; &gt; Well if that is the best solution (and=\r\n I must say that I like it\n&gt; &gt; better than the status quo) then the easiest=\r\n way to do that would\n&gt; &gt; probably be to create a bogus &quot;Assert.assertEqual=\r\ns(double,double)&quot; \n&gt; that:\n&gt; &gt; \n&gt; &gt; A) is deprecated (Yes, I mean it. A new=\r\n method that is deprecated and\n&gt; &gt; with no intent ever to remove it). The j=\r\navadoc should point to the\n&gt; &gt; 3-double overload as the preferred alternati=\r\nve and explain why.\n&gt; &gt; \n&gt; &gt; *AND*\n&gt; &gt; \n&gt; &gt; B) is implemented to unconditio=\r\nnally throw\n&gt; &gt; &quot;UnsupportedOperationException&quot; (or similar unchecked stand=\r\nard\n&gt; &gt; exception) with a message that indicates that you should use the\n&gt; =\r\n&gt; 3-double overload instead.\n&gt; I&#39;m agree with this choice. Since it&#39;s not p=\r\nreferred to be used with \n&gt; Double so some Exception should be threw.\n&gt; &gt; \n=\r\n&gt; &gt; -- Roger Glover\n&gt; &gt;    Object Partners, Inc.\n&gt; &gt;\n&gt; --------------------=\r\n----------------\n&gt; Nattapong Sirilappanich\n&gt; Engineer, National Language De=\r\nvelopment - GCoC & TSC Thailand\n&gt; Software Group, IBM Thailand Co., Ltd.\n&gt; =\r\ne-mail: natta@...\n&gt;\n\n\n\n", 
    "profile": "putnam_david_t", 
    "topicId": 20513, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 92755177, 
    "prevInTime": 20571, 
    "contentTrasformed": false, 
    "postDate": "1213367914", 
    "canDelete": false, 
    "nextInTopic": 20578, 
    "prevInTopic": 20532, 
    "headers": {
        "inReplyToHeader": "PGcyaTM4aitxMDFwQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGcydTBwYStmdmdzQGVHcm91cHMuY29tPg=="
    }
}