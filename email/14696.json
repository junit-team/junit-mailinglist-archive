{
    "numMessagesInTopic": 125, 
    "nextInTime": 14697, 
    "senderId": "ghbZGYXVcn8PPs7SqkdgFeQKfYX7uvYGsAR-ZNzP90NS-N3ZOUKZyJEgecckW_aIOND3D3awklCUW9MYUr11u71SBfUWgyDYLYZqR0riV3R75vw", 
    "systemMessage": false, 
    "subject": "Re: How to test private methods in a class.", 
    "from": "&quot;Jim Cakalic&quot; &lt;james.p.cakalic@...&gt;", 
    "authorName": "Jim Cakalic", 
    "msgSnippet": "... so I m ... not sure ... I didn t. Somebody else did when they asked the question that started this thread. But I would contend that there must be something", 
    "msgId": 14696, 
    "profile": "jim_cakalic", 
    "topicId": 14490, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 226509834, 
    "messageBody": "<div id=\"ygrps-yiv-305439410\">--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;Ilja Preuss&quot; &lt;preuss@d...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; I find that writing tests helps me a lot thinking about the design,<br/>\n </span></blockquote>so I&#39;m<br/>\n<blockquote><span title=\"ireply\"> &gt; not a fan of switching my design brain off while writing tests. I&#39;m<br/>\n </span></blockquote>not sure<br/>\n<blockquote><span title=\"ireply\"> &gt; why you would want to do that.<br/>\n&gt; <br/>\n<br/>\n </span></blockquote>I didn&#39;t. Somebody else did when they asked the question that started<br/>\nthis thread. But I would contend that there must be something wrong<br/>\nwith the practice of TDD that leads to the conclusion that the tests<br/>\ndo not adequately cover the code and the only way to get adequate<br/>\ncoverage is to make methods public.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; Given that context, my mind hasn&#39;t<br/>\n&gt; &gt; changed. If the private method is already tested through an<br/>\n&gt; &gt; existing public method then you don&#39;t need to do anything. In<br/>\n&gt; &gt; fact, exposing the method and writing an explicit test against it is<br/>\n&gt; &gt; duplication. <br/>\n&gt; <br/>\n&gt; Unless the tests of the already existing public method can be<br/>\n </span></blockquote>simplified in<br/>\n<blockquote><span title=\"ireply\"> &gt; consequence.<br/>\n<br/>\n </span></blockquote>The duplication is that there will now be two tests for exactly the<br/>\nsame thing. One through the original public method (which you will<br/>\nstill want to test, no?) and another for the originally private<br/>\nmethod. The method (nee private) is now tested twice.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; I&#39;m confused, because TDD is much more a design practice than a testing<br/>\n&gt; practice. Anyway, I don&#39;t think I proposed anything as &quot;a solution<br/>\n </span></blockquote>per se&quot;,<br/>\n<blockquote><span title=\"ireply\"> &gt; but said that it would be one of the first things I&#39;d think about,<br/>\n </span></blockquote>and that<br/>\n<blockquote><span title=\"ireply\"> &gt; I very often find that I find a solution I like when I do so.<br/>\n<br/>\n </span></blockquote>I agree that TDD is more about design than testing. My point is that<br/>\nworking TDD I wouldn&#39;t think about this at all because I wouldn&#39;t<br/>\nwrite any code without a test. I wouldn&#39;t refactor until I got to<br/>\ngreen. Private methods wouldn&#39;t exist unless they were born through<br/>\nrefactoring. I don&#39;t implement new features while refactoring. As a<br/>\nresult I don&#39;t spend time thinking about how to test private methods<br/>\nunless I&#39;m responding to threads on the JUnit Yahoo! group. ;-)<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; A private method that is complex enough to need explicite testing<br/>\n </span></blockquote>simply is<br/>\n<blockquote><span title=\"ireply\"> &gt; a hint to a class that has too many responsibilities and has lost<br/>\n </span></blockquote>cohesion.<br/>\n<blockquote><span title=\"ireply\"> &gt; A class that has just one responsibility is quite unlikely to be<br/>\n </span></blockquote>complex,<br/>\n<blockquote><span title=\"ireply\"> &gt; let alone have complex private methods.<br/>\n<br/>\n </span></blockquote>As I said, this doesn&#39;t seem to happen to me. I&#39;m not sure where we&#39;re<br/>\ndoing things differently. Maybe it&#39;s more a hint that the developer is<br/>\ntaking steps that are too big? I don&#39;t think %LOC in private methods<br/>\nis a decent metric for measuring cohesion. But then I haven&#39;t read<br/>\nMichael Feather&#39;s blog yet.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; Maybe Martin Fowler wasn&#39;t wearing his Tester hat at the<br/>\n&gt; &gt; time. Maybe he was and wanted to write a book about how to<br/>\n&gt; &gt; produce better designs, not about solving problems with unit<br/>\n&gt; &gt; tests.<br/>\n&gt; <br/>\n&gt; If I remember correctly, he put a chapter about Code Smells in the<br/>\n </span></blockquote>book -<br/>\n<blockquote><span title=\"ireply\"> &gt; about hints in the code that you should refactor. Well, I think that a<br/>\n&gt; private method that needs explicite testing is such a smell.<br/>\n<br/>\n </span></blockquote>Which one(s)?<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; So, third maybe in a row, maybe refactorings shouldn&#39;t<br/>\n&gt; &gt; be viewed as ways to solve problems with your the test suite?<br/>\n&gt; <br/>\n&gt; If your design is in the way while writing tests, it looks like a design<br/>\n&gt; problem to me. So I don&#39;t see why we should exclude refactoring as a<br/>\n </span></blockquote>viable<br/>\n<blockquote><span title=\"ireply\"> &gt; solution.<br/>\n<br/>\n </span></blockquote>I&#39;m not convinced it&#39;s a design problem. How can the design be in the<br/>\nway while writing tests if there *is* no design until you write the<br/>\ntests? How is it your design and implementation exist *before* the tests? <br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; Or, maybe it would be an interesting topic to write an<br/>\n&gt; &gt; article on -- how to apply refactorings when your focus is testing<br/>\n&gt; &gt; and not design. <br/>\n&gt; <br/>\n&gt; I really have problems following this whole notion of &quot;focus on<br/>\n </span></blockquote>testing&quot; as<br/>\n<blockquote><span title=\"ireply\"> &gt; something that excludes thinking about design. It&#39;s just not the way<br/>\n </span></blockquote>I work,<br/>\n<blockquote><span title=\"ireply\"> &gt; I guess.<br/>\n<br/>\n </span></blockquote>Conversely, I have problems following the notion that practicing TDD I<br/>\ncould get to place that was so bad in my design that I start<br/>\nrefactoring just so that I can test properly. Unless the code exists<br/>\nwhen I start writing the tests ...<br/>\n<br/>\nJim</div>", 
    "prevInTime": 14695, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1126021984", 
    "canDelete": false, 
    "nextInTopic": 14700, 
    "prevInTopic": 14691, 
    "headers": {
        "inReplyToHeader": "PDAwMGYwMWM1YjJiZiRjNjcyNjJkMCQ3MDY0YThjMEBkaXN5Lm5ldD4=", 
        "messageIdInHeader": "PGRma2UxMCtzbmZoQGVHcm91cHMuY29tPg=="
    }
}