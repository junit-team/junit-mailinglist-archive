{
    "topicId": 1696, 
    "postDate": "1040283649", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Steven Taschuk &lt;staschuk@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "4xYzC7tba2H4YUmgovQMYwUZ__lyHiyxBxGejmscN3y72rFZ20oTNKHRS1BbObMRDTLZF7sh07HdYk8nUkulGMJs-fx1_lPL3wFbR7VBQ7I", 
    "nextInTime": 6504, 
    "userId": 114327599, 
    "prevInTime": 6502, 
    "prevInTopic": 6462, 
    "headers": {
        "inReplyToHeader": "PGF0Y3RrMyt1MW84QGVHcm91cHMuY29tPjsgZnJvbSBkYXZlQHNhb3JzYS5jb20gb24gRnJpLCBEZWMgMTMsIDIwMDIgYXQgMDM6MTY6MTlQTSAtMDAwMA==", 
        "messageIdInHeader": "PDIwMDIxMjE5MDA0MDQ5LkEyMDkxQHRpYmlhLmFtb3RscGFhLmJvZ3VzPg==", 
        "referencesHeader": "PDY2QzUzQjBDODhEM0Q0MTE4RjRBMDA5MDI3RENFMDY0MDIwMzYzQkJAeWxhY3lidGV4YzAxLnlvdWJldC5jb20+IDxhdGN0azMrdTFvOEBlR3JvdXBzLmNvbT4="
    }, 
    "authorName": "Steven Taschuk", 
    "numMessagesInTopic": 108, 
    "msgSnippet": "Quoth Dave Astels : [...last Friday...] ... I happened to run into something today which made me think about this a bit more.  I d be", 
    "contentTrasformed": false, 
    "msgId": 6503, 
    "nextInTopic": 6504, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;staschuk@...&gt;\r\nReceived: (qmail 9563 invoked by uid 7800); 19 Dec 2002 15:53:52 -0000\r\nX-Sender: staschuk@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_3_0); 19 Dec 2002 06:38:05 -0000\r\nReceived: (qmail 16170 invoked from network); 19 Dec 2002 06:38:05 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m15.grp.scd.yahoo.com with QMQP; 19 Dec 2002 06:38:05 -0000\r\nReceived: from unknown (HELO tibia.amotlpaa.bogus) (161.184.198.96)\n  by mta2.grp.scd.yahoo.com with SMTP; 19 Dec 2002 06:38:04 -0000\r\nReceived: (qmail 2190 invoked by uid 100); 19 Dec 2002 07:40:49 -0000\r\nDate: Thu, 19 Dec 2002 00:40:49 -0700\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] Re: Testing Private Methods\r\nMessage-ID: &lt;20021219004049.A2091@...&gt;\r\nReferences: &lt;66C53B0C88D3D4118F4A009027DCE064020363BB@...&gt; &lt;atctk3+u1o8@...&gt;\r\nMime-Version: 1.0\r\nContent-Type: text/plain; charset=iso-8859-1\r\nContent-Disposition: inline\r\nContent-Transfer-Encoding: 8bit\r\nUser-Agent: Mutt/1.2.5i\r\nIn-Reply-To: &lt;atctk3+u1o8@...&gt;; from dave@... on Fri, Dec 13, 2002 at 03:16:19PM -0000\r\nFrom: Steven Taschuk &lt;staschuk@...&gt;\r\nX-Yahoo-Group-Post: member; u=114327599\r\nX-eGroups-Approved-By: nails762 &lt;jbr@...&gt; via email; 19 Dec 2002 15:53:52 -0000\r\n\r\nQuoth Dave Astels &lt;dave@...&gt;:\n  [...last Friday...]\n&gt; With TDD you define what you need in terms of external behavior, \n&gt; write a test for it, them implement it.  Finally you clean up by \n&gt; refactoring.  So as far as your tests are concerned everything that \n&gt; the class has to do IS public.  When I add a new method in reponse to \n&gt; a test, it&#39;s public.  When I refactor and extract methods, I make \n&gt; them private.  That&#39;s the only way I make methods private.\n\nI happened to run into something today which made me think about\nthis a bit more.  I&#39;d be interested in comments, especially on\nthese two questions: (1) Is this situation typical of those in\nwhich people want to test private methods?  (2) Is there a better\nsolution in this case than the one I give below?\n\nHere&#39;s the situation: A class GregorianDate represents a specific\nday in the proleptic Gregorian calendar, expressed (from the\nuser&#39;s point of view at least) as an ordered triple of ints:\n(year,month,date).  Certain constraints apply to this triple: year\nzero is forbidden, months must be in [1..12], the valid range of\ndates depends in familiar ways on the year and month.\n\nSo, I decide I want a partwise constructor\n\tpublic GregorianDate( int year, int month, int date )\nwhich will throw IllegalArgumentException if any of these\nconstraints are violated.  I write some tests to express the\nexpectation of such exceptions, watch them fail, write the\nconstructor, watch them pass, go for a beer.\n\nNow I want a parsing constructor\n\tpublic GregorianDate( String s ) throws DateParseException\nwhich will parse strings in ISO 8601 format (such as\n&quot;2002-12-18&quot;), throwing a DateParseException if the string is\nmalformed or if the constraints on valid dates are violated.  I\nfactor the constraint checking out of the partwise constructor and\ninto private methods so it can be reused by this new constructor,\nand now the problem arises.\n\nOn the one hand, I&#39;d like to test behaviour rather than\nimplementation, to reduce coupling between the tests and the code\nunder test; under this principle I might have, e.g., a test to\ncheck that the partwise constructor rejects month 13, and a test\nto check that the parsing constructor rejects month 13, and so\nforth, one pair for each kind of constraint violation that might\noccur.\n\nOn the other hand, these identical lists of tests, one for each\nconstructor, are inherently fragile.  If I realize there&#39;s some\nconstraint I didn&#39;t code right (say, I forgot that 2000-02-29 is a\nvalid date) then I have to remember to update the tests in two\nplaces.  This smells, and made me think briefly of trying to test\nthe internal constraint checking methods directly (which is why\nthis post is on-topic for this thread).\n\nSo far the best solution I have for this particular case goes like\nthis:  Write a utility testing method which takes an invalid\n(year,month,date) triple and calls both constructors with it,\nchecking that they both fail in their assigned ways; then, for\neach type of constraint violation, write a test method which calls\nthat utility method with a triple exhibiting the violation.\n\nThus: If for some reason the constructors are later changed to use\ndifferent implementations of the constraint checks, the tests\nremain valid -- so the tests are not tightly coupled to an\nimplementation detail, as they would be if I tested the private\nmethods directly.  If a third path to the constraint checks is\nadded (say, a third constructor of some kind), it can be added in\none place (the utility method) and immediately gets the benefit of\nall the constraint checking tests -- so I don&#39;t have to copy all\nthose tests over again, as I would with the na�ve behaviour-\ntesting plan sketched above.  Conversely, if I add or revise a\nconstraint test, the change applies to all paths to the constraint\nchecking code -- so I don&#39;t have to remember all the paths, as I\nwould with the aforementioned na�ve plan.\n\nFurthermore, the symmetry suggests this is the Right Thing(tm):\nfactoring out &quot;check constraints&quot; in the code under test has\nprovoked factoring out &quot;test that constraint X is checked&quot; in the\ntesting code.  This reflects the fact that the code under test and\nthe testing code are operating under the same conceptual model of\nwhat the code has to do, as they should.\n\nComments?\n\n-- \nSteven Taschuk           |   ,&#92;\nstaschuk@... | }&lt;__`O=\n                         |  &#39;  &quot;     Pleiosaur\n\n", 
    "subject": "Re: [junit] Re: Testing Private Methods"
}