{
    "numMessagesInTopic": 43, 
    "nextInTime": 19638, 
    "senderId": "-r5HLKYJq2BLJlRs6m_Q5EoV-kNRBG3F7qQfBNCaXUFBRfi1wNbpGt5dLd1lFg0JGmklH_YVXAxI8SZDiCOrBqwW_joPyeayypS9dgxQ7UU", 
    "systemMessage": true, 
    "subject": "Re: [junit] Testing singleton patterns", 
    "from": "Dean Wampler &lt;dean@...&gt;", 
    "authorName": "Dean Wampler", 
    "msgSnippet": "1) Instantiate instances of the factory ... Pat, The main benefit you ve gained is that you ve moved the bad karma ;) to one location. There is a fundamental", 
    "msgId": 19637, 
    "rawEmail": "Return-Path: &lt;dean@...&gt;\r\nReceived: (qmail 60709 invoked from network); 28 Jul 2007 14:43:09 -0000\r\nReceived: from unknown (66.218.66.68)\n  by m48.grp.scd.yahoo.com with QMQP; 28 Jul 2007 14:43:09 -0000\r\nReceived: from unknown (HELO n24c.bullet.sp1.yahoo.com) (209.131.38.236)\n  by mta11.grp.scd.yahoo.com with SMTP; 28 Jul 2007 14:43:09 -0000\r\nReceived: from [216.252.122.217] by n24.bullet.sp1.yahoo.com with NNFMP; 28 Jul 2007 14:41:47 -0000\r\nReceived: from [66.218.69.4] by t2.bullet.sp1.yahoo.com with NNFMP; 28 Jul 2007 14:41:47 -0000\r\nReceived: from [66.218.66.91] by t4.bullet.scd.yahoo.com with NNFMP; 28 Jul 2007 14:41:47 -0000\r\nX-Sender: dean@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 9694 invoked from network); 28 Jul 2007 14:40:02 -0000\r\nReceived: from unknown (66.218.66.70)\n  by m46.grp.scd.yahoo.com with QMQP; 28 Jul 2007 14:40:02 -0000\r\nReceived: from unknown (HELO D2025.servadmin.com) (12.158.191.30)\n  by mta12.grp.scd.yahoo.com with SMTP; 28 Jul 2007 14:40:01 -0000\r\nReceived: from [192.168.2.6] (adsl-69-210-248-26.dsl.chcgil.ameritech.net [69.210.248.26])\n\t(authenticated bits=0)\n\tby D2025.servadmin.com (8.13.7/8.13.4) with ESMTP id l6SEaR8I028899\n\t(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);\n\tSat, 28 Jul 2007 09:36:28 -0500\r\nIn-Reply-To: &lt;46AB416C.2040400@...&gt;\r\nReferences: &lt;46AB416C.2040400@...&gt;\r\nMime-Version: 1.0 (Apple Message framework v752.3)\r\nContent-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed\r\nMessage-Id: &lt;0F181AA8-848E-4529-B794-7AA2EA43A120@...&gt;\r\nCc: Dean Wampler &lt;dean@...&gt;\r\nContent-Transfer-Encoding: 7bit\r\nDate: Sat, 28 Jul 2007 09:40:22 -0500\r\nTo: junit@yahoogroups.com\r\nX-Mailer: Apple Mail (2.752.3)\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Dean Wampler &lt;dean@...&gt;\r\nSubject: Re: [junit] Testing singleton patterns\r\nX-Yahoo-Group-Post: member; u=171044160; y=Ey5Cc7DfnVWoHSV4Q6rKuzRgz0H7FnqsXZ7YioIw7wAPciy6RGk\r\nX-Yahoo-Profile: deanwampler\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: mark_l_salter &lt;marksalter@...&gt; via web; 28 Jul 2007 14:41:46 -0000\r\n\r\n1) Instantiate instances of the factory\nOn Jul 28, 2007, at 8:15 AM, Pat Farrell wrote:\n\n&gt; This may be a bit off charter, but I&#39;ve been reading some well argued\n&gt; articles that have names such as &quot;Why is Singleton evil?&quot; and at  \n&gt; the top\n&gt; of the list are troubles that the singleton pattern causes for unit\n&gt; testing. (which is on topic.)\n&gt;\n&gt; The usual suggestions for rewriting the code are offered, such as  \n&gt; using\n&gt; a factory class to allocate/create objects, and always always just\n&gt; returning the one and only.\n&gt;\n&gt; So far, so good. But, the Factory class has to keep a store of\n&gt; anti-singletons. And the usual call is something like\n&gt; AntiSingleton anAnti = Factory.createAntiSingleton();\n&gt;\n&gt; Which is used statically, and implies that the Factory is a  \n&gt; singleton so\n&gt; its cache of AntiSingletons can be kept in one and only one store.\n&gt;\n&gt; I&#39;m not seeing how changing the Singleton class to a class that needs\n&gt; the singleton Factory class has done anything. We&#39;ve still got a\n&gt; singleton, and so all arguments that there is implied coupling, and  \n&gt; bad\n&gt; karma for testing still hold.\n&gt;\n&gt; Thanks\n&gt; Pat\n&gt;\nPat,\n\nThe main benefit you&#39;ve gained is that you&#39;ve moved the bad karma ;)  \nto one location. There is a fundamental &quot;chicken and egg&quot; problem  \nthat some module somewhere has to know how to instantiate objects and  \nwhich ones to instantiate. Localizing that logic in a factory or  \nsimilar mechanism means that the rest of your code is easier to test,  \nas well as being more modular, etc.\n\nHowever, there is one other crucial change required; rather than have  \nyour objects invoke the factory themselves, you should supply  \nconstructor parameters or setters where the dependencies can be  \n&quot;injected&quot;. The factories should do this &quot;wiring&quot; themselves, rather  \nthan having each object call a factory (or new) to satisfy its  \ndependencies.\n\nWith this &quot;dependency inversion&quot; and 1 (or a few) factory(ies), the  \nproblem of the factory singleton itself isn&#39;t so hard to solve. In  \nyour production code, &quot;main&quot; would instantiate it. Or, you could use  \na dedicated dependency-injection framework, like the one in the  \nSpring Framework.\n\nIn your unit tests, you just instantiate mocks, etc. for the  \ndependencies that your factory &quot;mechanism&quot; would create in production  \nruns. That is, your test setup code does the work that the factory  \nwould normally do.\n\nHTH,\n\nDean\n\n\nDean Wampler, Ph.D.\ndean at objectmentor.com\nhttp://www.objectmentor.com\nhttp://www.aspectprogramming.com\nhttp://www.contract4j.org\n\n\n&gt; p.s. any hints of forums/lists where this topic could be explored  \n&gt; would\n&gt; be greatly appreciated. I&#39;ve found lots of places where rookies can  \n&gt; ask\n&gt; how to use a HashMap, and lots where folks argue about JSRs, but I&#39;m\n&gt; really looking for somewhere where professional, experienced Java\n&gt; developers can get answers to hard questions.\n&gt;\n&gt; -- \n&gt; Pat Farrell\tpfarrell@...\n&gt; www.bioinformatx.com\n&gt;\n\n\n\n\n", 
    "profile": "deanwampler", 
    "topicId": 19636, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 171044160, 
    "prevInTime": 19636, 
    "contentTrasformed": false, 
    "postDate": "1185633622", 
    "canDelete": false, 
    "nextInTopic": 19638, 
    "prevInTopic": 19636, 
    "headers": {
        "inReplyToHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg==", 
        "messageIdInHeader": "PDBGMTgxQUE4LTg0OEUtNDUyOS1CNzk0LTdBQTJFQTQzQTEyMEBhc3BlY3Rwcm9ncmFtbWluZy5jb20+", 
        "referencesHeader": "PDQ2QUI0MTZDLjIwNDA0MDBAcGZhcnJlbGwuY29tPg=="
    }
}