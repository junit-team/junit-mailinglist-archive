{
    "numMessagesInTopic": 27, 
    "nextInTime": 24101, 
    "senderId": "Ez4iYIzolEWd7aKrdZbYyaMt0jx_ggmAvKpAvpLHVzC_YFv18lOks09SBKeRRcxkM3KWG-0JOh9TbWVO-FT5yJ01-ctUYORd_faCUC7zDUWjCRJxil7D4gI", 
    "systemMessage": false, 
    "subject": "Re: [junit] assertArrayEquals on arrays of objects", 
    "from": "Stephen Connolly &lt;stephen.alan.connolly@...&gt;", 
    "authorName": "Stephen Connolly", 
    "msgSnippet": "... Every line of code you write introduces another place for you to write a bug. So adding test hooks to your production code, whatever form those hooks take,", 
    "msgId": 24100, 
    "rawEmail": "Return-Path: &lt;stephen.alan.connolly@...&gt;\r\nReceived: (qmail 61057 invoked by uid 7800); 18 Nov 2012 09:13:24 -0000\r\nX-Sender: stephen.alan.connolly@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 53758 invoked from network); 18 Nov 2012 09:03:07 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m13.grp.sp2.yahoo.com with QMQP; 18 Nov 2012 09:03:07 -0000\r\nX-Received: from unknown (HELO mail-wg0-f51.google.com) (74.125.82.51)\n  by mta1.grp.sp2.yahoo.com with SMTP; 18 Nov 2012 09:03:06 -0000\r\nX-Received: by mail-wg0-f51.google.com with SMTP id ed3so1585644wgb.32\n        for &lt;junit@yahoogroups.com&gt;; Sun, 18 Nov 2012 01:03:06 -0800 (PST)\r\nMIME-Version: 1.0\r\nX-Received: by 10.180.94.169 with SMTP id dd9mr4487105wib.14.1353229385879; Sun,\n 18 Nov 2012 01:03:05 -0800 (PST)\r\nX-Received: by 10.217.5.195 with HTTP; Sun, 18 Nov 2012 01:03:05 -0800 (PST)\r\nIn-Reply-To: &lt;CAOphgJAjeM_u5XABQ8Zc481Q1cH-w-jKDBze06f5HTj_Lr2Y3g@...&gt;\r\nReferences: &lt;k88p63+p6jc@...&gt;\n\t&lt;DA6E9228-6EDC-44AE-92A0-35B06F81104C@...&gt;\n\t&lt;20121117153056.53bc6f70@habanero&gt;\n\t&lt;24D3CBB2-4D7C-4EED-B45B-9DC5106DA473@...&gt;\n\t&lt;20121117162005.7760a9d4@habanero&gt;\n\t&lt;CA+nPnMzsWg2zg8avA86PAwgoRzHJpkKkEFoKYiH5j6T5bCCu=A@...&gt;\n\t&lt;CAOphgJAjeM_u5XABQ8Zc481Q1cH-w-jKDBze06f5HTj_Lr2Y3g@...&gt;\r\nDate: Sun, 18 Nov 2012 09:03:05 +0000\r\nMessage-ID: &lt;CA+nPnMwgGQ8WGHnOQU9_mDbOQEHWEZAg9Z2W1vez4q_Jjs+E_g@...&gt;\r\nTo: &quot;junit@yahoogroups.com&quot; &lt;junit@yahoogroups.com&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Stephen Connolly &lt;stephen.alan.connolly@...&gt;\r\nSubject: Re: [junit] assertArrayEquals on arrays of objects\r\nX-Yahoo-Group-Post: member; u=458231986; y=6Opq86Y9JkzNSAVnagw6gF26HfFeXYu42570xlwsNxhtftVu-SVozfNKHKp7vg\r\nX-Yahoo-Profile: stephenalanconnolly\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Approved-By: dsaff &lt;david@...&gt; via email; 18 Nov 2012 09:13:24 -0000\r\n\r\nOn Sunday, 18 November 2012, C=C3=A9dric Beust =E2=99=94 wrote:\n\n&gt; On Sat, =\r\nNov 17, 2012 at 5:45 PM, Stephen Connolly &lt;\n&gt; stephen.alan.connolly@gmail.c=\r\nom &lt;javascript:;&gt;&gt; wrote:\n&gt;\n&gt; &gt; Don&#39;t add equality or hashCode methods *bec=\r\nause* you need them for\n&gt; testing\n&gt;\n&gt;\n&gt; What&#39;s the justification for this r=\r\nestriction? It makes no sense to me.\n&gt;\n&gt;\nEvery line of code you write intro=\r\nduces another place for you to write a\nbug. So adding test hooks to your pr=\r\noduction code, whatever form those\nhooks take, is adding more scope for bug=\r\ns.\n\nProduction code should be just what is required and no more, ie no dead=\r\n\ncode please.\n\nThat is the ideal we should strive for, just as 100% coverag=\r\ne is the ideal\nwe should strive for.\n\nNow in practice, for my code, I usual=\r\nly implement equals and hash code...\nBut I do so *following the correct con=\r\ntract for equals and hashcode*\n\nOne of the elements of that contract is tha=\r\nt hashCode of two equal objects\nshould be identical, and that it should be =\r\nbased on the objects final\nfields.\n\noften enough to warrant mentioning (tho=\r\nugh not every day), unless your\nobjects are immutable (I like immutable obj=\r\nects too btw which is why this\ndoesn&#39;t happen every day for me) you will fi=\r\nnd that the necessities of the\nequals and hashCode contracts with respect t=\r\no collections etc, results in\nequals methods that only compare on a subset =\r\nof the objects fields, in\nwhich case you need, in your tests, to compare on=\r\n the non-final fields too.\n\nOn other occasions I have found it necessary to=\r\n leave the equals and\nhashCode methods unimplemented because I need specifi=\r\nc behaviour within\ncollections. In such cases I typically have test cases t=\r\no verify that\nequals is inherited from Object so that future maintainers do=\r\n not\naccidentally add an implementation.\n\nNormally, I use a wrapper class f=\r\nor adding such objects to collections so\nthat it is safe to use equals... B=\r\nut that can put an excessive GC load, and\nas a result you may be forced to =\r\ngo without the  wrapper... In a sense it\nis a pity that the collections cla=\r\nsses do not allow for plugable hashCode\nand equality strategies,\n\n&gt;\n&gt; You m=\r\night never have to test for equality of your objects in production but\n&gt; ne=\r\ned it for testing.\n\n\nOr you might have need for the Object.equals behaviour=\r\n\n\n\n&gt;\n&gt; And more generally, there is really nothing wrong with implementing\n=\r\n&gt; hashCode()/equals() for your objects that match their purpose.\n\n\nThe poin=\r\nt is that such purpose may not match the needs of testing.\n\nI agree that 95=\r\n% if the time adding equals and hashCode is perfectly fine.\nAnd since we of=\r\nten use IDE tooling or Guava&#39;s helpers (or equivalent\nhelpers) to implement=\r\n these methods it is very low risk. My point is that\nthere are times when i=\r\nt is less clear, and a subset of those where it is\nthe wrong thing to do.\n\n=\r\nYou should always know *why* you are adding code to production. Adding code=\r\n\n*just because your tests need it* is a bad code smell... It indicates that=\r\n\neither you don&#39;t understand a production requirement of your code (which\nm=\r\nay mean that the equals method is needed anyway) or you have a bad design\no=\r\nf your production code in the first place.\n\nAnother final point is that rel=\r\nying on equals comparing equality as opposed\nto identity within your tests =\r\ncan hinder refactoring as it may make it\nharder to split the class given th=\r\nat you then have to take care that the\nequals methods are split correctly..=\r\n. Using duck comparison based on eg\nGuava&#39;s helpers is very little work and=\r\n allows for correct testing.\n\n\n&gt; --\n&gt; C=C3=A9dric\n&gt;\n&gt;\n&gt; [Non-text portions =\r\nof this message have been removed]\n&gt;\n&gt;\n&gt;\n&gt; --------------------------------=\r\n----\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n[Non-text portions of this message h=\r\nave been removed]\n\n\n", 
    "profile": "stephenalanconnolly", 
    "topicId": 24091, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 458231986, 
    "prevInTime": 24099, 
    "contentTrasformed": false, 
    "postDate": "1353229385", 
    "canDelete": false, 
    "nextInTopic": 24101, 
    "prevInTopic": 24099, 
    "headers": {
        "inReplyToHeader": "PENBT3BoZ0pBamVNX3U1WEFCUThaYzQ4MVExY0gtdy1qS0RCemUwNmY1SFRqX0xyMlkzZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBK25Qbk13Z0dROFdHSG5PUVU5X21EYk9RRUhXRVpBZzlaMlcxdmV6NHFfSmpzK0VfZ0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGs4OHA2MytwNmpjQGVHcm91cHMuY29tPgk8REE2RTkyMjgtNkVEQy00NEFFLTkyQTAtMzVCMDZGODExMDRDQGdtYWlsLmNvbT4JPDIwMTIxMTE3MTUzMDU2LjUzYmM2ZjcwQGhhYmFuZXJvPgk8MjREM0NCQjItNEQ3Qy00RUVELUI0NUItOURDNTEwNkRBNDczQGdtYWlsLmNvbT4JPDIwMTIxMTE3MTYyMDA1Ljc3NjBhOWQ0QGhhYmFuZXJvPgk8Q0ErblBuTXpzV2cyemc4YXZBODZQQXdnb1J6SEpwa0trRUZvS1lpSDVqNlQ1YkNDdT1BQG1haWwuZ21haWwuY29tPgk8Q0FPcGhnSkFqZU1fdTVYQUJROFpjNDgxUTFjSC13LWpLREJ6ZTA2ZjVIVGpfTHIyWTNnQG1haWwuZ21haWwuY29tPg=="
    }
}