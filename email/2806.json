{
    "numMessagesInTopic": 12, 
    "nextInTime": 2807, 
    "senderId": "NpjAAPyyfvsVdn3Wqixkw-BEqlsJHaD_wyIIPa3ur2_YpoPliBg1F9PhbdckrtJOMwHxUFADbGD5YckBFFEcV0fCEhvb", 
    "systemMessage": false, 
    "subject": "Re: [junit] Tangled design (Re: Test framework improvement)", 
    "from": "Eric Vought &lt;evought@...&gt;", 
    "authorName": "Eric Vought", 
    "msgSnippet": "I m not sure what Kent had in mind, but: In the first set of situations you mention (Logger hierarchies, config files, etc), these can often be dealt with by", 
    "msgId": 2806, 
    "topicId": 2801, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-539985164\">I&#39;m not sure what Kent had in mind, but:<br/>\n<br/>\nIn the first set of situations you mention (Logger hierarchies, config<br/>\nfiles, etc), these can often be dealt with by stubbing out these<br/>\ncomponents.<br/>\n<br/>\nFor example, although an application may use a complex logging<br/>\nhierarchy which routes different classes of messages to different files or<br/>\nhosts, the testcases are handed a Logger with a single listener which<br/>\nsends output to a single local file which is appropriately labelled and<br/>\nfiled. Having this setup run for each test method does not slow my<br/>\ntestcases down appreciably. It doesn&#39;t matter to the testcases where the<br/>\nLogger actually sends its output to- just that there is something there to<br/>\naccept events. I have a LoggerTestCase which performs this setup for me<br/>\nand I just don&#39;t worry about it.<br/>\n<br/>\nThe issue is similar with config files. Most testcases don&#39;t care where<br/>\nthe configuration data comes from. I just create a Map as a fixture which<br/>\ncontains exactly what is needed for particular testcases. My code doesn&#39;t<br/>\ncare what mechanism was used to populate the Map or what 10 gazillion<br/>\nother values might be available. The actual process of interpreting the<br/>\nconfig files or database or whatever is in a separate package and<br/>\nindependently tested.<br/>\n<br/>\nI think the design issue is making your classes much less dependent on the<br/>\nglobal state. Singletons are just one aspect of that. If these components<br/>\nare hidden behind nice interfaces, then you have a lot of freedom to<br/>\ndecide just how much initialization is needed and can dumnmy out a lot of<br/>\nextra complexity.<br/>\n<br/>\nRMI *is* an issue and is one of the places I have had significant problems<br/>\nwith per-testcase fixtures. This and other testing issues led to me<br/>\ndramatically reducing my use of RMI.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Tue, 2 Oct 2001, Berin Loritsch wrote:<br/>\n<br/>\n&gt; &quot;J. B. Rainsberger&quot; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Kent:<br/>\n&gt; &gt;<br/>\n&gt; &gt; You&#39;ve made this suggestion a few times recently, and I was hoping you would<br/>\n&gt; &gt; elaborate on it. Do you have a specific example in mind of how a TestSetup<br/>\n&gt; &gt; indicated that something was wrong.<br/>\n&gt; &gt;<br/>\n&gt; &gt; I have written an article on how singletons can defeat unit testing. I have<br/>\n&gt; &gt; observed that if a test relies on the state of a singleton, then there may<br/>\n&gt; &gt; be a desire to do one-time setup code and *that* is the sign of a code<br/>\n&gt; &gt; smell. Can you offer a different example? I&#39;d really like the opportunity to<br/>\n&gt; &gt; learn from it.<br/>\n&gt;<br/>\n&gt; For me, it is not a question of testing singletons.  It is a question of waiting<br/>\n&gt; for a configuration file to be read, a logger hierarchy to be set up, a Component Manager<br/>\n&gt; to be populated, a Context to be popluated, the test to be run, and everything to be<br/>\n&gt; torn down.  This occurs for _every_ test in the testcase.  The framework in question<br/>\n&gt; is well tested and scalable, the tests are for the Components loaded into the Component<br/>\n&gt; Manager.<br/>\n&gt;<br/>\n&gt; Another example is testing RMI resources.  The testcase needs to set up the RMI<br/>\n&gt; server code once because you will inevitably get a SocketException claiming that<br/>\n&gt; the port you want to listen to is already bound.  In this case, the common TestCase<br/>\n&gt; class is not sufficient.<br/>\n&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Thanks,<br/>\n&gt; &gt; JBR.<br/>\n&gt; &gt;<br/>\n&gt; &gt; ----- Original Message -----<br/>\n&gt; &gt;  &gt; Your FAQ suggests that for one-time setup code you need to run<br/>\n&gt; &gt;  &gt; it in a TestSuite.<br/>\n&gt; &gt;<br/>\n&gt; &gt; This is what TestSetup is for. Wrap the suite in a subclass of<br/>\n&gt; &gt; TestSetup, override setUp() (and maybe tearDown()) in your subclass,<br/>\n&gt; &gt; and it only gets run once.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Alternatively, you could consider how to untangle your design so you<br/>\n&gt; &gt; didn&#39;t need one-time setup.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Kent<br/>\n&gt; &gt;<br/>\n&gt; &gt; _________________________________________________________________<br/>\n&gt; &gt; Get your FREE download of MSN Explorer at <a rel=\"nofollow\" target=\"_blank\" href=\"http://explorer.msn.com/intl.asp\">http://explorer.msn.com/intl.asp</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Your use of Yahoo! Groups is subject to <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n-- <br/>\nEric Vought<br/>\nChief Technical Officer - QLUE Consulting, Inc.<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a> toll-free: 888-771-3538  RTP area: 919-816-9901 </span></blockquote></div>", 
    "prevInTime": 2805, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1002049668", 
    "canDelete": false, 
    "nextInTopic": 2807, 
    "prevInTopic": 2805, 
    "headers": {
        "inReplyToHeader": "PDNCQjlGQzM4LjdBMkY5MjUzQGFwYWNoZS5vcmc+", 
        "messageIdInHeader": "PFBpbmUuTE5YLjQuMzAuMDExMDAyMTQ1MjQyMC44NzQ3LTEwMDAwMEBicmFpbi5xbHVlLWxhbj4="
    }
}