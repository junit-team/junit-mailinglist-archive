{
    "numMessagesInTopic": 9, 
    "nextInTime": 16020, 
    "senderId": "d8ideO5hNZtz8lTpIeB7xGAXWltGIuaKgRcl_NW2gTbV_-Hw5t9-wnkdzE4Pd-Xks3zf0oGx49yT8cnLaO0NWE8RN3oRCAHL5g", 
    "systemMessage": true, 
    "subject": "testing private methods in Struts Actions ?", 
    "from": "&quot;frank zou&quot; &lt;frankz1998@...&gt;", 
    "authorName": "frank zou", 
    "msgSnippet": "Hi, I am a newbie on JUnit-based testing. This is my first time to post message.I have some questoins here, and hope to get help from you. I am using Struts", 
    "msgId": 16019, 
    "profile": "frankz1998", 
    "topicId": 16019, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 193176558, 
    "messageBody": "<div id=\"ygrps-yiv-430374766\">Hi, I am a newbie on JUnit-based testing. This is my first time to<br/>\npost message.I have some questoins here, and hope to get help from you. <br/>\n<br/>\nI am using Struts and I want to test an action similiar to the<br/>\nfollowing snippet. <br/>\n<br/>\npublic ActionForward execute(ActionMapping mapping, ActionForm form,<br/>\n\t\t\tHttpServletRequest request, HttpServletResponse response)<br/>\n\t\t\t{<br/>\n<br/>\n\t\tcreateEventLog(request);<br/>\n\t\t<br/>\n\t\thandleSessionAndToken(request);<br/>\n\t\t...<br/>\n\t\tclearUserRelatedCookies(siteId, response);<br/>\n<br/>\n\t\tString returnUrl = createReturnUrl(mapping, request);<br/>\n\t\trequest.setAttribute(LOGIN_RETURN_URL, returnUrl);<br/>\n\t\treturn mapping.findForward(PAGE_SUCCESS);<br/>\n\t}<br/>\n<br/>\nThe original version of this method implemented all features within<br/>\nit. I think it was not good. To make it easier to understand and test,<br/>\nI refactor it and abstracted 4 private methods, like createEventLog(),<br/>\nclearUserRelatedCookies(), createReturnUrl(), handleSessionAndToken(). . <br/>\n<br/>\nHere are my questions:<br/>\n<br/>\n* Did I do a right refactorying in terms of testability ?<br/>\n<br/>\n* After refactorying, the execute(...) is almost empty. All the<br/>\nconcrete work is done by private methods. Is this good in terms of<br/>\ndesign ?<br/>\n<br/>\n* How should I test the private methods ? From what I saw on this<br/>\nforum, someone suggest we usually DO NOT test private method. If so,<br/>\nhow should I test this class where there is only one public method<br/>\nwhich actually does very little ?<br/>\n<br/>\n* Maybe someone would suggest to put these private methods to a<br/>\nseparate class, right ? If yes, I am afraid we would have so many<br/>\nclasses which seems not having reasons to exist on their own. <br/>\n<br/>\n* How should I test execute() method here ? One thing I could see is<br/>\njust to use StrutsTestCase and assert &quot;returnUrl&quot; is correct and etc. <br/>\n<br/>\n* When using StrutsTestCase, we have to call all the code down to DB.<br/>\nSo we just wrote a wrapper for StrutsTestCase and merge the function<br/>\nof  JMoock into it, this way we can test this action in isolation of<br/>\nDB ( by mocking the whole biz layer code ). Is this a right approach ?<br/>\n<br/>\n<br/>\nThe issues really confused me. Testing gurus, please give me a hand.<br/>\nThanks.</div>", 
    "prevInTime": 16018, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1139368379", 
    "canDelete": false, 
    "nextInTopic": 16031, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGRzYm5qciszbGNpQGVHcm91cHMuY29tPg=="
    }
}