{
    "numMessagesInTopic": 9, 
    "nextInTime": 22792, 
    "senderId": "YpE_OOdlE_8xQGLMY25ncKyoxZqC3TMJlMkuZyusrumqfBcyQ2GEitaDR3KbQdGPlU3TVVlzVHScdHMEa4WUjRnKbi8FainPzoDu5zfXLC4qYmiOLwKf", 
    "systemMessage": true, 
    "subject": "Re: @BeforeClass method for DBUnit Dataset creation", 
    "from": "&quot;Bogdan&quot; &lt;bogdan.mocanu.notifications@...&gt;", 
    "authorName": "Bogdan", 
    "msgSnippet": "Just like PostConstruct, you also have the PreDestroy annotation. Annotating a method with this will allow you to execute code before the respective bean is", 
    "msgId": 22791, 
    "rawEmail": "Return-Path: &lt;bogdan.mocanu.notifications@...&gt;\r\nReceived: (qmail 14506 invoked from network); 4 Jul 2010 20:25:08 -0000\r\nReceived: from unknown (98.137.34.45)\n  by m11.grp.re1.yahoo.com with QMQP; 4 Jul 2010 20:25:08 -0000\r\nReceived: from unknown (HELO n44d.bullet.mail.sp1.yahoo.com) (66.163.169.158)\n  by mta2.grp.sp2.yahoo.com with SMTP; 4 Jul 2010 20:25:08 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1278275101; bh=Yhd9vvoFTI6Y9v9GoP3IerYqBAbowVXaWIov87LdXFk=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:Date:To:Message-ID:In-Reply-To:User-Agent:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-Yahoo-Newman-Property:X-Originating-IP:X-Yahoo-Post-IP:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:X-YGroups-SubInfo:Sender:X-eGroups-Approved-By:X-eGroups-Auth; b=YjWBHX2WEpaXLDB1qZ8oLbv++JIsurlLaKjkc/mddyXwUQGfPHaeTwFmvmzErsvneGOP8mZNpkWygIaH978USELVZFb/6LGyUtutEGTkcVet88kvQsbeR7ibZIar8Gsx\r\nReceived: from [69.147.65.174] by n44.bullet.mail.sp1.yahoo.com with NNFMP; 04 Jul 2010 20:25:01 -0000\r\nReceived: from [98.137.34.184] by t12.bullet.mail.sp1.yahoo.com with NNFMP; 04 Jul 2010 20:25:01 -0000\r\nX-Sender: bogdan.mocanu.notifications@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 2847 invoked from network); 4 Jul 2010 19:22:51 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m4.grp.sp2.yahoo.com with QMQP; 4 Jul 2010 19:22:51 -0000\r\nX-Received: from unknown (HELO n46b.bullet.mail.sp1.yahoo.com) (66.163.168.160)\n  by mta2.grp.sp2.yahoo.com with SMTP; 4 Jul 2010 19:22:51 -0000\r\nX-Received: from [69.147.65.171] by n46.bullet.mail.sp1.yahoo.com with NNFMP; 04 Jul 2010 19:22:10 -0000\r\nX-Received: from [98.137.34.33] by t13.bullet.mail.sp1.yahoo.com with NNFMP; 04 Jul 2010 19:22:10 -0000\r\nDate: Sun, 04 Jul 2010 19:22:10 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;i0qn12+3cnl@...&gt;\r\nIn-Reply-To: &lt;i0l196+h80d@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nFrom: &quot;Bogdan&quot; &lt;bogdan.mocanu.notifications@...&gt;\r\nSubject: Re: @BeforeClass method for DBUnit Dataset creation\r\nX-Yahoo-Group-Post: member; u=414734247; y=A3KBTut_TewIHj6M5QlBiy0Njh6vY4NgVFbBpFNHA3hiqIjCl7-89RaHIw\r\nX-Yahoo-Profile: bogdanmocanu2011\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 04 Jul 2010 20:25:00 -0000\r\n\r\nJust like PostConstruct, you also have the PreDestroy annotation. Annotatin=\r\ng a method with this will allow you to execute code before the respective b=\r\nean is taken out of the context.\n\nMore generaly, you could implement (if yo=\r\nu don&#39;t already have) a Spring bean that is responsible with setting up the=\r\n test, and then cleaning up when the tests are finished. Having this bean a=\r\ns a Spring singleton ensures that the bean will be created only once, and t=\r\nhe initialization + destruction methods will also be called only once.\n\nBog=\r\ndan\n\n--- In junit@yahoogroups.com, &quot;hdave321321&quot; &lt;hdave321321@...&gt; wrote:\n&gt;=\r\n\n&gt; I am totally good with hacks!  However, this one still leaves me with a =\r\nproblem.  I still need to delete the test data after all the tests have run=\r\n!  The only way to do this is via @AfterClass which, again, forces all my D=\r\nBUnit code to be static which doesn&#39;t work.\n&gt; \n&gt; In the meantime, I impleme=\r\nnted another approach that has seemed to work.   I created a non-static DBU=\r\nnitHelper class and used Spring to instantiate one of these and inject it i=\r\nnto the root class of my test classes.  The DBUnitHelper class uses your ap=\r\nproach to ensure the data is only loaded once regardless of how many times =\r\nit is asked to load it.  Deleting the data from an @AfterClass static metho=\r\nd was also simple.  So for now, I am happy.\n&gt; \n&gt; For the record, an alterna=\r\ntive (and better) approach I learned about elsewhere is to do what unitils =\r\ndoes and create a custom testexecutionlistener.\n&gt; \n&gt; Also for the record, i=\r\nf you annotate a method with @PostConstruct -- it&#39;s also a great way to loa=\r\nd the data just once.  However, you are still left with the cleanup problem=\r\n....\n&gt; \n&gt; Anyway hope all this helps somebody else!\n&gt; \n&gt; --- In junit@yahoo=\r\ngroups.com, Mike Forsberg &lt;bigmike.f@&gt; wrote:\n&gt; &gt;\n&gt; &gt; The hack of a initali=\r\nzationOccurred boolean is always an option.\n&gt; &gt; \n&gt; &gt; In other words... use =\r\na static field that is initially set to false.  Then\n&gt; &gt; when you come to y=\r\nour setup method, only do the update if the field is\n&gt; &gt; false.  Just remem=\r\nber to set the field to true once the update occurs.  This\n&gt; &gt; way, no matt=\r\ner which test runs first or even if a sub set of tests run, then\n&gt; &gt; the re=\r\nset only occurs initially.\n&gt; &gt; \n&gt; &gt; There may be a better way to do this, b=\r\nut I like to fall back on this\n&gt; &gt; recipe.\n&gt; &gt; \n&gt; &gt; Big Mike\n&gt; &gt; \n&gt; &gt; On Th=\r\nu, Jul 1, 2010 at 11:39 AM, hdave321321 &lt;hdave321321@&gt; wrote:\n&gt; &gt; \n&gt; &gt; &gt;\n&gt; =\r\n&gt; &gt;\n&gt; &gt; &gt; Thanks for the help. In my case, Spring Test does an automatic tr=\r\nansaction\n&gt; &gt; &gt; rollback after every test method, so there are no dependenc=\r\nies between tests\n&gt; &gt; &gt; -- so thats not a problem. Because of the rollback,=\r\n it is also the case that\n&gt; &gt; &gt; they order of the test runs also doesn&#39;t ma=\r\ntter. The database is reset to a\n&gt; &gt; &gt; &quot;known&quot; state after each test method=\r\n by the transactional rollback.\n&gt; &gt; &gt;\n&gt; &gt; &gt; I&#39;d just like to load the data =\r\nonce rather than 50 times. But the\n&gt; &gt; &gt; @BeforeClass requirement to be a s=\r\ntatic method makes it impossible to use.\n&gt; &gt; &gt; Is there any trigger that ca=\r\nn run after a class is initialized by Spring and\n&gt; &gt; &gt; before any test meth=\r\nod is executed?\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In junit@yahoogroups.com &lt;junit%40yah=\r\noogroups.com&gt;, Mike Forsberg\n&gt; &gt; &gt; &lt;bigmike.f@&gt; wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; I wo=\r\nuld advise against that unless you were following the following guide\n&gt; &gt; &gt;=\r\n &gt; lines....\n&gt; &gt; &gt; &gt; - No test method (or called method) manipulates the da=\r\nta base.\n&gt; &gt; &gt; &gt; - The order of the test methods do not cause conflicts wit=\r\nh each other\n&gt; &gt; &gt; with\n&gt; &gt; &gt; &gt; required data being there.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; =\r\nSome things I&#39;d try before doing the @BeforeClass\n&gt; &gt; &gt; &gt; - Only populate t=\r\nhe data you need for a given set of tests. (Don&#39;t\n&gt; &gt; &gt; populate\n&gt; &gt; &gt; &gt; th=\r\ne _whole_ database.)\n&gt; &gt; &gt; &gt; - Which of the DBUnit population features are =\r\nyou using... I think there\n&gt; &gt; &gt; is\n&gt; &gt; &gt; &gt; one that will revert to a known=\r\n state, without the delete and insert.\n&gt; &gt; &gt; This\n&gt; &gt; &gt; &gt; may save some tim=\r\ne.\n&gt; &gt; &gt; &gt; - Try to use a non-commitable transaction for testing. After all=\r\n, one\n&gt; &gt; &gt; &gt; shouldn&#39;t need to test the commit functionality. If that brea=\r\nks more than\n&gt; &gt; &gt; &gt; just you will have problems.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Hope I he=\r\nlped,\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Big Mike\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; On Wed, Jun 30, 2010=\r\n at 8:32 PM, hdave321321 &lt;hdave321321@&gt; wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n=\r\n&gt; &gt; &gt; &gt; &gt; My DAO integration tests are taking a long time to run. I am usin=\r\ng\n&gt; &gt; &gt; Spring\n&gt; &gt; &gt; &gt; &gt; Test which automatically does a transaction rollba=\r\nck after each test\n&gt; &gt; &gt; method.\n&gt; &gt; &gt; &gt; &gt; However, I am also using DBUnit =\r\nto load the exact same dataset before\n&gt; &gt; &gt; each\n&gt; &gt; &gt; &gt; &gt; test method via =\r\nthe @BeforeTransaction annotation.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; It has occured to me=\r\n that I could save a lot of time if I load the\n&gt; &gt; &gt; DBUnit\n&gt; &gt; &gt; &gt; &gt; test =\r\ndata once per test class instead of once per test method.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;=\r\n &gt; I&#39;ve not used the @BeforeClass and @AfterClass methods before, but\n&gt; &gt; &gt;=\r\n &gt; &gt; apparently they require the annotated method to be static and this is\n=\r\n&gt; &gt; &gt; &gt; &gt; interfering with my normal use of Spring dependency injection tha=\r\nt\n&gt; &gt; &gt; provides\n&gt; &gt; &gt; &gt; &gt; an application context, data source, and other t=\r\nhings I need to load\n&gt; &gt; &gt; the\n&gt; &gt; &gt; &gt; &gt; correct data set.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; =\r\n&gt; &gt; Anyone experience this before? What&#39;s a good way to address this\n&gt; &gt; &gt; =\r\nproblem?\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; [Non-text po=\r\nrtions of this message have been removed]\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;  \n&gt; &gt; &gt;\n&gt; &gt; \n=\r\n&gt; &gt; \n&gt; &gt; [Non-text portions of this message have been removed]\n&gt; &gt;\n&gt;\n\n\n\n", 
    "profile": "bogdanmocanu2011", 
    "topicId": 22776, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 414734247, 
    "prevInTime": 22790, 
    "contentTrasformed": false, 
    "postDate": "1278271330", 
    "canDelete": false, 
    "nextInTopic": 22810, 
    "prevInTopic": 22784, 
    "headers": {
        "inReplyToHeader": "PGkwbDE5NitoODBkQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGkwcW4xMiszY25sQGVHcm91cHMuY29tPg=="
    }
}