{
    "numMessagesInTopic": 7, 
    "nextInTime": 19736, 
    "senderId": "qzSAE78TmOOiSfijlXutC_2MvdlMGcR77CfblYRv5JaKIoj6C2rGLouiBoAkUUNDi30cTCdbT_GlAOdpC_SZoC2R", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: How to automatically verify state of fixture after test run", 
    "from": "&quot;David Saff&quot; &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Phil, It depends where exactly you want to insert new behavior.  You can override JUnit4ClassRunner.invokeTestMethod, but that will give you access before the", 
    "msgId": 19735, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 15251 invoked from network); 9 Aug 2007 18:48:53 -0000\r\nReceived: from unknown (66.218.66.68)\n  by m54.grp.scd.yahoo.com with QMQP; 9 Aug 2007 18:48:53 -0000\r\nReceived: from unknown (HELO el-out-1112.google.com) (209.85.162.183)\n  by mta11.grp.scd.yahoo.com with SMTP; 9 Aug 2007 18:48:53 -0000\r\nReceived: by el-out-1112.google.com with SMTP id n30so156053elf\n        for &lt;junit@yahoogroups.com&gt;; Thu, 09 Aug 2007 11:42:52 -0700 (PDT)\r\nDKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;\n        d=gmail.com; s=beta;\n        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;\n        b=nwnVQQDpq/M/TeBtcVRgDx4dN7DvE1GLPQlFo5Ki75i/dr0M+4TKI2cEfP5CLY9mfjO+qNhcBmyXHiL0+Cm8p0nhMIGz2lNWU2hCFdWubJ4v2UnycQEsYLbymka2ZkapuK4Q4B2bNkfLIabDko294IPHMERnYEFg/HShUpMkKBE=\r\nReceived: by 10.90.78.9 with SMTP id a9mr3488386agb.1186684972333;\n        Thu, 09 Aug 2007 11:42:52 -0700 (PDT)\r\nReceived: by 10.90.93.5 with HTTP; Thu, 9 Aug 2007 11:42:52 -0700 (PDT)\r\nMessage-ID: &lt;4f7da6b90708091142o2c1f0546t40c6953bcb2523c9@...&gt;\r\nDate: Thu, 9 Aug 2007 13:42:52 -0500\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;f8ds7p+pmcg@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nReferences: &lt;4f7da6b90707261252y26431150x5eb098f08f08ea63@...&gt;\n\t &lt;f8ds7p+pmcg@...&gt;\r\nX-Google-Sender-Auth: ec8e290efedbf45d\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: &quot;David Saff&quot; &lt;saff@...&gt;\r\nSubject: Re: [junit] Re: How to automatically verify state of fixture after test run\r\nX-Yahoo-Group-Post: member; u=139771899; y=a_-tO4-lCqZuZjK4myYJunj7sNzJZzTAlLFJXlwOQIY\r\nX-Yahoo-Profile: dsaff\r\n\r\nPhil,\n\nIt depends where exactly you want to insert new behavior.  You can\noverride JUnit4ClassRunner.invokeTestMethod, but that will give you\naccess before the test object is created, and then after the listeners\nhave already been notified.  If you want just before the Befores and\njust after the Afters, override TestMethod.run(Roadie context).\nUnfortunately, that protocol is changing between 4.4 and 4.5\n(hopefully to its final state).  Thanks,\n\n   David Saff\n\nOn 7/27/07, phil_quitslund &lt;phil_quitslund@...&gt; wrote:\n&gt; I actually have a related question:\n&gt;\n&gt; What if you want to wrapper the befores and afters too?  In my case,\n&gt; I&#39;d like to wrapper the whole sequence of befores, the test and the\n&gt; afters.  Is overriding JUnit4ClassRunner.invokeTestMethod(Method,\n&gt; RunNotifier) a reasonable way to do this?  Is there a better way?\n&gt;\n&gt; Thanks!\n&gt;\n&gt;\n&gt; -phil\n&gt;\n&gt;\n&gt;\n&gt; --- In junit@yahoogroups.com, &quot;David Saff&quot; &lt;saff@...&gt; wrote:\n&gt; &gt;\n&gt; &gt; Oops.  That code will only work in the current 4.5-snapshot.  This\n&gt; &gt; will work in 4.4, 4.5, and beyond:\n&gt; &gt;\n&gt; &gt;        public static class Mocks extends JUnit4ClassRunner {\n&gt; &gt;                public Mocks(Class&lt;?&gt; klass) throws InitializationError {\n&gt; &gt;                        super(klass);\n&gt; &gt;                }\n&gt; &gt;\n&gt; &gt;                @Override\n&gt; &gt;                protected TestMethod wrapMethod(Method method) {\n&gt; &gt;                        return new TestMethod(method, getTestClass()) {\n&gt; &gt;                                @Override\n&gt; &gt;                                protected void invoke(Object test)\n&gt; &gt;                                                throws\n&gt; IllegalArgumentException,\n&gt; &gt;                                                IllegalAccessException,\n&gt; &gt; InvocationTargetException {\n&gt; &gt;                                        super.invoke(test);\n&gt; &gt;                                        verifyMocks();\n&gt; &gt;                                }\n&gt; &gt;                        };\n&gt; &gt;                }\n&gt; &gt;        }\n&gt; &gt;\n&gt; &gt; Thanks,\n&gt; &gt;\n&gt; &gt;    David Saff\n&gt; &gt;\n&gt; &gt; On 7/23/07, David Saff &lt;saff@...&gt; wrote:\n&gt; &gt; &gt; Nat,\n&gt; &gt; &gt;\n&gt; &gt; &gt; Extending internals of your dependencies in order to give your users a\n&gt; &gt; &gt; better experience is a fact of life.  With 4.4, we took one step\n&gt; &gt; &gt; toward a more extensible design for JUnit4ClassRunner.  In the next\n&gt; &gt; &gt; version, we hope to finish, and stabilize, the object structure, so\n&gt; &gt; &gt; that extenders can depend on it.  The way to do what you want in JUnit\n&gt; &gt; &gt; 4.4 and beyond should look like this:\n&gt; &gt; &gt;\n&gt; &gt; &gt;         public static class Mocks extends JUnit4ClassRunner {\n&gt; &gt; &gt;                 public Mocks(Class&lt;?&gt; klass) throws\n&gt; InitializationError {\n&gt; &gt; &gt;                         super(klass);\n&gt; &gt; &gt;                 }\n&gt; &gt; &gt;\n&gt; &gt; &gt;                 @Override\n&gt; &gt; &gt;                 protected TestMethod wrapMethod(Method method) {\n&gt; &gt; &gt;                         return new TestMethod(method,\n&gt; getTestClass()) {\n&gt; &gt; &gt;                                 @Override\n&gt; &gt; &gt;                                 protected void invoke(Roadie context)\n&gt; &gt; &gt;                                                 throws\n&gt; IllegalArgumentException,\n&gt; &gt; &gt;\n&gt; IllegalAccessException, InvocationTargetException {\n&gt; &gt; &gt;                                         super.invoke(context);\n&gt; &gt; &gt;                                         verifyMocks();\n&gt; &gt; &gt;                                 }\n&gt; &gt; &gt;                         };\n&gt; &gt; &gt;                 }\n&gt; &gt; &gt;         }\n&gt; &gt; &gt;\n&gt; &gt; &gt; The Roadie class is new in 4.4: it sets up for the test, tears down\n&gt; &gt; &gt; after the test, and records what&#39;s going on while the test is\n&gt; &gt; &gt; performing.  (For cultural background to the metaphor, see:\n&gt; &gt; &gt; http://en.wikipedia.org/wiki/Roadie)\n&gt; &gt; &gt;\n&gt; &gt; &gt; Thanks,\n&gt; &gt; &gt;\n&gt; &gt; &gt;    David Saff\n&gt; &gt; &gt;\n&gt; &gt; &gt; On 7/23/07, Nat Pryce &lt;nat.pryce@...&gt; wrote:\n&gt; &gt; &gt; &gt; Hi all.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; It&#39;s our own fault I know, but the new JUnit 4.4 release breaks\n&gt; jMock\n&gt; &gt; &gt; &gt; 2 because we extended the internal runner classes to verify mock\n&gt; &gt; &gt; &gt; objects at the end of the test but before the @After methods are\n&gt; &gt; &gt; &gt; called to tear down the fixtures.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; The classes we extended no longer exist.  What&#39;s the new,\n&gt; approved way\n&gt; &gt; &gt; &gt; of doing this?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; --Nat\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "dsaff", 
    "topicId": 19603, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "prevInTime": 19734, 
    "contentTrasformed": false, 
    "postDate": "1186684972", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 19635, 
    "headers": {
        "inReplyToHeader": "PGY4ZHM3cCtwbWNnQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDcwODA5MTE0Mm8yYzFmMDU0NnQ0MGM2OTUzYmNiMjUyM2M5QG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDRmN2RhNmI5MDcwNzI2MTI1MnkyNjQzMTE1MHg1ZWIwOThmMDhmMDhlYTYzQG1haWwuZ21haWwuY29tPgkgPGY4ZHM3cCtwbWNnQGVHcm91cHMuY29tPg=="
    }
}