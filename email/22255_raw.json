{
    "numMessagesInTopic": 4, 
    "nextInTime": 22256, 
    "senderId": "3g40V8RkCTbTnc4XwTVRY8qZ3goAe9DYzn9SMMDhoaJ7cStja9si-Au03w6IdJIkVAu2YDd1aH_sAB8YVzki5mdvJzoufxyn8HayQmoCDANq_W2nFvP-", 
    "systemMessage": true, 
    "subject": "RE: [junit] Timeout tests and thread-local dependencies", 
    "from": "&quot;Loritsch, Berin C.&quot; &lt;berin.loritsch@...&gt;", 
    "authorName": "Loritsch, Berin C.", 
    "msgSnippet": "Yes and no.  To put it bluntly, it s a bit more problematic than it should be.  There are methods to bind the hibernate session to a request, default is per", 
    "msgId": 22255, 
    "rawEmail": "Return-Path: &lt;prvs=1614fcebd1=berin.loritsch@...&gt;\r\nReceived: (qmail 77362 invoked from network); 4 Jan 2010 22:54:18 -0000\r\nReceived: from unknown (98.137.34.46)\n  by m2.grp.sp2.yahoo.com with QMQP; 4 Jan 2010 22:54:18 -0000\r\nReceived: from unknown (HELO n6-vm6.bullet.mail.sp2.yahoo.com) (67.195.135.102)\n  by mta3.grp.sp2.yahoo.com with SMTP; 4 Jan 2010 22:54:18 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1262645530; bh=jMxybhJwfxStghfvIt7TPZvpxxvcppGF8NmRoRmxujE=; h=Received:Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:X-MimeOLE:Content-class:MIME-Version:Date:Message-ID:In-Reply-To:X-MS-Has-Attach:X-MS-TNEF-Correlator:Thread-Topic:Thread-Index:References:To:X-OriginalArrivalTime:X-Originating-IP:X-eGroups-Msg-Info:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:Content-Type:Content-Transfer-Encoding:X-YGroups-SubInfo:Sender:X-Yahoo-Newman-Property:X-eGroups-Approved-By:X-eGroups-Auth; b=IxEUVS5vZ+LQvWVr96i4+aNWP8XEuUYlZeU2D/9tF64bT014a84x4GHh1cWMToisSqa4q7RszjqIuVfPDuuh3ELBEnn0BT4ECtA25hbHp4+OFNNoArueSRsZifRdVBYg\r\nReceived: from [67.195.134.238] by n6.bullet.mail.sp2.yahoo.com with NNFMP; 04 Jan 2010 22:52:10 -0000\r\nReceived: from [69.147.65.148] by t3.bullet.mail.sp2.yahoo.com with NNFMP; 04 Jan 2010 22:52:10 -0000\r\nReceived: from [98.137.34.34] by t11.bullet.mail.sp1.yahoo.com with NNFMP; 04 Jan 2010 22:52:10 -0000\r\nX-Sender: prvs=1614fcebd1=berin.loritsch@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 65443 invoked from network); 4 Jan 2010 20:42:30 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m4.grp.sp2.yahoo.com with QMQP; 4 Jan 2010 20:42:30 -0000\r\nX-Received: from unknown (HELO mnbm01-relay1.mnb.gd-ais.com) (137.100.120.43)\n  by mta2.grp.sp2.yahoo.com with SMTP; 4 Jan 2010 20:42:30 -0000\r\nX-Received: from ([160.207.224.15])\n\tby mnbm01-relay1.mnb.gd-ais.com with SMTP  id 5202712.236493657;\n\tMon, 04 Jan 2010 14:40:53 -0600\r\nX-Received: from vaff01-mail01.ad.gd-ais.com ([10.13.13.20]) by mnbm01-fes01.ad.gd-ais.com with Microsoft SMTPSVC(6.0.3790.3959);\n\t Mon, 4 Jan 2010 14:40:53 -0600\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nDate: Mon, 4 Jan 2010 14:00:37 -0500\r\nMessage-ID: &lt;75F5ED8A5A553646A46E00E6EC854FA304270652@...-ais.com&gt;\r\nIn-Reply-To: &lt;4f7da6b91001011814l1dba2d92p73abc74041086f8b@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [junit] Timeout tests and thread-local dependencies\r\nThread-Index: AcqLUVpI5Mfb0Dq3Q7mQInSGBpzoLQCHiR8g\r\nReferences: &lt;hhiofu+t1l6@...&gt; &lt;4f7da6b91001011814l1dba2d92p73abc74041086f8b@...&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nX-OriginalArrivalTime: 04 Jan 2010 20:40:53.0310 (UTC) FILETIME=[354CC5E0:01CA8D7E]\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Loritsch, Berin C.&quot; &lt;berin.loritsch@...&gt;\r\nSubject: RE: [junit] Timeout tests and thread-local dependencies\r\nX-Yahoo-Group-Post: member; u=428096731; y=5TYfLUCex3eZYXc1Wqi4YkktQZ6VM_L7XyRfjr8c4ZzKOtlh\r\nX-Yahoo-Profile: bloritsch\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 04 Jan 2010 22:52:09 -0000\r\n\r\nYes and no.  To put it bluntly, it&#39;s a bit more problematic than it\nshould be.  There are methods to bind the hibernate session to a\nrequest, default is per thread, etc.\n\n \n\nAre the @Before and @After called with the thread that executes the\ntimeout function?  As long as there is setup/teardown in the same\nthread, that does not count against the timeout it might be OK.\n\n \n\nFrom: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of\nDavid Saff\nSent: Friday, January 01, 2010 9:14 PM\nTo: junit@yahoogroups.com\nSubject: Re: [junit] Timeout tests and thread-local dependencies\n\n \n\n  \n\nI don&#39;t know Hibernate/Spring well, so this is a shot in the dark...\n\nOn Thu, Dec 31, 2009 at 12:54 PM, Berin &lt;berin.loritsch@...\n&lt;mailto:berin.loritsch%40gd-ais.com&gt; &gt; wrote:\n&gt; I&#39;m trying to test some behavior using Hibernate/Spring transactional\nsupport, but I&#39;m running into a particular snag.  By default, the\ntransaction manager is bound to the current thread.\n\nCan that default be overridden?\n\nDavid\n\n&gt;\n&gt; Problem is that with tests that have the &quot;timeout&quot; attribute\nspecified, JUnit creates a new thread to ensure the timeout is enforced.\nFor example:\n&gt;\n&gt; @Test(timeout=100)\n&gt; public void makeSureActionHappenedRecently() {\n&gt;    AuditLog.get().logEvent(EventType.TestEvent, &quot;Foo&quot;);\n&gt;\n&gt;    Collection&lt;AuditEvent&gt; log =\n&gt;        AuditLog.get().findEventsFor(EventType.TestEvent);\n&gt;\n&gt;   assertNotEmpty(log);\n&gt;   // make sure timestamp is within X ms\n&gt;   assertRecent(100, log.iterator().next().getTimestamp());\n&gt; }\n&gt;\n&gt; This works without the (timeout=100) qualification because Hibernate\nis set up in the @BeforeClass.\n&gt;\n&gt; Technically I could put the set up in an @Before method, but that\nbecomes rather expensive (setting up Spring, Hibernate, connecting to\ndatabase).\n&gt;\n&gt; Any clues on how to make this work?\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "bloritsch", 
    "topicId": 22245, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 428096731, 
    "prevInTime": 22254, 
    "contentTrasformed": false, 
    "postDate": "1262631637", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 22248, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MTAwMTAxMTgxNGwxZGJhMmQ5MnA3M2FiYzc0MDQxMDg2ZjhiQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDQyNzA2NTJAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg==", 
        "referencesHeader": "PGhoaW9mdSt0MWw2QGVHcm91cHMuY29tPiA8NGY3ZGE2YjkxMDAxMDExODE0bDFkYmEyZDkycDczYWJjNzQwNDEwODZmOGJAbWFpbC5nbWFpbC5jb20+"
    }
}