{
    "numMessagesInTopic": 17, 
    "nextInTime": 1371, 
    "senderId": "ArErX72-wFFYRFPurAwQoUZXduhw2h_4c03CNO7qRC-I-ch7pGiaaHTvOucTS-oYFuW0hgRUmFVj5fFg9sGPPKh4ufIU_PIINb31aG2jWA", 
    "systemMessage": false, 
    "subject": "RE: [junit] Method Chains, was Re: Testing private methods", 
    "from": "Matt Caswell &lt;m.caswell@...&gt;", 
    "authorName": "Matt Caswell", 
    "msgSnippet": "This would work for a single test case. However the problem occurs when running a TestSuite, i.e. you want to execute a TestCase for real B, you then want to", 
    "msgId": 1370, 
    "topicId": 1308, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-73565983\">This would work for a single test case. However the problem occurs when<br/>\nrunning a TestSuite, i.e. you want to execute a TestCase for real B, you<br/>\nthen want to execute a TestCase for A that uses mock B.<br/>\n<br/>\nMatt<br/>\n <br/>\n <br/>\nMatt Caswell <br/>\nJava Team Leader, Morse Hughes Rae <br/>\nTel: +44 (0)1332 826116 Fax: +44 (0)1332 826044<br/>\nMobile: 07887 620205 <br/>\n&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.morse.com/\">http://www.morse.com/</a>&gt; www.morse.com <br/>\n_____ <br/>\nThis email and any attachments are confidential and are intended only for <br/>\nthe addressee. If you are not the intended recipient of this email and have <br/>\nreceived it in error, please notify the sender immediately by reply email <br/>\nand then delete it from your system. <br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; -----Original Message-----<br/>\n&gt; From: Mike Clark [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:mike@...\">mike@...</a>]<br/>\n&gt; Sent: 01 June 2001 15:51<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; Subject: Re: [junit] Method Chains, was Re: Testing private methods<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Just an observation, but it seems that option 6 could be <br/>\n&gt; achieved simply <br/>\n&gt; by placing the mock classes in a separate, but parallel, package <br/>\n&gt; directory structure as the &quot;real&quot; classes and then placing the mock <br/>\n&gt; directory structure ahead of the real directory structure in <br/>\n&gt; the CLASSPATH.<br/>\n&gt; <br/>\n&gt; For example...<br/>\n&gt; <br/>\n&gt;    /projects/src/com/xyz/<br/>\n&gt;    /projects/src/mock/com/xyz/<br/>\n&gt; <br/>\n&gt; CLASSPATH=/projects/src/mock:/projects/src<br/>\n&gt; <br/>\n&gt;  From the perspective of the classloader, the mock objects *are* the <br/>\n&gt; real objects.<br/>\n&gt; <br/>\n&gt; Mike<br/>\n&gt; <br/>\n&gt; -- <br/>\n&gt; Mike Clark<br/>\n&gt; Clarkware Consulting, Inc.<br/>\n&gt; Custom Software Architecture, Design,<br/>\n&gt; Development, and Performance Consulting<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.clarkware.com\">http://www.clarkware.com</a><br/>\n&gt; <br/>\n&gt; Matt Caswell wrote:<br/>\n&gt; <br/>\n&gt; &gt; Very interesting. It seems to me that you could use 1-5 in certain<br/>\n&gt; &gt; circumstances. However I think I would be reluctant to <br/>\n&gt; change the way my<br/>\n&gt; &gt; code was implemented just so that I could test it, as some <br/>\n&gt; of the other<br/>\n&gt; &gt; posts on this topic have suggested you should do. Option 6 <br/>\n&gt; looks like it<br/>\n&gt; &gt; could have a lot of potential - I would think it would work <br/>\n&gt; in almost all<br/>\n&gt; &gt; scenarios without requiring that you write your <br/>\n&gt; implementation code in a<br/>\n&gt; &gt; specifc way. I agree - it definately looks like a fun thing <br/>\n&gt; to try and do!<br/>\n&gt; &gt; <br/>\n&gt; &gt; Matt<br/>\n&gt; &gt; <br/>\n&gt; &gt; -----Original Message-----<br/>\n&gt; &gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:ghouston@...\">ghouston@...</a><br/>\n&gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; &gt; Sent: 01/06/01 14:41<br/>\n&gt; &gt; Subject: [junit] Method Chains, was Re: Testing private methods<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; There are several was to get Mock objects into your production code:<br/>\n&gt; &gt; <br/>\n&gt; &gt; 1. Parameters <br/>\n&gt; &gt; <br/>\n&gt; &gt; As Mr Freeman shows, you use parameters to pass the Mock into the <br/>\n&gt; &gt; class that calls it.<br/>\n&gt; &gt; <br/>\n&gt; &gt; 2 Reflection<br/>\n&gt; &gt; <br/>\n&gt; &gt; If B is referenced in a field of A, you can use reflection <br/>\n&gt; to modify <br/>\n&gt; &gt; A and replace B with it&#39;s Mock.<br/>\n&gt; &gt; <br/>\n&gt; &gt; 3 Mole Pattern<br/>\n&gt; &gt; <br/>\n&gt; &gt; Subclass A, and use the subclass to setup the Mock.  [I call this <br/>\n&gt; &gt; design the &quot;Mole Pattern&quot;]<br/>\n&gt; &gt; <br/>\n&gt; &gt; 4 Strategy Pattern<br/>\n&gt; &gt; <br/>\n&gt; &gt; Use a Strategy design pattern.<br/>\n&gt; &gt; <br/>\n&gt; &gt; 5 Dynamic Proxy<br/>\n&gt; &gt; <br/>\n&gt; &gt; If the B is an implementation of an Interface, you can use <br/>\n&gt; a Dynamic <br/>\n&gt; &gt; Proxy (new feature of Java 1.3b).  The Mock would be an <br/>\n&gt; &gt; InvocationHandler, instead of a twin of B.<br/>\n&gt; &gt; <br/>\n&gt; &gt; 6 Classloader<br/>\n&gt; &gt; <br/>\n&gt; &gt; Use a classloader to load the Mock instead of the real class.<br/>\n&gt; &gt; <br/>\n&gt; &gt; ---<br/>\n&gt; &gt; <br/>\n&gt; &gt; There may be other options, but these are the ones I&#39;ve heard of.  <br/>\n&gt; &gt; Personally, I&#39;ve used everything except #6.  Options #1 <br/>\n&gt; (parameters) <br/>\n&gt; &gt; and #2 (reflection) are my favorites.  They are usually the easiest <br/>\n&gt; &gt; to implement and understand.  For #2, I&#39;ve used the <br/>\n&gt; &gt; PrivilegedAccessor.java [posted by Mr DiIorio] to make the <br/>\n&gt; reflection <br/>\n&gt; &gt; work simple.<br/>\n&gt; &gt; <br/>\n&gt; &gt; I&#39;ve never seen anyone use #6 (classloaders), I think it <br/>\n&gt; would be fun <br/>\n&gt; &gt; to try.<br/>\n&gt; &gt; <br/>\n&gt; &gt; - Greg<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; --- In junit@y..., &quot;Steve Freeman&quot; &lt;steve@m...&gt; wrote:<br/>\n&gt; &gt; <br/>\n&gt; &gt;&gt; RE: Method Chains, was Re: Testing private methodsAlternatively, <br/>\n&gt; &gt;&gt; change from:<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt; public class A {<br/>\n&gt; &gt;&gt;   public void f() {<br/>\n&gt; &gt;&gt;     b = new B();<br/>\n&gt; &gt;&gt;     b.doSomething();<br/>\n&gt; &gt;&gt;   }<br/>\n&gt; &gt;&gt; }<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt; to:<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt; public class A {<br/>\n&gt; &gt;&gt;   public void f(B b) {<br/>\n&gt; &gt;&gt;     b.doSomething(aValue());<br/>\n&gt; &gt;&gt;   }<br/>\n&gt; &gt;&gt; }<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt; The test then becomes:<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt; public class TestA {<br/>\n&gt; &gt;&gt;   public void testF() {<br/>\n&gt; &gt;&gt;     A anA = new A(aValue);<br/>\n&gt; &gt;&gt;     MockB mockB = new MockB();<br/>\n&gt; &gt;&gt;     mockB.setExpectedSomething(aValue);<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt;     a.f(mockB);<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt;     mockB.verify();<br/>\n&gt; &gt;&gt;   }<br/>\n&gt; &gt;&gt; }<br/>\n&gt; &gt;&gt; <br/>\n&gt; &gt;&gt; We have found that changing to a style where you pass behaviours <br/>\n&gt; &gt; <br/>\n&gt; &gt; around, rather than data, avoids things like subclassing production <br/>\n&gt; &gt; code in a test and pushes the code to flexing in the &#39;right&#39; kinda <br/>\n&gt; &gt; ways. If you can figure out what to pass in and what to <br/>\n&gt; verify, then <br/>\n&gt; &gt; the rest of the test usually falls out.<br/>\n&gt; &gt; <br/>\n&gt; &gt;&gt; Steve<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;  <br/>\n&gt; &gt; <br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;  <br/>\n&gt; &gt; <br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to <br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; Your use of Yahoo! Groups is subject to <br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> <br/>\n&gt; <br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 1369, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "991411467", 
    "canDelete": false, 
    "nextInTopic": 1373, 
    "prevInTopic": 1367, 
    "headers": {
        "messageIdInHeader": "PDI5Qzg0Q0YyNUQwM0Q1MTE5RkNGMDA5MDI3QjY3QjVBNzQwNzZEQEVYQ0hBTkdFMT4="
    }
}