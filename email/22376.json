{
    "numMessagesInTopic": 12, 
    "nextInTime": 22377, 
    "senderId": "q2kOCHqbX1EjuY5lpTE_ON1TPEq39N3OMzNY362sdhOHLgygXPl_MnhZy6oVeRN6u35RtvYGjF0vDHn_90qCiYrWUNsRP__VeaBuUqLuacAc", 
    "systemMessage": false, 
    "subject": "Re: Theories Usability", 
    "from": "&quot;jens_schauder&quot; &lt;jens.schauder@...&gt;", 
    "authorName": "jens_schauder", 
    "msgSnippet": "I don t know if they work well with theories, but I d say you can handle this kind of stuff with rules pretty well. ", 
    "msgId": 22376, 
    "profile": "jens_schauder", 
    "topicId": 22365, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127374813, 
    "messageBody": "<div id=\"ygrps-yiv-816766235\">I don&#39;t know if they work well with theories, but I&#39;d say you can handle this kind of stuff with rules pretty well. <br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://blog.schauderhaft.de/2009/10/04/junit-rules/\">http://blog.schauderhaft.de/2009/10/04/junit-rules/</a><br/>\n<br/>\nJens<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;Loritsch, Berin C.&quot; &lt;berin.loritsch@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Thanks everyone for helping me work through the testing challenge I wanted to address.  I&#39;ve written a rudimentary ClassCollector that lets me specify a base package, what base classes I need, any annotations I need applied, etc.  I supplimented that with a BeanAttributes class that will collect all the attributes (setters/getters) on the class.  It&#39;s working very well.  Unfortunately, there are a few shortcomings with this approach:<br/>\n&gt; <br/>\n&gt; 1. I cannot easily determine what the actual data point combination was that caused the failure.  I have to write those values out to System.out because the test failure does not do that for me.<br/>\n&gt; <br/>\n&gt; 2. It stops on the very first failure, hiding many more failures that may still be lurking beneath the service.<br/>\n&gt; <br/>\n&gt; 3. The theory is the only line shown in the test report, so there is no way to differentiate runs which would handle the above concerns.<br/>\n&gt; <br/>\n&gt; What I would really like to see is that a new test name for each combination of data points.  For example if you had a @Theory named &quot;checkAddWorks&quot; that took two parameters and the data points [1,2] then I&#39;d like to see a set of test names that look like this in the test report:<br/>\n&gt; <br/>\n&gt; checkAddWorks(1,1)<br/>\n&gt; checkAddWorks(1,2)<br/>\n&gt; checkAddWorks(2,2)<br/>\n&gt; <br/>\n&gt; That will address all of the shortcomings I identified.<br/>\n&gt; <br/>\n&gt; My code looks like this:<br/>\n&gt; <br/>\n&gt; @RunWith(Theories.class)<br/>\n&gt; class TestMyTrackableContract {<br/>\n&gt;     @DataPoints<br/>\n&gt;     BeanAttribute[] collectAllAttributesToTest() {<br/>\n&gt;         ClassCollector collector = new ClassCollector();<br/>\n&gt;         collector.within(&quot;com.mycompany.incident.model&quot;).assignableTo(Trackable.class);<br/>\n&gt;         Collection&lt;Class&lt;?&gt;&gt; matchedClasses = collector.recurse().collect();<br/>\n&gt; <br/>\n&gt;         List&lt;BeanAttribute&gt; attributes = new ArrayList&lt;BeanAttribute&gt;();<br/>\n&gt; \t\t<br/>\n&gt;         for (Class&lt;?&gt; trackable : matchedClasses) {<br/>\n&gt;             attributes.addAll(BeanAttribute.collectFrom(trackable));<br/>\n&gt;         }<br/>\n&gt; \t\t<br/>\n&gt;         return attributes.toArray(new BeanAttribute[attributes.size()]);<br/>\n&gt;     }<br/>\n&gt; <br/>\n&gt;     @Theory<br/>\n&gt;     public void checkSideEffectsOnAssign() throws Exception {<br/>\n&gt;         // This is designed to ensure that setters/getters work in concert<br/>\n&gt;         // and that setters set the appropriate message is sent<br/>\n&gt;         if ( ! beanAttribute.hasSetter() || ! beanAttribute.hasGetter() ) return;<br/>\n&gt;         beanAttribute.assertBalanced();<br/>\n&gt; <br/>\n&gt;         Trackable entity = beanAttribute.getEntityAs(Trackable.class);<br/>\n&gt;         // Unfortunately needed to determine when things go bad<br/>\n&gt;         System.out.format(&quot;Testing %s&#92;n&quot;, beanAttribute);<br/>\n&gt; \t\t<br/>\n&gt;         Object original = beanAttribute.getValue();<br/>\n&gt;         Object testValue = beanAttribute.generateTestValue(original);<br/>\n&gt; \t\t<br/>\n&gt;         // Ensure the setter works as expected<br/>\n&gt;         beanAttribute.setValue(testValue);<br/>\n&gt;         assertEquals(testValue, beanAttribute.getValue());<br/>\n&gt; \t\t<br/>\n&gt;         // Ensure properties are set and events were properly<br/>\n&gt;         Properties changes = entity.getChanges();<br/>\n&gt;         assertEquals( String.valueOf(testValue),<br/>\n&gt;             changes.getProperty(beanAttribute.getAttribute()));<br/>\n&gt;         assertEquals( String.valueOf(original),<br/>\n&gt;             changes.getProperty(beanAttribute.getAttribute() + &quot;.old&quot;));<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 22375, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1265501968", 
    "canDelete": false, 
    "nextInTopic": 22377, 
    "prevInTopic": 22365, 
    "headers": {
        "inReplyToHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NkJAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg==", 
        "messageIdInHeader": "PGhrbDB1ZytxNWJyQGVHcm91cHMuY29tPg=="
    }
}