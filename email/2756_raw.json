{
    "topicId": 2726, 
    "postDate": "1001502630", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Emily Bache &lt;emily.bache@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "huOSyIVUiAnjlLe8OGl5d_znP_7WnbjP3v8jBMMjO5CdMreNo4iHPxy_Z4QrHvx48MmoIaWRUmohG5wGgCY24OGL71SZhl0PnCPxrwe1kQ", 
    "nextInTime": 2757, 
    "userId": 0, 
    "prevInTime": 2755, 
    "prevInTopic": 2737, 
    "headers": {
        "messageIdInHeader": "PDcwMEVBMTdBMTQyQUQzMTE4QTFFMDAwOEM3MjRCQ0I0RUI3QTBEQGFnYmdudHMwMy5hZ2JnLmludHJhbmV0Pg=="
    }, 
    "authorName": "Emily Bache", 
    "numMessagesInTopic": 10, 
    "msgSnippet": "Thanks Eric for an enlightening reply! The code example you have given is clearly more robust than what I came up with. I ve added it to my test suite, and", 
    "contentTrasformed": false, 
    "msgId": 2756, 
    "nextInTopic": 2759, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;emily.bache@...&gt;\r\nX-Sender: emily.bache@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_3_2_2); 26 Sep 2001 11:14:59 -0000\r\nReceived: (qmail 18212 invoked from network); 26 Sep 2001 11:14:58 -0000\r\nReceived: from unknown (10.1.10.27)\n  by 10.1.1.223 with QMQP; 26 Sep 2001 11:14:58 -0000\r\nReceived: from unknown (HELO tops.adera.se) (195.198.74.10)\n  by mta2 with SMTP; 26 Sep 2001 11:15:42 -0000\r\nReceived: from av.adera.se (av.adera.se [192.168.3.24])\n\tby tops.adera.se (Postfix) with SMTP id C5B7E4AFCD\n\tfor &lt;junit@yahoogroups.com&gt;; Wed, 26 Sep 2001 13:48:37 +0200 (CEST)\r\nReceived: from agbgnts03.agbg.intranet ([192.168.14.22]) by gbgnts03.intranet with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)\n\tid Q9QRN7ZS; Wed, 26 Sep 2001 13:20:25 +0200\r\nReceived: by agbgnts03.agbg.intranet with Internet Mail Service (5.5.2653.19)\n\tid &lt;JT5FACGX&gt;; Wed, 26 Sep 2001 13:10:32 +0200\r\nMessage-ID: &lt;700EA17A142AD3118A1E0008C724BCB4EB7A0D@...&gt;\r\nTo: &quot;&#39;junit@yahoogroups.com&#39;&quot; &lt;junit@yahoogroups.com&gt;\r\nSubject: Re: Multithreaded code\r\nDate: Wed, 26 Sep 2001 13:10:30 +0200\r\nMIME-Version: 1.0\r\nX-Mailer: Internet Mail Service (5.5.2653.19)\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nFrom: Emily Bache &lt;emily.bache@...&gt;\r\n\r\n\n\nThanks Eric for an enlightening reply! The code example you have given is\nclearly more robust than what I came up with. I&#39;ve added it to my test\nsuite, and (after minor modification to remove typos) it runs and passes,\nwhich is great. \n\nThere is just one thing I&#39;m unsure of - this test proves that while one\nthread holds the lock on the record, the other thread can find out that it\nis locked by calling isRecordLocked(). However, the second thread never\nrequests the lock, so it&#39;s not testing that the second thread blocks in the\nobtainLock() call until the lock becomes available. That was the requirement\nI was trying to test :-) \n\nYou picked up on several points I was unsure of how to tackle, though, such\nas how to make my test code run in a predictable manner by avoiding timing\nissues, and making the test run as fast as possible by avoiding sleep()\nstatements. I intend to refactor my other tests to use these approaches as\nfar as possible. \n\nThe other problem I can see is that the test code is far more complicated\nthan the code being tested! (the implementations for obtainLock() and\nreleaseLock() are about 5 lines each) Is that true in general for threaded\ncode? Does there come a point when it is no longer worth testing that it&#39;s\ncorrect, and trying instead to in some way prove that it works by inspection\nand review?\n\nEmily\n\n\n\n", 
    "subject": "Re: Multithreaded code"
}