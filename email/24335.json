{
    "numMessagesInTopic": 30, 
    "nextInTime": 24336, 
    "senderId": "4CJfpPCKAb1GY1f-rvOYxsYi9cFtCvlQ2yLQzTYoTbSdA-lrsNaQwacN-xob2VZ8nGgIgG9QmBOoOyCONzni49mm2hYIuw", 
    "systemMessage": true, 
    "subject": "Re: Feedback requested: Impending changes to RunListener", 
    "from": "&quot;tibord47&quot; &lt;tibord47@...&gt;", 
    "authorName": "tibord47", 
    "msgSnippet": "I am still thinking of the inner staff. You know that it s not recommended convention to make a class inner unless it uses this pointer of the top class. Then", 
    "msgId": 24335, 
    "profile": "tibord47", 
    "topicId": 24274, 
    "spamInfo": {
        "reason": "3", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 507342950, 
    "messageBody": "<div id=\"ygrps-yiv-1520335234\">I am still thinking of the inner staff. You know that it&#39;s not recommended convention to make a class inner unless it uses this pointer of the top class.<br/>\nThen it should be public annotation in the same package.<br/>\n<br/>\nHm?<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Kevin Cooney  wrote:<br/>\n&gt;<br/>\n&gt; On Thu, Feb 14, 2013 at 9:27 AM, tibord47  wrote:<br/>\n&gt; <br/>\n&gt; &gt; **<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; David, I can confirm that running annotated listener in 4.11 and compiled<br/>\n&gt; &gt; with 4.12 does not throw exception. So the annotation is winner in my eyes.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Regarding the static inner annotation in RunListener, this would mean that<br/>\n&gt; &gt; other classes which will maybe later need the same name of annotation will<br/>\n&gt; &gt; just duplicate again.<br/>\n&gt; &gt;<br/>\n&gt; Remember, this annotation changes the behavior of JUnit will have when<br/>\n&gt; interacting with classes that extend RunListener. It&#39;s not simply an<br/>\n&gt; indication that the listener is thread-safe (though your listener would<br/>\n&gt; have to be thread-safe to use this annotation). See my comments in<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://goo.gl/6HBNV\">http://goo.gl/6HBNV</a> to see other reasons why I think a top-level JUnit<br/>\n&gt; ThreadSafe annotation would be problematic<br/>\n&gt; <br/>\n&gt; I&#39;m personally not too worried about what might happen if we need to think<br/>\n&gt; about indicating the thread-safety of extension points somewhere else in<br/>\n&gt; JUnit. We could easily support multiple annotations in the future if we<br/>\n&gt; need to, and when that time comes, perhaps JSR-305 will be more mature.<br/>\n&gt; <br/>\n&gt; -- Kevin<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Cheers,<br/>\n&gt; &gt; Tibor<br/>\n&gt; &gt;<br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Kevin Cooney wrote:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; On Thu, Feb 14, 2013 at 8:38 AM, David Saff wrote:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Hi, all.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Kevin, thank you very much for the summary document. I think that a<br/>\n&gt; &gt; &gt; &gt; JUnit-specific annotation, which is not name-confusable with a standard<br/>\n&gt; &gt; &gt; &gt; like @ThreadSafe, seems to be a pretty clear winner. If we feel<br/>\n&gt; &gt; strongly<br/>\n&gt; &gt; &gt; &gt; that it should remain consonant with @ThreadSafe, we could make it a<br/>\n&gt; &gt; static<br/>\n&gt; &gt; &gt; &gt; inner annotation, and reference it as @....<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I&#39;m personally find with that as long as the JavaDoc for the annotation<br/>\n&gt; &gt; &gt; makes it clear that a RunListener implementation annotated with that<br/>\n&gt; &gt; &gt; interface will be treated differently than one not annotated with that<br/>\n&gt; &gt; &gt; interface when addListener() and removeListener() is called.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; That might<br/>\n&gt; &gt; &gt; &gt; also have the advantage of making clear that it&#39;s a single-purpose<br/>\n&gt; &gt; &gt; &gt; annotation (I&#39;d rather not, at this point, start speculatively<br/>\n&gt; &gt; figuring out<br/>\n&gt; &gt; &gt; &gt; what other interfaces might try to pun meanings onto a general-purpose<br/>\n&gt; &gt; &gt; &gt; ThreadSafe annotation)<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; I&#39;m a little curious about the third-party library implementation.<br/>\n&gt; &gt; Let&#39;s<br/>\n&gt; &gt; &gt; &gt; say I write a package FooTest which is compiled against JUnit 4.12,<br/>\n&gt; &gt; and it<br/>\n&gt; &gt; &gt; &gt; contains a FooListener I&#39;d like to mark threadsafe. A client wants to<br/>\n&gt; &gt; use<br/>\n&gt; &gt; &gt; &gt; it with JUnit 4.11 (she knows she won&#39;t get the concurrent performance<br/>\n&gt; &gt; &gt; &gt; boost, but wants it to just work). The document seems to assume that if<br/>\n&gt; &gt; &gt; &gt; FooListener has a RunListener.TheadSafe annotation, then our client<br/>\n&gt; &gt; won&#39;t<br/>\n&gt; &gt; &gt; &gt; have a problem (unless, likely, she actually tries to instantiate all<br/>\n&gt; &gt; of<br/>\n&gt; &gt; &gt; &gt; the annotations from FooListener in her own code).<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Correct as of JDK 1.5.0_06. See<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/3567413/why-doesnt-a-missing-annotation-cause-a-classnotfoundexception-at-runtime\">http://stackoverflow.com/questions/3567413/why-doesnt-a-missing-annotation-cause-a-classnotfoundexception-at-runtime</a><br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; It sounds that if the client wants to write code that extends FooListener<br/>\n&gt; &gt; &gt; then JUnit 4.12 will need to be on the compile-time classpath<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; However, the document<br/>\n&gt; &gt; &gt; &gt; assumes that declaring a marker interface ThreadSafeRunListener _would_<br/>\n&gt; &gt; &gt; &gt; break the client. Is that true?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I believe it would result in a NoClassDefFoundError exception. It should<br/>\n&gt; &gt; be<br/>\n&gt; &gt; &gt; easy to verify.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Note that it may be hard to write a library that has a compile-time<br/>\n&gt; &gt; &gt; dependency on JUnit 4.12 while being runtime compatible with 4.11 for<br/>\n&gt; &gt; other<br/>\n&gt; &gt; &gt; reasons.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Does FooListener fail at bytecode<br/>\n&gt; &gt; &gt; &gt; verification because the verifier wants to make sure that it<br/>\n&gt; &gt; implements all<br/>\n&gt; &gt; &gt; &gt; of ThreadSafeRunListener&#39;s methods?<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; That would be my guess.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; -- Kevin<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;  <br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 24334, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1360868825", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 24334, 
    "headers": {
        "messageIdInHeader": "PGtmamNrcCtmZTNzQGVHcm91cHMuY29tPg=="
    }
}