{
    "numMessagesInTopic": 7, 
    "nextInTime": 22373, 
    "senderId": "cPBIwrWPs4TwH9kKc3NwCJIMRr4vQ5y-NK68j5aAx3an36uwscDBnd3NXRk9UvHhbJl-cBMq-WG89NF_A0KEc4lkOB9EzEBk3FudzM9Z", 
    "systemMessage": true, 
    "subject": "Re: Re: [junit] Using JUnit 4 to drive a test DSL", 
    "from": "Peter Niederwieser &lt;pniederw@...&gt;", 
    "authorName": "Peter Niederwieser", 
    "msgSnippet": "See this thread: http://old.nabble.com/Upgrading-from-3.8.1-to-4.x--to27153980.html#a27169769 Cheers, Peter ... -- View this message in context:", 
    "msgId": 22372, 
    "profile": "pniederw", 
    "topicId": 22366, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 316799131, 
    "messageBody": "<div id=\"ygrps-yiv-1623378467\">See this thread:<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://old.nabble.com/Upgrading-from-3.8.1-to-4.x--to27153980.html#a27169769\">http://old.nabble.com/Upgrading-from-3.8.1-to-4.x--to27153980.html#a27169769</a><br/>\n<br/>\nCheers,<br/>\nPeter<br/>\n<br/>\n<br/>\nEdson Tirelli-4 wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt;     Hmmm, it seems you are right actually. I will do some research on how<br/>\n&gt; surefire is handling that.<br/>\n&gt; <br/>\n&gt;     Thanks,<br/>\n&gt;       Edson<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; 2010/2/5 krosenvold &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:kristian@...\">kristian@...</a>&gt;<br/>\n&gt; <br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; Is NodeTest actually a test class ? I think you may be victim of a hotly<br/>\n&gt;&gt; debated issue in surefire, where surefire by default assumes every class<br/>\n&gt;&gt; ending with &quot;Test&quot; is a test-case.<br/>\n&gt;&gt;<br/>\n&gt;&gt; Kristian<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt;, Edson Tirelli<br/>\n&gt;&gt; &lt;ed.tirelli@...&gt; wrote:<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Hi all,<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Facing a problem a could not find an answer for yet.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; We use JUnit as the testing framework for Drools (<br/>\n&gt;&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.jboss.org/drools/)\">http://www.jboss.org/drools/)</a>. It happens, though, that some of the<br/>\n&gt;&gt; internal<br/>\n&gt;&gt; &gt; low level stuff are really hard to test using pure java code, so, we<br/>\n&gt;&gt; created<br/>\n&gt;&gt; &gt; a DSL to define some of our low level tests. Example here (but it does<br/>\n&gt;&gt; not<br/>\n&gt;&gt; &gt; really matter for the problem at hand):<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/resources/org/drools/reteoo/test/AccumulateNodeAssertRetractTest.nodeTestCase\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/resources/org/drools/reteoo/test/AccumulateNodeAssertRetractTest.nodeTestCase</a><br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; The DSL follows a simplified test structure, similar to previous JUnit<br/>\n&gt;&gt; &gt; versions, i.e., each file is a test case that might have a setup and<br/>\n&gt;&gt; &gt; teardown sections, plus a bunch of tests. Simple and works fine for us.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Now, since we use JUnit to drive all our tests, I would like to use<br/>\n&gt;&gt; junit<br/>\n&gt;&gt; &gt; to drive these DSL test cases as well during our build (maven), to keep<br/>\n&gt;&gt; all<br/>\n&gt;&gt; &gt; reports, etc integrated. So, I created a test runner class:<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/JUnitNodeTestRunner.java\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/JUnitNodeTestRunner.java</a><br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; And then I created a bootstrap class (not sure if there is a way to<br/>\n&gt;&gt; avoid<br/>\n&gt;&gt; &gt; having the bootstrap class):<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/NodeTestsSuite.java\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/NodeTestsSuite.java</a><br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; As you can see, the bootstrap class has the annotation:<br/>\n&gt;&gt; &gt; @RunWith(JUnitNodeTestRunner.class)<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Now, when I right click that class and choose &quot;Run as... JUnit test<br/>\n&gt;&gt; case&quot;<br/>\n&gt;&gt; &gt; in eclipse, the class loads and executes all tests defined in our dsl<br/>\n&gt;&gt; test<br/>\n&gt;&gt; &gt; files without any problem. It shows all tests with success/error<br/>\n&gt;&gt; messages<br/>\n&gt;&gt; in<br/>\n&gt;&gt; &gt; the eclipse junit view, etc. BUT, when I run the tests from our maven<br/>\n&gt;&gt; build,<br/>\n&gt;&gt; &gt; I get the following error:<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.005<br/>\n&gt;&gt; sec<br/>\n&gt;&gt; &gt; &lt;&lt;&lt; FAILURE!<br/>\n&gt;&gt; &gt; initializationError(org.drools.reteoo.test.dsl.NodeTest) Time elapsed:<br/>\n&gt;&gt; 0<br/>\n&gt;&gt; &gt; sec &lt;&lt;&lt; ERROR!<br/>\n&gt;&gt; &gt; java.lang.IllegalArgumentException: Test class can only have one<br/>\n&gt;&gt; constructor<br/>\n&gt;&gt; &gt; at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:32)<br/>\n&gt;&gt; &gt; at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:54)<br/>\n&gt;&gt; &gt; ...<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; I am at a loss right now, so any insights on how to fix that (or even<br/>\n&gt;&gt; if<br/>\n&gt;&gt; &gt; we are using the wrong approach here) are most appreciated.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Thanks,<br/>\n&gt;&gt; &gt; Edson<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; --<br/>\n&gt;&gt; &gt; Edson Tirelli<br/>\n&gt;&gt; &gt; JBoss Drools Core Development<br/>\n&gt;&gt; &gt; JBoss by Red Hat @ www.jboss.com<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;  <br/>\n&gt;&gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; -- <br/>\n&gt;  Edson Tirelli<br/>\n&gt;  JBoss Drools Core Development<br/>\n&gt;  JBoss by Red Hat @ www.jboss.com<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n<br/>\n </span></blockquote>-- <br/>\nView this message in context: <a rel=\"nofollow\" target=\"_blank\" href=\"http://old.nabble.com/Using-JUnit-4-to-drive-a-test-DSL-tp27474049p27479704.html\">http://old.nabble.com/Using-JUnit-4-to-drive-a-test-DSL-tp27474049p27479704.html</a><br/>\nSent from the JUnit - User mailing list archive at Nabble.com.</div>", 
    "prevInTime": 22371, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1265463651", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 22371, 
    "headers": {
        "inReplyToHeader": "PGU2ZGQ1YmEzMTAwMjA1MTQ0MmoxY2VmYWY4N245ZDY1NmE1OTcyODJlNmFiQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDI3NDc5NzA0LnBvc3RAdGFsay5uYWJibGUuY29tPg==", 
        "referencesHeader": "PGU2ZGQ1YmEzMTAwMjA1MTMwOHkxYThlY2MyZmw2MGUzZTViMDQxOTZmNWMxQG1haWwuZ21haWwuY29tPiA8aGtpMzlkKzN1NzNAZUdyb3Vwcy5jb20+IDxlNmRkNWJhMzEwMDIwNTE0NDJqMWNlZmFmODduOWQ2NTZhNTk3MjgyZTZhYkBtYWlsLmdtYWlsLmNvbT4="
    }
}