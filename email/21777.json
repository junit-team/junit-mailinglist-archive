{
    "numMessagesInTopic": 5, 
    "nextInTime": 21778, 
    "senderId": "7lnM_FTB87j7NI8avlh3p437MTWD3lWLeRLZEWg8M-C2bs7j64Vk4v0-Fgx5Ajo85sQpbeKiMpiNAx99u8dKNMSOGlianJah6sYbbw", 
    "systemMessage": false, 
    "subject": "Re: Request, RunnerBuilder, Computer and @RunWith", 
    "from": "&quot;krosenvold&quot; &lt;kristian@...&gt;", 
    "authorName": "krosenvold", 
    "msgSnippet": "Just talking about these things cleared my mind a little bit. I now have a functional fork of the maven-surfefire-plugin at", 
    "msgId": 21777, 
    "profile": "krosenvold", 
    "topicId": 21759, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 403861045, 
    "messageBody": "<div id=\"ygrps-yiv-1126469904\">Just talking about these things cleared my mind a little bit. I now have a functional fork of the maven-surfefire-plugin at <a rel=\"nofollow\" target=\"_blank\" href=\"http://github.com/krosenvold/maven-surefire-plugin/tree/master\">http://github.com/krosenvold/maven-surefire-plugin/tree/master</a><br/>\n(This will be submitted as a patch to apache once I get it a bit more up-to speed)<br/>\n<br/>\nIt only runs parallel-methods right now, but I will RSN fix it to run parallel classes too. It works really well with all the regular junit-tests I tested, but I am currently spending my energy investigating some concurrency issues inside the spring 3.0 junit test runner. After I find the spring bugs I&#39;ll do parallel classes too.<br/>\n<br/>\nThe experience with surefire leads me to think that parallelism should be an aspect of the runner, not specified by the running class (so I changed my mind). The exception might be in those cases where you explicitly have to *deny* parallell methods for some reasons. So I&#39;m leaning more towards an annotation like &quot;@SingleThread&quot;. If the runner gets configured with NumParallelClasses=1 and ParallelMethods=false you&#39;re basically running in &quot;compatibility mode&quot;. So I have really reverted my original query totally ;) I&#39;ll bug jetbrains about start supporting junit core instead.<br/>\n<br/>\nSo I suppose I&#39;m not really requesting any changes ;) The only thing I can think of now is to make the order of method/classes configurable. For some types of tests it&#39;s beneficial to run the first test method of all test classes before running the second methods of all the classes and so on. Our selenium tests are typically that way; when you run 10 tests in the same class multithreaded they all end up waiting for the same initialization logic and the same synchronized points pretty quickly (jsp compilation, classloading etc). (The 10 threads will be testing similar permutations of some business process). Maybe I&#39;ll look into that when all the other things are sorted out...<br/>\n<br/>\nKristian<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, David Saff &lt;david@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Kristian,<br/>\n&gt; <br/>\n&gt; You&#39;re right.  There should indeed be a better way to do this.<br/>\n&gt; Interceptors have proven an impressively good model for modifying the<br/>\n&gt; behavior of test methods, and a reasonable model for class<br/>\n&gt; interceptors is coming to mind.  Imagine this:<br/>\n&gt; <br/>\n&gt; @RunWith(Suite.class)<br/>\n&gt; @SuiteClases({A.class, B.class, C.class...})<br/>\n&gt; public class ABCSuite {<br/>\n&gt;    @ClassInterceptor Parallelize parallelize = Parallelize.classesAndMethods();<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; One line to do what you want (although an unwieldy line at that...)<br/>\n&gt; <br/>\n&gt; Would that do the trick?<br/>\n&gt; <br/>\n&gt;    David Saff<br/>\n&gt; <br/>\n&gt; On Thu, Jun 18, 2009 at 11:39 PM, krosenvold&lt;kristian@...&gt; wrote:<br/>\n&gt; &gt; Oh, sorry for not providing any good context here ;)<br/>\n&gt; &gt;<br/>\n&gt; &gt; My real goal is to get parallelization of *any* sort running within maven2. This is because our automated build uses it; if I was able to get parallel test-methods it&#39;d cut the run-time of our long-running builds to about a third. If I could get classes too I&#39;d probably aim for world-record swamping of our 16-core build server ;) Reducing wall-clock execution time of all our builds is a priority concern.<br/>\n&gt; &gt;<br/>\n&gt; &gt; For our daily work we use IntelliJ idea v8, and while certainly &quot;nice to have&quot; the value of parallel tests in the development environment is less glaringly obvious.<br/>\n&gt; &gt;<br/>\n&gt; &gt; I was looking around in the git-snapshot of junit-4.7 code, trying to determine how/if I could do this. It seems to me like there&#39;s two basic approaches as to how to achieve this:<br/>\n&gt; &gt;<br/>\n&gt; &gt; To get parallelization for classes you need to mess around with the runner. I&#39;m not totally familiar/comfortable with how this would be done.<br/>\n&gt; &gt;<br/>\n&gt; &gt; For parallel methods it seems like one *should* be able to specify a &quot;Computer&quot; on the &quot;@RunWith&quot; annotation; it even seems like a logical configuration point for this information.<br/>\n&gt; &gt;<br/>\n&gt; &gt; I know this may be slightly off-topic, but I feel several &quot;tensions&quot; in the code-base around the &quot;Computer&quot;. Is this still largely work in progress?<br/>\n&gt; &gt;<br/>\n&gt; &gt; Kristian<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, David Saff &lt;david@&gt; wrote:<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; Kristian,<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; 1) Can you use the 4.7 snapshot?<br/>\n&gt; &gt;&gt; 2) Are you trying to parallelize methods within a class, classes<br/>\n&gt; &gt;&gt; within a suite, or both?<br/>\n&gt; &gt;&gt; 3) What are you using to run the tests?<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt;    David Saff<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;&gt; On Thu, Jun 18, 2009 at 6:07 AM, krosenvold&lt;kristian@&gt; wrote:<br/>\n&gt; &gt;&gt; &gt; Using a RunnerBuilder and a Computer, the JUNIT 4.7 Request class creates the Runner object.<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; I am currently using @RunWith(SpringJUnit4ClassRunner.class) (from spring 3.0 rc) and I&#39;m trying to shoehorn parallel running into this regime, but it seems to me like these two designs are now fairly orthogonal. I suppose it could have been solved by amending a &quot;Computer&quot; to the @RunWith tag, and I also suppose I may be trying to solve this problem at the incorrect level.<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; Anyone have any thoughts/suggestions on this one ?<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; Kristian Rosenvold<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; ------------------------------------<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt; &gt;<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; ------------------------------------<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21776, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1245513000", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 21774, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MDkwNjE5MDg1MnI3OTE3YzE5ZHk3YmM4NzRiZmViNjU3MDNjQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGgxajBmOCtrdWpxQGVHcm91cHMuY29tPg=="
    }
}