{
    "numMessagesInTopic": 74, 
    "nextInTime": 15965, 
    "senderId": "OTZj6-1e4XwDOmU8q_WHCSyAE1zhpYE-K9-y6hJG_VcXkbTQyzLBx59CxFw6pWIgwzcOLiwBahkxJM88RmfUECtzpsoMz1syBnKmcw", 
    "systemMessage": false, 
    "subject": "Re: Observations from a production use of JUnit4", 
    "from": "&quot;Ben Maurer&quot; &lt;bmaurer@...&gt;", 
    "authorName": "Ben Maurer", 
    "msgSnippet": "... I thought @RunWith was optional and that you did not have to set it on all classes with tests ... I don t think user programs have the knowledge needed to", 
    "msgId": 15964, 
    "rawEmail": "Return-Path: &lt;bmaurer@...&gt;\r\nX-Sender: bmaurer@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 88454 invoked from network); 4 Feb 2006 01:20:54 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m33.grp.scd.yahoo.com with QMQP; 4 Feb 2006 01:20:54 -0000\r\nReceived: from unknown (HELO n1a.bullet.scd.yahoo.com) (66.94.237.35)\n  by mta3.grp.scd.yahoo.com with SMTP; 4 Feb 2006 01:20:53 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.1] by n1.bullet.scd.yahoo.com with NNFMP; 04 Feb 2006 01:20:18 -0000\r\nReceived: from [66.218.66.73] by t1.bullet.scd.yahoo.com with NNFMP; 04 Feb 2006 01:20:18 -0000\r\nDate: Sat, 04 Feb 2006 01:20:16 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;ds0vgg+u03h@...&gt;\r\nIn-Reply-To: &lt;E1F4u5o-0000yx-RQ@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Ben Maurer&quot; &lt;bmaurer@...&gt;\r\nSubject: Re: Observations from a production use of JUnit4\r\nX-Yahoo-Group-Post: member; u=256083789; y=2Ctrk8PqxIFaK-PUZDmIwcQq_iqd3RwoPz0VRNI19-lLM8PBt109MtXq498rCA\r\nX-Yahoo-Profile: benjamindavidmaurer\r\n\r\n--- In junit@yahoogroups.com, &quot;Kent Beck&quot; &lt;kentb@...&gt; wrote:\n&gt; &gt; --- In jun=\r\nit@yahoogroups.com, David Saff &lt;saff@m...&gt; wrote:\n&gt; &gt; &gt; Ben Maurer wrote:\n&gt;=\r\n &gt; &gt; &gt; Ant XML output\n&gt; &gt; &gt; &gt; --------------\n&gt; &gt; &gt; &gt; [...]\n&gt; &gt; &gt; &gt; However,=\r\n in rc2, it looks like:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &lt;testcase classname=3D&quot;junit.framew=\r\nork.JUnit4TestAdapterCache$2$1&quot; \n&gt; &gt; &gt; &gt; name=3D&quot;unknown&quot; time=3D&quot;0.018&quot;&gt;&lt;/=\r\ntestcase&gt;\n&gt; &gt; &gt; That doesn&#39;t look good, does it?  If my initial guess as to=\r\n \n&gt; &gt; this bug&#39;s \n&gt; &gt; &gt; source is correct, this will be easily fixed (back =\r\nto rc1&#39;s\n&gt; &gt; behavior, at \n&gt; &gt; &gt; least) soon.\n&gt; &gt; \n&gt; &gt; Ok, that&#39;s good. Tha=\r\nt will at least allow me to upgrade ;-). It&#39;d be\n&gt; &gt; ideal if we could set =\r\nthe classname to the &quot;real&quot; class name.\n&gt; &gt; \n&gt; &gt; Btw, on the topic of JUnit=\r\n3 tool compat: is it possible to make is so\n&gt; &gt; we don&#39;t have to write:\n&gt; &gt;=\r\n \n&gt; &gt;         public static junit.framework.Test suite()\n&gt; &gt;         {\n&gt; &gt; =\r\n                return new\n&gt; &gt; junit.framework.JUnit4TestAdapter(HashtableT=\r\nest.class);\n&gt; &gt;         }\n&gt; &gt; \n&gt; &gt; *if* we are using the JUnit4 version of =\r\nthe tools. The logic could be\n&gt; &gt; something like:\n&gt; &gt; \n&gt; &gt; if (I am asked t=\r\no run a junit3 test on something) {\n&gt; &gt;    if (any methods have the @Test a=\r\nnnotation) {\n&gt; &gt;       use junit4 behavior\n&gt; &gt;    }\n&gt; &gt; \n&gt; &gt;    fallback\n&gt; =\r\n&gt; }\n&gt; &gt; \n&gt; &gt; If this was done and the classname was set correctly, I think =\r\nwe could\n&gt; &gt; simulate almost full compat (for simple cases) with junit3 \n&gt; =\r\n&gt; based tools.\n&gt; &gt; \n&gt; &gt; If you get both/either of these in cvs, I&#39;d be happ=\r\ny to test them out.\n&gt; \n&gt; The tip-off that you are dealing with a JUnit 4 te=\r\nst is a class with\n&gt; @RunWith. A class containing a method with @Test has a=\r\n @RunWith by\n&gt; implication.\n\nI thought @RunWith was optional and that you d=\r\nid not have to set it on\nall classes with tests\n\n&gt; &gt; &gt; &gt; Stack Trace Filter=\r\ning\n&gt; &gt; &gt; &gt; ---------------------\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; The stack trace from juni=\r\nt messages have always been filed with\n&gt; &gt; junit.*\n&gt; &gt; &gt; &gt; traces. Ant filt=\r\ners these out. However, now there are \n&gt; &gt; org.junit things\n&gt; &gt; &gt; &gt; slippin=\r\ng through. Also, tests with a timeout, have many\n&gt; &gt; &gt; &gt; java.util.concurre=\r\nnt frames in them. Why leave this kind of\n&gt; &gt; filtering up\n&gt; &gt; &gt; &gt; to each =\r\ntool? JUnit should filter out the frames it knows \n&gt; &gt; are from it.\n&gt; &gt; &gt; &gt;=\r\n This would make command line output look nicer. I think NUnit does\n&gt; &gt; thi=\r\ns.\n&gt; &gt; &gt; This is tricky.  The JUnit API actually reports the Exception\n&gt; &gt; =\r\nobjects to \n&gt; &gt; &gt; the tools, which are then responsible for displaying / \n&gt;=\r\n &gt; parsing stack \n&gt; &gt; &gt; traces.  I don&#39;t know that there&#39;s anything we coul=\r\nd do to make \n&gt; &gt; &gt; pre-JUnit 4 tools automatically filter the org.junit li=\r\nnes, but we\n&gt; &gt; might \n&gt; &gt; &gt; look at something for the future.\n&gt; &gt; \n&gt; &gt; The=\r\nre&#39;s a setStackTrace in Throwable that looks promising. Granted,\n&gt; &gt; this i=\r\ns a bit of a hack, but having the org.junit lines in the test\n&gt; &gt; results g=\r\nets really, really annoying. At the very least we should\n&gt; &gt; export a polis=\r\nhed method that takes care of this.\n&gt; \n&gt; It seems to me that stack filterin=\r\ng is a user interface responsibility.\n&gt; Every time we get into the formatti=\r\nng business we regret it (see\n&gt; ComparisonFailure for an example).\n\nI don&#39;t=\r\n think user programs have the knowledge needed to do this. For\nexample, if =\r\nI have a junit test like junit&#39;s one that actually\nexecutes junit inside th=\r\ne test, it will screw up. Also, because of the\n timeout behavior, we&#39;ll int=\r\nroduce stuff from java.util.concurrent\ninto the trace, which means we have =\r\nto figure out *exactly* which\nmethods there need excluding. In general, thi=\r\ns is fragile. JUnit can\neasily get a stack trace from the method that calls=\r\n user-code. This\nwould at least allow a tool to find out exactly what frame=\r\ns needed to\nbe killed.\n\n-- Ben\n\n\n\n\n", 
    "profile": "benjamindavidmaurer", 
    "topicId": 15891, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 256083789, 
    "prevInTime": 15963, 
    "contentTrasformed": false, 
    "postDate": "1139016016", 
    "canDelete": false, 
    "nextInTopic": 15965, 
    "prevInTopic": 15963, 
    "headers": {
        "inReplyToHeader": "PEUxRjR1NW8tMDAwMHl4LVJRQHNtdHBhdXRoMDcubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4=", 
        "messageIdInHeader": "PGRzMHZnZyt1MDNoQGVHcm91cHMuY29tPg=="
    }
}