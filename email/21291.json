{
    "numMessagesInTopic": 22, 
    "nextInTime": 21292, 
    "senderId": "3H24BsI3XxAvIRlT7zmCjIH_BsJ-6ZExr5BL9NmAe721SFF1Z_Ji7vFy10DfiO0jvYKLaENNO5msNKLl8vgYhDUUPSt4F0CMilMfUlP0tmIJCFBx1bDs16HL", 
    "systemMessage": false, 
    "subject": "Re: Runner for non static inner class in JUnit 4.x", 
    "from": "&quot;tuomaskarkkainenri&quot; &lt;tuomaskarkkainenri@...&gt;", 
    "authorName": "tuomaskarkkainenri", 
    "msgSnippet": "Kent, I am not sure what you mean. The test I posted starts passing if my original patch is applied, or the feature is implemented another way for example in", 
    "msgId": 21291, 
    "profile": "tuomaskarkkainenri", 
    "topicId": 21238, 
    "spamInfo": {
        "reason": "2", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 373866241, 
    "messageBody": "<div id=\"ygrps-yiv-133468194\">Kent,<br/>\n<br/>\nI am not sure what you mean.<br/>\n<br/>\nThe test I posted starts passing if my original patch is applied, or<br/>\nthe feature is implemented another way for example in AnnotatedBuilder.<br/>\n<br/>\nThe test below can however be made to pass without implementing the<br/>\nfeature completely.  I am not sure if it is timely to write those<br/>\nother tests yet.  Most prominently, the test doesn&#39;t check that the<br/>\nRunner is filtered with a proper method name filter.  However the<br/>\nfiltering is likely to be a side effect of the most straightforward<br/>\nway of implementing the feature.<br/>\n<br/>\nBr,<br/>\nTuomas<br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In junit@yahoogroups.com, &quot;kentb&quot; &lt;kentb@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Tuomas,<br/>\n&gt;  <br/>\n&gt; This is most of the way to what I was looking for. Can you take one more<br/>\n&gt; step and write a test which fails currently but would succeed if the<br/>\nfeature<br/>\n&gt; outlined below were present?<br/>\n&gt;  <br/>\n&gt; Cheers,<br/>\n&gt;  <br/>\n&gt; Kent Beck<br/>\n&gt; Three Rivers Institute<br/>\n&gt; <br/>\n&gt;   _____  <br/>\n&gt; <br/>\n&gt; From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of<br/>\n&gt; tuomaskarkkainenri<br/>\n&gt; Sent: Tuesday, January 06, 2009 2:52 PM<br/>\n&gt; To: junit@yahoogroups.com<br/>\n&gt; Subject: [junit] Re: Runner for non static inner class in JUnit 4.x<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Kent,<br/>\n&gt; <br/>\n&gt; essentially:<br/>\n&gt; <br/>\n&gt; @Test<br/>\n&gt; public void findsRunnerFromDeclaringClass() {<br/>\n&gt; final Request request= Request.method(NonStaticInnerClass.class,<br/>\n&gt; &quot;methodName&quot;);<br/>\n&gt; Assert.assertThat(request.getRunner(), Is.is(FakeRunner.class));<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @RunWith(FakeRunner.class)<br/>\n&gt; public static class DeclaringClass {<br/>\n&gt; <br/>\n&gt; public class NonStaticInnerClass {<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; public static class FakeRunner extends Runner {<br/>\n&gt; public FakeRunner(final Class&lt;?&gt; testClass) {<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public Description getDescription() {<br/>\n&gt; return Description.EMPTY;<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; @Override<br/>\n&gt; public void run(final RunNotifier notifier) {<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; as Eclipse enters JUnit4 from:<br/>\n&gt; org.eclipse.jdt.internal.junit4.runner.JUnit4TestMethodReference<br/>\n&gt; constructor with a call to: Request.method(clazz, methodName)<br/>\n&gt; <br/>\n&gt; best regards,<br/>\n&gt; tuomas<br/>\n&gt; <br/>\n&gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com, &quot;kentb&quot;<br/>\n&gt; &lt;kentb@&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; PMFBI, but another way to ask that question is: what is the first test<br/>\n&gt; you&#39;d<br/>\n&gt; &gt; like to see pass that doesn&#39;t yet pass?<br/>\n&gt; &gt;<br/>\n&gt; &gt; Cheers,<br/>\n&gt; &gt;<br/>\n&gt; &gt; Kent<br/>\n&gt; &gt;<br/>\n&gt; &gt; _____<br/>\n&gt; &gt;<br/>\n&gt; &gt; From: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com<br/>\n&gt; [mailto:junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com] On<br/>\nBehalf<br/>\n&gt; Of<br/>\n&gt; &gt; David Saff<br/>\n&gt; &gt; Sent: Tuesday, January 06, 2009 8:12 AM<br/>\n&gt; &gt; To: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com<br/>\n&gt; &gt; Subject: Re: [junit] Re: Runner for non static inner class in JUnit<br/>\n&gt; 4.x<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Tue, Jan 6, 2009 at 6:27 AM, tuomaskarkkainenri &lt;<br/>\n&gt; &gt; tuomaskarkkainenri@ &lt;mailto:tuomaskarkkainenri%40yahoo.com&gt; yahoo.com&gt;<br/>\n&gt; &gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; there are no hooks for JDave to<br/>\n&gt; &gt; &gt; attach to before the discovery of the runner.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Let&#39;s push on that. What would be the ideal hook here?<br/>\n&gt; &gt;<br/>\n&gt; &gt; David Saff<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; br,<br/>\n&gt; &gt; &gt; Tuomas<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com,<br/>\n&gt; &quot;David<br/>\n&gt; &gt; Saff&quot; david@ wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Do you think the overall ease of use to people who need this<br/>\n&gt; feature<br/>\n&gt; &gt; &gt; will be<br/>\n&gt; &gt; &gt; &gt; worth a 20% increase in complexity for everyone who needs to<br/>\n&gt; &gt; &gt; understand the<br/>\n&gt; &gt; &gt; &gt; default running rules?<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; David Saff<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; On Wed, Dec 31, 2008 at 3:08 AM, tuomaskarkkainenri &lt;<br/>\n&gt; &gt; &gt; &gt; tuomaskarkkainenri@ wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; hey David,<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; i uploaded the patch as a file,<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; http://f1.grp.<br/>\n&gt; &gt;<br/>\n&gt; &lt;http://f1.grp.<br/>\n&gt;<br/>\n&lt;http://f1.grp.yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2Pq<br/>\n&gt; &gt; yahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMT&#92;<br/>\n&gt; D2Pq<br/>\n&gt; &gt;<br/>\n&gt;<br/>\nfQBWFNQwiqbje7jxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstatici&#92;<br/>\n&gt; nner<br/>\n&gt; &gt; classes.patch&gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\nyahoofs.com/v1/cBhbSQYycXqWtmfu6mA5iis6I67Qo0Itb3lfEH-tMTD2PqfQBWFNQwiqb&#92;<br/>\n&gt; je7j<br/>\n&gt; &gt;<br/>\n&gt;<br/>\nxu7yGSHFHijEoZPnMvQpZtq0gohmbE9pzSYXRseJ5ewyt0/nonstaticinnerclasses.pat&#92;<br/>\n&gt; ch<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; or if that link is relative to my session it&#39;s<br/>\n&gt; &gt; &gt; &gt; &gt; nonstaticinnerclasses.patch under files here in Yahoo Groups.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; in JUnit4 speak:<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; public class RegularJunit4 {<br/>\n&gt; &gt; &gt; &gt; &gt; public class NonStaticInnerClass {<br/>\n&gt; &gt; &gt; &gt; &gt; @Test<br/>\n&gt; &gt; &gt; &gt; &gt; public void testMethod() {<br/>\n&gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; running testMethod() is not possible since NonStaticInnerClass<br/>\n&gt; cannot<br/>\n&gt; &gt; &gt; &gt; &gt; be instantiated from the outside.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; in JDave:<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; @RunWith(JDaveRunner.class)<br/>\n&gt; &gt; &gt; &gt; &gt; public static class ASpec extends Specification&lt;Void&gt; {<br/>\n&gt; &gt; &gt; &gt; &gt; public class AContext {<br/>\n&gt; &gt; &gt; &gt; &gt; public void aBehavior() {}<br/>\n&gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; AContext is instantiated by SpecRunner which JDaveRunner<br/>\n&gt; delegates to.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; When I run this with current JUnit,<br/>\n&gt; &gt; &gt; &gt; &gt; AllDefaultPossibilitiesBuilder#runnerForClass(final Class&lt;?&gt;<br/>\n&gt; &gt; &gt; &gt; &gt; testClass) picks out the @RunWith annotation and uses that to<br/>\n&gt; run my<br/>\n&gt; &gt; &gt; &gt; &gt; spec(test class).<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; However if I want to run just a single behavior (test method)<br/>\n&gt; from<br/>\n&gt; &gt; &gt; &gt; &gt; this spec for example from Eclipse. Eclipse tells JUnit to run<br/>\n&gt; class<br/>\n&gt; &gt; &gt; &gt; &gt; ASpec.AContext and method aBehavior JUnit then sees what builder<br/>\n&gt; it<br/>\n&gt; &gt; &gt; &gt; &gt; should use for AContext, and doesn&#39;t find the annotation there<br/>\n&gt; and<br/>\n&gt; &gt; &gt; &gt; &gt; tries to use the regular JUnit4 builder and since it&#39;s a JDave<br/>\n&gt; spec it<br/>\n&gt; &gt; &gt; &gt; &gt; fails to run.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; What I want to do is: in case AllDefaultPossibilitiesBuilder<br/>\n&gt; notices<br/>\n&gt; &gt; &gt; &gt; &gt; that the TestClass is a non-static member class, which it has no<br/>\n&gt; &gt; &gt; &gt; &gt; chance of being able run anyway, it checks whether the declaring<br/>\n&gt; class<br/>\n&gt; &gt; &gt; &gt; &gt; of the testclass would be able to run it instead.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; In the case of JDave, the declaring class would have the<br/>\n&gt; @RunWith<br/>\n&gt; &gt; &gt; &gt; &gt; annotation, and with the Filter created by FilterRequest, JDave<br/>\n&gt; can<br/>\n&gt; &gt; &gt; &gt; &gt; then choose which Context and Spec it should actually allow to<br/>\n&gt; run.<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; br,<br/>\n&gt; &gt; &gt; &gt; &gt; Tuomas<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; --- In junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com,<br/>\n&gt; &quot;David<br/>\n&gt; &gt; Saff&quot; &lt;david@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; JDave is cool. I&#39;m not 100% clear what you want to do, and I<br/>\n&gt; don&#39;t<br/>\n&gt; &gt; &gt; &gt; &gt; see the<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; patch. Could you perhaps include a small test case as inline<br/>\n&gt; text?<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; David Saff<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; On Tue, Dec 30, 2008 at 10:27 AM, tuomaskarkkainenri &lt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; tuomaskarkkainenri@&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; I participate in JDave (http://jdave. &lt;http://jdave.<br/>\n&gt; &lt;http://jdave.org&gt; org&gt;<br/>\n&gt; org). A<br/>\n&gt; &gt; BDD framework<br/>\n&gt; &gt; &gt; for Java<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; that takes advantage of JUnit for example for Eclipse<br/>\n&gt; integration.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; We have tests in non-static inner classes of our test<br/>\n&gt; classes.<br/>\n&gt; &gt; &gt; These<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; run wonderfully using the @RunWith annotation and our own<br/>\n&gt; runner.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; however, for individual tests, this doesn&#39;t work. What I<br/>\n&gt; would<br/>\n&gt; &gt; &gt; like<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; to do is that AllDefaultPossibilitiesBuilder would check<br/>\n&gt; &gt; &gt; whether or<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; not the test class is a non static member class. if it is,<br/>\n&gt; then I<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; would grab the runner of the declaring class instead.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt; I made a patch implementing this. I will try to attach it.<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; ------------------------------------<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21290, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1232007318", 
    "canDelete": false, 
    "nextInTopic": 21295, 
    "prevInTopic": 21290, 
    "headers": {
        "inReplyToHeader": "PDgyMjE2MUFFMTY2MzRDQjlBNkQwOENGOTMxRkVFNjc3QGtlbnRzcGF2aWxpb24+", 
        "messageIdInHeader": "PGdrbXJhbSt2MDFvQGVHcm91cHMuY29tPg=="
    }
}