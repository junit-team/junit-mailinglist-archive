{
    "numMessagesInTopic": 10, 
    "nextInTime": 17328, 
    "senderId": "5IC_bpymE-EYjhrRijrRue2HaahrexN0gTNxrpgT-bDxph-UiC_OSdMobpnohGp4NRt5xLzLEiI8O93Rg0tTKzgWs5ZB_rJvPQFMubqUCP_vgN0", 
    "systemMessage": true, 
    "subject": "Unit testing Contexts", 
    "from": "&quot;DanHinojosa&quot; &lt;newsreader@...&gt;", 
    "authorName": "DanHinojosa", 
    "msgSnippet": "So, I have been a programmer for many years, but barely have I got into TDD.  One of the roadblocks I have gotten into is contexts. There is no way to test", 
    "msgId": 17327, 
    "rawEmail": "Return-Path: &lt;newsreader@...&gt;\r\nReceived: (qmail 50756 invoked from network); 7 Aug 2006 10:37:14 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m27.grp.scd.yahoo.com with QMQP; 7 Aug 2006 10:37:14 -0000\r\nReceived: from unknown (HELO n17b.bullet.sc5.yahoo.com) (66.163.187.184)\n  by mta7.grp.scd.yahoo.com with SMTP; 7 Aug 2006 10:37:14 -0000\r\nReceived: from [66.163.187.121] by n17.bullet.sc5.yahoo.com with NNFMP; 07 Aug 2006 10:37:02 -0000\r\nReceived: from [66.218.69.1] by t2.bullet.sc5.yahoo.com with NNFMP; 07 Aug 2006 10:37:02 -0000\r\nReceived: from [66.218.66.76] by t1.bullet.scd.yahoo.com with NNFMP; 07 Aug 2006 10:37:02 -0000\r\nX-Sender: newsreader@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 85604 invoked from network); 4 Aug 2006 20:53:02 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m31.grp.scd.yahoo.com with QMQP; 4 Aug 2006 20:53:02 -0000\r\nReceived: from unknown (HELO n22b.bullet.sc5.yahoo.com) (66.163.187.189)\n  by mta7.grp.scd.yahoo.com with SMTP; 4 Aug 2006 20:53:02 -0000\r\nReceived: from [66.163.187.120] by n22.bullet.sc5.yahoo.com with NNFMP; 04 Aug 2006 20:52:55 -0000\r\nReceived: from [66.218.69.6] by t1.bullet.sc5.yahoo.com with NNFMP; 04 Aug 2006 20:52:55 -0000\r\nReceived: from [66.218.66.70] by t6.bullet.scd.yahoo.com with NNFMP; 04 Aug 2006 20:52:55 -0000\r\nDate: Fri, 04 Aug 2006 20:52:55 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;eb0c37+hqbu@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;DanHinojosa&quot; &lt;newsreader@...&gt;\r\nSubject: Unit testing Contexts\r\nX-Yahoo-Group-Post: member; u=274149574; y=6TaxYGgBKWgG0x6WU0vpuLabq1K7DQ7bhVEuB4TOPUScgE5XL-o\r\nX-Yahoo-Profile: DanHinojosa\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 07 Aug 2006 10:37:01 -0000\r\n\r\nSo, I have been a programmer for many years, but barely have I got\ninto TDD=\r\n.  One of the roadblocks I have gotten into is contexts. \nThere is no way t=\r\no test them outside of an container or file system\nwhen they are embedded i=\r\nnto a method. Let me pick on an InitialContext\nand VelocityContext in this =\r\nemail example:\n\n\npublic class A {\n\n   public void foo() {\n            //...=\r\n. Code ..... //\n\n            VelocityContext context =3D new VelocityContex=\r\nt();\n            context.put(&quot;requestMap&quot;, requestMap);\n            StringW=\r\nriter w =3D new StringWriter();\n            Velocity.mergeTemplate(&quot;mytempl=\r\nate.vm&quot;, &quot;UTF-8&quot;, context, w);\n            String text =3D w.toString();\n\n =\r\n\n            InitialContext ic =3D new InitialContext();\n            Sessio=\r\nn session =3D (Session) ic.find(&quot;mail/MailSource&quot;);\n            Message msg=\r\n =3D new MimeMessage(session);\n            msg.setContent(text, &quot;text/plain=\r\n&quot;);\n            \n            //.... Code ..... //\n    }\n}\n\n\nIf I create a t=\r\nestFoo method to test this I am out of luck.   This is\nbecause the Velocity=\r\n Context relies on an underlying classloader.  The\n InitialContext relies o=\r\nn an underlying Java EE context. Again, this\nis a UNIT TEST, and not an int=\r\negration or system test.  So what is the\nbest way to do get good test cover=\r\nage on this?  Shall I extract the\ncode into another class that I can inject=\r\n my InitialContext mocks and\nmy VelocityContext mocks through there?  \n\nLet=\r\n me know. \nDanno\n\n\n\n\n\n\n\n\n", 
    "profile": "DanHinojosa", 
    "topicId": 17327, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 274149574, 
    "prevInTime": 17326, 
    "contentTrasformed": false, 
    "postDate": "1154724775", 
    "canDelete": false, 
    "nextInTopic": 17330, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGViMGMzNytocWJ1QGVHcm91cHMuY29tPg=="
    }
}