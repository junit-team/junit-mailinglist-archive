{
    "topicId": 313, 
    "postDate": "980491270", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "&quot;Jakob Jenkov&quot; &lt;jakob@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "KCi-aVn2x8H-aa94SURri9uTEz9YsiVjYsAayb79lIHM3Ezppfw8XMnt5_N5MNrha7S7C8sqKPmQ9S5QTqtQonJF-JMvPP-f", 
    "nextInTime": 323, 
    "userId": 0, 
    "prevInTime": 321, 
    "prevInTopic": 321, 
    "headers": {
        "messageIdInHeader": "PDAwMTIwMWMwODc2MiRmODQ5YmEyMCQyNDAxYThjMEBqZW5rb3Y+", 
        "referencesHeader": "PDU5Mzk2QTYzMjJBN0Q0MTFBNDUxMDAwMkIzMEExMjJBNTcwMUVCQGVtYWlsLm1vZGVsdDEuY29tPg=="
    }, 
    "authorName": "Jakob Jenkov", 
    "numMessagesInTopic": 9, 
    "msgSnippet": "The biggest challenge about testing thread safety must be to simulate that one thread is preempted a a certain vulnerable point, while another thread is", 
    "contentTrasformed": false, 
    "msgId": 322, 
    "nextInTopic": 323, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;jakob@...&gt;\r\nX-Sender: jakob@...\r\nX-Apparently-To: junit@egroups.com\r\nReceived: (EGP: mail-7_0_2); 25 Jan 2001 21:57:46 -0000\r\nReceived: (qmail 29109 invoked from network); 25 Jan 2001 21:37:24 -0000\r\nReceived: from unknown (10.1.10.142) by l7.egroups.com with QMQP; 25 Jan 2001 21:37:24 -0000\r\nReceived: from unknown (HELO fe090.worldonline.dk) (212.54.64.152) by mta3 with SMTP; 25 Jan 2001 22:38:29 -0000\r\nReceived: (qmail 27233 invoked by uid 0); 25 Jan 2001 21:37:23 -0000\r\nReceived: from 54.ppp1-27.worldonline.dk (HELO jenkov) (212.54.83.54) by fe090.worldonline.dk with SMTP; 25 Jan 2001 21:37:23 -0000\r\nMessage-ID: &lt;001201c08762$f849ba20$2401a8c0@jenkov&gt;\r\nTo: &lt;junit@egroups.com&gt;\r\nReferences: &lt;59396A6322A7D411A4510002B30A122A5701EB@...&gt;\r\nSubject: Re: [junit] how to test if something is thread safe?\r\nDate: Thu, 25 Jan 2001 22:41:10 -0800\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative; boundary=&quot;----=_NextPart_000_000F_01C0871F.E9CAECA0&quot;\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.00.2615.200\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.00.2615.200\r\nFrom: &quot;Jakob Jenkov&quot; &lt;jakob@...&gt;\r\n\r\n\r\n------=_NextPart_000_000F_01C0871F.E9CAECA0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nThe biggest challenge about testing thread safety must be to simulate that =\r\none thread is preempted a a certain vulnerable point, while another thread =\r\nis accessing shared resources. I was thinking about having the first thread=\r\n sleep for some time at certain vulnerable points in the code,  giving othe=\r\nr threads time to access the shared resources, and see what happened. Unfor=\r\ntunately a thread can also be preempted in the middle of a Java instruction=\r\n like someCounter++, and there&#39;s no way to make a Java Thread sleep just af=\r\nter the someCounter has been read from memory, but before it has incremente=\r\nd it and written it back into memory. And that is exactly what we have expe=\r\nrienced will happen on a multiprocessor machine, that a thread is preempted=\r\n in the middle of a Java instruction!!\n\nJakob Jenkov\n\r\n------=_NextPart_000_000F_01C0871F.E9CAECA0\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n\n&lt;META content=3D&quot;text/html; charset=3Diso-8859-1&quot; http-equiv=3DContent-Typ=\r\ne&gt;\n&lt;META content=3D&quot;MSHTML 5.00.2614.3500&quot; name=3DGENERATOR&gt;\n&lt;STYLE&gt;&lt;/STYLE=\r\n&gt;\n&lt;/HEAD&gt;\n&lt;BODY bgColor=3D#ffffff&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The big=\r\ngest challenge about testing thread safety \nmust be to simulate that&nbsp;o=\r\nne thread is preempted a a certain vulnerable \npoint, while another thread =\r\nis accessing&nbsp;shared resources. I was thinking \nabout having the first =\r\nthread sleep for some time at certain vulnerable points \nin the code,  givi=\r\nng other threads time&nbsp;to access the shared resources, and \nsee what ha=\r\nppened. Unfortunately a thread can also be preempted in the middle of \na Ja=\r\nva instruction like someCounter++, and there&#39;s&nbsp;no way to make a Java \n=\r\nThread sleep just after the someCounter has been read from memory, but befo=\r\nre it \nhas incremented it and written it back into memory. And that is exac=\r\ntly what we \nhave experienced will happen on a multiprocessor machine, that=\r\n a thread is \npreempted in the middle of a Java instruction!!&lt;/FONT&gt;&lt;/DIV&gt;\n=\r\n&lt;DIV&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Jakob Jenkov&lt;/FONT&gt;&lt;/DIV=\r\n&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_000_000F_01C0871F.E9CAECA0--\r\n\n", 
    "subject": "Re: [junit] how to test if something is thread safe?"
}