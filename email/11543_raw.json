{
    "numMessagesInTopic": 18, 
    "nextInTime": 11544, 
    "senderId": "oAXMcQATIUtG5tWhpzVb41B-2CNGFXrPQI0H9TJqx6Y-Sg_2DeyxwfexVvsc_Vb-Pvtt7MfJNvWC7auiAYf7NurE0y7LVOL4Pcv_oF2Arw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Did my question get missed, somehow?", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... That depends: if I m testing whether I can pull a message from an incoming mail server and display it on a screen, I can fake all those things. Of course,", 
    "msgId": 11543, 
    "rawEmail": "Return-Path: &lt;jbrains@...&gt;\r\nX-Sender: jbrains@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 48830 invoked from network); 16 Jul 2004 19:48:46 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m22.grp.scd.yahoo.com with QMQP; 16 Jul 2004 19:48:46 -0000\r\nReceived: from unknown (HELO smtp102.rog.mail.re2.yahoo.com) (206.190.36.80)\n  by mta2.grp.scd.yahoo.com with SMTP; 16 Jul 2004 19:48:45 -0000\r\nReceived: from unknown (HELO ?192.168.1.119?) (jbrains@24.156.43.226 with plain)\n  by smtp102.rog.mail.re2.yahoo.com with SMTP; 16 Jul 2004 19:48:19 -0000\r\nMessage-ID: &lt;40F830E4.4010304@...&gt;\r\nDate: Fri, 16 Jul 2004 15:47:48 -0400\r\nUser-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;cd99mo+64r1@...&gt;\r\nIn-Reply-To: &lt;cd99mo+64r1@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Remote-IP: 206.190.36.80\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;\r\nSubject: Re: [junit] Re: Did my question get missed, somehow?\r\nX-Yahoo-Group-Post: member; u=127224993\r\nX-Yahoo-Profile: nails762\r\n\r\ncypherfox wrote:\n\n&gt;  &gt; Well of course not! I would /never/ do such a thing! I would just pull\n&gt;  &gt; out the &quot;read message&quot; part and test it in isolation. I do that all the\n&gt;  &gt; time, successfully, with JUnit.\n&gt; \n&gt; The problem is that &#39;read message&#39; talks to a persistent mail\n&gt; server.  It has to have a message on it to read.  It has to have\n&gt; a user on it to read the message to.  It has to have a mailbox\n&gt; to read the message in.  It has to have selected that mailbox.\n\nThat depends: if I&#39;m testing whether I can pull a message from an \nincoming mail server and display it on a screen, I can fake all those \nthings.\n\nOf course, if you&#39;re testing end-to-end for concurrency purposes, then I \nagree, and as we&#39;ve seen, that changes everything.\n\n&gt; Mock objects don&#39;t test the actual networking code, and\n&gt; require 1.5x the maintenance anyway.  (Interface changes,\n&gt; especially for code still under heavy development, need to be\n&gt; propogated not only to the test, but to the mock objects,\n&gt; constantly.)\n\nEven if it&#39;s 50% more maintenance, the tests would run, test what you \nneeded, and be much faster than trying to test message-reading logic \nagainst a real mail server. The overall cost is lower!\n\n&gt; I test from the bottom up, running the lowest layer of tests\n&gt; first.  If any level fails, I ignore the rest of the results until\n&gt; that layer is fixed.  However, since some information (like\n&gt; hostnames) is passed from the top layer all the way down,\n&gt; a bug in the top layer that generates a bad host name can\n&gt; only be caught by the bottom layer actually trying to do\n&gt; the work.\n\n&quot;caught by&quot; or &quot;thrown by&quot;? I think you mean to say &quot;I won&#39;t know the \nhostname is bad until I try to use it.&quot; Perhaps. Perhaps another \nalternative is to check the hostname at startup and generate a log \nwarning or error saying &quot;Could not reach mail server&quot;. That may or may \nnot be a fatal startup error. That may or may not be something useful. \nI&#39;m just spinning alternatives, here.\n\n&gt;  &gt; &gt;  &gt; [...deletia: arrange, act, assert...]\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; Done through the prior tests, and since they&#39;ve presumably\n&gt;  &gt; &gt; succeeded, the next test can run.\n&gt;  &gt;\n&gt;  &gt; With object-level testing, /each/ test contains the &quot;Arrange, act,\n&gt;  &gt; assert&quot; triad. In order for these tests to run quickly, each part must\n&gt;  &gt; run quickly, and it turns out that when you make that a goal, good\n&gt;  &gt; things happen. Different things than you&#39;re accustomed to, but good \n&gt; things.\n&gt; \n&gt; The problem here is that the information is on a\n&gt; server.  In order to arrange, I need to go through\n&gt; all the setup steps (create user, mailbox, message).\n&gt; \n&gt; How would you accelerate that, and still allow the\n&gt; readMessage test to actually test the networking\n&gt; code?\n\nThat you can&#39;t do; but then, to test message-reading logic, there&#39;s no \nneed to talk to the network.\n\n&gt;  &gt; &gt; E.g., The &#39;read message&#39;, which is the only thing of interest to the\n&gt;  &gt; &gt; testReadMessage method.\n&gt;  &gt;\n&gt;  &gt; Right. There should be absolutely no need to set up the system in a\n&gt;  &gt; complicated manner, just to read a message (whatever that means in this\n&gt;  &gt; context). Would you describe what &quot;read message&quot; does?\n&gt; \n&gt; Passes a request to a persistent IMAP-client thread which\n&gt; then queries the IMAP server for the message, and returns\n&gt; it, then its converted to XML.  That&#39;s a broad overview, it\n&gt; goes through several layers before that including some\n&gt; authentication, for example.\n\nI suppose you&#39;re threading because you don&#39;t want to block on the \nrequest for retrieving mail. Does your user actually do anything while \nwaiting for mail to be retrieved? (If you have freedom to block, you \nremove a layer of complexity.)\n\n&gt; [...deletia...]\n&gt;  &gt; Example: test #1 fails, and tests #2-#10 are now meaningless, because\n&gt;  &gt; #1&#39;s failure leaves the system in an undesirable, strange state. To me,\n&gt;  &gt; test failures ought not to affect one another.\n&gt; \n&gt; This is the heirarchical test argument, and I don&#39;t want to get into it,\n&gt; because I have a &#39;practical&#39; and &#39;theoretical&#39; side, and they disagree\n&gt; vigorously with each other on this one.  :)  For any system that talks\n&gt; to a persistent store, there is always going to be a tear-down state\n&gt; that has to be done.  If you don&#39;t allow it to talk to the persistent\n&gt; store, then you&#39;re not testing all your code.\n\nSure I&#39;m testing all my code. I&#39;m just choosing not to test JDBC at the \nsame time. JDBC works, for the most part; I don&#39;t need to test it. I \nonly need to know whether I use it correctly. Don&#39;t test the platform.\n\nI wish I had an open project of this type so that I could give it to you \nto hammer on for a while... maybe that would make it clear how what I do \ncould possibly work.\n\n&gt; [...deletia...]\n&gt; \n&gt;  &gt; &gt; Statics aren&#39;t an answer, and the framework forcing them on\n&gt;  &gt; &gt; tests is a failure in the framework.  I was hoping that wasn&#39;t\n&gt;  &gt; &gt; the answer.\n&gt;  &gt;\n&gt;  &gt; Statics aren&#39;t an answer, and having to use them is a failure in the\n&gt;  &gt; design of the production code.\n&gt;  &gt;\n&gt;  &gt; (It sounds silly when I state it that way, doesn&#39;t it?)\n&gt; \n&gt; Statics in production code would lead to an instant code\n&gt; review, group meeting, and a (probably private) chewing\n&gt; out of the author, for anything more than an m_instance\n&gt; for a singleton object.  No, it&#39;s not silly.  It&#39;s deadly serious\n&gt; when it comes to multi-threading, and it&#39;s a code smell in\n&gt; any other case.\n&gt; \n&gt; I strongly dislike having to use statics in my test suites, for\n&gt; those reasons, among others.\n\nClass-level data is not a code smell on its own. With greatest love and \nrespect, I find that statement utterly ridiculous.\n\nIf you are on a team that (rightly so) views any use of class-level data \nas suspicious, and you want to avoid suspicion, I understand; but I \nwould not routinely use that as a reason not to do what needs to be done.\n\n&gt;  &gt; I&#39;m afraid that /you/ have misread /me/.\n&gt;  &gt;\n&gt;  &gt; I wrote: &quot;your test is doing too much&quot;\n&gt;  &gt; You wrote: &quot;Each test is testing a single, basic unit...&quot;\n&gt;  &gt;\n&gt;  &gt; I didn&#39;t say that your test was /testing/ too much. I said that your\n&gt;  &gt; test is /doing/ too much. Here&#39;s the distinction: the &quot;too much&quot; that\n&gt;  &gt; your test is doing is jumping through hoops to set up global state that\n&gt;  &gt; such a test does not need to set up, /if/ you approach it slightly\n&gt;  &gt; differently.\n&gt; \n&gt; I&#39;m at a loss, I admit.  I need to test reading a message from a\n&gt; server.  How do I do that, without writing the message to the\n&gt; server first?  How do I test that the entire code path is working?\n\nTest /your/ code, and not the IMAP implementation--unless, of course, \nyou wrote the IMAP implementation. Even if you did write it, test /that/ \non its own, then trust that it works. Hide the IMAP implementation \nbehind an interface, then pretend it isn&#39;t there. If your fake behaves \nthe same way the actual implementation does, then how does its client \ntell the difference?\n\n&gt;  &gt; &gt; [...multithreaded tests...]\n&gt;  &gt;\n&gt;  &gt; [...deletia: suggest Silk Performer?...]\n&gt;  &gt;\n&gt;  &gt; I feel even more strongly now that JUnit is not the right tool for the\n&gt;  &gt; job you&#39;re trying to perform.\n&gt; \n&gt; It is the best tool available for it, but it IS doing a different\n&gt; scope of tests than JUnit intends, I now completely agree.\n&gt; However, JUnit is mere inches away from being usable for\n&gt; it, so I&#39;m probably going to make a local change to be\n&gt; able to do the tests I need.\n\nThen that sounds good.\n\n&gt; Silk Performer, Load Runner, and such, are all good tools,\n&gt; but they are for later in the process.\n\nI don&#39;t understand why, but it&#39;s your decision.\n&gt; \n&gt;  &gt; &gt; [...deletia: massiveTest calling storageTest repeatedly...]\n&gt;  &gt;\n&gt;  &gt; I imagine you could build your own test runner easily enough to execute\n&gt;  &gt; all the tests in a suite against the same fixture data.\n&gt; \n&gt; I&#39;d have to change TestSuite, rather than a test runner of my own,\n&gt; especially as I generally run the tests under IntelliJ, before checking\n&gt; in my code.\n\nDoes IntelliJ not make building plugins easy enough? I&#39;m just learning \nto write Eclipse plugins, myself. It seems a pretty useful skill.\n\n&gt;  &gt; I still think that simply using class-level data would suffice. I still\n&gt;  &gt; don&#39;t understand the objection. It appears that your tests are using\n&gt;  &gt; some external resource (like a database, mail server/client, whatever).\n&gt;  &gt; What&#39;s the difference between using an external resource and class-level\n&gt;  &gt; data? It&#39;s all global, from the test case&#39;s point of view. I don&#39;t\n&gt;  &gt; understand why using one would be any better or worse than using the \n&gt; other.\n&gt; \n&gt; Because statics don&#39;t work on a multi-threaded project, and\n&gt; in order to re-use test knowledge, I want to reuse the storage\n&gt; test case.\n\nWell, you seem to have a decision, and you seem to be ready to move \nforward. I have to wonder, though: why does a database work on a \nmultithreaded project, but class-level data does not? I&#39;ve seen plenty \nof projects that use multithreading, but nevertheless talk to a \ndatabase. Or maybe I got it wrong.\n\n&gt;  &gt; &gt; [...deletia: TestResult extensions...]\n&gt;  &gt; I /think/ I understand. There /are/ multithreaded extensions to JUnit,\n&gt;  &gt; although I&#39;ve never tried any of them. MTUnit comes to mind, although\n&gt;  &gt; that could be wrong. It may be worth examining.\n&gt; \n&gt; There are, and MTUnit (that&#39;s the one recently released?) does some\n&gt; very, very trippy things to work around TestResult results not being\n&gt; aggregatable.\n&gt; \n&gt; However, a good point was made, that doing the tests I&#39;m having\n&gt; trouble with are in the end, more functional than unit, and so not\n&gt; in the scope of JUnit.  I need this functionality *in* JUnit (because\n&gt; JUnit is supported by my toolchain), in order to do my testing\n&gt; quickly and easily before I do checkins, but it&#39;s not in the mission\n&gt; of JUnit to do this, so I shouldn&#39;t expect it from the framework.\n\nI don&#39;t think you /need/ to do it in JUnit. I think you could probably \ndo it in Ant (say), then run that before checkins. I admit, it would be \n/nice/ to do it with JUnit, but you may be making work for yourself by \ndeciding that it /must/ be that way.\n-- \nJ. B. Rainsberger,\nDiaspar Software Services\nhttp://www.diasparsoftware.com :: +1 416 791-8603\nLet&#39;s write software that people understand\n\n", 
    "profile": "nails762", 
    "topicId": 11495, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "prevInTime": 11542, 
    "contentTrasformed": false, 
    "postDate": "1090007268", 
    "canDelete": false, 
    "nextInTopic": 11550, 
    "prevInTopic": 11541, 
    "headers": {
        "inReplyToHeader": "PGNkOTltbys2NHIxQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQwRjgzMEU0LjQwMTAzMDRAcm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGNkOTltbys2NHIxQGVHcm91cHMuY29tPg=="
    }
}