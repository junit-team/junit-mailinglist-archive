{
    "numMessagesInTopic": 10, 
    "nextInTime": 24657, 
    "senderId": "cBQ5pN0IS3IWUsEXwVnIHZf0SVg-D-qNR9qefsVYuX_8gd7AnnV7OFfmlveJ34cvoerR13nl-3Lgmq8HrWSOTiKYAgTiyvj4TOU", 
    "systemMessage": false, 
    "subject": "Re: [junit] Custom classloader", 
    "from": "Dawid Weiss &lt;dawid.weiss@...&gt;", 
    "authorName": "Dawid Weiss", 
    "msgSnippet": "Perhaps the right question would be why do you need a custom class loader, Johannes? If it s separation of test suites from each other then even if it s ", 
    "msgId": 24656, 
    "topicId": 24651, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 223548916, 
    "messageBody": "<div id=\"ygrps-yiv-1764430944\"><div dir=\"ltr\"><br><div>Perhaps the right question would be why do you need a custom class loader, Johannes? </div><div><br></div><div>If it&#39;s separation of test suites from each other then even if it&#39;s technically feasible, it may eventually bite you (it&#39;s difficult to detect memory leaks, for example).</div><div><br></div><div>If I may point you at an alternative solution then Lucene/ Solr has a test harness that attempts to isolate tests from each other using other means (detecting stray threads left over after a test completes, detecting left-over assignments to static fields that contribute to OOMs, parallel execution of tests by forking suites to concurrent JVMs).</div><div><br></div><div>Dawid</div></div><div class=\"ygrps-yiv-1764430944gmail_extra\"><br><blockquote><span title=\"qreply\"> <div class=\"ygrps-yiv-1764430944gmail_quote\">On Mon, May 18, 2015 at 10:55 PM, Johannes Ernst <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:johannes.ernst@...\">johannes.ernst@...</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-1764430944gmail_quote\" style=\"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p>Thanks, Aaron. I’ve been poking around the code, and found that</p><div><br></div><div>1) it isn’t a supported use case</div><div>2) it probably wouldn’t be too hard to come up with a junit patch to enable it, assuming the entry point would be the API not main()</div><div><br></div><div>but also, given that I’m invoking junit from maven/surefire:</div><div><br></div><div>3) it would be much harder to convince maven’s surefire plugin to use a custom classloader and somehow pass it over to junit</div><div><br></div><div>So … unless some major work is done by two projects — surefire and junit — I think the answer to my question about whether it can be done is No.</div><div><br></div><div>P.S. If anybody is more knowledgeable about this than me (very easy to accomplish, I am not familiar with either code base), please correct me if I’m wrong.</div><div><br></div><div>Cheers,</div><div><br></div><div><br></div><div>Johannes.</div><span class=\"ygrps-yiv-1764430944\"><div><br><div><blockquote type=\"cite\"><div>On May 17, 2015, at 23:59, Aaron VonderHaar <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:gruen0aermel@...\">gruen0aermel@...</a> [junit] &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt; wrote:</div><br><div><div style=\"font-size:13px;font-family:Arial, helvetica, clean, sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;\"><div><div style=\"font-family:Georgia;\"><div style=\"margin:0px 0px 1em;\"><br></div><div dir=\"ltr\">I know the robolectric test runner [1] sets up a custom ClassLoader, but my understanding is that it has to do some weird things to make that work due to the fact that the test class has already been loaded by the time the TestRunner starts and as a result the classes being tested have already been loaded.  I don&#39;t know much about the details beyond that.<div><br></div><div>[1]: <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/robolectric/robolectric/blob/master/robolectric/src/main/java/org/robolectric/RobolectricTestRunner.java\">https://github.com/robolectric/robolectric/blob/master/robolectric/src/main/java/org/robolectric/RobolectricTestRunner.java</a></div></div><div class=\"ygrps-yiv-1764430944gmail_extra\"><br><div class=\"ygrps-yiv-1764430944gmail_quote\">On Thu, May 14, 2015 at 5:34 PM,<span> </span><a rel=\"nofollow\" target=\"_blank\" href=\"mailto:johannes.ernst@...\">johannes.ernst@...</a><span> </span>[junit]<span> </span><span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span><span> </span>wrote:<br><blockquote class=\"ygrps-yiv-1764430944gmail_quote\" style=\"margin:0px 0px 0px 4px;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;\"><u></u><div style=\"background-color:rgb(255,255,255);\"><span> </span><div><div><div><p style=\"margin:0px 0px 1em;\">I’d like need to use a custom ClassLoader for my tests. Can it be done?<br><br>Thanks,<br><br><br><br>Johannes.</p><p style=\"margin:0px 0px 1em;\"><span><br></span></p><div style=\"margin:0px 0px 1em;\"><br></div></div><div style=\"color:rgb(255,255,255);min-height:0px;\"></div></div></div></div></blockquote></div><br></div><div style=\"margin:0px 0px 1em;\"><br></div></div><div style=\"color:rgb(255,255,255);min-height:0px;\"></div></div></div></div></blockquote></div><br></div></span><p></p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br></span></blockquote></div>\n</div>", 
    "prevInTime": 24655, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1432018566", 
    "canDelete": false, 
    "nextInTopic": 24657, 
    "prevInTopic": 24655, 
    "headers": {
        "inReplyToHeader": "PEI1NDc4MUU2LUFGQUQtNDY5Ri04OUIxLTFCNzQ4OUEyNzkxM0BnbWFpbC5jb20+", 
        "messageIdInHeader": "PENBTTIxUnQ5WFF5QVhwaG92cD1jRWJLZVlSZ3gxPXRzMGZXb01WTzJlMUcyX0tDZXdxd0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PG1qM2V1YStqZ3Z2bGRAWWFob29Hcm91cHMuY29tPiA8Q0FNWmVjWG01b1ptS0hYc2RkNzB3Wk9nS3E4KzBGNUVpdnk1Q1pRZzFSeVlVcFVvZlFRQG1haWwuZ21haWwuY29tPiA8QjU0NzgxRTYtQUZBRC00NjlGLTg5QjEtMUI3NDg5QTI3OTEzQGdtYWlsLmNvbT4="
    }
}