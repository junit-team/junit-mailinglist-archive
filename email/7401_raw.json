{
    "numMessagesInTopic": 9, 
    "nextInTime": 7402, 
    "senderId": "P1qpG-ANFdrP9LFlei51gWLuZKELaN9dY6SZMyqgPyxfmJQUppNmqBuL-itMFeNvcocWjDfj5l-d3GpPNTNEl9FHpk6t6XEFSsHWqLG1yi-qh3qIQQ", 
    "systemMessage": false, 
    "subject": "Re: [junit] ThreadLocal", 
    "from": "&quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;", 
    "authorName": "Jeff Nielsen", 
    "msgSnippet": "This architecture did evolve from TDD.  Without the strong desire to test drive the development of all business methods in our EJB tier, I doubt that we", 
    "msgId": 7401, 
    "rawEmail": "Return-Path: &lt;jeff.nielsen@...&gt;\r\nX-Sender: jeff.nielsen@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 2 Apr 2003 04:41:31 -0000\r\nReceived: (qmail 1827 invoked from network); 2 Apr 2003 04:41:30 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m3.grp.scd.yahoo.com with QMQP; 2 Apr 2003 04:41:30 -0000\r\nReceived: from unknown (HELO smtp3-cm.mail.eni.net) (216.133.226.136)\n  by mta2.grp.scd.yahoo.com with SMTP; 2 Apr 2003 04:41:30 -0000\r\nReceived: from jnielsen2 (0-1pool40-152.nas36.philadelphia1.pa.us.da.qwest.net [65.129.40.152])\n\tby smtp3-cm.mail.eni.net (8.12.8p1/8.12.8) with SMTP id h324fQ7M018166\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 1 Apr 2003 20:41:28 -0800\r\nMessage-ID: &lt;05c701c2f8d2$4d6fd330$e705000a@jnielsen2&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;EX-20030325-153346-0005@...-missive1.fiserv.net&gt;\r\nSubject: Re: [junit] ThreadLocal\r\nDate: Tue, 1 Apr 2003 23:42:41 -0500\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4522.1200\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200\r\nFrom: &quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;\r\nX-Yahoo-Group-Post: member; u=65487161\r\nX-Yahoo-Profile: jeffreymads\r\n\r\nThis architecture did evolve from TDD.  Without the strong desire to &quot;test\ndrive&quot; the development of all &quot;business&quot; methods in our EJB tier, I doubt\nthat we would have come up with something like this.\n\nAs it is, it has turned out to have a lot of nice side benefits.  For\nexample, because we end up writing a &quot;mock&quot; implementation of the\npersistence API as well as any other external systems, we can run almost all\nof our apps without a database or even an internet connection (just by\nchanging a property file setting).  This makes it much easier to test, write\nsome code at home, etc.\n\n\n----- Original Message -----\nFrom: &quot;Shellman, Joel&quot; &lt;joel.shellman@...&gt;\nTo: &lt;junit@yahoogroups.com&gt;\nSent: Tuesday, March 25, 2003 4:30 PM\nSubject: RE: [junit] ThreadLocal\n\n\n&gt; Jeff, did you design this up front, or did this evolve from TDD (Test\nDriven Development)?\n&gt;\n&gt; I&#39;m curious as to what solution would naturally evolve out of TDD for this\n(and whether there is only one design that would given strict conformance to\ncertain guidelines). Extrapolating Kent Beck&#39;s example in his TDD book, one\nmight expect what Jeff has outlined below--with factories passed in to the\nconstructors since he refactored out duplication by passing it in to the\nconstructor (at least in a couple cases).\n&gt;\n&gt; One of the great benefits of passing in factories and collaborators is\nthat you can significantly increase the reuse and usefulness of each class.\nNew functionality could be added by simply passing in a different factory.\n&gt;\n&gt; Having said that, I&#39;ve used the ThreadLocal approach before and it seems\nto work fine both in production and for testing, but I&#39;m still a little\nuncomfortable with it from a design standpoint.\n&gt;\n&gt; Joel Shellman\n&gt;\n&gt;\n&gt; &gt; -----Original Message-----\n&gt; &gt; From: Jeff Nielsen\n&gt; &gt; Sent: Monday, March 24, 2003 5:24 PM\n&gt; &gt; To: junit@yahoogroups.com\n&gt; &gt; Subject: Re: [junit] ThreadLocal\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; A common pattern we use with our web apps is this.\n&gt; &gt;\n&gt; &gt; - Factories manage the creation of resources for the next\n&gt; &gt; level down (e.g., web tier -&gt; EJB tier, EJB tier -&gt; integration tier)\n&gt; &gt;\n&gt; &gt; - Classes that need to access/instantiate resources in a\n&gt; &gt; lower layer (e.g., an EJB that needs a DB connection) take a\n&gt; &gt; factory object at construction time.\n&gt; &gt;\n&gt; &gt; - The factories are configured at runtime using simple java\n&gt; &gt; property files (e.g., use.database=true, use.ejbs=false)\n&gt; &gt;\n&gt; &gt; - Test code can configure factories using parameters (e.g.,\n&gt; &gt; testFactory = new DataSourceFactory(false) . . . ) and pass\n&gt; &gt; these factories in to the\n&gt; &gt; object(s) under test.\n&gt; &gt;\n&gt; &gt; This allows us to ensure that tests always use the mock\n&gt; &gt; objects, without &quot;cluttering&quot; the production code with lots\n&gt; &gt; of conditional logic or extra method parameters.\n&gt; &gt;\n&gt; &gt; Jeff Nielsen\n&gt; &gt; Digital Focus\n&gt; &gt; www.digitalfocus.com\n&gt;\n&gt;\n&gt;\n&gt;       Yahoo! Groups Sponsor\n&gt;             ADVERTISEMENT\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; To unsubscribe from this group, send an email to:\n&gt; junit-unsubscribe@yahoogroups.com\n&gt;\n&gt;\n&gt; Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.\n&gt;\n&gt;\n\n\n", 
    "profile": "jeffreymads", 
    "topicId": 7316, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65487161, 
    "prevInTime": 7400, 
    "contentTrasformed": false, 
    "postDate": "1049258561", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 7381, 
    "headers": {
        "messageIdInHeader": "PDA1YzcwMWMyZjhkMiQ0ZDZmZDMzMCRlNzA1MDAwYUBqbmllbHNlbjI+", 
        "referencesHeader": "PEVYLTIwMDMwMzI1LTE1MzM0Ni0wMDA1QGV4Y2hhbmdlLmZpc2Vydi1taXNzaXZlMS5maXNlcnYubmV0Pg=="
    }
}