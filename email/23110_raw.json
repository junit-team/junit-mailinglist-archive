{
    "numMessagesInTopic": 22, 
    "nextInTime": 23111, 
    "senderId": "InPdVyoa81md7Fk2fC0NX6-z2DgLqwNTmHqsDjEe7pa_UcuY8tJ0Q4avwZ08DIb36U7YbwpsfU79Xo5eloTzCNAss_R5Ye90RK8", 
    "systemMessage": true, 
    "subject": "Re: [junit] Re: Unit testing a private method??", 
    "from": "Mike Forsberg &lt;bigmike.f@...&gt;", 
    "authorName": "Mike Forsberg", 
    "msgSnippet": "It is scary to hear of code that may have broken functionality in a private method while the caller methods do not reveal the classes brokenness.  If a private", 
    "msgId": 23110, 
    "rawEmail": "Return-Path: &lt;bigmike.f@...&gt;\r\nReceived: (qmail 18379 invoked from network); 5 Dec 2010 04:42:43 -0000\r\nReceived: from unknown (98.137.34.44)\n  by m6.grp.sp2.yahoo.com with QMQP; 5 Dec 2010 04:42:43 -0000\r\nReceived: from unknown (HELO n38b.bullet.mail.sp1.yahoo.com) (66.163.168.152)\n  by mta1.grp.sp2.yahoo.com with SMTP; 5 Dec 2010 04:42:43 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1291524163; bh=NSSf226IOx00xYKljE8cvTYLVSFrXWRq1S1WtygJu8s=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:MIME-Version:X-Received:X-Received:In-Reply-To:References:Date:Message-ID:To:X-Originating-IP:X-eGroups-Msg-Info:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:Content-Type:Content-Transfer-Encoding:X-YGroups-SubInfo:Sender:X-Yahoo-Newman-Property:X-eGroups-Approved-By:X-eGroups-Auth; b=tmhxx6gM92NOosdh17MASBbezhQtpEFGf1S5cwQZQF+5s6kXPi7DbVaZMJatkkRGJXrrnwW9NSTVqJ+v0lwO/4omhCrsmVO8tkkvD+qm9wh8R9xFkOaDYrteBUzZoNo8\r\nReceived: from [69.147.65.148] by n38.bullet.mail.sp1.yahoo.com with NNFMP; 05 Dec 2010 04:42:43 -0000\r\nReceived: from [98.137.34.184] by t11.bullet.mail.sp1.yahoo.com with NNFMP; 05 Dec 2010 04:42:43 -0000\r\nX-Sender: bigmike.f@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 85788 invoked from network); 5 Dec 2010 00:17:38 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m6.grp.sp2.yahoo.com with QMQP; 5 Dec 2010 00:17:38 -0000\r\nX-Received: from unknown (HELO mail-yw0-f50.google.com) (209.85.213.50)\n  by mta1.grp.sp2.yahoo.com with SMTP; 5 Dec 2010 00:17:37 -0000\r\nX-Received: by ywo7 with SMTP id 7so5910062ywo.23\n        for &lt;junit@yahoogroups.com&gt;; Sat, 04 Dec 2010 16:17:37 -0800 (PST)\r\nMIME-Version: 1.0\r\nX-Received: by 10.151.82.11 with SMTP id j11mr6558047ybl.424.1291508256296; Sat,\n 04 Dec 2010 16:17:36 -0800 (PST)\r\nX-Received: by 10.151.155.18 with HTTP; Sat, 4 Dec 2010 16:17:36 -0800 (PST)\r\nIn-Reply-To: &lt;AANLkTimkEcUePAEyQ-3=Nv0nnVyusNxMOrU=b-fbt=4E@...&gt;\r\nReferences: &lt;AANLkTinA9Ph9EXK+yb5A9eoXghnC01gLywgNURAQyHq3@...&gt;\n\t&lt;iddkvd+6ice@...&gt;\n\t&lt;AANLkTimkEcUePAEyQ-3=Nv0nnVyusNxMOrU=b-fbt=4E@...&gt;\r\nDate: Sat, 4 Dec 2010 18:17:36 -0600\r\nMessage-ID: &lt;AANLkTimgdiOOAZFbpmoQyGJHRyF0poHuFLiiMG8vguDh@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Mike Forsberg &lt;bigmike.f@...&gt;\r\nSubject: Re: [junit] Re: Unit testing a private method??\r\nX-Yahoo-Group-Post: member; u=421392598; y=cwH_Uskd0KYr7o9pgkLityt6z5hthaon8YqhlgvKhKGP2iwN\r\nX-Yahoo-Profile: bigmike_f\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 05 Dec 2010 04:42:42 -0000\r\n\r\nIt is scary to hear of code that may have broken functionality in a private=\r\n\nmethod while the caller methods do not reveal the classes brokenness.  If =\r\na\nprivate method were performing incorrectly, yet all the functionality\nexp=\r\nosed at the protected level and above works correctly, one would have to\nas=\r\nk, &quot;What is the man behind the curtain really doing?&quot;.\n\nIn a slightly diffe=\r\nrent vain, if a developer were writing tests as sign\nposts to signify that =\r\nan error has occurred, shouldn&#39;t that sign post be\nviewable at a higher the=\r\nn private level.\n\nConsider a public API that is tested thoroughly and is fu=\r\nnctionally\ncorrect.  Yet, there is a private method that still has a functi=\r\nonal error.\nThis should be a signal that the extra incorrect functionality =\r\nis\nunreachable or unnecessary.\n\nIn regards to... why do unit testing at all=\r\n if everything is tested through\nfunctional testing.\n\nPersonally, if I coul=\r\nd get every scenario to run at the\nintegration/functional level within the =\r\ntime I can run my unit tests, I&#39;d\nonly write unit tests to track down why t=\r\nhe higher level tests are failing.\nIn this amazing world, a unit test would=\r\n only be needed to track down a bug\nsince my brain is not big enough to hol=\r\nd the whole system in it&#39;s mind.\nHowever, once the bug is fixed, the unit t=\r\nest can grow stale.  As I&#39;d be\nassured that every possible scenario is test=\r\ned.\n\nFor me, the reality is that customers don&#39;t care that\n- every method p=\r\nerforms correctly\n- a given method supplies incorrect answers in certain co=\r\nnditions\nThey only care that the result they need is correct when they need=\r\n it.\n\nSince it is the customer that is paying me, I&#39;d rather only care what=\r\n they\ncare about.\n\nMaking a rough calculation that\n- The price of enough ma=\r\nchines to run every integration/functional test\nwithin a reasonable amount =\r\nof time is too much money.\n- I don&#39;t write perfect code, and I&#39;d most likel=\r\ny need targeted tests that\ncan run parts of the system in case there is a b=\r\nug.\n- Since I know what I&#39;m changing when I change it, I can keep a\ncorresp=\r\nonding set of tests up-to-date with the code changes.\nIt behooves me to kee=\r\np some unit tests laying around.\n\nThen, since they are laying around and ar=\r\ne up-to-date, why not run all the\nones above the code that I&#39;m changing.  A=\r\nnd thus I keep a set of unit tests\nfor each class.  Should I run all the un=\r\nit test?  Nope, if their code was\nnot touched, then they should still pass.=\r\n  If it is the case that the tests\nmight fail, then I might have bad archit=\r\necture or class design.\n\nMy two cents,\n\nBig Mike\n\n\n2010/12/4 C=C3=A9dric Be=\r\nust =E2=99=94 &lt;cedric@...&gt;\n\n&gt;\n&gt;\n&gt; On Sat, Dec 4, 2010 at 6:58 AM, mph=\r\nilipp1982 &lt;mphilipp82@...&lt;mphilipp82%40gmail.com&gt;&gt;\n&gt; wrote:\n&gt;\n&gt; &gt;\n&gt; &gt;=\r\n\n&gt; &gt; I absolutely agree with Charlie. Lasse Koskela recently blogged about\n=\r\n&gt; this\n&gt; &gt; issue here:\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; http://lassekoskela.com/thoughts/24/te=\r\nst-everything-but-not-private-methods/\n&gt;\n&gt; Sorry, but Lasse seems to disagr=\r\nee with both Charlie and myself. He&#39;s\n&gt; saying\n&gt; that you should never test=\r\n private methods directly, only indirectly\n&gt; through\n&gt; public methods.\n&gt;\n&gt; =\r\nI find this angle puzzling, since as I said above, if you follow this\n&gt; rea=\r\nsoning, since all your code is already being tested indirectly by\n&gt; functio=\r\nnal testing, why do unit testing at all?\n&gt;\n&gt; The main reason why I sometime=\r\ns want to test private methods is not fear,\n&gt; as\n&gt; Lasse claims, but simply=\r\n the fact that this functionality can break.\n&gt; Therefore, it deserves a tes=\r\nt of its own.\n&gt;\n&gt; There are two extreme ways to test private methods, both =\r\nbad:\n&gt;\n&gt; - Use reflection + setAccessible. Very fragile, avoid.\n&gt; - Use pub=\r\nlic methods that call this private method. Not good enough.\n&gt;\n&gt; I tend to f=\r\navor the middle ground approach, which is to relax the scope of\n&gt; the metho=\r\nd so that tests can see it. Making it package protected and\n&gt; putting\n&gt; a c=\r\nomment (&quot;/* for testing */&quot;) usually works, but if it doesn&#39;t, I don&#39;t\n&gt; ha=\r\nve a problem with making this method public for testing.\n&gt;\n&gt; --\n&gt; C=C3=A9dr=\r\nic\n&gt;\n&gt;\n&gt; [Non-text portions of this message have been removed]\n&gt;\n&gt;  \n&gt;\n\n\n[N=\r\non-text portions of this message have been removed]\n\n\n", 
    "profile": "bigmike_f", 
    "topicId": 23073, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 421392598, 
    "prevInTime": 23109, 
    "contentTrasformed": false, 
    "postDate": "1291508256", 
    "canDelete": false, 
    "nextInTopic": 23111, 
    "prevInTopic": 23109, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGlta0VjVWVQQUV5US0zPU52MG5uVnl1c054TU9yVT1iLWZidD00RUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGltZ2RpT09BWkZicG1vUXlHSkhSeUYwcG9IdUZMaWlNRzh2Z3VEaEBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PEFBTkxrVGluQTlQaDlFWEsreWI1QTllb1hnaG5DMDFnTHl3Z05VUkFReUhxM0BtYWlsLmdtYWlsLmNvbT4JPGlkZGt2ZCs2aWNlQGVHcm91cHMuY29tPgk8QUFOTGtUaW1rRWNVZVBBRXlRLTM9TnYwbm5WeXVzTnhNT3JVPWItZmJ0PTRFQG1haWwuZ21haWwuY29tPg=="
    }
}