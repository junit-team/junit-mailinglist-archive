{
    "numMessagesInTopic": 287, 
    "nextInTime": 17822, 
    "senderId": "Se-8j49_dBVWLucl8AVSXofwamRiR2Wx9jcQC4wckRXSRPMMhh1MriYtwpIr_EJjcbprsTpcR24RveuOCFqewxmrsT_L3RYA3Hs", 
    "systemMessage": true, 
    "subject": "Re: Test-friendly, but not caller-friendly?", 
    "from": "&quot;belugabrain&quot; &lt;bob@...&gt;", 
    "authorName": "belugabrain", 
    "msgSnippet": "... receive ... or you ... have ... The point ... to ... defective ... sensible ... specific ... leads ... that my ... all the ... best ROI ... me, I ... cost", 
    "msgId": 17821, 
    "profile": "belugabrain", 
    "topicId": 17266, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 226843231, 
    "messageBody": "<div id=\"ygrps-yiv-1055012143\">--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Michael Feathers &lt;mfeathers@...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; J. B. Rainsberger wrote:<br/>\n&gt; <br/>\n&gt; &gt;Michael Feathers wrote:<br/>\n&gt; &gt;  <br/>\n&gt; &gt;<br/>\n&gt; &gt;&gt;But back to your original point: &quot;It might sometimes be a<br/>\n&gt; &gt;&gt;NullPointerException or something else instead, but advertising a<br/>\n&gt; &gt;&gt;precondition is not an excuse for misbehavior just because you <br/>\n </span></blockquote>receive<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt;bad data.&quot; Under DbC, it is. Fact is, if your precondition fails <br/>\n </span></blockquote>or you<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt;get a NullPointerException, there&#39;s a bug in the client. You can <br/>\n </span></blockquote>have<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt;checking enabled, or not, but checking is not error handling. <br/>\n </span></blockquote>The point<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt;of DbC is to build software robust enough so that you don&#39;t have <br/>\n </span></blockquote>to<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;&gt;write error handling code at each level. Relevant section is 11.6<br/>\n&gt; &gt;&gt;&quot;Assertions are not an input checking mechanism.&quot;<br/>\n&gt; &gt;&gt;    <br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;Indeed. If I violate your precondition, then I am writing <br/>\n </span></blockquote>defective<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;code. There are a few remedies:<br/>\n&gt; &gt;<br/>\n&gt; &gt;1. Be nice and tolerate my indiscretion, say by substituting <br/>\n </span></blockquote>sensible<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;default values and continuing.<br/>\n&gt; &gt;<br/>\n&gt; &gt;2. Telling me directly, &quot;You shouldn&#39;t do that,&quot; by throwing a <br/>\n </span></blockquote>specific<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;exception that explains my mistake.<br/>\n&gt; &gt;<br/>\n&gt; &gt;3. Telling me indirectly, by failing is some deterministic, by<br/>\n&gt; &gt;non-obvious way.<br/>\n&gt; &gt;<br/>\n&gt; &gt;4. Providing me examples of how not to violate your precondition.<br/>\n&gt; &gt;<br/>\n&gt; &gt;5. Documenting the precondition and warning me that violating it <br/>\n </span></blockquote>leads <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;to &quot;undefined behavior&quot;.<br/>\n&gt; &gt;<br/>\n&gt; &gt;6. Providing Contract Tests that I can inherit to help me know <br/>\n </span></blockquote>that my <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;code won&#39;t violate your precondition.<br/>\n&gt; &gt;<br/>\n&gt; &gt;There are others, I&#39;m sure.<br/>\n&gt; &gt;<br/>\n&gt; &gt;It looks as though you reject #5 out of hand, and I agree, but <br/>\n </span></blockquote>all the <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;others are viable choices. I would choose the one providing the <br/>\n </span></blockquote>best ROI <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;for the situation. In a language that checks preconditions for <br/>\n </span></blockquote>me, I <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;would get #2 for free. In Java, which doesn&#39;t, it depends on the <br/>\n </span></blockquote>cost of <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;violating the precondition. If it&#39;s anything like persistent data <br/>\n&gt; &gt;corruption all the way up to loss of life, I would probably <br/>\n </span></blockquote>insist on <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;#2. If it&#39;s nothing worse than having to retry one of a batch of <br/>\n&gt; &gt;transactions, I might go with #1. Still, I would probably insist <br/>\n </span></blockquote>on #4 <br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;and prefer #6.<br/>\n&gt; &gt;  <br/>\n&gt; &gt;<br/>\n&gt; Joe,<br/>\n&gt; <br/>\n&gt; I&#39;ll answer this assuming that you&#39;re talking about API code, not <br/>\n&gt; application code.  If that&#39;s not the case, let me know.<br/>\n&gt; <br/>\n&gt; In some systems #1 is the best answer, but those situations are <br/>\n </span></blockquote>rare <br/>\n<blockquote><span title=\"ireply\"> &gt; and, as a strategy, it can lead to misunderstandings..  #2 and #4 <br/>\n </span></blockquote>are <br/>\n<blockquote><span title=\"ireply\"> &gt; great strategies and I like #6 as well. <br/>\n&gt; <br/>\n&gt; I think it&#39;s interesting to talk about #5, though.    In nearly <br/>\n </span></blockquote>every <br/>\n<blockquote><span title=\"ireply\"> &gt; other area of life, we deal with warranties and license agreements <br/>\n </span></blockquote>in <br/>\n<blockquote><span title=\"ireply\"> &gt; which we explicitly assume responsibility for our use of products <br/>\n </span></blockquote>and <br/>\n<blockquote><span title=\"ireply\"> &gt; services.  In software we often try to protect clients from <br/>\n </span></blockquote>themselves <br/>\n<blockquote><span title=\"ireply\"> &gt; and don&#39;t consider notice a fair grant of responsibility.<br/>\n&gt; <br/>\n&gt; The fact is, it isn&#39;t universally true.  Lots of luck having Win32 <br/>\n </span></blockquote>save <br/>\n<blockquote><span title=\"ireply\"> &gt; you from violations of its preconditions, for instance. :-)<br/>\n&gt; <br/>\n&gt; Frankly, I wouldn&#39;t want to have only #5 at the API level, but I <br/>\n </span></blockquote>think <br/>\n<blockquote><span title=\"ireply\"> &gt; that this tendency we have to believe that we can not have an <br/>\n </span></blockquote>agreement <br/>\n<blockquote><span title=\"ireply\"> &gt; with users that is not enforced by code leads to a great deal of <br/>\n&gt; trouble. Particularly in the area of visibility.. many developers <br/>\n </span></blockquote>assume <br/>\n<blockquote><span title=\"ireply\"> &gt; that no written agreement can be sufficient if something is made <br/>\n&gt; public.  I think that the issue is that we are not used to <br/>\n </span></blockquote>thinking <br/>\n<blockquote><span title=\"ireply\"> &gt; about agreements beyond the code and we&#39;re not used to holding <br/>\n </span></blockquote>people to <br/>\n<blockquote><span title=\"ireply\"> &gt; them.<br/>\n&gt; <br/>\n&gt; There are some exceptions.  One is the Eclipse API Rules of <br/>\n </span></blockquote>Engagement: <br/>\n<blockquote><span title=\"ireply\"> &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.eclipse.org/articles/Article-API%20use/eclipse-api-\">http://www.eclipse.org/articles/Article-API%20use/eclipse-api-</a><br/>\n </span></blockquote>usage-rules.html<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; It&#39;s a contract above the code and it has some great ideas.  I <br/>\n </span></blockquote>really <br/>\n<blockquote><span title=\"ireply\"> &gt; like the idea of &quot;soft final&quot; for instance.  It&#39;s like a license <br/>\n&gt; agreement.. you can do this (subclass and override, etc) and we <br/>\n </span></blockquote>won&#39;t <br/>\n<blockquote><span title=\"ireply\"> &gt; prevent you, but if you break the rules we can&#39;t be responsible <br/>\n </span></blockquote>for you.<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; Michael Feathers<br/>\n&gt; www.objectmentor.com<br/>\n&gt;<br/>\n<br/>\n </span></blockquote>#1 doesn&#39;t help anybody, in the long-term.<br/>\nIt doesn&#39;t inform the client that they messed up, but merely lulls <br/>\nthem into a false sense of security that their code is fine.<br/>\nThere&#39;s not often a sensible default to use - and if there was, it <br/>\nprobably wouldn&#39;t be to the client&#39;s liking anyway.<br/>\nThe best example I can think of for how meeting criteria #1 can <br/>\nbackfire is the behaviour of Internet Explorer. Give it some HTML <br/>\nwith a missing &lt;/td&gt; tag and it will silently provide one for you.<br/>\nAll this has done is to relieve thousands of web developers from the <br/>\nresponsibility of ensuring that they produce correct markup.<br/>\nIt really is a case of treating the symptoms whilst allowing the <br/>\ndisease to spread in an unchecked manner.<br/>\n#5 covers a vast majority of cases - as Michael points our, we deal <br/>\nwith &#39;terms and conditions&#39; in so many other parts of our life, why <br/>\nnot do so whlst carry out our chosen profession.<br/>\n<br/>\nBob<br/>\n<br/>\nP.S. If we were to implement #1, surely it would be documented by #5?</div>", 
    "prevInTime": 17820, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1157529919", 
    "canDelete": false, 
    "nextInTopic": 17822, 
    "prevInTopic": 17820, 
    "headers": {
        "inReplyToHeader": "PDQ0RkUzQ0UwLjIwOTA0MDJAbWluZHNwcmluZy5jb20+", 
        "messageIdInHeader": "PGVkbHZmditrdGNtQGVHcm91cHMuY29tPg=="
    }
}