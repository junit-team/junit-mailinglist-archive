{
    "numMessagesInTopic": 4, 
    "nextInTime": 5954, 
    "senderId": "tDGeCZaHMc5c2e9qgsyIZ2dLMYcnHUg-MJqJfPLOcLSfmoSr8CcLSb1R405D_daWONkhxAsCDkBLvZ-bn6_3qLlUAR993nhUx8h1oabzIBglwRCl", 
    "systemMessage": false, 
    "subject": "Re: [junit] Unrelated effects - newbie ignorance", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "So said  cdtmp  on  2002-10-06 ... complex. First, let me answer the direct question. As a first suggestion, if you re interested in verifying the sequence of", 
    "msgId": 5953, 
    "rawEmail": "Return-Path: &lt;jbr@...&gt;\r\nX-Sender: jbr@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_2_0); 7 Oct 2002 16:49:26 -0000\r\nReceived: (qmail 29030 invoked from network); 7 Oct 2002 16:49:26 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m13.grp.scd.yahoo.com with QMQP; 7 Oct 2002 16:49:26 -0000\r\nReceived: from unknown (HELO fep03-mail.bloor.is.net.cable.rogers.com) (66.185.86.73)\n  by mta2.grp.scd.yahoo.com with SMTP; 7 Oct 2002 16:49:26 -0000\r\nReceived: from siferra ([24.42.96.247])\n          by fep03-mail.bloor.is.net.cable.rogers.com\n          (InterMail vM.5.01.05.06 201-253-122-126-106-20020509) with ESMTP\n          id &lt;20021007164905.RSDP4286.fep03-mail.bloor.is.net.cable.rogers.com@siferra&gt;\n          for &lt;junit@yahoogroups.com&gt;; Mon, 7 Oct 2002 12:49:05 -0400\r\nMessage-ID: &lt;200210071248180115.00518E07@smtp&gt;\r\nIn-Reply-To: &lt;ano1o6+endq@...&gt;\r\nReferences: &lt;ano1o6+endq@...&gt;\r\nX-Mailer: Calypso Version 3.30.00.00 (4)\r\nDate: Mon, 07 Oct 2002 12:48:18 -0400\r\nTo: junit@yahoogroups.com\r\nSubject: Re: [junit] Unrelated effects - newbie ignorance\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\nX-Authentication-Info: Submitted using SMTP AUTH LOGIN at fep03-mail.bloor.is.net.cable.rogers.com from [24.42.96.247] using ID &lt;srainsberger5790@...&gt; at Mon, 7 Oct 2002 12:48:54 -0400\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;\r\nReply-To: jbr@...\r\nX-Yahoo-Group-Post: member; u=89240252\r\nX-Yahoo-Profile: nails762\r\n\r\nSo said  cdtmp  on  2002-10-06 \n\n&gt;I&#39;d appreciate some pointers (even pointers to the manual since I\n&gt;can&#39;t find this in there).  \n&gt;\n&gt;I have an situation where the effect of a method is to send (or not to\n&gt;send) a message through either a serial port, socket or similar.\n&gt;\n&gt;The behavior is controlled by a (number of) well defined state\n&gt;diagrams. Summarizing a huge specification, messages are sent through\n&gt;the ports based on transitions and the exisiting state of hierachical\n&gt;state diagrams.  The situation seems ideal for unit testing since the\n&gt;whole environment is complex and unit testing would ensure that the\n&gt;messages sent, based on the state transitions are correct after\n&gt;modifications and we could automatically test a huge number of cases.\n&gt; It&#39;s not actually _what_ is sent, since that can be tested, but it&#39;s\n&gt;that the correct sequence of messages was requested to be sent (based,\n&gt;in this case, on string identifiers).\n&gt;\n&gt;My problem is that the state of the object after the call is the same\n&gt;as before the call, or at least the sending of the message is not, and\n&gt;cannot easily be indicated in the state of the object without changing\n&gt;the runtime behavior of the object.\n&gt;\n&gt;I hope all this makes sense.  I&#39;d appreciate any suggestions.  My only\n&gt;thought for checking this is something like a log file, or Log4J\n&gt;logger.  After the test I could check the logger and make sure that it\n&gt;contains _exactly_ what I would expect - but this seems somewhat\ncomplex.\n\nFirst, let me answer the direct question. As a first suggestion, if\nyou&#39;re interested in verifying the sequence of events, then you\nprobably need a way to log the events. I suggest logging them in memory\nby using an event/listener design. In the simplest case, use a\ncollecting parameter in the constructor of the object you want to\nobserve, then have that object signal events to the collector as things\nhappen. At the end of the test, verify that the collector has collected\nthe expected events in the expected order. If you prefer not to change\nthe object under test, then you can certainly create a decorator of the\nobject under test and separate the event-firing into that decorator.\n(You may want to do that anyway.)\n\nTo test:\n\nclass MessageSender {\n    sendMessage(message) { ... }\n    ...\n}\n\nYou write:\n\nclass MessageSpy extends MessageSender {\n    Collection messages;\n\n    sendMessage(message) {\n        messages.add(message);\n        super.sendMessage(message);\n    }\n}\n\nNow you can create a MessageSpy in your tests and test that the\nmessages are sent as expected.\n\nNow the next part of the message: if you&#39;re testing that a sequence of\nmessages is correct, that points to testing something bigger than you&#39;d\nlike to test. Although sometimes you do actually want to test that a\nsequence of messages is correct, often what you really want to test is\nthat in situation X under conditions Y, when Z happens, the object\nsends message M. It is usually better to test based on observable\nbehavior than to test based on knowledge of the order in which code\nexecutes. The latter is less resistant to change.\n\nJust food for thought; not a critique of what you&#39;re doing. :)\n\nTake care,\n\nJ. B. Rainsberger,\nPresident, Diaspar Software Services\nLet&#39;s write software that people understand.\nhttp://www.diasparsoftware.com/\ntelephone: +1 416 791-8603\nAll correspondence (c) 2002 Diaspar Software Services.\nIf you want to use it, just ask; don&#39;t steal.\n\n\n\n", 
    "profile": "nails762", 
    "topicId": 5949, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "prevInTime": 5952, 
    "contentTrasformed": false, 
    "postDate": "1034009298", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 5952, 
    "headers": {
        "inReplyToHeader": "PGFubzFvNitlbmRxQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIwMDIxMDA3MTI0ODE4MDExNS4wMDUxOEUwN0BzbXRwPg==", 
        "referencesHeader": "PGFubzFvNitlbmRxQGVHcm91cHMuY29tPg=="
    }
}