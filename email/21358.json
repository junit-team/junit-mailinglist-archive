{
    "numMessagesInTopic": 16, 
    "nextInTime": 21359, 
    "senderId": "UJY7GFYNgYCz3L10JeyW4soAjhAW1FPk9ZbtPh5zdXQ_Rj_nBDnFgKlodb1XVGmuIvJyEXV3IDXk-68B4R60UDB6kMbS733BLqO1e5orIRI", 
    "systemMessage": false, 
    "subject": "Re: Conditionally running tests", 
    "from": "&quot;yme0987654321&quot; &lt;yme0987654321@...&gt;", 
    "authorName": "yme0987654321", 
    "msgSnippet": "That is certainly doable, but I was hoping to use this technique for other types of test segregation going forward. That is besides DBTests (as in tests that", 
    "msgId": 21358, 
    "profile": "yme0987654321", 
    "topicId": 21356, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 386557907, 
    "messageBody": "<div id=\"ygrps-yiv-967835919\">That is certainly doable, but I was hoping to use this technique for<br/>\nother types of test segregation going forward. That is besides DBTests<br/>\n(as in tests that really test a stored procedure or view), I<br/>\npotentially have integration tests, performance tests and possibly<br/>\nin-container tests, and to start segregating everything by directory<br/>\ngets a little much.<br/>\n<br/>\nAlso, it is hard to tell in our IDE (Intellij IDEA) where a given<br/>\nclass resides in the directory structure, so knowing by looking at the<br/>\nclass if it runs in a given group would be a little bit harder than it<br/>\nshould be.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, Colin Vipurs &lt;zodiaczx6@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; Have you considered placing these tests in a seperate directory<br/>\nstructure to<br/>\n&gt; your normal tests so they can be selected as a group to be run?<br/>\n&gt; <br/>\n&gt; Say currently you have:<br/>\n&gt; <br/>\n&gt; src/<br/>\n&gt; test/<br/>\n&gt; <br/>\n&gt; You then use something like slowtests/, dbtests/ etc.<br/>\n&gt; <br/>\n&gt; On Tue, Feb 17, 2009 at 3:54 AM, yme0987654321 &lt;yme0987654321@...&gt;wrote:<br/>\n&gt; <br/>\n&gt; &gt;   Hi,<br/>\n&gt; &gt;<br/>\n&gt; &gt; I&#39;ve tried looking around the group but I haven&#39;t seen an answer to<br/>\n&gt; &gt; this. I&#39;m trying to set up a group of tests that runs only under<br/>\n&gt; &gt; certain circumstances. Because they are database tests, they have<br/>\n&gt; &gt; expensive setup and teardown procedures (via DBUnit), so they are<br/>\n&gt; &gt; segregated to run separately. The way to get that done seems to be via<br/>\n&gt; &gt; a separate runner, so I hacked up a class that looks like this:<br/>\n&gt; &gt; (Inspiration from here:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://schuchert.wikispaces.com/CustomJunit4RunnerJUnit4_4\">http://schuchert.wikispaces.com/CustomJunit4RunnerJUnit4_4</a> but that<br/>\n&gt; &gt; example no longer applies to the 4.5 API):<br/>\n&gt; &gt;<br/>\n&gt; &gt; public class SlowTestRunner extends Runner {<br/>\n&gt; &gt;<br/>\n&gt; &gt; private Runner runner;<br/>\n&gt; &gt; private Class&lt;?&gt; klass;<br/>\n&gt; &gt;<br/>\n&gt; &gt; public SlowTestRunner(Class&lt;?&gt; klass, RunnerBuilder builder)<br/>\n&gt; &gt; throws Throwable {<br/>\n&gt; &gt; this.klass = klass;<br/>\n&gt; &gt; if (Boolean.getBoolean(&quot;RunSlowTests&quot;)) {<br/>\n&gt; &gt; runner = getAppropriateRunner(builder);<br/>\n&gt; &gt; } else {<br/>\n&gt; &gt; runner = new IgnoredClassRunner(klass);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; private Runner getAppropriateRunner(RunnerBuilder builder) {<br/>\n&gt; &gt; List&lt;RunnerBuilder&gt; builders = Arrays.asList(<br/>\n&gt; &gt; new IgnoredBuilder(),<br/>\n&gt; &gt; new AnnotatedBuilder(builder),<br/>\n&gt; &gt; new SuiteMethodBuilder(),<br/>\n&gt; &gt; new JUnit3Builder(),<br/>\n&gt; &gt; new JUnit4Builder());<br/>\n&gt; &gt;<br/>\n&gt; &gt; for (RunnerBuilder each : builders) {<br/>\n&gt; &gt; Runner runner = each.safeRunnerForClass(klass);<br/>\n&gt; &gt; if (runner != null && runner.getClass() != this.getClass())<br/>\n&gt; &gt; return runner;<br/>\n&gt; &gt; }<br/>\n&gt; &gt; //this is actually never going to happen, at least in the<br/>\n&gt; &gt; current implementation because the JUnit4Builder is the Builder of<br/>\n&gt; &gt; last resort.<br/>\n&gt; &gt; return new ErrorReportingRunner(klass, new<br/>\n&gt; &gt; InitializationError(&quot;Unable to find suitable runner to delegate for &quot;<br/>\n&gt; &gt; + klass.getName()));<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; public Description getDescription() {<br/>\n&gt; &gt; return runner.getDescription();<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; public void run(RunNotifier notifier) {<br/>\n&gt; &gt; runner.run(notifier);<br/>\n&gt; &gt; }<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; The method getAppropriateRunner is basically a copy/paste from<br/>\n&gt; &gt; AllDefaultPossibilitiesBuilder. I had to copy paste because the<br/>\n&gt; &gt; protected method forced a return of an AnnotatedBuilder, instead of<br/>\n&gt; &gt; just a RunnerBuilder, so overriding wasn&#39;t working well. Note the case<br/>\n&gt; &gt; here is that I&#39;m not sure if the class is a JUnit3 or 4 class, and I<br/>\n&gt; &gt; want to support both with one runner.<br/>\n&gt; &gt;<br/>\n&gt; &gt; At first I tried to just do a runnerForClass on builder passed to the<br/>\n&gt; &gt; constructor, but that causes an infinite loop, because the class has<br/>\n&gt; &gt; the RunWith annotation on it that references the very same Runner.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Am I correct that the API isn&#39;t naturally supporting what I am trying<br/>\n&gt; &gt; to do, or is there another way to accomplish this?<br/>\n&gt; &gt;<br/>\n&gt; &gt;  <br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; -- <br/>\n&gt; Well, as long as you&#39;re in my house, you&#39;ll do what I do, and<br/>\nbelieve what I<br/>\n&gt; believe. So butter your bacon! Bacon that sausage!<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21357, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1234882206", 
    "canDelete": false, 
    "nextInTopic": 21359, 
    "prevInTopic": 21357, 
    "headers": {
        "inReplyToHeader": "PDExYjU5NjBkMDkwMjE3MDIzM20yZTUyNzU1YXI5MTg3ZDE4MzZmNDhkMjc2QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGduZWlxdSt2b2RlQGVHcm91cHMuY29tPg=="
    }
}