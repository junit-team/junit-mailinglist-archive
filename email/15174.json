{
    "numMessagesInTopic": 12, 
    "nextInTime": 15175, 
    "senderId": "4WzCUPoslPE47YeA25nf_g7yajQtEvcJyZiW8otF-9Qa_gas0A98VoJi0KI04jTOiVkaY9-mJw91dy6p0RkEgbKRKxw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Counting assertions", 
    "from": "Eugene Kuleshov &lt;eu@...&gt;", 
    "authorName": "Eugene Kuleshov", 
    "msgSnippet": "Good point. So, for those who are interested, here is the shortened version of the aspect: public aspect AssertionCounter percflow(testMethodExecution()) { ", 
    "msgId": 15174, 
    "profile": "ekuleshov", 
    "topicId": 2160, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 150395705, 
    "messageBody": "<div id=\"ygrps-yiv-2059932277\">Good point. So, for those who are interested, here is the shortened <br/>\nversion of the aspect:<br/>\n<br/>\npublic aspect AssertionCounter percflow(testMethodExecution()) {<br/>\n  private int counter = 0;<br/>\n<br/>\n  public pointcut testMethodExecution() :<br/>\n      execution(void Test+.test*());<br/>\n<br/>\n  public pointcut assertCall() :<br/>\n      cflow(testMethodExecution()) &&<br/>\n      call(void Assert+.assert*(..));<br/>\n <br/>\n  after() returning() : testMethodExecution() {<br/>\n    Assert.assertTrue(&quot;No assertions had been called&quot;, counter==0);<br/>\n  }<br/>\n<br/>\n  before() : assertCall() {<br/>\n    counter++;<br/>\n  }<br/>\n <br/>\n}<br/>\n<br/>\n<br/>\n<br/>\nAlexandru Popescu wrote:<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; &gt;&gt;&gt; Cdric, I actually thought you&#39;d suggest aspect for this. :-)<br/>\n&gt; &gt;&gt; I was, but somebody beat me to it :-)<br/>\n&gt; &gt;&gt; And indeed, I believe AOP is the best way to add this feature, as<br/>\n&gt; &gt;&gt; your code shows.<br/>\n&gt; &gt;&gt;<br/>\n&gt; &gt; By the way, do you think that using ThreadLocal like this is the<br/>\n&gt; &gt; right way? Or it is better and more performant (?) to use some<br/>\n&gt; &gt; introduction advice? I am afraid that second option will be too<br/>\n&gt; &gt; thread-sensitive...<br/>\n&gt; &gt;<br/>\n&gt; &gt; It would be cool to be able to stick some attributes to the<br/>\n&gt; &gt; execution context (somehow similar to attrs that can be added to<br/>\n&gt; &gt; http request in a Servlet spec). Unfortunately neither AspectJ or<br/>\n&gt; &gt; AOP Alliance provide such API.<br/>\n&gt;<br/>\n&gt;  guess that using a percflow aspect will remove the need for<br/>\n&gt;  ThreadLocal usage. </span></blockquote></div>", 
    "prevInTime": 15173, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1129557530", 
    "canDelete": false, 
    "nextInTopic": 15175, 
    "prevInTopic": 15172, 
    "headers": {
        "inReplyToHeader": "PDQzNTM2NDA4LjYwMTA5MDRAZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDQzNTNBRTFBLjgwMjA3MDJAbWQucHAucnU+", 
        "referencesHeader": "PDIzZmNlOGU2MDUxMDE2MDY1NWsxYzM4NjY3ZmxAbWFpbC5nbWFpbC5jb20+CSA8MjAwNTEwMTYxNDQ5MTYuNTgyOTYucW1haWxAd2ViMzU2MTAubWFpbC5tdWQueWFob28uY29tPgkgPGI4NmI2YTljMDUxMDE2MTgxMGc3YzVjNTExNG9kY2M0NjdhYzJiOTRkZTUzQG1haWwuZ29vZ2xlLmNvbT4JIDw0MzUzMUI3Ny4zMDUwMUBtZC5wcC5ydT4gPGI4NmI2YTljMDUxMDE2MjMxOHQxMWU3MmY1ZWdiY2I1NTg1NjJlNmYwY2MzQG1haWwuZ29vZ2xlLmNvbT4gPDQzNTM1MzlGLjgwODAyMDNAbWQucHAucnU+IDw0MzUzNjQwOC42MDEwOTA0QGdtYWlsLmNvbT4="
    }
}