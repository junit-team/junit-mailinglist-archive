{
    "numMessagesInTopic": 2, 
    "nextInTime": 10044, 
    "senderId": "CKVgONJ5lm6hn18vbwzKHZJHoQJ5fmz4J2ppRPSH40cmGXh5otm6Ch87KCZX8TxyflRTjqzJdNDhLDWt04ZrO9s3RFJ6-9TJ3i_fQ96nwsCU", 
    "systemMessage": false, 
    "subject": "JUnit Group Test", 
    "from": "&quot;Andrew Wilson&quot; &lt;andrew@...&gt;", 
    "authorName": "Andrew Wilson", 
    "msgSnippet": "Gday, I wondered whether anyone had any comments on this, particular on whether you are interested in integrating into JUnit. I have been a fan of JUnit for a", 
    "msgId": 10043, 
    "profile": "anewilson", 
    "topicId": 10043, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 164619628, 
    "messageBody": "<div id=\"ygrps-yiv-70277918\">Gday, I wondered whether anyone had any comments on this, particular <br/>\non whether you are interested in integrating into JUnit.<br/>\n<br/>\nI have been a fan of JUnit for a number of years now, having seen all <br/>\nits benefits in a number of projects at major Investment Banks.  <br/>\nHowever, as I wrote more tests I began to see patterns emerging.  <br/>\nParticularly, I found that as my tests became more complicated I <br/>\nrequired true objects rather than the simple <br/>\nsetUp/tearDown/testMe/testMeToo type construction.  I noticed the <br/>\nfollowing:<br/>\n<br/>\nh A lot of my test methods were very similar, testing with some <br/>\nslightly different parameters.  I wanted to define one generic test, <br/>\nnot many similar ones.<br/>\nh I wanted the other tests to continue if one failed.  Note that <br/>\nGroboUtils provides this sort of SoftAssert, but you need to define <br/>\neach test in a separate method.<br/>\n<br/>\nTo implement my tests you just have to implement one very simple <br/>\nInterface:<br/>\n<br/>\npublic interface GroupTestable {<br/>\n    /**<br/>\n     * Usually this would look at an array or an XML file to count <br/>\nthe tests.<br/>\n     * @return How many tests there are<br/>\n     */<br/>\n    public int getNumberOfTests() throws Exception;<br/>\n<br/>\n    /**<br/>\n     * Again this would look at an array or an XML file to get the <br/>\ntest name.<br/>\n     * @param testNo Get the name of the test with the given number<br/>\n     */<br/>\n    public String getTestName(int testNo) throws Exception;<br/>\n<br/>\n    /**<br/>\n     * Run a particular test, this would probably be getting data out <br/>\nof an<br/>\n     * array or an XML file to run the particular test.<br/>\n     * @param testNo The number of the test to run<br/>\n     */<br/>\n    public void runTest(int testNo) throws Exception;<br/>\n}<br/>\n<br/>\nHere is a very simple sample implementation:<br/>\n<br/>\npublic class SampleGroupTest extends TestSuite implements <br/>\nGroupTestable<br/>\n{<br/>\n    public static Test suite() throws Throwable {<br/>\n        return GroupTest.getTestSuite(new SampleGroupTest(), true);<br/>\n    }<br/>\n<br/>\n    private SampleGroupTest() { /* do some useful set up for the <br/>\ntests here */ }<br/>\n<br/>\n    public int getNumberOfTests() throws Exception { return 3; }<br/>\n<br/>\n    public String getTestName(int i) throws Exception { <br/>\nreturn &quot;Test &quot; + i; }<br/>\n<br/>\n    public void runTest(int i) throws Exception {<br/>\n        System.out.println(&quot;Running test # &quot; + i);<br/>\n        if(i==0) {<br/>\n            Assert.fail(&quot;Problem&quot;);<br/>\n        } else if(i==1) {<br/>\n            throw new Exception(&quot;Exception&quot;);<br/>\n        } else {<br/>\n            // Pass the final test.<br/>\n        }<br/>\n    }<br/>\n}<br/>\n<br/>\nAnd if you run this in any standard Junit runner you will get the <br/>\nfollowing output:<br/>\n<br/>\nFAILURES!!!<br/>\nTests run: 3,  Failures: 1,  Errors: 1<br/>\n<br/>\nSo as expected, one test passed, one failed and one got an <br/>\nexception.  The other tests continued after the first one failed and <br/>\nmultiple tests were run from a single method.<br/>\n<br/>\nThis code becomes more useful when you start to define your tests <br/>\nusing Arrays or XML.  I managed to define 50 useful tests to my <br/>\nserver in a single XML file.  Now, when I want to add a new test, I <br/>\njust add some XML to the file and the new testcase runs <br/>\nautomatically.  Imagine the mess if I had to add a new method for <br/>\neach test!<br/>\nSo how do I do this trickery?<br/>\nWhat Im actually doing is overriding the runTest() method in TestCase <br/>\nto call my particular test., I would like to see this code integrated <br/>\ninto JUnit or GroboUtils (I don¡¦t like maintaining infrastructure).<br/>\n<br/>\npublic class GroupTest {<br/>\n    private static final Category CAT = Category.getInstance<br/>\n(GroupTest.class.getName());<br/>\n<br/>\n    private static int counter = 0;    // A counter for which test we <br/>\nare on.<br/>\n    private static GroupTestable suit; // The test suite we are <br/>\ntesting.<br/>\n    private static boolean mShutdownAfterTests;<br/>\n<br/>\n    public static Test getTestSuite(GroupTestable mySuit, boolean <br/>\nshutdownAfterTests) throws Exception {<br/>\n        mShutdownAfterTests = shutdownAfterTests;<br/>\n        suit = mySuit;<br/>\n        TestSuite ts = new TestSuite();<br/>\n        int noOfTests = suit.getNumberOfTests();<br/>\n        for(int i=0;i&lt;noOfTests;i++) {<br/>\n            ts.addTestSuite(GenericTestCase.class);<br/>\n        }<br/>\n        GroupTest.counter = 0;  // reset counter for running tests.<br/>\n        return ts;<br/>\n    }<br/>\n<br/>\n    public static class GenericTestCase extends TestCase {<br/>\n        /**<br/>\n         * Constructor with correct name.<br/>\n         */<br/>\n        public GenericTestCase(String name) throws Exception {<br/>\n            super(suit.getTestName(counter++));<br/>\n         }<br/>\n<br/>\n        /**<br/>\n         * Override the run test method to call our test method.<br/>\n         */<br/>\n        public void runTest() throws Exception {<br/>\n            try {<br/>\n                String description = &quot;test #&quot; + counter + &quot; : &quot; + <br/>\nsuit.getTestName(counter);<br/>\n                CAT.info(&quot;Running &quot; + description);<br/>\n                suit.runTest(counter++);<br/>\n                CAT.info(&quot;Succeeded for &quot; + description);<br/>\n            } finally {<br/>\n                // See whether we should shut down for the last test.<br/>\n                if(mShutdownAfterTests && counter == <br/>\nsuit.getNumberOfTests() ) {<br/>\n                    System.out.println(&quot;Calling exit&quot;);<br/>\n                    ShutdownHandler.getInstance<br/>\n().shutdownServerCleanly();<br/>\n                }<br/>\n            }<br/>\n        }<br/>\n<br/>\n        /**<br/>\n         * Dummy to trick JUnit<br/>\n         */<br/>\n        public void testDummy() throws Exception {<br/>\n            throw new Exception(&quot;This should not be called - it is a <br/>\ndummy method required to fool JUnit&quot;);<br/>\n        }<br/>\n    }<br/>\n} <br/>\nConclusion <br/>\nIf you have a lot of tests which look very similar and you don¡¦t want <br/>\nto write a separate method for each one this might help you!  Because <br/>\nit implements the TestSuite interface it will conform to all the <br/>\nstandard Junit architecture (eg. Maven, Cruise Control etc).<br/>\nBackground Reading<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.junit.org\">http://www.junit.org</a> ¡V Junit Website.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://groboutils.sourceforge.net\">http://groboutils.sourceforge.net</a> ¡V Junit extensio</div>", 
    "prevInTime": 10042, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1070603703", 
    "canDelete": false, 
    "nextInTopic": 10045, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGJxcDZqbithZjBnQGVHcm91cHMuY29tPg=="
    }
}