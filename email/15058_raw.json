{
    "numMessagesInTopic": 47, 
    "nextInTime": 15059, 
    "senderId": "7wU0rHYPmr0II0M3VxVheBEWxSC5C4lCuOp75eqC-X7YDJxqwM3M4G4sJzCZ0It9jloQrHnsILfkr177RSYeeVn3fvO_4Y7N", 
    "systemMessage": false, 
    "subject": "RE: [junit] Proposed parameterized test syntax for JUnit 4", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Eugene, I ll address the question of constructor vs. test method parameters now and the rest later. Here is the current implementation: ", 
    "msgId": 15058, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 49879 invoked from network); 4 Oct 2005 22:32:20 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m34.grp.scd.yahoo.com with QMQP; 4 Oct 2005 22:32:20 -0000\r\nReceived: from unknown (HELO smtpauth08.mail.atl.earthlink.net) (209.86.89.68)\n  by mta6.grp.scd.yahoo.com with SMTP; 4 Oct 2005 22:32:20 -0000\r\nReceived: from [67.131.9.243] (helo=T42)\n\tby smtpauth08.mail.atl.earthlink.net with asmtp (Exim 4.34)\n\tid 1EMv8q-000875-Bb\n\tfor junit@yahoogroups.com; Tue, 04 Oct 2005 18:20:08 -0400\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nDate: Tue, 4 Oct 2005 15:19:55 -0700\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;US-ASCII&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Mailer: Microsoft Office Outlook, Build 11.0.5510\r\nIn-Reply-To: &lt;434201DD.2010305@...&gt;\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180\r\nThread-Index: AcXI+Wn0si1GNwz8R6+IMhmhGtzQCAAHuSZw\r\nMessage-ID: &lt;E1EMv8q-000875-Bb@...&gt;\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d47808daa5b3e7ca120f34142a1f445911cab880b18dd822da67350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Kent Beck&quot; &lt;kentb@...&gt;\r\nSubject: RE: [junit] Proposed parameterized test syntax for JUnit 4\r\nX-Yahoo-Group-Post: member; u=173198504; y=3Q79wXhepkXSi6DARTgYKGBDqik8YY37DP1nXJnsfmk8dSvz\r\nX-Yahoo-Profile: kentlbeck\r\n\r\nEugene,\n\nI&#39;ll address the question of constructor vs. test method parameters now and\nthe rest later. Here is the current implementation:\n\n@Factory(Parameterized.class)\npublic class Example {\n  @Parameters public static Object[] /* or whatever */ data() {...}\n\n  public Example(Object parameter1, Object parameter2) {\n    this.parameter1= parameter1;\n    this.parameter2= parameter2;\n  }\n\n  @Test public void one() {\n    ...\n  }\n\n  @Test public void two() {\n    ...\n  }\n} \n\nHere is the version with method parameters. It is simpler in that it doesn&#39;t\nrequire a constructor, but the parameter lists are duplicated in each test\nmethod.\n\n@Factory(Parameterized.class)\npublic class Example {\n  @Parameters public static Object[] /* or whatever */ data() {...}\n\n  @Test public void one(Object parameter1, Object parameter2) {\n    ...\n  }\n\n  @Test public void two(Object parameter1, Object parameter2) {\n    ...\n  }\n} \n\nI prefer the first version, but I have a pretty good memory for detail so it\nis generally easy for me to read the tests remembering what data has already\nbeen set. I like the lack of redundancy. However, another of my goals is for\neach test to tell a story, to be readable from beginning to end. For this,\nthe test method parameters read better to me.\n\nThe same issue arises with set-up methods. A test with lots of set-up can be\ncryptic to read:\n\n@Test public void lotsOfSetUpFirst() {\n  smallStimulus();\n  assertTrue(largeChange());\n}\n\nThis is one of those engineering trade-offs that make design a challenge.\nThe decision could go either way. My preference is to avoid redundancy and\ngo with the constructor.\n\nSincerely yours,\n\nKent Beck\nThree Rivers Institute\n\n\n&gt; -----Original Message-----\n&gt; From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On \n&gt; Behalf Of Eugene Kuleshov\n&gt; Sent: Monday, October 03, 2005 9:15 PM\n&gt; To: junit@yahoogroups.com\n&gt; Subject: Re: [junit] Proposed parameterized test syntax for JUnit 4\n&gt; \n&gt; Hi Kent,\n&gt; \n&gt;   Please see my comments below.\n&gt; \n&gt;   regards,\n&gt;   Eugene\n&gt; \n&gt; \n&gt; Kent Beck wrote:\n&gt; \n&gt; &gt;Thank you for your comments. Followup below--\n&gt; &gt;  \n&gt; &gt;\n&gt; &gt;&gt; First of all you are forcing test runner to create new \n&gt; &gt;&gt;class instance \n&gt; &gt;&gt;for each test, which is probably good thing from the point of \n&gt; &gt;&gt;unit test \n&gt; &gt;&gt;isolation enforcement, but from other hand it put a huge \n&gt; &gt;&gt;limitation for \n&gt; &gt;&gt;tools and will have memory and performance hit as well. So, \n&gt; it would \n&gt; &gt;&gt;make sense to have these parameters passed to the test method \n&gt; &gt;&gt;(like it \n&gt; &gt;&gt;is done in TestNG).\n&gt; &gt;&gt;    \n&gt; &gt;&gt;\n&gt; &gt;I think the performance problems can be solved other ways, \n&gt; and I still like\n&gt; &gt;encouraging test isolation by executing tests in separate \n&gt; instances. The\n&gt; &gt;JUnit 4 runner creates the instances immediately in advance \n&gt; of invoking the\n&gt; &gt;test method. The current design requires less duplication \n&gt; than passing the\n&gt; &gt;parameters to the test methods, since the parameters only \n&gt; appear in the\n&gt; &gt;constructor. \n&gt; &gt;\n&gt;   As I mentioned, passing params in the constructor assume \n&gt; that all test \n&gt; methods require the same parameters which is not always the case. Can \n&gt; you please explain where will be code duplication if test \n&gt; methods will \n&gt; have all the params as a method parameters but not fileds? Do \n&gt; you refer \n&gt; to same method params that would repeated for several methods? I \n&gt; wouldn&#39;t say it is that big duplication, but it would give a \n&gt; better test \n&gt; isolation and eliminate illusion that test case is statefull. \n&gt; \n&gt; &gt;It might be better for the @Parameters method to return an\n&gt; &gt;Iterator, allowing the lazy creation of substantial data structures,\n&gt; &gt;however.\n&gt; &gt;  @Parameters static Iterator&lt;Object[]&gt; data() ...\n&gt; &gt;  \n&gt; &gt;\n&gt;   Iterator won&#39;t allow to jump directly to the specific test. \n&gt; It would \n&gt; be useful for IDE runners if user would like to restart only specific \n&gt; test case (this scenario us currently not supported in \n&gt; Eclipse&#39;s JUnit \n&gt; runner).\n&gt; \n&gt; &gt;&gt;  Second limitation is that user don&#39;t have will have to \n&gt; &gt;&gt;declaratively \n&gt; &gt;&gt;specify test data sets without writing custom @Parameters \n&gt; &gt;&gt;method and use \n&gt; &gt;&gt;some system property to differentiate between tests. Perhaps \n&gt; &gt;&gt;you can add \n&gt; &gt;&gt;some &quot;name&quot; property to Parameters annotation, so test runner \n&gt; &gt;&gt;can match \n&gt; &gt;&gt;this name with declared test data. Such name property would \n&gt; &gt;&gt;also allow \n&gt; &gt;&gt;to have multiple @Parameters methods and match them with \n&gt; &gt;&gt;@Test methods \n&gt; &gt;&gt;if you&#39;ll have same name there too. The last would allow to \n&gt; &gt;&gt;have several \n&gt; &gt;&gt;test methods with different kinds of test parameters \n&gt; without creating \n&gt; &gt;&gt;separate test classes (so you&#39;ll have single test class for \n&gt; &gt;&gt;class under \n&gt; &gt;&gt;testing).\n&gt; &gt;&gt;    \n&gt; &gt;&gt;\n&gt; &gt;I don&#39;t understand this objection. Can you write an example \n&gt; of what you\n&gt; &gt;would like to see?\n&gt; &gt;  \n&gt; &gt;\n&gt;   Ok. I may have several data sets (e.g. small one for smoke \n&gt; testing and \n&gt; a really huge one for complete regression testing) and I want \n&gt; to choose \n&gt; between them from the runner. For instance:\n&gt; \n&gt; @Parameters(name=&quot;smoke&quot;) public static Object[] data() {\n&gt;   return new int[][] {{0, 0}, {1, 1}};\n&gt; }\n&gt; \n&gt; @Parameters(name=&quot;full&quot;) public static Object[] data() {\n&gt;   // load data from external file or generate permutations\n&gt;   return data;\n&gt; }\n&gt; \n&gt;   Then you&#39;ll specify test type &quot;smoke&quot; or &quot;full&quot; on a runner and it \n&gt; will choose an appropriate set of the test data.\n&gt; \n&gt; &gt;&gt;  The last thing I&#39;d like to mention is that current \n&gt; &gt;&gt;@Parameters methods \n&gt; &gt;&gt;won&#39;t scale to large data sets (the same limitation also exists in \n&gt; &gt;&gt;TestNG). I&#39;ve seen JUnit3 suite() methods that produced \n&gt; thousands of \n&gt; &gt;&gt;test permutations and that required lots of memory memory \n&gt; &gt;&gt;when running \n&gt; &gt;&gt;tests. So, It think that it would make sense to introduce an \n&gt; &gt;&gt;interface \n&gt; &gt;&gt;similar to JDBC ResultSet, so test runner can create iterate \n&gt; &gt;&gt;trough test \n&gt; &gt;&gt;data without loading it completely into memory and also have \n&gt; &gt;&gt;option to \n&gt; &gt;&gt;get number of tests as well as jump to Nth test. You can also \n&gt; &gt;&gt;provide an \n&gt; &gt;&gt;adapter that will take Object[][] and provide all that \n&gt; &gt;&gt;functionality for \n&gt; &gt;&gt;users who don&#39;t want to create test data dynamically.\n&gt; &gt;&gt;    \n&gt; &gt;&gt;\n&gt; &gt;Would the Iterator version satisfy the need to handle large \n&gt; data sets?\n&gt; &gt;  \n&gt; &gt;\n&gt;   The limitation of the iterator is that it does not provide a random \n&gt; access. This would make difficult to rerun only selected test \n&gt; case (e.g. \n&gt; failed one)\n&gt; \n&gt;   regards,\n&gt;   Eugene\n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 14820, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 15057, 
    "contentTrasformed": false, 
    "postDate": "1128464395", 
    "canDelete": false, 
    "nextInTopic": 15059, 
    "prevInTopic": 15057, 
    "headers": {
        "inReplyToHeader": "PDQzNDIwMURELjIwMTAzMDVAbWQucHAucnU+", 
        "messageIdInHeader": "PEUxRU12OHEtMDAwODc1LUJiQHNtdHBhdXRoMDgubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4="
    }
}