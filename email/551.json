{
    "numMessagesInTopic": 4, 
    "nextInTime": 552, 
    "senderId": "fSk5UkTFc4EMMG3hGHUNzk6_Jl8d_iF1RhS_q_3z6_OaPxEOQk69dznyQRmXulbD2mOsnJHI61FuALvDkA284cnAH777C7M-yoCZ9Q_MXREjkODs8A", 
    "systemMessage": false, 
    "subject": "RE: running an EJB client as a JUnit TestCase", 
    "from": "&quot;Herrick, Chuck&quot; &lt;chuck.herrick@...&gt;", 
    "authorName": "Herrick, Chuck", 
    "msgSnippet": "... I m running a CMP Entity bean in WebLogic v 5.1.0 sp 8. I m doing my Java coding using TogetherJ. ... I may have a ClassLoader problem. Running the same", 
    "msgId": 551, 
    "topicId": 551, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-1346656527\">\n<html>\n<head>\n \n \n<title>RE: running an EJB client as a JUnit TestCase</title>\n</head>\n \n<br>\n<ul><ul>\n<p><font SIZE=\"2\" FACE=\"Arial\">Hello,</font><font FACE=\"Arial\"> </font>\n<br><font SIZE=\"2\" FACE=\"Arial\">I&#39;m running a CMP Entity bean in WebLogic v 5.1.0 sp 8. I&#39;m doing my Java coding using TogetherJ.</font>\n<br>\n<br><font SIZE=\"2\" FACE=\"Arial\">I figure it would be a no-brainer to make an EJB client into a junit.framework.TestCase and get junit.swingui.TestRunner to run my EJB client for me.</font></p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">Alas, Everything works fine until I execute the PortableRemoteObject.narrow(), in which I get a ClassCastException.</font><font FACE=\"Arial\"> </font>\n</p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">Here&#39;s what I get:</font><font FACE=\"Arial\"><br>\n</font><font SIZE=\"2\" FACE=\"Arial\">--</font><font FACE=\"Arial\"><br>\n</font><font SIZE=\"2\" FACE=\"Arial\">java.lang.ClassCastException   </font><br>\n<font SIZE=\"2\" FACE=\"Arial\">at weblogic.iiop.PortableRemoteObjectDelegateImpl.narrow(PortableRemoteObjectDelegateImpl.java:94)     </font><br>\n<font SIZE=\"2\" FACE=\"Arial\">at javax.rmi.PortableRemoteObject.narrow(PortableRemoteObject.java:137)        </font><br>\n<font SIZE=\"2\" FACE=\"Arial\">at TestClient.lookupHome(TestClient.java:186)  </font><br>\n<font SIZE=\"2\" FACE=\"Arial\">at TestClient.setUp(TestClient.java:227)</font><br>\n<font SIZE=\"2\" FACE=\"Arial\">--</font><font FACE=\"Arial\"><br>\n</font><font SIZE=\"2\" FACE=\"Arial\">I figure I might have a -classpath problem. I run TestRunner from a .cmd commandline script file, using jdk1.3&#92;bin&#92;java -classpath ...</font></p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">Does TestRunner use %CLASSPATH% when it runs my EJB client?</font>\n</p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">I may have a ClassLoader problem. Running the same code, from a main() which calls setUp() and mimics TestRunner, runs just fine from the commandline as well as from insdide TogetherJ. In fact, if I cut&#39;n&#39;paste the -classpath from these, I still get the cast exception from a run via TestRunner.</font></p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">Here is what is weird. I&#39;ve put System.out.println()s in my code, using instanceof to test what is returned from the InitialContext.lookup() against the ejb Home interface. this comparison code returns true when run from the commandline and from inside TogetherJ but false when run from TestRunner. In other words,</font></p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">&nbsp; java.lang.Object o = ctx.lookup(&quot;JNDI_NAME&quot;) ;</font>\n<br><font SIZE=\"2\" FACE=\"Arial\">&nbsp; System.out.println(o.getClass().getName()) ;</font>\n<br><font SIZE=\"2\" FACE=\"Arial\">&nbsp; System.out.println(o instanceof FoobarHome) ;</font>\n<br><font SIZE=\"2\" FACE=\"Arial\">should echo first the classname of the WebLogic-generated stub and then the word true.</font>\n</p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">Running inside and outside of TestRunner gives indeed the same classname. Running inside TestRunner returns &quot;false&quot; and outside TestRunner returns &quot;true.&quot;</font></p>\n\n<p><font SIZE=\"2\" FACE=\"Arial\">Can you help?</font>\n</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<u> <font COLOR=\"#0000FF\" SIZE=\"2\" FACE=\"Arial\"><a rel=\"nofollow\" target=\"_blank\" HREF=\"mailto:chuck.herrick@...\">mailto:chuck.herrick@...</a></font></u>\n</p>\n</ul></ul>\n<code><font SIZE=\"3\"><br>\n<br>\n***************************************************************************************<br>\nWARNING:  All e-mail sent to and from this address will be received or<br>\notherwise recorded by the A.G. Edwards corporate e-mail system and is<br>\nsubject to archival, monitoring or review by, and/or disclosure to,<br>\nsomeone other than the recipient.<br>\n***************************************************************************************<br>\n</font></code> \n</html></div>", 
    "prevInTime": 550, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "983207761", 
    "canDelete": false, 
    "nextInTopic": 552, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PEVBQTNDQTM3RjBDQkQ0MTE5RDRBMDAwNjI5MzhGMUE1MDEwQjZDRjRAaHFleGNobjExLmFnZWR3YXJkcy5jb20+"
    }
}