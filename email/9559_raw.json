{
    "numMessagesInTopic": 6, 
    "nextInTime": 9560, 
    "senderId": "50PGPizD012FqOZ1yBbswxSb2TyAZPuBNcLftCXtZf-uLl13ukjfsozIvVQfqoLUwVYJ_8qSOdCuIsL1JoafwoHI47EgObTstKwTJGXZoOoed4U", 
    "systemMessage": false, 
    "subject": "Re: [junit] how to unit test a class if it uses another singleton class", 
    "from": "&quot;Erik Mattsson&quot; &lt;erik.mattsson@...&gt;", 
    "authorName": "Erik Mattsson", 
    "msgSnippet": "Somehow I always litter my code with singletons, and its a very easy way of handling control in a large application, but this will always have problems when", 
    "msgId": 9559, 
    "rawEmail": "Return-Path: &lt;erik.mattsson@...&gt;\r\nReceived: (qmail 1153 invoked by uid 7800); 30 Sep 2003 13:44:04 -0000\r\nX-Sender: erik.mattsson@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 17186 invoked from network); 30 Sep 2003 08:21:54 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m16.grp.scd.yahoo.com with QMQP; 30 Sep 2003 08:21:54 -0000\r\nReceived: from unknown (HELO lists.levonline.com) (217.70.33.37)\n  by mta5.grp.scd.yahoo.com with SMTP; 30 Sep 2003 08:21:54 -0000\r\nReceived: from localhost (lists.levonline.com [127.0.0.1])\n\tby lists.levonline.com (Postfix) with ESMTP id D7955D05F8\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 30 Sep 2003 10:21:53 +0200 (CEST)\r\nReceived: from lists.levonline.com ([127.0.0.1])\n by localhost (lists.levonline.com [127.0.0.1]) (amavisd-new, port 10024)\n with ESMTP id 29723-01 for &lt;junit@yahoogroups.com&gt;;\n Tue, 30 Sep 2003 10:21:52 +0200 (CEST)\r\nReceived: from ormen1.basenet.levonline.com (ormen1.levonline.com [217.70.32.117])\n\tby lists.levonline.com (Postfix) with ESMTP id 7E7CAD0643\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 30 Sep 2003 10:20:29 +0200 (CEST)\r\nReceived: from bashfull (h134n2fls32o837.telia.com [217.209.137.134])\n\t(authenticated bits=0)\n\tby ormen1.basenet.levonline.com (8.12.8/8.12.8) with ESMTP id h8U8ItsW018163\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 30 Sep 2003 10:18:55 +0200\r\nMessage-ID: &lt;006e01c3872b$b4fcb670$0600a8c0@...&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;bl9qoo+7540@...&gt;\r\nSubject: Re: [junit] how to unit test a class if it uses another singleton class\r\nDate: Tue, 30 Sep 2003 10:20:19 +0200\r\nMIME-Version: 1.0\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 6.00.2800.1158\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165\r\nX-Virus-Scanned: By http://levonline.com - free virus scanning for all customers\r\nFrom: &quot;Erik Mattsson&quot; &lt;erik.mattsson@...&gt;\r\nX-Yahoo-Group-Post: member; u=135813500\r\nX-Yahoo-Profile: erikmattsson73\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Approved-By: nails762 &lt;jbrains@...&gt; via email; 30 Sep 2003 13:44:04 -0000\r\n\r\nSomehow I always litter my code with singletons, and its a very easy way\nof handling control in a large application, but this will always have problems\nwhen testing. (singleton in an OO-environment feels like coding C in C++)\n\nNow, when I have a few singletons I try to Mock them. (replace them with\na fake class, instead of the real class). I have no clue how to do it nice, but heres\nwhat I do. I would happily take pointer on what to improve!!\n\npublic class Singleton\n{\n  (package access) static Singleton instance;\n  (package access) Singleton()\n  {\n  }\n}\n\npublic class MockSingleton extends Singleton\n{\n  public static void setUp()\n  {\n     instance = new MockSingleton();\n  }\n  public static void tearDown()\n  {\n     instance = null;\n  }\n}\n\npublic class ClassThatUsesSingletonTest extends TestCase\n{\n  public void setUp()\n  {\n     MockSingleton.setUp(); // creates a new instance every time\n  } \n  public void tearDown()\n  {\n     MockSingleton.tearDown(); // removes the instance.\n  }\n\n  public void testSomething()\n  {\n    //do stuff with class that uses the (mock) singleton\n  }\n}\n\nThis works now, but I would prefer a better approach.\n\n//erik\n  -\n  ---- Original Message ----- \n  From: shailesh401 \n  To: junit@yahoogroups.com \n  Sent: Monday, September 29, 2003 7:39 PM\n  Subject: [junit] how to unit test a class if it uses another singleton class\n\n\n  Any help or suggestion\n\n  Thanks\n  Sal\n\n\n        Yahoo! Groups Sponsor \n              ADVERTISEMENT\n             \n       \n       \n\n  To unsubscribe from this group, send an email to:\n  junit-unsubscribe@yahoogroups.com\n\n\n  Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. \n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "erikmattsson73", 
    "topicId": 9536, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 135813500, 
    "prevInTime": 9558, 
    "contentTrasformed": false, 
    "postDate": "1064910019", 
    "canDelete": false, 
    "nextInTopic": 9564, 
    "prevInTopic": 9540, 
    "headers": {
        "messageIdInHeader": "PDAwNmUwMWMzODcyYiRiNGZjYjY3MCQwNjAwYThjMEBpbWJyaWRnZS5zZT4=", 
        "referencesHeader": "PGJsOXFvbys3NTQwQGVHcm91cHMuY29tPg=="
    }
}