{
    "numMessagesInTopic": 3, 
    "nextInTime": 2316, 
    "senderId": "6KjJe4vcZtcropZD3REOG5kcO4FlU50JqRo4elKlqIYPc9sZt5CLsCu_5d8PZ9VChsveNUYM5Jco10xA5xtB2R8mwhN5tToR", 
    "systemMessage": false, 
    "subject": "Re: [junit] testing code that inserts into a database", 
    "from": "Johannes Link &lt;john.link@...&gt;", 
    "authorName": "Johannes Link", 
    "msgSnippet": "... One option is to start a top leve transaction in setUp(), rolling it back in tearDown() and using only nested transactions inbetween. This works", 
    "msgId": 2315, 
    "topicId": 2313, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-1419843407\">Martin Dillard wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; My question is on how to test code that inserts into the database. I<br/>\n&gt; am concerned about inserting data into the database that may later<br/>\n&gt; interfere with my tests that read from the database so I want to make<br/>\n&gt; sure that all data is removed from the database after the insert<br/>\n&gt; methods are tested. Should this code be in the test method?<br/>\n<br/>\n </span></blockquote>One option is to start a top leve transaction in setUp(), rolling it<br/>\nback in tearDown() and using only nested transactions inbetween. This<br/>\nworks *sometimes* and requires, of course, that your database supports<br/>\nnested transactions.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Also, what<br/>\n&gt; is the best way to verify that everything was inserted correctly?<br/>\n<br/>\n </span></blockquote>Retrieving it with select seems to be the only way unless you mocked<br/>\nyour database interface.<br/>\n<br/>\nWhat we have done a couple of times is to wrap the real database access<br/>\nin a wrapping interface which should be as narrow as possible, i.e.<br/>\nproviding only create, update and delete functionality for your<br/>\npersistent objects. Having done that you can mock this interface for<br/>\nmost of your tests. You need a few tests for checking that your wrapper<br/>\naccesses the db correctly but those tests are most of the time very<br/>\nstraightforward.<br/>\n<br/>\nJohannes</div>", 
    "prevInTime": 2314, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "997390632", 
    "canDelete": false, 
    "nextInTopic": 2317, 
    "prevInTopic": 2313, 
    "headers": {
        "messageIdInHeader": "PDNCNzJGOTI4LkI5NzE0OTQ0QGdteC5uZXQ+", 
        "referencesHeader": "PEYyNDREUEhwTndxZXE1WjNKalEwMDAwMzEwY0Bob3RtYWlsLmNvbT4="
    }
}