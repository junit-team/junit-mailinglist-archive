{
    "numMessagesInTopic": 4, 
    "nextInTime": 18343, 
    "senderId": "4vV1agFO6ldwufxXQBOLIVzHSOkEgKfry14INANYU28PCGJwx7ZelQPQNAFQfp4A0dk6tH_Qn76chxe5MhX37jEAUVyAK5I1nTp1r4bS5i0", 
    "systemMessage": false, 
    "subject": "Re: [junit] When code refuses to be mocked", 
    "from": "&quot;Lasse Koskela&quot; &lt;lasse.koskela@...&gt;", 
    "authorName": "Lasse Koskela", 
    "msgSnippet": "Hi Wendy, If you look at this snippet from your wiki page, you should be able to see the problem more clearly: // set up the mock UniFile ctrlUniFile =", 
    "msgId": 18342, 
    "profile": "lassekoskela", 
    "topicId": 18341, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190530936, 
    "messageBody": "<div id=\"ygrps-yiv-1688915460\">Hi Wendy,<br/>\n<br/>\nIf you look at this snippet from your wiki page, you should be able to see<br/>\nthe problem more clearly:<br/>\n<br/>\n// set up the mock UniFile<br/>\nctrlUniFile = MockClassControl.createControl(UniFile.class, null, null);<br/>\nmockUniFile = (UniFile) ctrlUniSession.getMock();<br/>\n<br/>\n// set up the mock UniSession<br/>\nctrlUniSession = MockClassControl.createControl(UniSession.class, null, null);<br/>\nmockUniSession = (UniSession) ctrlUniSession.getMock();<br/>\n<br/>\nIn the above snippet, you&#39;re getting the mock instance for both UniFile and<br/>\nUniSession classes from the same ctrlUniSession MockControl. You should ask<br/>\nthe mockUniFile from ctrlUniFile instead.<br/>\n<br/>\nLasse<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 11/12/06, Wendy Smoak &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:wsmoak@...\">wsmoak@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt;   I&#39;m having trouble testing some code that sits on top of a 3rd party<br/>\n&gt; library.<br/>\n&gt;<br/>\n&gt; Think &quot;Spring JDBC&quot; only instead of JDBC, it&#39;s a proprietary API to an<br/>\n&gt; obscure database [1]. I&#39;m coming back to this project after several<br/>\n&gt; months, so if I&#39;m not making sense it&#39;s because I&#39;ve forgotten some<br/>\n&gt; details. Please point that out and I&#39;ll re-learn and clarify.<br/>\n&gt;<br/>\n&gt; Where I seem to have gotten stuck is that with EasyMock Class<br/>\n&gt; Extension, I tried this:<br/>\n&gt;<br/>\n&gt; // set up the mock UniFile<br/>\n&gt; ctrlUniFile = MockClassControl.createControl(UniFile.class, null, null);<br/>\n&gt; mockUniFile = (UniFile) ctrlUniSession.getMock();<br/>\n&gt;<br/>\n&gt; And I get:<br/>\n&gt;<br/>\n&gt; net.sf.cglib.core.CodeGenerationException:<br/>\n&gt; asjava.uniobjects.UniFileException--&gt;<br/>\n&gt; Cannot instantiate this object in this manner. Must use the UniSession<br/>\n&gt; object<br/>\n&gt;<br/>\n&gt; The UniSession object is analogous to a Connection. I&#39;m trying to<br/>\n&gt; avoid having to connect to the database to test the &#39;Spring UOJ&#39;<br/>\n&gt; framework code. All I need to know is that it called the read method<br/>\n&gt; on a UniFile, and got something back.<br/>\n&gt;<br/>\n&gt; The test class and stack trace are here:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://wiki.wsmoak.net/cgi-bin/wiki.pl?SpringUOJ/Test\">http://wiki.wsmoak.net/cgi-bin/wiki.pl?SpringUOJ/Test</a><br/>\n&gt;<br/>\n&gt; Any ideas, or do you see anything I&#39;m doing wrong?<br/>\n&gt;<br/>\n&gt; After this, it looks like I started to write concrete &#39;MockUniSession&#39;<br/>\n&gt; and &#39;MockUniFile&#39; classes. Before I continue down that path (or<br/>\n&gt; continue wandering aimlessly) I thought I&#39;d ask for help.<br/>\n&gt;<br/>\n&gt; [1] UniObjects for Java and IBM&#39;s UniData, respectively.<br/>\n&gt;<br/>\n&gt; Thanks,<br/>\n&gt; --<br/>\n&gt; Wendy<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n<br/>\n-- <br/>\nLasse Koskela<br/>\nJavaRanch Publisher Contact<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:lasse@...\">lasse@...</a><br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 18341, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1163398428", 
    "canDelete": false, 
    "nextInTopic": 18344, 
    "prevInTopic": 18341, 
    "headers": {
        "inReplyToHeader": "PGFkYmE5NjE5MDYxMTEyMTMyMXUyMmZkNDU0MnI2YmMzY2I5OGIzZDRmMTg3QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDM5NzVlMmQxMDYxMTEyMjIxM3Y3MzJmNzE5YnczNjM2NmJlZDRkMzc2YTEyQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGFkYmE5NjE5MDYxMTEyMTMyMXUyMmZkNDU0MnI2YmMzY2I5OGIzZDRmMTg3QG1haWwuZ21haWwuY29tPg=="
    }
}