{
    "numMessagesInTopic": 4, 
    "nextInTime": 23432, 
    "senderId": "DRIVTLwQzYOlq6jhzpaN7YNKOZLKvkvvy2qHUat1J3Cek4yjpk70dFq5jYP2FbG7-3CwQe6FTcB-q26lVfxiZ6-yQJw6aRl4ZVk", 
    "systemMessage": false, 
    "subject": "Re: [junit] mock javax.naming.InitialContext", 
    "from": "Alistair Israel &lt;aisrael@...&gt;", 
    "authorName": "Alistair Israel", 
    "msgSnippet": "... The simplest thing I found that worked was to write a StubContext (implements Context) and a StubContextFactoryBuilder (implements ", 
    "msgId": 23431, 
    "rawEmail": "Return-Path: &lt;aisrael@...&gt;\r\nX-Sender: aisrael@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 98756 invoked from network); 1 Jun 2011 23:24:28 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m14.grp.re1.yahoo.com with QMQP; 1 Jun 2011 23:24:28 -0000\r\nX-Received: from unknown (HELO mail-yw0-f47.google.com) (209.85.213.47)\n  by mta3.grp.re1.yahoo.com with SMTP; 1 Jun 2011 23:24:28 -0000\r\nX-Received: by ywg8 with SMTP id 8so198493ywg.34\n        for &lt;junit@yahoogroups.com&gt;; Wed, 01 Jun 2011 16:24:28 -0700 (PDT)\r\nX-Received: by 10.101.208.8 with SMTP id k8mr22542anq.159.1306970667145; Wed, 01\n Jun 2011 16:24:27 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.100.198.18 with HTTP; Wed, 1 Jun 2011 16:24:07 -0700 (PDT)\r\nIn-Reply-To: &lt;is64ha+50n4@...&gt;\r\nReferences: &lt;is64ha+50n4@...&gt;\r\nDate: Thu, 2 Jun 2011 07:24:07 +0800\r\nMessage-ID: &lt;BANLkTimPMCNbM7A-4MptXXWqeQejJTdPKg@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nFrom: Alistair Israel &lt;aisrael@...&gt;\r\nSubject: Re: [junit] mock javax.naming.InitialContext\r\nX-Yahoo-Group-Post: member; u=190140219; y=_eQbQ4FtRo1skTClQvLLL7RQmWqvrjSQ994rv1kKmB2x8Q\r\nX-Yahoo-Profile: aisrael\r\n\r\nOn Thu, Jun 2, 2011 at 3:39 AM, congzb &lt;zhebincong@...&gt; wrote:\n\n&gt; in my=\r\n source code, including following code:\n&gt;\n&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=\r\n=A0 =C2=A0 =C2=A0 =C2=A0InitialContext ctx =3D new InitialContext();\n&gt; =C2=\r\n=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0............=3D (......=\r\n.....)ctx.lookup(&quot;java:comp/env/service/someservce&quot;);\n&gt;\n&gt; so i wonder, in m=\r\ny junit test case, how to mock the InitialContext to look up and return a m=\r\nock service?\n\nThe simplest thing I found that worked was to write a StubCon=\r\ntext\n(implements Context) and a StubContextFactoryBuilder (implements\nIniti=\r\nalContextFactoryBuilder) that returns instances of my\nStubContext.\n\nNot qui=\r\nte a dynamic mock, but I suppose you can use the same\ntechniques with a Moc=\r\nkito-synthesized mock Context. I wasn&#39;t\ninterested in mocking the JNDI cont=\r\next per se, anyway. I just needed a\nconvenient way for JNDI client code to =\r\nbe able to resolve names at\ntest time.\n\nAnyway=E2=80=94in my test&#39;s setup m=\r\nethod I call\nNamingManager.setInitialContextFactoryBuilder() passing it an =\r\ninstance\nof my StubContextFactoryBuilder(). I also added a check to\nhasInit=\r\nialContextFactoryBuilder() to avoid an exception when\nsetInitialContextFact=\r\noryBuilder() is called more than once.\n\nYou&#39;re welcome to look at StubJndiC=\r\nontext.java on junit-rules for the\ncode that packages up the above as a @Ru=\r\nle:\nhttps://github.com/AlistairIsrael/junit-rules/blob/master/src/main/java=\r\n/junit/rules/jndi/StubJndiContext.java\n\nHope this helps!\n\n- alistair\n--\nhtt=\r\np://alistairisrael.wordpress.com\n\n", 
    "profile": "aisrael", 
    "topicId": 23430, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190140219, 
    "prevInTime": 23430, 
    "contentTrasformed": false, 
    "postDate": "1306970647", 
    "canDelete": false, 
    "nextInTopic": 23432, 
    "prevInTopic": 23430, 
    "headers": {
        "inReplyToHeader": "PGlzNjRoYSs1MG40QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PEJBTkxrVGltUE1DTmJNN0EtNE1wdFhYV3FlUWVqSlRkUEtnQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGlzNjRoYSs1MG40QGVHcm91cHMuY29tPg=="
    }
}