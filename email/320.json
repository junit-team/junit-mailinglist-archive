{
    "numMessagesInTopic": 9, 
    "nextInTime": 321, 
    "senderId": "smmzO_F-zdSZoJ_nC83IOOKKDombzrJoXzJveG98d7il59VgFE1y7zv3yh-AWKh94AFMCRNp2KYjyoWLWARacKVgPy7h_OqeINmqNQ", 
    "systemMessage": false, 
    "subject": "RE: [junit] how to test if something is thread safe?", 
    "from": "Kevin Bourrillion &lt;kevinb@...&gt;", 
    "authorName": "Kevin Bourrillion", 
    "msgSnippet": "Testing for thread-safety is a statistical proposition. The best strategy I can think of is to have n different copies of your suite, each in random order,", 
    "msgId": 320, 
    "topicId": 313, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-696340046\">\n<html><head>\n \n\n\n</head> \n \n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\">Testing for thread-safety is&nbsp;a statistical \nproposition.</font></span></div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\"></font></span>&nbsp;</div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\" size=\"2\">The \nbest strategy I can think of is to have n different copies of your suite, each \nin random order, each running repeatedly in its own thread (n threads total), \nand let them all run for an extraordinarily long time.&nbsp; If a failure is \ndetected, you should write out a full thread dump so that you can see exactly \nwhat every thread was doing.&nbsp; (Not sure if there&#39;s an easy way to do \nthat--can the JVM send a SIGQUIT to itself??)</font></span></div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\"></font></span>&nbsp;</div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\" size=\"2\">You \nwant it to test every conceivable combination of things that could be happening \nat once.&nbsp; It may or may not be advantageous to add a short random sleep \ninterval between test cases (say, between 1 and 100 milliseconds?&nbsp; the \nlonger it is, the fewer threads are actively testing at any \nmoment).</font></span></div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\"></font></span>&nbsp;</div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\" size=\"2\">But, \ntheoretically speaking, you could test that way for a hundred million years, \nthen deploy in production and have it bomb out on a user in the first \nhour.&nbsp; :-)</font></span></div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\"></font></span>&nbsp;</div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\">Thoughts?</font></span></div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\"></font></span>&nbsp;</div>\n<div><span class=\"ygrps-yiv-696340046406151220-25012001\"><font face=\"Arial\" color=\"#0000ff\"\n size=\"2\">Kevin</font></span></div>\n<blockquote><span title=\"qreply\"> <blockquote>\n  <div class=\"ygrps-yiv-696340046OutlookMessageHeader\" dir=\"ltr\" align=\"left\"><font face=\"Tahoma\"\n size=\"2\">-----Original Message-----<br><b>From:</b> John Brewer \n  [mailto:jbrewer@...]<br><b>Sent:</b> Wednesday, January 24, 2001 4:36 \n  PM<br><b>To:</b> junit@egroups.com<br><b>Subject:</b> Re: [junit] how to test \n  if something is thread safe?<br><br></font></div><tt>At 12:08 PM 1/24/01 , \n  Peter Bismuti wrote:<br>&gt;Are there any standard tests to verify that class \n  is thread safe?<br><br>There&#39;s no easy way to do verify thread safety with \n  tests, because the race<br>condition may only happen very rarely, and possibly \n  not at all on the VM<br>you are using.<br><br>Writing thread safe classes is \n  tricky.&nbsp; Doug Lea, author of &quot;Concurrent<br>Programming in Java&quot;, says \n  they still give him trouble.<br><br>A few simplifications that might work for \n  you:<br><br>* Do everything in one thread (the Swing approach).<br>* Immutable \n  classes are always thread safe.<br>* Classes not reachable from outside the \n  current thread are always thread safe.<br><br>For everything else, you&#39;re on \n  your own.&nbsp; Try reading Concurrent<br>Programming in Java for a good \n  overview of the issues involved.<br><br>John Brewer<br>Jera \nDesign<br></tt><br><br><tt>To \n  unsubscribe from this group, send an email \n  to:<br>junit-unsubscribe@egroups.com<br><br></tt><br></blockquote></span></blockquote></html> \n</div>", 
    "prevInTime": 319, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "980453925", 
    "canDelete": false, 
    "nextInTopic": 321, 
    "prevInTopic": 315, 
    "headers": {
        "messageIdInHeader": "PDU5Mzk2QTYzMjJBN0Q0MTFBNDUxMDAwMkIzMEExMjJBNTcwMUVCQGVtYWlsLm1vZGVsdDEuY29tPg=="
    }
}