{
    "numMessagesInTopic": 4, 
    "nextInTime": 20189, 
    "senderId": "XOCwtgMUry2OZ6PAEjiPK1tUAF5I9_VRvW3qS4jigV56qvYx-ycP15htZ3bFphzq6qwXEUlBE-cYVRM4WirPMoq_", 
    "systemMessage": false, 
    "subject": "Re: [junit] Bug in org.junit.Assert", 
    "from": "&quot;David Saff&quot; &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Walter, Nicely found.  Can you post it on the SourceForge bug tracker?  Many thanks, David Saff", 
    "msgId": 20188, 
    "profile": "dsaff", 
    "topicId": 20186, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "messageBody": "<div id=\"ygrps-yiv-1451684413\">Walter,<br/>\n<br/>\nNicely found.  Can you post it on the SourceForge bug tracker?  Many thanks,<br/>\n<br/>\n  David Saff<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Dec 21, 2007 3:34 PM, Walter Gildersleeve &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:newsgroups@...\">newsgroups@...</a>&gt; wrote:<br/>\n&gt; Hi,<br/>\n&gt;<br/>\n&gt; I searched around to see if anyone&#39;s submitted this bug.  I didn&#39;t<br/>\n&gt; find a dupe, so I&#39;ll go ahead and post; apologies if it&#39;s already known.<br/>\n&gt;<br/>\n&gt; In Assert#format(String, Object, Object), a NullPointerException is<br/>\n&gt; thrown if either param &quot;expected&quot; or &quot;actual&quot; is null and the other is<br/>\n&gt; *the string* &quot;null&quot;.  Here are a couple test cases demonstrating this:<br/>\n&gt;<br/>\n&gt; @Test(expected=NullPointerException.class)<br/>\n&gt; public void confirmError() {<br/>\n&gt;     assertEquals(null, &quot;null&quot;);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; @Test(expected=NullPointerException.class)<br/>\n&gt; public void confirmErrorToo() {<br/>\n&gt;     assertEquals(&quot;null&quot;, null);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; This is because Assert#format is trying to print extended information<br/>\n&gt; when two objects are visually identical but semantically different;<br/>\n&gt; namely, it wants to display the class names as well as the values,<br/>\n&gt; doing a Object#getClass() without checking if the object is null.<br/>\n&gt;<br/>\n&gt; Here&#39;s a possible fix:<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; static String format(String message, Object expected, Object actual) {<br/>\n&gt;     String formatted = &quot;&quot;;<br/>\n&gt;     if (message != null && !message.equals(&quot;&quot;)) {<br/>\n&gt;         formatted = message + &quot; &quot;;<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     String expectedString = String.valueOf(expected);<br/>\n&gt;     String actualString = String.valueOf(actual);<br/>\n&gt;<br/>\n&gt;     if (expected == null) {<br/>\n&gt;         return formatted + &quot;expected: &lt;null&gt; but was: &quot;<br/>\n&gt;             + actual.getClass().getName() + &quot;&lt;&quot; + actualString + &quot;&gt;&quot;;<br/>\n&gt;     } else if (actual == null) {<br/>\n&gt;         return formatted + &quot;expected: &quot; + expected.getClass().getName()<br/>\n&gt;                 + &quot;&lt;&quot; + expectedString + &quot;&gt; but was: &lt;null&gt;&quot;;<br/>\n&gt;     } else if (expectedString.equals(actualString)) {<br/>\n&gt;         return formatted + &quot;expected: &quot; + expected.getClass().getName()<br/>\n&gt;                 + &quot;&lt;&quot; + expectedString + &quot;&gt; but was: &quot;<br/>\n&gt;                 + actual.getClass().getName() + &quot;&lt;&quot; + actualString + &quot;&gt;&quot;;<br/>\n&gt;     } else {<br/>\n&gt;         return formatted + &quot;expected:&lt;&quot; + expectedString + &quot;&gt; but was:&lt;&quot;<br/>\n&gt;                 + actualString + &quot;&gt;&quot;;<br/>\n&gt;     }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; The assumption here is that actual and expected will never *both* be<br/>\n&gt; null.  Right?<br/>\n&gt;<br/>\n&gt; Walter Gildersleeve<br/>\n&gt; Portland, OR<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 20187, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1198353261", 
    "canDelete": false, 
    "nextInTopic": 20189, 
    "prevInTopic": 20186, 
    "headers": {
        "inReplyToHeader": "PGZraDgwOCs0OTNtQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDcxMjIyMTE1NHU3OGVjNGI2Y3NjOWU0NzkzNGU2ZjIxMTRkQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGZraDgwOCs0OTNtQGVHcm91cHMuY29tPg=="
    }
}