{
    "numMessagesInTopic": 17, 
    "nextInTime": 1359, 
    "senderId": "JM_CJS9erysIFuEhss_HoB3PoUJRqRg1KC1_E0h6TyQXGQ5Y4wWGmOGyhCULug1OCQZZ0DYsnUerD_6JIlCtvKzmWI3KQg", 
    "systemMessage": false, 
    "subject": "RE: Method Chains, was Re: Testing private methods", 
    "from": "&quot;Keith Ray&quot; &lt;keith.ray@...&gt;", 
    "authorName": "Keith Ray", 
    "msgSnippet": "(responding to messages quoted below) Using Mock objects helps you write de-coupled code... so instead of hard-coding class A to use and/or create an instance", 
    "msgId": 1358, 
    "topicId": 1308, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-2118536586\">\n<html>\n<head>\n \n \n<title>RE: Method Chains, was Re: Testing private methods</title>\n</head>\n \n\n<p><font SIZE=\"2\">(responding to messages quoted below)</font>\n</p>\n\n<p><font SIZE=\"2\">Using Mock objects helps you write de-coupled code... so instead of hard-coding class A to use and/or create an instance of class B, you code class A to refer to the B object via an interface that class B implements, and if A is supposed to create an instance of B, you rewrite class A to make it easy to substitute...</font></p>\n\n<p><font SIZE=\"2\">instead of:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do this:</font>\n<br><font SIZE=\"2\">-----------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------</font>\n<br><font SIZE=\"2\">1. calling &#39;new B&#39; directly...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call &#39;new B&#39; indirectly.</font>\n</p>\n\n<p><font SIZE=\"2\">2. A getting &#39;B&#39; from another class... have &#39;B&#39; passed into your class.</font>\n</p>\n\n<p><font SIZE=\"2\">For an example of 1...</font>\n</p>\n\n<p><font SIZE=\"2\">original class under test:</font>\n<br><font SIZE=\"2\">public class A</font>\n<br><font SIZE=\"2\">{</font>\n<br><font SIZE=\"2\">&nbsp; public f()</font>\n<br><font SIZE=\"2\">&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; b = new B();</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; b.doSomething();</font>\n<br><font SIZE=\"2\">&nbsp; }</font>\n<br><font SIZE=\"2\">}</font>\n</p>\n\n<p><font SIZE=\"2\">modified class under test:</font>\n<br><font SIZE=\"2\">public class A</font>\n<br><font SIZE=\"2\">{</font>\n<br><font SIZE=\"2\">&nbsp; public f()</font>\n<br><font SIZE=\"2\">&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; Binterface b = makeBinstance();</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; b.doSomething();</font>\n<br><font SIZE=\"2\">&nbsp; }</font>\n<br><font SIZE=\"2\">&nbsp; protected Binterface makeBinstance()</font>\n<br><font SIZE=\"2\">&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp;&nbsp; return new B();</font>\n<br><font SIZE=\"2\">&nbsp; }</font>\n<br><font SIZE=\"2\">}</font>\n<br><font SIZE=\"2\">in your test code:</font>\n<br><font SIZE=\"2\">public class TestA extends TestCase</font>\n<br><font SIZE=\"2\">{</font>\n<br><font SIZE=\"2\">&nbsp; class MockB extends Binterface</font>\n<br><font SIZE=\"2\">&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; bool myDoSomethingWasCalled = false;</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; public void doSomething()</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDoSomethingWasCalled = true;</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; }</font>\n<br><font SIZE=\"2\">&nbsp; }</font>\n<br><font SIZE=\"2\">&nbsp; MockB myB;</font>\n<br><font SIZE=\"2\">&nbsp; class Aprime extends A</font>\n<br><font SIZE=\"2\">&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; protected Binterface makeBinstance()</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myB = new MockB();</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return myB;</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; }</font>\n<br><font SIZE=\"2\">&nbsp; }</font>\n<br><font SIZE=\"2\">&nbsp; public testAcallsB() throws Exception</font>\n<br><font SIZE=\"2\">&nbsp; {</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; A aUnderTest = new Aprime();</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; aUnderTest.f();</font>\n<br><font SIZE=\"2\">&nbsp;&nbsp;&nbsp; assertEquals( true, myB.myDoSomethingWasCalled );</font>\n<br><font SIZE=\"2\">&nbsp; }</font>\n<br><font SIZE=\"2\">&nbsp; // etc...</font>\n<br><font SIZE=\"2\">}</font>\n</p>\n\n<p><font SIZE=\"2\">-----Original Message-----</font>\n<br><font SIZE=\"2\">From: Matt Caswell &lt;m.caswell@...&gt;</font>\n<br><font SIZE=\"2\">Subject: RE: Method Chains, was Re: Testing private methods</font>\n</p>\n\n<p><font SIZE=\"2\">How does this work in practice? Do you need to change your ClassLoader to</font>\n<br><font SIZE=\"2\">load Mock B instead of B? If not how would create a suite of tests - one</font>\n<br><font SIZE=\"2\">which tests real B, and one which tests A using Mock B?</font>\n</p>\n\n<p><font SIZE=\"2\">Thanks</font>\n</p>\n\n<p><font SIZE=\"2\">Matt</font>\n</p>\n\n<p><font SIZE=\"2\">-----Original Message-----</font>\n<br><font SIZE=\"2\">From: ghouston@...</font>\n<br><font SIZE=\"2\">To: junit@yahoogroups.com</font>\n<br><font SIZE=\"2\">Sent: 30/05/01 20:09</font>\n<br><font SIZE=\"2\">Subject: [junit] Method Chains, was Re: Testing private methods</font>\n</p>\n\n<p><font SIZE=\"2\">If your method chains are too long, use Mock objects to limit the </font>\n<br><font SIZE=\"2\">depth of interaction.</font>\n</p>\n\n<p><font SIZE=\"2\">example...</font>\n</p>\n\n<p><font SIZE=\"2\">A calls B, B then calls C,&nbsp; C then calls E.&nbsp; E returns to C, C </font>\n<br><font SIZE=\"2\">returns to B, B returns to A.</font>\n</p>\n\n<p><font SIZE=\"2\">if you want to just test A, then create a Mock of B.&nbsp; The Mock of B </font>\n<br><font SIZE=\"2\">will just validate it was called, and return.&nbsp; In the test, replace B </font>\n<br><font SIZE=\"2\">with Mock B.&nbsp; So the test looks like...</font>\n</p>\n\n<p><font SIZE=\"2\">A calls Mock B, Mock B returns to A</font>\n</p>\n\n<p><font SIZE=\"2\">This way you are only testing A and it&#39;s interaction with B.&nbsp; It also </font>\n<br><font SIZE=\"2\">helps with maintiance of your unit tests.&nbsp; Without the Mock B, </font>\n<br><font SIZE=\"2\">anytime C or E changes, you are likely to need to change your test.&nbsp; </font>\n<br><font SIZE=\"2\">With the mock object, the test is no longer dependent of C and E.</font>\n</p>\n\n<p><font SIZE=\"2\">- Greg</font>\n</p>\n\n \n</html></div>", 
    "prevInTime": 1357, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "991352360", 
    "canDelete": false, 
    "nextInTopic": 1359, 
    "prevInTopic": 1352, 
    "headers": {
        "messageIdInHeader": "PEQ5RjZCOURBQkE0Q0FFNEI5Mjg1MDI1MkM1MjM4M0FCNEY0NzRDQGV4LWVuZy1jb3JwPg=="
    }
}