{
    "numMessagesInTopic": 12, 
    "nextInTime": 21279, 
    "senderId": "93naHcOac5MeFYYSIamuX8kejj5dSovQ8xgrzIxTULfKx43iPA6soHANddVcVl-BQOts7ez4-9kAWEy8MmyuAxB9jde08BjXmLYcuKaIEFhfAsoG", 
    "systemMessage": false, 
    "subject": "Re: [junit] JUnit-JPA (Hibernate) - Spring - Struts2 testing howto", 
    "from": "&quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;", 
    "authorName": "Joakim Ohlrogge", 
    "msgSnippet": "Just a longshot, I have not done any JPA-development myself but it looks like you have a different version of  the javax.persistance API:s when you run eclipse", 
    "msgId": 21278, 
    "rawEmail": "Return-Path: &lt;joakim.ohlrogge@...&gt;\r\nX-Sender: joakim.ohlrogge@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 53272 invoked from network); 12 Jan 2009 12:51:40 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m57.grp.scd.yahoo.com with QMQP; 12 Jan 2009 12:51:40 -0000\r\nX-Received: from unknown (HELO mail-gx0-f19.google.com) (209.85.217.19)\n  by mta18.grp.scd.yahoo.com with SMTP; 12 Jan 2009 12:51:40 -0000\r\nX-Received: by gxk12 with SMTP id 12so4934465gxk.6\n        for &lt;junit@yahoogroups.com&gt;; Mon, 12 Jan 2009 04:51:36 -0800 (PST)\r\nX-Received: by 10.150.205.20 with SMTP id c20mr6333133ybg.180.1231764696291;\n        Mon, 12 Jan 2009 04:51:36 -0800 (PST)\r\nX-Received: by 10.151.117.5 with HTTP; Mon, 12 Jan 2009 04:51:36 -0800 (PST)\r\nMessage-ID: &lt;b9ee5e410901120451s728dcd7buc05a66d3157b4c4f@...&gt;\r\nDate: Mon, 12 Jan 2009 13:51:36 +0100\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;c35c90e00901090049g1405ce95pcdbd1433dddbffde@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nReferences: &lt;gk0q40+ihlq@...&gt;\n\t &lt;13ccdb5f0901071158o1e4357dfp3e6af9e123a84be5@...&gt;\n\t &lt;c35c90e00901080938r55cbe65bl93ae913556b759f8@...&gt;\n\t &lt;13ccdb5f0901081549i1c55ea3ew1a21681ea9e44b7@...&gt;\n\t &lt;c35c90e00901090049g1405ce95pcdbd1433dddbffde@...&gt;\r\nX-Google-Sender-Auth: 99be170c5cf64a4f\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nX-eGroups-From: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nFrom: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nReply-To: joakim.ohlrogge@...\r\nSubject: Re: [junit] JUnit-JPA (Hibernate) - Spring - Struts2 testing howto\r\nX-Yahoo-Group-Post: member; u=261856052; y=piYEF20eengZIU0zDBjMYH9TtLOUs7S3Molo3qoiWnHsQQr8\r\nX-Yahoo-Profile: j0hlrogge\r\n\r\nJust a longshot, I have not done any JPA-development myself but it\nlooks li=\r\nke you have a different version of  the javax.persistance\nAPI:s when you ru=\r\nn eclipse than when you run in maven. Based on that\nassumption my guess is =\r\nthat you are using a different java-version in\neclipse than in maven. Ie, e=\r\nclipse runs with java 1.6 and maven runs\nwith java 1.5. (Sometimes API:s ma=\r\nke it into the java platform between\nversions that can lead to this kind of=\r\n conflicts)\n\nIn eclipse you can check your launch for junit to see which jr=\r\ne is used.\n\nIt could also be the order of jar-files on your classpath. In t=\r\nhat\ncase it&#39;s also possible to change the order of the jar-files in the\npro=\r\nperties for your project. Make sure the order matches your pom.\n\nJust some =\r\nthings to check, could help...\n\nOn Fri, Jan 9, 2009 at 9:49 AM, Marko Majki=\r\nc &lt;majkic@...&gt; wrote:\n&gt; It seems that applicationContext-test.xml is =\r\nread, but there&#39;s failure\n&gt; trace:\n&gt; java.lang.NoSuchMethodError:\n&gt; javax.p=\r\nersistence.PersistenceContext.properties()[Ljavax/persistence/PersistencePr=\r\noperty;\n&gt; at\n&gt; org.springframework.orm.jpa.support.PersistenceAnnotationBea=\r\nnPostProcessor$PersistenceElement.&lt;init&gt;(PersistenceAnnotationBeanPostProce=\r\nssor.java:543)\n&gt; at\n&gt; org.springframework.orm.jpa.support.PersistenceAnnota=\r\ntionBeanPostProcessor$2.doWith(PersistenceAnnotationBeanPostProcessor.java:=\r\n376)\n&gt; at\n&gt; org.springframework.util.ReflectionUtils.doWithMethods(Reflecti=\r\nonUtils.java:435)\n&gt; at\n&gt; org.springframework.util.ReflectionUtils.doWithMet=\r\nhods(ReflectionUtils.java:412)\n&gt; at\n&gt; org.springframework.orm.jpa.support.P=\r\nersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAn=\r\nnotationBeanPostProcessor.java:363)\n&gt; at\n&gt; org.springframework.orm.jpa.supp=\r\nort.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(=\r\nPersistenceAnnotationBeanPostProcessor.java:296)\n&gt; at\n&gt; org.springframework=\r\n.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDe=\r\nfinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:745)\n&gt; at\n&gt; =\r\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactor=\r\ny.doCreateBean(AbstractAutowireCapableBeanFactory.java:448)\n&gt; at\n&gt; org.spri=\r\nngframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(=\r\nAbstractAutowireCapableBeanFactory.java:409)\n&gt; at java.security.AccessContr=\r\noller.doPrivileged(Native Method)\n&gt; at\n&gt; org.springframework.beans.factory.=\r\nsupport.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapab=\r\nleBeanFactory.java:380)\n&gt; at\n&gt; org.springframework.beans.factory.support.Ab=\r\nstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)\n&gt; at\n&gt; org.spri=\r\nngframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton=\r\n(DefaultSingletonBeanRegistry.java:221)\n&gt; at\n&gt; org.springframework.beans.fa=\r\nctory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)\n&gt;=\r\n at\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.getBean=\r\n(AbstractBeanFactory.java:185)\n&gt; at\n&gt; org.springframework.beans.factory.sup=\r\nport.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)\n&gt; at\n&gt; org.s=\r\npringframework.beans.factory.support.DefaultListableBeanFactory.preInstanti=\r\nateSingletons(DefaultListableBeanFactory.java:429)\n&gt; at\n&gt; org.springframewo=\r\nrk.context.support.AbstractApplicationContext.finishBeanFactoryInitializati=\r\non(AbstractApplicationContext.java:729)\n&gt; at\n&gt; org.springframework.context.=\r\nsupport.AbstractApplicationContext.refresh(AbstractApplicationContext.java:=\r\n381)\n&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n&gt; at\n=\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java=\r\n:39)\n&gt; at\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMetho=\r\ndAccessorImpl.java:25)\n&gt; at java.lang.reflect.Method.invoke(Method.java:597=\r\n)\n&gt; at\n&gt; org.springframework.test.jpa.AbstractJpaTests.runBare(AbstractJpaT=\r\nests.java:230)\n&gt; at junit.framework.TestResult$1.protect(TestResult.java:10=\r\n6)\n&gt; at junit.framework.TestResult.runProtected(TestResult.java:124)\n&gt; at j=\r\nunit.framework.TestResult.run(TestResult.java:109)\n&gt; at junit.framework.Tes=\r\ntCase.run(TestCase.java:120)\n&gt; at junit.framework.TestSuite.runTest(TestSui=\r\nte.java:230)\n&gt; at junit.framework.TestSuite.run(TestSuite.java:225)\n&gt; at\n&gt; =\r\norg.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3=\r\nTestReference.java:130)\n&gt; at\n&gt; org.eclipse.jdt.internal.junit.runner.TestEx=\r\necution.run(TestExecution.java:38)\n&gt; at\n&gt; org.eclipse.jdt.internal.junit.ru=\r\nnner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)\n&gt; at\n&gt; org.eclips=\r\ne.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java=\r\n:673)\n&gt; at\n&gt; org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(Rem=\r\noteTestRunner.java:386)\n&gt; at\n&gt; org.eclipse.jdt.internal.junit.runner.Remote=\r\nTestRunner.main(RemoteTestRunner.java:196)\n&gt;\n&gt; Maven 2 &quot;mvn test&quot; is workin=\r\ng fine.\n&gt;\n&gt; On Fri, Jan 9, 2009 at 12:49 AM, Cenk =C7ivici &lt;cenk.civici@gma=\r\nil.com&gt; wrote:\n&gt;&gt; Hi,\n&gt;&gt;\n&gt;&gt; What happens when you try to run this in Eclips=\r\ne ( I am guessing thats\n&gt;&gt; what you mean by running alone). Does it fail wh=\r\nen it tries to locate\n&gt;&gt; the app context? Is app context xml on the classpa=\r\nth? What error do\n&gt;&gt; you see?\n&gt;&gt;\n&gt;&gt; Cheers\n&gt;&gt; Cenk\n&gt;&gt;\n&gt;&gt; On Thu, Jan 8, 200=\r\n9 at 7:38 PM, Marko Majkic &lt;majkic@...&gt; wrote:\n&gt;&gt;&gt; Thanks for the ref=\r\nerence. I did something that works, but it works\n&gt;&gt;&gt; only when I do &quot;mvn te=\r\nst&quot;. I cannot run test alone.\n&gt;&gt;&gt;\n&gt;&gt;&gt; I use AbstractJpaTests and those two =\r\n&quot;preparing&quot; methods:\n&gt;&gt;&gt;\n&gt;&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D\n&gt;&gt;&gt; package net.beote=\r\nl.service;\n&gt;&gt;&gt;\n&gt;&gt;&gt; import java.util.List;\n&gt;&gt;&gt;\n&gt;&gt;&gt; import javax.persistence.=\r\nEntityManager;\n&gt;&gt;&gt; import javax.persistence.EntityManagerFactory;\n&gt;&gt;&gt; impor=\r\nt javax.persistence.Persistence;\n&gt;&gt;&gt;\n&gt;&gt;&gt; import net.beotel.model.Bank;\n&gt;&gt;&gt;\n=\r\n&gt;&gt;&gt; import org.springframework.test.jpa.AbstractJpaTests;\n&gt;&gt;&gt; import org.sp=\r\nringframework.transaction.annotation.Transactional;\n&gt;&gt;&gt;\n&gt;&gt;&gt; public class Ba=\r\nnkServiceTest extends AbstractJpaTests {\n&gt;&gt;&gt;\n&gt;&gt;&gt; private BankServiceImpl ba=\r\nnkService =3D new BankServiceImpl() ;\n&gt;&gt;&gt;\n&gt;&gt;&gt; private static EntityManagerF=\r\nactory emf;\n&gt;&gt;&gt; private static EntityManager em;\n&gt;&gt;&gt;\n&gt;&gt;&gt; public void onSetU=\r\np(){\n&gt;&gt;&gt; emf =3D Persistence.createEntityManagerFactory(&quot;testing1&quot;);\n&gt;&gt;&gt; em=\r\n =3D emf.createEntityManager();\n&gt;&gt;&gt; em.getTransaction().begin();\n&gt;&gt;&gt; bankSe=\r\nrvice.setEntityManager(em);\n&gt;&gt;&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt; public void onTearDown(){\n&gt;&gt;&gt; em.=\r\ngetTransaction().commit();\n&gt;&gt;&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt; public BankService getBankService(=\r\n) {\n&gt;&gt;&gt; return bankService;\n&gt;&gt;&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt; public BankServiceTest() {\n&gt;&gt;&gt; su=\r\nper();\n&gt;&gt;&gt; }\n&gt;&gt;&gt; protected String[] getConfigLocations() {\n&gt;&gt;&gt; return new S=\r\ntring[] {\n&gt;&gt;&gt; &quot;classpath:applicationContext-test.xml&quot;,\n&gt;&gt;&gt; };\n&gt;&gt;&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt;=\r\n @Transactional\n&gt;&gt;&gt; public void testAll() throws Exception {\n&gt;&gt;&gt; List&lt;Bank&gt;=\r\n banks =3D bankService.findAll();\n&gt;&gt;&gt; int initialCount =3D banks.size();\n&gt;&gt;=\r\n&gt; Bank bank=3D new Bank();\n&gt;&gt;&gt; bank.setName(&quot;OTP&quot;);\n&gt;&gt;&gt; bankService.save(ba=\r\nnk);\n&gt;&gt;&gt; assertNotNull(bank.getId());\n&gt;&gt;&gt;\n&gt;&gt;&gt; }\n&gt;&gt;&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt; =3D=3D=3D=3D=\r\n=3D=3D=3D=3D\n&gt;&gt;&gt;\n&gt;&gt;&gt; Is there any way to run this test alone? Do I have to =\r\ninclude\n&gt;&gt;&gt; &quot;applicationContext-test.xml&quot; (from the src/test/resources) exp=\r\nlicitly\n&gt;&gt;&gt; in the code? I don&#39;t have to do this with my application (inclu=\r\nde\n&gt;&gt;&gt; applicationContext.xml from the web.xml). Do I have to include\n&gt;&gt;&gt; e=\r\nxplcitly persistence-unit?\n&gt;&gt;&gt;\n&gt;&gt;&gt; At last, is there any working example (s=\r\nimple) testing some service\n&gt;&gt;&gt; (dao) using JPA? Thanks.\n&gt;&gt;&gt;\n&gt;&gt;&gt; On Wed, Ja=\r\nn 7, 2009 at 8:58 PM, Cenk =C7ivici &lt;cenk.civici@...&gt;\n&gt;&gt;&gt; wrote:\n&gt;&gt;&gt;&gt;=\r\n Hi,\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Have you looked at Spring integration testing support?\n&gt;&gt;&gt;&gt;\n=\r\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; http://static.springframework.org/spring/docs/2.5.x/ref=\r\nerence/testing.html#testcontext-framework\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Spring TestContext lets=\r\n you load an app context, configure\n&gt;&gt;&gt;&gt; transactions per fixture/method et=\r\nc.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Cheers\n&gt;&gt;&gt;&gt; Cenk =C7ivici\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; On Wed, Jan 7, 2009 at 1:3=\r\n9 AM, majkic@... &lt;majkic@...&gt;\n&gt;&gt;&gt;&gt; wrote:\n&gt;&gt;&gt;&gt;&gt; Hi guys,\n&gt;&gt;&gt;&gt;&gt; =\r\nI&#39;m new in the group and I couldn&#39;t find anything on testing\n&gt;&gt;&gt;&gt;&gt; combinat=\r\nion in the title.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; I have applicationContext.xml where EntityMan=\r\nagerFactory is\n&gt;&gt;&gt;&gt;&gt; configured. Model classes are mapped using Annotations=\r\n. My service\n&gt;&gt;&gt;&gt;&gt; classes (DAO - for example BankImpl) implements interfac=\r\nes (for\n&gt;&gt;&gt;&gt;&gt; example Bank). Methods from these implementation are called i=\r\nn Struts2\n&gt;&gt;&gt;&gt;&gt; action classes (injected).\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; How can I configure =\r\nmy tests to be runnable as single tests and as\n&gt;&gt;&gt;&gt;&gt; Maven2 tests? Is there=\r\n any simple example - tutorial? Should I have\n&gt;&gt;&gt;&gt;&gt; separate applicationCon=\r\ntext-test.xml?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt; \n\n\n\n-- \n------------=\r\n-----------------------------------------\nJoakim Ohlrogge\nAgical AB\nV=E4ste=\r\nrl=E5nggatan 79, 2 tr\n111 29 Stockholm, SWEDEN\n\nMobile: +46-708-754004\nBlog=\r\n: johlrogge.wordpress.com\nE-mail: joakim.ohlrogge@...\n\n", 
    "profile": "j0hlrogge", 
    "topicId": 21269, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 261856052, 
    "prevInTime": 21277, 
    "contentTrasformed": false, 
    "postDate": "1231764696", 
    "canDelete": false, 
    "nextInTopic": 21296, 
    "prevInTopic": 21277, 
    "headers": {
        "inReplyToHeader": "PGMzNWM5MGUwMDkwMTA5MDA0OWcxNDA1Y2U5NXBjZGJkMTQzM2RkZGJmZmRlQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGI5ZWU1ZTQxMDkwMTEyMDQ1MXM3MjhkY2Q3YnVjMDVhNjZkMzE1N2I0YzRmQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGdrMHE0MCtpaGxxQGVHcm91cHMuY29tPgkgPDEzY2NkYjVmMDkwMTA3MTE1OG8xZTQzNTdkZnAzZTZhZjllMTIzYTg0YmU1QG1haWwuZ21haWwuY29tPgkgPGMzNWM5MGUwMDkwMTA4MDkzOHI1NWNiZTY1Ymw5M2FlOTEzNTU2Yjc1OWY4QG1haWwuZ21haWwuY29tPgkgPDEzY2NkYjVmMDkwMTA4MTU0OWkxYzU1ZWEzZXcxYTIxNjgxZWE5ZTQ0YjdAbWFpbC5nbWFpbC5jb20+CSA8YzM1YzkwZTAwOTAxMDkwMDQ5ZzE0MDVjZTk1cGNkYmQxNDMzZGRkYmZmZGVAbWFpbC5nbWFpbC5jb20+"
    }
}