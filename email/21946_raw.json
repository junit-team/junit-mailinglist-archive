{
    "numMessagesInTopic": 4, 
    "nextInTime": 21947, 
    "senderId": "Vb5YpxqeMFCHr8vag6aZmekWgoRQhCb3mn4mfsLiWLCE7RUK3Hj3WN49kDsp5bt9vOetKnNsBP3e7FdhFj3zlU8O2zGiv7-OLp6FJCk", 
    "systemMessage": true, 
    "subject": "Reading property files fails when running from Ant / Classpath not \tset", 
    "from": "Sampo Niskanen &lt;sampo.niskanen@...&gt;", 
    "authorName": "Sampo Niskanen", 
    "msgSnippet": "Hi, I m having trouble running my JUnit tests from an Ant script, and haven t been able to find any solution in the FAQ or on the net. Though the classpath is", 
    "msgId": 21946, 
    "rawEmail": "Return-Path: &lt;sampo.niskanen@...&gt;\r\nReceived: (qmail 97414 invoked from network); 27 Sep 2009 21:53:32 -0000\r\nReceived: from unknown (98.137.34.46)\n  by m1.grp.re1.yahoo.com with QMQP; 27 Sep 2009 21:53:32 -0000\r\nReceived: from unknown (HELO n44d.bullet.mail.sp1.yahoo.com) (66.163.169.158)\n  by mta3.grp.sp2.yahoo.com with SMTP; 27 Sep 2009 21:53:32 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1254088393; bh=JMc/pqamcwp/xsn6G3tKHbjv10GXkqMAPMBlaI+SFs8=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:MIME-Version:X-Received:Date:X-Google-Sender-Auth:Message-ID:To:Content-Type:Content-Transfer-Encoding:X-Originating-IP:X-eGroups-Msg-Info:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:X-YGroups-SubInfo:Sender:X-Yahoo-Newman-Property:X-eGroups-Approved-By:X-eGroups-Auth; b=vQozdqMFXLVBzkosZCYPR0ByLit8kx0ZR6miphm4eYbYSth0dOD+nn++I/99ZPxHEpG99oDoFp2IVvSHXbTk7RnxI5+qIGR4HYPtqL+50zO3UNH4cc2hNM2V+NxMENfG\r\nReceived: from [69.147.65.149] by n44.bullet.mail.sp1.yahoo.com with NNFMP; 27 Sep 2009 21:53:13 -0000\r\nReceived: from [98.137.34.32] by t9.bullet.mail.sp1.yahoo.com with NNFMP; 27 Sep 2009 21:53:13 -0000\r\nX-Sender: sampo.niskanen@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 81885 invoked from network); 27 Sep 2009 12:18:40 -0000\r\nX-Received: from unknown (69.147.108.200)\n  by m7.grp.re1.yahoo.com with QMQP; 27 Sep 2009 12:18:40 -0000\r\nX-Received: from unknown (HELO mail-ew0-f224.google.com) (209.85.219.224)\n  by mta1.grp.re1.yahoo.com with SMTP; 27 Sep 2009 12:18:40 -0000\r\nX-Received: by mail-ew0-f224.google.com with SMTP id 24so7872898ewy.22\n        for &lt;junit@yahoogroups.com&gt;; Sun, 27 Sep 2009 05:18:40 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.216.56.4 with SMTP id l4mr492760wec.158.1254053919782; Sun, 27 \n\tSep 2009 05:18:39 -0700 (PDT)\r\nDate: Sun, 27 Sep 2009 15:18:39 +0300\r\nX-Google-Sender-Auth: 06932768dccf3d28\r\nMessage-ID: &lt;bca2d9ea0909270518v431bd319u640aadee46ad36a2@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Sampo Niskanen &lt;sampo.niskanen@...&gt;\r\nSubject: Reading property files fails when running from Ant / Classpath not \n\tset\r\nX-Yahoo-Group-Post: member; u=80363754; y=B8HvMZinOWsdiFBlf7M5_b2-tD8o2uo3JLeb2fkca9fhxTivBDrMxg\r\nX-Yahoo-Profile: samponiskanen\r\nX-YGroups-SubInfo: t=0;f=16;g=z02Eii974L7H_waRoQDmuNe_9SjqMidMAZtRD8jOPfIie3zemInfHD5eKSPyWV48G8s;\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 27 Sep 2009 21:53:11 -0000\r\n\r\nHi,\n\nI&#39;m having trouble running my JUnit tests from an Ant script, and\nhave=\r\nn&#39;t been able to find any solution in the FAQ or on the net.\nThough the cla=\r\nsspath is set so that Junit finds my class files, the\nclasses themselved ca=\r\nnnot find my build.properties file which is read\nas runtime.\n\nI have a file=\r\n &quot;build.properties&quot; in my main project directory, which\ncontains e.g. the s=\r\noftware version number.  This is automatically\nloaded by a class that is us=\r\ned by my unit test.  In Eclipse if I\ndirectly run the test, it fails, but a=\r\nfter selecting Run\nconfigurations and adding the project root directory to =\r\nthe classpath\nit runs fine.\n\nI&#39;ve tried multiple ways of adding the base di=\r\nrectory also to the\nJUnit classpath (in a separate classpath that is refere=\r\nnced and as an\nexplicit classpath in the &lt;junit&gt; task), but every time it f=\r\nails to\nfind the property file.  I&#39;ve also tried copying the property file\n=\r\ninto the directory in which the base and/or test classes are compiled\n(and =\r\nfrom which JUnit successfully runs the tests), but it cannot find\nit even t=\r\nhen.\n\nI added a line\n\n        System.out.println(&quot;TEST CLASSPATH: &quot; +\nSyste=\r\nm.getProperty(&quot;java.class.path&quot;));\n\nto the beginning of my test method to p=\r\nrint out the current classpath.\n When running from Eclipse the classpath co=\r\nntains the base directory,\nbut when running from Ant it does not, it contai=\r\nns only Ant-related\njars.  It therefore seems that even though the classpat=\r\nh is set\ncorrectly to find the classes (and removing the paths causes all t=\r\nests\nto fail), the classpath is not propagated to the running system.  Does=\r\n\nJUnit use for example a custom class loader, which could cause this\nkind o=\r\nf behavior?  I&#39;ve tested both forking and non-forking mode\nwithout avail.\n\n=\r\nBelow is the classpath printed by the tests and excerpts from the Ant\nbuild=\r\n file.  The entire build file and test suite can be checked out\nfrom Subver=\r\nsion as instructed at\nhttp://openrocket.sourceforge.net/download.html\n\nThan=\r\nks for any help!\n\n\nBest regards,\n   Sampo Niskanen\n\n\n\nThe output when runni=\r\nng the test from Eclipse:\n\nTEST CLASSPATH:\n/home/sampo/Projects/OpenRocket:=\r\n/home/sampo/Projects/OpenRocket/bin:/home/sampo/Projects/OpenRocket/lib/mig=\r\nlayout15-swing.jar:/home/sampo/Projects/libs/jfreechart-1.0.13/lib/jcommon-=\r\n1.0.16.jar:/home/sampo/Projects/libs/jfreechart-1.0.13/lib/jfreechart-1.0.1=\r\n3.jar:/home/sampo/Projects/OpenRocket/extra-lib/RXTXcomm.jar:/home/sampo/ec=\r\nlipse/plugins/org.junit4_4.3.1/junit.jar:/home/sampo/eclipse/configuration/=\r\norg.eclipse.osgi/bundles/165/1/.cp/:/home/sampo/eclipse/configuration/org.e=\r\nclipse.osgi/bundles/163/1/.cp/:/home/sampo/eclipse/configuration/org.eclips=\r\ne.osgi/bundles/164/1/.cp/\n\nand from Ant:\n\nTEST CLASSPATH:\n/usr/share/ant/li=\r\nb/ant-launcher.jar:/usr/share/java/xmlParserAPIs.jar:/usr/share/java/xerces=\r\nImpl.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-launcher.j=\r\nar:/usr/share/ant/lib/ant-trax.jar:/usr/share/ant/lib/ant-apache-bsf.jar:/u=\r\nsr/share/ant/lib/catalina5.5-ant.jar:/usr/share/ant/lib/ant.jar:/usr/share/=\r\nant/lib/ant-apache-log4j.jar:/usr/share/ant/lib/junit.jar:/usr/share/ant/li=\r\nb/ant-commons-net.jar:/usr/share/ant/lib/ant-javamail.jar:/usr/share/ant/li=\r\nb/ant-antlr.jar:/usr/share/ant/lib/ant-jsch.jar:/usr/share/ant/lib/tomcat5.=\r\n5-jkstatus-ant.jar:/usr/share/ant/lib/ant-jdepend.jar:/usr/share/ant/lib/js=\r\nch.jar:/usr/share/ant/lib/bcel.jar:/usr/share/ant/lib/ant-apache-bcel.jar:/=\r\nusr/share/ant/lib/ant-apache-oro.jar:/usr/share/ant/lib/ant-nodeps.jar:/usr=\r\n/share/ant/lib/ant-commons-logging.jar:/usr/share/ant/lib/ant-jmf.jar:/usr/=\r\nshare/ant/lib/ant-apache-regexp.jar:/usr/share/ant/lib/ant-swing.jar:/usr/s=\r\nhare/ant/lib/junit4.jar:/usr/share/ant/lib/ant-apache-resolver.jar:/usr/sha=\r\nre/ant/lib/catalina5.5-ant-jmx.jar:/usr/lib/jvm/java-6-sun-1.6.0.16/lib/too=\r\nls.jar\n\n\nExcerpts from build.xml:\n\n\t&lt;!-- Classpath definitions --&gt;\n\t&lt;path i=\r\nd=3D&quot;classpath&quot;&gt;\n\t\t&lt;fileset dir=3D&quot;${lib.dir}&quot; includes=3D&quot;**/*.jar&quot;/&gt;\n\t&lt;/p=\r\nath&gt;\n\t\n\t&lt;path id=3D&quot;test-classpath&quot;&gt;\n\t\t&lt;path refid=3D&quot;classpath&quot;/&gt;\n\t\t&lt;pathe=\r\nlement location=3D&quot;${basedir}&quot;/&gt;\n\t\t&lt;pathelement location=3D&quot;${build-test.di=\r\nr}&quot;/&gt;\n\t\t&lt;pathelement location=3D&quot;${classes.dir}&quot;/&gt;\n\t\t&lt;pathelement location=\r\n=3D&quot;${ant.library.dir}/junit4.jar&quot;/&gt;\n\t&lt;/path&gt;\n\t\n...\n\n\t&lt;!--  Unit tests  --&gt;=\r\n\n\t&lt;target name=3D&quot;unittest&quot; description=3D&quot;Execute unit tests&quot; depends=3D&quot;b=\r\nuild&quot;&gt;\n\t\t&lt;echo&gt;Building unit tests&lt;/echo&gt;\n\t\t&lt;mkdir dir=3D&quot;${build-test.dir}=\r\n&quot;/&gt;\n\t\t&lt;javac srcdir=3D&quot;${src-test.dir}&quot; destdir=3D&quot;${build-test.dir}&quot;\nclass=\r\npathref=3D&quot;test-classpath&quot;/&gt;\n\t\t\n\t\t&lt;echo&gt;Running unit tests&lt;/echo&gt;\n\t\t&lt;mkdir =\r\ndir=3D&quot;tmp/rawtestoutput&quot;/&gt;\n\t\t&lt;junit printsummary=3D&quot;true&quot; failureproperty=\r\n=3D&quot;junit.failure&quot;&gt;\n\t\t\t&lt;classpath&gt;\n\t\t\t\t&lt;path refid=3D&quot;test-classpath&quot;/&gt;\n\t\t\t=\r\n\t&lt;path location=3D&quot;${basedir}&quot;/&gt;\n\t\t\t&lt;/classpath&gt;\n\t\t\t&lt;batchtest todir=3D&quot;tmp=\r\n/rawtestoutput&quot;&gt;\n\t\t\t\t&lt;fileset dir=3D&quot;${build-test.dir}&quot;&gt;\n\t\t\t\t\t&lt;include name=\r\n=3D&quot;**/*Test*.class&quot; /&gt;\n\t\t\t\t\t&lt;exclude name=3D&quot;Test.class&quot; /&gt;\n\t\t\t\t&lt;/fileset&gt;=\r\n\n\t\t\t\t&lt;formatter type=3D&quot;xml&quot;/&gt;\n\t\t\t&lt;/batchtest&gt;\n\t\t&lt;/junit&gt;\n\t\t&lt;junitreport to=\r\ndir=3D&quot;tmp&quot;&gt;\n\t\t\t&lt;fileset dir=3D&quot;tmp/rawtestoutput&quot;/&gt;\n\t\t\t&lt;report todir=3D&quot;tm=\r\np/test-reports&quot;/&gt;\n\t\t&lt;/junitreport&gt;\n\t\t&lt;fail if=3D&quot;junit.failure&quot; message=3D&quot;=\r\nUnit test(s) failed.  See reports!&quot;/&gt;\n \t&lt;/target&gt;\n\n\n-- \n   Sampo Niskanen  =\r\n &lt;=3D&gt;   http://www.iki.fi/sampo.niskanen/\n\n", 
    "profile": "samponiskanen", 
    "topicId": 21946, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 80363754, 
    "prevInTime": 21945, 
    "contentTrasformed": false, 
    "postDate": "1254053919", 
    "canDelete": false, 
    "nextInTopic": 21948, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGJjYTJkOWVhMDkwOTI3MDUxOHY0MzFiZDMxOXU2NDBhYWRlZTQ2YWQzNmEyQG1haWwuZ21haWwuY29tPg=="
    }
}