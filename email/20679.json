{
    "numMessagesInTopic": 4, 
    "nextInTime": 20680, 
    "senderId": "DihVDsjU7cz6iCuQqdvbmsXgCRNr7IFA5l1LEPXBCV2CyoMXa_jLag7L3TSZBWr6Acpr5lYpV-RzjP2_iLfs7g1wO4lewIs_", 
    "systemMessage": false, 
    "subject": "RE: [junit] which is the best way to obtain test method execution time", 
    "from": "&quot;Kent Beck&quot; &lt;kentb@...&gt;", 
    "authorName": "Kent Beck", 
    "msgSnippet": "Dear Shubha, Here is one way to solve your problem in JUnit 4.5. The key is understanding that in 4.5 every test is run by a block of statements (see ", 
    "msgId": 20679, 
    "profile": "kentlbeck", 
    "topicId": 20672, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "messageBody": "<div id=\"ygrps-yiv-999056394\">Dear Shubha,<br/>\n <br/>\nHere is one way to solve your problem in JUnit 4.5. The key is understanding<br/>\nthat in 4.5 every test is run by a &quot;block&quot; of &quot;statements&quot; (see<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://threeriversinstitute.org/TwoMoreImplementationPatterns.htm\">http://threeriversinstitute.org/TwoMoreImplementationPatterns.htm</a> for more<br/>\ndetails). Befores and afters are run by statements high up in the block. The<br/>\nlast statement in the block just invokes the test method. You can modify<br/>\nthis behavior by wrapping this statement in a statement that measures time.<br/>\nHere&#39;s an overview of the sample code below:<br/>\n  * NanoTimer is a little utility to measure time (at the end we&#39;ll make<br/>\nsure that timing just the test takes less than half the time of timing the<br/>\ntest including @Before and @After)<br/>\n  * MeasuringInvoker wraps a Statement and times it. You will probably want<br/>\nto save your timing measurements somewhere for later reporting.<br/>\n  * The MeasuringRunner extends the default BlockJUnit4ClassRunner by<br/>\nwrapping the superclass&#39; default invoker with our MeasuringInvoker.<br/>\n <br/>\nThat&#39;s the body of the extension. What follows is a self-test of the code.<br/>\nThe sample class has a @Before and @After to start and end measuring the<br/>\noverall time. The test ensures that the time required for just the test<br/>\nmethod is less than half of the time required for the whole test including<br/>\nbefores and afters.<br/>\n <br/>\nI hope this helps.<br/>\n <br/>\nRegards,<br/>\n <br/>\nKent Beck<br/>\nThree Rivers Institute<br/>\npublic class MeasureTestOnlyTimeTest {<br/>\n <br/>\n static class NanoTimer {<br/>\n  private long start;<br/>\n  private long end;<br/>\n  public void start() { start= System.nanoTime(); }<br/>\n  public void end() { end= System.nanoTime(); }<br/>\n  public long duration() { return end - start; }<br/>\n }<br/>\n<br/>\n static NanoTimer all= new NanoTimer();<br/>\n static NanoTimer justTest= new NanoTimer();<br/>\n <br/>\n static class MeasuringInvoker extends Statement {<br/>\n  private final Statement invoker;<br/>\n  <br/>\n  public MeasuringInvoker(Statement invoker) {<br/>\n   this.invoker= invoker;<br/>\n  }<br/>\n  <br/>\n  @Override<br/>\n  public void evaluate() throws Throwable {<br/>\n   justTest.start();<br/>\n   invoker.evaluate();<br/>\n   justTest.end();<br/>\n  }<br/>\n }<br/>\n <br/>\n public static class MeasuringRunner extends BlockJUnit4ClassRunner {<br/>\n  public MeasuringRunner(Class&lt; ? &gt; klass) throws InitializationError {<br/>\n   super(klass);<br/>\n  }<br/>\n<br/>\n  @Override<br/>\n  protected Statement invoke(FrameworkMethod method, Object test) {<br/>\n   return new MeasuringInvoker(super.invoke(method, test));<br/>\n  }<br/>\n }<br/>\n <br/>\n @RunWith(MeasuringRunner.class)<br/>\n public static class LongBeforeAndAfter {<br/>\n  @Before public void before() {<br/>\n   all.start();<br/>\n  }<br/>\n  @After public void after() {<br/>\n   all.end();<br/>\n  }<br/>\n  @Test public void test() {<br/>\n  }<br/>\n }<br/>\n  <br/>\n @Test public void dontMeasureBeforeAndAfter() {<br/>\n  JUnitCore.runClasses(LongBeforeAndAfter.class);<br/>\n  assertTrue(all.duration() &gt; justTest.duration() * 2);<br/>\n }<br/>\n}<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 20678, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1215721421", 
    "canDelete": false, 
    "nextInTopic": 20681, 
    "prevInTopic": 20672, 
    "headers": {
        "inReplyToHeader": "PDEwMzYzNy40NzI4MC5xbUB3ZWI5NDgwNS5tYWlsLmluMi55YWhvby5jb20+", 
        "messageIdInHeader": "PDAxYjUwMWM4ZTJjYSRkOTA3ZmUzMCQ0MDAwYThjMEBrZW50c3BhdmlsaW9uPg==", 
        "referencesHeader": "PDEwMzYzNy40NzI4MC5xbUB3ZWI5NDgwNS5tYWlsLmluMi55YWhvby5jb20+"
    }
}