{
    "numMessagesInTopic": 1, 
    "nextInTime": 19428, 
    "senderId": "ihD7PizXW1FdxdQRbyvVohWpDeZf4vxLEHlepWEsyyQDeIgl2Pak46q7Sy1d5sl2rmIgDonqiiqPYmc3hXFbWDhS56chzA", 
    "systemMessage": false, 
    "subject": "Asking how to test class with collaboration to a static method", 
    "from": "slawalata &lt;slawalata@...&gt;", 
    "authorName": "slawalata", 
    "msgSnippet": "Greetings, I am trying to find how I can test a class which has collaboration with a singleton or static class. I have attached the source code in this email.", 
    "msgId": 19427, 
    "profile": "k4mpret77", 
    "topicId": 19427, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 313521597, 
    "messageBody": "<div id=\"ygrps-yiv-1504862611\">Greetings,<br/>\n<br/>\nI am trying to find how I can test a class which has collaboration with<br/>\na singleton or static class.<br/>\n<br/>\nI have attached the source code in this email. I have read many papers<br/>\nin google and mostly they says that single ton is ugly etc :) but i must<br/>\ntest it and no other way.<br/>\n<br/>\nI want to test OrderBusinessDelegate.isPossible() (a singleton class)<br/>\nwhich has collaboration with another static class method<br/>\nProductDelegate.getOderByPno()<br/>\n<br/>\nI try to isolate the OrderBusinessDelegate and change the<br/>\nProductDelegate with MockProductDelegate and still it doesnt work like I<br/>\nexpect.<br/>\n<br/>\nThis is the output <br/>\n<br/>\n[code]<br/>\n0    [main] DEBUG Order.OrderBusinessDelegate  - returning<br/>\nProductDelegate<br/>\n2    [main] DEBUG Order.ProductDelegate  - getOrderByPno from<br/>\nProductDelegate<br/>\n2    [main] DEBUG TestOrderDelegate  - isPossible() : 1 &lt;-&gt;<br/>\nOrderBusinessDelegate<br/>\n3    [main] DEBUG Order.MockOrderBusinessDelegate  -<br/>\nMockOrderBusinessdelegate is instanciated<br/>\n3    [main] DEBUG Order.MockOrderBusinessDelegate  - returning<br/>\nMockProductDelegate<br/>\n3    [main] DEBUG Order.ProductDelegate  - getOrderByPno from<br/>\nProductDelegate<br/>\n3    [main] DEBUG TestOrderDelegate  - isPossible() : 1 &lt;-&gt;<br/>\nMockOrderBusinessDelegate<br/>\n[/code]<br/>\n<br/>\nif ProductDelegate.getOderByPno() and<br/>\nMockProductDelegate.getOderByPno() are changed into non static, i get<br/>\nthe expected result (inheritance)<br/>\n<br/>\n[code]<br/>\n0    [main] DEBUG Order.OrderBusinessDelegate  - returning<br/>\nProductDelegate<br/>\n2    [main] DEBUG Order.ProductDelegate  - getOrderByPno from<br/>\nProductDelegate<br/>\n2    [main] DEBUG TestOrderDelegate  - isPossible() : 1 &lt;-&gt;<br/>\nOrderBusinessDelegate<br/>\n3    [main] DEBUG Order.MockOrderBusinessDelegate  -<br/>\nMockOrderBusinessdelegate is instanciated<br/>\n3    [main] DEBUG Order.MockOrderBusinessDelegate  - returning<br/>\nMockProductDelegate<br/>\n3    [main] DEBUG Order.MockProductDelegate  - getOrderByPno from<br/>\nMockProductDelegate<br/>\n3    [main] DEBUG TestOrderDelegate  - isPossible() : 10 &lt;-&gt;<br/>\nMockOrderBusinessDelegate<br/>\n[/code]<br/>\n<br/>\n<br/>\nI know it is not related with how to use JUnit but maybe someone has<br/>\nalready some experience how to test this unit or class. And later I can<br/>\nuse JUnit to perform automatic testing.<br/>\n<br/>\nThanks for any advices and responds<br/>\n<br/>\nbest regards<br/>\nsanga lawalata<br/>\n<br/>\nbelows are the java codes :<br/>\n<br/>\nTestOrderDelegate.java<br/>\n[code]<br/>\nimport org.apache.log4j.Logger;<br/>\nimport org.apache.log4j.PropertyConfigurator;<br/>\n<br/>\nimport Order.MockOrderBusinessDelegate;<br/>\nimport Order.OrderBusinessDelegate;<br/>\n<br/>\n<br/>\npublic class TestOrderDelegate {<br/>\n<br/>\n\tprivate static Logger logger =<br/>\nLogger.getLogger(TestOrderDelegate.class);<br/>\n\t<br/>\n\tpublic static void main (String[] args){<br/>\n<br/>\n\t\tPropertyConfigurator.configure(&quot;src/log4j.properties&quot;);<br/>\n\t\t\t<br/>\n\t\t//1.<br/>\n\t\tOrderBusinessDelegate orderDelegate =<br/>\nOrderBusinessDelegate.getInstance();<br/>\n\t\tlogger.debug(&quot;isPossible() : &quot;+orderDelegate.isPossible()+&quot; &lt;-&gt;<br/>\n&quot;+orderDelegate.toString());<br/>\n\t\t<br/>\n\t\t<br/>\n\t\t//2.<br/>\n\t\tOrderBusinessDelegate mockOrderDelegate =<br/>\nMockOrderBusinessDelegate.getInstance();\t\t<br/>\n\t\tif (mockOrderDelegate instanceof MockOrderBusinessDelegate) {<br/>\n\t\t\tMockOrderBusinessDelegate new_name = (MockOrderBusinessDelegate)<br/>\nmockOrderDelegate;<br/>\n\t\t\tlogger.debug(&quot;isPossible() : &quot;+mockOrderDelegate.isPossible()+&quot; &lt;-&gt;<br/>\n&quot;+mockOrderDelegate.toString());<br/>\n\t\t}else logger.debug(&quot;new_name is not MockOrderDelegate&quot;);<br/>\n\t\t<br/>\n\t\t<br/>\n\t}<br/>\n\t<br/>\n}<br/>\n[/code]<br/>\n<br/>\nOrderBusinessDelegate.java<br/>\n[code]<br/>\npackage Order;<br/>\n<br/>\nimport org.apache.log4j.Logger;<br/>\n<br/>\npublic class OrderBusinessDelegate {<br/>\n<br/>\n\tprivate static Logger logger =<br/>\nLogger.getLogger(OrderBusinessDelegate.class);<br/>\n\t<br/>\n\tprivate static OrderBusinessDelegate instance = null;<br/>\n<br/>\n\tprotected OrderBusinessDelegate() {<br/>\n\t\tsuper();<br/>\n\t}<br/>\n<br/>\n\tpublic static synchronized OrderBusinessDelegate getInstance() {<br/>\n\t\tif (instance == null) {<br/>\n\t\t\tinstance = new OrderBusinessDelegate();<br/>\n\t\t}<br/>\n\t\treturn instance;<br/>\n\t}<br/>\n\t<br/>\n\t\t<br/>\n\tpublic int isPossible(){<br/>\n\t\treturn getProductDelegate().getOderByPno();<br/>\n\t}<br/>\n\t<br/>\n\tpublic String toString(){<br/>\n\t\treturn &quot;OrderBusinessDelegate&quot;;<br/>\n\t}<br/>\n\t<br/>\n\tpublic ProductDelegate getProductDelegate(){<br/>\n\t\tlogger.debug(&quot;returning ProductDelegate&quot;);<br/>\n\t\treturn new ProductDelegate();<br/>\n\t}<br/>\n}<br/>\n[/code]<br/>\n<br/>\nMockOrderBusinessDeleate.java<br/>\n[code]<br/>\npackage Order;<br/>\n<br/>\nimport org.apache.log4j.Logger;<br/>\n<br/>\npublic class MockOrderBusinessDelegate extends OrderBusinessDelegate {<br/>\n<br/>\n\tprivate static Logger logger = Logger<br/>\n\t\t\t.getLogger(MockOrderBusinessDelegate.class);<br/>\n<br/>\n\tprivate static MockOrderBusinessDelegate instance = null;<br/>\n<br/>\n\tprivate MockOrderBusinessDelegate() {<br/>\n\t\tlogger.debug(&quot;MockOrderBusinessdelegate is instanciated&quot;);<br/>\n\t}<br/>\n<br/>\n\tpublic static synchronized OrderBusinessDelegate getInstance() {<br/>\n\t\tif (instance == null) {<br/>\n\t\t\tinstance = new MockOrderBusinessDelegate();<br/>\n\t\t}<br/>\n\t\treturn instance;<br/>\n\t}<br/>\n<br/>\n\tpublic ProductDelegate getProductDelegate() {<br/>\n\t\tlogger.debug(&quot;returning MockProductDelegate&quot;);<br/>\n\t\treturn new MockProductDelegate();<br/>\n\t}<br/>\n\t<br/>\n\tpublic String toString(){<br/>\n\t\treturn &quot;MockOrderBusinessDelegate&quot;;<br/>\n\t}<br/>\n<br/>\n}<br/>\n[/code]<br/>\n<br/>\nProductDelegate.java<br/>\n[code]<br/>\npackage Order;<br/>\n<br/>\nimport org.apache.log4j.Logger;<br/>\n<br/>\npublic class ProductDelegate {<br/>\n\t<br/>\n\tprivate static Logger logger = Logger.getLogger(ProductDelegate.class);<br/>\n\t<br/>\n\tpublic  int getOderByPno() {<br/>\n\t\tlogger.debug(&quot;getOrderByPno from ProductDelegate&quot;);<br/>\n\t\treturn 1;<br/>\n\t}<br/>\n<br/>\n}<br/>\n[/code]<br/>\n<br/>\nMockProductDelegate.java<br/>\n[code]<br/>\npackage Order;<br/>\n<br/>\nimport org.apache.log4j.Logger;<br/>\n<br/>\nimport sun.awt.motif.MPopupMenuPeer;<br/>\nimport sun.security.jca.GetInstance;<br/>\n<br/>\npublic class MockProductDelegate  extends ProductDelegate{<br/>\n<br/>\n\tprivate static Logger logger =<br/>\nLogger.getLogger(MockProductDelegate.class);<br/>\n<br/>\n\t<br/>\n\tpublic  int getOderByPno() {<br/>\n\t\tlogger.debug(&quot;getOrderByPno from MockProductDelegate&quot;);<br/>\n\t\treturn 10;<br/>\n\t}<br/>\n}<br/>\n[/code]</div>", 
    "prevInTime": 19426, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1181137525", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDExODExMzc1MjUuMTUzNTUuMTkuY2FtZWxAbG9jYWxob3N0LmxvY2FsZG9tYWluPg=="
    }
}