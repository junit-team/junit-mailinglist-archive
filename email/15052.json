{
    "numMessagesInTopic": 47, 
    "nextInTime": 15053, 
    "senderId": "EQUhAyCkWaPGQGE_EtZz8VI_oHc2746cPKqJC4YvyZkNDjNsZy7n-RA7DV1Zow65axFk5M6CzheXcusqa9p_jylDpCE", 
    "systemMessage": true, 
    "subject": "Re: [junit] Proposed parameterized test syntax for JUnit 4", 
    "from": "Eugene Kuleshov &lt;eu@...&gt;", 
    "authorName": "Eugene Kuleshov", 
    "msgSnippet": "Hi Kent, Please see my comments below. regards, Eugene ... As I mentioned, passing params in the constructor assume that all test methods require the same", 
    "msgId": 15052, 
    "profile": "ekuleshov", 
    "topicId": 14820, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 150395705, 
    "messageBody": "<div id=\"ygrps-yiv-332201227\">Hi Kent,<br/>\n<br/>\n  Please see my comments below.<br/>\n<br/>\n  regards,<br/>\n  Eugene<br/>\n<br/>\n<br/>\nKent Beck wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;Thank you for your comments. Followup below--<br/>\n&gt;  <br/>\n&gt;<br/>\n&gt;&gt; First of all you are forcing test runner to create new <br/>\n&gt;&gt;class instance <br/>\n&gt;&gt;for each test, which is probably good thing from the point of <br/>\n&gt;&gt;unit test <br/>\n&gt;&gt;isolation enforcement, but from other hand it put a huge <br/>\n&gt;&gt;limitation for <br/>\n&gt;&gt;tools and will have memory and performance hit as well. So, it would <br/>\n&gt;&gt;make sense to have these parameters passed to the test method <br/>\n&gt;&gt;(like it <br/>\n&gt;&gt;is done in TestNG).<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;I think the performance problems can be solved other ways, and I still like<br/>\n&gt;encouraging test isolation by executing tests in separate instances. The<br/>\n&gt;JUnit 4 runner creates the instances immediately in advance of invoking the<br/>\n&gt;test method. The current design requires less duplication than passing the<br/>\n&gt;parameters to the test methods, since the parameters only appear in the<br/>\n&gt;constructor. <br/>\n&gt;<br/>\n </span></blockquote>  As I mentioned, passing params in the constructor assume that all test <br/>\nmethods require the same parameters which is not always the case. Can <br/>\nyou please explain where will be code duplication if test methods will <br/>\nhave all the params as a method parameters but not fileds? Do you refer <br/>\nto same method params that would repeated for several methods? I <br/>\nwouldn&#39;t say it is that big duplication, but it would give a better test <br/>\nisolation and eliminate illusion that test case is statefull. <br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;It might be better for the @Parameters method to return an<br/>\n&gt;Iterator, allowing the lazy creation of substantial data structures,<br/>\n&gt;however.<br/>\n&gt;  @Parameters static Iterator&lt;Object[]&gt; data() ...<br/>\n&gt;  <br/>\n&gt;<br/>\n </span></blockquote>  Iterator won&#39;t allow to jump directly to the specific test. It would <br/>\nbe useful for IDE runners if user would like to restart only specific <br/>\ntest case (this scenario us currently not supported in Eclipse&#39;s JUnit <br/>\nrunner).<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt;  Second limitation is that user don&#39;t have will have to <br/>\n&gt;&gt;declaratively <br/>\n&gt;&gt;specify test data sets without writing custom @Parameters <br/>\n&gt;&gt;method and use <br/>\n&gt;&gt;some system property to differentiate between tests. Perhaps <br/>\n&gt;&gt;you can add <br/>\n&gt;&gt;some &quot;name&quot; property to Parameters annotation, so test runner <br/>\n&gt;&gt;can match <br/>\n&gt;&gt;this name with declared test data. Such name property would <br/>\n&gt;&gt;also allow <br/>\n&gt;&gt;to have multiple @Parameters methods and match them with <br/>\n&gt;&gt;@Test methods <br/>\n&gt;&gt;if you&#39;ll have same name there too. The last would allow to <br/>\n&gt;&gt;have several <br/>\n&gt;&gt;test methods with different kinds of test parameters without creating <br/>\n&gt;&gt;separate test classes (so you&#39;ll have single test class for <br/>\n&gt;&gt;class under <br/>\n&gt;&gt;testing).<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;I don&#39;t understand this objection. Can you write an example of what you<br/>\n&gt;would like to see?<br/>\n&gt;  <br/>\n&gt;<br/>\n </span></blockquote>  Ok. I may have several data sets (e.g. small one for smoke testing and <br/>\na really huge one for complete regression testing) and I want to choose <br/>\nbetween them from the runner. For instance:<br/>\n<br/>\n@Parameters(name=&quot;smoke&quot;) public static Object[] data() {<br/>\n  return new int[][] {{0, 0}, {1, 1}};<br/>\n}<br/>\n<br/>\n@Parameters(name=&quot;full&quot;) public static Object[] data() {<br/>\n  // load data from external file or generate permutations<br/>\n  return data;<br/>\n}<br/>\n<br/>\n  Then you&#39;ll specify test type &quot;smoke&quot; or &quot;full&quot; on a runner and it <br/>\nwill choose an appropriate set of the test data.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt;  The last thing I&#39;d like to mention is that current <br/>\n&gt;&gt;@Parameters methods <br/>\n&gt;&gt;won&#39;t scale to large data sets (the same limitation also exists in <br/>\n&gt;&gt;TestNG). I&#39;ve seen JUnit3 suite() methods that produced thousands of <br/>\n&gt;&gt;test permutations and that required lots of memory memory <br/>\n&gt;&gt;when running <br/>\n&gt;&gt;tests. So, It think that it would make sense to introduce an <br/>\n&gt;&gt;interface <br/>\n&gt;&gt;similar to JDBC ResultSet, so test runner can create iterate <br/>\n&gt;&gt;trough test <br/>\n&gt;&gt;data without loading it completely into memory and also have <br/>\n&gt;&gt;option to <br/>\n&gt;&gt;get number of tests as well as jump to Nth test. You can also <br/>\n&gt;&gt;provide an <br/>\n&gt;&gt;adapter that will take Object[][] and provide all that <br/>\n&gt;&gt;functionality for <br/>\n&gt;&gt;users who don&#39;t want to create test data dynamically.<br/>\n&gt;&gt;    <br/>\n&gt;&gt;<br/>\n&gt;Would the Iterator version satisfy the need to handle large data sets?<br/>\n&gt;  <br/>\n&gt;<br/>\n </span></blockquote>  The limitation of the iterator is that it does not provide a random <br/>\naccess. This would make difficult to rerun only selected test case (e.g. <br/>\nfailed one)<br/>\n<br/>\n  regards,<br/>\n  Eugene<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 15051, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1128399325", 
    "canDelete": false, 
    "nextInTopic": 15054, 
    "prevInTopic": 15051, 
    "headers": {
        "inReplyToHeader": "PEUxRU1XVXgtMDAwM0ZFLVVBQHNtdHBhdXRoMDgubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4=", 
        "messageIdInHeader": "PDQzNDIwMURELjIwMTAzMDVAbWQucHAucnU+", 
        "referencesHeader": "PEUxRU1XVXgtMDAwM0ZFLVVBQHNtdHBhdXRoMDgubWFpbC5hdGwuZWFydGhsaW5rLm5ldD4="
    }
}