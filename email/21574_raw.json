{
    "numMessagesInTopic": 5, 
    "nextInTime": 21575, 
    "senderId": "fj7z5fIO9RDADSZhBzl7hCe3JyIedtWKsEZD2h4QkCoNIGo_f9qbzMhQXMCPpIki3kSFJz_ZR-eiOUmfGCiW6HDQ20ptjHv6xEs", 
    "systemMessage": false, 
    "subject": "Re: [junit] ClassNotFoundException, sometimes", 
    "from": "James Abley &lt;james.abley@...&gt;", 
    "authorName": "James Abley", 
    "msgSnippet": "... Try the verbose and debug output mode of ant to see if you get more information?", 
    "msgId": 21574, 
    "rawEmail": "Return-Path: &lt;james.abley@...&gt;\r\nX-Sender: james.abley@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 86332 invoked from network); 7 May 2009 13:25:25 -0000\r\nX-Received: from unknown (69.147.108.202)\n  by m2.grp.sp2.yahoo.com with QMQP; 7 May 2009 13:25:25 -0000\r\nX-Received: from unknown (HELO fk-out-0910.google.com) (209.85.128.184)\n  by mta3.grp.re1.yahoo.com with SMTP; 7 May 2009 13:25:24 -0000\r\nX-Received: by fk-out-0910.google.com with SMTP id f40so342888fka.0\n        for &lt;junit@yahoogroups.com&gt;; Thu, 07 May 2009 06:24:23 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.223.108.75 with SMTP id e11mr1578713fap.51.1241702663724; Thu, \n\t07 May 2009 06:24:23 -0700 (PDT)\r\nIn-Reply-To: &lt;4A01D323.5040205@...&gt;\r\nReferences: &lt;4A00A14C.5060306@...&gt;\n\t &lt;4f7da6b90905060620k59d41dc5p1eb29c229de74da3@...&gt;\n\t &lt;4A01D323.5040205@...&gt;\r\nDate: Thu, 7 May 2009 14:24:23 +0100\r\nMessage-ID: &lt;23fce8e60905070624m63459021ufc30d225a52672b9@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: James Abley &lt;james.abley@...&gt;\r\nSubject: Re: [junit] ClassNotFoundException, sometimes\r\nX-Yahoo-Group-Post: member; u=212683928; y=W30XNEe6rTRSIG0O49an6K-qe4EsliF_z0P4gh2pO3ZYo4Ej\r\nX-Yahoo-Profile: taboozizi\r\n\r\n2009/5/6 David Rush &lt;david@...&gt;:\n&gt;\n&gt;\n&gt; David:\n&gt;\n&gt; I created Foo.ja=\r\nva, which simply has a main method that creates an exception\n&gt; object from =\r\nthe 3rd-party library and prints it out:\n&gt;\n&gt; import com.esri.sde.sdk.client=\r\n.*;\n&gt; public class Foo {\n&gt; public static void main(String[] args) {\n&gt; Syste=\r\nm.out.println(&quot;Foo&quot;);\n&gt; SeException ex =3D new SeWarningException(&quot;Testing&quot;=\r\n);\n&gt; System.out.println(&quot;ex =3D &quot;+ex);\n&gt; }\n&gt; }\n&gt;\n&gt; and a foo task in my bui=\r\nld.xml\n&gt;\n&gt; &lt;target name=3D&quot;foo&quot; depends=3D&quot;compile&quot;&gt;\n&gt; &lt;java classname=3D&quot;F=\r\noo&quot; classpathref=3D&quot;test.classpath&quot; /&gt;\n&gt; &lt;/target&gt;\n&gt;\n&gt; It does not exhibit =\r\nthe puzzling behavior. I can run &quot;ant foo&quot; multiple\n&gt; times in succession w=\r\nithout problems. I added &quot;compile.tests&quot; to &quot;depends&quot;\n&gt; in the foo task, an=\r\nd it makes no difference (I can still run foo multiple\n&gt; times in a row wit=\r\nhout problems).\n&gt;\n&gt; If I do this from the command line:\n&gt; ant clean\n&gt; ant t=\r\nest\n&gt; ant test\n&gt;\n&gt; I get a failure on the 2nd &quot;ant test&quot;.\n&gt; If I do this:\n&gt;=\r\n ant clean\n&gt; ant foo\n&gt; ant test\n&gt; ant foo\n&gt;\n&gt; I get a failure on the &quot;ant t=\r\nest&quot; (ant compile and both runs of ant foo work\n&gt; fine).\n&gt;\n&gt; compile.tests =\r\nis this:\n&gt;\n&gt; &lt;target name=3D&quot;compile.tests&quot; depends=3D&quot;compile&quot;&gt;\n&gt; &lt;mkdir d=\r\nir=3D&quot;build/classes&quot; /&gt;\n&gt; &lt;javac\n&gt; srcdir=3D&quot;src_tests&quot;\n&gt; destdir=3D&quot;build/=\r\nclasses&quot;\n&gt; classpathref=3D&quot;test.classpath&quot;\n&gt; debug=3D&quot;on&quot; debuglevel=3D&quot;lin=\r\nes,vars,source&quot;\n&gt; deprecation=3D&quot;yes&quot;\n&gt;&gt;\n&gt; &lt;!--\n&gt; &lt;compilerarg value=3D&quot;-Xl=\r\nint:all&quot;/&gt;\n&gt; --&gt;\n&gt; &lt;compilerarg value=3D&quot;-Xmaxerrs&quot;/&gt; &lt;compilerarg value=3D=\r\n&quot;${error_count.max}&quot;/&gt;\n&gt; &lt;compilerarg value=3D&quot;-Xmaxwarns&quot;/&gt; &lt;compilerarg\n&gt;=\r\n value=3D&quot;${warning_count.max}&quot;/&gt;\n&gt; &lt;compilerarg value=3D&quot;-version&quot;/&gt;\n&gt; &lt;/j=\r\navac&gt;\n&gt; &lt;/target&gt;\n&gt;\n&gt; David\n\nTry the verbose and debug output mode of ant t=\r\no see if you get more information?\n\n&gt;\n&gt; David Saff wrote:\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; I&#39;d b=\r\ne suspicious of what &quot;compile.tests&quot; is doing. If you create a\n&gt;&gt; short mai=\r\nn() class that depends on the class in question, and an ant\n&gt;&gt; target that =\r\nruns it, do you see the same behavior?\n&gt;&gt;\n&gt;&gt; David Saff\n&gt;&gt;\n&gt;&gt; On Tue, May 5=\r\n, 2009 at 4:27 PM, David Rush &lt;david@...\n&gt;&gt; &lt;mailto:david%40rushto=\r\nne.com&gt;&gt; wrote:\n&gt;&gt;&gt; I&#39;m working on setting up some junit test cases for an =\r\napplication\n&gt;&gt; that&#39;s been around a while. I have some tests running via an=\r\nt, but I\n&gt;&gt; have a strange situation.\n&gt;&gt;&gt;\n&gt;&gt;&gt; When use &quot;ant clean&quot; to delet=\r\ne all the compiled classes, then &quot;ant\n&gt;&gt; test&quot; (which depends on the compil=\r\ne task, so it&#39;ll compile before it\n&gt;&gt; runs the tests) to run the junit test=\r\ns (via the junit ant task), it\n&gt;&gt; works fine. The code compiles and the jun=\r\nit tests work.\n&gt;&gt;&gt;\n&gt;&gt;&gt; However, if I immediately run &quot;ant test&quot; to re-run t=\r\nhe junit tests, it\n&gt;&gt; fails with a NoClassDefFoundError, complaining about =\r\nnot being able to\n&gt;&gt; find a particular class in a 3rd-party library I&#39;m usi=\r\nng. The correct\n&gt;&gt; .jar file for the library is in the classpath.\n&gt;&gt;&gt;\n&gt;&gt;&gt; I=\r\nf I do &quot;ant clean&quot;, then &quot;ant test&quot; it works.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Any ideas?\n&gt;&gt;&gt;\n&gt;&gt;&gt; He=\r\nre&#39;s the &quot;test&quot; snippet from my ant script:\n&gt;&gt;&gt;\n&gt;&gt;&gt; &lt;target name=3D&quot;test&quot; d=\r\nepends=3D&quot;compile.tests&quot; description=3D&quot;Runs JUnit\n&gt;&gt; tests&quot;&gt;\n&gt;&gt;&gt; &lt;junit pr=\r\nintsummary=3D&quot;false&quot; haltonfailure=3D&quot;true&quot; showoutput=3D&quot;true&quot;&gt;\n&gt;&gt;&gt; &lt;class=\r\npath refid=3D&quot;test.classpath&quot;/&gt;\n&gt;&gt;&gt; &lt;formatter type=3D&quot;brief&quot; usefile=3D&quot;fa=\r\nlse&quot;/&gt;\n&gt;&gt;&gt; &lt;batchtest&gt;\n&gt;&gt;&gt; &lt;fileset dir=3D&quot;build/classes&quot; includes=3D&quot;**/*.=\r\nclass&quot;/&gt;\n&gt;&gt;&gt; &lt;/batchtest&gt;\n&gt;&gt;&gt; &lt;/junit&gt;\n&gt;&gt;&gt; &lt;/target&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; David\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n=\r\n&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;\n&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt; \n\n", 
    "profile": "taboozizi", 
    "topicId": 21571, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 212683928, 
    "prevInTime": 21573, 
    "contentTrasformed": false, 
    "postDate": "1241702663", 
    "canDelete": false, 
    "nextInTopic": 21576, 
    "prevInTopic": 21573, 
    "headers": {
        "inReplyToHeader": "PDRBMDFEMzIzLjUwNDAyMDVAcnVzaHRvbmUuY29tPg==", 
        "messageIdInHeader": "PDIzZmNlOGU2MDkwNTA3MDYyNG02MzQ1OTAyMXVmYzMwZDIyNWE1MjY3MmI5QG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDRBMDBBMTRDLjUwNjAzMDZAcnVzaHRvbmUuY29tPgkgPDRmN2RhNmI5MDkwNTA2MDYyMGs1OWQ0MWRjNXAxZWIyOWMyMjlkZTc0ZGEzQG1haWwuZ21haWwuY29tPgkgPDRBMDFEMzIzLjUwNDAyMDVAcnVzaHRvbmUuY29tPg=="
    }
}