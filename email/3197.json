{
    "numMessagesInTopic": 52, 
    "nextInTime": 3198, 
    "senderId": "PgMOogVHmZVRpM5NPpcfh1CFlDOtB7cuBCY82dJuEGqxlkt7sJwvZnXSPMWxXkbhwo6Oj82Xgo5E69fuQypClIltRCyZNRR6", 
    "systemMessage": false, 
    "subject": "Re: [junit] testing private methods", 
    "from": "Jason Rogers &lt;jacaetev@...&gt;", 
    "authorName": "Jason Rogers", 
    "msgSnippet": "I would suggest searching the archives for this topic. There are several opinions there about testing your privates and package protecteds. -jason ... Keep it", 
    "msgId": 3197, 
    "profile": "jacaetev", 
    "topicId": 3179, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-675200448\">I would suggest searching the archives for this topic. <br/>\nThere are several opinions there about testing your<br/>\nprivates and package protecteds.<br/>\n<br/>\n-jason<br/>\n<br/>\n--- Eric Vought &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a>&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; Typically, the way you accomplish both objectives (hiding<br/>\n&gt; functionality<br/>\n&gt; and exposing it for unit testing) is to use a Facade. You<br/>\n&gt; expose the<br/>\n&gt; methods that you want available for testing within the<br/>\n&gt; package (package<br/>\n&gt; private methods and/or classes). You create a public<br/>\n&gt; class (the Facade)<br/>\n&gt; which exposes just the methods (for the package) you<br/>\n&gt; want. You hide the<br/>\n&gt; actual classes you return from the Facade behind simple<br/>\n&gt; interfaces. Your<br/>\n&gt; test classes are declared in the same package as your<br/>\n&gt; code and therefore<br/>\n&gt; have access to the package protected functionality.<br/>\n&gt; <br/>\n&gt; The second option you suggest runInternalTests(..) is<br/>\n&gt; also a good thing to<br/>\n&gt; do. We call our equivalent interface InvariantsChecker<br/>\n&gt; and the method<br/>\n&gt; checkInvariants(). We use this method to ensure that an<br/>\n&gt; object is in an<br/>\n&gt; internally consistent state (e.g. that a stack&#39;s top<br/>\n&gt; index does not<br/>\n&gt; exceed the capacity of the underlying array). You can<br/>\n&gt; then call this<br/>\n&gt; method from within your test code:<br/>\n&gt; <br/>\n&gt; void testPop() throws Exception<br/>\n&gt; {<br/>\n&gt; \td_stack.push(d_item1);<br/>\n&gt; \td_stack.checkInvariants();<br/>\n&gt; <br/>\n&gt; \tObject poppedItem = stack.pop();<br/>\n&gt; \td_stack.checkInvariants();<br/>\n&gt; <br/>\n&gt; \tassertSame(item1, poppedItem);<br/>\n&gt; } // testPop()<br/>\n&gt; <br/>\n&gt; With a little care, you can have runInternalTests() or<br/>\n&gt; checkInvariants()<br/>\n&gt; run recursively to run consistency checks on contained or<br/>\n&gt; referenced<br/>\n&gt; components. The key is to make sure the checks terminate<br/>\n&gt; at some point.<br/>\n&gt; We define a simple InvariantsTracker class which monitors<br/>\n&gt; the recursion<br/>\n&gt; for us and ensures that it terminates. InvariantsTracker<br/>\n&gt; just keeps a list<br/>\n&gt; of object instances that it has already seen. We pass a<br/>\n&gt; new<br/>\n&gt; InvariantsTracker to the first checkInvariants(..) call<br/>\n&gt; which in turn<br/>\n&gt; passes the same instance to recursive calls.<br/>\n&gt; <br/>\n&gt; boolean checkInvariants(InvariantsTracker hitList)<br/>\n&gt; {<br/>\n&gt; \tif (hitList.alreadyHit(this)) return false;<br/>\n&gt; <br/>\n&gt; \tAssert.invariant(d_top &lt; d_size);<br/>\n&gt; <br/>\n&gt; \treturn true;<br/>\n&gt; } // checkInvariants(..)<br/>\n&gt; <br/>\n&gt; In a subclass, the form is slightly different, since the<br/>\n&gt; base class<br/>\n&gt; performs the check:<br/>\n&gt; <br/>\n&gt; boolean checkInvariants(InvariantsTracker hitList)<br/>\n&gt; {<br/>\n&gt; \tif (!(super.checkInvariants(hitList))) return false;<br/>\n&gt; <br/>\n&gt; \t// ...<br/>\n&gt; <br/>\n&gt; \treturn true;<br/>\n&gt; } // checkInvariants(..)<br/>\n&gt; <br/>\n&gt; The test code then looks like this:<br/>\n&gt; <br/>\n&gt; void testPop() throws Exception<br/>\n&gt; {<br/>\n&gt; \td_stack.push(item1);<br/>\n&gt; \td_stack.checkInvariants(new InvariantsTracker());<br/>\n&gt; <br/>\n&gt; \t// ...<br/>\n&gt; } // testPop()<br/>\n&gt; <br/>\n&gt; This ends up being a very simple and powerful technique.<br/>\n&gt; Having the unit<br/>\n&gt; tests run the consistency checks in addition to checking<br/>\n&gt; external logic<br/>\n&gt; allows you to catch many more errors with far fewer<br/>\n&gt; tests. You begin to<br/>\n&gt; catch errors early on that don&#39;t normally show up until<br/>\n&gt; load or soak<br/>\n&gt; testing and are much harder to diagnose then. Our code is<br/>\n&gt; available for<br/>\n&gt; download if you are interested. There is also a package<br/>\n&gt; out<br/>\n&gt; there called iContract which generates invariant checking<br/>\n&gt; code based on<br/>\n&gt; special javadoc comments. iContract has the advantage<br/>\n&gt; that the invariants,<br/>\n&gt; preconditions, and postconditions are clearly specified<br/>\n&gt; in your docs, but<br/>\n&gt; its disadvantage is that it is a preprocessor.<br/>\n&gt; <br/>\n&gt; On Tue, 6 Nov 2001 <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:john_naylor@...\">john_naylor@...</a> wrote:<br/>\n&gt; <br/>\n&gt; &gt; i have been assigned the task of pushing our<br/>\n&gt; development team toward<br/>\n&gt; &gt; unit testing.  i have been working with junit for a few<br/>\n&gt; weeks now but<br/>\n&gt; &gt; continue to struggle with one issue.  it seems to me<br/>\n&gt; there is tension<br/>\n&gt; &gt; between unit testing and my preferred api.  for a given<br/>\n&gt; class i would<br/>\n&gt; &gt; like to expose only a handful of methods, yet do not<br/>\n&gt; want to forfeit<br/>\n&gt; &gt; testing my private methods.  my feeling is that i<br/>\n&gt; should be concerned<br/>\n&gt; &gt; with continually testing those methods, and yet fail to<br/>\n&gt; see why i<br/>\n&gt; &gt; should expose methods which are meaningless outside the<br/>\n&gt; &quot;blackbox&quot;.<br/>\n&gt; &gt;<br/>\n&gt; &gt; perhaps i am missing something obvious about good<br/>\n&gt; design.  in the<br/>\n&gt; &gt; mean time i have set up a simple interface which<br/>\n&gt; classes i test<br/>\n&gt; &gt; internally must implement.<br/>\n&gt; &gt;<br/>\n&gt; &gt; public interface Testable<br/>\n&gt; &gt; {<br/>\n&gt; &gt; \tpublic static final boolean INTERNAL_MODE = true;<br/>\n&gt; &gt;<br/>\n&gt; &gt; \tpublic void runInternalTests() throws Exception;<br/>\n&gt; &gt; }<br/>\n&gt; &gt;<br/>\n&gt; &gt; this allows me to run internal tests and handle<br/>\n&gt; assertions by calling<br/>\n&gt; &gt; the static methods of Assert.  INTERNAL_MODE must be<br/>\n&gt; checked within<br/>\n&gt; &gt; runInternalTests().  This allows internal testing to be<br/>\n&gt; turned off<br/>\n&gt; &gt; for production builds.<br/>\n&gt; &gt;<br/>\n&gt; &gt; any insight about this dilemna would be appreciated.<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; -- <br/>\n&gt; Eric Vought<br/>\n&gt; Chief Technical Officer - QLUE Consulting, Inc.<br/>\n&gt; <br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:evought@...\">evought@...</a> toll-free: 888-771-3538  RTP area:<br/>\n&gt; 919-816-9901<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; Your use of Yahoo! Groups is subject to<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> <br/>\n&gt; <br/>\n&gt; <br/>\n<br/>\n<br/>\n </span></blockquote>=====<br/>\n-----------------------------------------<br/>\n             Keep it simple...<br/>\n(1 Corinthians 2:2, Galatians 2:20, 6:14)<br/>\n<br/>\n__________________________________________________<br/>\nDo You Yahoo!?<br/>\nFind a job, post your resume.<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://careers.yahoo.com\">http://careers.yahoo.com</a></div>", 
    "prevInTime": 3196, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1005139837", 
    "canDelete": false, 
    "nextInTopic": 4512, 
    "prevInTopic": 3182, 
    "headers": {
        "inReplyToHeader": "PFBpbmUuTE5YLjQuMzAuMDExMTA2MTAzMjUzMC4xODY1LTEwMDAwMEBicmFpbi5xbHVlLWxhbj4=", 
        "messageIdInHeader": "PDIwMDExMTA3MTMzMDM3Ljc1NTI3LnFtYWlsQHdlYjE0ODA2Lm1haWwueWFob28uY29tPg=="
    }
}