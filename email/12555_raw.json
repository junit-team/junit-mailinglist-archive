{
    "numMessagesInTopic": 10, 
    "nextInTime": 12556, 
    "senderId": "_O8BlhaJI_2RdDTtFxthc-Vtx5lbL785ot7avrCYqZmcmHAUWgRBVEWu8JnEojtqUV59zL_RAZukXTLnriYnopo_Cy_BCg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Multithreading: Testing scheduled method invocation?!", 
    "from": "Mike Clark &lt;mike@...&gt;", 
    "authorName": "Mike Clark", 
    "msgSnippet": "... So, you were able to write tests for Quartz with these fakes? -- Mike Clark Clarkware Consulting, Inc. http://clarkware.com", 
    "msgId": 12555, 
    "rawEmail": "Return-Path: &lt;mike@...&gt;\r\nX-Sender: mike@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 94599 invoked from network); 29 Dec 2004 00:19:42 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m14.grp.scd.yahoo.com with QMQP; 29 Dec 2004 00:19:42 -0000\r\nReceived: from unknown (HELO jhunter.xquery.com) (69.59.195.106)\n  by mta3.grp.scd.yahoo.com with SMTP; 29 Dec 2004 00:19:42 -0000\r\nReceived: from [192.168.1.101] (c-24-9-180-178.client.comcast.net [24.9.180.178])\n\t(authenticated bits=0)\n\tby jhunter.xquery.com (8.12.8/8.12.9) with ESMTP id iBT0Hmiu006667\n\t(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 28 Dec 2004 16:17:49 -0800\r\nMime-Version: 1.0 (Apple Message framework v619)\r\nIn-Reply-To: &lt;1104198337.10301.47.camel@...&gt;\r\nReferences: &lt;200412220131.05639.michael@...&gt; &lt;BFFCC881-5829-11D9-9839-000A95A547BC@...&gt; &lt;1104198337.10301.47.camel@...&gt;\r\nContent-Type: text/plain; charset=US-ASCII; format=flowed\r\nMessage-Id: &lt;53CA382A-592F-11D9-ACF8-000A95A547BC@...&gt;\r\nContent-Transfer-Encoding: 7bit\r\nDate: Tue, 28 Dec 2004 17:19:38 -0700\r\nTo: junit@yahoogroups.com\r\nX-Mailer: Apple Mail (2.619)\r\nX-eGroups-Remote-IP: 69.59.195.106\r\nFrom: Mike Clark &lt;mike@...&gt;\r\nSubject: Re: [junit] Multithreading: Testing scheduled method invocation?!\r\nX-Yahoo-Group-Post: member; u=33026788\r\nX-Yahoo-Profile: clarkware\r\n\r\n\nOn Dec 27, 2004, at 6:45 PM, Brett Neumeier wrote:\n\n&gt;\n&gt; On Mon, 2004-12-27 at 10:07 -0700, Mike Clark wrote:\n&gt;&gt; I tried writing some learning tests for Quartz a couple months back.\n&gt;&gt; For what it&#39;s worth, I ran into the same timing issues.\n&gt;&gt;\n&gt;&gt; Before reaching for sleep(), I tried to refactor Quartz innards so \n&gt;&gt; that\n&gt;&gt; the internal clock could be programmatically advanced.  Unfortunately,\n&gt;&gt; a direct call to System.currentTimeMillis() was duplicated in many\n&gt;&gt; places and even after consolidating all those calls through an\n&gt;&gt; interface I was unable to mock the clock.\n&gt;\n&gt; I have done that as well.  My Clock interface encapsulates\n&gt; System.currentTimeMillis(), new Date(), Calendar.getInstance(), and\n&gt; Thread.sleep().  There may be other standard API mechanisms that \n&gt; operate\n&gt; on the current system time, but those were the only ones in use in the\n&gt; code I was refactoring.\n&gt;\n&gt; Most of those were no problem, but pause (the method that encapsulates\n&gt; Thread.sleep()) was very difficult to fake.  The problem is that when\n&gt; thread A calls pause, all other threads have to be given a chance to\n&gt; call pause before thread A is woken up.  This is tricky because thread\n&gt; scheduling in Java is inherently unpredictable, and in Java 1.4 and\n&gt; earlier there is no way to determine whether any given thread is\n&gt; runnable or not.  As a result the FakeClock is as reliable as most\n&gt; mechanisms for testing multi-threaded code: not perfectly.\n&gt;\n&gt; But the tests are an order of magnitude faster than they were when they\n&gt; just used Thread.sleep(), and they are as reliable as they were before,\n&gt; so that&#39;s good enough for me.\n\nSo, you were able to write tests for Quartz with these fakes?\n\n--\nMike Clark\nClarkware Consulting, Inc.\nhttp://clarkware.com\n\n\n", 
    "profile": "clarkware", 
    "topicId": 12519, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 33026788, 
    "prevInTime": 12554, 
    "contentTrasformed": false, 
    "postDate": "1104279578", 
    "canDelete": false, 
    "nextInTopic": 12556, 
    "prevInTopic": 12554, 
    "headers": {
        "inReplyToHeader": "PDExMDQxOTgzMzcuMTAzMDEuNDcuY2FtZWxAYW5vbWUucm5kLmN4Pg==", 
        "messageIdInHeader": "PDUzQ0EzODJBLTU5MkYtMTFEOS1BQ0Y4LTAwMEE5NUE1NDdCQ0BjbGFya3dhcmUuY29tPg==", 
        "referencesHeader": "PDIwMDQxMjIyMDEzMS4wNTYzOS5taWNoYWVsQHNjaHVlcmlnLmRlPiA8QkZGQ0M4ODEtNTgyOS0xMUQ5LTk4MzktMDAwQTk1QTU0N0JDQGNsYXJrd2FyZS5jb20+IDwxMTA0MTk4MzM3LjEwMzAxLjQ3LmNhbWVsQGFub21lLnJuZC5jeD4="
    }
}