{
    "numMessagesInTopic": 10, 
    "nextInTime": 23758, 
    "senderId": "jvLmjTyWvmMlO2RcAwUjT1HRW2PP1UcZ1-8-8zwf8bflMRbl46isLLMTIPZI95Mx_fGUwxNzW7Hpv-W2CsQIjICKktIlA9vv", 
    "systemMessage": false, 
    "subject": "Re: [junit] Open up Description class to allow arbitrary test hierarchies?", 
    "from": "Kevin Cooney &lt;kcooney@...&gt;", 
    "authorName": "Kevin Cooney", 
    "msgSnippet": "I think that the reason why Description is final is because it is a value class, and there is code (especially in filters) that expects Description.equals() to", 
    "msgId": 23757, 
    "profile": "kevincooney2000", 
    "topicId": 23742, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 475263748, 
    "messageBody": "<div id=\"ygrps-yiv-8516598\">I think that the reason why Description is final is because it is a value<br/>\nclass, and there is code (especially in filters) that expects<br/>\nDescription.equals() to obey the general contract of Object.equals().<br/>\nUnfortunately, there is &quot;no way to extend an instantiable class and add a<br/>\nvalue component while preserving the equals contract&quot; (quoted from<br/>\nEffective Java, second edition, page 38).<br/>\n<br/>\nIt&#39;s perfectly fine to add optional properties to the existing Description<br/>\nclass, as long as Description.equals() and Description.hashCode() are<br/>\nupdated, and all of the properties that are added have equals() methods<br/>\nthat obey the general contract of Object.equals().<br/>\n<br/>\n-- Kevin<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Fri, Nov 4, 2011 at 11:43 PM, Matthew Farwell &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:matthew@...\">matthew@...</a>&gt;wrote:<br/>\n<br/>\n&gt; Hi Bill,<br/>\n&gt;<br/>\n&gt; I did the JUnit integration for Scala-IDE, so yes I would like to be<br/>\n&gt; involved.<br/>\n&gt;<br/>\n&gt; Currently Scala-IDE uses the Junit plugin for running and displaying the<br/>\n&gt; test results, and it would obviously be better if we could avoid forking<br/>\n&gt; that. But for instance the jump to method doesn&#39;t work for FlatSpec stuff,<br/>\n&gt; and will never work because it&#39;s trying to find a method called xxx where<br/>\n&gt; xxx is the first word in the description of the test. Which obviously will<br/>\n&gt; never work. For Scala-IDE we can work around this using aspects, but it<br/>\n&gt; would be nice it this worked nicely. Hence my interest in changing<br/>\n&gt; Description.<br/>\n&gt;<br/>\n&gt; Matthew.<br/>\n&gt;<br/>\n&gt; Le 4 novembre 2011 23:01, Bill Venners &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:bill@...\">bill@...</a>&gt; a Ã©crit :<br/>\n&gt;<br/>\n&gt; &gt; **<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Hi Matthew,<br/>\n&gt; &gt;<br/>\n&gt; &gt; Actually we are planning to &quot;fix Eclipse&quot; very soon. The next release of<br/>\n&gt; &gt; ScalaTest, version 2.0, will include enhancements to support IDE<br/>\n&gt; &gt; integration, and before releasing 2.0 we&#39;re going to help do the actual<br/>\n&gt; &gt; integration work for Eclipse, IDEA, and NetBeans. That way we can be sure<br/>\n&gt; &gt; we have it right before releasing the ScalaTest enhancements. I would<br/>\n&gt; like<br/>\n&gt; &gt; your feedback on it. I&#39;ll post announcements of preview snapshots on the<br/>\n&gt; &gt; scalatest-users mailing list, so please join that if you&#39;d like to give<br/>\n&gt; &gt; input.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Thanks.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Bill<br/>\n&gt; &gt; ----<br/>\n&gt; &gt; Bill Venners<br/>\n&gt; &gt; Artima, Inc.<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.artima.com\">http://www.artima.com</a><br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Nov 3, 2011, at 5:50 AM, Matthew Farwell &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:matthew@...\">matthew@...</a>&gt;<br/>\n&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; Hi,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I&#39;m interested in this, though for slightly different reasons, maybe we<br/>\n&gt; &gt; &gt; could exchange ideas on this. I haven&#39;t exactly thought this through in<br/>\n&gt; &gt; &gt; detail, but I think my requirements come down to being able to store<br/>\n&gt; &gt; &gt; arbitrary information in a Description, a key.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I&#39;m interesting in testing with Scala, and there are (at least) two<br/>\n&gt; &gt; generic<br/>\n&gt; &gt; &gt; problems:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; 1) Tests which are not linked to a specific method, but are run as<br/>\n&gt; &gt; separate<br/>\n&gt; &gt; &gt; tests. Scalatest for example allows the following<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; @RunWith(classOf[JUnitRunner])<br/>\n&gt; &gt; &gt; class FileSpec extends FlatSpec with ShouldMatchers {<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &quot;A Stack&quot; should &quot;pop values in last-in-first-out order&quot; in {<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; it should &quot;throw NoSuchElementException if an empty stack is popped&quot;<br/>\n&gt; in {<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; This creates a single method with the two tests within. However, the<br/>\n&gt; &gt; &gt; JUnitRunner runs the single method but records the two tests<br/>\n&gt; separately.<br/>\n&gt; &gt; &gt; This can be seen in Eclipse, see attached scalatest1.png. Now if I<br/>\n&gt; double<br/>\n&gt; &gt; &gt; click on the test name in the junit view, it tries to find a method of<br/>\n&gt; &gt; that<br/>\n&gt; &gt; &gt; name, and fails. Obviously, to correct this would require a fix to<br/>\n&gt; &gt; Eclipse,<br/>\n&gt; &gt; &gt; but if I could store the file & line number instead of the method<br/>\n&gt; name, I<br/>\n&gt; &gt; &gt; could jump to the appropriate line.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; 2) Scala allows spaces and other characters in method names, but these<br/>\n&gt; &gt; &gt; names are munged on compilation. For instance, space gets translated to<br/>\n&gt; &gt; &gt; $0020.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; class FileTest extends AssertionsForJUnit {<br/>\n&gt; &gt; &gt; @Test def `foo bar`() = {<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Here the jump to in Eclipse works correctly, but the displayed<br/>\n&gt; &gt; description<br/>\n&gt; &gt; &gt; in Eclipse isn&#39;t nice, see scalatest2.png.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; So in both cases, the string I would like to display (in Eclipse,<br/>\n&gt; &gt; surefire<br/>\n&gt; &gt; &gt; whatever) doesn&#39;t match the method name, either because there is no<br/>\n&gt; &gt; method<br/>\n&gt; &gt; &gt; name or because It&#39;s not the same thing. I think that I could work<br/>\n&gt; around<br/>\n&gt; &gt; &gt; most issues is Eclipse etc if the test runner could add some arbitrary<br/>\n&gt; &gt; &gt; information to the description, which it could subsequently use. A<br/>\n&gt; string<br/>\n&gt; &gt; &gt; would be fine, because I could define the contents of that String, but<br/>\n&gt; &gt; &gt; arbitrary data would be even better. String would be simpler for<br/>\n&gt; &gt; everyone I<br/>\n&gt; &gt; &gt; think.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Please note that I&#39;m just thinking aloud at the minute, and I haven&#39;t<br/>\n&gt; &gt; &gt; actually done any proof of concepts as yet, but if you have any ideas,<br/>\n&gt; &gt; &gt; please feel free to take this to email.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Matthew Farwell.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 23756, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1320697361", 
    "canDelete": false, 
    "nextInTopic": 23761, 
    "prevInTopic": 23756, 
    "headers": {
        "inReplyToHeader": "PENBT0Jrb0ZWLTlnWGU1ZWhleV9fdG4wVXFXU29lUkwyWWlIVlBLWkJRbUp6YXJ6cjBUUUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBQTNFK2VVSFFlOHFjOGhqRTZlOTMrLVA1MkJpclY0TVlnQXA5VFNFWmhwMHZMK2U2d0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBT0Jrb0ZYeGJZMXpBV1NxTytxdnoxa1VXVVhZV3p1NWJ6K3Rpdk1PM083QlRSSEU5Z0BtYWlsLmdtYWlsLmNvbT4gPDkxMDBFNEFDLTI2MkQtNEUwNi04RjZGLUZBRjZCRUE3NUU3NUBhcnRpbWEuY29tPiA8Q0FPQmtvRlYtOWdYZTVlaGV5X190bjBVcVdTb2VSTDJZaUhWUEtaQlFtSnphcnpyMFRRQG1haWwuZ21haWwuY29tPg=="
    }
}