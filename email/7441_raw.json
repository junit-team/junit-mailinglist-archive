{
    "numMessagesInTopic": 7, 
    "nextInTime": 7442, 
    "senderId": "h_UfDiytJB8q0yNUkLZD9v-73ThvPKrLUdKa8OYsTBCB_oilRjC7uWs2Vc9akFfnaQyuvv5ILicZTqv_7deOiO0uBnsXhZIPaf8", 
    "systemMessage": false, 
    "subject": "Re: [junit] Factory adaptor approach", 
    "from": "Kevin Klinemeier &lt;zipwow@...&gt;", 
    "authorName": "Kevin Klinemeier", 
    "msgSnippet": "... what ... The idea of this, and its not reflected in the example code, is that the factory configures itself (via a properties file or just inherent ", 
    "msgId": 7441, 
    "rawEmail": "Return-Path: &lt;zipwow@...&gt;\r\nReceived: (qmail 71615 invoked from network); 2 Apr 2003 19:17:09 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m15.grp.scd.yahoo.com with QMQP; 2 Apr 2003 19:17:09 -0000\r\nReceived: from unknown (HELO n26.grp.scd.yahoo.com) (66.218.66.82)\n  by mta1.grp.scd.yahoo.com with SMTP; 2 Apr 2003 19:17:08 -0000\r\nX-eGroups-Return: zipwow@...\r\nReceived: from [66.218.67.183] by n26.grp.scd.yahoo.com with NNFMP; 02 Apr 2003 19:17:07 -0000\r\nX-Sender: zipwow@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 2 Apr 2003 17:19:02 -0000\r\nReceived: (qmail 76589 invoked from network); 2 Apr 2003 17:19:02 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m9.grp.scd.yahoo.com with QMQP; 2 Apr 2003 17:19:02 -0000\r\nReceived: from unknown (HELO web80403.mail.yahoo.com) (66.218.79.58)\n  by mta2.grp.scd.yahoo.com with SMTP; 2 Apr 2003 17:19:05 -0000\r\nMessage-ID: &lt;20030402171904.47311.qmail@...&gt;\r\nReceived: from [207.14.29.3] by web80403.mail.yahoo.com via HTTP; Wed, 02 Apr 2003 09:19:04 PST\r\nDate: Wed, 2 Apr 2003 09:19:04 -0800 (PST)\r\nSubject: Re: [junit] Factory adaptor approach\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;061101c2f920$ab5c2e50$e705000a@jnielsen2&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nFrom: Kevin Klinemeier &lt;zipwow@...&gt;\r\nX-Yahoo-Group-Post: member; u=82914509\r\nX-Yahoo-Profile: zipwow\r\nX-eGroups-Approved-By: clarkware &lt;mike@...&gt; via web; 02 Apr 2003 19:17:05 -0000\r\n\r\n\n--- Jeff Nielsen &lt;jeff.nielsen@...&gt; wrote:\n&gt; Why all of the use of static methods?  Statics are globals, as far as\n&gt; the VM is concerned, and you can run into problems not knowing what \n&gt; code last set the state.  Unless every client that uses the factory \n&gt; explicitly configures the factory before using it, you don&#39;t know\nwhat \n&gt; you&#39;re getting.\n\nThe idea of this, and its not reflected in the example code, is that\nthe factory configures itself (via a properties file or just inherent\nknowledge about the operation), and is instantiated only once.  I&#39;ll\nagree that rather than just making the methods static, it should\nprovide a static getInstance(..) class, and the users should call\nmethods on that.  By and large, the factory doesn&#39;t hold any state.\n\n&gt; For example, &quot;production&quot; code can use the default factory\n&gt; constructor.\n&gt; \n&gt;     myFactory = new Factory()\n&gt;     thing = myFactory.createThing()\n&gt; \n&gt; Test code can pass in arguments to the constructor.\n&gt; \n&gt;     new Factory(false)    OR\n&gt;     new Factory(overrideThing)    OR\n&gt;     new Factory().setOverrideThing(overrideThing)\n\nI&#39;m apparently mis-stating the problem.  There isn&#39;t any difference\nbetween &#39;production code&#39; and &#39;testing code&#39;.  The same code runs in\ntow environments: production and test.  Consider the following method:\n\npublic User lookupUser(String name) {\n    ConnectionFactory conFactory = new ConnectionFactory();\n    User foundUser = conFactory.getConnection().doUserLookup(name);\n}\n\nThe ConnectionFactory class (its not this simple in reality) looks for\nsome configuration files that provide information like the JDBC URL,\nthe hostname of the database, etc.  This all works fine, and it avoids\nhaving to pass the factory around in every constructor ever known to\nman.\n\nBut how can you test it without relying on the database?  Without the\napproach I described, I don&#39;t think you can.  Your test code&#39;s new\ninstances with different params don&#39;t have any effect on the instances\ncreated in the method.  So, the approach I&#39;m leaning towards is\nchanging the factory creation from above to:\n   \n    ConnectionFactory conFactory = ConnectionFactory.getInstance();\n\nIn this way, the test code can use a TestAdaptor class like I described\nin my earlier mail to create a whole different Factory that, for\nexample, only throws UserNotFoundException or returns null or whatever\nit ought to do when the user isn&#39;t found (a case clearly not well\nhandled by the method).\n\n&gt; \n&gt; You can even subclass a factory to behave in a different way, which\n&gt; is something else you can&#39;t do with statics.  \n&gt; As far as how to get a factory to the class that needs to use it, you\n\n&gt; can pass it in at construction time, \n\nAh, this is the heart of the question.  This and a couple other classes\nare used too broadly to be passed in to each method.\n\n&gt; or set it as an argument, \n\nagain, too common, it would have to be in nearly every method,\nincluding a few that don&#39;t otherwise need it except to shuttle the\nfactory object along.\n\n&gt; or override the factory creation method in the class under test\n\nThis is what I&#39;m talking about.  If its just the constructor, you can&#39;t\ndo that.  If its a static initializer, you can&#39;t override that either. \nSo you need some way to change the behavior of a static class when it\nis running in a test environment.\n\nThe point that the Factory should be implemented as a (possibly lazy)\nstatic initializer (not a constructor!) rather than all static methods\nis accurate, and is actually what my &#39;real&#39; code does.\n\nI think that, with the one change to the Factory approach, I&#39;m liking\nthis approach.  Having a single static getInstance() method also\nalleviates the &quot;insiduous cooperation&quot; of test and production code\nanother poster pointed out.\n\n-Kevin\n\n__________________________________________________\nDo you Yahoo!?\nYahoo! Tax Center - File online, calculators, forms, and more\nhttp://tax.yahoo.com\n\n\n", 
    "profile": "zipwow", 
    "topicId": 7358, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 82914509, 
    "prevInTime": 7440, 
    "contentTrasformed": false, 
    "postDate": "1049303944", 
    "canDelete": false, 
    "nextInTopic": 7442, 
    "prevInTopic": 7416, 
    "headers": {
        "inReplyToHeader": "PDA2MTEwMWMyZjkyMCRhYjVjMmU1MCRlNzA1MDAwYUBqbmllbHNlbjI+", 
        "messageIdInHeader": "PDIwMDMwNDAyMTcxOTA0LjQ3MzExLnFtYWlsQHdlYjgwNDAzLm1haWwueWFob28uY29tPg=="
    }
}