{
    "numMessagesInTopic": 9, 
    "nextInTime": 3959, 
    "senderId": "PbeZtEPv27Hlqn01LNpJti3WfIlT7Qg34v2zmh6HxiwaGrjLFA5WjQeecTB_z84LtC8_8IckfUJZwSu26g60qbtm", 
    "systemMessage": false, 
    "subject": "Re: How to get fixture from TestSetup", 
    "from": "Todd Jonker &lt;tvj@...&gt;", 
    "authorName": "Todd Jonker", 
    "msgSnippet": "... More specifically, I m trying to start using JUnit to build Acceptance tests for a Swing-based GUI application.  The application uses a custom framework ", 
    "msgId": 3958, 
    "rawEmail": "Return-Path: &lt;tvj@...&gt;\r\nX-Sender: tvj@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_1_3); 4 Feb 2002 20:21:06 -0000\r\nReceived: (qmail 86000 invoked from network); 4 Feb 2002 20:21:05 -0000\r\nReceived: from unknown (216.115.97.171)\n  by m2.grp.snv.yahoo.com with QMQP; 4 Feb 2002 20:21:05 -0000\r\nReceived: from unknown (HELO mail5.speakeasy.net) (216.254.0.205)\n  by mta3.grp.snv.yahoo.com with SMTP; 4 Feb 2002 20:21:05 -0000\r\nReceived: (qmail 11542 invoked from network); 4 Feb 2002 20:21:04 -0000\r\nReceived: from unknown (HELO ?10.0.1.61?) ([66.92.221.201]) (envelope-sender &lt;tvj@...&gt;)\n          by mail5.speakeasy.net (qmail-ldap-1.03) with SMTP\n          for &lt;junit@yahoogroups.com&gt;; 4 Feb 2002 20:21:04 -0000\r\nUser-Agent: Microsoft-Entourage/10.0.0.1331\r\nDate: Mon, 04 Feb 2002 15:21:11 -0500\r\nSubject: Re: How to get fixture from TestSetup\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nMessage-ID: &lt;B8845767.2F79%tvj@...&gt;\r\nIn-Reply-To: &lt;1012394902.340.54630.m12@yahoogroups.com&gt;\r\nMime-version: 1.0\r\nContent-type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-transfer-encoding: quoted-printable\r\nFrom: Todd Jonker &lt;tvj@...&gt;\r\nX-Yahoo-Group-Post: member; u=26242706\r\nX-Yahoo-Profile: todd15202\r\n\r\n\nOn 1/29/2002 at 6:10 PM I wrote:\n&gt; Hello, I&#39;m trying to figure out how to =\r\nproperly use TestSetup, but the\n&gt; documentation is very sparse and I&#39;ve fou=\r\nnd no help on the mailing list\n&gt; archive.\n&gt; \n&gt; I understand how to wrap the=\r\n appropriate TestCases inside a TestSetup,\n&gt; so that the setUp method in th=\r\ne wrapper is called only once for the entire\n&gt; set of TestCases.\n&gt; \n&gt; Presu=\r\nmably, that method (eg MyTestSetup.setUp) will initialize some\n&gt; fixture an=\r\nd store in in member variables.\n&gt; \n&gt; Now how do my nested TestCase instance=\r\ns access that common fixture?  I\n&gt; see no way to access it, and can&#39;t find =\r\nany sample code that does it.\n\n\nJ. B. Rainsberger &lt;jbr@...&gt;=\r\n kindly replied:\n&gt; Perhaps this question merits an answer on my web site. I=\r\nf you would\n&gt; like to describe the specific thing you&#39;re trying to do, I ca=\r\nn turn it\n&gt; into an article. :)\n\nMore specifically, I&#39;m trying to start usi=\r\nng JUnit to build Acceptance tests\nfor a Swing-based GUI application.  The =\r\napplication uses a custom framework\n(inspired by the Nucleus framework in A=\r\nTG Dynamo) that configures all the\ncomponents and links them together into =\r\nthe running application.\n\nWe already have lots of Unit tests over small par=\r\nts of the application, at\nthe frame and panel level, but those tests don&#39;t =\r\n(and can&#39;t) really exercise\nthe the bundles of property files that configur=\r\ne the components.  Thus the\nneed for Acceptance tests.\n\n(I searched all ove=\r\nr for a JUnit addon that can drive A-tests, but had no\nluck finding such a =\r\nbeast.  Any pointers?)\n\nSince the application startup takes a non-trivial a=\r\nmount of time, I&#39;d like\nto group the A-tests into sets, where each set uses=\r\n a single invocation of\nthe application and tests a related area of functio=\r\nnality.  It looked like\nand appropriate use of TestSetup... Until I ran int=\r\no the problem above.\n\nHere&#39;s more-or-less what I envision (forgive typos, I=\r\n&#39;m just making this up\non the fly):\n\n\npublic class ApplicationTestSetup\n   =\r\n extends TestSetup\n{\n    public void setUp()\n    {\n        myApplicationRoo=\r\nt =3D new Application();\n        myApplicationRoot.start();\n    }\n\n    publ=\r\nic void tearDown()\n    {\n        myApplicationRoot.shutdown();\n        myAp=\r\nplicationRoot =3D null;\n    }\n\n    Application myApplicationRoot;\n}\n\n\n/**\n =\r\n   A group of tests that should all run within the same Application\n    ins=\r\ntance.\n*/\npublic class SchedulingTestSuite\n    extends ApplicationTestSetup=\r\n\n{\n    public static Test suite()\n    {\n        return new SchedulingTestSu=\r\nite();\n    }\n\n    public SchedulingTestSuite()\n    {\n        addTestSuite(S=\r\ncheduleBookingTest.class);\n        addTestSuite(AppointmentEditorTest.class=\r\n);\n        // ...\n    }\n}\n\npublic class ScheduleBookingTest\n    extends Tes=\r\ntCase\n{\n    public void testSomething()\n    {\n        // XXX How to access =\r\nthe current value of myApplicationRoot?\n    }\n    public void testSomething=\r\nElse() { ... }\n}\n\n\nNow the question is:  how do the (implied) instances of =\r\nScheduleBookingTest\n(etc) access the fixture setup by ApplicationTestSetup.=\r\n  I don&#39;t want to\nhave to manually name the testcases (since that ALWAYS le=\r\nads to errors and\nmissed tests), so I use the reflective version of addTest=\r\nSuite.\n\n\n&gt; Is there something you need to do once and only once for the who=\r\nle\n&gt; suite because it&#39;s otherwise difficult or expensive to do it for all\n&gt;=\r\n the tests?\n\nProbably once for a subset of the tests, then again for anothe=\r\nr subset, etc.\nThe intent is to balance the risk of inter-test interference=\r\n with the cost\nof application startup.  Note that our app connects to a dat=\r\nabase, which I\nbelieve  must also be wiped and re-populated with the test d=\r\nataset before\neach set of tests is run.\n\n\n&gt; You could have class-level attr=\r\nibutes on the TestCase class and let the\n&gt; setUp() and tearDown() methods o=\r\nf the TestSetup assign values to those\n&gt; class-level attributes. For exampl=\r\ne, suppose you want to establish a\n&gt; single database connection and use it =\r\nfor all tests. You have two\n&gt; choices:\n\nWell, yeah... But!  Forgive me, but=\r\n that=B9s an extremely smelly solution.  I\nfind it hard to believe the othe=\r\nrwise-brilliant creators of JUnit would give\nus a design that forces the us=\r\ne of global variables!\n\n\n&gt; public class MyDatabaseTestCase extends TestCase=\r\n {\n&gt;   private static Connection connection;\n&gt; \n&gt;   public static Test suit=\r\ne() {\n&gt;       return new TestSetup(new TestSuite(MyDatabaseTestCase.class))=\r\n {\n&gt;           protected void setUp() throws Exception {\n&gt;               co=\r\nnnection =3D DriverManager.getConnection(...);\n&gt;           }\n&gt;    \n&gt;       =\r\n    protected void tearDown() throws Exception {\n&gt;               connection=\r\n.close();\n&gt;               connection =3D null;\n&gt;           }\n&gt;       };\n&gt;  =\r\n }\n&gt; }\n\nAhh... You&#39;re using an inner class for the TestSetup.  This is clos=\r\ne, but it\nstill makes me very uncomfortable.\n\n\n&gt; or, perhaps...\n&gt; \n&gt; // Dan=\r\nger -- connection not closed! Shutdown hook, perhaps?\n&gt; public class MyData=\r\nbaseTestCase extends TestCase {\n&gt;   private static Connection connection;\n&gt;=\r\n \n&gt;   protected void setUp() throws Exception {\n&gt;       if (connection =3D=\r\n=3D null) {\n&gt;           connection =3D DriverManager.getConnection(...);\n&gt; =\r\n      }\n&gt;   }\n&gt; }\n\nAs you note, this doesn&#39;t properly tearDown after the te=\r\nsts are run, which\nis where TestSetup.tearDown would come into play.\n\n\n&gt; Do=\r\nes that help?\n\nWell, it&#39;s a workable solution, but there&#39;s *got* to be a cl=\r\nean way that\ndoesn&#39;t involve static variables.  Anybody else have ideas?\n\n\n=\r\n.T.\n\nTodd V. Jonker\nInpath Solutions, LLC\nwww.inpathsol.com\n\n\n", 
    "profile": "todd15202", 
    "topicId": 3909, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 26242706, 
    "prevInTime": 3957, 
    "contentTrasformed": false, 
    "postDate": "1012854071", 
    "canDelete": false, 
    "nextInTopic": 3959, 
    "prevInTopic": 3913, 
    "headers": {
        "inReplyToHeader": "PDEwMTIzOTQ5MDIuMzQwLjU0NjMwLm0xMkB5YWhvb2dyb3Vwcy5jb20+", 
        "messageIdInHeader": "PEI4ODQ1NzY3LjJGNzkldHZqQHBvYm94LmNvbT4="
    }
}