{
    "numMessagesInTopic": 8, 
    "nextInTime": 18741, 
    "senderId": "d2Lc6qceTfnxBKInrCrYgrHucdgyBL3UbQ2btJxhdK4TfoccovbGCIw2SxI6VInuLaNf5fpIc3Nxmz0Lq5-LKOs8", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Custom Runner Delegation", 
    "from": "&quot;David Saff&quot; &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Gabriel, Thank you very much for that example.  The mystery thickens--your test passes in my environment!  (Eclipse compiler on jdk 1.5.0_04).  What compiler", 
    "msgId": 18740, 
    "profile": "dsaff", 
    "topicId": 18695, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "messageBody": "<div id=\"ygrps-yiv-1253569730\">Gabriel,<br/>\n<br/>\nThank you very much for that example.  The mystery thickens--your test<br/>\npasses in my environment!  (Eclipse compiler on jdk 1.5.0_04).  What<br/>\ncompiler and runtime are you using?  I&#39;m beginning to suspect<br/>\ndifferences in support for the @Inherited annotation.  Thanks,<br/>\n<br/>\n   David Saff<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 1/12/07, gabrielcooper &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:gabriel.cooper@...\">gabriel.cooper@...</a>&gt; wrote:<br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;David Saff&quot; &lt;saff@...&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Gabriel,<br/>\n&gt; &gt;<br/>\n&gt; &gt; On 1/10/07, gabrielcooper &lt;gabriel.cooper@...&gt; wrote:<br/>\n&gt; &gt; &gt; What runner should it use if none is specified in the subclass? The<br/>\n&gt; &gt; &gt; default &quot;TestClassRunner&quot; or the parent class&#39;s &quot;MyCustomRunner&quot;?<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Currently it uses the default runner rather than its parents&#39; custom<br/>\n&gt; &gt; &gt; one. Would it make sense to have runners be inherited from their<br/>\n&gt; parents?<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yes, it would, and the current implementation should--there&#39;s even a<br/>\n&gt; &gt; passing test that says it does.  Hmm...<br/>\n&gt; &gt;<br/>\n&gt; &gt; Could you simplify and post a failing test to help us figure out the<br/>\n&gt; &gt; problem you&#39;re having?  Thanks,<br/>\n&gt; &gt;<br/>\n&gt; &gt;    David Saff<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt; I probably could have come up with a slightly shorter example by<br/>\n&gt; shortening NameAwareTestClassRunner, but ... it&#39;s pretty darn short as<br/>\n&gt; it is and actually serves a purpose, so I left it at a whopping 54 lines.<br/>\n&gt;<br/>\n&gt; The gist here is that Bar, superclass to Foo, specifies a custom<br/>\n&gt; runner (NameAware). An @Test verifies that the Listener really is<br/>\n&gt; working here.<br/>\n&gt;<br/>\n&gt; Then inside Foo, we have the same @Test. Per previous conversation<br/>\n&gt; here, in theory it should run correctly here as well, but does not.<br/>\n&gt; The Listener is not, well, listening.<br/>\n&gt;<br/>\n&gt; // Foo.java<br/>\n&gt; import static junit.framework.Assert.assertEquals;<br/>\n&gt;<br/>\n&gt; import org.junit.Test;<br/>\n&gt;<br/>\n&gt; public class Foo extends Bar {<br/>\n&gt;         @Test<br/>\n&gt;         public void testName() {<br/>\n&gt;                 // fails<br/>\n&gt;                 assertEquals(&quot;testName&quot;,example);<br/>\n&gt;         }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; // Bar.java<br/>\n&gt; import static junit.framework.Assert.assertEquals;<br/>\n&gt; import org.junit.Before;<br/>\n&gt; import org.junit.Test;<br/>\n&gt; import org.junit.runner.RunWith;<br/>\n&gt;<br/>\n&gt; @RunWith(NameAwareTestClassRunner.class)<br/>\n&gt; public class Bar {<br/>\n&gt;         String example;<br/>\n&gt;<br/>\n&gt;         @Before<br/>\n&gt;         public void setUp() {<br/>\n&gt;                 example = NameAwareTestClassRunner.getTestName();<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt;         @Test<br/>\n&gt;         public void testName() {<br/>\n&gt;                 // succeeds<br/>\n&gt;                 assertEquals(&quot;testName&quot;,example);<br/>\n&gt;         }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; // NameAwareTesetClassRunner.java<br/>\n&gt; import org.junit.internal.runners.InitializationError;<br/>\n&gt; import org.junit.internal.runners.TestClassRunner;<br/>\n&gt; import org.junit.runner.Description;<br/>\n&gt; import org.junit.runner.notification.RunListener;<br/>\n&gt; import org.junit.runner.notification.RunNotifier;<br/>\n&gt;<br/>\n&gt; public class NameAwareTestClassRunner extends TestClassRunner {<br/>\n&gt;         public NameAwareTestClassRunner(Class&lt;?&gt; klass) throws<br/>\n&gt; InitializationError {<br/>\n&gt;                 super(klass);<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt;         private static String testName;<br/>\n&gt;<br/>\n&gt;         protected static String getName() {<br/>\n&gt;                 return testName;<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt;         protected static void setName(final String name) {<br/>\n&gt;                 testName = name;<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt;         protected static String getTestName() {<br/>\n&gt;                 if (testName == null)<br/>\n&gt;                         return null;<br/>\n&gt;<br/>\n&gt;                 int last = testName.indexOf(&#39;(&#39;);<br/>\n&gt;                 if (last &lt; 0)<br/>\n&gt;                         last = testName.length() + 1;<br/>\n&gt;                 return testName.substring(0, last);<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt;         private static class NameListener extends RunListener {<br/>\n&gt;                 /** Record start of tests, not suites */<br/>\n&gt;                 public void testStarted(Description description) throws Exception {<br/>\n&gt;                         System.err.println(&quot; STARTED: &quot; + description.getDisplayName());<br/>\n&gt;                         setName(description.isTest() ? description.getDisplayName() : null);<br/>\n&gt;                 }<br/>\n&gt;<br/>\n&gt;                 public void testFinished(Description description) throws Exception {<br/>\n&gt;<br/>\n&gt;                         System.err.println(&quot;FINISHED: &quot; + description.getDisplayName());<br/>\n&gt;                         if (getName() != null)<br/>\n&gt;                                 if (getName().equals(description.getDisplayName()))<br/>\n&gt;                                         setName(null);<br/>\n&gt;                                 else<br/>\n&gt;                                         throw new Exception(&quot;DAMMIT! - test name mismatch&quot;);<br/>\n&gt;                 }<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt;         public void run(final RunNotifier notifier) {<br/>\n&gt;                 notifier.addListener(new NameListener());<br/>\n&gt;                 super.run(notifier);<br/>\n&gt;         }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 18739, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1168876847", 
    "canDelete": false, 
    "nextInTopic": 18741, 
    "prevInTopic": 18729, 
    "headers": {
        "inReplyToHeader": "PGVvODhjcytwYW5yQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDcwMTE1MDgwMHY3ZTRjNThiczM5ZmE5YTI2MzVjMzQ3MkBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDRmN2RhNmI5MDcwMTExMDgyNnQ3NTA4NzIxMW42NjhlOGJhMTAzMGMwYjdlQG1haWwuZ21haWwuY29tPgkgPGVvODhjcytwYW5yQGVHcm91cHMuY29tPg=="
    }
}