{
    "numMessagesInTopic": 4, 
    "nextInTime": 23433, 
    "senderId": "yz8Oj08DnjWVSQDQyxSPhaBEmw174J3f68bRlJVTzR8JxfK2AIQFpfDcUCMfEwNvEJUmMq5lWOU2uE70a71dA0yS03CFv4E7YUl5saKUjJ2c1w", 
    "systemMessage": false, 
    "subject": "Re: [junit] mock javax.naming.InitialContext", 
    "from": "Joakim Ohlrogge &lt;joakim.ohlrogge@...&gt;", 
    "authorName": "Joakim Ohlrogge", 
    "msgSnippet": "I would wrap the context behind my own interface and stub/mock/whatever testdouble technique you prefer that. Then I would add just enough system level tests", 
    "msgId": 23432, 
    "profile": "j0hlrogge", 
    "topicId": 23430, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 261856052, 
    "messageBody": "<div id=\"ygrps-yiv-1842082463\">I would wrap the context behind my own interface and stub/mock/whatever<br/>\ntestdouble technique you prefer that. Then I would add just enough system<br/>\nlevel tests to make sure it works with a JNDI context in place and use my<br/>\nown interface in the rest of my code. The instance of my interface would be<br/>\ninjected something like this:<br/>\n<br/>\nServiceFactory services = new ServiceFactoryStub();<br/>\nSomethingIWantToTest subject = new SomethingIWantToTest(services);<br/>\n<br/>\nThen you don&#39;t have to worry about JNDI anywhere in our code except of<br/>\ncourse in the JNDI service implementation which would look something like<br/>\nthe code you provided internally.<br/>\n<br/>\nWhen it comes to mocking frameworks, unless you are interested in verifying<br/>\ninteractions then roll your own stubs. That way your stub code will be in<br/>\none place and not spread out and duplicated all over your tests and become<br/>\nan unmaintainable mess of expectations that you don&#39;t really care about<br/>\nexcept as a way to make mocks return the proper values for invocations that<br/>\nhappen to occur in your tests.<br/>\nIf on the other hand you believe that interactions between roles are<br/>\nimportant to verify then pick a good mock framework like JMock and learn how<br/>\nto use it properly. I have not read the book yet but I hear good things<br/>\nabout Growing Object Oriented systems. I would assume, given who wrote it,<br/>\nthat you will find everything you need to understand about mock frameworks<br/>\nand how to use them properly and efficiently without making a mess.<br/>\n<br/>\nI hope this helps some.<br/>\nGood luck!<br/>\n<br/>\n<br/>\n-----------------------------------------------------<br/>\nJoakim Ohlrogge<br/>\nAgical AB<br/>\nV�sterl�nggatan 79, 2 tr<br/>\n111 29 Stockholm, SWEDEN<br/>\n<br/>\nBlog: johlrogge.wordpress.com<br/>\nTwitter: @johlrogge<br/>\nE-mail: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:joakim.ohlrogge@...\">joakim.ohlrogge@...</a><br/>\n<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Wed, Jun 1, 2011 at 9:39 PM, congzb &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:zhebincong@...\">zhebincong@...</a>&gt; wrote:<br/>\n<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Hello,<br/>\n&gt;<br/>\n&gt; in my source code, including following code:<br/>\n&gt;<br/>\n&gt; InitialContext ctx = new InitialContext();<br/>\n&gt; ............= (...........)ctx.lookup(&quot;java:comp/env/service/someservce&quot;);<br/>\n&gt;<br/>\n&gt; so i wonder, in my junit test case, how to mock the InitialContext to look<br/>\n&gt; up and return a mock service?<br/>\n&gt; Thanks.<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 23431, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1307049565", 
    "canDelete": false, 
    "nextInTopic": 23433, 
    "prevInTopic": 23431, 
    "headers": {
        "inReplyToHeader": "PGlzNjRoYSs1MG40QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PEJBTkxrVGltbz1lMWJLaGJRYUpzRU55YV9aVnRrKy12PT1RQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGlzNjRoYSs1MG40QGVHcm91cHMuY29tPg=="
    }
}