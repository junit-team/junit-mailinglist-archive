{
    "numMessagesInTopic": 2, 
    "nextInTime": 6072, 
    "senderId": "k5vZoWVA1vXqJ_l7MGbUn7y8igJP1C4mFEE1Cf1bBBEnzCcq4Fqb_i-eZSsAYokjpk2A191nkaoW27vjzQ19MqDoSnUaJ0tmP9E1hyeRVkU", 
    "systemMessage": false, 
    "subject": "Security issue while running under Ant", 
    "from": "&quot;craigsdickson&quot; &lt;craigsdickson@...&gt;", 
    "authorName": "craigsdickson", 
    "msgSnippet": "During one of my unit tests, I attempt to make a connection via JNDI to an EJB. In my  element, I have a directory that contains a jndi.properties", 
    "msgId": 6071, 
    "profile": "craigsdickson", 
    "topicId": 6071, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 96396263, 
    "messageBody": "<div id=\"ygrps-yiv-1771000758\">During one of my unit tests, I attempt to make a connection via JNDI <br/>\nto an EJB.<br/>\n<br/>\nIn my &lt;classpath&gt; element, I have a directory that contains a <br/>\njndi.properties file and I use the no arg constructor when creating <br/>\nan InitialContext.<br/>\n<br/>\nThe test fails and looking at the stack trace I see that as part of <br/>\nthe no arg constructor call, it is attempting to find a <br/>\nsecurity.policy file. As jvmargs I have turned on the security <br/>\nmanager and also specified the security policy location. However, it <br/>\nis looking for it in a completely different spot. If I remove those <br/>\njvmargs, I get the exact same result - it is almost like JUnit is <br/>\nusing its own SecurityManger or something. It is always looking for <br/>\nthe security policy file under config/security.policy no matter what <br/>\nI do.<br/>\n<br/>\nAlso in an additional stack trace, it is looking for a file called <br/>\nconfig/ejb.properties - I have no idea what that file is for.<br/>\n<br/>\nWhen I execute the tests from the command line, they run perfectly.<br/>\n<br/>\nHere is the ant task I am using to run JUnit.<br/>\n<br/>\n&lt;target name=&quot;test&quot;&gt;<br/>\n  &lt;taskdef name=&quot;junit&quot; <br/>\nclassname=&quot;org.apache.tools.ant.taskdefs.optional.junit.JUnitTask&quot; <br/>\nclasspathref=&quot;taskdef.classpath&quot;/&gt;<br/>\n<br/>\n  &lt;junit printsummary=&quot;yes&quot; fork=&quot;true&quot;&gt;<br/>\n    &lt;classpath refid=&quot;test.classpath&quot;/&gt;<br/>\n    &lt;formatter type=&quot;xml&quot;/&gt;<br/>\n    &lt;!--&lt;jvmarg value=&quot;-Djava.security.manager&quot;/&gt;--&gt;<br/>\n    &lt;!--&lt;jvmarg value=&quot;-<br/>\nDjava.security.policy=${resources.dir}/test/security.policy&quot;/&gt;--&gt;<br/>\n<br/>\n    &lt;batchtest&gt;<br/>\n      &lt;fileset dir=&quot;${build.dir.classes}&quot; <br/>\nincludes=&quot;test/**/*Test.class&quot;/&gt;<br/>\n    &lt;/batchtest&gt;<br/>\n  &lt;/junit&gt;<br/>\n&lt;/target&gt;<br/>\n<br/>\n<br/>\nI know there are classpath issues with Junit and ant, but I am not <br/>\nsure they apply here since JUnit us actually running and then failing <br/>\nthe tests.<br/>\n<br/>\nAnyone got any suggestions?<br/>\n<br/>\nThanks,<br/>\nCraig</div>", 
    "prevInTime": 6070, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1036080961", 
    "canDelete": false, 
    "nextInTopic": 6093, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGFwcmwwMSthbmY3QGVHcm91cHMuY29tPg=="
    }
}