{
    "numMessagesInTopic": 18, 
    "nextInTime": 11523, 
    "senderId": "NGkwJ0_HMTexAdIutdJVCl_l83p9NTfH2-Hx7ZnPv7xj7bcnJ5Bk5wDU-OXtAqWgXsa-sLcLeichQvE3nqJezCuEeV10yU57gcRSTgjXlg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Did my question get missed, somehow?", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... Rudeness objection. I expressly did not dismiss your point. [I have removed some items in light of a realization, late in your message, of what s really", 
    "msgId": 11522, 
    "rawEmail": "Return-Path: &lt;jbrains@...&gt;\r\nX-Sender: jbrains@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 53546 invoked from network); 16 Jul 2004 13:39:48 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m25.grp.scd.yahoo.com with QMQP; 16 Jul 2004 13:39:48 -0000\r\nReceived: from unknown (HELO smtp102.rog.mail.re2.yahoo.com) (206.190.36.80)\n  by mta6.grp.scd.yahoo.com with SMTP; 16 Jul 2004 13:39:47 -0000\r\nReceived: from unknown (HELO ?192.168.1.119?) (jbrains@24.156.43.226 with plain)\n  by smtp102.rog.mail.re2.yahoo.com with SMTP; 16 Jul 2004 13:39:46 -0000\r\nMessage-ID: &lt;40F7DA80.7090106@...&gt;\r\nDate: Fri, 16 Jul 2004 09:39:12 -0400\r\nUser-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;cd7756+l6r4@...&gt;\r\nIn-Reply-To: &lt;cd7756+l6r4@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Remote-IP: 206.190.36.80\r\nFrom: &quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;\r\nSubject: Re: [junit] Re: Did my question get missed, somehow?\r\nX-Yahoo-Group-Post: member; u=127224993\r\nX-Yahoo-Profile: nails762\r\n\r\ncypherfox wrote:\n\n&gt; The problem with dismissing it like\n&gt; that is...\n\nRudeness objection. I expressly did not dismiss your point.\n\n[I have removed some items in light of a realization, late in your \nmessage, of what&#39;s really going on here.]\n\n&gt;  &gt; &gt; Is there any way to override this, making it call the test*\n&gt;  &gt; &gt; methods all on the same object?\n&gt;  &gt;\n&gt;  &gt; Not without rewriting the framework. The framework was written\n&gt;  &gt; /expressly with the goal/ of isolating tests from one another. The\n&gt;  &gt; framework achieves this by executing each test in its own instance\n&gt; of\n&gt;  &gt; Test (or TestCase).\n&gt; \n&gt; The problem I have with this is it&#39;s completely unlike how code is\n&gt; actually used.  It&#39;s forcing a framework on code that makes it much\n&gt; less useful to test.  \n\nNo-one is forcing anything. If JUnit doesn&#39;t work for you, then build \nyour own testing framework. No-one is going to stop you.\n\n &gt; I don&#39;t need (or think it&#39;s right at all) to\n&gt; test all of:\n&gt; \n&gt; connect to server\n&gt; create user\n&gt; create mailbox\n&gt; post message\n&gt; *read message*\n&gt; delete message\n&gt; delete mailbox\n&gt; delete user\n&gt; disconnect\n&gt; \n&gt; all in one test, just in order to test the &#39;read message&#39; in the\n&gt; middle.\n\nWell of course not! I would /never/ do such a thing! I would just pull \nout the &quot;read message&quot; part and test it in isolation. I do that all the \ntime, successfully, with JUnit.\n\n&gt; Are you saying this is expressly what is desired?  That all\n&gt; the authors think is appropriate is one single &#39;mega test&#39;\n&gt; that runs all those functions?  Or was testing code that\n&gt; talks to external stateful systems just not considered?\n\nNo, no, no... I can&#39;t imagine what you would have read that would have \nsuggested that to you. I apologize for that. Absolutely not.\n\n&gt;  &gt; &gt; My reasoning is that if I write a test which creates, reads,\n&gt;  &gt; &gt; and deletes the entry from the server, I&#39;m doing too much\n&gt;  &gt; &gt; in a single test.\n&gt;  &gt;\n&gt;  &gt; A test consists of three parts: arrange, act, assert. You need to\n&gt; set up\n&gt;  &gt; the system in a desired, known state (arrange),\n&gt; \n&gt; Done through the prior tests, and since they&#39;ve presumably\n&gt; succeeded, the next test can run.\n\nWith object-level testing, /each/ test contains the &quot;Arrange, act, \nassert&quot; triad. In order for these tests to run quickly, each part must \nrun quickly, and it turns out that when you make that a goal, good \nthings happen. Different things than you&#39;re accustomed to, but good things.\n\n&gt;  &gt; do something of interest (act)\n&gt; \n&gt; E.g., The &#39;read message&#39;, which is the only thing of interest to the\n&gt; testReadMessage method.\n\nRight. There should be absolutely no need to set up the system in a \ncomplicated manner, just to read a message (whatever that means in this \ncontext). Would you describe what &quot;read message&quot; does?\n\n&gt;  &gt; then check the results (assert).\n&gt; \n&gt; See you&#39;re forgetting a few things, when dealing with stateful\n&gt; external systems.  \n\nRudeness objection again. You do not know what I&#39;m remembering and what \nI&#39;m forgetting.\n\n&gt; Namely &#39;reset state&#39;, which should occur\n&gt; AFTER assert.  \n\nWell, for me, &quot;reset state&quot; is a no-op, because an isolated, \nobject-level test generally does not affect global state. If it did, \nthen I wouldn&#39;t be able to call it &quot;isolated&quot;.\n\n&gt; But it needs to be tested also, of course.  And\n&gt; since it needs to be tested, it needs a test, preferrably simple\n&gt; because simple is good, that runs in the normal sequence of\n&gt; things.   Instead of doing the 9 operations every time, for 9\n&gt; tests, the clear process is to do it once, in the prior test, and\n&gt; use that state in the next test.\n\nI agree that that&#39;s clear. However, when many tests share the same \nglobal state, and when each test&#39;s success depends on a preceding test \npassing, bad things happen.\n\nExample: test #1 fails, and tests #2-#10 are now meaningless, because \n#1&#39;s failure leaves the system in an undesirable, strange state. To me, \ntest failures ought not to affect one another.\n\nExample: if I need to add a new special case test for inserting data, \nand my &quot;insert&quot; tests come before my &quot;read&quot; and &quot;delete&quot; tests, which \nseems to follow your idea of reasonable, then I have to change my &quot;read&quot; \ntests (and maybe even my &quot;delete&quot; tests) to handle the new, extra data, \n/even if those changes don&#39;t improve those tests/! I will have created \nan unnecessary maintenance issue in my tests.\n\nThese are only two common examples of problems that come from writing \ntests that depend on shared, global state. My experience tells me that \nwriting isolated tests costs less, so that&#39;s the way I do things.\n\n&gt; Statics aren&#39;t an answer, and the framework forcing them on\n&gt; tests is a failure in the framework.  I was hoping that wasn&#39;t\n&gt; the answer.\n\nStatics aren&#39;t an answer, and having to use them is a failure in the \ndesign of the production code.\n\n(It sounds silly when I state it that way, doesn&#39;t it?)\n\n&gt;  &gt; You are right: your test is\n&gt;  &gt; doing too much, but I don&#39;t think the test is at fault.\n&gt; \n&gt; Each test is testing a single, basic unit of functionality.   You\n&gt; misread me, I&#39;m saying that if I have to do all the steps\n&gt; outlined above EVERY time I want to do only ONE of those\n&gt; tests, then the test is doing far too much, and it&#39;s the\n&gt; framework at fault for forcing that kind of test process.\n\nI&#39;m afraid that /you/ have misread /me/.\n\nI wrote: &quot;your test is doing too much&quot;\nYou wrote: &quot;Each test is testing a single, basic unit...&quot;\n\nI didn&#39;t say that your test was /testing/ too much. I said that your \ntest is /doing/ too much. Here&#39;s the distinction: the &quot;too much&quot; that \nyour test is doing is jumping through hoops to set up global state that \nsuch a test does not need to set up, /if/ you approach it slightly \ndifferently.\n\n&gt;  &gt; &gt; The only place that threading comes in is that I can&#39;t use a\n&gt;  &gt; &gt; static value to keep this data, because then it&#39;s shared among\n&gt;  &gt; &gt; all the threads.\n&gt;  &gt;\n&gt;  &gt; I don&#39;t understand why you need multiple threads while running the\n&gt;  &gt; tests. Could you run the tests in singlethreaded mode? The fact\n&gt; that you\n&gt;  &gt; want to test logic in multithreaded mode tells me that you may be\n&gt; trying\n&gt;  &gt; to test too many things at once.\n&gt; \n&gt; Yes, yes, the test is run once in single-threaded mode,\n&gt; to make sure the basic logic is correct.  I do that as a\n&gt; sanity test before running the multi-threaded test.  The\n&gt; problem still exists, of course, because state should be\n&gt; preserved.  (Actually, there are about a half dozen pre-MT\n&gt; test classes that are run, testing the logic of various layers.)\n&gt; \n&gt; It&#39;s then run in a heavily multithreaded context, because\n&gt; that&#39;s the context it&#39;s going to be run in the real world,\n&gt; so it tries to hash out any threading issues in the various\n&gt; layers.  This is a test, after all.\n\nIf I understand you correctly, you are doing some load tests to iron out \nconcurrency issues. From my understanding, you could use JUnit to do \nthat, but I wouldn&#39;t do it that way. I would use some other kind of \nend-to-end testing tool, like Silk Performer. I would have to defer to \nsomeone else who is more capable of commenting on that, since I have \nlittle experience in that direction.\n\nI feel even more strongly now that JUnit is not the right tool for the \njob you&#39;re trying to perform.\n\n&gt;  &gt;  &gt; Any suggestions?\n&gt;  &gt;\n&gt;  &gt; What is your goal? To verify your logic? To test concurrency? At a\n&gt;  &gt; minimum, do each of these separately, and not together.\n&gt; \n&gt; I do each of them separately.  I test the logic once, with the\n&gt; storageTest class as a single thread.  I then try to test the\n&gt; concurrency by calling storageTest from one to three hundred\n&gt; threads.\n\nAll right. I think I understand. It wasn&#39;t clear that you were already \ndoing this, and so much of my previous advice is likely old hat. I \nprobably should have asked this question earlier.\n\n&gt; Right now, I have a &#39;massiveTest&#39; class which calls all the methods\n&gt; of the storageTest class directly, after doing a hand-setup so that\n&gt; the storageTest object can query some data.  It&#39;s just a hack-around\n&gt; for the problem that the TestSuite instantiates a new object every\n&gt; time.  If it didn&#39;t do that, the code would be vastly cleaner.\n\nI imagine you could build your own test runner easily enough to execute \nall the tests in a suite against the same fixture data.\n\nI still think that simply using class-level data would suffice. I still \ndon&#39;t understand the objection. It appears that your tests are using \nsome external resource (like a database, mail server/client, whatever). \nWhat&#39;s the difference between using an external resource and class-level \ndata? It&#39;s all global, from the test case&#39;s point of view. I don&#39;t \nunderstand why using one would be any better or worse than using the other.\n\n&gt;  &gt; &gt; p.s.  Nope, no extensions yet, although I&#39;m eyeing TestResult\n&gt;  &gt; &gt; as needing a touch of an upgrade...\n&gt;  &gt;\n&gt;  &gt; Interesting... do tell.\n&gt; \n&gt; Certainly.  The massiveTest I mentioned above has to call each\n&gt; method on storageTest directly, so when a failure occurs I can&#39;t\n&gt; easily determine WHERE it failed, because the only test that\n&gt; appears in TestResult is &#39;testMultithreadedStorage&#39;.\n&gt; \n&gt; It would be good to have testMultithreadedStorage call the\n&gt; suite.run(myResult) for the storageTest class (if that worked\n&gt; properly with state preservation), and then aggregate the\n&gt; results for all the threads, so it appears more like what really\n&gt; happened, that the storageTest test suite was run 2000 times,\n&gt; and which calls failed, asserted, etc.\n&gt; \n&gt; This was the part that was probably pretty complex and poorly\n&gt; described in my original post, so I left it out initially.\n\nI /think/ I understand. There /are/ multithreaded extensions to JUnit, \nalthough I&#39;ve never tried any of them. MTUnit comes to mind, although \nthat could be wrong. It may be worth examining.\n-- \nJ. B. Rainsberger,\nDiaspar Software Services\nhttp://www.diasparsoftware.com :: +1 416 791-8603\nLet&#39;s write software that people understand\n\n", 
    "profile": "nails762", 
    "topicId": 11495, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "prevInTime": 11521, 
    "contentTrasformed": false, 
    "postDate": "1089985152", 
    "canDelete": false, 
    "nextInTopic": 11538, 
    "prevInTopic": 11521, 
    "headers": {
        "inReplyToHeader": "PGNkNzc1NitsNnI0QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQwRjdEQTgwLjcwOTAxMDZAcm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGNkNzc1NitsNnI0QGVHcm91cHMuY29tPg=="
    }
}