{
    "numMessagesInTopic": 12, 
    "nextInTime": 22383, 
    "senderId": "0_zts7nshBsfm2OlhOkN_Gr8jNZ19SVQrordqJf4yN4vN81dpx_e2cJh0SCdSuuYmIaeBlXaDn3tFsgmY1roJEo0", 
    "systemMessage": false, 
    "subject": "Re: [junit] Theories Usability", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Berin, Do you have a stack trace you could share?  That would be really helpful. David On Mon, Feb 8, 2010 at 12:35 PM, Loritsch, Berin C.", 
    "msgId": 22382, 
    "profile": "dsaff", 
    "topicId": 22365, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "messageBody": "<div id=\"ygrps-yiv-98361870\">Berin,<br/>\n<br/>\nDo you have a stack trace you could share?  That would be really helpful.<br/>\n<br/>\n   David<br/>\n<br/>\nOn Mon, Feb 8, 2010 at 12:35 PM, Loritsch, Berin C.<br/>\n&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:berin.loritsch@...\">berin.loritsch@...</a>&gt; wrote:<br/>\n<blockquote><span title=\"qreply\"> &gt;<br/>\n&gt; I have JUnit 4.7 which is the most recent available from Maven.  The parameters that caused the failure were not easily detectable from the stack trace.<br/>\n&gt;<br/>\n&gt; I&#39;ve added a feature request, that would at least allow a theory to be declared to be run as discrete.  AKA:<br/>\n&gt;<br/>\n&gt; @Theory(runAsDiscrete=true)<br/>\n&gt;<br/>\n&gt; which would generate a new &quot;test&quot; for each combination of parameters.  The name of the test would include the parameters (using the toString method on the parameters of course).  It may generate 100+ test names, depending on the number of data points and the combinations, but that works better for me than one name and one failure at a time.<br/>\n&gt;<br/>\n&gt; -----Original Message-----<br/>\n&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> on behalf of David Saff<br/>\n&gt; Sent: Mon 2/8/2010 11:13 AM<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; Subject: Re: [junit] Theories Usability<br/>\n&gt;<br/>\n&gt; Berin,<br/>\n&gt;<br/>\n&gt; I wouldn&#39;t use Rules, either.<br/>\n&gt;<br/>\n&gt; One failure per method is currently baked into the architecture of the<br/>\n&gt; Theories runner--I&#39;d welcome a feature request for the right way to<br/>\n&gt; make that better.<br/>\n&gt;<br/>\n&gt; In terms of knowing what failed, the Theories runner should show in<br/>\n&gt; the stack trace the parameters that triggered the failure.  Is that<br/>\n&gt; not happening?<br/>\n&gt;<br/>\n&gt;   David<br/>\n&gt;<br/>\n&gt; On Mon, Feb 8, 2010 at 9:24 AM, Loritsch, Berin C.<br/>\n&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:berin.loritsch@...\">berin.loritsch@...</a>&gt; wrote:<br/>\n&gt;&gt; I haven&#39;t logged the feature request, mainly because I might not be using the right tool for the job.  What I would like to see is what I described.<br/>\n&gt;&gt;<br/>\n&gt;&gt; With JUnit 3, I adopted the test nomenclature of something on the order of:<br/>\n&gt;&gt;<br/>\n&gt;&gt; testMyMethod_withNullParam1()<br/>\n&gt;&gt; testMyMethod_withXandYparams()<br/>\n&gt;&gt;<br/>\n&gt;&gt; etc.<br/>\n&gt;&gt;<br/>\n&gt;&gt; that would let me see within the test report (particularly a continuous integration test report) what exactly failed.  If the null parameter failed its check I&#39;d have to fix one thing (boundary checking), but if the XandYparams version failed then I knew something may be wrong with the algorithm.<br/>\n&gt;&gt;<br/>\n&gt;&gt; With the particular Theory I&#39;ve written I need to know not only the class that was tested, but the attribute that did not follow the contracts for using the base class.  With only one failure that can&#39;t happen.<br/>\n&gt;&gt;<br/>\n&gt;&gt; I didn&#39;t think Rules was the right way to go, because the MethodRule objects were applied to the tests within that same class (unless I&#39;m missing something).<br/>\n&gt;&gt;<br/>\n&gt;&gt; Theories at least gives me the coverage and assurance I&#39;m after, but I&#39;d like to get away from writing to System.out to figure out exactly what failed.  I would also like to be able to see all my failures at once instead of only after fixing the last failure.<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; -----Original Message-----<br/>\n&gt;&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> on behalf of David Saff<br/>\n&gt;&gt; Sent: Sun 2/7/2010 9:48 PM<br/>\n&gt;&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt;&gt; Subject: Re: [junit] Theories Usability<br/>\n&gt;&gt;<br/>\n&gt;&gt; Berin,<br/>\n&gt;&gt;<br/>\n&gt;&gt; I do think that we should eventually have a way to operate at least<br/>\n&gt;&gt; optionally in the way you describe.  Have you logged a feature request<br/>\n&gt;&gt; yet?<br/>\n&gt;&gt;<br/>\n&gt;&gt;   Davi<br/>\n&gt;&gt;<br/>\n&gt;&gt; On Fri, Feb 5, 2010 at 3:27 PM, Loritsch, Berin C.<br/>\n&gt;&gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:berin.loritsch@...\">berin.loritsch@...</a>&gt; wrote:<br/>\n&gt;&gt;&gt; Thanks everyone for helping me work through the testing challenge I wanted to address.  I&#39;ve written a rudimentary ClassCollector that lets me specify a base package, what base classes I need, any annotations I need applied, etc.  I supplimented that with a BeanAttributes class that will collect all the attributes (setters/getters) on the class.  It&#39;s working very well.  Unfortunately, there are a few shortcomings with this approach:<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; 1. I cannot easily determine what the actual data point combination was that caused the failure.  I have to write those values out to System.out because the test failure does not do that for me.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; 2. It stops on the very first failure, hiding many more failures that may still be lurking beneath the service.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; 3. The theory is the only line shown in the test report, so there is no way to differentiate runs which would handle the above concerns.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; What I would really like to see is that a new test name for each combination of data points.  For example if you had a @Theory named &quot;checkAddWorks&quot; that took two parameters and the data points [1,2] then I&#39;d like to see a set of test names that look like this in the test report:<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; checkAddWorks(1,1)<br/>\n&gt;&gt;&gt; checkAddWorks(1,2)<br/>\n&gt;&gt;&gt; checkAddWorks(2,2)<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; That will address all of the shortcomings I identified.<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; My code looks like this:<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; @RunWith(Theories.class)<br/>\n&gt;&gt;&gt; class TestMyTrackableContract {<br/>\n&gt;&gt;&gt;    @DataPoints<br/>\n&gt;&gt;&gt;    BeanAttribute[] collectAllAttributesToTest() {<br/>\n&gt;&gt;&gt;        ClassCollector collector = new ClassCollector();<br/>\n&gt;&gt;&gt;        collector.within(&quot;com.mycompany.incident.model&quot;).assignableTo(Trackable.class);<br/>\n&gt;&gt;&gt;        Collection&lt;Class&lt;?&gt;&gt; matchedClasses = collector.recurse().collect();<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;        List&lt;BeanAttribute&gt; attributes = new ArrayList&lt;BeanAttribute&gt;();<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;        for (Class&lt;?&gt; trackable : matchedClasses) {<br/>\n&gt;&gt;&gt;            attributes.addAll(BeanAttribute.collectFrom(trackable));<br/>\n&gt;&gt;&gt;        }<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;        return attributes.toArray(new BeanAttribute[attributes.size()]);<br/>\n&gt;&gt;&gt;    }<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;    @Theory<br/>\n&gt;&gt;&gt;    public void checkSideEffectsOnAssign() throws Exception {<br/>\n&gt;&gt;&gt;        // This is designed to ensure that setters/getters work in concert<br/>\n&gt;&gt;&gt;        // and that setters set the appropriate message is sent<br/>\n&gt;&gt;&gt;        if ( ! beanAttribute.hasSetter() || ! beanAttribute.hasGetter() ) return;<br/>\n&gt;&gt;&gt;        beanAttribute.assertBalanced();<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;        Trackable entity = beanAttribute.getEntityAs(Trackable.class);<br/>\n&gt;&gt;&gt;        // Unfortunately needed to determine when things go bad<br/>\n&gt;&gt;&gt;        System.out.format(&quot;Testing %s&#92;n&quot;, beanAttribute);<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;        Object original = beanAttribute.getValue();<br/>\n&gt;&gt;&gt;        Object testValue = beanAttribute.generateTestValue(original);<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;        // Ensure the setter works as expected<br/>\n&gt;&gt;&gt;        beanAttribute.setValue(testValue);<br/>\n&gt;&gt;&gt;        assertEquals(testValue, beanAttribute.getValue());<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;        // Ensure properties are set and events were properly<br/>\n&gt;&gt;&gt;        Properties changes = entity.getChanges();<br/>\n&gt;&gt;&gt;        assertEquals( String.valueOf(testValue),<br/>\n&gt;&gt;&gt;            changes.getProperty(beanAttribute.getAttribute()));<br/>\n&gt;&gt;&gt;        assertEquals( String.valueOf(original),<br/>\n&gt;&gt;&gt;            changes.getProperty(beanAttribute.getAttribute() + &quot;.old&quot;));<br/>\n&gt;&gt;&gt;    }<br/>\n&gt;&gt;&gt; }<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; ------------------------------------<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt; Yahoo! Groups Links<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; ------------------------------------<br/>\n&gt;&gt;<br/>\n&gt;&gt; Yahoo! Groups Links<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 22381, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1265652071", 
    "canDelete": false, 
    "nextInTopic": 22383, 
    "prevInTopic": 22381, 
    "headers": {
        "inReplyToHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NzBAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MTAwMjA4MTAwMWgyMzgyZWJkZXU4YjcwZjI3NDEyM2M4YTVAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NkJAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPgkgPDRmN2RhNmI5MTAwMjA3MTg0OHIzNDU4ZjhjMm9iN2NkYTdjYWI2NTIzZWNjQG1haWwuZ21haWwuY29tPgkgPDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NkRAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPgkgPDRmN2RhNmI5MTAwMjA4MDgxM3YzZDk3Y2RjY3llMWY4ODc5ZTgwZGJjMzk2QG1haWwuZ21haWwuY29tPgkgPDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDM3OEM3NzBAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg=="
    }
}