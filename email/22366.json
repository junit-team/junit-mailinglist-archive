{
    "numMessagesInTopic": 7, 
    "nextInTime": 22367, 
    "senderId": "AsR2q-0wsAa6fYBMeP1tdqPc12isLHgOmGWcriw4fvZsSphxpJAQvLtDWTC1qFji7S_mQQurHo_R0KaLkktUtAB_251GYL5TdYae", 
    "systemMessage": true, 
    "subject": "Using JUnit 4 to drive a test DSL", 
    "from": "Edson Tirelli &lt;ed.tirelli@...&gt;", 
    "authorName": "Edson Tirelli", 
    "msgSnippet": "Hi all, Facing a problem a could not find an answer for yet. We use JUnit as the testing framework for Drools ( http://www.jboss.org/drools/). It happens,", 
    "msgId": 22366, 
    "profile": "edsontirelli", 
    "topicId": 22366, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 303667645, 
    "messageBody": "<div id=\"ygrps-yiv-723123128\">Hi all,<br/>\n<br/>\n  Facing a problem a could not find an answer for yet.<br/>\n<br/>\n  We use JUnit as the testing framework for Drools (<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.jboss.org/drools/)\">http://www.jboss.org/drools/)</a>. It happens, though, that some of the internal<br/>\nlow level stuff are really hard to test using pure java code, so, we created<br/>\na DSL to define some of our low level tests. Example here (but it does not<br/>\nreally matter for the problem at hand):<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/resources/org/drools/reteoo/test/AccumulateNodeAssertRetractTest.nodeTestCase\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/resources/org/drools/reteoo/test/AccumulateNodeAssertRetractTest.nodeTestCase</a><br/>\n<br/>\n   The DSL follows a simplified test structure, similar to previous JUnit<br/>\nversions, i.e., each file is a test case that might have a setup and<br/>\nteardown sections, plus a bunch of tests. Simple and works fine for us.<br/>\n<br/>\n   Now, since we use JUnit to drive all our tests, I would like to use junit<br/>\nto drive these DSL test cases as well during our build (maven), to keep all<br/>\nreports, etc integrated. So, I created a test runner class:<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/JUnitNodeTestRunner.java\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/JUnitNodeTestRunner.java</a><br/>\n<br/>\n   And then I created a bootstrap class (not sure if there is a way to avoid<br/>\nhaving the bootstrap class):<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/NodeTestsSuite.java\">http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/true_modify_20100104/drools-core/src/test/java/org/drools/reteoo/test/NodeTestsSuite.java</a><br/>\n<br/>\n   As you can see, the bootstrap class has the annotation:<br/>\n@RunWith(JUnitNodeTestRunner.class)<br/>\n<br/>\n   Now, when I right click that class and choose &quot;Run as... JUnit test case&quot;<br/>\nin eclipse, the class loads and executes all tests defined in our dsl test<br/>\nfiles without any problem. It shows all tests with success/error messages in<br/>\nthe eclipse junit view, etc. BUT, when I run the tests from our maven build,<br/>\nI get the following error:<br/>\n<br/>\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.005 sec<br/>\n&lt;&lt;&lt; FAILURE!<br/>\ninitializationError(org.drools.reteoo.test.dsl.NodeTest)  Time elapsed: 0<br/>\nsec  &lt;&lt;&lt; ERROR!<br/>\njava.lang.IllegalArgumentException: Test class can only have one constructor<br/>\n        at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:32)<br/>\n        at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:54)<br/>\n...<br/>\n<br/>\n   I am at a loss right now, so any insights on how to fix that (or even if<br/>\nwe are using the wrong approach here) are most appreciated.<br/>\n<br/>\n   Thanks,<br/>\n      Edson<br/>\n<br/>\n<br/>\n-- <br/>\n Edson Tirelli<br/>\n JBoss Drools Core Development<br/>\n JBoss by Red Hat @ www.jboss.com<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 22365, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1265404089", 
    "canDelete": false, 
    "nextInTopic": 22367, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGU2ZGQ1YmEzMTAwMjA1MTMwOHkxYThlY2MyZmw2MGUzZTViMDQxOTZmNWMxQG1haWwuZ21haWwuY29tPg=="
    }
}