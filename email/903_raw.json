{
    "topicId": 870, 
    "postDate": "986430976", 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "from": "Robert Watkins &lt;robertw@...&gt;", 
    "canDelete": false, 
    "replyTo": "LIST", 
    "senderId": "fMQ4a_vkqJfYY5n-2O7JxspeGFdG5WXT6YaZpyZwT7KXGwjR1gfebCzLuPHUW0yY40ECrhF4mOIV9rj7yVgAUrtHrdUN-BvFD2gPuEiSAw", 
    "nextInTime": 904, 
    "userId": 0, 
    "prevInTime": 902, 
    "prevInTopic": 881, 
    "headers": {
        "messageIdInHeader": "PDMzQTVFNjk5REFDNEQ0MTE5N0MyMDA1MDhCQUY1MjE3MkE1N0NEQGF1Ym5tc3gwMS5xc2kuY29tLmF1Pg=="
    }, 
    "authorName": "Robert Watkins", 
    "numMessagesInTopic": 11, 
    "msgSnippet": "... You can poke me every so often so I don t procrastinate. :) Actually, I ve collected a lot of material in the last few weeks, and I just need to polish it", 
    "contentTrasformed": false, 
    "msgId": 903, 
    "nextInTopic": 907, 
    "systemMessage": false, 
    "rawEmail": "Return-Path: &lt;robert.watkins@...&gt;\r\nX-Sender: robert.watkins@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-7_1_1); 5 Apr 2001 00:33:27 -0000\r\nReceived: (qmail 5999 invoked from network); 5 Apr 2001 00:33:27 -0000\r\nReceived: from unknown (10.1.10.27) by l7.egroups.com with QMQP; 5 Apr 2001 00:33:27 -0000\r\nReceived: from unknown (HELO qsi.com.au) (203.202.39.12) by mta2 with SMTP; 5 Apr 2001 00:33:26 -0000\r\nReceived: from aubnmsx01.qsi.com.au (aubnmsx01.qsi.com.au [192.168.21.22]) by qsi.com.au (8.9.3/8.9.3) with ESMTP id KAA25962 for &lt;junit@yahoogroups.com&gt;; Thu, 5 Apr 2001 10:24:36 +1000\r\nReceived: by aubnmsx01.qsi.com.au with Internet Mail Service (5.5.2653.19) id &lt;H9B2BDFG&gt;; Thu, 5 Apr 2001 10:36:16 +1000\r\nMessage-ID: &lt;33A5E699DAC4D41197C200508BAF52172A57CD@...&gt;\r\nTo: &quot;&#39;junit@yahoogroups.com&#39;&quot; &lt;junit@yahoogroups.com&gt;\r\nSubject: RE: [junit] Best practice with EJB\r\nDate: Thu, 5 Apr 2001 10:36:16 +1000 \r\nMIME-Version: 1.0\r\nX-Mailer: Internet Mail Service (5.5.2653.19)\r\nContent-Type: multipart/alternative; boundary=&quot;----_=_NextPart_001_01C0BD68.6C99EF90&quot;\r\nX-eGroups-From: Robert Watkins &lt;robert.watkins@...&gt;\r\nFrom: Robert Watkins &lt;robertw@...&gt;\r\n\r\n\r\n------_=_NextPart_001_01C0BD68.6C99EF90\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\n\r\nRalf Krakowski writes:\n&gt; Thanks a lot for your response. \n&gt; Any write up of such a paper would be great since I am new to both\n&gt; JUnit and EJB. Could I help you in any way?\n\nYou can poke me every so often so I don&#39;t procrastinate. :) Actually, I&#39;ve\ncollected a lot of material in the last few weeks, and I just need to polish\nit up a bit. I&#39;m not aiming at formal publication or anything... just an\narticle on junit.org would be the limits of my humble ambition.\n\n&gt; Could you please submit a simple example of a the &quot;smart&quot; function\n&gt; (method :-) you talked about.\n\nUm. Okay.\n\nHere&#39;s a sample test method:\n    public void testGetMerchantId() throws java.rmi.RemoteException {\n        obtainMerchant(&quot;Merchant1&quot;);\n        assertEquals(&quot;Merchant1&quot;, getSample().getMerchantId());\n    }\n\nHere&#39;s a smart implementation of obtainMerchant:\n    protected void obtainMerchant(String merchantId) {\n      if (EjbHelper.isLive()) {\n          try {\n              javax.ejb.EJBHome ejbHome =\nEjbHelper.lookupHome(MERCHANT_HOME, MerchantHome.class);\n              MerchantHome home = (MerchantHome)ejbHome;\n              \n              setSample(home.create(merchantId));\n          }\n          catch (javax.ejb.CreateException e) {\n              throw new RuntimeException(&quot;CreateException: &quot; +\ne.getMessage());\n          }\n          catch (javax.naming.NamingException e) {\n              throw new RuntimeException(&quot;NamingException: &quot; +\ne.getMessage());\n          }\n          catch (java.rmi.RemoteException e) {\n              throw new RuntimeException(&quot;RemoteException: &quot; +\ne.getMessage());\n          }\n      }\n      else {\n        return new MerchantImpl(merchantId);\n      }\n    }\n\n(EjbHelper is a utility class, but it should be fairly obvious what it does,\nfrom context). About the only thing that&#39;s not clear is that\nEjbHelper.isLive() returns Boolean.getBoolean(&quot;EJB_LIVE_MODE&quot;), allowing EJB\ntesting to be turned on or off by supplying a system property.\n\n&gt; Any other tips and practical issues regarding testing and EJB would\n&gt; be great.\n\nI&#39;ll see what I can come up with.\n\n&gt; I have heard that this (testing locally and then live) is not\n&gt; nessesary with Visual Age since you can run your appserver within\n&gt; Visual Age...? Is this true?\n\nTechnically, this is true, or so I&#39;m told. When I was playing with EJB 1.0,\nI didn&#39;t have Visual Age. When I had Visual Age, I&#39;d moved on to EJB 1.1,\nwhich VAJ doesn&#39;t support. However, I&#39;ve got a goal of being able to run my\nunit tests from the command line, via Ant, so I wouldn&#39;t want to rely on\nsuch support, anyway (though it would be handy for the odd debugging\nsession).\n\nHowever, VAJ doesn&#39;t like more than one person working on an EJB group (a\ncollection of related EJBs) at a time (it will actually end up corrupting\nthe repository, given enough time, and will produce all sorts of weird side\neffects in the interim). If you&#39;re working by yourself, that&#39;s not a\nproblem. If you&#39;re working with others, it&#39;s nasty. There&#39;s a review on\ntheserverside.com, by Bartek Kiepuszewski (a former co-worker of mine),\nwhich details all the hassles we had doing EJB development in VAJ and\nWebSphere. (http://theserverside.com/reviews/thread.jsp?thread_id=2974)\n\nRobert.\n\n-- \n     &quot;Duct tape is like the Force: it has a light side, a dark side,\n                   and it holds the universe together&quot;\n  Robert Watkins     robertdw@...     robertw@...\n\r\n------_=_NextPart_001_01C0BD68.6C99EF90\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2//EN&quot;&gt;\n&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;META HTTP-=\r\nEQUIV=3D&quot;Content-Type&quot; CONTENT=3D&quot;text/html; charset=3Diso-8859-1&quot;&gt;\n&lt;META N=\r\nAME=3D&quot;Generator&quot; CONTENT=3D&quot;MS Exchange Server version 5.5.2653.12&quot;&gt;\n&lt;TITL=\r\nE&gt;RE: [junit] Best practice with EJB&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&lt;BODY&gt;\n\n&lt;P&gt;&lt;FONT SIZE=\r\n=3D2&gt;Ralf Krakowski writes:&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&gt; Thanks a lot for=\r\n your response. &lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&gt; Any write up of such a pape=\r\nr would be great since I am new to both&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&gt; JUni=\r\nt and EJB. Could I help you in any way?&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;You =\r\ncan poke me every so often so I don&#39;t procrastinate. :) Actually, I&#39;ve coll=\r\nected a lot of material in the last few weeks, and I just need to polish it=\r\n up a bit. I&#39;m not aiming at formal publication or anything... just an arti=\r\ncle on junit.org would be the limits of my humble ambition.&lt;/FONT&gt;&lt;/P&gt;\n\n&lt;P&gt;=\r\n&lt;FONT SIZE=3D2&gt;&gt; Could you please submit a simple example of a the &quot=\r\n;smart&quot; function&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&gt; (method :-) you talked=\r\n about.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;Um. Okay.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=\r\n=3D2&gt;Here&#39;s a sample test method:&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nb=\r\nsp; public void testGetMerchantId() throws java.rmi.RemoteException {&lt;/FONT=\r\n&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; obtainMerch=\r\nant(&quot;Merchant1&quot;);&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp; assertEquals(&quot;Merchant1&quot;, getSample().getMe=\r\nrchantId());&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P=\r\n&gt;&lt;FONT SIZE=3D2&gt;Here&#39;s a smart implementation of obtainMerchant:&lt;/FONT&gt;\n&lt;BR=\r\n&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp; protected void obtainMerchant(String mer=\r\nchantId) {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (Ejb=\r\nHelper.isLive()) {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=\r\n&nbsp;&nbsp;&nbsp;&nbsp; try {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;=\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; javax.ejb.EJBH=\r\nome ejbHome =3D EjbHelper.lookupHome(MERCHANT_HOME, MerchantHome.class);&lt;/F=\r\nONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp; MerchantHome home =3D (MerchantHome)ejbHome;&lt;/F=\r\nONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setSample(home.c=\r\nreate(merchantId));&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (javax.ejb.CreateException e) {&lt;/FO=\r\nNT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp; throw new RuntimeException(&quot;CreateException=\r\n: &quot; + e.getMessage());&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (javax.naming.NamingExcepti=\r\non e) {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new RuntimeException(&quot;Nami=\r\nngException: &quot; + e.getMessage());&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (java.rmi.Remote=\r\nException e) {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new RuntimeException(&qu=\r\not;RemoteException: &quot; + e.getMessage());&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=\r\n=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp; else {&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp; return new MerchantImpl(merchantId);&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT =\r\nSIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&=\r\nnbsp;&nbsp; }&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;(EjbHelper is a utility class,=\r\n but it should be fairly obvious what it does, from context). About the onl=\r\ny thing that&#39;s not clear is that EjbHelper.isLive() returns Boolean.getBool=\r\nean(&quot;EJB_LIVE_MODE&quot;), allowing EJB testing to be turned on or off=\r\n by supplying a system property.&lt;/FONT&gt;&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;&gt; Any oth=\r\ner tips and practical issues regarding testing and EJB would&lt;/FONT&gt;\n&lt;BR&gt;&lt;FO=\r\nNT SIZE=3D2&gt;&gt; be great.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;I&#39;ll see what I c=\r\nan come up with.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;&gt; I have heard that this=\r\n (testing locally and then live) is not&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&gt; ness=\r\nesary with Visual Age since you can run your appserver within&lt;/FONT&gt;\n&lt;BR&gt;&lt;F=\r\nONT SIZE=3D2&gt;&gt; Visual Age...? Is this true?&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=\r\n=3D2&gt;Technically, this is true, or so I&#39;m told. When I was playing with EJB=\r\n 1.0, I didn&#39;t have Visual Age. When I had Visual Age, I&#39;d moved on to EJB =\r\n1.1, which VAJ doesn&#39;t support. However, I&#39;ve got a goal of being able to r=\r\nun my unit tests from the command line, via Ant, so I wouldn&#39;t want to rely=\r\n on such support, anyway (though it would be handy for the odd debugging se=\r\nssion).&lt;/FONT&gt;&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;However, VAJ doesn&#39;t like more than o=\r\nne person working on an EJB group (a collection of related EJBs) at a time =\r\n(it will actually end up corrupting the repository, given enough time, and =\r\nwill produce all sorts of weird side effects in the interim). If you&#39;re wor=\r\nking by yourself, that&#39;s not a problem. If you&#39;re working with others, it&#39;s=\r\n nasty. There&#39;s a review on theserverside.com, by Bartek Kiepuszewski (a fo=\r\nrmer co-worker of mine), which details all the hassles we had doing EJB dev=\r\nelopment in VAJ and WebSphere. (&lt;A HREF=3D&quot;http://theserverside.com/reviews=\r\n/thread.jsp?thread_id=3D2974&quot; TARGET=3D&quot;_blank&quot;&gt;http://theserverside.com/re=\r\nviews/thread.jsp?thread_id=3D2974&lt;/A&gt;)&lt;/FONT&gt;&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;Robert=\r\n.&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;P&gt;&lt;FONT SIZE=3D2&gt;-- &lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;=\r\n&nbsp;&nbsp; &quot;Duct tape is like the Force: it has a light side, a dark=\r\n side,&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and it h=\r\nolds the universe together&quot;&lt;/FONT&gt;\n&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; Robert Wa=\r\ntkins&nbsp;&nbsp;&nbsp;&nbsp; robertdw@...&nbsp;&nbsp;&nbsp;&nbs=\r\np; robertw@...&lt;/FONT&gt;\n&lt;/P&gt;\n\n&lt;/BODY&gt;\n&lt;/HTML&gt;\r\n------_=_NextPart_001_01C0BD68.6C99EF90--\r\n\n", 
    "subject": "RE: [junit] Best practice with EJB"
}