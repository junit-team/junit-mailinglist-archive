{
    "numMessagesInTopic": 40, 
    "nextInTime": 9527, 
    "senderId": "XVW7y_yTQ3lVwVj2eo8a1nKHwoAT90wbjORlxndNgmzGc6E0zjo8Ag53Hxpe78O4UZtpqcuVuCVRJuD18DRef5gWvXkJzt6F7Te1", 
    "systemMessage": false, 
    "subject": "Re: Recursive TestRunner -- one implementation", 
    "from": "&quot;Jeff Grigg&quot; &lt;jeffgrigg@...&gt;", 
    "authorName": "Jeff Grigg", 
    "msgSnippet": "... Funny; it just happens that I m doing recursive testing: I m using jAdvise/javassist to instrument classes at run time, a kind of Aspect-Oriented", 
    "msgId": 9526, 
    "rawEmail": "Return-Path: &lt;jeffgrigg@...&gt;\r\nReceived: (qmail 34689 invoked by uid 7800); 28 Sep 2003 04:14:47 -0000\r\nX-Sender: jeffgrigg@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 26884 invoked from network); 28 Sep 2003 01:11:17 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m15.grp.scd.yahoo.com with QMQP; 28 Sep 2003 01:11:17 -0000\r\nReceived: from unknown (HELO n2.grp.scd.yahoo.com) (66.218.66.75)\n  by mta5.grp.scd.yahoo.com with SMTP; 28 Sep 2003 01:11:17 -0000\r\nReceived: from [66.218.66.114] by n2.grp.scd.yahoo.com with NNFMP; 28 Sep 2003 01:11:16 -0000\r\nDate: Sun, 28 Sep 2003 01:11:16 -0000\r\nTo: junit@yahoogroups.com\r\nSubject: Re: Recursive TestRunner -- one implementation\r\nMessage-ID: &lt;bl5cfk+pc9c@...&gt;\r\nIn-Reply-To: &lt;20030927195425.E97299-100000@localhost&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 4116\r\nX-Mailer: Yahoo Groups Message Poster\r\nFrom: &quot;Jeff Grigg&quot; &lt;jeffgrigg@...&gt;\r\nX-Yahoo-Group-Post: member; u=139880894\r\nX-Yahoo-Profile: jeffgrigg63132\r\nX-eGroups-Approved-By: vbossica &lt;vladimir@...&gt; via email; 28 Sep 2003 04:14:47 -0000\r\n\r\n&gt; On Sat, 27 Sep 2003, Rakesh wrote:\n&gt;&gt; I have designed a set of test cases which I have added\n&gt;&gt; to a TestSuite. Now I want to run this TestSuite\n&gt;&gt; recursively.  [...]\n\n--- Jim Dixon &lt;jdd@d...&gt; wrote:\n&gt; Just to get things clear, please confirm that you mean\n&gt; something like this:\n&gt; public TestX extends TestCase {  [...]\n&gt;    public void testRecursively () { ...\n&gt;         testRecursively();\n&gt;    } }\n\nFunny; it just happens that I&#39;m doing &quot;recursive&quot; testing:\n\nI&#39;m using jAdvise/javassist to instrument classes at run time, a \nkind of Aspect-Oriented Programming (AOP).  I do this to implement \nMock Objects for classes in an uncooperative third party library -- \nmade by people who seem to believe that unsubclassable concrete \nclasses are a good idea, and that interfaces are an unnecessary \ncomplexity.  Using AOP I can change some aspects of the \nimplementation of the 3rd party library while running in the test \nenvironment.\n\n*BUT* for any of this to work, the classes under test must be loaded \nwith a custom class loader.  This is the rub:  Standard JUnit test \nrunners load the TestCase classes using the standard Java class \nloader.  So when I load the application classes using the \njAdvise/javassist class loader, the tests can only communicate with \nthe application objects using Reflection, because classes and \ninterfaces are incompatible when loaded with different class \nloaders.  Writing all test logic using Reflection would be really \nunpleasant.  So I need to load the TestCase classes with the \njAdvise/javassist class loader.\n\nHmmm...\n\nHere&#39;s what I do:\nEach test method that needs to run under jAdvise/javassist checks to \nsee if it was loaded by a JUnit runner or jAdvise.  If it was loaded \nby a JUnit runner, it calls a common method that fires up jAdvise, \nloads the class with the custom class loader, and then calls the \nsame method in the loaded class.  (It also calls setUp & tearDown in \nthe other class.)\n\nHere&#39;s what it looks like:\n| public class MyTestCase extends TestCase {\n|    final boolean runningInCustomClassLoader;\n|    public MyTestCase() { super(&quot;MyTestCase&quot;);\n|       this.runningInCustomClassLoader = true; }\n|    public MyTestCase(String name) { super(name);\n|       this.runningInCustomClassLoader = false; }\n|\n|    public void testMethod() {\n|       if (this.runningInCustomClassLoader) {\n|          // Do application testing here.\n|       } else { // called by JUnit\n|          callSelfInCustomClassLoader();\n| } } }\n\nCrazy, eh?  ;-&gt;\n\n(In Java 1.4 there&#39;s an easy way to get a useful stack trace -- \nso &#39;callSelfInCustomClassLoader&#39; can determine the caller&#39;s class \nand method name.)\n\n_ _ _\n\n\nFurther  (or worse, if you wish  ;-) ...\n\nI often find myself in a related &quot;recursive testing&quot; situation much \nlike this:\n\nI&#39;ve written a bunch of really nice test methods in a TestCase.  \nThey work great.  Now I want to run all these tests with a slightly \ndifferent configuration of the system -- in addition to the existing \nconfiguration that they test, not instead of it.  Like, here are a \nbunch of tests that check sending integers and strings through \na &quot;pipe&quot; from client to server.  Now I&#39;d like to run the whole thing \nagain, going from server to client.  (The protocol is asymmetrical.  \nDon&#39;t blame me; I inherited it!  ;-)  OK, that was great for XML \nformatted messages, but I&#39;d like to try both directions again with \nbinary formatted messages.  Oh, and one more time, both ways, using \nMicrosoft&#39;s DCOM object serialization.\n\nThus far I&#39;ve been accomplishing these tricks by having each test \nmethod call subroutines that try each of the desired permutations.  \nSo I&#39;ll have the &#39;testSendBooleanTrue&#39; method call XML, binary and \nDCOM methods.  Each of those calls clientToServer and serverToClient \nmethods.  And then, after all that configuration goes on, down at \nthe deepest levels, the test takes place -- often by calling back to \nanonymous inner classes passed in from the higher levels.\n\nIt&#39;s icky, but it works.\n\nAt least I&#39;ve yet to resort to Reflection or rewriting JUnit to \naccomplish what I need.  ;-&gt;     ...at least /not yet./   ;-&gt;\n\n\n", 
    "profile": "jeffgrigg63132", 
    "topicId": 9399, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139880894, 
    "prevInTime": 9525, 
    "contentTrasformed": false, 
    "postDate": "1064711476", 
    "canDelete": false, 
    "nextInTopic": 9527, 
    "prevInTopic": 9525, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwOTI3MTk1NDI1LkU5NzI5OS0xMDAwMDBAbG9jYWxob3N0Pg==", 
        "messageIdInHeader": "PGJsNWNmaytwYzljQGVHcm91cHMuY29tPg=="
    }
}