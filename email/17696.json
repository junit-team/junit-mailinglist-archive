{
    "numMessagesInTopic": 21, 
    "nextInTime": 17697, 
    "senderId": "9zAENh6JWQoJqjQN_j01JO7m9G4UIxY4gyEbJXI-QOmX2XHC3PglQ-7E664HnG4uq7SCH_gXTLHi8iSa6wWb-NnEqbdlSOicarPg7PTlLsPUp46uDFatHY1EBQ", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing a void method....", 
    "from": "Andrew McDonagh &lt;yahoogroups@...&gt;", 
    "authorName": "Andrew McDonagh", 
    "msgSnippet": "My team have just created two daemon applications within 6 weeks. Both do similar things, poll for data in a db interface view, transform it in some way and", 
    "msgId": 17696, 
    "profile": "andy_ipaccess", 
    "topicId": 17653, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 234174584, 
    "messageBody": "<div id=\"ygrps-yiv-1727513560\">My team have just created two daemon applications within 6 weeks. Both <br/>\ndo similar things, poll for data in a db &#39;interface&#39; view, transform it <br/>\nin some way and write the results out to another systems db. With a <br/>\ntotal of around 250 unit tests, not one of those tests use a real JDBC <br/>\nobject or connection. We created our own mocks for Connection, <br/>\nResultSet, PreparedStatement and Statement. Those tests take 3.9 seconds <br/>\nto run.<br/>\n<br/>\nOur Acceptance Tests run against a real Oracle DB and so real versions <br/>\nof those mocked classes are used. The 60 or so AT we have, take around <br/>\n12 minutes to run.<br/>\n<br/>\nThe speed increase of the unitests running with mocks, soon pays for the <br/>\ncost of creating them. We run all unit tests all the time - we might as <br/>\nwell, they go so fast<br/>\n<br/>\nThe mocks also allow us to very simply test all exception handling. We <br/>\nhave Exception raising Mocks for each of the JDBC classes.<br/>\n<br/>\ne.g.(off top of head)<br/>\n<br/>\nvoid testConnectionIsClosedEvenWhenCreatingStatementFails() {<br/>\nExceptionRaisingStatement statement = new ExceptionRaisingStatement();<br/>\nconnection.setStatementToUse(statement);<br/>\n<br/>\ntry {<br/>\nclassUnderTest.doSomethingThatWouldCreateStatement(connection);<br/>\nfail(&quot;Exception Not thrown!&quot;);<br/>\ncatch (SQLException e) {<br/>\nassertTrue(connection.isClosed() );<br/>\n}<br/>\n<br/>\n}<br/>\n<br/>\nCédric Beust ♔ wrote:<br/>\n<blockquote><span title=\"qreply\"> &gt;<br/>\n&gt; On 8/29/06, Michael Feathers &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:mfeathers@...\">mfeathers@...</a> <br/>\n&gt; &lt;mailto:mfeathers%40mindspring.com&gt;&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt;It will probably make your unit tests smaller, but when the bug <br/>\n&gt; happens,<br/>\n&gt; &gt; it<br/>\n&gt; &gt; &gt;will take you longer to isolate it because only your acceptance tests<br/>\n&gt; &gt; will<br/>\n&gt; &gt; &gt;fail, and probably in mysterious ways (such as leaking connections).<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;I prefer for my tests to catch bugs as soon as possible (especially in<br/>\n&gt; &gt; this<br/>\n&gt; &gt; &gt;case, where invoking close() will not make them that much slower).<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; It&#39;s not like that, though. Really, if you make your UTs look like ATs,<br/>\n&gt; &gt; i.e., they run all of these external subsystems, you&#39;ve just pushed the<br/>\n&gt; &gt; issue of isolating the problem into the UTs. If you write your UTs<br/>\n&gt; &gt; isolated, you have a binary chop. When your UTs pass and your ATs fail,<br/>\n&gt; &gt; it helps you figure out where to look.<br/>\n&gt;<br/>\n&gt; We&#39;re talking about a JDBC connection here, though. Are you saying you<br/>\n&gt; would write a battery of unit tests that all work on a fake JDBC<br/>\n&gt; connection? This seems like an abuse of mock objects for two reasons:<br/>\n&gt;<br/>\n&gt; - JDBC queries can be very fast.<br/>\n&gt; - It&#39;s not very hard nor costly to instantiate a JDBC connection, so<br/>\n&gt; the use of mocks is ovekill, IMO.<br/>\n&gt;<br/>\n&gt; If you have a class that does nothing but issues SQL queries, unit testing<br/>\n&gt; it means making sure these queries work...<br/>\n&gt;<br/>\n&gt; -- <br/>\n&gt; Cédric<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://testng.org\">http://testng.org</a> &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"http://testng.org\">http://testng.org</a>&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt; <br/>\n&gt; ------------------------------------------------------------------------<br/>\n&gt;<br/>\n&gt; No virus found in this incoming message.<br/>\n&gt; Checked by AVG Free Edition.<br/>\n&gt; Version: 7.1.405 / Virus Database: 268.11.6/430 - Release Date: 28/08/2006<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 17695, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1156872092", 
    "canDelete": false, 
    "nextInTopic": 17719, 
    "prevInTopic": 17689, 
    "headers": {
        "inReplyToHeader": "PGI4NmI2YTljMDYwODI5MDcxMW0zZTA1M2Q0M3MxMjBlMDMxODM3NThhNTE2QG1haWwuZ29vZ2xlLmNvbT4=", 
        "messageIdInHeader": "PDQ0RjQ3NzlDLjgwMzAzMDNAYW5kcmV3bWNkb25hZ2guZjJzLmNvbT4=", 
        "referencesHeader": "PEU5REU3OTYzRTVFQTY1NDZCNDJBOTc5RUMyOEI0RDAxMjkwREE4RjJAaG91LWV4LTAyLmFkcHJvZC5ibWMuY29tPgkgPDM3NWU4ZDg4MDYwODI3MDI0MGkzMDdiODNiZnM3NDI2MWI0Mjk0NzlhOWMwQG1haWwuZ21haWwuY29tPgkgPGI4NmI2YTljMDYwODI4MDcxN28yMjFjNDg2aTc2MDUzMjBkMGU3ODgyMjlAbWFpbC5nb29nbGUuY29tPgkgPDQ0RjM2NDM0LjQwNDAxMDRAYW5kcmV3bWNkb25hZ2guZjJzLmNvbT4JIDxiODZiNmE5YzA2MDgyODE0NTRuNmRkMWUxYjZxY2ZmM2RmMjEwM2ExYjEyMUBtYWlsLmdvb2dsZS5jb20+CSA8NDRGNDQ0QjAuNjA3MDAwNEBtaW5kc3ByaW5nLmNvbT4gPGI4NmI2YTljMDYwODI5MDcxMW0zZTA1M2Q0M3MxMjBlMDMxODM3NThhNTE2QG1haWwuZ29vZ2xlLmNvbT4="
    }
}