{
    "numMessagesInTopic": 2, 
    "nextInTime": 3464, 
    "senderId": "GIjfTi33ZSKrUnTzfdd2f2R4PtctFg-74iCDkSLsnztRt5xSw_tL7xVsodK5vsy09kvuHPGfwWEaXj0_VuiCRQmnuGG7g40jmRF9d6ZTtpQ", 
    "systemMessage": false, 
    "subject": "ANN: Ant task, JUnit and trace filtering", 
    "from": "Scott Stirling &lt;sstirling@...&gt;", 
    "authorName": "Scott Stirling", 
    "msgSnippet": "I modified the Apache Jakarta Ant JUnit task to support the JUnit feature that filters stack frames in exception and error messages so that junit framework", 
    "msgId": 3463, 
    "profile": "jrun5", 
    "topicId": 3463, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65616759, 
    "messageBody": "<div id=\"ygrps-yiv-247070453\">I modified the Apache Jakarta Ant JUnit task to support the JUnit feature<br/>\nthat filters stack frames in exception and error messages so that junit<br/>\nframework method frames don&#39;t clutter your exception traces.  Unless you are<br/>\ntesting JUnit itself, you really don&#39;t need to see any of those<br/>\njunit.framework.* stack frames in an exception trace.  The zip file<br/>\ncontaining this README, the source code, and a compiled version with the<br/>\nwhole Ant optional.jar is in ant15-junitTask-stackFilter.zip at<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://groups.yahoo.com/group/junit/files/\">http://groups.yahoo.com/group/junit/files/</a><br/>\n<br/>\nIt works with the PlainResultsFormatter and XMLResultsFormatter.  It works<br/>\nwith the JUnit task, whether you fork the JVM or not, and it also works with<br/>\nthe batchtest JUnit task, again, whether you fork or not.  Now we have nice,<br/>\nshort exception traces in our nice HTML reports produced with the Ant JUnit<br/>\nand JUnitReport tasks.<br/>\n<br/>\nThe built-in filter applies to the following call patterns:<br/>\n  &quot;junit.framework.TestCase&quot;,<br/>\n  &quot;junit.framework.TestResult&quot;,<br/>\n  &quot;junit.framework.TestSuite&quot;,<br/>\n  &quot;junit.framework.Assert.&quot;,<br/>\n  &quot;junit.swingui.TestRunner&quot;,<br/>\n  &quot;junit.awtui.TestRunner&quot;,<br/>\n  &quot;junit.textui.TestRunner&quot;,<br/>\n  &quot;java.lang.reflect.Method.invoke(&quot;,<br/>\n  &quot;org.apache.tools.ant.&quot;<br/>\n<br/>\nLike the filter in JUnit, it is not configurable, other than to turn it<br/>\noff/on.  It could be, but I think the intended purpose is pretty well<br/>\nachieved with that default set of patterns.<br/>\n<br/>\nTo use it in a build.xml, do nothing; the filtering is enabled by default.<br/>\nTo disable it, just add the attribute filtertrace=&quot;false&quot; to your junit task<br/>\nelement, e.g.:<br/>\n<br/>\n&lt;junit printsummary=&quot;yes&quot; filtertrace=&quot;true&quot; dir=&quot;${basedir}/lib&quot;<br/>\nhaltonerror=&quot;${qa.junit.haltonerror}&quot;<br/>\nhaltonfailure=&quot;${qa.junit.haltonfailure}&quot; fork=&quot;yes&quot;&gt;<br/>\n<br/>\nHere is an example of the before and after versions of a filtered<br/>\nAssertionFailedError run in Ant:<br/>\n<br/>\nOriginal, unfiltered output you get with Ant:<br/>\n<br/>\njunit.framework.AssertionFailedError<br/>\nat junit.framework.Assert.fail(Assert.java:51)<br/>\nat junit.framework.Assert.assertTrue(Assert.java:38)<br/>\nat junit.framework.Assert.assertNotNull(Assert.java:199)<br/>\nat junit.framework.Assert.assertNotNull(Assert.java:193)<br/>\nat test.jrunx.persistence.DatabaseTest.setUp(DatabaseTest.java:61)<br/>\nat junit.framework.TestCase.runBare(TestCase.java:138)<br/>\nat junit.framework.TestResult$1.protect(TestResult.java:106)<br/>\nat junit.framework.TestResult.runProtected(TestResult.java:124)<br/>\nat junit.framework.TestResult.run(TestResult.java:109)<br/>\nat junit.framework.TestCase.run(TestCase.java:131)<br/>\nat junit.framework.TestSuite.runTest(TestSuite.java:173)<br/>\nat junit.framework.TestSuite.run(TestSuite.java:168)<br/>\nat<br/>\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRu<br/>\nnner.java:252)<br/>\nat<br/>\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestR<br/>\nunner.java:433)<br/>\n<br/>\n<br/>\nWith filtertrace enabled:<br/>\n<br/>\njunit.framework.AssertionFailedError<br/>\nat test.jrunx.persistence.DatabaseTest.setUp(DatabaseTest.java:61)<br/>\n<br/>\n<br/>\nThe source code is modified from Ant 1.5 source from about two weeks ago, so<br/>\nit will probably only work with Ant 1.5, but I haven&#39;t even tried it with<br/>\n1.4.  You should be able to drop the optional.jar in the zip file into your<br/>\n$ANT_HOME/lib to try it out.  This optional.jar has &quot;the works&quot; -- pretty<br/>\nmuch all the optional tasks.<br/>\n<br/>\nThe other option is to compile the source files and then &quot;jar uvf<br/>\n$ANT_HOME/lib/optional.jar org/apache/tools/ant/taskdefs/optional/junit&quot; the<br/>\nclasses into your Ant optional.jar.<br/>\n<br/>\nScott Stirling<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:sstirling@...\">sstirling@...</a><br/>\nJRun QA<br/>\nMacromedia</div>", 
    "prevInTime": 3462, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1007620216", 
    "canDelete": false, 
    "nextInTopic": 3464, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDRGNDdEQ0ZBREM4REQ1MTE4RDJCMDA1MDhCOTUyRDk2MEMzQkYyQHNhbHNhLmFsbGFpcmUuY29tPg=="
    }
}