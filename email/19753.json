{
    "numMessagesInTopic": 5, 
    "nextInTime": 19754, 
    "senderId": "1vMZz7KH8KoCXDhL7Y8SzSpwfCbBMRUANeoIf5aSMqm07aAJwpnzIyR71Ih1pmNUcuXcGO3n_I_IxLM46uYkPhLiv-3KfKWzfi49r5FdjLBvDDo2EPU", 
    "systemMessage": true, 
    "subject": "Re: Junit4 new features ?", 
    "from": "&quot;Roger Chen @ RevZoom&quot; &lt;coderobochen@...&gt;", 
    "authorName": "Roger Chen @ RevZoom", 
    "msgSnippet": "... Me and another colleague at work looked at the Junit sources and felt we should do the failure recording in ", 
    "msgId": 19753, 
    "profile": "coderobochen", 
    "topicId": 19748, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 320628451, 
    "messageBody": "<div id=\"ygrps-yiv-894375104\">--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;David Saff&quot; &lt;saff@...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; Roger,<br/>\n&gt; <br/>\n&gt; Good questions.<br/>\n&gt; <br/>\n&gt; 1) I would be interested in seeing the patch.  It strikes me as<br/>\n&gt; something that could be done with a custom runner, without patching<br/>\n&gt; JUnit: have you found that to be true?<br/>\n<br/>\n </span></blockquote>Me and another colleague at work looked at the Junit sources and felt<br/>\nwe should do the failure recording in<br/>\norg.junit.runner.notification.RunNotifier#fireTestFailure() method.<br/>\nThat would allow any runner to be able to get a list of failed<br/>\ntestcases in an XML or a plain text file.<br/>\n<br/>\nTo re-run the failed tests, we were envisioning a custom test runner<br/>\nand/or modification to the Ant Junit task (since we use Ant heavily)<br/>\nthat would take a flag to pick up the failed test XML/text file from <br/>\na known location ($HOME/.junit/failed-tests.xml for e.g.) and re-run them.<br/>\n<br/>\n <br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; 2) I&#39;ve heard of wanting to only instantiate a test class once (you<br/>\n&gt; can do that in JUnit, see<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://tech.groups.yahoo.com/group/junit/message/19159)\">http://tech.groups.yahoo.com/group/junit/message/19159)</a>.  Is that what<br/>\n&gt; you&#39;re looking for, or is there another advantage in having non-static<br/>\n&gt; @BeforeClass, etc?<br/>\n&gt; <br/>\n<br/>\n </span></blockquote>Yes, consider the following usage pattern we see in our testing:<br/>\n<br/>\n  @BeforeClass(<br/>\n  public void setup() throws IOException {<br/>\n<br/>\n    String cname = getClass().getPackage().getName();<br/>\n    String rd = cname.replace(&#39;.&#39;, &#39;/&#39;);<br/>\n    File f = MyEnv.getRootDir();<br/>\n<br/>\n    <br/>\n    File newRd = new File(f, &quot;/tests/unit/src/java/&quot;+rd);<br/>\n    MyEnv.setRootDir(newRd.getCanonicalPath());<br/>\n    MyEnv.setLogPropsFile(newRd.getCanonicalPath()+&quot;/log.properties&quot;);<br/>\n    setupModules();<br/>\n  }<br/>\n<br/>\nThis works nicely with TestNG as the beforeClass non-static method can<br/>\nbe used to determine the current testclass name. In the above snippet<br/>\nthe class name is use to construct the path to the log.properties<br/>\n(every test class has its own properties file)<br/>\n<br/>\nWith Juni4 we are forced to use @Before to get the non-static behavior.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; 3) As I understand it, dependsOnMethods allows one test method to be<br/>\n&gt; skipped if another one fails.  I had a version of this in my own JUnit<br/>\n&gt; sandbox for a while, and found it not as useful as I&#39;d liked.  If used<br/>\n&gt; to truly say &quot;this test, valid on its own, will fail if this other<br/>\n&gt; test, valid on its own, fails&quot;, I found that the dependencies became<br/>\n&gt; stale, and tests ended up skipped that I wanted to run.  However,<br/>\n&gt; there were two situations in which it was useful:<br/>\n&gt; <br/>\n&gt; a) In some other cases, I found I was using the method dependency as a<br/>\n&gt; way of specifying preconditions for a test case.  This meant that I<br/>\n&gt; needed a test that stated, for example, whether the test database was<br/>\n&gt; up, or whether I was connected to the Internet, or whether I felt like<br/>\n&gt; clicking on some buttons to help test the UI.  In JUnit 4.4, these<br/>\n&gt; kinds of dependencies are now marked by assumptions:<br/>\n&gt; <br/>\n&gt; @Test public void parseGoogleCorrectly() {<br/>\n&gt;    assumeTrue(internetConnected());<br/>\n&gt;   //...<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; I might decide that if the internet is not connected, my tests should<br/>\n&gt; fail, in which case I can test the condition directly:<br/>\n&gt; <br/>\n&gt; @Test public void internetShouldBeConnected() {<br/>\n&gt;   assertTrue(internetConnected());<br/>\n&gt; }<br/>\n<br/>\n<br/>\n </span></blockquote>Certainly the pre-conditions will help. <br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; b) Dependencies between tests can be useful in initial TDD<br/>\n&gt; development: I write a test A, and find out that I&#39;ve bitten off more<br/>\n&gt; than I can chew.  I write a test B for a smaller chunk of<br/>\n&gt; functionality, and make A dependent on B, so that I can ignore A until<br/>\n&gt; B passes.  However, I found that these dependencies cluttered the<br/>\n&gt; code, and weren&#39;t much help once initial development was done.  I<br/>\n&gt; actually made the dependency method deprecated, so that I remembered<br/>\n&gt; to remove the dependencies once everything was working.<br/>\n&gt; <br/>\n&gt; My guess is that using assumptions will handle most reasons that<br/>\n&gt; people use dependsOnMethod.  If you do find the temporary dependency<br/>\n&gt; scaffolding from 3b interesting, let&#39;s talk more about it.<br/>\n&gt; <br/>\n<br/>\n </span></blockquote>The reason I like the dependency model is basically software layering.<br/>\n  If a module or subsystem is failing unit tests I want to exclude<br/>\nsubsystems or modules that are consumer of the &#39;bad&#39; modules. Prior to<br/>\n Junit4 assumptions we were using the pattern of invoking test method<br/>\nB (if it was a prerequisite for A) again in the test method A:<br/>\n<br/>\n void testMethodA() { ..}<br/>\n void testMethod B() {<br/>\n   testMethodA();<br/>\n   .. now the code for N..<br/>\n  }<br/>\n<br/>\nFor some of the methods that have a non-trivial execution time it<br/>\nwould be great to:<br/>\n<br/>\n1) Avoid re-running them as part of assumptions check again and again<br/>\n2) Skip the methods that would fail for sure because of dependent<br/>\nmethods failing<br/>\n<br/>\n<br/>\nAn example from our project - we have a TCP networking module that<br/>\ndeals with message transfer and RPC. It depends on [un]marshaling<br/>\nmodule that does the encoding/decoding of various message types. if<br/>\nthe marshalling logic is not working, I would want to avoid running<br/>\nthe TCP networking tests and save time and effort debugging the ones<br/>\nthat truly failed. <br/>\n<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Thanks,<br/>\n&gt; <br/>\n&gt;    David Saff<br/>\n&gt; <br/>\n&gt; On 8/16/07, Roger Chen @ RevZoom &lt;coderobochen@...&gt; wrote:<br/>\n&gt; &gt; Hi -<br/>\n&gt; &gt;<br/>\n&gt; &gt; Is there any plan in the near future to support some TestNG<br/>\n </span></blockquote>features like:<br/>\n<blockquote><span title=\"qreply\"> &gt; &gt;<br/>\n&gt; &gt; 1) Ability to re-run only the failed tests by storing the list of<br/>\n&gt; &gt; failed tests persistently in an XML file etc. I have thought through a<br/>\n&gt; &gt; patch to Junit to address this. Would there be any interest in using<br/>\n&gt; &gt; this patch?<br/>\n&gt; &gt;<br/>\n&gt; &gt; 2) Allow non-static Before|After Class methods?<br/>\n&gt; &gt;<br/>\n&gt; &gt; 3) Support dependsOnMethods annotation like TestNG ?<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 19752, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1187387613", 
    "canDelete": false, 
    "nextInTopic": 19768, 
    "prevInTopic": 19752, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MDcwODE3MDY1NHIxOWRmYjU2OXljYmZiMTljNTg4NGVmODNkQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PGZhNTVjdCtkcGtyQGVHcm91cHMuY29tPg=="
    }
}