{
    "numMessagesInTopic": 15, 
    "nextInTime": 14355, 
    "senderId": "-t8a-IWdY2qvpkGLeeH3vL5ALB7i24_idD_8pS1HIClKpEIap3Izn_phguIjXuzDjoUSa5x1QstiNISgEFHb88lFv5nZUQCTUa4", 
    "systemMessage": true, 
    "subject": "Re: [junit] Writing a test for a PrintStream and for a log rotation method", 
    "from": "Asif Sattar &lt;sattar_asif@...&gt;", 
    "authorName": "Asif Sattar", 
    "msgSnippet": "createLogFile() is private static because I want there to be only one instance of the logger class , the class createLogFile() belongs to (it s a singleton). ", 
    "msgId": 14354, 
    "profile": "sattar_asif", 
    "topicId": 14345, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 46895256, 
    "messageBody": "<div id=\"ygrps-yiv-651585224\">createLogFile() is private static because I want there to<br/>\nbe only one instance of the logger class , the class<br/>\ncreateLogFile() belongs to (it&#39;s a singleton).<br/>\n<br/>\n--- Kevin Lawrence &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:kevin@...\">kevin@...</a>&gt; wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; 1. Why is createLogFile() private static ?<br/>\n&gt; <br/>\n&gt; If it were a public non-static method called create() in<br/>\n&gt; a class called, <br/>\n&gt; say, LogFile, you could separate the file creation from<br/>\n&gt; the stream <br/>\n&gt; handling and test each independently.<br/>\n&gt; <br/>\n&gt; 2. A common technique is to wrap the date handling in a<br/>\n&gt; class which you <br/>\n&gt; can then manipulate in your test.<br/>\n&gt; <br/>\n&gt; Kevin<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Asif Sattar wrote:<br/>\n&gt; &gt; Hi everyone,<br/>\n&gt; &gt; <br/>\n&gt; &gt; Two questions:<br/>\n&gt; &gt; <br/>\n&gt; &gt; 1. I&#39;m trying to write a test for a method that does<br/>\n&gt; not<br/>\n&gt; &gt; return anything.  It creates a printstream for writing<br/>\n&gt; to a<br/>\n&gt; &gt; log file.  I&#39;ve included the code below.  How do I go<br/>\n&gt; about<br/>\n&gt; &gt; writing a test for this?<br/>\n&gt; &gt; <br/>\n&gt; &gt;     private static void createLogFile() {<br/>\n&gt; &gt; <br/>\n&gt; &gt;         Date currentDate = new Date();<br/>\n&gt; &gt;         if (logFilePrintStream == null || logFileDate<br/>\n&gt; ==<br/>\n&gt; &gt; null || currentDate.after(logFileDate)) {<br/>\n&gt; &gt;             String logFileInstanceName =<br/>\n&gt; logFileDirectory +<br/>\n&gt; &gt; &#39;&#92;&#92;&#39; + logFilePrefix<br/>\n&gt; &gt;                     +<br/>\n&gt; &gt; logFileNameDateFormat.format(logFileDate) + &quot;.log&quot;;<br/>\n&gt; &gt;             logFileDate = currentDate;<br/>\n&gt; &gt; <br/>\n&gt; &gt;             try {<br/>\n&gt; &gt;                 logFilePrintStream = new<br/>\n&gt; PrintStream(new<br/>\n&gt; &gt; FileOutputStream(logFileInstanceName, true));<br/>\n&gt; &gt;                 System.setErr(logFilePrintStream);<br/>\n&gt; &gt;                 System.setOut(logFilePrintStream);<br/>\n&gt; &gt;             } catch (IOException ioe) {<br/>\n&gt; &gt;                 ioe.printStackTrace();<br/>\n&gt; &gt;             } catch (SecurityException e) {<br/>\n&gt; &gt;                 e.printStackTrace();<br/>\n&gt; &gt;             }<br/>\n&gt; &gt;             <br/>\n&gt; &gt;             logRotation();<br/>\n&gt; &gt;         }<br/>\n&gt; &gt;     }<br/>\n&gt; &gt; <br/>\n&gt; &gt; 2. The logrotation method above basically rotates log<br/>\n&gt; files<br/>\n&gt; &gt; based on dates and deletes files if they are more than<br/>\n&gt; 7<br/>\n&gt; &gt; days old.  Any ideas on how to write a test for this? <br/>\n&gt; &gt; Again, code attached below:<br/>\n&gt; &gt; <br/>\n&gt; &gt;     private static void logRotation() {<br/>\n&gt; &gt;         LinkedList logFilesInLogDirectory = new<br/>\n&gt; &gt; LinkedList();     <br/>\n&gt; &gt;         <br/>\n&gt; &gt;         // Populate logFilesInLogDirectory with files<br/>\n&gt; in<br/>\n&gt; &gt; logFileDirectory<br/>\n&gt; &gt;         File logFilesInDirectory = new<br/>\n&gt; &gt; File(logFileDirectory);<br/>\n&gt; &gt;         String[] logFilesArray =<br/>\n&gt; &gt; logFilesInDirectory.list();<br/>\n&gt; &gt;         logFilesInLogDirectory = new<br/>\n&gt; &gt; LinkedList(Arrays.asList(logFilesArray));<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt;         <br/>\n&gt; &gt;         // Remove files that are not smart card log<br/>\n&gt; files<br/>\n&gt; &gt; from file list<br/>\n&gt; &gt;         for (int i = 0; i &lt;<br/>\n&gt; logFilesInLogDirectory.size();<br/>\n&gt; &gt; i++) {<br/>\n&gt; &gt;            <br/>\n&gt; &gt;<br/>\n&gt;<br/>\n </span></blockquote>if(!((String)logFilesInLogDirectory.get(i)).startsWith(logFilePrefix))<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; {<br/>\n&gt; &gt;                 logFilesInLogDirectory.remove(i);<br/>\n&gt; &gt;             }<br/>\n&gt; &gt;         }<br/>\n&gt; &gt;         <br/>\n&gt; &gt;         // Delete oldest files if there are more than<br/>\n&gt; &gt; noOfPreviousLogFiles files  <br/>\n&gt; &gt;         if (logFilesInLogDirectory.size() &gt;<br/>\n&gt; &gt; noOfPreviousLogFiles) {<br/>\n&gt; &gt;             Collections.sort(logFilesInLogDirectory);<br/>\n&gt; &gt;             for (int i = (noOfPreviousLogFiles-1); i &lt;<br/>\n&gt; &gt; logFilesInLogDirectory.size(); i++) {<br/>\n&gt; &gt;                 new<br/>\n&gt; &gt;<br/>\n&gt; File((String)logFilesInLogDirectory.remove(i)).delete();<br/>\n&gt; &gt;             }<br/>\n&gt; &gt;         }<br/>\n&gt; &gt;     }<br/>\n&gt; &gt; <br/>\n&gt; &gt; Regards<br/>\n&gt; &gt; <br/>\n&gt; &gt; Asif<br/>\n&gt; &gt; <br/>\n&gt; &gt; __________________________________________________<br/>\n&gt; &gt; Do You Yahoo!?<br/>\n&gt; &gt; Tired of spam?  Yahoo! Mail has the best spam<br/>\n&gt; protection around <br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://mail.yahoo.com\">http://mail.yahoo.com</a> <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt;  <br/>\n&gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt;  <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; <br/>\n<br/>\n<br/>\n </span></blockquote>Asif<br/>\n<br/>\n<br/>\n\t\t<br/>\n____________________________________________________<br/>\nStart your day with Yahoo! - make it your home page <br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.yahoo.com/r/hs\">http://www.yahoo.com/r/hs</a></div>", 
    "prevInTime": 14353, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1123783702", 
    "canDelete": false, 
    "nextInTopic": 14355, 
    "prevInTopic": 14352, 
    "headers": {
        "inReplyToHeader": "PDQyRkI4QTY3LjEwNTA0MDlAZGlhbW9uZC1za3kuY29tPg==", 
        "messageIdInHeader": "PDIwMDUwODExMTgwODIyLjg2NjkyLnFtYWlsQHdlYjMwMDEzLm1haWwubXVkLnlhaG9vLmNvbT4="
    }
}