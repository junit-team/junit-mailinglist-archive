{
    "numMessagesInTopic": 6, 
    "nextInTime": 24400, 
    "senderId": "ZKGJ3-Na9NhSeOp83dWRDQMTvFfcqMnhYbGOd7A98alwaxtxlArxmYpqyK8qHne6sxbtKbdi4CVDlPtknRe5s4yDyA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Timed Tests and Thread Safety", 
    "from": "David Saff &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Thanks, Steve. I m tracking your suggestion at https://github.com/junit-team/junit/issues/686 ... [Non-text portions of this message have been removed]", 
    "msgId": 24399, 
    "rawEmail": "Return-Path: &lt;saff@...&gt;\r\nX-Sender: saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 82473 invoked by uid 102); 29 May 2013 20:18:37 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m4.grp.bf1.yahoo.com with SMTP; 29 May 2013 20:18:37 -0000\r\nX-Received: (qmail 32047 invoked from network); 29 May 2013 20:18:36 -0000\r\nX-Received: from unknown (HELO mail-qa0-f52.google.com) (209.85.216.52)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 29 May 2013 20:18:36 -0000\r\nX-Received: by mail-qa0-f52.google.com with SMTP id cr7so605802qab.11\n        for &lt;junit@yahoogroups.com&gt;; Wed, 29 May 2013 13:18:36 -0700 (PDT)\r\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=google.com; s=20120113;\n        h=mime-version:in-reply-to:references:from:date:message-id:subject:to\n         :content-type:x-gm-message-state;\n        bh=Ut7JsNOxqqD9TFykHMrV/1VzPCxu6zGbxDwTChXdtKI=;\n        b=d5kLZ7nG/1rKX7URwAI2ggz8u9cL8WFwjjeSqWZWA1HjFbMWmSUHF6i2ct06fyLgZY\n         EgLasLCuSfewz/R6xOwWiyR0ITxVBa1kXU+T0MRyld9zW9bnMd0evvqRr3DQEbxBkyk5\n         z0SagIHnensMVf0vGFJZ2lyjloU/dtysch6HAYaj6Sqf4Zwl2pDG1P5a9GTBmHbdZlpR\n         3Y0y+IE6UNcig7Nu8yhuBQ8KDbT4FtLmL0tza7X7gwKL7zovA8JEBuqHtwg2ZWJYRqL7\n         DnRDoyKDp658ct5rMRVZRXK0iycJEf6VT5TRPwCY7mpaf3LsuRcL9sYwp/QV7lPxupnE\n         4XyQ==\r\nX-Received: by 10.229.166.193 with SMTP id n1mr1558282qcy.113.1369858716574;\n Wed, 29 May 2013 13:18:36 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.229.134.17 with HTTP; Wed, 29 May 2013 13:18:16 -0700 (PDT)\r\nIn-Reply-To: &lt;knp44t+k1tt@...&gt;\r\nReferences: &lt;CAA3E+eVrWpJKV21juSvtYTQTP3o-14usEafspBRaZ1-FgGZ4LQ@...&gt;\n &lt;knp44t+k1tt@...&gt;\r\nDate: Wed, 29 May 2013 16:18:16 -0400\r\nMessage-ID: &lt;CALrw-PxGx1a3Gm+LsBvX4M1Vn2xv6KQkVCA8zen8+84fXZ18Nw@...&gt;\r\nTo: junit@yahoogroups.com\r\nX-Gm-Message-State: ALoCoQnCYRBz04uUy6+XqOu8yO1lW65rS2TZYM7x36NyJBZzDG5vY3t6Cu1cQEpSdNL0lJvK+qgx1HaCLxtJWr7hOfbJ5bpt0rCQluNIFGeuAZpF2T13iUCrZHhp32AlQs8EwOqdlN+TpLuk/3fL9wsBos69oxP+b8neGFuKNwmlmod9dfCb2HT0kVMhfT8KZQdKRX9SlQY6\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: David Saff &lt;saff@...&gt;\r\nSubject: Re: [junit] Re: Timed Tests and Thread Safety\r\nX-Yahoo-Group-Post: member; u=525765722; y=0p8K6K6dtxJ_CMS5hK_oYgKWNJVlYHTzj60LTNnSG4RCFf2imOVD-cNCSv1VyhLLdTGQKHZN3uTHHyU\r\nX-Yahoo-Profile: saffatgoogle\r\nContent-Type: text/plain\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nThanks, Steve.\n\nI&#39;m tracking your suggestion at\nhttps://github.com/junit-te=\r\nam/junit/issues/686\n\n\nOn Fri, May 24, 2013 at 9:29 PM, s_soloff &lt;s_soloff@b=\r\nellsouth.net&gt; wrote:\n\n&gt; **\n&gt;\n&gt;\n&gt; --- In junit@yahoogroups.com, Kevin Cooney=\r\n &lt;kcooney@...&gt; wrote:\n&gt; &gt; Note the Timeout rule will call @Before and @Afte=\r\nr methods in the\n&gt; &gt; same thread as the test. The test class is created bef=\r\nore rules are\n&gt; &gt; applied, so if your test class initializes fields at decl=\r\naration\n&gt; &gt; time, that execution would happen in a different thread than th=\r\ne\n&gt; &gt; test.\n&gt; &gt;\n&gt; &gt; I also believe that @After methods would not be called =\r\nfor tests\n&gt; &gt; methods that timeout in classes that use the Timeout rule.\n&gt;\n=\r\n&gt; @Kevin: I feel like a fool. I actually &quot;discovered&quot; rules during this\n&gt; e=\r\nxercise and spent some time changing legacy @Test(timeout =3D ...) tests to=\r\n\n&gt; use a fixture-level Timeout @Rule. However, I just assumed that the\n&gt; th=\r\nreading behavior between the two was the same. :( Based on your\n&gt; informati=\r\non, I ran some more tests to nail down on which thread the various\n&gt; parts =\r\nof the fixture are executed using both models. The results are\n&gt; summarized=\r\n below (from JUnit 4.8.2).\n&gt;\n&gt; @Test with timeout element:\n&gt; A1. ctor run o=\r\nn main thread\n&gt; A2. @BeforeClass, @Before, @After, @AfterClass run on main =\r\nthread\n&gt; A3. @Test run on worker thread\n&gt; A4. @After, @AfterClass run on ma=\r\nin thread if test times out\n&gt;\n&gt; Timeout @Rule:\n&gt; B1. ctor run on main threa=\r\nd\n&gt; B2. @BeforeClass, @AfterClass run on main thread\n&gt; B3. @Before, @Test, =\r\n@After run on worker thread\n&gt; B4. @After NOT run if test times out\n&gt; B5. @A=\r\nfterClass run on main thread if test times out\n&gt;\n&gt; Given these results, usi=\r\nng Timeout @Rules satisfies my concerns about\n&gt; thread safety and gives me =\r\neven more motivation to use them over\n&gt; @Test(timeout =3D ...). Thanks! (No=\r\nte sure if item [B4] is intentional, but I\n&gt; can live with it for now.)\n&gt;\n&gt;=\r\n\n&gt; --- In junit@yahoogroups.com, David Saff &lt;saff@...&gt; wrote:\n&gt; &gt; The bigge=\r\nst payoff would probably be to make sure that the\n&gt; &gt; documentation we have=\r\n makes it easy to avoid any unexpected\n&gt; &gt; behavior. Can you suggest an edi=\r\nt to that effect?\n&gt;\n&gt; @David: Your suggestion for updating the documentatio=\r\nn is probably the\n&gt; best solution based on the preferred behavior of the Ti=\r\nmeout @Rule. Below\n&gt; is my cut at a second paragraph I&#39;d add to the Javadoc=\r\ns for the @Test\n&gt; annotation&#39;s timeout element. Please edit as you see fit.=\r\n\n&gt;\n&gt; THREAD SAFETY WARNING. Test methods with a timeout parameter are run i=\r\nn a\n&gt; thread other than the thread which runs the fixture&#39;s @Before and @Af=\r\nter\n&gt; methods. This may yield different behavior for code that is not threa=\r\nd safe\n&gt; when compared to the same test method without a timeout parameter.=\r\n Consider\n&gt; using the org.junit.rules.Timeout rule instead, which ensures a=\r\n test method\n&gt; is run on the same thread as the fixture&#39;s @Before and @Afte=\r\nr methods.\n&gt;\n&gt; Thanks again for all the feedback,\n&gt; Steve\n&gt;\n&gt;  \n&gt;\n\n\n[Non-te=\r\nxt portions of this message have been removed]\n\n\n", 
    "profile": "saffatgoogle", 
    "topicId": 24388, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 525765722, 
    "prevInTime": 24398, 
    "contentTrasformed": false, 
    "postDate": "1369858696", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 24393, 
    "headers": {
        "inReplyToHeader": "PGtucDQ0dCtrMXR0QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBTHJ3LVB4R3gxYTNHbStMc0J2WDRNMVZuMnh2NktRa1ZDQTh6ZW44Kzg0ZlhaMThOd0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBQTNFK2VWcldwSktWMjFqdVN2dFlUUVRQM28tMTR1c0VhZnNwQlJhWjEtRmdHWjRMUUBtYWlsLmdtYWlsLmNvbT4gPGtucDQ0dCtrMXR0QGVHcm91cHMuY29tPg=="
    }
}