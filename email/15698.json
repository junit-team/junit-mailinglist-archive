{
    "numMessagesInTopic": 4, 
    "nextInTime": 15699, 
    "senderId": "URYsnPFidzZrUiDAu58epkNOj5Pz3ZTl9AMUQy6s02Ssom78hWBRSyKagPdp3PIeIWvr8SAvrOONNO0Venp9m5JSzwiaV0zaVomcKiNCX1wue6WYWg", 
    "systemMessage": false, 
    "subject": "Class.getClassLoader().getResourceAsStream() fails in GUI test runners?", 
    "from": "jason r tibbetts &lt;tibbettj@...&gt;", 
    "authorName": "jason r tibbetts", 
    "msgSnippet": "I m trying to test a class that loads a properties file in a special way. Because this class can be used in servlets (where ", 
    "msgId": 15698, 
    "profile": "tibbettj_at_verdi_sra_com", 
    "topicId": 15698, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 224061497, 
    "messageBody": "<div id=\"ygrps-yiv-413007556\">I&#39;m trying to test a class that loads a properties file in a special <br/>\nway. Because this class can be used in servlets (where <br/>\nthis.getClass().getResourceAsStream() doesn&#39;t work, because of <br/>\nclassloader issues) as well as in ordinary contexts, it takes a Class <br/>\nargument in its constructor. This Class&#39;s class loader is used to get <br/>\nthe resource, as in<br/>\n<br/>\n   public Foo(Class cls, String propFilePath) {<br/>\n     ClassLoader loader = cls.getClassLoader();<br/>\n     InputStream in = loader.getResourceAsStream(propFilePath);<br/>\n   }<br/>\n<br/>\nIt&#39;s usually sufficient for the caller to simply pass in <br/>\nthis.getClass(). It&#39;s sufficient enough for the TestCase that tests it, <br/>\nanyway, /except/ when the test is run in the GUI TestRunner, or in code <br/>\ncoverage tools like jcoverage and EMMA. In all three cases, the tests <br/>\nfail because the loader.getResourceAsStream() call returns null. The <br/>\nTestCase&#39;s setUp() constructs the Foo by passing in the TestCase&#39;s own <br/>\nclass, as in:<br/>\n<br/>\n   foo = new Foo(this.getClass(), &quot;some/path&quot;);<br/>\n<br/>\nOther tests that load properties (in the usual way, via <br/>\nthis.getClass.getResourceAsStream()) work just fine in all scenarios.<br/>\n<br/>\nI&#39;ve read the JUnit FAQ, mailing list archives, J.B.&#39;s book, the <br/>\njcoverage and EMMA docs, etc., all to no avail. I know that the JUnit <br/>\nGUI test runners do use a custom classloader, but the custom <br/>\nfunctionality in that classloader don&#39;t appear to be relevant here. Nor <br/>\ndo I want to add Foo&#39;s package to the excluded.properties, because <br/>\nthat&#39;s a package that I&#39;m actively testing.</div>", 
    "prevInTime": 15697, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1134659434", 
    "canDelete": false, 
    "nextInTopic": 15703, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDQzQTE4NzZBLjEwNTA2MDNAdmVyZGkuaWlzZC5zcmEuY29tPg=="
    }
}