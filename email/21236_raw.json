{
    "numMessagesInTopic": 19, 
    "nextInTime": 21237, 
    "senderId": "SFGk4FWgCrXvHTeZdRnUa4wW1jBqlKgFyUkZ70OApBsf51XKz-7gm81v5fF-Tcp97YwOvr5bSa-uy0gNvjPy59RXFMM", 
    "systemMessage": false, 
    "subject": "RE: [junit] Priority of Assertion?", 
    "from": "&quot;kentb&quot; &lt;kentb@...&gt;", 
    "authorName": "kentb", 
    "msgSnippet": "Point taken (and props to Yosef for bringing this up). Restating, the fact that assertion failures are implemented as thrown exceptions should be invisible to", 
    "msgId": 21236, 
    "rawEmail": "Return-Path: &lt;kentb@...&gt;\r\nX-Sender: kentb@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 57726 invoked from network); 30 Dec 2008 21:27:12 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m56.grp.scd.yahoo.com with QMQP; 30 Dec 2008 21:27:12 -0000\r\nX-Received: from unknown (HELO elasmtp-kukur.atl.sa.earthlink.net) (209.86.89.65)\n  by mta17.grp.scd.yahoo.com with SMTP; 30 Dec 2008 21:27:11 -0000\r\nX-Received: from [71.34.238.92] (helo=kentspavilion)\n\tby elasmtp-kukur.atl.sa.earthlink.net with esmtpa (Exim 4.67)\n\t(envelope-from &lt;kentb@...&gt;)\n\tid 1LHm7H-0002xP-UU\n\tfor junit@yahoogroups.com; Tue, 30 Dec 2008 16:27:10 -0500\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReferences: &lt;gjcoh4+a6v5@...&gt; &lt;B6D159719D97430CB9DD6CC4DB5F0DC2@kentspavilion&gt; &lt;fba296970812300818i4d920db4o4321ab7dc6dcab14@...&gt; &lt;17fa53d0812301014n4ce50c45yb5f72d7daa9d4171@...&gt;\r\nDate: Tue, 30 Dec 2008 13:27:04 -0800\r\nMessage-ID: &lt;D52463F7D60348A4A3536AB499EDA7ED@kentspavilion&gt;\r\nMIME-Version: 1.0\r\nX-Mailer: Microsoft Office Outlook 11\r\nThread-Index: Aclqqm4LF/omAZRJShuvTtnZhc/KdAAGYyzg\r\nIn-Reply-To: &lt;17fa53d0812301014n4ce50c45yb5f72d7daa9d4171@...&gt;\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579\r\nX-ELNK-Trace: 6d780abf06d998e474bf435c0eb9d47879dce996a6234f05ea472f11a23ea13f16e4ea6944d04ea5350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c\r\nX-eGroups-Msg-Info: 2:2:2:0:1\r\nFrom: &quot;kentb&quot; &lt;kentb@...&gt;\r\nReply-To: &lt;kentb@...&gt;\r\nSubject: RE: [junit] Priority of Assertion?\r\nX-Yahoo-Group-Post: member; u=173198504; y=afMEmNNz8BvjocsA-otpDHAN8c2jQL5bDHJPy5PqUiyggCT8\r\nX-Yahoo-Profile: kentlbeck\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nPoint taken (and props to Yosef for bringing this up). Restating, the fact\n=\r\nthat assertion failures are implemented as thrown exceptions should be\ninvi=\r\nsible to users. So,\n \n@Test(expected=3DWhateverException.class) public void=\r\n whatever() {\n    assertTrue(false);\n}\n \nshould be reported as an assertion=\r\n error. Makes sense to me. I was about to\ndive in and implement it when I t=\r\nhought of:\n \n@Test(expected=3DAssertionError.class) public void whatever() =\r\n{\n    //...call some code which should fail a native Java assertion...\n}\n \n=\r\nThis ought to be reported as an error if the assertion isn&#39;t thrown. Now ho=\r\nw\nabout:\n \n@Test(expected=3DAssertionError.class) public void whatever() {\n=\r\n    //...call some code which should fail a native Java assertion...\n    as=\r\nsertTrue(false);\n}\n \nThis is impossible (given our current implementation) =\r\nto get right. If the\ncode doesn&#39;t fail the assertion, the assertion is stil=\r\nl thrown by the call\nto assertTrue(). The implementation still leaks but on=\r\nly in this strange\ncase. If we use our own private subclass of Error instea=\r\nd of using\njava.lang.AssertionError, we lose compatibility with the assert =\r\nkeyword.\n \nThe optimum resolution seems to me to special case AssertionErro=\r\nr in the\n&quot;expected=3D...&quot; code and add a caveat to the documentation.\n \nCom=\r\nments?\n \nKent Beck\nThree Rivers Institute\n\n  _____  \n\nFrom: junit@yahoogrou=\r\nps.com [mailto:junit@yahoogroups.com] On Behalf Of\nnat.pryce@...\nSent=\r\n: Tuesday, December 30, 2008 10:14 AM\nTo: junit@yahoogroups.com\nSubject: Re=\r\n: [junit] Priority of Assertion?\n\n\n\nI agree. The &quot;expected&quot; construct feels=\r\n like a form of assertion that\nJunit performs after the body of the test ha=\r\ns completed. It is\nconfusing that it does not compose in the same way as ot=\r\nher\nassertions. If a test has two consecutive assertions, it is not an\nerro=\r\nr for the first assertion to fail and the second never to be\ncalled. Likewi=\r\nse I&#39;d expect it not to be an error for an assertion to\nfail and the &quot;expec=\r\nted&quot; constraint not to be checked.\n\nWhat happens when a test with an expect=\r\ned exception throws an\nassumption exception?\n\n--Nat\n\nOn 30/12/2008, Ilja Pr=\r\neu=DF &lt;iljapreuss@googlema\n&lt;mailto:iljapreuss%40googlemail.com&gt; il.com&gt; wro=\r\nte:\n&gt; Kent, I agree that it is expected behavior, technically. I think you\n=\r\n&gt; could also make an argument that it would be better if the behavior\n&gt; was=\r\n different.\n&gt;\n&gt; In my view, the behavior is in fact an artifact of an imple=\r\nmentation\n&gt; detail - namely that asserts indicate failures by throwing an\n&gt;=\r\n exception. It could be made the case that JUnit &quot;should&quot; report those\n&gt; fa=\r\niling asserts as failing asserts, not as unexpected exceptions.\n&gt; Basically=\r\n, the current behavior masks the true test failure.\n&gt;\n&gt; Frankly, I have a h=\r\nunch that the best solution to this problem\n&gt; actually is to split the test=\r\n in two, that is, to not mix &quot;expected&quot;\n&gt; and &quot;assert&quot; in the same test met=\r\nhod.\n&gt;\n&gt; Cheers, Ilja\n&gt;\n&gt; 2008/12/30 kentb &lt;kentb@earthlink. &lt;mailto:kentb%=\r\n40earthlink.net&gt; net&gt;:\n&gt;&gt; Yosef,\n&gt;&gt;\n&gt;&gt; The behavior you describe is what I =\r\nwould expect to see. In the test, you\n&gt;&gt; declared that an ArrayIndexOutOfBo=\r\nunds exception would be thrown. It was\n&gt;&gt; not\n&gt;&gt; thrown, so the test fails.=\r\n The error message says that the &quot;wrong&quot;\n&gt;&gt; exception\n&gt;&gt; that was thrown wa=\r\ns an AssertionError, which is generated by the\n&gt;&gt; assertTrue(false). The &quot;e=\r\nxpected=3D...&quot; means that a test can fail if no\n&gt;&gt; exception is thrown or i=\r\nf the wrong exception is thrown.\n&gt;&gt;\n&gt;&gt; Regards,\n&gt;&gt;\n&gt;&gt; Kent Beck\n&gt;&gt; Three Ri=\r\nvers Institute\n&gt;&gt;\n&gt;&gt; _____\n&gt;&gt;\n&gt;&gt; From: junit@yahoogroups. &lt;mailto:junit%40y=\r\nahoogroups.com&gt; com\n[mailto:junit@yahoogroups. &lt;mailto:junit%40yahoogroups.=\r\ncom&gt; com] On Behalf\nOf\n&gt;&gt; yosefshariat\n&gt;&gt; Sent: Tuesday, December 30, 2008 =\r\n1:10 AM\n&gt;&gt; To: junit@yahoogroups. &lt;mailto:junit%40yahoogroups.com&gt; com\n&gt;&gt; S=\r\nubject: [junit] Priority of Assertion?\n&gt;&gt;\n&gt;&gt; Hi\n&gt;&gt; I use &quot;@Test(expected =\r\n=3D AnyClassException.class&quot;) and one\n&gt;&gt; &quot;assertTrue(false)&quot; together for e=\r\nxample following code:\n&gt;&gt;\n&gt;&gt; @Test(expected =3D ArrayIndexOutOfBoundsExcept=\r\nion.class)\n&gt;&gt; public void test()\n&gt;&gt; {\n&gt;&gt; String s[] =3D new String[]{&quot;1&quot;};\n=\r\n&gt;&gt; assertTrue(false);\n&gt;&gt; System.out.println(s[10]);\n&gt;&gt; }\n&gt;&gt;\n&gt;&gt; I expect to =\r\nsee an assertion but I see following error:\n&gt;&gt; java.lang.Exception: Unexpec=\r\nted exception,\n&gt;&gt; expected&lt;java.lang.ArrayIndexOutOfBoundsException&gt; but\n&gt;&gt;=\r\n was&lt;java.lang.AssertionError&gt;..\n&gt;&gt;\n&gt;&gt; In your opinion, this test must be A=\r\nssertion or Exception.\n&gt;&gt; In &quot;JUnit&quot; we cannot use &quot;@Test(expected =3D AnyC=\r\nlassException.class&quot;)\n&gt;&gt; and Assertion together at the same time.\n&gt;&gt; In my =\r\nopinion this test must be failed for &quot;assertion&quot; and not for\n&gt;&gt; ArrayIndexO=\r\nutOfBoundsException.\n&gt;&gt; Is this a bug in JUnit or my test is wrong and shou=\r\nldn&#39;t use two item\n&gt;&gt; together?\n&gt;&gt; Tanks.\n&gt;&gt;\n&gt;&gt; [Non-text portions of this =\r\nmessage have been removed]\n&gt;&gt;\n&gt;&gt;\n&gt;\n\n-- \nhttp://www.natpryce &lt;http://www.nat=\r\npryce.com&gt; .com\n\n\n \n\n\n[Non-text portions of this message have been removed]=\r\n\n\n\n", 
    "profile": "kentlbeck", 
    "topicId": 21230, 
    "spamInfo": {
        "reason": "2", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 173198504, 
    "prevInTime": 21235, 
    "contentTrasformed": false, 
    "postDate": "1230672424", 
    "canDelete": false, 
    "nextInTopic": 21237, 
    "prevInTopic": 21235, 
    "headers": {
        "inReplyToHeader": "PDE3ZmE1M2QwODEyMzAxMDE0bjRjZTUwYzQ1eWI1ZjcyZDdkYWE5ZDQxNzFAbWFpbC5nbWFpbC5jb20+", 
        "messageIdInHeader": "PEQ1MjQ2M0Y3RDYwMzQ4QTRBMzUzNkFCNDk5RURBN0VEQGtlbnRzcGF2aWxpb24+", 
        "referencesHeader": "PGdqY29oNCthNnY1QGVHcm91cHMuY29tPiA8QjZEMTU5NzE5RDk3NDMwQ0I5REQ2Q0M0REI1RjBEQzJAa2VudHNwYXZpbGlvbj4gPGZiYTI5Njk3MDgxMjMwMDgxOGk0ZDkyMGRiNG80MzIxYWI3ZGM2ZGNhYjE0QG1haWwuZ21haWwuY29tPiA8MTdmYTUzZDA4MTIzMDEwMTRuNGNlNTBjNDV5YjVmNzJkN2RhYTlkNDE3MUBtYWlsLmdtYWlsLmNvbT4="
    }
}