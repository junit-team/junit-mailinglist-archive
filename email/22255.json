{
    "numMessagesInTopic": 4, 
    "nextInTime": 22256, 
    "senderId": "Bd0O1xi66kVaSF-kZ6Pa7R-gMZVli-ztHCs5-3360NM0sJ1XGFcuxUFUeQhPWn2DZv-ftugEerEdZXw5OPiZ7YBUwgHHxTDyaZUpQTB32ENTQLkvuMNR", 
    "systemMessage": true, 
    "subject": "RE: [junit] Timeout tests and thread-local dependencies", 
    "from": "&quot;Loritsch, Berin C.&quot; &lt;berin.loritsch@...&gt;", 
    "authorName": "Loritsch, Berin C.", 
    "msgSnippet": "Yes and no.  To put it bluntly, it s a bit more problematic than it should be.  There are methods to bind the hibernate session to a request, default is per", 
    "msgId": 22255, 
    "profile": "bloritsch", 
    "topicId": 22245, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 428096731, 
    "messageBody": "<div id=\"ygrps-yiv-1382942481\">Yes and no.  To put it bluntly, it&#39;s a bit more problematic than it<br/>\nshould be.  There are methods to bind the hibernate session to a<br/>\nrequest, default is per thread, etc.<br/>\n<br/>\n <br/>\n<br/>\nAre the @Before and @After called with the thread that executes the<br/>\ntimeout function?  As long as there is setup/teardown in the same<br/>\nthread, that does not count against the timeout it might be OK.<br/>\n<br/>\n <br/>\n<br/>\nFrom: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of<br/>\nDavid Saff<br/>\nSent: Friday, January 01, 2010 9:14 PM<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSubject: Re: [junit] Timeout tests and thread-local dependencies<br/>\n<br/>\n <br/>\n<br/>\n  <br/>\n<br/>\nI don&#39;t know Hibernate/Spring well, so this is a shot in the dark...<br/>\n<br/>\nOn Thu, Dec 31, 2009 at 12:54 PM, Berin &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:berin.loritsch@...\">berin.loritsch@...</a><br/>\n&lt;mailto:berin.loritsch%40gd-ais.com&gt; &gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; I&#39;m trying to test some behavior using Hibernate/Spring transactional<br/>\n </span></blockquote>support, but I&#39;m running into a particular snag.  By default, the<br/>\ntransaction manager is bound to the current thread.<br/>\n<br/>\nCan that default be overridden?<br/>\n<br/>\nDavid<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; Problem is that with tests that have the &quot;timeout&quot; attribute<br/>\n </span></blockquote>specified, JUnit creates a new thread to ensure the timeout is enforced.<br/>\nFor example:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; @Test(timeout=100)<br/>\n&gt; public void makeSureActionHappenedRecently() {<br/>\n&gt;    AuditLog.get().logEvent(EventType.TestEvent, &quot;Foo&quot;);<br/>\n&gt;<br/>\n&gt;    Collection&lt;AuditEvent&gt; log =<br/>\n&gt;        AuditLog.get().findEventsFor(EventType.TestEvent);<br/>\n&gt;<br/>\n&gt;   assertNotEmpty(log);<br/>\n&gt;   // make sure timestamp is within X ms<br/>\n&gt;   assertRecent(100, log.iterator().next().getTimestamp());<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; This works without the (timeout=100) qualification because Hibernate<br/>\n </span></blockquote>is set up in the @BeforeClass.<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; Technically I could put the set up in an @Before method, but that<br/>\n </span></blockquote>becomes rather expensive (setting up Spring, Hibernate, connecting to<br/>\ndatabase).<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; Any clues on how to make this work?<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n<br/>\n </span></blockquote>[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 22254, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1262631637", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 22248, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MTAwMTAxMTgxNGwxZGJhMmQ5MnA3M2FiYzc0MDQxMDg2ZjhiQG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDc1RjVFRDhBNUE1NTM2NDZBNDZFMDBFNkVDODU0RkEzMDQyNzA2NTJAdmFmZjAxLW1haWwwMS5hZC5nZC1haXMuY29tPg==", 
        "referencesHeader": "PGhoaW9mdSt0MWw2QGVHcm91cHMuY29tPiA8NGY3ZGE2YjkxMDAxMDExODE0bDFkYmEyZDkycDczYWJjNzQwNDEwODZmOGJAbWFpbC5nbWFpbC5jb20+"
    }
}