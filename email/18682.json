{
    "numMessagesInTopic": 4, 
    "nextInTime": 18683, 
    "senderId": "0UvLaIs1ZbEozyQoeFvu4vngyTRVbIbDoZTML3kv8ftyaOAIupP8-eM89ALGr3ffaLQ09Svh_DHmV0UI-qv2PEn3cB0", 
    "systemMessage": false, 
    "subject": "Re: how do I use my filter when running from ANT1.7", 
    "from": "&quot;adass75&quot; &lt;adass75@...&gt;", 
    "authorName": "adass75", 
    "msgSnippet": "Thanks David! This creature works like a charm! - Ajay ... such ... Here s ... the ... AFilter.class) ... AFilter.class) ... BFilter.class) ... (); ... ", 
    "msgId": 18682, 
    "profile": "adass75", 
    "topicId": 18647, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 199362954, 
    "messageBody": "<div id=\"ygrps-yiv-1677384981\">Thanks David! This creature works like a charm!<br/>\n<br/>\n- Ajay<br/>\n<br/>\n<blockquote><span title=\"qreply\"> --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;David Saff&quot; &lt;saff@...&gt; wrote:<br/>\n&gt;<br/>\n&gt; On 1/5/07, adass75 &lt;adass75@...&gt; wrote:<br/>\n&gt; &gt; I guess I want to be able to apply my filter and yet not run from<br/>\n&gt; &gt; the main but using the RunWith option. Is the answer to this a<br/>\n&gt; &gt; customized runner where my filter is applied?adass,<br/>\n&gt; <br/>\n&gt; Yes, a customized runner is what you want.  I thought I&#39;d posted <br/>\nsuch<br/>\n&gt; a creature sometime in the past, but wasn&#39;t able to find it.  <br/>\nHere&#39;s<br/>\n&gt; some code that should do the trick.  Above is the usage, below is <br/>\nthe<br/>\n&gt; implementation.  Share and Enjoy,<br/>\n&gt; <br/>\n&gt;    David Saff<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; package filter;<br/>\n&gt; <br/>\n&gt; import static org.junit.Assert.*;<br/>\n&gt; <br/>\n&gt; import java.lang.annotation.Retention;<br/>\n&gt; import java.lang.annotation.RetentionPolicy;<br/>\n&gt; <br/>\n&gt; import org.junit.Test;<br/>\n&gt; import org.junit.runner.Description;<br/>\n&gt; import org.junit.runner.JUnitCore;<br/>\n&gt; import org.junit.runner.Request;<br/>\n&gt; import org.junit.runner.Result;<br/>\n&gt; import org.junit.runner.RunWith;<br/>\n&gt; import org.junit.runner.Runner;<br/>\n&gt; import org.junit.runner.manipulation.Filter;<br/>\n&gt; import org.junit.runner.notification.RunNotifier;<br/>\n&gt; <br/>\n&gt; public class FilterTest {<br/>\n&gt; \t<br/>\n&gt; \t<br/>\n&gt; \t// TEST<br/>\n&gt; \t<br/>\n&gt; \t<br/>\n&gt; \tpublic static class AFilter extends PrefixFilter {<br/>\n&gt; \t\t@Override<br/>\n&gt; \t\tprotected String getPrefix() {<br/>\n&gt; \t\t\treturn &quot;a&quot;;<br/>\n&gt; \t\t}<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \tpublic static class BFilter extends PrefixFilter {<br/>\n&gt; \t\t@Override<br/>\n&gt; \t\tprotected String getPrefix() {<br/>\n&gt; \t\t\treturn &quot;b&quot;;<br/>\n&gt; \t\t}<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \tpublic static class OneAOneB {<br/>\n&gt; \t\t@Test<br/>\n&gt; \t\tpublic void a1() {<br/>\n&gt; <br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\t@Test<br/>\n&gt; \t\tpublic void b1() {<br/>\n&gt; <br/>\n&gt; \t\t}<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \tpublic static class TwoAsOneB extends OneAOneB {<br/>\n&gt; \t\t@Test<br/>\n&gt; \t\tpublic void a2() {<br/>\n&gt; <br/>\n&gt; \t\t}<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \t@RunWith(FilterRunner.class)<br/>\n&gt; \t@FilteredClass(testClass = OneAOneB.class, filterClass = <br/>\nAFilter.class)<br/>\n&gt; \tpublic static class OneA {<br/>\n&gt; <br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \t@RunWith(FilterRunner.class)<br/>\n&gt; \t@FilteredClass(testClass = TwoAsOneB.class, filterClass = <br/>\nAFilter.class)<br/>\n&gt; \tpublic static class TwoAs {<br/>\n&gt; <br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \t@RunWith(FilterRunner.class)<br/>\n&gt; \t@FilteredClass(testClass = TwoAsOneB.class, filterClass = <br/>\nBFilter.class)<br/>\n&gt; \tpublic static class OneB {<br/>\n&gt; <br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \t@Test<br/>\n&gt; \tpublic void filterRunnerWorksOnTwoAs() {<br/>\n&gt; \t\tResult result = JUnitCore.runClasses(TwoAs.class);<br/>\n&gt; \t\tassertEquals(2, result.getRunCount());<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \t@Test<br/>\n&gt; \tpublic void filterRunnerWorksOnB() {<br/>\n&gt; \t\tResult result = JUnitCore.runClasses(OneB.class);<br/>\n&gt; \t\tassertEquals(1, result.getRunCount());<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \t@Test<br/>\n&gt; \tpublic void filterRunnerWorksOnA() {<br/>\n&gt; \t\tResult result = JUnitCore.runClasses(OneA.class);<br/>\n&gt; \t\tassertEquals(1, result.getRunCount());<br/>\n&gt; \t}<br/>\n&gt; \t<br/>\n&gt; <br/>\n&gt; \t<br/>\n&gt; \t<br/>\n&gt; \t// IMPLEMENTATION<br/>\n&gt; \t<br/>\n&gt; \t<br/>\n&gt; \t<br/>\n&gt; \t<br/>\n&gt; \t@Retention(RetentionPolicy.RUNTIME)<br/>\n&gt; \tpublic @interface FilteredClass {<br/>\n&gt; <br/>\n&gt; \t\tClass&lt;?&gt; testClass();<br/>\n&gt; <br/>\n&gt; \t\tClass&lt;? extends Filter&gt; filterClass();<br/>\n&gt; <br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \tpublic abstract static class PrefixFilter extends Filter {<br/>\n&gt; \t\t@Override<br/>\n&gt; \t\tpublic String describe() {<br/>\n&gt; \t\t\treturn &quot;methods beginning with &quot; + getPrefix<br/>\n();<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\t@Override<br/>\n&gt; \t\tpublic boolean shouldRun(Description description) {<br/>\n&gt; \t\t\treturn (description.getDisplayName<br/>\n().startsWith(getPrefix()));<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\tprotected abstract String getPrefix();<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; \tpublic static class FilterRunner extends Runner {<br/>\n&gt; \t\tprivate final Runner delegate;<br/>\n&gt; <br/>\n&gt; \t\tpublic FilterRunner(Class&lt;?&gt; testClass) throws <br/>\nException {<br/>\n&gt; \t\t\tRequest classRequest = Request.aClass<br/>\n(getTestClass(testClass));<br/>\n&gt; \t\t\tFilter filter = getFilter(testClass);<br/>\n&gt; \t\t\tdelegate = classRequest.filterWith<br/>\n(filter).getRunner();<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\tprivate Class&lt;?&gt; getTestClass(Class&lt;?&gt; testClass) {<br/>\n&gt; \t\t\treturn annotation(testClass).testClass();<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\tprivate Filter getFilter(Class&lt;?&gt; testClass) throws <br/>\nException {<br/>\n&gt; \t\t\treturn annotation(testClass).filterClass<br/>\n().newInstance();<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\tprivate FilteredClass annotation(Class&lt;?&gt; testClass) <br/>\n{<br/>\n&gt; \t\t\treturn testClass.getAnnotation<br/>\n(FilteredClass.class);<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\t@Override<br/>\n&gt; \t\tpublic Description getDescription() {<br/>\n&gt; \t\t\treturn delegate.getDescription();<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t\t@Override<br/>\n&gt; \t\tpublic void run(RunNotifier notifier) {<br/>\n&gt; \t\t\tdelegate.run(notifier);<br/>\n&gt; \t\t}<br/>\n&gt; \t}<br/>\n&gt; }<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 18681, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1168355320", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 18672, 
    "headers": {
        "inReplyToHeader": "PDRmN2RhNmI5MDcwMTA4MTAxOHFmNWQ4NTVhdTUwNTFjNmZkZTI0Nzg0OTFAbWFpbC5nbWFpbC5jb20+", 
        "messageIdInHeader": "PGVvMGI1bytidWMzQGVHcm91cHMuY29tPg=="
    }
}