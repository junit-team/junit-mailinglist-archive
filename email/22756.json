{
    "numMessagesInTopic": 4, 
    "nextInTime": 22757, 
    "senderId": "vkfoSF0MuB9qYMtVbJSs2BOzIkgT0Q5XhReYMNxiTmC_gWZGs4jPr_6H2eQTHF3HojN-AcTvyvmN3cf2fBbPFQomW1bBjBorfZc6", 
    "systemMessage": false, 
    "subject": "Re: [junit] jUnit4 Expectation and Assertation with jMock2", 
    "from": "Steve Freeman &lt;smgfreeman@...&gt;", 
    "authorName": "Steve Freeman", 
    "msgSnippet": "This seems to be an unfortunate combination of the two libraries. In your sql exception test, the first stack trace is from the JUnit expected annotation. The", 
    "msgId": 22756, 
    "profile": "smg_freeman", 
    "topicId": 22754, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 206880094, 
    "messageBody": "<div id=\"ygrps-yiv-2063311124\">This seems to be an unfortunate combination of the two libraries. In your sql exception test, the first stack trace is from the JUnit expected annotation. The second is from the jMock expectations. We tried to strike a balance in jMock between being providing enough and too much information, but it&#39;s hard to be general. One trick, though, is that I think that some of the IDE&#39;s can be configured to hide certain packages in stack traces.<br/>\n<br/>\nS.<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 12 Jun 2010, at 03:18, raja_s_patil wrote:<br/>\n&gt; I am new to java and doing my first project.<br/>\n&gt; The testcase is as given below, but the snippet where i need help is<br/>\n&gt; <br/>\n&gt; \t@Test(expected = java.sql.SQLException.class)<br/>\n&gt; \tpublic void testSetParameter() throws SQLException {<br/>\n&gt; <br/>\n&gt; \t\tcontext.checking(new Expectations() {<br/>\n&gt; \t\t\t{<br/>\n&gt; \t\t\t\toneOf(setter).setString(&quot;T&quot;);<br/>\n&gt; \t\t\t\toneOf(setter).setString(&quot;F&quot;);<br/>\n&gt; \t\t\t\t}<br/>\n&gt; \t\t\t});<br/>\n&gt; <br/>\n&gt; \t\tboolHandler.setParameter(setter, new Boolean(true));<br/>\n&gt; \t\tboolHandler.setParameter(setter, new Boolean(false));<br/>\n&gt; \t\tboolHandler.setParameter(setter, null);<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; The test is running fine and giving me GREEN bar. But I would like to<br/>\n&gt; show meaningful message when any of the above test fails. e.g. if <br/>\n&gt; <br/>\n&gt; boolHandler.setParameter(setter, new Boolean(false)); is changed to<br/>\n&gt; boolHandler.setParameter(setter, new Boolean(true)); then test fails<br/>\n&gt; <br/>\n&gt; but the message is not precisely telling why it has failed as <br/>\n&gt; getResult is doing. The message is also given below one has to search in this long message and conclude that setString(&quot;T&quot;) has been <br/>\n&gt; called once and it should be setString(&quot;F&quot;) for second time call.<br/>\n&gt; <br/>\n&gt; How can I indicate a short precise message why test has failed.<br/>\n&gt; <br/>\n&gt; Thanks and regards.<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; Raja<br/>\n&gt; <br/>\n&gt; ======================================================================<br/>\n&gt; public class testBoolTypeHandler {<br/>\n&gt; <br/>\n&gt; \tprivate Mockery\t\t\t\tcontext;<br/>\n&gt; \tprivate ResultGetter\t\tgetter;<br/>\n&gt; \tprivate ParameterSetter\t\tsetter;<br/>\n&gt; \tprivate boolTypeHandlerTF\tboolHandler;<br/>\n&gt; \tprivate String\t\t\t\ts;<br/>\n&gt; <br/>\n&gt; \t@Before<br/>\n&gt; \tpublic void setUp() throws Exception {<br/>\n&gt; <br/>\n&gt; \t\tcontext\t\t= new JUnit4Mockery();<br/>\n&gt; \t\tgetter\t\t= context.mock(ResultGetter.class);<br/>\n&gt; \t\tsetter\t\t= context.mock(ParameterSetter.class);<br/>\n&gt; \t\tboolHandler\t= new boolTypeHandlerTF();<br/>\n&gt; <br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t@After<br/>\n&gt; \tpublic void tearDown() throws Exception {}<br/>\n&gt; <br/>\n&gt; \t@Test(expected = java.sql.SQLException.class)<br/>\n&gt; \tpublic void testGetResult() throws SQLException {<br/>\n&gt; <br/>\n&gt; \t\tboolean\tresult;<br/>\n&gt; <br/>\n&gt; \t\tcontext.checking(new Expectations() {<br/>\n&gt; \t\t\t{<br/>\n&gt; \t\t\t\tatLeast(1).of(getter).getString();<br/>\n&gt; \t\t\t\twill(onConsecutiveCalls(returnValue(&quot;T&quot;), returnValue(&quot;F&quot;), returnValue(&quot; &quot;)\t// , returnValue(&#39;F&#39;)<br/>\n&gt; \t\t\t\t\t));<br/>\n&gt; \t\t\t\t}<br/>\n&gt; \t\t\t});<br/>\n&gt; <br/>\n&gt; \t\tresult\t= ((Boolean) (boolHandler.getResult(getter))).booleanValue();<br/>\n&gt; \t\tassertEquals(&quot;getter.getString() == &#39;T&#39; &quot;, true, result);<br/>\n&gt; <br/>\n&gt; \t\tresult\t= (Boolean) (boolHandler.getResult(getter));<br/>\n&gt; \t\tassertEquals(&quot;getter.getString() == &#39;F&#39; &quot;, false, result);<br/>\n&gt; <br/>\n&gt; \t\t// getter.getString() == &#39; &#39; Throws Exception<br/>\n&gt; \t\tresult\t= (Boolean) (boolHandler.getResult(getter));<br/>\n&gt; <br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t@Test(expected = java.sql.SQLException.class)<br/>\n&gt; \tpublic void testSetParameter() throws SQLException {<br/>\n&gt; <br/>\n&gt; \t\tcontext.checking(new Expectations() {<br/>\n&gt; \t\t\t{<br/>\n&gt; \t\t\t\toneOf(setter).setString(&quot;T&quot;);<br/>\n&gt; \t\t\t\toneOf(setter).setString(&quot;F&quot;);<br/>\n&gt; \t\t\t\t}<br/>\n&gt; \t\t\t});<br/>\n&gt; <br/>\n&gt; \t\tboolHandler.setParameter(setter, new Boolean(true));<br/>\n&gt; \t\tboolHandler.setParameter(setter, new Boolean(false));<br/>\n&gt; \t\tboolHandler.setParameter(setter, null);<br/>\n&gt; \t\t}<br/>\n&gt; <br/>\n&gt; \t/**<br/>\n&gt; \t *<br/>\n&gt; \t * @Test<br/>\n&gt; \t * public void testValueOf() {<br/>\n&gt; \t *   fail(&quot;Not yet implemented&quot;);<br/>\n&gt; \t * }<br/>\n&gt; \t */<br/>\n&gt; \t}<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ======================================================================<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; java.lang.Exception: Unexpected exception, expected&lt;java.sql.SQLException&gt; but was&lt;java.lang.AssertionError&gt;<br/>\n&gt; \tat org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:29)<br/>\n&gt; \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)<br/>\n&gt; \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)<br/>\n&gt; \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:73)<br/>\n&gt; \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)<br/>\n&gt; \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)<br/>\n&gt; \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)<br/>\n&gt; \tat org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)<br/>\n&gt; \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)<br/>\n&gt; \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)<br/>\n&gt; \tat org.junit.runners.ParentRunner.run(ParentRunner.java:220)<br/>\n&gt; \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:46)<br/>\n&gt; \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)<br/>\n&gt; \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)<br/>\n&gt; \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)<br/>\n&gt; \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)<br/>\n&gt; \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)<br/>\n&gt; Caused by: java.lang.AssertionError: unexpected invocation: parameterSetter.setString(&quot;T&quot;)<br/>\n&gt; expectations:<br/>\n&gt;  expected once, already invoked 1 time: parameterSetter.setString(&quot;T&quot;); returns a default value<br/>\n&gt;  expected once, never invoked: parameterSetter.setString(&quot;F&quot;); returns a default value<br/>\n&gt; what happened before this:<br/>\n&gt;  parameterSetter.setString(&quot;T&quot;)<br/>\n&gt; <br/>\n&gt; \tat org.jmock.internal.InvocationDispatcher.dispatch(InvocationDispatcher.java:56)<br/>\n&gt; \tat org.jmock.Mockery.dispatch(Mockery.java:218)<br/>\n&gt; \tat org.jmock.Mockery.access$000(Mockery.java:43)<br/>\n&gt; \tat org.jmock.Mockery$MockObject.invoke(Mockery.java:258)<br/>\n&gt; \tat org.jmock.internal.InvocationDiverter.invoke(InvocationDiverter.java:27)<br/>\n&gt; \tat org.jmock.internal.FakeObjectMethods.invoke(FakeObjectMethods.java:38)<br/>\n&gt; \tat org.jmock.lib.JavaReflectionImposteriser$1.invoke(JavaReflectionImposteriser.java:33)<br/>\n&gt; \tat $Proxy7.setString(Unknown Source)<br/>\n&gt; \tat com.matrimony.utils.ibatis.boolTypeHandlerTF.setParameter(boolTypeHandlerTF.java:45)<br/>\n&gt; \tat com.matrimony.utils.ibatis.testBoolTypeHandler.testSetParameter(testBoolTypeHandler.java:89)<br/>\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br/>\n&gt; \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:597)<br/>\n&gt; \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)<br/>\n&gt; \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)<br/>\n&gt; \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)<br/>\n&gt; \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)<br/>\n&gt; \tat org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:22)<br/>\n&gt; \t... 16 more<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ------------------------------------<br/>\n&gt; <br/>\n&gt; Yahoo! Groups Links<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n<br/>\nSteve Freeman<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.mockobjects.com\">http://www.mockobjects.com</a><br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.growing-object-oriented-software.com\">http://www.growing-object-oriented-software.com</a><br/>\n<br/>\nWinner of the Agile Alliance Gordon Pask award 2006 </span></blockquote></div>", 
    "prevInTime": 22755, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1276334008", 
    "canDelete": false, 
    "nextInTopic": 22757, 
    "prevInTopic": 22754, 
    "headers": {
        "inReplyToHeader": "PGh1dXFxaCtqcGh1QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIwMTAwNjEyMDkxNC5vNUM5RTIyczAxNzUyMUByczQ5Lmx1eHNjaS5jb20+", 
        "referencesHeader": "PGh1dXFxaCtqcGh1QGVHcm91cHMuY29tPg=="
    }
}