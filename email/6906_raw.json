{
    "numMessagesInTopic": 41, 
    "nextInTime": 6907, 
    "senderId": "XzzNAyq6IGet0SxfMo3BKZHsKfeInQambdrzjwNgt2zZVX3WpFZ4KWsF-OMFwiMw1QqCIsxSBiZHTl6QjsxnUzNsP_l3d7cbbcEey5Y7Vbs", 
    "systemMessage": false, 
    "subject": "RE: [junit] Programmer Tests and the Database", 
    "from": "&quot;Jason Rogers&quot; &lt;jacaetevha@...&gt;", 
    "authorName": "Jason Rogers", 
    "msgSnippet": "OK, I am stepping into this one late, and I haven t read everything but I just saw this talk on ResourceBundles and SQL statements, etc. and thought I could", 
    "msgId": 6906, 
    "rawEmail": "Return-Path: &lt;jacaetevha@...&gt;\r\nX-Sender: jacaetevha@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_3_4); 7 Feb 2003 20:46:08 -0000\r\nReceived: (qmail 92986 invoked from network); 7 Feb 2003 20:46:07 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m1.grp.scd.yahoo.com with QMQP; 7 Feb 2003 20:46:07 -0000\r\nReceived: from unknown (HELO www.fastmail.fm) (66.111.4.2)\n  by mta3.grp.scd.yahoo.com with SMTP; 7 Feb 2003 20:46:07 -0000\r\nReceived: from www.fastmail.fm (localhost [127.0.0.1])\n\tby localhost.localdomain (Postfix) with ESMTP id 0CB961D3BD\n\tfor &lt;junit@yahoogroups.com&gt;; Fri,  7 Feb 2003 15:46:05 -0500 (EST)\r\nReceived: from 127.0.0.1 ([127.0.0.1] helo=www.fastmail.fm) by fastmail.fm\n  with SMTP; Fri, 07 Feb 2003 15:46:05 -0500\r\nX-Epoch: 1044650765\r\nX-Sasl-enc: jFuJRDElwZA+fVJlw4AieQ\r\nReceived: from RHINO (host-145.subnet-156.med.umich.edu [141.214.156.145])\n\tby www.fastmail.fm (Postfix) with ESMTP id BCD471B353\n\tfor &lt;junit@yahoogroups.com&gt;; Fri,  7 Feb 2003 15:46:04 -0500 (EST)\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nSubject: RE: [junit] Programmer Tests and the Database\r\nDate: Fri, 7 Feb 2003 15:46:14 -0500\r\nMessage-ID: &lt;000701c2cee9$f5036f20$919cd68d@RHINO&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;Windows-1252&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook, Build 10.0.2627\r\nIn-Reply-To: &lt;200302071003080656.006BFD92@...&gt;\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400\r\nImportance: Normal\r\nFrom: &quot;Jason Rogers&quot; &lt;jacaetevha@...&gt;\r\nX-Yahoo-Group-Post: member; u=109352929\r\nX-Yahoo-Profile: jacaetev\r\n\r\nOK, I am stepping into this one late, and I haven&#39;t read everything but\nI just saw this talk on ResourceBundles and SQL statements, etc. and\nthought I could offer some input.\n\nWe tend to make objects that represent the database access, why not in\nthis case?  Make objects that represent the selects, inserts, etc.,\nleverage the package structure of Java, and then you effectively have\nall of your SQL in one place.\n\nOn my current project we use a hierarchy of Query objects that do all of\nour selects, and a heirarchy of Records that do inserts, updates,\ndeletes, etc.  Queries return Records, Records are given to model layer\nobjects for construction (which requires a fair amount of discipline on\nthe team so as not to allow the model layer to muck with the persistence\nlayer).  It couldn&#39;t be any simpler...  There are two places to look for\nchanging SQL, and there are extensive functional tests on the objects\nthat represent the database actions.\n\nHere&#39;s a snippet:\n************************************************************************\n***\nDatabaseConnection.allRecords(Query query) {\n    DatabaseConnectionPool connectionPool =\n        DatabaseConnectionPool.getInstanceForDatabase(this);\n    \n    try {\n        Connection connection = connectionPool.getConnection();\n        Statement statement = connection.createStatement();\n        ResultSet resultSet =\nstatement.executeQuery(query.queryString());\n\n        try {\n            return query.process(resultSet);\n        } catch (SQLException e) {\n    .\n    .\n    .\n}\n\nQuery.allRecords(DatabaseConnection databaseConnection) {\n    RecordsList results = database.allRecords(this);\n    return results;\n}\nQuery.exactlyOneRecord(DatabaseConnection databaseConnection) {\n    Record results = database.exactlyOneRecord(this);\n    return results;\n}\n************************************************************************\n***\n\nThe public API on Query is allRecords(DatabaseConnection),\nexactlyOneRecord(DatabaseConnection), process(ResultSet), and\nqueryString().  As you can see we use a DoubleDispatch operation: we ask\nthe Query for a Record or RecordList, it turns and asks the\nDatabaseConnection for the appropriate thing, the DatabaseConnection\nturns back around and asks the Query to process the ResultSet it just\ngot from a java.sql.Connection.  It&#39;s clean, you can now have objects\nrepresenting your SQL, and it all is stuck in one package structure (or\nat most a few) and not just strewn throughout the codebase.\n\nI hope that will help in the discussion.\n\n=jason\n[:question | ^One] \n-----Original Message-----\nFrom: J. B. Rainsberger [mailto:jbr@...] \nSent: Friday, February 07, 2003 10:03 AM\nTo: junit@yahoogroups.com; junit@yahoogroups.com\nSubject: Re: [junit] Programmer Tests and the Database\n\n\nAmen, sir.\n\nSo said  Bob Koss  on  2003-02-07 --------------------\n\n&gt;On 2/7/03 12:34 AM, &quot;Curt Sampson&quot; &lt;yahoo_sucks@...&gt; wrote:\n&gt;\n&gt;&gt; On Thu, 6 Feb 2003, J. B. Rainsberger wrote:\n&gt;&gt; \n&gt;&gt;&gt; Pushing every SQL statement you use out to a ResourceBundle (or\nother\n&gt;&gt;&gt; metadata file) is a good idea.\n&gt;&gt; \n&gt;&gt; Eww! I know this tends to be a bit of a personal preference, but I\nfar\n&gt;&gt; prefer to keep my code together when I can. If a statement is used\nin\n&gt;&gt; only one place, keeping it where it&#39;s used makes the code much\neasier to\n&gt;&gt; read, because you don&#39;t have to go chasing off into some other file\nto\n&gt;&gt; find out what SQL statement is being executed.\n&gt;&gt; \n&gt;\n&gt;That&#39;s probably true if the SQL never has to change. If the schema\nchanges,\n&gt;I find it more convenient to go to one known place instead of having\nto\n&gt;search my entire app for possible changes.\n&gt;\n&gt;-- \n&gt;Robert Koss, Ph.D.     | Training, Mentoring, Contract Development\n&gt;Senior Consultant      | Object Oriented Design, C++, Java\n&gt;www.objectmentor.com   | Extreme Programming\n&gt;\n&gt;\n&gt;\n&gt;------------------------ Yahoo! Groups Sponsor\n---------------------~--&gt;\n&gt;Get 128 Bit SSL Encryption!\n&gt;http://us.click.yahoo.com/LIgTpC/vN2EAA/xGHJAA/5cFolB/TM\n&gt;---------------------------------------------------------------------~-\n&gt;\n&gt;\n&gt;To unsubscribe from this group, send an email to:\n&gt;junit-unsubscribe@yahoogroups.com\n&gt; \n&gt;\n&gt;Your use of Yahoo! Groups is subject to\nhttp://docs.yahoo.com/info/terms/\n\n\nJ. B. Rainsberger,\nPresident, Diaspar Software Services\nLet&#39;s write software that people understand.\nhttp://www.diasparsoftware.com/\ntelephone: +1 416 791-8603\nAll correspondence (c) 2002 Diaspar Software Services.\nIf you want to use it, just ask; don&#39;t steal.\n\n\nTo unsubscribe from this group, send an email to:\njunit-unsubscribe@yahoogroups.com\n\n\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service. \n\n---\nOutgoing mail is certified Virus Free.\nChecked by AVG anti-virus system (http://www.grisoft.com).\nVersion: 6.0.438 / Virus Database: 246 - Release Date: 1/7/2003\n \n\n\n", 
    "profile": "jacaetev", 
    "topicId": 6711, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 109352929, 
    "prevInTime": 6905, 
    "contentTrasformed": false, 
    "postDate": "1044650774", 
    "canDelete": false, 
    "nextInTopic": 6907, 
    "prevInTopic": 6904, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwMjA3MTAwMzA4MDY1Ni4wMDZCRkQ5MkBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PDAwMDcwMWMyY2VlOSRmNTAzNmYyMCQ5MTljZDY4ZEBSSElOTz4="
    }
}