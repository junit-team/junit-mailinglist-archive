{
    "numMessagesInTopic": 2, 
    "nextInTime": 4727, 
    "senderId": "EvvHnhYLkUhAj4O4QWN-KdqGLuDi6oBhME_FKxIxdfgCRf9X7l3S09HsBf60hAO0Vss7hDSotxS8A_EIf_jvZm0ToUaXhb9wt12AdElzfV0", 
    "systemMessage": false, 
    "subject": "RE: [junit] EJB testing: ClassCastExceptions thrown by narrow() i\tn ant", 
    "from": "Scott Stirling &lt;sstirling@...&gt;", 
    "authorName": "Scott Stirling", 
    "msgSnippet": "I would suggest using the fork= true attribute on the batchtest task.  If that works, I ll try to explain why. Scott Stirling Macromedia ... From: ejstock To:", 
    "msgId": 4726, 
    "profile": "jrun5", 
    "topicId": 4726, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65616759, 
    "messageBody": "<div id=\"ygrps-yiv-1984680374\">I would suggest using the fork=&quot;true&quot; attribute on the batchtest task.  If that works, I&#39;ll try to explain why.<br/>\n<br/>\nScott Stirling<br/>\nMacromedia<br/>\n<br/>\n-----Original Message-----<br/>\nFrom: ejstock<br/>\nTo: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\nSent: 4/19/2002 10:20 AM<br/>\nSubject: [junit] EJB testing: ClassCastExceptions thrown by narrow() in ant<br/>\n<br/>\nI am getting ClassCastExceptions thrown by calling <br/>\nPortableRemoteObject.narrow() when running my tests as an ant task. <br/>\nI&#39;m using the text only test runner, not the GUI one.<br/>\n<br/>\nThe test is for an EJB and so it&#39;s trying to get a home interface for <br/>\nthe EJB it tests. The problem only occurs when the test runs in ant, <br/>\nnot when I run the test on the command line like so:<br/>\n<br/>\njava -<br/>\nclasspath .&#92;build&#92;classes;.&#92;lib&#92;junit.jar;D:&#92;bea&#92;wlserver&#92;lib&#92;weblogic<br/>\n.jar;.&#92;lib&#92;log4j.jar;  junit.textui.TestRunner <br/>\ncom.pics.nmc2.media.ObjectGroupTest<br/>\n<br/>\nI have read a few postings on this list regarding class loader issues <br/>\nthat at first looked relevant, but in fact they are all specific to <br/>\nthe GUI test runner, or running outside of ant, or maybe both. I <br/>\nshould mention the EJB container is Weblogic 6.1 SP2. I&#39;ve had test <br/>\ncases running on Weblogic 6.x before, but not with ant.<br/>\n<br/>\nMy ant test task in build.xml looks like this:<br/>\n<br/>\n  &lt;target name=&quot;test&quot; depends=&quot;init&quot; &gt;<br/>\n    &lt;junit printsummary=&quot;on&quot;&gt;<br/>\n      &lt;classpath&gt;<br/>\n\t&lt;pathelement location=&quot;${properties_dir}&quot;/&gt;<br/>\n\t&lt;fileset dir=&quot;${weblogic_home}/lib&quot;&gt;<br/>\n          &lt;include name=&quot;weblogic.jar&quot;/&gt;<br/>\n\t&lt;/fileset&gt;<br/>\n        &lt;pathelement location=&quot;${build_dir}/classes&quot;/&gt;<br/>\n        &lt;fileset dir=&quot;lib&quot;&gt;<br/>\n          &lt;include name=&quot;**/*.jar&quot;/&gt;<br/>\n\t&lt;/fileset&gt;<br/>\n\t&lt;fileset dir=&quot;d:&#92;bea&#92;utils&quot;&gt;<br/>\n\t  &lt;include name=&quot;**/*.jar&quot;/&gt;<br/>\n        &lt;/fileset&gt;<br/>\n\t&lt;fileset dir=&quot;${build_dir}&quot;&gt;<br/>\n\t  &lt;include name=&quot;NMC2WebApp.war&quot;/&gt;<br/>\n        &lt;/fileset&gt;<br/>\n      &lt;/classpath&gt;<br/>\n      &lt;formatter type=&quot;plain&quot; /&gt;<br/>\n      &lt;batchtest todir=&quot;${testreports_dir}&quot;&gt;<br/>\n        &lt;fileset dir=&quot;${src_dir}&quot;&gt;<br/>\n\t  &lt;include name=&quot;**/*Test*.java&quot; /&gt;<br/>\n        &lt;/fileset&gt;<br/>\n      &lt;/batchtest&gt;<br/>\n    &lt;/junit&gt;<br/>\n  &lt;/target&gt;<br/>\n<br/>\nSome explanation of classloader issues with respect to running Junit <br/>\nwithin ant would be welcome, even if you don&#39;t know exactly what the <br/>\nproblem is. Does it matter that the stub is loaded by a different <br/>\nclassloader on the server than in the client?<br/>\n<br/>\nI&#39;m using Junit 3.7 and Ant 1.4.1.<br/>\n<br/>\nThanks in advance.<br/>\n<br/>\nEliot Stock<br/>\nPremiere Retial Networks<br/>\nSan Francisco</div>", 
    "prevInTime": 4725, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1019273336", 
    "canDelete": false, 
    "nextInTopic": 4737, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PENCMUZGMEE0NzRBRUE4NEVBMDIwNkQ1QjA1RjZBNENCMDE1QjY0MjVAUzEwMDFFWE0wMi5tYWNyb21lZGlhLmNvbT4="
    }
}