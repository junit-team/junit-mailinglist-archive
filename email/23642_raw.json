{
    "numMessagesInTopic": 13, 
    "nextInTime": 23643, 
    "senderId": "A8Ya5uc6u4-zpvMYAdzM1m4rbG1ctDm2o00Hv4PKAf5oGBtPDTC-PkFP1T_XvrGkC6gdUL4r0ZhSZAbub-3XmmgxTOtIGZGkaUfmq-d6QkY8W42d0Wm3XBA", 
    "systemMessage": false, 
    "subject": "Re: Feature request: @Assumes", 
    "from": "Stephen Connolly &lt;stephen.alan.connolly@...&gt;", 
    "authorName": "Stephen Connolly", 
    "msgSnippet": "... As a proof of concept, implementing as a custom runner is fine, but ultimately it would need some hooks that can feed back to Request.sort(...) as, IIUC,", 
    "msgId": 23642, 
    "rawEmail": "Return-Path: &lt;stephen.alan.connolly@...&gt;\r\nReceived: (qmail 86281 invoked by uid 7800); 14 Sep 2011 20:33:22 -0000\r\nX-Sender: stephen.alan.connolly@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 58864 invoked from network); 14 Sep 2011 20:07:14 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m1.grp.sp2.yahoo.com with QMQP; 14 Sep 2011 20:07:14 -0000\r\nX-Received: from unknown (HELO mail-ww0-f52.google.com) (74.125.82.52)\n  by mta3.grp.sp2.yahoo.com with SMTP; 14 Sep 2011 20:07:13 -0000\r\nX-Received: by wwj40 with SMTP id 40so3032505wwj.9\n        for &lt;junit@yahoogroups.com&gt;; Wed, 14 Sep 2011 13:07:12 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.227.203.194 with SMTP id fj2mr226084wbb.79.1316030832029; Wed,\n 14 Sep 2011 13:07:12 -0700 (PDT)\r\nX-Received: by 10.227.152.73 with HTTP; Wed, 14 Sep 2011 13:07:11 -0700 (PDT)\r\nIn-Reply-To: &lt;CACj8BuOn5eFmNfSxP-RzV3rM331VeD0EHS_fOzwEmPbnjTuU6A@...&gt;\r\nReferences: &lt;CA+nPnMwbfNvxbhqjWVyXW7UDt2VM5TzwWzwAiRJaHkKrnHzmxQ@...&gt;\n\t&lt;CA+nPnMyQPw_hmB5PZjY5tO7LdhSvXJkb7Nn9JFZreB1Vy5P8ow@...&gt;\n\t&lt;CACj8BuOn5eFmNfSxP-RzV3rM331VeD0EHS_fOzwEmPbnjTuU6A@...&gt;\r\nDate: Wed, 14 Sep 2011 21:07:11 +0100\r\nMessage-ID: &lt;CA+nPnMxRzpX1Ych3YhM_H4xz9pCy0DODDjnxM7LLPXTvnrbt6g@...&gt;\r\nTo: &quot;junit@yahoogroups.com&quot; &lt;junit@yahoogroups.com&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Stephen Connolly &lt;stephen.alan.connolly@...&gt;\r\nSubject: Re: Feature request: @Assumes\r\nX-Yahoo-Group-Post: member; u=458231986; y=hAaTHqIigAT46dhwhImyP8UOktL5ks19k9N4z09Jr6bVKhjCeNLhFc5QPhIThw\r\nX-Yahoo-Profile: stephenalanconnolly\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Approved-By: mark_l_salter &lt;marksalter@...&gt; via email; 14 Sep 2011 20:33:22 -0000\r\n\r\nOn Wednesday, 14 September 2011, David Saff wrote:\n\n&gt; Stephen,\n&gt;\n&gt; I can see how this could be useful.  It shouldn&#39;t be too hard to try\n&gt; it out as a custom runner:\n&gt; - subclass BlockJUnit4ClassRunner\n&gt; - override computeTestMethods to order the methods based on assumptions\n&gt; - override methodBlock to notice when tests fail, and use that to mark\n&gt; assumption failures on later tests.\n&gt;\n&gt; Would you be interested in contributing something like this to\n&gt; junit.contrib?\n&gt;\n&gt;\nAs a proof of concept, implementing as a custom runner is fine, but\nultimately it would need some hooks that can feed back to Request.sort(...)\nas, IIUC, that applies after the Runner&#39;s sorting and this would really be\nenforcing restrictions on the final order.\n\nWhere do I git clone and send the pull request for junit.contrib or is that\njust a package space in the standard junit git repo?\n\n-Stephen\n\n\n&gt;   David Saff\n&gt;\n&gt; On Wed, Sep 14, 2011 at 6:02 AM, Stephen Connolly\n&gt; &lt;stephen.alan.connolly@... &lt;javascript:;&gt;&gt; wrote:\n&gt; &gt; Note: I have also posted this to junit-devel@... but\n&gt; &gt; I think that wider input could be beneficial\n&gt; &gt;\n&gt; &gt; Consider the case where you are testing a List class...\n&gt; &gt;\n&gt; &gt; we have\n&gt; &gt;\n&gt; &gt; public class ListTest {\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  public void newListIsEmpty() {\n&gt; &gt;    assertThat(new List().isEmpty(), is(true);\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  public void newListHasSizeZero() {\n&gt; &gt;    assertThat(new List().size(), is(0));\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  public void addPutsAnElementIntoAnEmptyList() {\n&gt; &gt;    List l = new List();\n&gt; &gt;    l.add(new Object());\n&gt; &gt;    assertThat(l.isEmpty(), is(false));\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  public void addIncreasesSizeOfPopulatedListByOne() {\n&gt; &gt;    List l = new List();\n&gt; &gt;    l.add(new Object());\n&gt; &gt;    int s = l.size();\n&gt; &gt;    l.add(new Object());\n&gt; &gt;    assertThat(l.size(), is(s + 1));\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt; }\n&gt; &gt;\n&gt; &gt; We now want to add some tests of the delete functionality... but the\n&gt; &gt; reality is that until/unless some of the preceding tests are passing,\n&gt; &gt; the tests for delete are meaningless. We could have a perfectly\n&gt; &gt; functional List.delete() method but until such time as the above tests\n&gt; &gt; are passing, there is no way to tell that the method does not work.\n&gt; &gt;\n&gt; &gt; Now I could code my tests like such\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  public void deleteIsANoOpOnEmptyList() {\n&gt; &gt;    List l = new List();\n&gt; &gt;    assumeThat(l.isEmpty(), is(true));\n&gt; &gt;    l.delete(new Object());\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt; But all that I am doing is repeating code from the preceding tests,\n&gt; &gt; having changed all those tests&#39; assertThat(...)s into assumeThat(...)s\n&gt; &gt;\n&gt; &gt; That does not seem agile to me, copy & paste & search & replace... ban\n&gt; &gt; code smell there\n&gt; &gt;\n&gt; &gt; I would much rather be able to annotate the tests with an @Assumes\n&gt; &gt; annotation that indicates that the test assumes that the specified\n&gt; &gt; tests are passing, e.g.\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  @Assumes(&quot;newListIsEmpty&quot;)\n&gt; &gt;  public void deleteIsANoOpOnEmptyList() {\n&gt; &gt;    List l = new List();\n&gt; &gt;    l.delete(new Object());\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  @Assumes({&quot;newListIsEmpty&quot;,&quot;addPutsAnElementIntoAnEmptyList&quot;)\n&gt; &gt;  public void deleteRemovesAnElement() {\n&gt; &gt;    List l = new List();\n&gt; &gt;    Object o = new Object();\n&gt; &gt;    l.add(o);\n&gt; &gt;    l.delete(o);\n&gt; &gt;    assertThat(l.isEmpty(), is(true));\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt; In fact in my initial example of tests, there are some additional\n&gt; &gt; assumptions that I didn&#39;t make explicit\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  @Assumes(&quot;newListIsEmpty&quot;)\n&gt; &gt;  public void addPutsAnElementIntoAnEmptyList() {\n&gt; &gt;    ...\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt; and\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  @Assumes({&quot;newListIsEmpty&quot;,&quot;addPutsAnElementIntoAnEmptyList&quot;)\n&gt; &gt;  public void addIncreasesSizeOfPopulatedListByOne() {\n&gt; &gt;    ...\n&gt; &gt;  }\n&gt; &gt;\n&gt; &gt; Now you could get some of this functionality via a TestRule...\n&gt; &gt;\n&gt; &gt; You could watch tests to see if they pass, and skip tests annotated\n&gt; &gt; with the annotation if assumed functionality is failing, but that\n&gt; &gt; would result in sporadic failures of, e.g. deleteRemovesAnElement\n&gt; &gt; because of the failing newListIsEmpty being executed _after_\n&gt; &gt; deleteRemovesAnElement rather than before.\n&gt; &gt;\n&gt; &gt; The simple point is that the test result of deleteRemovesAnElement is\n&gt; &gt; meaningless until its assumptions are true, and while I could code the\n&gt; &gt; assumptions with assumeThat(..)s C&P&S&R is even worse than C&P.\n&gt; &gt;\n&gt; &gt; Another alternative to @Assumes would be to invoke the assumed\n&gt; &gt; method(s) at the start of the test, e.g.\n&gt; &gt;\n&gt; &gt;  @Test\n&gt; &gt;  public void deleteRemovesAnElement() {\n&gt; &gt;    newListIsEmpty(); // verify assumed functionality\n&gt; &gt;    addPutsAnElementIntoAnEmptyList();  // verify assumed functionality\n&gt; &gt;  &gt; ------------------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "stephenalanconnolly", 
    "topicId": 23636, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 458231986, 
    "prevInTime": 23641, 
    "contentTrasformed": false, 
    "postDate": "1316030831", 
    "canDelete": false, 
    "nextInTopic": 23643, 
    "prevInTopic": 23640, 
    "headers": {
        "inReplyToHeader": "PENBQ2o4QnVPbjVlRm1OZlN4UC1SelYzck0zMzFWZUQwRUhTX2ZPendFbVBibmpUdVU2QUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBK25Qbk14UnpwWDFZY2gzWWhNX0g0eHo5cEN5MERPRERqbnhNN0xMUFhUdm5yYnQ2Z0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBK25Qbk13YmZOdnhiaHFqV1Z5WFc3VUR0MlZNNVR6d1d6d0FpUkphSGtLcm5Iem14UUBtYWlsLmdtYWlsLmNvbT4JPENBK25Qbk15UVB3X2htQjVQWmpZNXRPN0xkaFN2WEprYjdObjlKRlpyZUIxVnk1UDhvd0BtYWlsLmdtYWlsLmNvbT4JPENBQ2o4QnVPbjVlRm1OZlN4UC1SelYzck0zMzFWZUQwRUhTX2ZPendFbVBibmpUdVU2QUBtYWlsLmdtYWlsLmNvbT4="
    }
}