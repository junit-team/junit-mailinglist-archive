{
    "numMessagesInTopic": 21, 
    "nextInTime": 20520, 
    "senderId": "64pWFQDMu0qzx3il9F-lhMhC2wWAW4Enav53tEw-rA0Eet4E7rF-4LTmR59lJTZjNI3HI-thCs7qIh647tOwlVxdQMHO-rRxY1zZgUV6", 
    "systemMessage": true, 
    "subject": "Re: What is expected behavior on Assert.assertEquals on Number object?", 
    "from": "&quot;Roger Glover&quot; &lt;glover_roger@...&gt;", 
    "authorName": "Roger Glover", 
    "msgSnippet": "... wrote: On Jun 3, 2008, at 22:41 , Nattapong Sirilappanich wrote: Hi, When i try to make an assertion on Number object, e.g. Double the result always", 
    "msgId": 20519, 
    "rawEmail": "Return-Path: &lt;glover_roger@...&gt;\r\nReceived: (qmail 41611 invoked from network); 5 Jun 2008 22:33:25 -0000\r\nReceived: from unknown (66.218.67.95)\n  by m54.grp.scd.yahoo.com with QMQP; 5 Jun 2008 22:33:25 -0000\r\nReceived: from unknown (HELO n49a.bullet.mail.sp1.yahoo.com) (66.163.168.143)\n  by mta16.grp.scd.yahoo.com with SMTP; 5 Jun 2008 22:33:25 -0000\r\nReceived: from [216.252.122.217] by n49.bullet.mail.sp1.yahoo.com with NNFMP; 05 Jun 2008 22:33:25 -0000\r\nReceived: from [66.218.69.3] by t2.bullet.sp1.yahoo.com with NNFMP; 05 Jun 2008 22:33:25 -0000\r\nReceived: from [66.218.66.86] by t3.bullet.scd.yahoo.com with NNFMP; 05 Jun 2008 22:33:25 -0000\r\nX-Sender: glover_roger@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 74883 invoked from network); 5 Jun 2008 18:43:34 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m55.grp.scd.yahoo.com with QMQP; 5 Jun 2008 18:43:34 -0000\r\nX-Received: from unknown (HELO n31b.bullet.sp1.yahoo.com) (209.131.38.209)\n  by mta18.grp.scd.yahoo.com with SMTP; 5 Jun 2008 18:43:34 -0000\r\nX-Received: from [216.252.122.218] by n31.bullet.sp1.yahoo.com with NNFMP; 05 Jun 2008 18:43:34 -0000\r\nX-Received: from [66.218.69.4] by t3.bullet.sp1.yahoo.com with NNFMP; 05 Jun 2008 18:43:34 -0000\r\nX-Received: from [66.218.67.201] by t4.bullet.scd.yahoo.com with NNFMP; 05 Jun 2008 18:43:34 -0000\r\nDate: Thu, 05 Jun 2008 18:43:33 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;g29c4l+mgfo@...&gt;\r\nIn-Reply-To: &lt;2E1F9FE2-5DA1-4145-8086-7C12A009BFC1@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;Roger Glover&quot; &lt;glover_roger@...&gt;\r\nSubject: Re: What is expected behavior on Assert.assertEquals on Number object?\r\nX-Yahoo-Group-Post: member; u=151020962; y=F-t1m-EKRQxn6t6MBYlBitKlTDtac1nDdiXLGs_DFm4qTZ8SBU2a\r\nX-Yahoo-Profile: glover_roger\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 05 Jun 2008 22:33:22 -0000\r\n\r\n\n--- In junit@yahoogroups.com, &quot;J. B. Rainsberger&quot; &lt;jbrains762@...&gt;\nwrote:\n  On Jun 3, 2008, at 22:41 , Nattapong Sirilappanich wrote:\n  Hi,\n\nWhen i try to make an assertion on Number object, e.g. Double the  \nresult always assertion successful. Even i try to compare by\n\norg.junit.Assert.assertEquals(123456789.345,123456789.34)\n\n  it still success. (I&#39;m expecting failure)\nThis is not a good way to compare floating point numbers. You should\nactually use:\n\nAssert.assertEquals(expected, actual, delta)\n\nwhere expected and actual are as in the form you did use, but there is a\nthird &quot;delta&quot; argument (also a double). This argument provides a\ntolerance value by which to judge &quot;equality&quot;. basically the assertion\nfails if:\n\nMath.abs(expected - actual) &gt; delta\n\nThus, working from your failing example:\n\nAssert.assertEquals(123456789.345, 123456789.34, 0.5);    // PASS\nAssert.assertEquals(123456789.345, 123456789.34, 0.0005); // FAIL\n\nBy the way, this usage really makes the name of the method a misnomer.\nIt should really be called &quot;assertClose&quot; (as in &quot;close, but no cigar&quot;,\nnot &quot;close the door; it&#39;s cold&quot;). But that should be okay if you are\nusing double the way it is meant to be used, because, as the old saying\ngoes, close only counts in horseshoes, hand grenades, and limited\nprecision floating point operations.\n\nIn other words, the idea is that after even a few operations (or even\nafter none in some cases) it is unreasonable to expect floating point\nquantities to be exactly equal to their unlimited precision real number\ncounterparts (even when an exact match exists). So you aim for &quot;close&quot;\ninstead. &quot;How close can you get&quot; is itself a black art that combines\nroughly equal portions of operation counting, number magnitude tracking,\noperation order tracking, and wild-ass guessing.\n\nNow back to the problem at hand. Just for grins I compiled Nattapong&#39;s\noriginal assert under a J2SE 1.4 compiler and it gave a syntax error,\nsaying that essentially that the third double argument was missing. It\nappears that this is one of those rare-but-not-rare-enough cases when\nautoboxing is actually working against you.\n\nAnd now J.B.&#39;s response...\nWeird. assertEquals() appears only to compare the whole parts.\n\npublic class DoubleTest {\n   @Test\n   public void unequalDoubleValueObjectsShouldBeUnequal() {\n     Assert.assertFalse(new Double(3).equals(new Double(4)));\n     Assert.assertFalse(new Double(3.1d).equals(new Double(3.2d)));\n     Assert.assertFalse(new Double(123456789.345d).equals(new\nDouble(123456789.34d)));\nSo far so good...\n     Assert.assertEquals(new Double(123456789.345d), new\nDouble(123456789.34d));\nWhen compiled under J2SE 1.4 the above assertEquals() fails. So, once\nagain, I suspect autoboxing is the culprit. In this case I suspect the\nDoubles are being &quot;unboxed&quot; into longs, since there is a two-long\nassertEquals() but not a two-double assertEquals().\n     Assert.assertEquals(new Double(3.1d), new Double(3.2d));\nSame with the above.\n     Assert.assertEquals(new Double(3), new Double(4));\nSame with the above, but if I am right this one fails (as J.B. noted)\nbecause the\nintegral parts are different, so you get different longs.\n   }\n}\n\nOnly the last assertion fails.\nThis behavior makes me wonder if in Nattapong&#39;s original case the\nprimitive doubles are being boxed into object Doubles which are, in\nturn, being unboxed into primitive longs. If that is not what is\nhappening, something even stranger is going on. Either way, I don&#39;t like\nit.\n\n-- Roger Glover\n     Object Partners, Inc.\n\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "glover_roger", 
    "topicId": 20513, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 151020962, 
    "prevInTime": 20518, 
    "contentTrasformed": false, 
    "postDate": "1212691413", 
    "canDelete": false, 
    "nextInTopic": 20520, 
    "prevInTopic": 20516, 
    "headers": {
        "inReplyToHeader": "PDJFMUY5RkUyLTVEQTEtNDE0NS04MDg2LTdDMTJBMDA5QkZDMUBnbWFpbC5jb20+", 
        "messageIdInHeader": "PGcyOWM0bCttZ2ZvQGVHcm91cHMuY29tPg=="
    }
}