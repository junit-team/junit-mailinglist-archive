{
    "numMessagesInTopic": 21, 
    "nextInTime": 20522, 
    "senderId": "TFk6k0ZDztsPrPMbIgNmrNrpCE7WFu4xRVzVEs2Vtctv6LZokkj7mjHIIMNe-VnTabqiM4jj4KFiORht1UQQCscvYQz192HXb7nXk4dH", 
    "systemMessage": true, 
    "subject": "Re: What is expected behavior on Assert.assertEquals on Number object?", 
    "from": "&quot;Roger Glover&quot; &lt;glover_roger@...&gt;", 
    "authorName": "Roger Glover", 
    "msgSnippet": "Sorry about how hosed my last message looked. I used the new Rich Text Editor (Beta) , which apparently did not play nicely with whatever the moderator was", 
    "msgId": 20521, 
    "rawEmail": "Return-Path: &lt;glover_roger@...&gt;\r\nReceived: (qmail 5404 invoked from network); 6 Jun 2008 11:25:19 -0000\r\nReceived: from unknown (66.218.67.95)\n  by m35.grp.scd.yahoo.com with QMQP; 6 Jun 2008 11:25:19 -0000\r\nReceived: from unknown (HELO n19a.bullet.sp1.yahoo.com) (69.147.64.130)\n  by mta16.grp.scd.yahoo.com with SMTP; 6 Jun 2008 11:25:19 -0000\r\nReceived: from [216.252.122.218] by n19.bullet.sp1.yahoo.com with NNFMP; 06 Jun 2008 11:25:19 -0000\r\nReceived: from [209.73.164.86] by t3.bullet.sp1.yahoo.com with NNFMP; 06 Jun 2008 11:25:19 -0000\r\nReceived: from [66.218.66.89] by t8.bullet.scd.yahoo.com with NNFMP; 06 Jun 2008 11:25:19 -0000\r\nX-Sender: glover_roger@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 78060 invoked from network); 6 Jun 2008 02:40:34 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m41.grp.scd.yahoo.com with QMQP; 6 Jun 2008 02:40:34 -0000\r\nX-Received: from unknown (HELO n41c.bullet.mail.sp1.yahoo.com) (66.163.168.175)\n  by mta17.grp.scd.yahoo.com with SMTP; 6 Jun 2008 02:40:34 -0000\r\nX-Received: from [216.252.122.216] by n41.bullet.mail.sp1.yahoo.com with NNFMP; 06 Jun 2008 02:40:34 -0000\r\nX-Received: from [209.73.164.83] by t1.bullet.sp1.yahoo.com with NNFMP; 06 Jun 2008 02:40:34 -0000\r\nX-Received: from [66.218.67.195] by t7.bullet.scd.yahoo.com with NNFMP; 06 Jun 2008 02:40:34 -0000\r\nDate: Fri, 06 Jun 2008 02:40:32 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;g2a830+9i2m@...&gt;\r\nIn-Reply-To: &lt;g29c4l+mgfo@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;Roger Glover&quot; &lt;glover_roger@...&gt;\r\nSubject: Re: What is expected behavior on Assert.assertEquals on Number object?\r\nX-Yahoo-Group-Post: member; u=151020962; y=88wm-AGAQgDm8m8aBBi1X3b23_JOZ2zud_-dM52H-ytR2VtGEjCn\r\nX-Yahoo-Profile: glover_roger\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 06 Jun 2008 11:25:18 -0000\r\n\r\nSorry about how hosed my last message looked. I used the new &quot;Rich\nText Edi=\r\ntor (Beta)&quot;, which apparently did not play nicely with\nwhatever the moderat=\r\nor was using to review messages and push them\nthrough to the group. Here it=\r\n is again, hopefully in a better format.\n\n--- In junit@yahoogroups.com, &quot;J.=\r\n B. Rainsberger&quot; &lt;jbrains762@&gt; wrote:\n&gt; On Jun 3, 2008, at 22:41 , Nattapon=\r\ng Sirilappanich wrote:\n&gt; &gt; Hi,\n&gt; &gt;\n&gt; &gt; When i try to make an assertion on N=\r\number object, e.g.\n&gt; &gt; Double the result always assertion successful. Even =\r\ni try\n&gt; &gt; to compare by\n&gt; &gt;\n&gt; &gt; org.junit.Assert.assertEquals(123456789.345=\r\n,123456789.34)\n&gt; &gt;\n&gt; &gt; it still success. (I&#39;m expecting failure)\n\nThis is n=\r\not a good way to compare floating point numbers. You should\nactually use:\n\n=\r\nAssert.assertEquals(expected, actual, delta)\n\nwhere &quot;expected&quot; and &quot;actual&quot;=\r\n are as in the form you did use, but\nthere is a third &quot;delta&quot; argument (als=\r\no a double). This argument\nprovides a tolerance value by which to judge &quot;eq=\r\nuality&quot;. Basically the\nassertion fails if:\n\nMath.abs(expected - actual) &gt; d=\r\nelta\n\nThus, working from your failing example and adding the &quot;delta&quot; argume=\r\nnt:\n\nAssert.assertEquals(123456789.345, 123456789.34, 0.5);    // PASS\nAsse=\r\nrt.assertEquals(123456789.345, 123456789.34, 0.0005); // FAIL\n\nBy the way, =\r\nthis usage really makes the name of the method a misnomer.\nIt should really=\r\n be called &quot;assertClose()&quot; (as in &quot;close, but no\ncigar&quot;, not as in &quot;close t=\r\nhe door; it&#39;s cold&quot;). But that should be\nokay if you are using double the w=\r\nay it is meant to be used, because,\nas the old saying goes, &quot;close&quot; only co=\r\nunts in horseshoes, hand\ngrenades, and limited precision floating point ope=\r\nrations.\n\nIn other words, the idea is that after even a few operations (or =\r\neven\nafter no operations in some cases) it is unreasonable to expect\nfloati=\r\nng point quantities to be exactly equal to their unlimited\nprecision real n=\r\number counterparts (even when an exact match exists).\nSo you aim for &quot;close=\r\n&quot; instead. &quot;How close can you get&quot; is itself a\nblack art that combines roug=\r\nhly equal portions of operation counting,\nnumber magnitude tracking, operat=\r\nion order tracking, and wild-ass\nguessing.\n\nNow back to the problem at hand=\r\n. Just for grins I compiled Nattapong&#39;s\noriginal assert under a J2SE 1.4 co=\r\nmpiler and it gave a syntax error,\nsaying that essentially that the third d=\r\nouble argument was missing. It\nappears that this is one of those rare-but-n=\r\not-rare-enough cases when\nautoboxing is actually working against you.\n\nAnd =\r\nnow J.B.&#39;s response...\n&gt; Weird. assertEquals() appears only to compare the =\r\nwhole parts.\n&gt; \n&gt; public class DoubleTest {\n&gt;    @Test\n&gt;    public void une=\r\nqualDoubleValueObjectsShouldBeUnequal() {\n&gt;      Assert.assertFalse(new Dou=\r\nble(3).equals(new Double(4)));\n&gt;      Assert.assertFalse(new Double(3.1d).e=\r\nquals(new Double(3.2d)));\n&gt;      Assert.assertFalse(new Double(123456789.34=\r\n5d).equals(\n&gt;        new Double(123456789.34d)));\n\nSo far so good...\n\n&gt;    =\r\n  Assert.assertEquals(new Double(123456789.345d),\n&gt;        new Double(12345=\r\n6789.34d));\n\nWhen compiled under J2SE 1.4 the above &quot;assertEquals()&quot; fails.=\r\n So,\nonce again, I suspect autoboxing is the culprit. In this case I\nsuspec=\r\nt the Doubles are being &quot;unboxed&quot; into longs, since there is a\ntwo-long &quot;as=\r\nsertEquals()&quot; method but not a two-double &quot;assertEquals()&quot;\nmethod.\n\n&gt;      =\r\nAssert.assertEquals(new Double(3.1d), new Double(3.2d));\n\nSame as with the =\r\nabove.\n\n&gt;      Assert.assertEquals(new Double(3), new Double(4));\n\nSame as =\r\nwith the above, but if I am right this one fails (as J.B.\nnoted) because th=\r\ne integral parts are different, so you get different\nlongs.\n\n&gt;    }\n&gt; }\n&gt; \n=\r\n&gt; Only the last assertion fails.\n\nThis behavior makes me wonder anew about =\r\nin Nattapong&#39;s original case.\nMy best guess is that the primitive doubles a=\r\nre being boxed into\nobject Doubles which are, in turn, being unboxed into p=\r\nrimitive longs\n(to match the two-long overload). Strange but perhaps true. =\r\nIf that is\nnot what is happening, something *even stranger* is going on. Ei=\r\nther\nway, I don&#39;t particularly like it.\n\nBut, truth to tell you really shou=\r\nld be using the three-double\noverload of the &quot;assertEquals()&quot; method. Then =\r\nyou would not be having\nthis problem.\n\n-- Roger Glover\n   Object Partners, =\r\nInc.\n\n\n", 
    "profile": "glover_roger", 
    "topicId": 20513, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 151020962, 
    "prevInTime": 20520, 
    "contentTrasformed": false, 
    "postDate": "1212720032", 
    "canDelete": false, 
    "nextInTopic": 20522, 
    "prevInTopic": 20520, 
    "headers": {
        "inReplyToHeader": "PGcyOWM0bCttZ2ZvQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGcyYTgzMCs5aTJtQGVHcm91cHMuY29tPg=="
    }
}