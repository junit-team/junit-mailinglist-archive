{
    "numMessagesInTopic": 8, 
    "nextInTime": 24715, 
    "senderId": "1tCCboIjtosEMpDvFWwOmW_nJLgneOZA20T2Ste8qScOFmzAy2jpXhyxlIl7jF_fGIOwrM6EaAE5iHy8lridMugQHtake9E5WSg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Fail Tests on write to System.out", 
    "from": "Dawid Weiss &lt;dawid.weiss@...&gt;", 
    "authorName": "Dawid Weiss", 
    "msgSnippet": "Hi Andreas, This is not going to be useful if you re using plain JUnit but you can look at the solution in randomizedtesting -- we use it in Lucene and Solr", 
    "msgId": 24714, 
    "topicId": 24713, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 223548916, 
    "messageBody": "<div id=\"ygrps-yiv-563901427\"><div dir=\"ltr\"><br><div>Hi Andreas,</div><div><br></div><div>This is not going to be useful if you&#39;re using plain JUnit but you can look at the solution in randomizedtesting -- we use it in Lucene and Solr and it works fairly well. </div><div><br></div><div>You do need to have a common superclass or repeat the rule annotation on every class this should be applied to, unfortunately. This is the annotation:</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L206\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L206</a><br></div><div><br></div><div>this annotation is used for suppressing it (for a class):</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L352-L365\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L352-L365</a><br></div><div><br></div><div>and this is rule declaration chain:</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L581\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java#L581</a><br></div><div><br></div><div>The scenario in Lucene is quite complex, for example you want to suppress certain checks on failures (other rules are permitted to write diagnostics to sysout if something fails), but you can look for the inspiration on how it was done here:</div><div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/TestRuleLimitSysouts.java\">https://github.com/apache/lucene-solr/blob/trunk/lucene/test-framework/src/java/org/apache/lucene/util/TestRuleLimitSysouts.java</a><br></div><div><br></div><div>If you peek at the source code and the comments you&#39;ll see the difficulties this entails (early-on stolen references to System.out, running with a security manager, etc.).</div><div><br></div><div>Hope this helps somehow,</div><div>Dawid</div><div><br></div></div><div class=\"ygrps-yiv-563901427gmail_extra\"><br><blockquote><span title=\"qreply\"> <div class=\"ygrps-yiv-563901427gmail_quote\">On Wed, Oct 21, 2015 at 2:07 PM, Andreas Worm <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:andreas.worm@...\">andreas.worm@...</a> [junit] <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-563901427gmail_quote\" style=\"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"background-color:#fff;\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p>Hi,<br>\n<br>\nI am looking for a way to fail unittests when they write to System.out <br>\nor System.err. I found different ways to achieve that and tried a <br>\nsolution with a RunListener, because these can be configured using the <br>\nmaven-surefire-plugin. Now I discovered, that RunListeners can&#39;t really <br>\nfail tests because fail() throws an AssertionException and Exceptions <br>\nremove the RunListener. Is there a better way to discover output?<br>\n<br>\nTo summarize what I want:<br>\n* a way to discover output via System.out without preventing Logger <br>\nfunctionality<br>\n* this way should not involve huge code changes on the testclasses ( <br>\nlike adding TestRules everywhere)<br>\n* all unittests which produced output should be reported as &quot;failing&quot; <br>\nwhen you run with `mvn test`<br>\n<br>\nI tried to answer these questions on SO but got only a few helpful <br>\nresponses, so I thought I ask the specialists here and get more <br>\nopinions. For reference the SO questions:<br>\n* <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/33214683\">http://stackoverflow.com/questions/33214683</a><br>\n* <a rel=\"nofollow\" target=\"_blank\" href=\"http://stackoverflow.com/questions/33207996\">http://stackoverflow.com/questions/33207996</a><br>\n<br>\nAny help on this topic is very appreciated.<br>\n<br>\nRegards<br>\nAndreas Worm<br>\n<br>\n</p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br></span></blockquote></div>\n</div>", 
    "prevInTime": 24713, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1445495053", 
    "canDelete": false, 
    "nextInTopic": 24715, 
    "prevInTopic": 24713, 
    "headers": {
        "inReplyToHeader": "PDU2Mjc3RkVGLjgwMTAzQGhlYWRpc3N1ZS5jb20+", 
        "messageIdInHeader": "PENBTTIxUnQ5NnlhTTQ0ZFFhMEV2a2hRT1Z3NSs9Zm5yMXVVYTFnTDlwWWJneFhiRkFqQUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PDU2Mjc3RkVGLjgwMTAzQGhlYWRpc3N1ZS5jb20+"
    }
}