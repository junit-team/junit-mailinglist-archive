{
    "numMessagesInTopic": 2, 
    "nextInTime": 6094, 
    "senderId": "vGzkpcauCob0TW7k_UWh9eyMaafrYwuYq5LcMGsTU0hVe2qr9NEtOiKnfx1GQKuYOK7ZHGZWyJLWmArMvYovle1tXeOdCztLNcAuxLvpdQ", 
    "systemMessage": false, 
    "subject": "RE: [junit] Security issue while running under Ant", 
    "from": "&quot;Scott Stirling&quot; &lt;scottstirling@...&gt;", 
    "authorName": "Scott Stirling", 
    "msgSnippet": "This is more of an Ant question.  The JUnit test runner in Ant is wholly a product of the Ant developers.  Not that there s anything wrong with it -- it s just", 
    "msgId": 6093, 
    "profile": "jrun5", 
    "topicId": 6071, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 112036634, 
    "messageBody": "<div id=\"ygrps-yiv-1657045684\">This is more of an Ant question.  The JUnit test runner in Ant is wholly<br/>\na product of the Ant developers.  Not that there&#39;s anything wrong with<br/>\nit -- it&#39;s just a different beast that doesn&#39;t extend the JUnit<br/>\nframework test runners.<br/>\n<br/>\nI use &lt;sysproperty&gt; instead of &lt;jvmarg&gt;&#39;s.  Try this just for the heck<br/>\nof it:<br/>\n&lt;sysproperty key=&quot;java.security.policy&quot;<br/>\nvalue=&quot;${resources.dir}/test/security.policy&quot; /&gt;<br/>\n<br/>\nThis &quot;config/ejb.properties&quot; you mentioned -- that&#39;s not an Ant or a<br/>\nJUnit thing, so it must be something from your environment or one of<br/>\nyour tools.  As to why JUnit is looking for a security policy under<br/>\n&quot;config,&quot; this also seems something specific to your tools or<br/>\nenvironment.  For instance, the default location for a security policy<br/>\nin the JDK is $JAVA_HOME/jre/lib/security.<br/>\n<br/>\nScott Stirling<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; -----Original Message-----<br/>\n&gt; From: craigsdickson [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:craigsdickson@...\">craigsdickson@...</a>] <br/>\n&gt; Sent: Thursday, October 31, 2002 11:16 AM<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; Subject: [junit] Security issue while running under Ant<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; During one of my unit tests, I attempt to make a connection via JNDI <br/>\n&gt; to an EJB.<br/>\n&gt; <br/>\n&gt; In my &lt;classpath&gt; element, I have a directory that contains a <br/>\n&gt; jndi.properties file and I use the no arg constructor when creating <br/>\n&gt; an InitialContext.<br/>\n&gt; <br/>\n&gt; The test fails and looking at the stack trace I see that as part of <br/>\n&gt; the no arg constructor call, it is attempting to find a <br/>\n&gt; security.policy file. As jvmargs I have turned on the security <br/>\n&gt; manager and also specified the security policy location. However, it <br/>\n&gt; is looking for it in a completely different spot. If I remove those <br/>\n&gt; jvmargs, I get the exact same result - it is almost like JUnit is <br/>\n&gt; using its own SecurityManger or something. It is always looking for <br/>\n&gt; the security policy file under config/security.policy no matter what <br/>\n&gt; I do.<br/>\n&gt; <br/>\n&gt; Also in an additional stack trace, it is looking for a file called <br/>\n&gt; config/ejb.properties - I have no idea what that file is for.<br/>\n&gt; <br/>\n&gt; When I execute the tests from the command line, they run perfectly.<br/>\n&gt; <br/>\n&gt; Here is the ant task I am using to run JUnit.<br/>\n&gt; <br/>\n&gt; &lt;target name=&quot;test&quot;&gt;<br/>\n&gt;   &lt;taskdef name=&quot;junit&quot; <br/>\n&gt; classname=&quot;org.apache.tools.ant.taskdefs.optional.junit.JUnitTask&quot; <br/>\n&gt; classpathref=&quot;taskdef.classpath&quot;/&gt;<br/>\n&gt; <br/>\n&gt;   &lt;junit printsummary=&quot;yes&quot; fork=&quot;true&quot;&gt;<br/>\n&gt;     &lt;classpath refid=&quot;test.classpath&quot;/&gt;<br/>\n&gt;     &lt;formatter type=&quot;xml&quot;/&gt;<br/>\n&gt;     &lt;!--&lt;jvmarg value=&quot;-Djava.security.manager&quot;/&gt;--&gt;<br/>\n&gt;     &lt;!--&lt;jvmarg value=&quot;- <br/>\n&gt; Djava.security.policy=${resources.dir}/test/security.policy&quot;/&gt;--&gt;<br/>\n&gt; <br/>\n&gt;     &lt;batchtest&gt;<br/>\n&gt;       &lt;fileset dir=&quot;${build.dir.classes}&quot; <br/>\n&gt; includes=&quot;test/**/*Test.class&quot;/&gt;<br/>\n&gt;     &lt;/batchtest&gt;<br/>\n&gt;   &lt;/junit&gt;<br/>\n&gt; &lt;/target&gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; I know there are classpath issues with Junit and ant, but I am not <br/>\n&gt; sure they apply here since JUnit us actually running and then failing <br/>\n&gt; the tests.<br/>\n&gt; <br/>\n&gt; Anyone got any suggestions?<br/>\n&gt; <br/>\n&gt; Thanks,<br/>\n&gt; Craig </span></blockquote></div>", 
    "prevInTime": 6092, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1036366989", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 6071, 
    "headers": {
        "inReplyToHeader": "PGFwcmwwMSthbmY3QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDAwMDAwMWMyODM5MiRjNzI3NzE3MCQwNTAxYThjMEBqYXZhbGFwdG9wPg=="
    }
}