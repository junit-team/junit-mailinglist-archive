{
    "numMessagesInTopic": 39, 
    "nextInTime": 20532, 
    "senderId": "tqV3BQzi-dYzglsR9j92PNQ3FkyRknqao9As1p8SZy_75FGsUNG5lnawLfMvuuIZE58LcC1SZUViKUPGSzI2ngeau-sMLUrxLfbaV78", 
    "systemMessage": true, 
    "subject": "A case for adding logging of assertions to junit", 
    "from": "&quot;Phil Surette&quot; &lt;philsurette@...&gt;", 
    "authorName": "Phil Surette", 
    "msgSnippet": "I d like to make a case for adding logging of assertions into junit. I ve been using junit for many years, and something that I ve found both for myself and", 
    "msgId": 20531, 
    "rawEmail": "Return-Path: &lt;philsurette@...&gt;\r\nReceived: (qmail 19091 invoked from network); 9 Jun 2008 18:15:49 -0000\r\nReceived: from unknown (66.218.67.95)\n  by m36.grp.scd.yahoo.com with QMQP; 9 Jun 2008 18:15:49 -0000\r\nReceived: from unknown (HELO n35d.bullet.mail.sp1.yahoo.com) (66.163.168.189)\n  by mta16.grp.scd.yahoo.com with SMTP; 9 Jun 2008 18:15:49 -0000\r\nReceived: from [216.252.122.217] by n35.bullet.mail.sp1.yahoo.com with NNFMP; 09 Jun 2008 18:15:49 -0000\r\nReceived: from [66.218.69.4] by t2.bullet.sp1.yahoo.com with NNFMP; 09 Jun 2008 18:15:49 -0000\r\nReceived: from [66.218.66.83] by t4.bullet.scd.yahoo.com with NNFMP; 09 Jun 2008 18:15:48 -0000\r\nX-Sender: philsurette@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 19108 invoked from network); 9 Jun 2008 11:23:56 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m49.grp.scd.yahoo.com with QMQP; 9 Jun 2008 11:23:56 -0000\r\nX-Received: from unknown (HELO n11d.bullet.scd.yahoo.com) (66.218.67.60)\n  by mta17.grp.scd.yahoo.com with SMTP; 9 Jun 2008 11:23:56 -0000\r\nX-Received: from [66.218.69.2] by n22.bullet.scd.yahoo.com with NNFMP; 09 Jun 2008 11:23:56 -0000\r\nX-Received: from [66.218.66.90] by t2.bullet.scd.yahoo.com with NNFMP; 09 Jun 2008 11:23:56 -0000\r\nDate: Mon, 09 Jun 2008 11:23:56 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;g2j3sc+28sm@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;Phil Surette&quot; &lt;philsurette@...&gt;\r\nSubject: A case for adding logging of assertions to junit\r\nX-Yahoo-Group-Post: member; u=100046987; y=1d2h3NuNyFBHT6yNzBxRUltQuLwD6-BWtZ5KvfIjsAxp6pMcOeA\r\nX-Yahoo-Profile: PhilSurette\r\nX-eGroups-Approved-By: mark_l_salter &lt;marksalter@...&gt; via web; 09 Jun 2008 18:15:47 -0000\r\n\r\nI&#39;d like to make a case for adding logging of assertions into junit.\nI&#39;ve b=\r\neen using junit for many years, and something that I&#39;ve found\nboth for myse=\r\nlf and for people who I&#39;ve mentored in XP practices is\nthat it is often hel=\r\npful to get warm fuzzy feedback that your tests\nare running and asserting w=\r\nhat you think they are asserting. \n\nI notice that I&#39;m not alone in this; I =\r\nsee there are several threads\nwhere people were looking for this feature\n(h=\r\nttp://tech.groups.yahoo.com/group/junit/message/17845 &quot;how to log\njunit tes=\r\nts&quot;, http://tech.groups.yahoo.com/group/junit/message/18762\n&quot;junit 4 & logg=\r\ning&quot;,\nhttp://tech.groups.yahoo.com/group/junit/message/12000 &quot;Log4J Logging=\r\n\nin JUnit&quot;)\n\nConsider the following concocted unit test. It is not the purp=\r\nose of\nthis test case to demonstrate good test case design ;)\n\n     1\tpubli=\r\nc class MyTest extends junit.framework.TestCase{\n     2\t    List&lt;Map&gt;; mapL=\r\nist;\n     3\t    \n     4\t    protected void setUp() throws Exception {\n     =\r\n5\t        //create some silly data\n     6\t        Map map1 =3D new HashMap(=\r\n);\n     7\t        map1.put(&quot;id&quot;, &quot;vladimir&quot;);\n     8\t        Map map2 =3D n=\r\new HashMap();\n     9\t        map2.put(&quot;id&quot;, &quot;estragon&quot;);\n    10\t        Map=\r\n map3 =3D new HashMap();\n    11\t        //might have to wait for a while fo=\r\nr this one :)\n    12\t        map3.put(&quot;id&quot;, &quot;godot&quot;);\n    13\t        mapLis=\r\nt =3D new ArrayList();\n    14\t        mapList.add(map1);\n    15\t        map=\r\nList.add(map2);\n    16\t        mapList.add(map3);\n    17\t    }\n    18\t\n    =\r\n19\t    public void testMapIds(){\n    20\t        assertTrue(&quot;mapList has con=\r\ntent&quot;, mapList.size() &gt; 0);\n    21\t        for (Map map: mapList){\n    22\t =\r\n           assertNotNull(&quot;map has id field&quot;, map.get(&quot;id&quot;));\n    23\t       =\r\n }\n    24\t    }\n    25\t    \n    26\t    public void testIdFormat(){\n    27\t =\r\n       //at some point this will test that all ids are\nlowercase...\n    28\t=\r\n    }\n    29\t    \n    30\t    public void testIdLengths(){\n    31\t        as=\r\nsertTrue(&quot;mapList has content&quot;, mapList.size() &gt; 0);\n    32\t        for (Ma=\r\np map: mapList){\n    33\t            String id =3D (String)map.get(&quot;id&quot;);\n  =\r\n  34\t            assertTrue(&quot;id &quot;+id+&quot; at least 8 characters long&quot;,\nid.leng=\r\nth() &gt;=3D8);\n    35\t        }\n    36\t    }\n    37\t}\n\nWhat I would like to b=\r\ne able to do is to turn on some kind of\nassertion logging that would allow =\r\nme to see output such as the following:\n(Note that this output was generate=\r\nd using my own tweaked\nversion of junit that uses log4j logging categories =\r\nfor\nenabling/disabling both assertion logging and test summary logging):\n\nI=\r\nNFO  junit.echo.run.start - __BEGIN MyClassTest.testMapIds__\nDEBUG junit.ec=\r\nho.assertTrue - (passed) mapList has content \nDEBUG junit.echo.assertNotNul=\r\nl - (passed) map has id field vladimir\nDEBUG junit.echo.assertNotNull - (pa=\r\nssed) map has id field estragon\nDEBUG junit.echo.assertNotNull - (passed) m=\r\nap has id field godot\nINFO  junit.echo.run.summary - __SUMMARY MyClassTest.=\r\ntestMapIds__ (4\nasserts)\nINFO  junit.echo.run.start - __BEGIN MyClassTest.t=\r\nestIdFormat__\nWARN  junit.echo.run.summary - __SUMMARY MyClassTest.testIdFo=\r\nrmat__ &lt;a\nid=3D&quot;bogus&quot;&gt;&lt;/a&gt;(???no asserts???)\nINFO  junit.echo.run.start - =\r\n__BEGIN MyClassTest.testIdLengths__\nDEBUG junit.echo.assertTrue - (passed) =\r\nmapList has content\nDEBUG junit.echo.assertTrue - (passed) id vladimir at l=\r\neast 8\ncharacters long\nDEBUG junit.echo.assertTrue - (passed) id estragon a=\r\nt least 8\ncharacters long\nDEBUG junit.echo.assertTrue - (FAILED) id godot a=\r\nt least 8 characters long\nWARN  junit.echo.run.summary - __SUMMARY MyClassT=\r\nest.testIdLengths__\n(4 asserts)  ASSERTION FAILED id godot at least 8 chara=\r\ncters long\n\nBeing able to see output like this has a number of benefits suc=\r\nh as\n\n1) eliminating redundant logging statements - Many logging statements=\r\n\nin a JUnit test case simply output information that you&#39;ve already\ntold JU=\r\nnit about in your assertions. Developers often put these in as\na &#39;sanity ch=\r\neck&#39; to verify that the test is doing what they expected.\nFor example: beca=\r\nuse on lines such as line 22 I can see the toString\nof the object that is n=\r\not null, I get a warm fuzzy feeling that the\ntest is sane when I look at th=\r\ne logged results. I&#39;ve noticed that when\ndevelopers write their tests they =\r\noften add log statements or\nSystem.outs to provide them this warm fuzzy fee=\r\nling (often deleting\nthe same logging when the test is complete - and putti=\r\nng them back in\nwhen debugging test failures)\n\n2) improving assertion messa=\r\nges - it&#39;s often the case that the\nfirst time you see the message for an as=\r\nsertion will be when the\nassertion fails, which may not happen until you ru=\r\nn a regression test\nmany moons after you coded the test.  Unless you see th=\r\ne message\ndisplayed when you are developing the test, you won&#39;t realize tha=\r\nt the\nmessage - if you provided one - is not be very helpful. Better\nassert=\r\nion messages also help to communicate to a developer what the\npoint of the =\r\nassertion is both when it fails and when reading the test.\n\n3) see finer-gr=\r\nain test results. Every assertion is a mini-test on its\nown, but JUnit thes=\r\ne mini-tests are invisible until they fail. \nOf course, most of the time th=\r\nat&#39;s the behaviour you want. But\nwhen you&#39;re developing a test or debugging=\r\n a test failure, it&#39;s\ngreat to see what these smaller tests are doing.\n\n4) =\r\nby making logging easy, it can help to avoid the\nusing-system-outs-instead-=\r\nof-asserts syndrome, where new junit test\nwriters will write &quot;test cases&quot; t=\r\nhat actually just write a bunch of\nstuff to the console that the test write=\r\nr then eyeballs for expected\nresults\n\nNotice that in the output above, ther=\r\ne are also &#39;summary&#39; lines which\nshow how many assertions were made in a pa=\r\nrticular test. These are\nsomewhat tangential to the main thread of this pos=\r\nt, but it&#39;s nice to\nbe able to know how many assertions occur in a test cas=\r\ne if only to\nidentify when a test case is written that never actually makes=\r\n an\nassertion - which is often a bad smell in a test case. It&#39;s also nice\nw=\r\nhen there is a test failure during a build run to see in a log the\nstart of=\r\n the test case and the assertions that passed before the\nfailure occurred.\n=\r\n\nThere are some problems with logging assertions that I have encountered:\n\n=\r\n1) if iterating over a collection and asserting each element, your log\ncan =\r\nbe overwhelmed. Maybe it would be useful to have some way of\nhinting that a=\r\n particular assertion should not create notifications;\nmaybe not.\n\n2) the i=\r\nmplementation I wrote creates a dependency on log4j (perhaps\nthis could be =\r\navoided by using a notification mechanism and shipping a\nseparate component=\r\n that listens for logging notifications and logs them)\n\nBTW, From my own ex=\r\nperience in instrumenting junit 3.8.1 \n(some time ago) I found that it is n=\r\not a trivial thing to modify \njunit to do this kind of logging. For instanc=\r\ne, in my\nown implementation I managed to confuse junit so it no longer repo=\r\nrts\njunit failures differently than errors. It is a\nsignificant effort to d=\r\no this badly, and much more effort to do it\nwell ;).\n\nIs there any appetite=\r\n out there for adding assertion logging (or\nassertion notification) into th=\r\ne junit 4 framework? I would be\nhappy to do the work if I thought it would =\r\nbe accepted into the\nmain junit distribution. Or maybe this capability alre=\r\nady exists\nin some way in junit 4 that I am not aware of?\n\n\n", 
    "profile": "PhilSurette", 
    "topicId": 20531, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 100046987, 
    "prevInTime": 20530, 
    "contentTrasformed": false, 
    "postDate": "1213010636", 
    "canDelete": false, 
    "nextInTopic": 20533, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PGcyajNzYysyOHNtQGVHcm91cHMuY29tPg=="
    }
}