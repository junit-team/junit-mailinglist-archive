{
    "numMessagesInTopic": 12, 
    "nextInTime": 18574, 
    "senderId": "fCdfdmplKbxzndatuXAOPS74kcUgfc4CvPZjime6MSNoOAiEqPV5E-g36Tm1yj6itSVFCk_IgI5yyhrNb_TGHA", 
    "systemMessage": true, 
    "subject": "Re: [junit] Test a remote server", 
    "from": "andrew.p.mcdonagh@...", 
    "authorName": "andrew.p.mcdonagh@gsk.com", 
    "msgSnippet": "Hi, So I m still not sure if you mean you want to Unit test or System test, using the JUnit framework. I m going to show how I would   Unit Test    the code,", 
    "msgId": 18573, 
    "rawEmail": "Return-Path: &lt;andrew.p.mcdonagh@...&gt;\r\nReceived: (qmail 90721 invoked from network); 22 Dec 2006 14:14:29 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m24.grp.scd.yahoo.com with QMQP; 22 Dec 2006 14:14:29 -0000\r\nReceived: from unknown (HELO n13b.bullet.sp1.yahoo.com) (69.147.64.113)\n  by mta2.grp.scd.yahoo.com with SMTP; 22 Dec 2006 14:14:24 -0000\r\nReceived: from [216.252.122.216] by n13.bullet.sp1.yahoo.com with NNFMP; 22 Dec 2006 14:13:42 -0000\r\nReceived: from [66.218.69.2] by t1.bullet.sp1.yahoo.com with NNFMP; 22 Dec 2006 14:13:42 -0000\r\nReceived: from [66.218.66.79] by t2.bullet.scd.yahoo.com with NNFMP; 22 Dec 2006 14:13:41 -0000\r\nX-Sender: andrew.p.mcdonagh@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 58338 invoked from network); 19 Dec 2006 11:23:37 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m38.grp.scd.yahoo.com with QMQP; 19 Dec 2006 11:23:37 -0000\r\nReceived: from unknown (HELO exprod6og53.obsmtp.com) (64.18.1.187)\n  by mta1.grp.scd.yahoo.com with SMTP; 19 Dec 2006 11:23:37 -0000\r\nReceived: from source ([198.28.92.43]) (using TLSv1) by exprod6ob53.postini.com ([64.18.5.12]) with SMTP;\n\tTue, 19 Dec 2006 03:22:35 PST\r\nReceived: from stvsasmtp03.ggr.co.uk ([147.184.2.37])\n\tby stvsfimr001.ggr.co.uk  with ESMTP id kBJBMMu2026813\n\t(using TLSv1/SSLv3 with cipher EDH-RSA-DES-CBC3-SHA (168 bits) verified NO)\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 19 Dec 2006 11:22:23 GMT\r\nReceived: from ukz1098.wmservice.corpnet1.com (ukz1098.ggr.co.uk [147.184.4.17])\n\tby stvsasmtp03.ggr.co.uk (Switch-3.1.9/Switch-3.1.9) with ESMTP id kBJ9cVdo003259\n\tfor &lt;junit@yahoogroups.com&gt;; Tue, 19 Dec 2006 11:22:34 GMT\r\nReceived: from 147.184.2.6 by ukz1098.wmservice.corpnet1.com with ESMTP\n (Tumbleweed Email Firewall SMTP Relay (Email Firewall v6.2.2)); Tue, 19\n Dec 2006 11:22:27 -0000\r\nX-Server-Uuid: F2BA79E1-3D59-4AFB-9C95-7A3794F59766\r\nReceived: from stvsnim001.sb.com (stvsnim001.sb.com [147.184.5.110]) by\n stvsasmtp01.ggr.co.uk (Switch-3.1.9/Switch-3.1.9) with ESMTP id\n kBJBMRxp025148 for &lt;junit@yahoogroups.com&gt;; Tue, 19 Dec 2006 11:22:27\n GMT\r\nIn-Reply-To: &lt;20061219064328.46877.qmail@...&gt;\r\nTo: junit@yahoogroups.com\r\nMIME-Version: 1.0\r\nX-Mailer: Lotus Notes Release 6.0 September 26, 2002\r\nMessage-ID: &lt;OF5DC72654.018D0236-ON80257249.003E6383-80257249.003E7BB3@...&gt;\r\nDate: Tue, 19 Dec 2006 11:22:25 +0000\r\nX-MIMETrack: Serialize by Router on STVSNIM001/Servers/GSK(Release\n 6.5.4FP2 HF463|May 25, 2006) at 19/12/2006 11:22:27, Serialize complete\n at 19/12/2006 11:22:27\r\nX-WSS-ID: 699914F93501123793-01-01\r\nX-eGroups-Msg-Info: 2:2:2:0\r\nFrom: andrew.p.mcdonagh@...\r\nSubject: Re: [junit] Test a remote server\r\nX-Yahoo-Group-Post: member; u=233879428; y=eiP7wXnSZ-LQ-EyV6ChmBuOFdA0S2SjYgG-Zc0HAhcsDP0hd-MkeQw\r\nX-Yahoo-Profile: andy_ipaccess\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nX-Yahoo-Marked-Not-Spam: \r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: mark_l_salter &lt;marksalter@...&gt; via web; 22 Dec 2006 14:13:39 -0000\r\n\r\nHi,\n\nSo I&#39;m still not sure if you mean you want to Unit test or System test, \nusing the JUnit framework.\n\nI&#39;m going to show how I would   Unit Test    the code, using JUnit.....\n\n\nThe code as it stands, makes unit testing difficult because of the use of \nSingletons, static methods and raw Corba or RMi objects.  So I&#39;m going to \nrefactor it somewhat to make it testable.  Making it testable usually \nmakes the design more flexible, finer grained and loosely coupled - all \ngood things.\n\nFirst step - move the property setting code into its own class - then test \nit there instead of inside the main() method.  This is because the main() \nmethod has calls to a singleton and creates CORBA objects, which I can&#39;t \neasily get around, as this code is inside the static &#39;main()&#39; method.  If \nthis code lived inside an instance method of Server, then I could inject a \nmock object for these.\n\nSo, here&#39;s the main method, with the MTT Host and UUID property setting \ncode moved into a new class. The new class&#39;s method also only knows about \nnormal Java classes (InetAddress) instead of being coupled to the VestUUID \nclass - this makes unit testing really easy!!!!\n\n\n public static void main(String[] args) {\n    if (args.length &gt;= 1) {\n      try {\n        // set the initial environment\n        AnotherServer.getInstance().setEnvironment();\n\n        Server obj = Server.getInstance();\n\n        _serverUUID = new VespUuid(args[0]);\n\n        InetAddress inetAddress = _serverUUID.getInetAddress();\n        SystemPropertyConfigurator.setMttHostProperty(inetAddress, \nServer._serverUUID.getPort());\n\n        if (args.length &gt;= 2) {\n          SystemPropertyConfigurator.setOrbUuidProperty(args[1]);\n        }\n      } catch (Exception e) {\n        // todo...\n        throw new RuntimeException(e);\n      }\n    }\n  }\n\n\nHere&#39;s the new class......(as it currently stands)\n\n\nimport java.net.InetAddress;\n\npublic class SystemPropertyConfigurator {\n\n  static void setMttHostProperty(InetAddress inetAddress, String port) {\n    StringBuffer sb = new StringBuffer(inetAddress.toString());\n    sb.delete(0, 1);\n    sb.append(&quot;:&quot;);\n    sb.append(port);\n \n    String sInetAddress = sb.toString();\n    System.setProperty(VespConfigParams.MTT_INSTANCE_HOST_PROPERTY, \nsInetAddress);\n  }\n\n\n\n  static void setOrbUuidProperty(String uuid) {\n    System.setProperty(VespConfigParams.ORB_UUID_PROPERTY, uuid);\n  }\n \n}\n\n\n\n\nAnd now here&#39;s its unit test!!!!!!!!!!! (these run and pass in my eclipse)\n\n\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\nimport junit.framework.TestCase;\n\npublic class SystemPropertyConfiguratorTest extends TestCase {\n\n  public void testMttHostPropertySetWithoutFirstLetter() throws \nUnknownHostException {\n    InetAddress address = InetAddress.getByName(&quot;localhost&quot;);\n\n    SystemPropertyConfigurator.setMttHostProperty(address, &quot;8080&quot;);\n\n    String actualProperty = \nSystem.getProperty(VespConfigParams.MTT_INSTANCE_HOST_PROPERTY);\n \n    String expectedProperty = &quot;ocalhost/127.0.0.1:8080&quot;;\n \n    assertNotNull(&quot;Property not found!&quot;, actualProperty);\n    assertEquals(&quot;Wrong property value!&quot;, expectedProperty, \nactualProperty);\n  }\n \n \n public void testOrbUuidPropertySet() {\n   SystemPropertyConfigurator.setOrbUuidProperty(&quot;a UUID!&quot;);\n \n   String actualProperty = \nSystem.getProperty(VespConfigParams.ORB_UUID_PROPERTY);\n \n   assertNotNull(&quot;Property not found!&quot;, actualProperty);\n   assertEquals(&quot;Wrong property value!&quot;, &quot;a UUID!&quot;, actualProperty);\n }\n \n}\n\n\n\n\nNow, as things stand, I may decide to not unit test the &#39;main()&#39; method in \nServer class at all, as all its doing is calling others to do things, I \nmight rely upon the normal System and integeration tests to test it.  Or I \nmay decide to refactor the Server class as well, to allow me to make the \nmain() method more testable (which will involve similar techniques as I&#39;ve \nshown here).  The choice comes down as always to one of time vs payback. \n\nHopefully this is enough to get you started in thinking baout how to \nchange your design slightly, to enable unit testing of the code, without \nhaving to have real corba, networks, files, dbs, etc around.\n\nFeel free to ask for more help...\n\nAndrew\n\n\n\n\n\n\n&quot;avinash anand&quot; &lt;avinash_anand@...&gt; \nSent by: junit@yahoogroups.com\n15-Dec-2006 14:23\nPlease respond to junit@yahoogroups.com\n\n \nTo\njunit@yahoogroups.com\ncc\n\nSubject\nRe: [junit] Test a remote server\n\n\n\n\n\n\nHi \nPosting the real .java file would not be possible for me but I am writting \na sample java file which will be doing the same (You can say its a \nprototype of it.)\n\nclass server{\nprivate DBConnection _dbconnectoin;\nprivate server _serverinstance = null;\nprivate static VespAlarmService _alarmService;\nprivate static VespUuid _serverUUID;\nprivate server(){\n_alarmService = VespAlarmServiceImpl.getInstance();\n}\npublic static server getInstance(){\nif (null == _servernstance){\n_serverinstance = new server(); \n}\nreturn _serverinstance;\n}\npublic static void main(String[] args){ \nif (args.length &gt;= 1){\ntry {\n//set the initial environment\nAnotherServer.getInstance().setEnvironment();\nserver obj = server.getInstance();\n_serverUUID = new VespUuid(args[0]);\nStringBuffer sb = new \nStringBuffer(_serverUUID.getInetAddress().toString());\nsb.delete(0, 1);\nsb.append(&quot;:&quot;);\nsb.append(_serverUUID.getPort());\nString sInetAddress = sb.toString();\nSystem.setProperty(VespConfigParams.MTT_INSTANCE_HOST_PROPERTY, \nsInetAddress);\nif(args.length &gt;= 2) { \nSystem.setProperty(VespConfigParams.ORB_UUID_PROPERTY, args[1]);\n}\nvoid startserver ()\n{\n}\nvoid stopserver()\n{\n}\nvoid isserverready()\n{\n}\nvoid generatevespAlarm()\n{\n} \n}\n\nThis is how the main class looks. There are many other supporting JAVA \nfiles for this main server. It uses a JNI layer to talk to the native \ncode. Which is implemented elesewhere.\n\nFor it to run in the actul enviroment, it uses a wrapper .exe which calls \nan xml file where all the server properties are listed in the main method \nthe location of .class files are specified which are already compiled and \nput in the java&#92;lib folder in the form of .jar. Here is the snippet of xml \nfile where the exe tries to read it.\n\n&lt;stringProperty property=&quot;jloader.server.main.class&quot; displayName=&quot;Main \nclass&quot; default=&quot;com/xyz/server/testing&quot; enabled=&quot;false&quot; advanced=&quot;true&quot; /&gt;\n\nWhat I am trying is to write a JUnit test suite for this Java based \nserver, which will be running in the form of an .exe. And my test cases \nwill be running in eclipse.\n\nHope the entire thing might make the picture a bit clear. \n\nThanks\nAvinash\n\n----- Original Message ----\nFrom: &quot;andrew.p.mcdonagh@...&quot; &lt;andrew.p.mcdonagh@...&gt;\nTo: junit@yahoogroups.com\nSent: Friday, 15 December, 2006 7:25:14 PM\nSubject: Re: [junit] Test a remote server\n\nHi,\n\nNot sure why your Java app does not use Java&#39;s corba ability (a good Java \nORB being http://www.jacorb. org/ ), instead of JNI...\n\nAnyway, onto your real question, how do I test the code that is dependant \nupon the other servers?\n\nAs you are asking on the JUnit list I take it you mean Unit test?\nNot System or Integration testing?\n\nIf so, then you will find unit testing much simpler and (imo) better, if \nnone of your unit tests need to access any file, network, database or UI. \nThis means they run very fast. Once you figure out how to do them, you \nshould be able to write lots of them , quickly too.\n\nWe could just give you some simple examples, but I tend to find it better \nto show you how to unit test one of your classes that depend on corba or \nsome other system, by using one of your real classes. So, please post \n(just one) class and we&#39;ll knock up a unit test for it.\n\nRegards\n\nAndrew\n\n&quot;avinash anand&quot; &lt;avinash_anand@ yahoo.co. uk&gt; \nSent by: junit@yahoogroups. com\n15-Dec-2006 09:04\nPlease respond to junit@yahoogroups. com\n\nTo\njunit@yahoogroups. com\ncc\n\nSubject\n[junit] Test a remote server\n\nHi Group\nGreetings to all. These days I am writting test suit for a CORBA CRM. Let \nme first introduce the system.\n\nThere is a central ORB server and many other servers which talk to each \nother through vesp. ORB being the central one. Entire code base is in C++. \n\nI have to test a new server introduced in the system which is written in \nJava. This new server talks to the rest through JNI. As a matter of Fact \nnone of the servers can run independently, they neccesirily have to log \ninto the central kit and report to the the central ORB server. After \nvalidation stuff the server starts working.\n\nEven this new Java based server uses an executable file to work \n(Jloader.exe written in c++)\n\nThis .exe loads various .dll files in the system and in its main method \ncalls the compiled .class files. This is the way how system functions.\n\nMy problem is that when I will write a JUnit test case in IDE (eclipse) \nwhich would operate on the actual code which has 99% dependency and cannot \n\nbe tested isolated. Is there any way to test this server code while it is \nworking under the live system and the test suite running in the eclipse \nIDE.\n\nHELP !!!\n\nThanks\nAvinash\n\n____________ _________ _________ _________ _________ _________ _ \nNow you can scan emails quickly with a reading pane. Get the new Yahoo! \nMail. http://uk.docs. yahoo.com/ nowyoucan. html\n\n[Non-text portions of this message have been removed]\n\n[Non-text portions of this message have been removed]\n\n\n\n\n__________________________________________________________ \nAll new Yahoo! Mail &quot;The new Interface is stunning in its simplicity and \nease of use.&quot; - PC Magazine \nhttp://uk.docs.yahoo.com/nowyoucan.html\n\n[Non-text portions of this message have been removed]\n\n \n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "andy_ipaccess", 
    "topicId": 18546, 
    "spamInfo": {
        "reason": "2", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 233879428, 
    "prevInTime": 18572, 
    "contentTrasformed": false, 
    "postDate": "1166527345", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 18571, 
    "headers": {
        "inReplyToHeader": "PDIwMDYxMjE5MDY0MzI4LjQ2ODc3LnFtYWlsQHdlYjI2NzA3Lm1haWwudWtsLnlhaG9vLmNvbT4=", 
        "messageIdInHeader": "PE9GNURDNzI2NTQuMDE4RDAyMzYtT044MDI1NzI0OS4wMDNFNjM4My04MDI1NzI0OS4wMDNFN0JCM0Bnc2suY29tPg=="
    }
}