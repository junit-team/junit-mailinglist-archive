{
    "numMessagesInTopic": 19, 
    "nextInTime": 21262, 
    "senderId": "oMVqCDa41_1tkvAEP4O2cseeh0gEV7QnZoC7aXSuwRdvGFhjgWbZgag99lYlVRnhtcwu8LZMTgMIV40ReocWQit3oAXFNdKNEpORyX39Q-tP3FSE", 
    "systemMessage": false, 
    "subject": "RE: [junit] Priority of Assertion?", 
    "from": "&quot;Charlie Poole&quot; &lt;charlie@...&gt;", 
    "authorName": "Charlie Poole", 
    "msgSnippet": "Hi Joakim, ... In NUnit, I wrote it as Assert.Throws( typeof(SomeException) ),  ); where  can be a named delegate, the name of a method or", 
    "msgId": 21261, 
    "profile": "cpoole98370", 
    "topicId": 21230, 
    "spamInfo": {
        "reason": "4", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 212099090, 
    "messageBody": "<div id=\"ygrps-yiv-1856601217\">Hi Joakim, <br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; In rMock we used the following contruct:<br/>\n&gt; <br/>\n&gt; public void testSomething() {<br/>\n&gt;   &lt;code that we don&#39;t expect to throw an exception&gt;<br/>\n&gt;   expectThatExceptionThrown(isInstanceOf(SomeException.class));<br/>\n&gt;   &lt;code that we expect to throw an exception&gt; }<br/>\n&gt; <br/>\n&gt; I think that idea is what Charlies assertThrows suggestion <br/>\n&gt; hinted towards.<br/>\n<br/>\n </span></blockquote>In NUnit, I wrote it as<br/>\n  Assert.Throws( typeof(SomeException) ), &lt;delegate&gt; );<br/>\nwhere &lt;delegate&gt; can be a named delegate, the name of<br/>\na method or an anonymous delegate depending on the<br/>\nversion of .NET you are using. <br/>\n<br/>\nPutting it in a single statement avoids the global issues <br/>\nthat David writes about, but the approach does require <br/>\nsomething like a closure - a .NET delegate being basically <br/>\na weak form of closure.<br/>\n<br/>\nCharlie<br/>\n <br/>\n<blockquote><span title=\"qreply\"> &gt; While this freedom can be abused it allows to precisely <br/>\n&gt; pinpoint what should throw an exception. Also, you could do <br/>\n&gt; all kind of hamcrest checks on the exception instance that is <br/>\n&gt; not possible to do with annotations. The underlying <br/>\n&gt; implementation in the rMock-case is that <br/>\n&gt; expectThatExceptionThrows primes the framework with an <br/>\n&gt; expection that any exception is checked against before the <br/>\n&gt; exception is rethrown as an error (if the check passes the <br/>\n&gt; Exception is expected and not rethrown).<br/>\n&gt; <br/>\n&gt; Jusr my 5 cents :)<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; On Wed, Dec 31, 2008 at 4:43 AM, David Saff &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:david@...\">david@...</a>&gt; wrote:<br/>\n&gt; <br/>\n&gt; &gt;   Ilja,<br/>\n&gt; &gt;<br/>\n&gt; &gt; Thanks for thinking this through.<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; In my view, the behavior is in fact an artifact of an <br/>\n&gt; implementation <br/>\n&gt; &gt; &gt; detail - namely that asserts indicate failures by throwing an <br/>\n&gt; &gt; &gt; exception.<br/>\n&gt; &gt;<br/>\n&gt; &gt; I don&#39;t know that I can get behind this. This test is <br/>\n&gt; always going to pass:<br/>\n&gt; &gt;<br/>\n&gt; &gt; @Test public void avoidThePainfulTruth() { try { <br/>\n&gt; assertTrue(false); } <br/>\n&gt; &gt; catch (Exception e) { } }<br/>\n&gt; &gt;<br/>\n&gt; &gt; I can&#39;t think of a better way than exceptions to implement <br/>\n&gt; assertions, <br/>\n&gt; &gt; and I can&#39;t think of a way to hide that fact from users in <br/>\n&gt; all cases.<br/>\n&gt; &gt;<br/>\n&gt; &gt; David Saff<br/>\n&gt; &gt;<br/>\n&gt; &gt; On Tue, Dec 30, 2008 at 11:18 AM, Ilja Preuß <br/>\n&gt; &gt; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:iljapreuss@...\">iljapreuss@...</a>&lt;iljapreuss%40googlemail.com&gt;<br/>\n&gt; &gt; &gt;wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; Kent, I agree that it is expected behavior, technically. <br/>\n&gt; I think you <br/>\n&gt; &gt; &gt; could also make an argument that it would be better if <br/>\n&gt; the behavior <br/>\n&gt; &gt; &gt; was different.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; In my view, the behavior is in fact an artifact of an <br/>\n&gt; implementation <br/>\n&gt; &gt; &gt; detail - namely that asserts indicate failures by throwing an <br/>\n&gt; &gt; &gt; exception. It could be made the case that JUnit &quot;should&quot; report <br/>\n&gt; &gt; &gt; those failing asserts as failing asserts, not as <br/>\n&gt; unexpected exceptions.<br/>\n&gt; &gt; &gt; Basically, the current behavior masks the true test failure.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Frankly, I have a hunch that the best solution to this problem <br/>\n&gt; &gt; &gt; actually is to split the test in two, that is, to not mix <br/>\n&gt; &quot;expected&quot;<br/>\n&gt; &gt; &gt; and &quot;assert&quot; in the same test method.<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Cheers, Ilja<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; 2008/12/30 kentb &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:kentb@...\">kentb@...</a> &lt;kentb%40earthlink.net&gt; <br/>\n&gt; &gt; &gt; &lt;kentb%<br/>\n&gt; &gt; 40earthlink.net&gt;&gt;:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Yosef,<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; The behavior you describe is what I would expect to see. In the <br/>\n&gt; &gt; &gt; &gt; test,<br/>\n&gt; &gt; you<br/>\n&gt; &gt; &gt; &gt; declared that an ArrayIndexOutOfBounds exception would <br/>\n&gt; be thrown. <br/>\n&gt; &gt; &gt; &gt; It<br/>\n&gt; &gt; was<br/>\n&gt; &gt; &gt; not<br/>\n&gt; &gt; &gt; &gt; thrown, so the test fails. The error message says that <br/>\n&gt; the &quot;wrong&quot;<br/>\n&gt; &gt; &gt; exception<br/>\n&gt; &gt; &gt; &gt; that was thrown was an AssertionError, which is <br/>\n&gt; generated by the <br/>\n&gt; &gt; &gt; &gt; assertTrue(false). The &quot;expected=...&quot; means that a test <br/>\n&gt; can fail <br/>\n&gt; &gt; &gt; &gt; if no exception is thrown or if the wrong exception is thrown.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Regards,<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Kent Beck<br/>\n&gt; &gt; &gt; &gt; Three Rivers Institute<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; _____<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt; &lt;junit%<br/>\n&gt; &gt; 40yahoogroups.com&gt; [mailto:<br/>\n&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt; <br/>\n&gt; &gt; &gt; &lt;junit%40yahoogroups.com&gt;]<br/>\n&gt; &gt; On Behalf Of<br/>\n&gt; &gt; &gt; &gt; yosefshariat<br/>\n&gt; &gt; &gt; &gt; Sent: Tuesday, December 30, 2008 1:10 AM<br/>\n&gt; &gt; &gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt; &lt;junit%<br/>\n&gt; &gt; 40yahoogroups.com&gt;<br/>\n&gt; &gt; &gt; &gt; Subject: [junit] Priority of Assertion?<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Hi<br/>\n&gt; &gt; &gt; &gt; I use &quot;@Test(expected = AnyClassException.class&quot;) and one <br/>\n&gt; &gt; &gt; &gt; &quot;assertTrue(false)&quot; together for example following code:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; @Test(expected = ArrayIndexOutOfBoundsException.class)<br/>\n&gt; &gt; &gt; &gt; public void test()<br/>\n&gt; &gt; &gt; &gt; {<br/>\n&gt; &gt; &gt; &gt; String s[] = new String[]{&quot;1&quot;};<br/>\n&gt; &gt; &gt; &gt; assertTrue(false);<br/>\n&gt; &gt; &gt; &gt; System.out.println(s[10]);<br/>\n&gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; I expect to see an assertion but I see following error:<br/>\n&gt; &gt; &gt; &gt; java.lang.Exception: Unexpected exception, <br/>\n&gt; &gt; &gt; &gt; expected&lt;java.lang.ArrayIndexOutOfBoundsException&gt; but <br/>\n&gt; &gt; &gt; &gt; was&lt;java.lang.AssertionError&gt;..<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; In your opinion, this test must be Assertion or Exception.<br/>\n&gt; &gt; &gt; &gt; In &quot;JUnit&quot; we cannot use &quot;@Test(expected = <br/>\n&gt; &gt; &gt; &gt; AnyClassException.class&quot;) and Assertion together at the <br/>\n&gt; same time.<br/>\n&gt; &gt; &gt; &gt; In my opinion this test must be failed for &quot;assertion&quot; <br/>\n&gt; and not for <br/>\n&gt; &gt; &gt; &gt; ArrayIndexOutOfBoundsException.<br/>\n&gt; &gt; &gt; &gt; Is this a bug in JUnit or my test is wrong and <br/>\n&gt; shouldn&#39;t use two <br/>\n&gt; &gt; &gt; &gt; item together?<br/>\n&gt; &gt; &gt; &gt; Tanks.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt; &gt;<br/>\n&gt; &gt;  <br/>\n&gt; &gt;<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; --<br/>\n&gt; -----------------------------------------------------<br/>\n&gt; Joakim Ohlrogge<br/>\n&gt; Agical AB<br/>\n&gt; Västerlånggatan 79, 2 tr<br/>\n&gt; 111 29 Stockholm, SWEDEN<br/>\n&gt; <br/>\n&gt; Mobile: +46-708-754004<br/>\n&gt; Blog: johlrogge.wordpress.com<br/>\n&gt; E-mail: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:joakim.ohlrogge@...\">joakim.ohlrogge@...</a><br/>\n&gt; <br/>\n&gt; <br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ------------------------------------<br/>\n&gt; <br/>\n&gt; Yahoo! Groups Links<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21260, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1231183273", 
    "canDelete": false, 
    "nextInTopic": 21262, 
    "prevInTopic": 21260, 
    "headers": {
        "inReplyToHeader": "PGI5ZWU1ZTQxMDkwMTA1MDYyMWoxMDc4Y2VmOG44ZWM3MGUwNjhjMWU2ODI5QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDAwMTEwMWM5NmY2YSRjYTRlNWVjMCQ2NDAxYThjMEBmZXJyYXJpPg=="
    }
}