{
    "numMessagesInTopic": 4, 
    "nextInTime": 6654, 
    "senderId": "MgDzEfRlXg9moCDUfN5pTx0MLAeBspqlskkV27DqqnPTp6lV7ILlkwBQWw2z1O0Sfd9lkB7IGzk6rdAp-at7rxHKh8_1hpa0VbUumgiKiBD_n88HwykhcdmplunMNif_XHPz3qZoC31zeeU3Knc", 
    "systemMessage": false, 
    "subject": "Re: Unit testing plugins", 
    "from": "&quot;J. B. Rainsberger &lt;jbr@...&gt;&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger &lt;jbr@diasparsoftware.c", 
    "msgSnippet": "Unit testing code that runs in a framework is not difficult, but it can be annoying. This really merits an article, but here are the bullet points. 1. Identify", 
    "msgId": 6653, 
    "profile": "nails762", 
    "topicId": 6652, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 89240252, 
    "messageBody": "<div id=\"ygrps-yiv-922048261\">Unit testing code that runs in a framework is not difficult, but it <br/>\ncan be annoying. This really merits an article, but here are the <br/>\nbullet points.<br/>\n<br/>\n1. Identify the extension points where you write your code.<br/>\n2. In the extension points, identify the objects that you or the <br/>\nframework use when executing your code.<br/>\n3. Change your code to accept those objects as parameters, either to <br/>\na constructor or its methods.<br/>\n4. Test the new code and either trust that the &quot;glue code&quot; will work <br/>\nor refactor the glue code so that it is written only once. (Then you <br/>\ncan test it once.)<br/>\n<br/>\nFor example, in Struts, you code an Action class by <br/>\noverriding &quot;execute()&quot;. Your code accesses your model and decides <br/>\nwhich page to return as a response. Action.execute() takes <br/>\nparameters to represent the Action list, an input form, the servlet <br/>\nrequest and the servlet response. Typically, you will grab data from <br/>\nthe input form, set attributes on the request and specify the page <br/>\nto forward to by name (a String).<br/>\n<br/>\nTherefore, I write a method like this:<br/>\n<br/>\nString doExecute(final MyModel model, final MyForm form, final Map <br/>\nattributes) throws Exception {<br/>\n    // grab form parameters from &#39;form&#39;<br/>\n    // talk to the model<br/>\n    // add attributes to &#39;attributes&#39;<br/>\n    // return the name of the page to forward to (the &quot;forward name&quot;)<br/>\n}<br/>\n<br/>\nI can easily create or mock MyModel and MyForm as well as the Map of <br/>\nattributes. I can easily check that the resulting forward name is <br/>\ncorrect. I unit test this method as much as possible. Then I write:<br/>\n<br/>\nActionForward execute(final ActionMapping actionMapping, final <br/>\nActionForm form, final HttpServletRequest request, final <br/>\nHttpServletResponse response) throws Exception {<br/>\n    final MyForm myForm = (MyForm) form;<br/>\n    final MyModel model = new MyModel();    // or retrieve from some <br/>\nfactory or creation method<br/>\n    final Map attributes = new HashMap();<br/>\n    <br/>\n    final String forwardName = doExecute(myForm, model, attributes);<br/>\n    setRequestAttributes(request, attributes);<br/>\n    return actionMapping.findForward(forwardName);<br/>\n}<br/>\n<br/>\nThe method setRequestAttributes simply iterates over the map entries <br/>\nand calls request.setAttribute for each one.<br/>\n<br/>\nNotice that the glue code is quite boilerplate in nature. I could <br/>\neven generate it or write it using funky reflection. This is a great <br/>\nway to remove duplication.<br/>\n<br/>\nIf I find that I need more stuff in my doExecute() method, like <br/>\nanother part of the request, I can create a narrow <br/>\ninterface &quot;RequestProperties&quot; and pass that in to &#39;doExecute&#39;. In <br/>\nthe test code, I fake out the RequestProperties; in the production <br/>\ncode, I wrap the Request in another object that implements <br/>\nRequestProperties. The goal is to improve substitutability of <br/>\nimplementation to maximize ease of testing.<br/>\n<br/>\nWhat do you think?<br/>\n<br/>\n--JBR.<br/>\n<br/>\n--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;kazugt_2000 &lt;pgeorge@a...&gt;&quot; <br/>\n&lt;pgeorge@a...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; Hi all,<br/>\n&gt; <br/>\n&gt; I am relatively new to Junit. I have successfully used it when <br/>\n </span></blockquote>unit <br/>\n<blockquote><span title=\"ireply\"> &gt; testing standalone applications. Suffice to say I am hooked ;-).<br/>\n&gt; <br/>\n&gt; However now my situation is a bit different. There is an <br/>\n </span></blockquote>application <br/>\n<blockquote><span title=\"ireply\"> &gt; developed by a third party. I have to develop plugins for the <br/>\n </span></blockquote>same. I <br/>\n<blockquote><span title=\"ireply\"> &gt; want to be able to unit test my plugins, and develop a test suite. <br/>\n&gt; <br/>\n&gt; The problem is however I can&#39;t execute my plugin as a stand-alone <br/>\n&gt; app. The code only gets executed in the context of the app that <br/>\n </span></blockquote>uses <br/>\n<blockquote><span title=\"ireply\"> &gt; it. Hence I cant create unit tests that I can execute with <br/>\n </span></blockquote>Junit .I <br/>\n<blockquote><span title=\"ireply\"> &gt; would be most grateful if someone could provide me with <br/>\n </span></blockquote>suggestions <br/>\n<blockquote><span title=\"qreply\"> &gt; on how I could go about the same. </span></blockquote></div>", 
    "prevInTime": 6652, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1042564478", 
    "canDelete": false, 
    "nextInTopic": 6657, 
    "prevInTopic": 6652, 
    "headers": {
        "inReplyToHeader": "PGIwMDl2Mis1aHJvQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PGIwMWdodStyZ2U5QGVHcm91cHMuY29tPg=="
    }
}