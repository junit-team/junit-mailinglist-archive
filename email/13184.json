{
    "numMessagesInTopic": 6, 
    "nextInTime": 13185, 
    "senderId": "z3IWU60HPMWaNECzVTKNXaXEPWTJsIq8Ix4at1L8duu4Oj27-rXxgjbB-qRhO9l5tbjjdhWBJuhj-nGuoLXj5HTRdKyhG-VpZ2XdOCEkVg", 
    "systemMessage": false, 
    "subject": "Re: [unclassified] [junit] Re: Testing DAOs?", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... So it looks like you need to verify that some code somewhere invokes these Builder methods the right way (right methods, parameters. order). In that case,", 
    "msgId": 13184, 
    "profile": "nails762", 
    "topicId": 13132, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "messageBody": "<div id=\"ygrps-yiv-1657985532\">haefeleuser wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; <br/>\n&gt; The application we write is an ERP software, so it is a little bit<br/>\n&gt; different than other applications.<br/>\n&gt; <br/>\n&gt;  &gt;&gt;What does it mean to test these validation rules? Pretend you could<br/>\n&gt;  &gt;&gt;do<br/>\n&gt;  &gt;&gt;it easily; what would the test look like? This will help me<br/>\n&gt;  &gt;&gt;understand<br/>\n&gt;  &gt;&gt;enough to respond.<br/>\n&gt; <br/>\n&gt; The data validation rules (ArticleRules.java) look like this for<br/>\n&gt; example (builder pattern):<br/>\n&gt; <br/>\n&gt; // id<br/>\n&gt; builder.beginAspect(&quot;id&quot;); // &quot;aspect&quot; means attribute<br/>\n&gt;   builder.notNull(); // means mandatory<br/>\n&gt;   builder.maxLength(14);<br/>\n&gt;   builder.ruleUnique(&quot;id&quot;, ArticleProvider.class);<br/>\n&gt; builder.endAspect();<br/>\n<br/>\n </span></blockquote>So it looks like you need to verify that some code somewhere invokes <br/>\nthese Builder methods the right way (right methods, parameters. order). <br/>\nIn that case, I would test that code with a mock builder, verifying that <br/>\nthe methods are invoked correctly.<br/>\n<br/>\nGoing a step beyond that, I would build a domain language that I could <br/>\nverify with text, that looks like this:<br/>\n<br/>\naspect id<br/>\n     notNull<br/>\n     maxLength 14<br/>\n     ruleUnique &quot;id&quot;, ArticleProvider.class<br/>\nend<br/>\n<br/>\nNotice that this language is very similar to the methods and so you <br/>\ncould write an interpreter for that language that uses reflection to <br/>\ninvoke the builder methods. TEST THIS INTERPRETER ONCE. :)<br/>\n<br/>\nNow you can just test your &quot;builder scripts&quot; by comparing text. All <br/>\nthose tests will run quickly and be easy to write: substitute a mock <br/>\ninterpreter and check the strings sent to it.<br/>\n<br/>\nFinally, you could try XML-based configuration, which allows you to <br/>\nverify configuration with XPath. It might be well suited to this <br/>\nproject. Tests now check XML documents with XPath. (_JUnit Recipes_, <br/>\nchapter 9.)<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; public void testIdValidation()<br/>\n&gt; {<br/>\n&gt;   // A &quot;made&quot; Article is not yet persisted<br/>\n&gt;   Article madeArticle = articleData.makeCompleteArticle();<br/>\n&gt;   // Convenience method:<br/>\n&gt;   checkNotNullValidation(&quot;id&quot;, madeArticle);<br/>\n&gt;   // Convenience method:<br/>\n&gt;   checkMaxLengthValidation(14, &quot;id&quot;, madeArticle);<br/>\n&gt;   // Persist an Article which has the same ID as madeArticle:<br/>\n&gt;   articleData.createCompleteArticle();<br/>\n&gt;   checkValidation(madeArticle, false, &quot;Validating unique id&quot;);<br/>\n&gt; }<br/>\n<br/>\n </span></blockquote>We can test each validation rule once. Example:<br/>\n<br/>\nIf I give an object a not-null aspect, then try to make that aspect <br/>\nnull, it should blow up.<br/>\n<br/>\nI only have to test this once for every object/aspect I might ever <br/>\nbuild. No need to test that aspect for every non-nullable aspect and <br/>\nevery object. For all the objects, I only need to test my specification <br/>\n(see above).<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;  &gt;&gt; I generally need to know whether the implementation of the finder<br/>\n&gt;  &gt;&gt; returns the proper result set, so yes.<br/>\n&gt; <br/>\n&gt; You wrote that in your book. I didn&#39;t read it at the time I wrote this<br/>\n&gt; question. A great book by the way!<br/>\n<br/>\n </span></blockquote>I&#39;m glad you like it!<br/>\n<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Something like this:<br/>\n&gt; <br/>\n&gt; public void testInitializationWithDefaultValues()<br/>\n&gt; {<br/>\n&gt;   CountryFactory factory = countryManager.getCountryFactory();<br/>\n&gt;   Country newCountry = factory.getNewCountryInstance();<br/>\n&gt;   assertTrue(&quot;Country.isActivated&quot;, newCountry.getIsActivated());<br/>\n&gt;   assertFalse(&quot;Country.isMemberOfEu&quot;, newCountry.getIsMemberOfEu());<br/>\n&gt; }<br/>\n<br/>\n </span></blockquote>I see: you&#39;re testing the initial state of an object. I would definitely <br/>\ndo that. Is this initial state the same if I create a Country directly? <br/>\nWould this be enough?<br/>\n<br/>\nCountry newCountry = new Country();<br/>\n...<br/>\n<br/>\nIf so, I prefer it.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; The managers and providers are generated, same as the test below.<br/>\n&gt; However, the test needs to be completed manually.<br/>\n&gt; <br/>\n&gt; public void testCreateUpdateDelete()<br/>\n&gt; {<br/>\n<br/>\n </span></blockquote>I intensely dislike testing three things at once. I would make this <br/>\nthree tests.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;   // Create-test:<br/>\n&gt;   Country createdCountry = countryData.createCompleteCountry();<br/>\n&gt;   assertFalse(&quot;Country.isNew&quot;, createdCountry.isNew());<br/>\n&gt;   // TODO If the entity contains other entities, test if the relations<br/>\n&gt; have been set.<br/>\n&gt;   // Use assertNotNull(...) for One:One relations.<br/>\n&gt;   // Use assertEquals(...) for One:Many relations.<br/>\n&gt; <br/>\n&gt;   // Update-test:<br/>\n&gt;   // TODO Modify an attribute.<br/>\n&gt;   Country updatedCountry = countryManager.updateCountry(createdCountry);<br/>\n&gt;   // TODO Expect that the update succeeded.<br/>\n&gt;   assertEquals(&quot;Country.yourAttribute&quot;,<br/>\n&gt; createdCountry.getYourAttribute(), updatedCountry.getYourAttribute());<br/>\n&gt;     <br/>\n&gt;   // Delete-test:<br/>\n&gt;   countryManager.deleteCountry(updatedCountry);<br/>\n&gt;   try<br/>\n&gt;   {<br/>\n&gt;       countryProvider.getCountryByKey(updatedCountry.getKey());<br/>\n&gt;       fail(&quot;Country has not been deleted successfully&quot;);<br/>\n&gt;   }<br/>\n&gt;   catch(NoObjectFoundException e)<br/>\n&gt;   {<br/>\n&gt;       // Its okay. We expect that the deleted entity cannot be found<br/>\n&gt; anymore.<br/>\n&gt;   }<br/>\n&gt;   // TODO If full cascade, test that child entities have been deleted.<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; Too much or okay?<br/>\n<br/>\n </span></blockquote>1. Too much in one test. This should be three tests.<br/>\n2. You don&#39;t need to test the relationships for every domain object -- <br/>\nyou should be able to test that relationships work (as learning tests <br/>\nfor JCoffee, if I remember correctly) and then, for each object, verify <br/>\nthe relationships you expect it to specify for itself. Does that make <br/>\nsense to you?<br/>\n-- <br/>\nJ. B. (Joe) Rainsberger<br/>\nDiaspar Software Services<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.diasparsoftware.com\">http://www.diasparsoftware.com</a><br/>\nAuthor, JUnit Recipes: Practical Methods for Programmer Testing</div>", 
    "prevInTime": 13183, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1112051015", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 13159, 
    "headers": {
        "inReplyToHeader": "PGQxdmk5YStxcG4zQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQyNDg4RDQ3LjgwNDAyMDFAcm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGQxdmk5YStxcG4zQGVHcm91cHMuY29tPg=="
    }
}