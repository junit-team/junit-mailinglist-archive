{
    "numMessagesInTopic": 19, 
    "nextInTime": 19921, 
    "senderId": "kCJOb9E2HtlOH2KWA2o-zaQrs4Y1ggblXOFMgSPIT3bUK95iUiRCxfTamsyvPrbEAEqf_1x4xhOWmeNe0DdWf2t-FanJ0FAU", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: How to change dynamically (runtime) the classpath for a given test", 
    "from": "&quot;Nat Pryce&quot; &lt;nat.pryce@...&gt;", 
    "authorName": "Nat Pryce", 
    "msgSnippet": "Here s a simple solution that will not lead you into dynamic class-loading class-path hell... Create a directory in your project.  Check that directory into", 
    "msgId": 19920, 
    "profile": "nat_pryce", 
    "topicId": 19905, 
    "spamInfo": {
        "reason": "4", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 216973656, 
    "messageBody": "<div id=\"ygrps-yiv-1215519106\">Here&#39;s a simple solution that will not lead you into dynamic class-loading<br/>\nclass-path hell...<br/>\n<br/>\nCreate a directory in your project.  Check that directory into your<br/>\nproject&#39;s source repository.  Stick an unused readme file in there if your<br/>\nsource control system does not check out empty directories.  Ensure that<br/>\ndirectory is on the classpath.  If it is not on the classpath, fail the<br/>\ntest.<br/>\n<br/>\nCreate project files for your IDE that has that directory on the classpath.<br/>\n<br/>\nCreate a &quot;golden build&quot;, using Ant or some other widely used build tool,<br/>\nthat will reliably and repeatably build your software.  The golden build is<br/>\nthe *only* build that is used to create release packages.  Developers should<br/>\nnot be running pre-commit tests using anything but the configuration in the<br/>\ngolden build.  They must definitely not be creating release packages using<br/>\nanything but the golden build in a separate integration environment.<br/>\n<br/>\nIn the golden build, put that directory on the classpath.<br/>\n<br/>\nIf programmers want to use unsupported IDEs, they need to configure their<br/>\nproject to put that directory on the classpath.  If they don&#39;t, the test you<br/>\ncreated will fail and tell them to do so.<br/>\n<br/>\nEnsure that the failure message generated by the test when that directory is<br/>\nnot on the classpath is very clear about what has gone wrong and what the<br/>\ndeveloper needs to do to fix it.<br/>\n<br/>\n--Nat<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 23/09/2007, David &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:achepati67@...\">achepati67@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt;   --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt;, &quot;Lasse Koskela&quot;<br/>\n&gt; &lt;lasse.koskela@...&gt;<br/>\n&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt; Hi David,<br/>\n&gt; &gt;<br/>\n&gt; &gt; On 9/21/07, David &lt;achepati67@...&gt; wrote:<br/>\n&gt; &gt; &gt; Thanks for your reply, but you are assuming to much, because you<br/>\n&gt; &gt; &gt; have to modify the classpath by hand. For example under eclipse<br/>\n&gt; the<br/>\n&gt; &gt; &gt; current folder (.) is not on the classpath, so you have addapt<br/>\n&gt; the<br/>\n&gt; &gt; &gt; test to the IDE configuration. I know this can be done very easy<br/>\n&gt; &gt; &gt; using Ant, but I don&#39;t want to impose to use such tools for this<br/>\n&gt; &gt; &gt; particular example.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Actually, I don&#39;t need to modify the classpath by hand because<br/>\n&gt; under<br/>\n&gt; &gt; Eclipse the source folders are in the class path. For example, you<br/>\n&gt; can<br/>\n&gt; &gt; do the following successfully in your tests:<br/>\n&gt; &gt;<br/>\n&gt; &gt; getClass().getResource(&quot;/com/acme/stuff/testdata.txt&quot;);<br/>\n&gt; &gt;<br/>\n&gt; &gt; ...which will give you access to the testdata.txt file you&#39;ve<br/>\n&gt; placed<br/>\n&gt; &gt; under your source directory:<br/>\n&gt; &gt;<br/>\n&gt; &gt; ${basedir}/src/com/acme/stuff/testdata.txt<br/>\n&gt; &gt;<br/>\n&gt; &gt; Or maybe I misunderstood what you meant?<br/>\n&gt;<br/>\n&gt; Dear Lasse,<br/>\n&gt;<br/>\n&gt; I have the opossite problem, I would like to create a file during<br/>\n&gt; the testing process on some place on the classpath. What I would<br/>\n&gt; like is to know for sure a place that will be always on classpath<br/>\n&gt; (such place doesn&#39;t exist, it depends on IDE&#39;s). After the test I<br/>\n&gt; will delete the file. Becuse, there is no universal place that will<br/>\n&gt; be always on classpath, another solution would be to add a place<br/>\n&gt; dinamycally on classpath during the test, that was the reason of my<br/>\n&gt; original post.<br/>\n&gt;<br/>\n&gt; Your suggestion requires to have at the begining of the test to have<br/>\n&gt; a certain file on the classpath. Such information you have assuming<br/>\n&gt; you are using Eclipse IDE, because the source files are on<br/>\n&gt; classpath, but you have to assume that some particular folders are<br/>\n&gt; on classpath.<br/>\n&gt;<br/>\n&gt; I show you now on my test (it works because I assume<br/>\n&gt; System.getProperty(&quot;user.dir&quot;)/bin in on classpath. What I prefer is<br/>\n&gt; to add location (dinamycally) of: System.getProperty<br/>\n&gt; (&quot;java.io.tmpdir&quot;) on classpath,<br/>\n&gt; then create a file and at the end of execution to set the classpath<br/>\n&gt; into original value and also delete the temporary file.<br/>\n&gt;<br/>\n&gt; public class TestFileUtils extends TestCase {<br/>\n&gt;<br/>\n&gt; final String testFileName = &quot;fileInClassPath.txt&quot;;<br/>\n&gt;<br/>\n&gt; final String parent = &quot;bin&quot;;<br/>\n&gt;<br/>\n&gt; final static File TMP_DIR = new File(&quot;bin&quot;);<br/>\n&gt;<br/>\n&gt; /**<br/>\n&gt; * {@link com.b2b2000.FileUtils#findFileInClasspath<br/>\n&gt; (java.lang.String)}.<br/>\n&gt; *<br/>\n&gt; * Note: We assume: {@linkplain System#getProperty(String)<br/>\n&gt; System.getProperty(&quot;user.dir&quot;)/bin} is on &lt;code&gt;classpath&lt;/code&gt;.<br/>\n&gt; *<br/>\n&gt; */<br/>\n&gt; public void testFindFileInClasspath() throws Exception {<br/>\n&gt; File newFile = new File(TMP_DIR, testFileName);<br/>\n&gt; newFile.createNewFile();<br/>\n&gt; modifyClasspath();<br/>\n&gt; File foundFile = FileUtils.findFileInClasspath(testFileName);<br/>\n&gt; assertEquals(newFile.getAbsoluteFile(),<br/>\n&gt; foundFile.getAbsoluteFile());<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; protected void setUp() throws Exception {<br/>\n&gt; modifyClasspath();<br/>\n&gt; File newFile = new File(TMP_DIR, testFileName);<br/>\n&gt; if (newFile.exists()) {<br/>\n&gt; if (!newFile.delete()) {<br/>\n&gt; throw new FileNotFoundException(newFile.toString());<br/>\n&gt;<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; super.setUp();<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; protected void tearDown() throws Exception {<br/>\n&gt; File file = new File(TMP_DIR, testFileName);<br/>\n&gt; file.deleteOnExit();<br/>\n&gt; super.tearDown();<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; Thanks in advance,<br/>\n&gt;<br/>\n&gt; David<br/>\n&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Lasse<br/>\n&gt; &gt;<br/>\n&gt; &gt; --<br/>\n&gt; &gt; Lasse Koskela<br/>\n&gt; &gt; * Author of &quot;Test Driven&quot; (Manning Publications, 2007) *<br/>\n&gt; &gt; * Reaktor Innovations * <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.ri.fi/en\">http://www.ri.fi/en</a> *<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;  <br/>\n&gt;<br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed] </span></blockquote></div>", 
    "prevInTime": 19919, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1190575528", 
    "canDelete": false, 
    "nextInTopic": 19921, 
    "prevInTopic": 19919, 
    "headers": {
        "inReplyToHeader": "PGZkNXFkaSt0YXQ1QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDE3ZmE1M2QwNzA5MjMxMjI1eTJjMGQ1NmY4dDc3ZTNlNDY5ZDdhMGZhM2RAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDM5NzVlMmQxMDcwOTIxMDAxNW81ZTNkOGU5N2k0MTg1ZDdiZGY0YTRkNTkyQG1haWwuZ21haWwuY29tPgkgPGZkNXFkaSt0YXQ1QGVHcm91cHMuY29tPg=="
    }
}