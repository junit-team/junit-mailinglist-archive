{
    "numMessagesInTopic": 41, 
    "nextInTime": 6790, 
    "senderId": "siVJ6ATUjNC9RaxeShjzTBIbGuKwY5Vawq_nnmCZDcorqdbyAO28vkUND2yZOlWDGuwNAzz-y-dX252Ga-R8Jc4qqTgtdz9B5LRY", 
    "systemMessage": false, 
    "subject": "RE: [junit] Websphere Connection Pool", 
    "from": "Curt Sampson &lt;yahoo_sucks@...&gt;", 
    "authorName": "Curt Sampson", 
    "msgSnippet": "... True. The above code is easily testable by simply passing in a mock connection factory, and asserting that getConnection() was invoked with whatever", 
    "msgId": 6789, 
    "profile": "cjstokyo", 
    "topicId": 6711, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 110189933, 
    "messageBody": "<div id=\"ygrps-yiv-1703485138\">On Sat, 25 Jan 2003, Scott Stirling wrote:<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; -----Original Message-----<br/>\n&gt; &gt; From: Curt Sampson [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:yahoo_sucks@...\">yahoo_sucks@...</a>]<br/>\n&gt; &gt;     public Object doMyThing(ConnectionFactory factory, String something)<br/>\n&gt; &gt;     {<br/>\n&gt; &gt; \tConnection con = factory.getConnection();<br/>\n&gt; &gt; \treturn doMyThing(con, something);<br/>\n&gt; &gt; \tcon.close();<br/>\n&gt; &gt;     }<br/>\n&gt;<br/>\n&gt; But then if you&#39;re catching unit bugs bubbling up at functional test scope<br/>\n&gt; (usually done at a higher scope than unit, such as subsystem or system test,<br/>\n&gt; and a later phase in the development cycle), they are more expensive to<br/>\n&gt; debug and fix than if you could just come up with a better way to test the<br/>\n&gt; real code at the unit level.<br/>\n<br/>\n </span></blockquote>True. The above code is easily testable by simply passing in a mock<br/>\nconnection factory, and asserting that getConnection() was invoked with<br/>\nwhatever information was necessary, and that close() was called on the<br/>\nconnection. I don&#39;t generally find this worth the effort because this<br/>\nroutine is so simple. (The point of unit testing is to save you time<br/>\nand money; if you write a test case for everything that could ever<br/>\nconceivably go wrong in any way, you&#39;re goinng to spend a lot of time<br/>\nand money on tests that never fail.)<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; I would predict that the strategy listed above, while good intentioned, on a<br/>\n&gt; project of any size would wind up with lots of extra code throughout added<br/>\n&gt; just for testability.<br/>\n<br/>\n </span></blockquote>Yes.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; The whole doMyThing method is very general, but we can work with it.  I<br/>\n&gt; would argue that rather than modify the class and adding code that,<br/>\n&gt; ironically, is added for unit level testability but can&#39;t be unit tested,<br/>\n&gt; one should use 2 mock objects here.<br/>\n<br/>\n </span></blockquote>Err...if you&#39;re creating new classes for the mock objects, aren&#39;t you<br/>\nadding extra code just for testability?<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; You&#39;d need a ConnectionFactory mock object that could return a<br/>\n&gt; Connection mock object. You create the mock object in the TestCase,<br/>\n&gt; and you pass it to doMyThing.<br/>\n<br/>\n </span></blockquote>Right. But if you don&#39;t already have such mock objects, you&#39;d have to<br/>\ncreate them, which is a lot more work that just doing what I did above.<br/>\nI expect it will also make the tests longer, too, such you have to set<br/>\nup these mock objects appropriately.<br/>\n<br/>\nWhat does all the extra code buy you? Just saving one method declaration<br/>\nand one extra line of code to invoke a second method?<br/>\n<br/>\ncjs<br/>\n-- <br/>\nCurt Sampson  &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cjs@...\">cjs@...</a>&gt;   +81 90 7737 2974   <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.netbsd.org\">http://www.netbsd.org</a><br/>\n    Don&#39;t you know, in this new Dark Age, we&#39;re all light.  --XTC</div>", 
    "prevInTime": 6788, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1043623882", 
    "canDelete": false, 
    "nextInTopic": 6815, 
    "prevInTopic": 6737, 
    "headers": {
        "inReplyToHeader": "PEtJRUhJQklPQkFFTEpBSElQTkhERUVHSUNPQUEuc2NvdHRzdGlybGluZ0ByY24uY29tPg==", 
        "messageIdInHeader": "PFBpbmUuTkVCLjQuNTEuMDMwMTI3MDgyMjIyMC41OTZAYW5nZWxpYy5jeW5pYy5uZXQ+", 
        "referencesHeader": "PEtJRUhJQklPQkFFTEpBSElQTkhERUVHSUNPQUEuc2NvdHRzdGlybGluZ0ByY24uY29tPg=="
    }
}