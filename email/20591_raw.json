{
    "numMessagesInTopic": 8, 
    "nextInTime": 20592, 
    "senderId": "beYUz2_iLXwKt_BcRrIvnTkk7u6aeFmcZrGvjzsmcPiXT_1cWM9pbRpzklrk55aHNqqBqbLhNXVyJxz4m-MuoDf9Yl_ACUf_NB7yB65g_IWcxgs", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing code that depends on today&#39;s date", 
    "from": "&quot;Andrew McDonagh&quot; &lt;andrewmcdonagh@...&gt;", 
    "authorName": "Andrew McDonagh", 
    "msgSnippet": "Hi, If you use the Abstract Factory pattern to create the Date() object instance, instead of calling new Date() yourself or passing it around, then the", 
    "msgId": 20591, 
    "rawEmail": "Return-Path: &lt;andrewmcdonagh@...&gt;\r\nX-Sender: andrewmcdonagh@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 12754 invoked from network); 17 Jun 2008 23:20:01 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m42.grp.scd.yahoo.com with QMQP; 17 Jun 2008 23:20:01 -0000\r\nX-Received: from unknown (HELO py-out-1112.google.com) (64.233.166.179)\n  by mta17.grp.scd.yahoo.com with SMTP; 17 Jun 2008 23:20:01 -0000\r\nX-Received: by py-out-1112.google.com with SMTP id u52so2347243pyb.7\n        for &lt;junit@yahoogroups.com&gt;; Tue, 17 Jun 2008 16:20:01 -0700 (PDT)\r\nX-Received: by 10.142.211.1 with SMTP id j1mr3460664wfg.231.1213744800961;\n        Tue, 17 Jun 2008 16:20:00 -0700 (PDT)\r\nX-Received: by 10.143.36.20 with HTTP; Tue, 17 Jun 2008 16:20:00 -0700 (PDT)\r\nMessage-ID: &lt;35c507d30806171620p281e5f2cv6ba0da17a60a9eb6@...&gt;\r\nDate: Wed, 18 Jun 2008 00:20:00 +0100\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;860D47F8904F6041AEEE55F9B684667F162D46EF05@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nReferences: &lt;860D47F8904F6041AEEE55F9B684667F162D46EF05@...&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Andrew McDonagh&quot; &lt;andrewmcdonagh@...&gt;\r\nSubject: Re: [junit] Testing code that depends on today&#39;s date\r\nX-Yahoo-Group-Post: member; u=283773244; y=9DNBT86HaUksLULCN-VtG0kgGjkQljma6A8H3KFEK0861j77Q6G09Q\r\nX-Yahoo-Profile: andy_ipaccess\r\n\r\nHi,\n\nIf you use the Abstract Factory pattern to create the Date() object\ninstance, instead of calling new Date() yourself or passing it around,\nthen the production TodaysDateConcreteFactory can simply :\n\nreturn new Date();\n\n\nWhereas during your unit or functional tests, you use a\nMockTodaysDateConcreteFactory object, which returns what ever you want\n\nreturn expectedDate;\n\nHope this helps\n\nAndrew\n\n\n2008/6/17 Per Jacobsson &lt;perjacobsson@...&gt;:\n&gt; Hi,\n&gt; This has been annoying me for a while and I can&#39;t think of a clean solution\n&gt; for it. Hope this makes sense: I have some code that returns different\n&gt; results depending on what today&#39;s date is (the number of days since a user\n&gt; first registered, etc). The simple approach is to just create a new instance\n&gt; of java.util.Date whenever I need to know the current date, but that tends\n&gt; to make both unit and automated functional testing difficult.\n&gt;\n&gt; I&#39;m currently injecting today&#39;s date into the classes that need it, and then\n&gt; the tests can just use a static date. It gets pretty ugly though, a lot of\n&gt; times this date has to be dragged along deep into the domain model.\n&gt;\n&gt; An alternative would be to take the old school approach and have a static\n&gt; factory that everything that needs to know today&#39;s date calls, and allow the\n&gt; unit tests to override with a test date. Of course, then you run into all\n&gt; the other issues that dependency injection solves.\n&gt;\n&gt; Any thoughts?\n&gt; Thanks,\n&gt; / Per\n&gt;\n&gt; [Non-text portions of this message have been removed]\n&gt;\n&gt; \n\n", 
    "profile": "andy_ipaccess", 
    "topicId": 20590, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 283773244, 
    "prevInTime": 20590, 
    "contentTrasformed": false, 
    "postDate": "1213744800", 
    "canDelete": false, 
    "nextInTopic": 20592, 
    "prevInTopic": 20590, 
    "headers": {
        "inReplyToHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPg==", 
        "messageIdInHeader": "PDM1YzUwN2QzMDgwNjE3MTYyMHAyODFlNWYyY3Y2YmEwZGExN2E2MGE5ZWI2QG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDg2MEQ0N0Y4OTA0RjYwNDFBRUVFNTVGOUI2ODQ2NjdGMTYyRDQ2RUYwNUBFWENIQU5HRS1WUzEuZWhhcm1vbnkuY29tPg=="
    }
}