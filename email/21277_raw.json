{
    "numMessagesInTopic": 12, 
    "nextInTime": 21278, 
    "senderId": "GfH_7d8vlYHhiGmhHC1jWRq-3ZHVTUKAdEIMp60E9eCFXV_pXTBnzP1Lm4qf296XUVlOQdqSYtjTymG1Vaw3yhqHJNAavrlw", 
    "systemMessage": true, 
    "subject": "Re: [junit] JUnit-JPA (Hibernate) - Spring - Struts2 testing howto", 
    "from": "&quot;Marko Majkic&quot; &lt;majkic@...&gt;", 
    "authorName": "Marko Majkic", 
    "msgSnippet": "It seems that applicationContext-test.xml is read, but there s failure trace: java.lang.NoSuchMethodError: ", 
    "msgId": 21277, 
    "rawEmail": "Return-Path: &lt;majkic@...&gt;\r\nReceived: (qmail 645 invoked from network); 9 Jan 2009 12:07:29 -0000\r\nReceived: from unknown (66.218.67.97)\n  by m55.grp.scd.yahoo.com with QMQP; 9 Jan 2009 12:07:29 -0000\r\nReceived: from unknown (HELO n33b.bullet.sp1.yahoo.com) (209.131.38.215)\n  by mta18.grp.scd.yahoo.com with SMTP; 9 Jan 2009 12:07:29 -0000\r\nReceived: from [69.147.65.174] by n33.bullet.sp1.yahoo.com with NNFMP; 09 Jan 2009 12:07:29 -0000\r\nReceived: from [66.218.67.229] by t12.bullet.mail.sp1.yahoo.com with NNFMP; 09 Jan 2009 12:07:29 -0000\r\nX-Sender: majkic@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 62247 invoked from network); 9 Jan 2009 08:49:02 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m41.grp.scd.yahoo.com with QMQP; 9 Jan 2009 08:49:02 -0000\r\nX-Received: from unknown (HELO mail-bw0-f17.google.com) (209.85.218.17)\n  by mta16.grp.scd.yahoo.com with SMTP; 9 Jan 2009 08:49:02 -0000\r\nX-Received: by mail-bw0-f17.google.com with SMTP id 10so2113340bwz.22\n        for &lt;junit@yahoogroups.com&gt;; Fri, 09 Jan 2009 00:49:01 -0800 (PST)\r\nX-Received: by 10.86.84.5 with SMTP id h5mr14721103fgb.12.1231490941801;\n        Fri, 09 Jan 2009 00:49:01 -0800 (PST)\r\nX-Received: by 10.86.51.3 with HTTP; Fri, 9 Jan 2009 00:49:01 -0800 (PST)\r\nMessage-ID: &lt;c35c90e00901090049g1405ce95pcdbd1433dddbffde@...&gt;\r\nDate: Fri, 9 Jan 2009 09:49:01 +0100\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;13ccdb5f0901081549i1c55ea3ew1a21681ea9e44b7@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nReferences: &lt;gk0q40+ihlq@...&gt;\n\t &lt;13ccdb5f0901071158o1e4357dfp3e6af9e123a84be5@...&gt;\n\t &lt;c35c90e00901080938r55cbe65bl93ae913556b759f8@...&gt;\n\t &lt;13ccdb5f0901081549i1c55ea3ew1a21681ea9e44b7@...&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Marko Majkic&quot; &lt;majkic@...&gt;\r\nSubject: Re: [junit] JUnit-JPA (Hibernate) - Spring - Struts2 testing howto\r\nX-Yahoo-Group-Post: member; u=369724152; y=n2HS_fMvoHZGXHyRSVn0voL_bEeO2LRH9TcyDMuG0Icy9L3RH9Ro-nzQGw\r\nX-Yahoo-Profile: majkic@...\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: spchappell &lt;simonpeterchappell@...&gt; via web; 09 Jan 2009 12:07:28 -0000\r\n\r\nIt seems that applicationContext-test.xml is read, but there&#39;s failure trac=\r\ne:\njava.lang.NoSuchMethodError:\njavax.persistence.PersistenceContext.proper=\r\nties()[Ljavax/persistence/PersistenceProperty;\n\tat org.springframework.orm.=\r\njpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.&lt;init=\r\n&gt;(PersistenceAnnotationBeanPostProcessor.java:543)\n\tat org.springframework.=\r\norm.jpa.support.PersistenceAnnotationBeanPostProcessor$2.doWith(Persistence=\r\nAnnotationBeanPostProcessor.java:376)\n\tat org.springframework.util.Reflecti=\r\nonUtils.doWithMethods(ReflectionUtils.java:435)\n\tat org.springframework.uti=\r\nl.ReflectionUtils.doWithMethods(ReflectionUtils.java:412)\n\tat org.springfra=\r\nmework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersisten=\r\nceMetadata(PersistenceAnnotationBeanPostProcessor.java:363)\n\tat org.springf=\r\nramework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcess=\r\nMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:296)\n\tat o=\r\nrg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory=\r\n.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory=\r\n.java:745)\n\tat org.springframework.beans.factory.support.AbstractAutowireCa=\r\npableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:448)\n=\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFa=\r\nctory$1.run(AbstractAutowireCapableBeanFactory.java:409)\n\tat java.security.=\r\nAccessController.doPrivileged(Native Method)\n\tat org.springframework.beans.=\r\nfactory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutow=\r\nireCapableBeanFactory.java:380)\n\tat org.springframework.beans.factory.suppo=\r\nrt.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)\n\tat org.sp=\r\nringframework.beans.factory.support.DefaultSingletonBeanRegistry.getSinglet=\r\non(DefaultSingletonBeanRegistry.java:221)\n\tat org.springframework.beans.fac=\r\ntory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)\n\ta=\r\nt org.springframework.beans.factory.support.AbstractBeanFactory.getBean(Abs=\r\ntractBeanFactory.java:185)\n\tat org.springframework.beans.factory.support.Ab=\r\nstractBeanFactory.getBean(AbstractBeanFactory.java:164)\n\tat org.springframe=\r\nwork.beans.factory.support.DefaultListableBeanFactory.preInstantiateSinglet=\r\nons(DefaultListableBeanFactory.java:429)\n\tat org.springframework.context.su=\r\npport.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractAp=\r\nplicationContext.java:729)\n\tat org.springframework.context.support.Abstract=\r\nApplicationContext.refresh(AbstractApplicationContext.java:381)\n\tat sun.ref=\r\nlect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.Native=\r\nMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect=\r\n.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n=\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.springframewor=\r\nk.test.jpa.AbstractJpaTests.runBare(AbstractJpaTests.java:230)\n\tat junit.fr=\r\namework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestR=\r\nesult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(=\r\nTestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:120)\n\ta=\r\nt junit.framework.TestSuite.runTest(TestSuite.java:230)\n\tat junit.framework=\r\n.TestSuite.run(TestSuite.java:225)\n\tat org.eclipse.jdt.internal.junit.runne=\r\nr.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)\n\tat org.ecli=\r\npse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat =\r\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestR=\r\nunner.java:460)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.=\r\nrunTests(RemoteTestRunner.java:673)\n\tat org.eclipse.jdt.internal.junit.runn=\r\ner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.inte=\r\nrnal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)\n\nMaven 2=\r\n &quot;mvn test&quot; is working fine.\n\nOn Fri, Jan 9, 2009 at 12:49 AM, Cenk =C7ivic=\r\ni &lt;cenk.civici@...&gt; wrote:\n&gt; Hi,\n&gt;\n&gt; What happens when you try to run=\r\n this in Eclipse ( I am guessing thats\n&gt; what you mean by running alone). D=\r\noes it fail when it tries to locate\n&gt; the app context? Is app context xml o=\r\nn the classpath? What error do\n&gt; you see?\n&gt;\n&gt; Cheers\n&gt; Cenk\n&gt;\n&gt; On Thu, Jan=\r\n 8, 2009 at 7:38 PM, Marko Majkic &lt;majkic@...&gt; wrote:\n&gt;&gt; Thanks for t=\r\nhe reference. I did something that works, but it works\n&gt;&gt; only when I do &quot;m=\r\nvn test&quot;. I cannot run test alone.\n&gt;&gt;\n&gt;&gt; I use AbstractJpaTests and those t=\r\nwo &quot;preparing&quot; methods:\n&gt;&gt;\n&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D\n&gt;&gt; package net.beote=\r\nl.service;\n&gt;&gt;\n&gt;&gt; import java.util.List;\n&gt;&gt;\n&gt;&gt; import javax.persistence.Enti=\r\ntyManager;\n&gt;&gt; import javax.persistence.EntityManagerFactory;\n&gt;&gt; import java=\r\nx.persistence.Persistence;\n&gt;&gt;\n&gt;&gt; import net.beotel.model.Bank;\n&gt;&gt;\n&gt;&gt; import=\r\n org.springframework.test.jpa.AbstractJpaTests;\n&gt;&gt; import org.springframewo=\r\nrk.transaction.annotation.Transactional;\n&gt;&gt;\n&gt;&gt; public class BankServiceTest=\r\n extends AbstractJpaTests {\n&gt;&gt;\n&gt;&gt; private BankServiceImpl bankService =3D n=\r\new BankServiceImpl() ;\n&gt;&gt;\n&gt;&gt; private static EntityManagerFactory emf;\n&gt;&gt; pr=\r\nivate static EntityManager em;\n&gt;&gt;\n&gt;&gt; public void onSetUp(){\n&gt;&gt; emf =3D Pers=\r\nistence.createEntityManagerFactory(&quot;testing1&quot;);\n&gt;&gt; em =3D emf.createEntityM=\r\nanager();\n&gt;&gt; em.getTransaction().begin();\n&gt;&gt; bankService.setEntityManager(e=\r\nm);\n&gt;&gt; }\n&gt;&gt;\n&gt;&gt; public void onTearDown(){\n&gt;&gt; em.getTransaction().commit();\n&gt;=\r\n&gt; }\n&gt;&gt;\n&gt;&gt; public BankService getBankService() {\n&gt;&gt; return bankService;\n&gt;&gt; }=\r\n\n&gt;&gt;\n&gt;&gt; public BankServiceTest() {\n&gt;&gt; super();\n&gt;&gt; }\n&gt;&gt; protected String[] ge=\r\ntConfigLocations() {\n&gt;&gt; return new String[] {\n&gt;&gt; &quot;classpath:applicationCont=\r\next-test.xml&quot;,\n&gt;&gt; };\n&gt;&gt; }\n&gt;&gt;\n&gt;&gt; @Transactional\n&gt;&gt; public void testAll() thr=\r\nows Exception {\n&gt;&gt; List&lt;Bank&gt; banks =3D bankService.findAll();\n&gt;&gt; int initi=\r\nalCount =3D banks.size();\n&gt;&gt; Bank bank=3D new Bank();\n&gt;&gt; bank.setName(&quot;OTP&quot;=\r\n);\n&gt;&gt; bankService.save(bank);\n&gt;&gt; assertNotNull(bank.getId());\n&gt;&gt;\n&gt;&gt; }\n&gt;&gt; }\n=\r\n&gt;&gt;\n&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D\n&gt;&gt;\n&gt;&gt; Is there any way to run this test alon=\r\ne? Do I have to include\n&gt;&gt; &quot;applicationContext-test.xml&quot; (from the src/test=\r\n/resources) explicitly\n&gt;&gt; in the code? I don&#39;t have to do this with my appl=\r\nication (include\n&gt;&gt; applicationContext.xml from the web.xml). Do I have to =\r\ninclude\n&gt;&gt; explcitly persistence-unit?\n&gt;&gt;\n&gt;&gt; At last, is there any working =\r\nexample (simple) testing some service\n&gt;&gt; (dao) using JPA? Thanks.\n&gt;&gt;\n&gt;&gt; On =\r\nWed, Jan 7, 2009 at 8:58 PM, Cenk =C7ivici &lt;cenk.civici@...&gt; wrote:\n&gt;=\r\n&gt;&gt; Hi,\n&gt;&gt;&gt;\n&gt;&gt;&gt; Have you looked at Spring integration testing support?\n&gt;&gt;&gt;\n&gt;=\r\n&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; http://static.springframework.org/spring/docs/2.5.x/reference/te=\r\nsting.html#testcontext-framework\n&gt;&gt;&gt;\n&gt;&gt;&gt; Spring TestContext lets you load a=\r\nn app context, configure\n&gt;&gt;&gt; transactions per fixture/method etc.\n&gt;&gt;&gt;\n&gt;&gt;&gt; C=\r\nheers\n&gt;&gt;&gt; Cenk =C7ivici\n&gt;&gt;&gt;\n&gt;&gt;&gt; On Wed, Jan 7, 2009 at 1:39 AM, majkic@ymai=\r\nl.com &lt;majkic@...&gt;\n&gt;&gt;&gt; wrote:\n&gt;&gt;&gt;&gt; Hi guys,\n&gt;&gt;&gt;&gt; I&#39;m new in the group=\r\n and I couldn&#39;t find anything on testing\n&gt;&gt;&gt;&gt; combination in the title.\n&gt;&gt;&gt;=\r\n&gt;\n&gt;&gt;&gt;&gt; I have applicationContext.xml where EntityManagerFactory is\n&gt;&gt;&gt;&gt; con=\r\nfigured. Model classes are mapped using Annotations. My service\n&gt;&gt;&gt;&gt; classe=\r\ns (DAO - for example BankImpl) implements interfaces (for\n&gt;&gt;&gt;&gt; example Bank=\r\n). Methods from these implementation are called in Struts2\n&gt;&gt;&gt;&gt; action clas=\r\nses (injected).\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; How can I configure my tests to be runnable as si=\r\nngle tests and as\n&gt;&gt;&gt;&gt; Maven2 tests? Is there any simple example - tutorial=\r\n? Should I have\n&gt;&gt;&gt;&gt; separate applicationContext-test.xml?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt; \n\n", 
    "profile": "majkic@ymail.com", 
    "topicId": 21269, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 369724152, 
    "prevInTime": 21276, 
    "contentTrasformed": false, 
    "postDate": "1231490941", 
    "canDelete": false, 
    "nextInTopic": 21278, 
    "prevInTopic": 21276, 
    "headers": {
        "inReplyToHeader": "PDEzY2NkYjVmMDkwMTA4MTU0OWkxYzU1ZWEzZXcxYTIxNjgxZWE5ZTQ0YjdAbWFpbC5nbWFpbC5jb20+", 
        "messageIdInHeader": "PGMzNWM5MGUwMDkwMTA5MDA0OWcxNDA1Y2U5NXBjZGJkMTQzM2RkZGJmZmRlQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PGdrMHE0MCtpaGxxQGVHcm91cHMuY29tPgkgPDEzY2NkYjVmMDkwMTA3MTE1OG8xZTQzNTdkZnAzZTZhZjllMTIzYTg0YmU1QG1haWwuZ21haWwuY29tPgkgPGMzNWM5MGUwMDkwMTA4MDkzOHI1NWNiZTY1Ymw5M2FlOTEzNTU2Yjc1OWY4QG1haWwuZ21haWwuY29tPgkgPDEzY2NkYjVmMDkwMTA4MTU0OWkxYzU1ZWEzZXcxYTIxNjgxZWE5ZTQ0YjdAbWFpbC5nbWFpbC5jb20+"
    }
}