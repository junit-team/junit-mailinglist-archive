{
    "numMessagesInTopic": 11, 
    "nextInTime": 24507, 
    "senderId": "eODmIqHiTus8YjYF7enLbnLAmFPRloWDxCAtLhdGLd_VF5lcJJz5pbXtF7As2PHp6NcQ7v38W8r3Hxs9nXFQYAwte8G0YLHsKg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Is it possible to have write NonBlocking Junit tests", 
    "from": "Colin Vipurs &lt;zodiaczx6@...&gt;", 
    "authorName": "Colin Vipurs", 
    "msgSnippet": "If I understand your post correctly you re just swapping blocking for polling? The blocking approach has the benefit of finishing as quickly as possible and", 
    "msgId": 24506, 
    "profile": "zodiac_zx6", 
    "topicId": 24500, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 329931326, 
    "messageBody": "<div id=\"ygrps-yiv-1045961273\"><div dir=\"ltr\">If I understand your post correctly you&#39;re just swapping blocking for polling?<div><br></div><div>The blocking approach has the benefit of finishing as quickly as possible and not having to wait for the next sleep cycle</div>\n</div><div class=\"ygrps-yiv-1045961273gmail_extra\"><br><br><blockquote><span title=\"qreply\"> <div class=\"ygrps-yiv-1045961273gmail_quote\">On Fri, Apr 11, 2014 at 1:06 AM, Cédric Beust ♔ <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cedric@...\">cedric@...</a>&gt;</span> wrote:<br>\n<blockquote class=\"ygrps-yiv-1045961273gmail_quote\" style=\"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p></p><div dir=\"ltr\">Here is a different approach that doesn&#39;t involve any blocking:<div><br></div><div><a rel=\"nofollow\" target=\"_blank\" href=\"http://beust.com/weblog/2005/02/01/testing-asynchronous-code/\">http://beust.com/weblog/2005/02/01/testing-asynchronous-code/</a><br>\n\n\n</div><div><br></div></div><div class=\"ygrps-yiv-1045961273gmail_extra\"><br clear=\"all\"><div>-- <div>Cédric<br><br></div></div><div><div class=\"ygrps-yiv-1045961273h5\">\n<br><br><div class=\"ygrps-yiv-1045961273gmail_quote\">On Thu, Apr 10, 2014 at 12:17 PM, Neil Swingler <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:neil@...\">neil@...</a>&gt;</span> wrote:<br><blockquote class=\"ygrps-yiv-1045961273gmail_quote\" style=\"border-left:1px #ccc solid;\">\n\n\n\n\n\n\n\n\n\n        \n\n\n\n\n<div>\n\n\n\n\n\n<br><br>\n\n\n\n\n<div dir=\"ltr\">Bah sent an incomplete example by accident. Here is the whole message<div><br></div><div><div><span style=\"font-family:arial, sans-serif;font-size:12.800000190734863px;\">Use a SettableFuture from guava. To borrow Colin&#39;s example</span><div style=\"font-family:arial, sans-serif;font-size:12.800000190734863px;\">\n\n\n\n<br></div></div><div style=\"font-family:arial, sans-serif;font-size:12.800000190734863px;\"><div dir=\"ltr\"><div><div><div><span style=\"white-space:pre-wrap;\">\t</span>@Test</div><div><span style=\"white-space:pre-wrap;\">\t</span>public void testAsync() throws Exception {</div>\n\n\n\n</div></div><div><div><span style=\"white-space:pre-wrap;\">\t\t</span>final SettableFuture&lt;Message&gt; future = SettableFuture.create();</div><div><span style=\"white-space:pre-wrap;\">\t\t</span>someAsyncCode(new Handler() {</div>\n\n\n<div><span style=\"white-space:pre-wrap;\">\t\t\t</span>public void handle(Message message) {</div>\n</div><div>                            future.set(message);</div><div><span style=\"white-space:pre-wrap;\">\t\t\t</span>}  <br></div><div><span style=\"white-space:pre-wrap;\">\t\t</span>});</div><div><span style=\"white-space:pre-wrap;\">\t\t</span></div>\n\n\n\n<div><span style=\"white-space:pre-wrap;\">\t\t</span></div><div><span style=\"white-space:pre-wrap;\">\t\t</span>assertThat(future.get(), is(something));</div><div><span style=\"white-space:pre-wrap;\">\t</span>}</div><span><font color=\"#888888\"><div>\n\n\n<br></div><div>\n- Neil</div></font></span></div></div></div></div><div class=\"ygrps-yiv-1045961273gmail_extra\"><br><br><div class=\"ygrps-yiv-1045961273gmail_quote\"><div>On 10 April 2014 18:32, Colin Vipurs <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:zodiaczx6@...\">zodiaczx6@...</a>&gt;</span> wrote:<br>\n\n\n\n</div><div><div><blockquote class=\"ygrps-yiv-1045961273gmail_quote\" style=\"border-left:1px #ccc solid;\">\n\n\n\n\n\n\n        \n\n\n\n\n<div>\n\n\n\n\n\n<br><br>\n\n\n\n\n<div dir=\"ltr\">You could use a locking mechanism shared between your test and handler so that progress continues as quick as possible and then put an overall timeout on your test in the event of failure.<div><br></div><div>\n\n\n\n\nSomething like this should work just fine:</div><div><br></div><div><div><span style=\"white-space:pre-wrap;\">\t</span>@Test</div><div><span style=\"white-space:pre-wrap;\">\t</span>public void testAsync() throws Exception {</div>\n\n\n\n\n<div><span style=\"white-space:pre-wrap;\">\t\t</span>final Semaphore lock = new Semaphore(0);</div><div><span style=\"white-space:pre-wrap;\">\t\t</span>someAsyncCode(new Handler() {</div><div><span style=\"white-space:pre-wrap;\">\t\t\t</span>public void handle() {</div>\n\n\n\n\n<div><span style=\"white-space:pre-wrap;\">\t\t\t\t</span>// put your assertions in here</div><div><span style=\"white-space:pre-wrap;\">\t\t\t\t</span>lock.release();</div><div><span style=\"white-space:pre-wrap;\">\t\t\t</span>}  </div>\n<div><span style=\"white-space:pre-wrap;\">\t\t</span>});</div><div><span style=\"white-space:pre-wrap;\">\t\t</span></div><div><span style=\"white-space:pre-wrap;\">\t\t</span></div><div><span style=\"white-space:pre-wrap;\">\t\t</span>lock.acquire();</div>\n\n\n\n\n<div><span style=\"white-space:pre-wrap;\">\t</span>}</div></div></div><div class=\"ygrps-yiv-1045961273gmail_extra\"><div><br><br><div class=\"ygrps-yiv-1045961273gmail_quote\">On Thu, Apr 10, 2014 at 4:21 PM,  <span dir=\"ltr\">&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:abhijeet.kushe@...\">abhijeet.kushe@...</a>&gt;</span> wrote:<br>\n\n\n\n\n<blockquote class=\"ygrps-yiv-1045961273gmail_quote\" style=\"border-left:1px #ccc solid;\">\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div>\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p><span style=\"font-family:Arial,;font-size:14px;\">I am writing a Junit tests for Amqp Message Listener.This is how the test is written.I send a message to a exchange and introduce a delay of 1s (assuming that the listener will do its job within that time frame).This approach slows down the build process as there 15-20 tests like these which take a minimum of 20 seconds to execute.Is there a way in which I can do this is a non blocking way.For pass a call handler which verifies the tests after the listener does it job.Something like Actors might be internally used</span></p>\n\n\n\n\n\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br><br clear=\"all\"><div><br></div></div><span><font color=\"#888888\">-- <br>Maybe she awoke to see the roommate&#39;s boyfriend swinging from the chandelier wearing a boar&#39;s head.<br>\n<br>Something which you, I, and everyone else would call &quot;Tuesday&quot;, of course.\n</font></span></div><div>\n\n\n\n\n\n\n<br>\n\n\n<br>\n\n\n\n\n<div style=\"color:white;\"></div>\n\n\n\n</div></div></blockquote></div></div></div><br></div><div><div>\n\n\n\n\n\n\n<br>\n\n\n<br>\n\n\n\n\n<div style=\"color:white;\"></div>\n\n\n\n</div></div></div></blockquote></div><br></div></div></div>\n<p></p>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div><br><br clear=\"all\"><div><br></div>-- <br>Maybe she awoke to see the roommate&#39;s boyfriend swinging from the chandelier wearing a boar&#39;s head.<br><br>Something which you, I, and everyone else would call &quot;Tuesday&quot;, of course.\n</span></blockquote></div>\n</div>", 
    "prevInTime": 24505, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1397219100", 
    "canDelete": false, 
    "nextInTopic": 24507, 
    "prevInTopic": 24505, 
    "headers": {
        "inReplyToHeader": "PENBT3BoZ0pEV09Bb01Ta25pNVotNGZmdXdNM0wxcFRkeFlSS3o5RGZtRjdrdGlobnEyUUBtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PENBS2k0Mjcyd3F1c2tNOFhDelBkRUw0SnZxUF9oQmtRZ3RDRl9VNFJ6OFFEYmNFZGRfd0BtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGxpNmN0aitoNWw2cWtAWWFob29Hcm91cHMuY29tPgk8Q0FLaTQyNzN0d1gzNWlSZ01nOTVMeXcrcEJIcHJzQlFScW8xdGNMYStDeDRIRlQzd3J3QG1haWwuZ21haWwuY29tPgk8Q0FGWUg5QnFybzVqSmZlcUhzdVlhb0EyRytmRVEzS3VVYW1BWUNFNHh4ZHB3RFVQNVJRQG1haWwuZ21haWwuY29tPgk8Q0FPcGhnSkRXT0FvTVNrbmk1Wi00ZmZ1d00zTDFwVGR4WVJLejlEZm1GN2t0aWhucTJRQG1haWwuZ21haWwuY29tPg=="
    }
}