{
    "numMessagesInTopic": 1, 
    "nextInTime": 3532, 
    "senderId": "VXkj6mJCRaM0FgnPGkMWOYHv-MyPzGOexOw4bhsjM_rgFMuq4GYBXKp0pj0VLc7s9wvnmK3ZOpYMdzr6D5C_MYPhry1La9ZsfYdOWCAG5mA", 
    "systemMessage": false, 
    "subject": "RE: Ant task, JUnit and trace filtering", 
    "from": "Scott Stirling &lt;sstirling@...&gt;", 
    "authorName": "Scott Stirling", 
    "msgSnippet": "Hello, After adding this feature to the basic formatter as well, this change to the junit, batchtest, and test tasks has been committed to the Ant 1.5 source ", 
    "msgId": 3531, 
    "profile": "jrun5", 
    "topicId": 3531, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65616759, 
    "messageBody": "<div id=\"ygrps-yiv-1465200491\">Hello,<br/>\n<br/>\nAfter adding this feature to the basic formatter as well, this change to the<br/>\njunit, batchtest, and test tasks has been committed to the Ant 1.5 source<br/>\ntree.   <br/>\n<br/>\nIf you use Ant 1.5, the JUnit developers (Ken, Erich, anyone else?) may wish<br/>\nto disable this feature so they see more than just the<br/>\nAssertionFailedExceptions in any error or failure traces in JUnit itself.<br/>\nTo do so, set filtertrace=&quot;false&quot; in the junit, batchtest, or test task<br/>\nbeing used.  There should be a note about it in the WHAT&#39;S NEW section of<br/>\nthe Ant 1.5 docs when 1.5 is released.  Ant 1.5 is in alpha and only<br/>\navailable as source or a nightly build right now from<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://jakarta.apache.org/ant.\">http://jakarta.apache.org/ant.</a><br/>\n<br/>\nBest,<br/>\n<br/>\nScott Stirling<br/>\nJRun QA<br/>\nMacromedia<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; -----Original Message-----<br/>\n&gt; From: Scott Stirling <br/>\n&gt; <br/>\n&gt; I modified the Apache Jakarta Ant JUnit task to support the <br/>\n&gt; JUnit feature that filters stack frames in exception and <br/>\n&gt; error messages so that junit framework method frames don&#39;t <br/>\n&gt; clutter your exception traces.  Unless you are testing JUnit <br/>\n&gt; itself, you really don&#39;t need to see any of those <br/>\n&gt; junit.framework.* stack frames in an exception trace.  The <br/>\n&gt; zip file containing this README, the source code, and a <br/>\n&gt; compiled version with the whole Ant optional.jar is in <br/>\n&gt; ant15-junitTask-stackFilter.zip at <br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://groups.yahoo.com/group/junit/files/\">http://groups.yahoo.com/group/junit/files/</a><br/>\n&gt; <br/>\n&gt; It works with the PlainResultsFormatter and <br/>\n&gt; XMLResultsFormatter.  It works with the JUnit task, whether <br/>\n&gt; you fork the JVM or not, and it also works with the batchtest <br/>\n&gt; JUnit task, again, whether you fork or not.  Now we have <br/>\n&gt; nice, short exception traces in our nice HTML reports <br/>\n&gt; produced with the Ant JUnit and JUnitReport tasks.<br/>\n&gt; <br/>\n&gt; The built-in filter applies to the following call patterns:<br/>\n&gt;   &quot;junit.framework.TestCase&quot;,<br/>\n&gt;   &quot;junit.framework.TestResult&quot;,<br/>\n&gt;   &quot;junit.framework.TestSuite&quot;,<br/>\n&gt;   &quot;junit.framework.Assert.&quot;,<br/>\n&gt;   &quot;junit.swingui.TestRunner&quot;,<br/>\n&gt;   &quot;junit.awtui.TestRunner&quot;,<br/>\n&gt;   &quot;junit.textui.TestRunner&quot;,<br/>\n&gt;   &quot;java.lang.reflect.Method.invoke(&quot;,<br/>\n&gt;   &quot;org.apache.tools.ant.&quot;<br/>\n&gt; <br/>\n&gt; Like the filter in JUnit, it is not configurable, other than <br/>\n&gt; to turn it off/on.  It could be, but I think the intended <br/>\n&gt; purpose is pretty well achieved with that default set of patterns.<br/>\n&gt; <br/>\n&gt; To use it in a build.xml, do nothing; the filtering is <br/>\n&gt; enabled by default.  To disable it, just add the attribute <br/>\n&gt; filtertrace=&quot;false&quot; to your junit task element, e.g.:<br/>\n&gt; <br/>\n&gt; &lt;junit printsummary=&quot;yes&quot; filtertrace=&quot;true&quot; <br/>\n&gt; dir=&quot;${basedir}/lib&quot; haltonerror=&quot;${qa.junit.haltonerror}&quot; <br/>\n&gt; haltonfailure=&quot;${qa.junit.haltonfailure}&quot; fork=&quot;yes&quot;&gt;<br/>\n&gt; <br/>\n&gt; Here is an example of the before and after versions of a <br/>\n&gt; filtered AssertionFailedError run in Ant:<br/>\n&gt; <br/>\n&gt; Original, unfiltered output you get with Ant:<br/>\n&gt; <br/>\n&gt; junit.framework.AssertionFailedError<br/>\n&gt; at junit.framework.Assert.fail(Assert.java:51)<br/>\n&gt; at junit.framework.Assert.assertTrue(Assert.java:38)<br/>\n&gt; at junit.framework.Assert.assertNotNull(Assert.java:199)<br/>\n&gt; at junit.framework.Assert.assertNotNull(Assert.java:193)<br/>\n&gt; at test.jrunx.persistence.DatabaseTest.setUp(DatabaseTest.java:61)<br/>\n&gt; at junit.framework.TestCase.runBare(TestCase.java:138)<br/>\n&gt; at junit.framework.TestResult$1.protect(TestResult.java:106)<br/>\n&gt; at junit.framework.TestResult.runProtected(TestResult.java:124)<br/>\n&gt; at junit.framework.TestResult.run(TestResult.java:109)<br/>\n&gt; at junit.framework.TestCase.run(TestCase.java:131)<br/>\n&gt; at junit.framework.TestSuite.runTest(TestSuite.java:173)<br/>\n&gt; at junit.framework.TestSuite.run(TestSuite.java:168)<br/>\n&gt; at <br/>\n&gt; org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.r<br/>\n&gt; un(JUnitTestRunner.java:252)<br/>\n&gt; at <br/>\n&gt; org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.m<br/>\n&gt; ain(JUnitTestRunner.java:433)<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; With filtertrace enabled:<br/>\n&gt; <br/>\n&gt; junit.framework.AssertionFailedError<br/>\n&gt; at test.jrunx.persistence.DatabaseTest.setUp(DatabaseTest.java:61)<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; The source code is modified from Ant 1.5 source from about <br/>\n&gt; two weeks ago, so it will probably only work with Ant 1.5, <br/>\n&gt; but I haven&#39;t even tried it with 1.4.  You should be able to <br/>\n&gt; drop the optional.jar in the zip file into your $ANT_HOME/lib <br/>\n&gt; to try it out.  This optional.jar has &quot;the works&quot; -- pretty <br/>\n&gt; much all the optional tasks.<br/>\n&gt; <br/>\n&gt; The other option is to compile the source files and then &quot;jar <br/>\n&gt; uvf $ANT_HOME/lib/optional.jar <br/>\n&gt; org/apache/tools/ant/taskdefs/optional/junit&quot; the classes <br/>\n&gt; into your Ant optional.jar.<br/>\n&gt; <br/>\n&gt; Scott Stirling<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:sstirling@...\">sstirling@...</a><br/>\n&gt; JRun QA<br/>\n&gt; Macromedia<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 3530, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1008266237", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDRGNDdEQ0ZBREM4REQ1MTE4RDJCMDA1MDhCOTUyRDk2MEMzQzZBQHNhbHNhLmFsbGFpcmUuY29tPg=="
    }
}