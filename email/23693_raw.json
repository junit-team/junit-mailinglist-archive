{
    "numMessagesInTopic": 11, 
    "nextInTime": 23694, 
    "senderId": "f8Wy4CHbOu3CSLr-GpdfFaLu1m9yrv_7y-liLc_R1sHcAbHh9CJfQ7LPconWMpVmVdlcEhIHcIKo9W-jSlfOB3Ed", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Alphabetizing test method run order?", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "... That s a fair request.  Actually, I think the code has evolved to the point that adding a feature to ParentRunner to support this would be remarkably easy:", 
    "msgId": 23693, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nX-Received: (qmail 83610 invoked from network); 22 Sep 2011 14:25:33 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m9.grp.sp2.yahoo.com with QMQP; 22 Sep 2011 14:25:33 -0000\r\nX-Received: from unknown (HELO mail-qw0-f47.google.com) (209.85.216.47)\n  by mta1.grp.sp2.yahoo.com with SMTP; 22 Sep 2011 14:25:33 -0000\r\nX-Received: by qwh6 with SMTP id 6so5841595qwh.6\n        for &lt;junit@yahoogroups.com&gt;; Thu, 22 Sep 2011 07:25:32 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.68.19.66 with SMTP id c2mr4375413pbe.62.1316701532389; Thu, 22\n Sep 2011 07:25:32 -0700 (PDT)\r\nX-Received: by 10.68.65.133 with HTTP; Thu, 22 Sep 2011 07:25:32 -0700 (PDT)\r\nIn-Reply-To: &lt;j5fc0n+i6a0@...&gt;\r\nReferences: &lt;CAA3E+eW8k1HBAaj--t57ZQ4Hy-HZbJx49yE83MFDyxEg_TmAwQ@...&gt;\n\t&lt;j5fc0n+i6a0@...&gt;\r\nDate: Thu, 22 Sep 2011 10:25:32 -0400\r\nX-Google-Sender-Auth: eNllyZNYJ541LBUtUSWQEKV6Bec\r\nMessage-ID: &lt;CACj8BuNQi-JqFe9=pdS97sWZoU7KoJoc_AaEuckZ6jQ7kk5WQQ@...&gt;\r\nTo: junit@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: David Saff &lt;david@...&gt;\r\nSubject: Re: [junit] Re: Alphabetizing test method run order?\r\nX-Yahoo-Group-Post: member; u=341876227; y=kqtnW83M7jJG6r97IqN24yphPsQKTYdTYm934yw2yUQ\r\nX-Yahoo-Profile: dsaff\r\n\r\nOn Thu, Sep 22, 2011 at 9:08 AM, mjfarwell &lt;matthew@...&gt; wrote:\n&gt;=\r\n\n&gt;\n&gt; --- In junit@yahoogroups.com, Kevin Cooney &lt;kcooney@...&gt; wrote:\n&gt;&gt;\n&gt;&gt; =\r\nOn Tue, Sep 20, 2011 at 3:07 AM, Dominik Dorn &lt;dorn@...&gt; wrote:\n&gt;&gt;\n&gt;&gt; &gt; **\n=\r\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Hmm... I think it would be even better to _ensure_ that the =\r\ntest cases are\n&gt;&gt; &gt; run\n&gt;&gt; &gt; in a random order but provide a summary at the=\r\n end of the testrun where the\n&gt;&gt; &gt; order gets printed.\n&gt;&gt; &gt;\n&gt;&gt;\n&gt;&gt; -10\n&gt;&gt;\n&gt;&gt;=\r\n A number of projects I worked on used to do this. While this may initially=\r\n\n&gt;&gt; seem like a good idea, it was problematic for us for a number of reason=\r\ns.\n&gt;&gt;\n&gt;&gt; If the tests are run in a random order, then a small change to a t=\r\nest or a\n&gt;&gt; class under test could cause a completely unrelated test to fai=\r\nl. Many\n&gt;&gt; developers will assume that it is their change that caused the p=\r\nroblem,\n&gt;&gt; leading them in a wild goose chase trying to see which of their =\r\nchanges\n&gt;&gt; caused the problems and why, and when they realize it is due to =\r\nthe test\n&gt;&gt; ordering, they need to do a big context switch back to their or=\r\niginal\n&gt;&gt; task. This would be made worse by the fact that simply rerunning =\r\nthe tests\n&gt;&gt; would cause them to pass again (or worse, cause a different te=\r\nst to fail).\n&gt;&gt;\n&gt;&gt; Note that I don&#39;t think developers should be writing tes=\r\nts where the outcome\n&gt;&gt; depends on the ordering that the test methods were =\r\nrun. I just don&#39;t think\n&gt;&gt; we should assume that fixing the tests with this=\r\n problem is necessarily as\n&gt;&gt; important as what the developer is trying to =\r\ndo.\n&gt;&gt;\n&gt;&gt; Making the test order random by default also does not necessarily=\r\n make it\n&gt;&gt; easier to track down problems with ordering of tests, since if =\r\nyou ran the\n&gt;&gt; failing test suite again, you would get a different run orde=\r\nr. JUnit could\n&gt;&gt; print out the random seed used for that particular run, b=\r\nut then developers\n&gt;&gt; would have to figure out how to pass the previous ran=\r\ndom seed back to the\n&gt;&gt; test (how to do this would depend on which IDE or b=\r\nuild system they used).\n&gt;\n&gt; +10.\n&gt;\n&gt;&gt; If developers want the ordering to be=\r\n shuffled, they should use a custom\n&gt;&gt; runner that shuffles the tests. We u=\r\nsed to do this in our JUnit3 tests with\n&gt;&gt; a custom subclass of TestSuite. =\r\nIt used a random seed based on the\n&gt;&gt; System.currentTimeMillis() at midnigh=\r\nt, so if a particular ordering caused\n&gt;&gt; the tests to fail, it was reproduc=\r\nible for the rest of the day.\n&gt;&gt; Unfortunately, developers often assumed th=\r\nat the breakage was caused by one\n&gt;&gt; of the changes submitted since the mos=\r\nt recent green run of\n&gt;&gt; the continuous build.\n&gt;\n&gt; I think this is a very g=\r\nood point. The ordering absolutely needs to be deterministic by default, so=\r\n any problems are reproducible easily.\n&gt;\n&gt;&gt; Personally, I don&#39;t need the te=\r\nst ordering to be defined, but I need it to\n&gt;&gt; be deterministic. If I build=\r\n the same code with the same JDK and run it in\n&gt;&gt; the same JRE on the same =\r\nkernel on a different day, the tests should run in\n&gt;&gt; the same order. We of=\r\nten re-run tests that failed earlier in the day, using\n&gt;&gt; the same source c=\r\node, to try to determine which failures were due to flaky\n&gt;&gt; tests. Having =\r\nthe tests run in a different order would make it much more\n&gt;&gt; difficult to =\r\ndo this analysis.\n&gt;\n&gt; I do use the ordering of junit tests, not because the=\r\n tests are inter-dependent, but simply because I have slow tests and fast t=\r\nests. I use junit for integration tests, so I run a batch from junit, and l=\r\nook at the results of the batch. Some tests have small datasets (10-15 seco=\r\nnds) and some have large datasets (10 minutes). I put the small ones first =\r\nso I can either stop the test if the first fails, or do something else for =\r\nten minutes.\n&gt;\n&gt; If I have to run these tests using a different Runner, the=\r\nn that&#39;s fine, but I would rather not have to change anything (major).\n&gt;\n&gt;&gt;=\r\n I suggest that JUnit4 order the tests by the hash code of the test method\n=\r\n&gt;&gt; name. If there is a tie, JUnit could compare the test names using the\n&gt;&gt;=\r\n natural ordering defined by String.compareTo(String) (possibly in reverse\n=\r\n&gt;&gt; :-)\n&gt;\n&gt; I would suggest we use the principle of least surprise here. If =\r\nthe hashCode is used as an ordering, yes it is deterministic, but it will s=\r\neem random. If you use the test name, it is less surprising. People are use=\r\nd to tests being run in bytecode order.\n&gt;\n&gt; If you change the order then at=\r\n least change it so that if people have problems due to ordering they can e=\r\nasily change the order. Yes, I know that their tests are broken, but they p=\r\nrobably do too. If the order is based upon the hashCode, I have to either r=\r\nun that test with a custom Runner (and make sure that it&#39;s usable in Eclips=\r\ne, Jenkins, maven, etc. etc.)[*]. If the order is simply the name, then all=\r\n I have to do to &#39;fix&#39; my problem is change the name.\n\nThat&#39;s a fair reques=\r\nt.  Actually, I think the code has evolved to the\npoint that adding a featu=\r\nre to ParentRunner to support this would be\nremarkably easy:\n\n@RunWith(Suit=\r\ne.class)\n@SuiteClasses({...})\npublic class MySuite {\n  @SortWith public sta=\r\ntic Sorter alpha =3D Sorters.ALPHABETICAL;\n  @FilterWith public static Filt=\r\ner category =3D new\nCategoryFilter(MyCategory.class);\n}\n\nAnyone want to tak=\r\ne a crack at it?\n\n   David Saff\n\n&gt;\n&gt; Matthew Farwell.\n&gt;\n&gt; [*] Or change the=\r\n hashCode. For instance, I could have two tests:\n&gt;\n&gt; public void testStuff(=\r\n)\n&gt; public void testMoreStuff()\n&gt;\n&gt; These run in order as above. If the has=\r\nhCode were used to order them, then we get testMoreStuff() then testStuff()=\r\n. So to keep the original order we have to change testMoreStuff to testMore=\r\nStuffTextToIncreaseHashCode() :-)\n&gt;\n&gt;\n&gt;\n&gt; ---------------------------------=\r\n---\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n", 
    "profile": "dsaff", 
    "topicId": 23671, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "prevInTime": 23692, 
    "contentTrasformed": false, 
    "postDate": "1316701532", 
    "canDelete": false, 
    "nextInTopic": 23814, 
    "prevInTopic": 23691, 
    "headers": {
        "inReplyToHeader": "PGo1ZmMwbitpNmEwQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBQ2o4QnVOUWktSnFGZTk9cGRTOTdzV1pvVTdLb0pvY19BYUV1Y2taNmpRN2trNVdRUUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PENBQTNFK2VXOGsxSEJBYWotLXQ1N1pRNEh5LUhaYkp4NDl5RTgzTUZEeXhFZ19UbUF3UUBtYWlsLmdtYWlsLmNvbT4JPGo1ZmMwbitpNmEwQGVHcm91cHMuY29tPg=="
    }
}