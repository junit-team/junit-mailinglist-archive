{
    "numMessagesInTopic": 4, 
    "nextInTime": 18673, 
    "senderId": "9CZ2BljhFWPaZ8wznVyfsyCOYA3_J334v1iQXAOcgZuGznCUgA0CC7_4b_8oPkntNvcwHPy1_nEf4ToOEuIQYcDC", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: how do I use my filter when running from ANT1.7", 
    "from": "&quot;David Saff&quot; &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "... Yes, a customized runner is what you want.  I thought I d posted such a creature sometime in the past, but wasn t able to find it.  Here s some code that", 
    "msgId": 18672, 
    "rawEmail": "Return-Path: &lt;david.saff@...&gt;\r\nX-Sender: david.saff@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 25247 invoked from network); 8 Jan 2007 18:18:55 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m38.grp.scd.yahoo.com with QMQP; 8 Jan 2007 18:18:55 -0000\r\nReceived: from unknown (HELO nf-out-0910.google.com) (64.233.182.188)\n  by mta7.grp.scd.yahoo.com with SMTP; 8 Jan 2007 18:18:54 -0000\r\nReceived: by nf-out-0910.google.com with SMTP id y38so9628050nfb\n        for &lt;junit@yahoogroups.com&gt;; Mon, 08 Jan 2007 10:18:52 -0800 (PST)\r\nReceived: by 10.49.41.3 with SMTP id t3mr10529826nfj.1168280332941;\n        Mon, 08 Jan 2007 10:18:52 -0800 (PST)\r\nReceived: by 10.49.43.11 with HTTP; Mon, 8 Jan 2007 10:18:47 -0800 (PST)\r\nMessage-ID: &lt;4f7da6b90701081018qf5d855au5051c6fde2478491@...&gt;\r\nDate: Mon, 8 Jan 2007 12:18:47 -0600\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;enlfto+hm21@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nReferences: &lt;enj5r4+osmi@...&gt; &lt;enlfto+hm21@...&gt;\r\nX-Google-Sender-Auth: 0e7d3b101ddb3c0d\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: &quot;David Saff&quot; &lt;saff@...&gt;\r\nSubject: Re: [junit] Re: how do I use my filter when running from ANT1.7\r\nX-Yahoo-Group-Post: member; u=139771899; y=tCnPfKUzanL39e1Wjq72rYIAg4cK0Zf6gwi1tmQdt3I\r\nX-Yahoo-Profile: dsaff\r\n\r\nOn 1/5/07, adass75 &lt;adass75@...&gt; wrote:\n&gt; I guess I want to be able to apply my filter and yet not run from\n&gt; the main but using the RunWith option. Is the answer to this a\n&gt; customized runner where my filter is applied?adass,\n\nYes, a customized runner is what you want.  I thought I&#39;d posted such\na creature sometime in the past, but wasn&#39;t able to find it.  Here&#39;s\nsome code that should do the trick.  Above is the usage, below is the\nimplementation.  Share and Enjoy,\n\n   David Saff\n\n\n\npackage filter;\n\nimport static org.junit.Assert.*;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport org.junit.Test;\nimport org.junit.runner.Description;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Request;\nimport org.junit.runner.Result;\nimport org.junit.runner.RunWith;\nimport org.junit.runner.Runner;\nimport org.junit.runner.manipulation.Filter;\nimport org.junit.runner.notification.RunNotifier;\n\npublic class FilterTest {\n\t\n\t\n\t// TEST\n\t\n\t\n\tpublic static class AFilter extends PrefixFilter {\n\t\t@Override\n\t\tprotected String getPrefix() {\n\t\t\treturn &quot;a&quot;;\n\t\t}\n\t}\n\n\tpublic static class BFilter extends PrefixFilter {\n\t\t@Override\n\t\tprotected String getPrefix() {\n\t\t\treturn &quot;b&quot;;\n\t\t}\n\t}\n\n\tpublic static class OneAOneB {\n\t\t@Test\n\t\tpublic void a1() {\n\n\t\t}\n\n\t\t@Test\n\t\tpublic void b1() {\n\n\t\t}\n\t}\n\n\tpublic static class TwoAsOneB extends OneAOneB {\n\t\t@Test\n\t\tpublic void a2() {\n\n\t\t}\n\t}\n\n\t@RunWith(FilterRunner.class)\n\t@FilteredClass(testClass = OneAOneB.class, filterClass = AFilter.class)\n\tpublic static class OneA {\n\n\t}\n\n\t@RunWith(FilterRunner.class)\n\t@FilteredClass(testClass = TwoAsOneB.class, filterClass = AFilter.class)\n\tpublic static class TwoAs {\n\n\t}\n\n\t@RunWith(FilterRunner.class)\n\t@FilteredClass(testClass = TwoAsOneB.class, filterClass = BFilter.class)\n\tpublic static class OneB {\n\n\t}\n\n\t@Test\n\tpublic void filterRunnerWorksOnTwoAs() {\n\t\tResult result = JUnitCore.runClasses(TwoAs.class);\n\t\tassertEquals(2, result.getRunCount());\n\t}\n\n\t@Test\n\tpublic void filterRunnerWorksOnB() {\n\t\tResult result = JUnitCore.runClasses(OneB.class);\n\t\tassertEquals(1, result.getRunCount());\n\t}\n\n\t@Test\n\tpublic void filterRunnerWorksOnA() {\n\t\tResult result = JUnitCore.runClasses(OneA.class);\n\t\tassertEquals(1, result.getRunCount());\n\t}\n\t\n\n\t\n\t\n\t// IMPLEMENTATION\n\t\n\t\n\t\n\t\n\t@Retention(RetentionPolicy.RUNTIME)\n\tpublic @interface FilteredClass {\n\n\t\tClass&lt;?&gt; testClass();\n\n\t\tClass&lt;? extends Filter&gt; filterClass();\n\n\t}\n\n\tpublic abstract static class PrefixFilter extends Filter {\n\t\t@Override\n\t\tpublic String describe() {\n\t\t\treturn &quot;methods beginning with &quot; + getPrefix();\n\t\t}\n\n\t\t@Override\n\t\tpublic boolean shouldRun(Description description) {\n\t\t\treturn (description.getDisplayName().startsWith(getPrefix()));\n\t\t}\n\n\t\tprotected abstract String getPrefix();\n\t}\n\n\tpublic static class FilterRunner extends Runner {\n\t\tprivate final Runner delegate;\n\n\t\tpublic FilterRunner(Class&lt;?&gt; testClass) throws Exception {\n\t\t\tRequest classRequest = Request.aClass(getTestClass(testClass));\n\t\t\tFilter filter = getFilter(testClass);\n\t\t\tdelegate = classRequest.filterWith(filter).getRunner();\n\t\t}\n\n\t\tprivate Class&lt;?&gt; getTestClass(Class&lt;?&gt; testClass) {\n\t\t\treturn annotation(testClass).testClass();\n\t\t}\n\n\t\tprivate Filter getFilter(Class&lt;?&gt; testClass) throws Exception {\n\t\t\treturn annotation(testClass).filterClass().newInstance();\n\t\t}\n\n\t\tprivate FilteredClass annotation(Class&lt;?&gt; testClass) {\n\t\t\treturn testClass.getAnnotation(FilteredClass.class);\n\t\t}\n\n\t\t@Override\n\t\tpublic Description getDescription() {\n\t\t\treturn delegate.getDescription();\n\t\t}\n\n\t\t@Override\n\t\tpublic void run(RunNotifier notifier) {\n\t\t\tdelegate.run(notifier);\n\t\t}\n\t}\n}\n\n", 
    "profile": "dsaff", 
    "topicId": 18647, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "prevInTime": 18671, 
    "contentTrasformed": false, 
    "postDate": "1168280327", 
    "canDelete": false, 
    "nextInTopic": 18682, 
    "prevInTopic": 18649, 
    "headers": {
        "inReplyToHeader": "PGVubGZ0bytobTIxQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDcwMTA4MTAxOHFmNWQ4NTVhdTUwNTFjNmZkZTI0Nzg0OTFAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PGVuajVyNCtvc21pQGVHcm91cHMuY29tPiA8ZW5sZnRvK2htMjFAZUdyb3Vwcy5jb20+"
    }
}