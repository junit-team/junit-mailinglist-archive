{
    "numMessagesInTopic": 15, 
    "nextInTime": 14350, 
    "senderId": "M18W8_-gN2Zj8QPNwx8wIlYFVdJYQnTIcEnOgnYL1qCV9TOB2HcOVwcYQ131fMn5zsH-xEVAxSLy9EDUntVcOJyOzIuF9IO0Yx4aQDc", 
    "systemMessage": false, 
    "subject": "Re: [junit] Writing a test for a PrintStream and for a log rotation method", 
    "from": "Kevin Lawrence &lt;kevin@...&gt;", 
    "authorName": "Kevin Lawrence", 
    "msgSnippet": "1. Why is createLogFile() private static ? If it were a public non-static method called create() in a class called, say, LogFile, you could separate the file", 
    "msgId": 14349, 
    "rawEmail": "Return-Path: &lt;kevin@...&gt;\r\nX-Sender: kevin@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 47377 invoked from network); 11 Aug 2005 17:27:06 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m9.grp.scd.yahoo.com with QMQP; 11 Aug 2005 17:27:06 -0000\r\nReceived: from unknown (HELO ylpvm12.prodigy.net) (207.115.57.43)\n  by mta4.grp.scd.yahoo.com with SMTP; 11 Aug 2005 17:27:06 -0000\r\nReceived: from ylpvm01.prodigy.net (ylpvm01-int.prodigy.net [207.115.5.207])\n\tby ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j7BHR6ck006180\n\tfor &lt;junit@yahoogroups.com&gt;; Thu, 11 Aug 2005 13:27:06 -0400\r\nX-ORBL: [64.166.72.226]\r\nReceived: from [10.250.100.67] (64-166-72-226.ded.pacbell.net [64.166.72.226] (may be forged))\n\tby ylpvm01.prodigy.net (8.13.4 dk-milter linux/8.13.4) with ESMTP id j7BHR2j9001632\n\tfor &lt;junit@yahoogroups.com&gt;; Thu, 11 Aug 2005 13:27:02 -0400\r\nMessage-ID: &lt;42FB8A67.1050409@...&gt;\r\nDate: Thu, 11 Aug 2005 10:27:03 -0700\r\nUser-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: junit@yahoogroups.com\r\nReferences: &lt;20050811091922.76015.qmail@...&gt;\r\nIn-Reply-To: &lt;20050811091922.76015.qmail@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Kevin Lawrence &lt;kevin@...&gt;\r\nSubject: Re: [junit] Writing a test for a PrintStream and for a log rotation\n method\r\nX-Yahoo-Group-Post: member; u=81949451; y=iKb3gCpBcRqyRQxzKJSDh3RDdsCzhtME4lMBIEd2IHmEvD6TZibf6077NClcUCM\r\nX-Yahoo-Profile: kevinwilliamlawrence\r\n\r\n1. Why is createLogFile() private static ?\n\nIf it were a public non-static method called create() in a class called, \nsay, LogFile, you could separate the file creation from the stream \nhandling and test each independently.\n\n2. A common technique is to wrap the date handling in a class which you \ncan then manipulate in your test.\n\nKevin\n\n\nAsif Sattar wrote:\n&gt; Hi everyone,\n&gt; \n&gt; Two questions:\n&gt; \n&gt; 1. I&#39;m trying to write a test for a method that does not\n&gt; return anything.  It creates a printstream for writing to a\n&gt; log file.  I&#39;ve included the code below.  How do I go about\n&gt; writing a test for this?\n&gt; \n&gt;     private static void createLogFile() {\n&gt; \n&gt;         Date currentDate = new Date();\n&gt;         if (logFilePrintStream == null || logFileDate ==\n&gt; null || currentDate.after(logFileDate)) {\n&gt;             String logFileInstanceName = logFileDirectory +\n&gt; &#39;&#92;&#92;&#39; + logFilePrefix\n&gt;                     +\n&gt; logFileNameDateFormat.format(logFileDate) + &quot;.log&quot;;\n&gt;             logFileDate = currentDate;\n&gt; \n&gt;             try {\n&gt;                 logFilePrintStream = new PrintStream(new\n&gt; FileOutputStream(logFileInstanceName, true));\n&gt;                 System.setErr(logFilePrintStream);\n&gt;                 System.setOut(logFilePrintStream);\n&gt;             } catch (IOException ioe) {\n&gt;                 ioe.printStackTrace();\n&gt;             } catch (SecurityException e) {\n&gt;                 e.printStackTrace();\n&gt;             }\n&gt;             \n&gt;             logRotation();\n&gt;         }\n&gt;     }\n&gt; \n&gt; 2. The logrotation method above basically rotates log files\n&gt; based on dates and deletes files if they are more than 7\n&gt; days old.  Any ideas on how to write a test for this? \n&gt; Again, code attached below:\n&gt; \n&gt;     private static void logRotation() {\n&gt;         LinkedList logFilesInLogDirectory = new\n&gt; LinkedList();     \n&gt;         \n&gt;         // Populate logFilesInLogDirectory with files in\n&gt; logFileDirectory\n&gt;         File logFilesInDirectory = new\n&gt; File(logFileDirectory);\n&gt;         String[] logFilesArray =\n&gt; logFilesInDirectory.list();\n&gt;         logFilesInLogDirectory = new\n&gt; LinkedList(Arrays.asList(logFilesArray));\n&gt; \n&gt; \n&gt;         \n&gt;         // Remove files that are not smart card log files\n&gt; from file list\n&gt;         for (int i = 0; i &lt; logFilesInLogDirectory.size();\n&gt; i++) {\n&gt;            \n&gt; if(!((String)logFilesInLogDirectory.get(i)).startsWith(logFilePrefix))\n&gt; {\n&gt;                 logFilesInLogDirectory.remove(i);\n&gt;             }\n&gt;         }\n&gt;         \n&gt;         // Delete oldest files if there are more than\n&gt; noOfPreviousLogFiles files  \n&gt;         if (logFilesInLogDirectory.size() &gt;\n&gt; noOfPreviousLogFiles) {\n&gt;             Collections.sort(logFilesInLogDirectory);\n&gt;             for (int i = (noOfPreviousLogFiles-1); i &lt;\n&gt; logFilesInLogDirectory.size(); i++) {\n&gt;                 new\n&gt; File((String)logFilesInLogDirectory.remove(i)).delete();\n&gt;             }\n&gt;         }\n&gt;     }\n&gt; \n&gt; Regards\n&gt; \n&gt; Asif\n&gt; \n&gt; __________________________________________________\n&gt; Do You Yahoo!?\n&gt; Tired of spam?  Yahoo! Mail has the best spam protection around \n&gt; http://mail.yahoo.com \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n\n", 
    "profile": "kevinwilliamlawrence", 
    "topicId": 14345, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 81949451, 
    "prevInTime": 14348, 
    "contentTrasformed": false, 
    "postDate": "1123781223", 
    "canDelete": false, 
    "nextInTopic": 14351, 
    "prevInTopic": 14348, 
    "headers": {
        "inReplyToHeader": "PDIwMDUwODExMDkxOTIyLjc2MDE1LnFtYWlsQHdlYjMwMDA4Lm1haWwubXVkLnlhaG9vLmNvbT4=", 
        "messageIdInHeader": "PDQyRkI4QTY3LjEwNTA0MDlAZGlhbW9uZC1za3kuY29tPg==", 
        "referencesHeader": "PDIwMDUwODExMDkxOTIyLjc2MDE1LnFtYWlsQHdlYjMwMDA4Lm1haWwubXVkLnlhaG9vLmNvbT4="
    }
}