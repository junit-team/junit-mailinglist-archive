{
    "numMessagesInTopic": 41, 
    "nextInTime": 6907, 
    "senderId": "rfqkZSe8FWPdR8MDcW6Bi6ZNdVg3_iPrE3jyg70r3X85tTudilMm025XGPRHYUfs49TuvGjgjdZyhxLvlzq1VCtML1LFvYkF2nNc6JAwXeA", 
    "systemMessage": false, 
    "subject": "RE: [junit] Programmer Tests and the Database", 
    "from": "&quot;Jason Rogers&quot; &lt;jacaetevha@...&gt;", 
    "authorName": "Jason Rogers", 
    "msgSnippet": "OK, I am stepping into this one late, and I haven t read everything but I just saw this talk on ResourceBundles and SQL statements, etc. and thought I could", 
    "msgId": 6906, 
    "profile": "jacaetev", 
    "topicId": 6711, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 109352929, 
    "messageBody": "<div id=\"ygrps-yiv-1614671877\">OK, I am stepping into this one late, and I haven&#39;t read everything but<br/>\nI just saw this talk on ResourceBundles and SQL statements, etc. and<br/>\nthought I could offer some input.<br/>\n<br/>\nWe tend to make objects that represent the database access, why not in<br/>\nthis case?  Make objects that represent the selects, inserts, etc.,<br/>\nleverage the package structure of Java, and then you effectively have<br/>\nall of your SQL in one place.<br/>\n<br/>\nOn my current project we use a hierarchy of Query objects that do all of<br/>\nour selects, and a heirarchy of Records that do inserts, updates,<br/>\ndeletes, etc.  Queries return Records, Records are given to model layer<br/>\nobjects for construction (which requires a fair amount of discipline on<br/>\nthe team so as not to allow the model layer to muck with the persistence<br/>\nlayer).  It couldn&#39;t be any simpler...  There are two places to look for<br/>\nchanging SQL, and there are extensive functional tests on the objects<br/>\nthat represent the database actions.<br/>\n<br/>\nHere&#39;s a snippet:<br/>\n************************************************************************<br/>\n***<br/>\nDatabaseConnection.allRecords(Query query) {<br/>\n    DatabaseConnectionPool connectionPool =<br/>\n        DatabaseConnectionPool.getInstanceForDatabase(this);<br/>\n    <br/>\n    try {<br/>\n        Connection connection = connectionPool.getConnection();<br/>\n        Statement statement = connection.createStatement();<br/>\n        ResultSet resultSet =<br/>\nstatement.executeQuery(query.queryString());<br/>\n<br/>\n        try {<br/>\n            return query.process(resultSet);<br/>\n        } catch (SQLException e) {<br/>\n    .<br/>\n    .<br/>\n    .<br/>\n}<br/>\n<br/>\nQuery.allRecords(DatabaseConnection databaseConnection) {<br/>\n    RecordsList results = database.allRecords(this);<br/>\n    return results;<br/>\n}<br/>\nQuery.exactlyOneRecord(DatabaseConnection databaseConnection) {<br/>\n    Record results = database.exactlyOneRecord(this);<br/>\n    return results;<br/>\n}<br/>\n************************************************************************<br/>\n***<br/>\n<br/>\nThe public API on Query is allRecords(DatabaseConnection),<br/>\nexactlyOneRecord(DatabaseConnection), process(ResultSet), and<br/>\nqueryString().  As you can see we use a DoubleDispatch operation: we ask<br/>\nthe Query for a Record or RecordList, it turns and asks the<br/>\nDatabaseConnection for the appropriate thing, the DatabaseConnection<br/>\nturns back around and asks the Query to process the ResultSet it just<br/>\ngot from a java.sql.Connection.  It&#39;s clean, you can now have objects<br/>\nrepresenting your SQL, and it all is stuck in one package structure (or<br/>\nat most a few) and not just strewn throughout the codebase.<br/>\n<br/>\nI hope that will help in the discussion.<br/>\n<br/>\n=jason<br/>\n[:question | ^One] <br/>\n-----Original Message-----<br/>\nFrom: J. B. Rainsberger [mailto:jbr@...] <br/>\nSent: Friday, February 07, 2003 10:03 AM<br/>\nTo: junit@yahoogroups.com; junit@yahoogroups.com<br/>\nSubject: Re: [junit] Programmer Tests and the Database<br/>\n<br/>\n<br/>\nAmen, sir.<br/>\n<br/>\nSo said  Bob Koss  on  2003-02-07 --------------------<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt;On 2/7/03 12:34 AM, &quot;Curt Sampson&quot; &lt;yahoo_sucks@...&gt; wrote:<br/>\n&gt;<br/>\n&gt;&gt; On Thu, 6 Feb 2003, J. B. Rainsberger wrote:<br/>\n&gt;&gt; <br/>\n&gt;&gt;&gt; Pushing every SQL statement you use out to a ResourceBundle (or<br/>\n </span></blockquote>other<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt;&gt; metadata file) is a good idea.<br/>\n&gt;&gt; <br/>\n&gt;&gt; Eww! I know this tends to be a bit of a personal preference, but I<br/>\n </span></blockquote>far<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt; prefer to keep my code together when I can. If a statement is used<br/>\n </span></blockquote>in<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt; only one place, keeping it where it&#39;s used makes the code much<br/>\n </span></blockquote>easier to<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt; read, because you don&#39;t have to go chasing off into some other file<br/>\n </span></blockquote>to<br/>\n<blockquote><span title=\"ireply\"> &gt;&gt; find out what SQL statement is being executed.<br/>\n&gt;&gt; <br/>\n&gt;<br/>\n&gt;That&#39;s probably true if the SQL never has to change. If the schema<br/>\n </span></blockquote>changes,<br/>\n<blockquote><span title=\"ireply\"> &gt;I find it more convenient to go to one known place instead of having<br/>\n </span></blockquote>to<br/>\n<blockquote><span title=\"ireply\"> &gt;search my entire app for possible changes.<br/>\n&gt;<br/>\n&gt;-- <br/>\n&gt;Robert Koss, Ph.D.     | Training, Mentoring, Contract Development<br/>\n&gt;Senior Consultant      | Object Oriented Design, C++, Java<br/>\n&gt;www.objectmentor.com   | Extreme Programming<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;------------------------ Yahoo! Groups Sponsor<br/>\n </span></blockquote>---------------------~--&gt;<br/>\n<blockquote><span title=\"ireply\"> &gt;Get 128 Bit SSL Encryption!<br/>\n&gt;http://us.click.yahoo.com/LIgTpC/vN2EAA/xGHJAA/5cFolB/TM<br/>\n&gt;---------------------------------------------------------------------~-<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;To unsubscribe from this group, send an email to:<br/>\n&gt;junit-unsubscribe@yahoogroups.com<br/>\n&gt; <br/>\n&gt;<br/>\n&gt;Your use of Yahoo! Groups is subject to<br/>\n </span></blockquote>http://docs.yahoo.com/info/terms/<br/>\n<br/>\n<br/>\nJ. B. Rainsberger,<br/>\nPresident, Diaspar Software Services<br/>\nLet&#39;s write software that people understand.<br/>\nhttp://www.diasparsoftware.com/<br/>\ntelephone: +1 416 791-8603<br/>\nAll correspondence (c) 2002 Diaspar Software Services.<br/>\nIf you want to use it, just ask; don&#39;t steal.<br/>\n<br/>\n<br/>\nTo unsubscribe from this group, send an email to:<br/>\njunit-unsubscribe@yahoogroups.com<br/>\n<br/>\n<br/>\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service. <br/>\n<br/>\n---<br/>\nOutgoing mail is certified Virus Free.<br/>\nChecked by AVG anti-virus system (http://www.grisoft.com).<br/>\nVersion: 6.0.438 / Virus Database: 246 - Release Date: 1/7/2003</div>", 
    "prevInTime": 6905, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1044650774", 
    "canDelete": false, 
    "nextInTopic": 6907, 
    "prevInTopic": 6904, 
    "headers": {
        "inReplyToHeader": "PDIwMDMwMjA3MTAwMzA4MDY1Ni4wMDZCRkQ5MkBzc210cC5ibG9vci5pcy5uZXQuY2FibGUucm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PDAwMDcwMWMyY2VlOSRmNTAzNmYyMCQ5MTljZDY4ZEBSSElOTz4="
    }
}