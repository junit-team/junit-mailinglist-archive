{
    "numMessagesInTopic": 6, 
    "nextInTime": 9560, 
    "senderId": "67VlzThgmt06tpvpYyUhfbyFvmnpDbNLwTX3sVS8FvdQrNeHohR-tCwvUdwmmU1qB9szIsMO1IgJmpadMwAATviruuFaE9-uNq_Klr0dAWSmzlw", 
    "systemMessage": false, 
    "subject": "Re: [junit] how to unit test a class if it uses another singleton class", 
    "from": "&quot;Erik Mattsson&quot; &lt;erik.mattsson@...&gt;", 
    "authorName": "Erik Mattsson", 
    "msgSnippet": "Somehow I always litter my code with singletons, and its a very easy way of handling control in a large application, but this will always have problems when", 
    "msgId": 9559, 
    "profile": "erikmattsson73", 
    "topicId": 9536, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 135813500, 
    "messageBody": "<div id=\"ygrps-yiv-696029823\">Somehow I always litter my code with singletons, and its a very easy way<br/>\nof handling control in a large application, but this will always have problems<br/>\nwhen testing. (singleton in an OO-environment feels like coding C in C++)<br/>\n<br/>\nNow, when I have a few singletons I try to Mock them. (replace them with<br/>\na fake class, instead of the real class). I have no clue how to do it nice, but heres<br/>\nwhat I do. I would happily take pointer on what to improve!!<br/>\n<br/>\npublic class Singleton<br/>\n{<br/>\n  (package access) static Singleton instance;<br/>\n  (package access) Singleton()<br/>\n  {<br/>\n  }<br/>\n}<br/>\n<br/>\npublic class MockSingleton extends Singleton<br/>\n{<br/>\n  public static void setUp()<br/>\n  {<br/>\n     instance = new MockSingleton();<br/>\n  }<br/>\n  public static void tearDown()<br/>\n  {<br/>\n     instance = null;<br/>\n  }<br/>\n}<br/>\n<br/>\npublic class ClassThatUsesSingletonTest extends TestCase<br/>\n{<br/>\n  public void setUp()<br/>\n  {<br/>\n     MockSingleton.setUp(); // creates a new instance every time<br/>\n  } <br/>\n  public void tearDown()<br/>\n  {<br/>\n     MockSingleton.tearDown(); // removes the instance.<br/>\n  }<br/>\n<br/>\n  public void testSomething()<br/>\n  {<br/>\n    //do stuff with class that uses the (mock) singleton<br/>\n  }<br/>\n}<br/>\n<br/>\nThis works now, but I would prefer a better approach.<br/>\n<br/>\n//erik<br/>\n  -<br/>\n  ---- Original Message ----- <br/>\n  From: shailesh401 <br/>\n  To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> <br/>\n  Sent: Monday, September 29, 2003 7:39 PM<br/>\n  Subject: [junit] how to unit test a class if it uses another singleton class<br/>\n<br/>\n<br/>\n  Any help or suggestion<br/>\n<br/>\n  Thanks<br/>\n  Sal<br/>\n<br/>\n<br/>\n        Yahoo! Groups Sponsor <br/>\n              ADVERTISEMENT<br/>\n             <br/>\n       <br/>\n       <br/>\n<br/>\n  To unsubscribe from this group, send an email to:<br/>\n  <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n<br/>\n<br/>\n  Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. <br/>\n<br/>\n<br/>\n[Non-text portions of this message have been removed]</div>", 
    "prevInTime": 9558, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1064910019", 
    "canDelete": false, 
    "nextInTopic": 9564, 
    "prevInTopic": 9540, 
    "headers": {
        "messageIdInHeader": "PDAwNmUwMWMzODcyYiRiNGZjYjY3MCQwNjAwYThjMEBpbWJyaWRnZS5zZT4=", 
        "referencesHeader": "PGJsOXFvbys3NTQwQGVHcm91cHMuY29tPg=="
    }
}