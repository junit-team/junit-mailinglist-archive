{
    "numMessagesInTopic": 2, 
    "nextInTime": 15514, 
    "senderId": "36KQOnPAaeGXbD-80O7ubJKjl7WNZzmSOSZ0_ca2Jfw6EhpM3xpYududFTCmcMea5ovXtX1t_JH9Vxj_zumEXBL7_GzkpFoyvfYtQhH6eA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Maven/Cactus setup question", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "... Now you see why I recommend not testing inside the container, most of the time! You need to create two targets:  ", 
    "msgId": 15513, 
    "profile": "nails762", 
    "topicId": 15484, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 127224993, 
    "messageBody": "<div id=\"ygrps-yiv-2048171521\">Tony Gunter wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; I am attempting to automate my EJB testing inside a Sun container.  I<br/>\n&gt; had hoped to use the Cactus plugin to Maven, but the Sun container is<br/>\n&gt; not supported in Cactus.  Only Tomcat, JBoss, Orion, Resin, and<br/>\n&gt; WebLogic containers are supported.<br/>\n&gt; <br/>\n&gt; The Cactus website indicates that other containers can be used by<br/>\n&gt; configuring Cactus with a generic container.  Does anyone know how to<br/>\n&gt; configure the generic container to support a Sun server? <br/>\n&gt; Specifically, the Cactus site states:<br/>\n&gt; <br/>\n&gt; &quot;The next example shows the use of the generic container element for<br/>\n&gt; starting/stopping a custom container. You need to define the two<br/>\n&gt; targets mycontainer.start and mycontainer.stop, so that the container<br/>\n&gt; is started up (on port 8080) before the tests are run, and shut down<br/>\n&gt; after the tests completed. How these targets are implemented is<br/>\n&gt; highly dependant on the container. Most likely you&#39;ll need to copy<br/>\n&gt; some files and use the &lt;java&gt; task to invoke a container-provided<br/>\n&gt; Java class that can start/stop the container.&quot;<br/>\n&gt; <br/>\n&gt; Which sounds like Greek to me.  Can anyone provide some hints?  I<br/>\n&gt; acquired the cookbook, but I think 11.3 skips a few steps that I<br/>\n&gt; need.  I think I&#39;m stuck at the point where to add one pound of<br/>\n&gt; ground beef, I first have to hunt down and slay a cow.<br/>\n<br/>\n </span></blockquote>Now you see why I recommend not testing inside the container, most of <br/>\nthe time!<br/>\n<br/>\nYou need to create two targets:<br/>\n<br/>\n&lt;target name=&quot;mycontainer.start&quot; ... /&gt;<br/>\n&lt;target name=&quot;mycontainer.stop&quot; ... /&gt;<br/>\n<br/>\nThe first starts the container on port 8080 before the tests are run, <br/>\nthe second shuts down the container after the tests are run. If you can <br/>\nstart/stop the container with a Java program, then you can use the <br/>\n&lt;java&gt; task to do that.<br/>\n<br/>\nI don&#39;t know how to start/stop the Sun container, but I can use JBoss as <br/>\nan example.<br/>\n<br/>\nIn JBoss&#39; run.sh, there is this:<br/>\n<br/>\n---- tail of run.sh ----<br/>\nSTATUS=10<br/>\nwhile [ $STATUS -eq 10 ]<br/>\ndo<br/>\n# Execute the JVM<br/>\n    &quot;$JAVA&quot; $JAVA_OPTS &#92;<br/>\n       -Djava.endorsed.dirs=&quot;$JBOSS_ENDORSED_DIRS&quot; &#92;<br/>\n       -classpath &quot;$JBOSS_CLASSPATH&quot; &#92;<br/>\n       org.jboss.Main &quot;$@&quot;<br/>\n    STATUS=$?<br/>\n    # if it doesn&#39;t work, you may want to take a look at this:<br/>\n    #    <a rel=\"nofollow\" target=\"_blank\" href=\"http://developer.java.sun.com/developer/bugParade/bugs/4465334.html\">http://developer.java.sun.com/developer/bugParade/bugs/4465334.html</a><br/>\ndone<br/>\n---- tail of run.sh ----<br/>\n<br/>\nThis is running a Java program called org.jboss.Main. This means that if <br/>\nI can get the class path and variables right, I can use this Ant task to <br/>\nrun it:<br/>\n<br/>\n&lt;java fork=&quot;yes&quot; classname=&quot;org.jboss.Main&quot;&gt;<br/>\n     &lt;classpath&gt;<br/>\n         ...<br/>\n     &lt;/classpath&gt;<br/>\n     &lt;arg line=&quot;...&quot; /&gt;<br/>\n&lt;/java&gt;<br/>\n<br/>\nThis would be the &quot;mycontainer.start&quot; target.<br/>\n<br/>\nThe easiest way to get the right classp ath is to echo it in the script <br/>\nbefore executing it.<br/>\n<br/>\n---- tail of edited run.sh ----<br/>\nSTATUS=10<br/>\nwhile [ $STATUS -eq 10 ]<br/>\ndo<br/>\n# Echo the command used to run JBoss<br/>\necho &quot;$JAVA&quot; $JAVA_OPTS &#92;<br/>\n     -Djava.endorsed.dirs=&quot;$JBOSS_ENDORSED_DIRS&quot; &#92;<br/>\n     -classpath &quot;$JBOSS_CLASSPATH&quot; &#92;<br/>\n     org.jboss.Main &quot;$@&quot;<br/>\n<br/>\n# Execute the JVM<br/>\n    &quot;$JAVA&quot; $JAVA_OPTS &#92;<br/>\n       -Djava.endorsed.dirs=&quot;$JBOSS_ENDORSED_DIRS&quot; &#92;<br/>\n       -classpath &quot;$JBOSS_CLASSPATH&quot; &#92;<br/>\n       org.jboss.Main &quot;$@&quot;<br/>\n    STATUS=$?<br/>\n    # if it doesn&#39;t work, you may want to take a look at this:<br/>\n    #    <a rel=\"nofollow\" target=\"_blank\" href=\"http://developer.java.sun.com/developer/bugParade/bugs/4465334.html\">http://developer.java.sun.com/developer/bugParade/bugs/4465334.html</a><br/>\ndone<br/>\n---- tail of edited run.sh ----<br/>\n<br/>\nWhen I run this, I see:<br/>\n<br/>\n/System/Library/Frameworks/JavaVM.framework/Versions/1.4.2/Home/bin/java <br/>\n-server -Xms128m -Xmx128m -Dprogram.name=run.sh <br/>\n-Djava.endorsed.dirs=/Applications/jboss-4.0.0/lib/endorsed -classpath <br/>\n/Applications/jboss-4.0.0/bin/run.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.4.2/Home/lib/tools.jar <br/>\norg.jboss.Main<br/>\n<br/>\nI can make this my &lt;java&gt; task:<br/>\n<br/>\n&lt;target name=&quot;mycontainer.start&quot;&gt;<br/>\n     &lt;java fork=&quot;yes&quot; classname=&quot;org.jboss.Main&quot;&gt;<br/>\n         &lt;classpath&gt;<br/>\n             &lt;path location=&quot;/Applications/jboss-4.0.0/bin/run.jar&quot; /&gt;<br/>\n             &lt;path <br/>\nlocation=&quot;/System/Library/Frameworks/JavaVM.framework/Versions/1.4.2/Home/lib/tools.jar&quot; <br/>\n/&gt;<br/>\n         &lt;/classpath&gt;<br/>\n         &lt;arg line=&quot;-server -Xms128m -Xmx128m -Dprogram.name=run.sh <br/>\n-Djava.endorsed.dirs=/Applications/jboss-4.0.0/lib/endorsed&quot; /&gt;<br/>\n     &lt;/java&gt;<br/>\n&lt;/target&gt;<br/>\n<br/>\nThat ought to do it. I haven&#39;t tried it, but that ought to do it. You <br/>\ncan use the same technique to figure out the mycontainer.stop task, <br/>\nwhich comes from the shutdown.sh script in JBoss.<br/>\n<br/>\nI&#39;m assuming that the Sun container works similarly.<br/>\n<br/>\nGood luck.<br/>\n-- <br/>\nJ. B. (Joe) Rainsberger :: <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.jbrains.info\">http://www.jbrains.info</a><br/>\nYour guide to software craftsmanship<br/>\nJUnit Recipes: Practical Methods for Programmer Testing<br/>\n2005 Gordon Pask Award for contribution Agile Software Practice</div>", 
    "prevInTime": 15512, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1132944311", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 15484, 
    "headers": {
        "inReplyToHeader": "PGRsdGdtMis5b2NyQGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDQzODc1QkI3LjQwNjA5MDJAcm9nZXJzLmNvbT4=", 
        "referencesHeader": "PGRsdGdtMis5b2NyQGVHcm91cHMuY29tPg=="
    }
}