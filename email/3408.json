{
    "numMessagesInTopic": 10, 
    "nextInTime": 3409, 
    "senderId": "apibB7_GXi0BXvIxKvB4mSgszXNfcFwZ2rHmFlwxu8ix2_8RCWmpk1ytvni7lz6Zp5IojaTQSXiun5qNLKc6cRQTxffeURRJCBT1qEFJ_96y9dVJ", 
    "systemMessage": false, 
    "subject": "Re: [junit] JUnit Tests and Business Rules", 
    "from": "&quot;J. B. Rainsberger&quot; &lt;jbr@...&gt;", 
    "authorName": "J. B. Rainsberger", 
    "msgSnippet": "This is an excellent suggestion. Business rule processing is slowly making its way into Java proper under javax.rules. Until then, this is a good approach;", 
    "msgId": 3408, 
    "profile": "nails762", 
    "topicId": 3406, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-1201924515\">This is an excellent suggestion. Business rule processing is slowly <br/>\nmaking its way into Java proper under javax.rules. Until then, this is a <br/>\ngood approach; however...<br/>\n<br/>\nif you do not plan to externalize the business rules, but rather expect <br/>\nthat they continue to be hardcoded in Java, then there&#39;s little point <br/>\nabstracting now. You could simply have an object that can evaluate the <br/>\nconjuction of all the conditions and each condition on its own.<br/>\n<br/>\nclass MyRule {<br/>\n    boolean isCondition1();<br/>\n    boolean isCondition2();<br/>\n    ....<br/>\n    boolean shouldFire();<br/>\n}<br/>\n<br/>\nNow you can easily mock:<br/>\n<br/>\nclass MockMyRule {<br/>\n    // all the stuff above, plus...<br/>\n    void forceCondition1(boolean howShouldIAnswer);<br/>\n    ...<br/>\n}<br/>\n<br/>\nNow you can create a number of MockMyRule objects to test whether the <br/>\nrule&#39;s collaborator act properly, depending whether the rule should fire <br/>\nor any individual condition of the rule is true.<br/>\n<br/>\n<br/>\nOf course, as soon as you have two rules, you should factor out into...<br/>\n<br/>\nclass BusinessRule {<br/>\n    boolean isCondition(String name);<br/>\n    boolean shouldFire();<br/>\n }<br/>\n<br/>\nfor named conditions (a Map of conditions, for example), and so on...<br/>\n<br/>\nJBR.<br/>\n<br/>\nMike Clark wrote:<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt; Mark Derricutt wrote:<br/>\n&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Are there any existing patterns/frameworks for implementing rule based<br/>\n&gt; &gt; logic cleanly?<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt; Another approach might be to define a common Rule interface, and then <br/>\n&gt; compose<br/>\n&gt; Rules into a RuleSet:<br/>\n&gt;<br/>\n&gt;     public interface Rule {<br/>\n&gt;         public boolean fire();<br/>\n&gt;     }<br/>\n&gt;<br/>\n&gt;     public class RuleSet implements Rule {<br/>\n&gt;<br/>\n&gt;         public void addRule(Rule rule) {<br/>\n&gt;             _rules.add(rule);<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt;         public boolean fire() {<br/>\n&gt;<br/>\n&gt;             Iterator rules = _rules.iterator();<br/>\n&gt;             while (rules.hasNext()) {<br/>\n&gt;                 Rule rule = (Rule)rules.next();<br/>\n&gt;                 boolean pass = rule.fire();<br/>\n&gt;                 if  (!pass) {<br/>\n&gt;                     return false;<br/>\n&gt;                 }<br/>\n&gt;             }<br/>\n&gt;             return true;<br/>\n&gt;         }<br/>\n&gt;<br/>\n&gt; Concrete Rule instances can be constructed with the data necessary to fire<br/>\n&gt; the rule as prescribed by their fire() method.  The RuleSet is <br/>\n&gt; assembled with<br/>\n&gt; a collection of Rule instances, with which a single call to fire() will<br/>\n&gt; effectively accomplish the &#39;if&#39; logic.  Combining AND and OR operators <br/>\n&gt; takes<br/>\n&gt; a bit more work.<br/>\n&gt;<br/>\n&gt; This is probably more than is necessary for checking whether a field is<br/>\n&gt; editable or not, but it does address the &#39;if&#39; statement for generic<br/>\n&gt; rule-based systems.  The simplest approach is to simply refactor each test<br/>\n&gt; into its own method, as you&#39;ve already pointed out.<br/>\n&gt;<br/>\n&gt; Hope this helps.<br/>\n&gt;<br/>\n&gt; Mike<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt; Mike Clark<br/>\n&gt; Clarkware Consulting, Inc.<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.clarkware.com\">http://www.clarkware.com</a><br/>\n&gt; 720.851.2014 </span></blockquote></div>", 
    "prevInTime": 3407, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1007324438", 
    "canDelete": false, 
    "nextInTopic": 3409, 
    "prevInTopic": 3407, 
    "headers": {
        "messageIdInHeader": "PDNDMEE4RDE2LjEwODAzMDFAZGlhc3BhcnNvZnR3YXJlLmNvbT4=", 
        "referencesHeader": "PDY3MjAwMDAuMTAwNzMyMTg4OEBzcGF3bi5zZTdlbi5vcmc+IDwzQzBBODk3Ny5COERCNDAzOUBjbGFya3dhcmUuY29tPg=="
    }
}