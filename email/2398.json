{
    "numMessagesInTopic": 6, 
    "nextInTime": 2399, 
    "senderId": "tTxSuY1l13sJ0paGpoxO5VPE7s4JPSSikUUzS4zNye0Shh96RXP_0kTQVKgbt4rGSSCacnSF2m5m8INsQpCVuhBlbEsFbJtB", 
    "systemMessage": false, 
    "subject": "Re: [junit] organizing tests, and the setUp() method", 
    "from": "Johannes Link &lt;john.link@...&gt;", 
    "authorName": "Johannes Link", 
    "msgSnippet": "... Personally I d go for the simplest solution, in your case having two subclasses performing the test with the two configurations. Generalizing the problem", 
    "msgId": 2398, 
    "topicId": 2397, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-456199783\">\n<html><head>\n \n \n<style></style>\n</head>\n \n<div><font face=\"Arial\" size=\"2\">Hi,</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">I would like some advice on how to organize tests. \nI seem to find myself facing many instances of the following \npattern:</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">I have some sort of service I would like to test. I \nwould like to test a variety of features of the service: we could call them A, \nB, C, D and E. Now the service can be configured to operate in various \nmodes.</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">For example, I have a service involving messaging \nusing TCP/IP connections. It can run using either plain, raw TCP connections, or \nalternatively it should work with SSL as well. Virtually all of the code doesn&#39;t \ncare which mode it is in (in other words, this distinction is transparent to my \ncode). So of course I simply want to write one set of tests to verify the \ncorrect operation of features A, B, C, D and E.</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">It&#39;s even tempting not to bother with running all \nthe tests using both modes. But to be thorough I want to do so.</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">Now an organization that seems natural to me is \nsomething like this:</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">class TcpTests extends TestCase {</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; public void setUp() throws \nException {</font></div>\n<div><font face=\"Arial\"\n size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcpService = new \nTcpService();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolean \nuseSSL = something;&nbsp; // ??</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntcpService.setUseSSL(useSSL);</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntcpService.start();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; }</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; public void testA() throws \nException { ... }</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; public void testB() throws \nException { ... }</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; ....</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; public void testE() throws \nException { ... }</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; public void tearDown() throws \nException {</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ntcpService.stop();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; }</font></div>\n<div><font face=\"Arial\" size=\"2\">}</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">How do I run this set of tests in both modes (first \nwith plain connections, say, and then with SSL connections)?</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">Is my problem that I have put the wrong sort of \nthing in the setUp() method?</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">Another way that came to mind was to ignore the \nsetUp() and tearDown() routines, and do something like the \nfollowing:</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">class TcpTests extends TestCase {</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; public void testWithoutSSL() \n{</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ninitTcp(false);</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndoASeries();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; }</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; public void testWithSSL() \n{</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ninitTcp(true);</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndoASeries();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; }</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; private void initTcp(boolean \nuseSSL) {</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // as in \nsetUp() of first example</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; }</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; private void doASeries() \n{</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndoFeatureA();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndoFeatureB();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n..</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ndoFeatureE();</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;&nbsp;&nbsp; }</font></div>\n<div><font face=\"Arial\" size=\"2\">}</font></div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;</font></div>\n<div><font face=\"Arial\" size=\"2\">Besides being somehow aesthetically not pleasing, \nthis means that from JUnit&#39;s point of view I have only two tests. I feel I \nshould have ten. I guess, also, that if a particular feature fails, then all the \nother features that were to be tested after it will not even get tried. That&#39;s \nobviously not right.</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">Then the other thing I thought was, would this be \nan appropriate occasion to use a hierarchy of TestCase classes? In other words, \nmaybe I go back to the first pattern (above), but make it an abstract class. \nDefine an abstract method, called perhaps something like getSSLSetting(). Have \nsetUp() call this method to determine what the setting should be. Now I create \ntwo (concrete) subclasses, one for each possible setting of the useSSL flag that \nI want to test. In the subclasses, the only method I have to define is \ngetSSLSetting(). JUnit sees two different TestCase classes (I have to put two \ndifferent classes into my TestSuite: the concrete classes only, of course, not \nthe abstract super-class.) Each of the two has 5 tests, for a total of \n10.</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">I guess, generalizing this (assuming I have a more \ncomplex set of configuration options), I could create any number of subclasses \nrepresenting specific combinations of configuration settings that I want to \ntest.</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">Does this seem right? I mean, is this an \nappropriate use of inherritance?</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">Thanks for any advice you can provide.</font></div>\n<div><font face=\"Arial\" size=\"2\"></font>&nbsp;</div>\n<div><font face=\"Arial\" size=\"2\">&nbsp;- Alan Bram</font></div>\n<br>\n\n\n\n\n<br>\n<tt>\nTo unsubscribe from this group, send an email to:<br>\njunit-unsubscribe@yahoogroups.com<br>\n</tt>\n<br>\n\n<br>\n<tt>Your use of Yahoo! Groups is subject to the <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">Yahoo! Terms of Service</a>.</tt>\n\n\n</html></div>", 
    "prevInTime": 2397, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "998032124", 
    "canDelete": false, 
    "nextInTopic": 2399, 
    "prevInTopic": 2397, 
    "headers": {
        "messageIdInHeader": "PDc5MzMuOTk4MDMyMTI0QHd3dzUzLmdteC5uZXQ+"
    }
}