{
    "numMessagesInTopic": 7, 
    "nextInTime": 7451, 
    "senderId": "Ox2qlfKze91Vfigd25cPDI7_rZ_jaqox14VcoMk_HFuioVJAxeQIL9PpVW1keKhmPC9Rn51mfPivE2Q56JJr7ekqKVn55jjmeF0cpdXVPQFJrRGgWw", 
    "systemMessage": false, 
    "subject": "Re: [junit] Factory adaptor approach", 
    "from": "&quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;", 
    "authorName": "Jeff Nielsen", 
    "msgSnippet": "See below . . . ... From: Kevin Klinemeier  To:  Sent: Wednesday, April 02, 2003 12:19 PM Subject: Re: [junit]", 
    "msgId": 7450, 
    "rawEmail": "Return-Path: &lt;jeff.nielsen@...&gt;\r\nX-Sender: jeff.nielsen@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 2 Apr 2003 20:10:38 -0000\r\nReceived: (qmail 78339 invoked from network); 2 Apr 2003 20:10:37 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m9.grp.scd.yahoo.com with QMQP; 2 Apr 2003 20:10:37 -0000\r\nReceived: from unknown (HELO smtp07.phx.gblx.net) (64.211.219.56)\n  by mta2.grp.scd.yahoo.com with SMTP; 2 Apr 2003 20:10:40 -0000\r\nReceived: (from daemon@localhost)\n\tby smtp07.phx.gblx.net (8.9.3/8.9.3) id NAA112424\n\tfor &lt;junit@yahoogroups.com&gt;; Wed, 2 Apr 2003 13:10:40 -0700\r\nReceived: from dfpub102.digitalfocus.com(67.17.200.194)\n via SMTP by smtp07.phx.gblx.net, id smtpdalcNqa; Wed Apr  2 13:10:31 2003\r\nMessage-ID: &lt;067001c2f954$12ba6610$e705000a@jnielsen2&gt;\r\nTo: &lt;junit@yahoogroups.com&gt;\r\nReceived: from jnielsen2.df.com by dfpub102.digitalfocus.com\n          via smtpd (for smtp07.phx.gblx.net [64.211.219.56]) with SMTP; 2 Apr 2003 20:03:31 UT\r\nReferences: &lt;20030402171904.47311.qmail@...&gt;\r\nSubject: Re: [junit] Factory adaptor approach\r\nDate: Wed, 2 Apr 2003 15:11:39 -0500\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4522.1200\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200\r\nFrom: &quot;Jeff Nielsen&quot; &lt;jeff.nielsen@...&gt;\r\nX-Yahoo-Group-Post: member; u=65487161\r\nX-Yahoo-Profile: jeffreymads\r\n\r\nSee below . . .\n\n----- Original Message -----\nFrom: &quot;Kevin Klinemeier&quot; &lt;zipwow@...&gt;\nTo: &lt;junit@yahoogroups.com&gt;\nSent: Wednesday, April 02, 2003 12:19 PM\nSubject: Re: [junit] Factory adaptor approach\n\n\n&gt; I&#39;m apparently mis-stating the problem.  There isn&#39;t any difference\n&gt; between &#39;production code&#39; and &#39;testing code&#39;.  The same code runs in\n&gt; tow environments: production and test.  Consider the following method:\n&gt;\n&gt; public User lookupUser(String name) {\n&gt;     ConnectionFactory conFactory = new ConnectionFactory();\n&gt;     User foundUser = conFactory.getConnection().doUserLookup(name);\n&gt; }\n&gt;\n\n&gt; But how can you test it without relying on the database?  Without the\n&gt; approach I described, I don&#39;t think you can.  Your test code&#39;s new\n&gt; instances with different params don&#39;t have any effect on the instances\n&gt; created in the method.  So, the approach I&#39;m leaning towards is\n&gt; changing the factory creation from above to:\n&gt;\n&gt;     ConnectionFactory conFactory = ConnectionFactory.getInstance();\n\nInstead, how about this.\n\nclass ToTest {\n    public User lookupUser(String name) {\n        ConnectionFactory conFactory = createConnectionFactory();\n        User foundUser = conFactory.createConnection().doUserLookup(name);\n    }\n\n    protected ConnectionFactory createConnectionFactory() {\n        return new ConnectionFactory();\n    }\n}\n\nclass ToTestTest extends TestCase {\n\n    ToTest tt;\n\n    public void setUp() {\n        tt = new ToTest() {\n            protected ConnectionFactory createConnectionFactory() {\n                return new MockConnectionFactory();\n            }\n        };\n    }\n\n    public void testSomething() {\n        tt.lookupUser(&quot;Kevin&quot;);\n        . . .\n    }\n}\n\nIt&#39;s in the same spirit as what you are proposing.  Some people might like\nit a little better because there is no &quot;factory factory&quot;.  You can use this\n&quot;anonymous subclass&quot; pattern in other situations, too.\n\nJeff Nielsen\nDigital Focus\nwww.digitalfocus.com\n\n\n", 
    "profile": "jeffreymads", 
    "topicId": 7358, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 65487161, 
    "prevInTime": 7449, 
    "contentTrasformed": false, 
    "postDate": "1049314299", 
    "canDelete": false, 
    "nextInTopic": 7481, 
    "prevInTopic": 7442, 
    "headers": {
        "messageIdInHeader": "PDA2NzAwMWMyZjk1NCQxMmJhNjYxMCRlNzA1MDAwYUBqbmllbHNlbjI+", 
        "referencesHeader": "PDIwMDMwNDAyMTcxOTA0LjQ3MzExLnFtYWlsQHdlYjgwNDAzLm1haWwueWFob28uY29tPg=="
    }
}