{
    "numMessagesInTopic": 8, 
    "nextInTime": 2116, 
    "senderId": "D9r6dBmjCbpq6UHP4tiDG1Dadv5v7tuXkB9UzlRoqP1wTEhx-0Lpwfaq3kOotCenYqkSRcFfJ_CKsrsW8ICtErzfddvQhlINUb8", 
    "systemMessage": false, 
    "subject": "RE: [junit] Re: Errors and Exceptions", 
    "from": "Mike Duffy &lt;mduffy_lists@...&gt;", 
    "authorName": "Mike Duffy", 
    "msgSnippet": "Jeff, You should enter your comments into the Best Practices link created by J. B. Rainsberger: http://c2.com/cgi/wiki?JavaUnitBestPractices I do almost", 
    "msgId": 2115, 
    "topicId": 2070, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-590315661\">Jeff,<br/>\n<br/>\nYou should enter your comments into the Best Practices link created<br/>\nby J. B. Rainsberger:<br/>\n<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://c2.com/cgi/wiki?JavaUnitBestPractices\">http://c2.com/cgi/wiki?JavaUnitBestPractices</a><br/>\n<br/>\nI do almost exactly as you suggest.  When writing test methods, I<br/>\nfirst write a test method for each exception in the throws cluase of<br/>\nthe method.  The only exception I create a catch block for is the<br/>\nexception I am expecting for the specific test.  I use a trows<br/>\nExcpetion in the test method and let the JUnit framework handle<br/>\nanything unexpected that comes up.<br/>\n<br/>\nI don&#39;t think it is necessary to put an &quot;assertTrue(true);&quot; in the<br/>\ncatch block.<br/>\n<br/>\nAlso, I use a unique naming convention for my test methods:<br/>\n<br/>\n   test_##_nameofMethodBeingTested<br/>\n<br/>\n// Test IllegalArgumentException is thrown when account number is<br/>\nnull.<br/>\npublic void test_00_isAccountAssigned() throws Exception {<br/>\n<br/>\n    try {<br/>\n       boolean assignedStatus =<br/>\naccountWorker.isAccountAssigned(null);<br/>\n       fail(&quot;IllegalArgumentException should have been thrown&quot;)<br/>\n<br/>\n    } catch (IllegalArgumentException iae) {<br/>\n<br/>\n        // Test Succeeds.<br/>\n    } <br/>\n}<br/>\n<br/>\n--- Jeff Langr &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:JLangr@...\">JLangr@...</a>&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; I agree with Mr. Duffy and would like to add my thoughts.<br/>\n&gt; <br/>\n&gt; Your test cases represent controlled contexts that you create.  You<br/>\n&gt; need to<br/>\n&gt; not only test all the &quot;happy path&quot; scenarios -- the ones where you<br/>\n&gt; expect no<br/>\n&gt; exceptions should be thrown -- but as well test the scenarios where<br/>\n&gt; you<br/>\n&gt; *expect* exceptions to be thrown. For example:<br/>\n&gt; <br/>\n&gt; public void testTooManyPlayersOnField() {<br/>\n&gt; \tField field = new Field();<br/>\n&gt; \tfor (int i = 0; i &lt; 11; i++)<br/>\n&gt; \t\tfield.addPlayer();<br/>\n&gt; \ttry {<br/>\n&gt; \t\tfield.addPlayer();<br/>\n&gt; \t\tfail(&quot;should have thrown exception...&quot;);<br/>\n&gt; \t}<br/>\n&gt; \tcatch (TooManyPlayersException e) {<br/>\n&gt; \t\tassertTrue(true);  // ugh.  &quot;pass()&quot; would be nice<br/>\n&gt; \t}<br/>\n&gt; }<br/>\n&gt; <br/>\n&gt; For the happy path tests, I don&#39;t care what exception is thrown --<br/>\n&gt; it should<br/>\n&gt; never happen under normal circumstances. (If it does, something&#39;s<br/>\n&gt; seriously<br/>\n&gt; wrong anyway, and JUnit will still catch it.)  So I just declare<br/>\n&gt; that my<br/>\n&gt; test &quot;throws Exception&quot; where I have to (and use finally clauses<br/>\n&gt; when I need<br/>\n&gt; to).  That&#39;s the simplest thing that&#39;ll work in the light of Java&#39;s<br/>\n&gt; insistence that you deal with the potential for an exception.  <br/>\n&gt; <br/>\n&gt; Using throws on test methods is fine as long as you document how to<br/>\n&gt; deal<br/>\n&gt; with all possible inappropriate things that *can* happen.  This<br/>\n&gt; documentation is through other tests that force and demonstrate<br/>\n&gt; these<br/>\n&gt; inappropriate things.  The nice part about this approach is that it<br/>\n&gt; pushes<br/>\n&gt; developers to learn how to treat exceptions early on.  Kind of like<br/>\n&gt; ensuring<br/>\n&gt; that you can actually restore from your backup tapes before you<br/>\n&gt; actually<br/>\n&gt; have to.  Most non-XP code I&#39;ve seen does a poor job of organizing<br/>\n&gt; exceptions.  <br/>\n&gt; <br/>\n&gt; Jeff L.<br/>\n&gt; Object Mentor, Inc.<br/>\n&gt; <br/>\n&gt; &gt; -----Original Message-----<br/>\n&gt; &gt; From: Mike Duffy [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:mduffy_lists@...\">mduffy_lists@...</a>]<br/>\n&gt; &gt; Sent: Wednesday, July 25, 2001 9:44 AM<br/>\n&gt; &gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; &gt; Subject: Re: [junit] Re: Errors and Exceptions<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; I do see your point.  In general, I think that using &quot;throws<br/>\n&gt; &gt; Exception&quot; is bad coding.<br/>\n&gt; &gt; <br/>\n&gt; &gt; However, from the standpoint of maintaining a testing framework,<br/>\n&gt; &gt; using &quot;throws Exception&quot; might be acceptable.  When writing a<br/>\n&gt; test<br/>\n&gt; &gt; method the goal is to test a specific condition.  You can<br/>\n&gt; minimize<br/>\n&gt; &gt; your work and maintenance by letting the JUint framework handle<br/>\n&gt; the<br/>\n&gt; &gt; things that go wrong (catching exceptions and generating errors).<br/>\n&gt; &gt; <br/>\n&gt; &gt; If you have twenty test methods that test the method &quot;aMethod&quot;<br/>\n&gt; and<br/>\n&gt; &gt; each of these methods has a throws clause identical to the throws<br/>\n&gt; &gt; clause in aMethod, whenever the throws clause for aMethod changes<br/>\n&gt; you<br/>\n&gt; &gt; have twenty test methods to revise.  If each of your test methods<br/>\n&gt; &gt; &quot;throws Exception&quot;, a change in the throws clause of aMethod does<br/>\n&gt; not<br/>\n&gt; &gt; affect your test methods.<br/>\n&gt; &gt; <br/>\n&gt; &gt; Mike<br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; --- <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:dfw1@...\">dfw1@...</a> wrote:<br/>\n&gt; &gt; &gt; --- In junit@y..., Mike Duffy &lt;mduffy_lists@y...&gt; wrote:<br/>\n&gt; &gt; &gt; &gt; I have only been using JUnit for a few months and I am<br/>\n&gt; focusing<br/>\n&gt; &gt; &gt; on<br/>\n&gt; &gt; &gt; &gt; creating &quot;best practices&quot; templates for our development team.<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; I would greatly appreciate the insight of more experienced<br/>\n&gt; users<br/>\n&gt; &gt; &gt; on<br/>\n&gt; &gt; &gt; &gt; the following issue.<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; Because an exception caught by the JUnit framework is an<br/>\n&gt; error,<br/>\n&gt; &gt; &gt; when<br/>\n&gt; &gt; &gt; &gt; testing a method that throws exceptions, it is best to<br/>\n&gt; include<br/>\n&gt; &gt; &gt; those<br/>\n&gt; &gt; &gt; &gt; exceptions in the throws clause of the test method (or even<br/>\n&gt; add a<br/>\n&gt; &gt; &gt; &gt; &quot;throws Exception&quot; to most test methods).  <br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Hi Mike,<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; My team at a previous job tried just adding &quot;throws Exception&quot;<br/>\n&gt; to<br/>\n&gt; &gt; &gt; all<br/>\n&gt; &gt; &gt; our test method footprints. The problem we hit was that other<br/>\n&gt; &gt; &gt; developers down the line would use our test code as example<br/>\n&gt; code<br/>\n&gt; &gt; &gt; when<br/>\n&gt; &gt; &gt; they reused the code we were testing. (Unit test code makes<br/>\n&gt; poor<br/>\n&gt; &gt; &gt; example code in so many ways, but was consistenty what the<br/>\n&gt; &gt; &gt; developers<br/>\n&gt; &gt; &gt; down line tried to use. That continued even when we provided<br/>\n&gt; &gt; &gt; example<br/>\n&gt; &gt; &gt; code.)<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; I found it much better to list out all the exceptions that a<br/>\n&gt; test<br/>\n&gt; &gt; &gt; could possibly throw in the throws clause. It adds a tiny<br/>\n&gt; amount of<br/>\n&gt; &gt; &gt; overhead to writing the test code, but adds greatly to the<br/>\n&gt; &gt; &gt; awareness<br/>\n&gt; &gt; &gt; of just what can go wrong. Otherwise, people who use your code<br/>\n&gt; down<br/>\n&gt; &gt; &gt; line are likely to include &quot;throws Exception&quot; (or worse,<br/>\n&gt; &gt; &gt; catch(Exception ex)) in everything that uses your code. Also,<br/>\n&gt; it<br/>\n&gt; &gt; &gt; will<br/>\n&gt; &gt; &gt; tip you off to changes in the throws clauses in your code at<br/>\n&gt; &gt; &gt; compile<br/>\n&gt; &gt; &gt; time.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Since then, I&#39;ve added a patch to junit that adds a<br/>\n&gt; fail(Exception)<br/>\n&gt; &gt; &gt; method to Assert. See<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://sourceforge.net/tracker/index.php?func=detail&aid=43569\">http://sourceforge.net/tracker/index.php?func=detail&aid=43569</a><br/>\n&gt; &gt; 9&group_id=15278&atid=315278<br/>\n&gt; &gt; &gt; (I feel like I&#39;m plugging a book in a talk show interview. :) )<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; I personally prefer having try-catch-finally blocks in my<br/>\n&gt; tests,<br/>\n&gt; &gt; &gt; and<br/>\n&gt; &gt; &gt; this patch lets me do it. That reserves junit errors for<br/>\n&gt; &gt; &gt; RuntimeExceptions and Errors, and still gives me a full stack<br/>\n&gt; &gt; &gt; trace. <br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Not everyone will want to run a patched junit 3.7, so listing<br/>\n&gt; out<br/>\n&gt; &gt; &gt; each<br/>\n&gt; &gt; &gt; exception seems a reasonable technique.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; public void testMethod() throws Exception {<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt;     returnValue = methodCall(args);<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt;     assertTrue(some condition);<br/>\n&gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; The following template would be less correct:<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; public void testMethod() {<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt;     try {<br/>\n&gt; &gt; &gt; &gt;         returnValue = methodCall(args);<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt;     } catch (Exception e){<br/>\n&gt; &gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt;         fail(&quot;Exception should not be thrown: &quot; + e);<br/>\n&gt; &gt; &gt; &gt;     }<br/>\n&gt; &gt; &gt; &gt;      <br/>\n&gt; &gt; &gt; &gt;     assertTrue(some condition);<br/>\n&gt; &gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Don&#39;t forget that your assertTrue(some condition); can also<br/>\n&gt; throw<br/>\n&gt; &gt; &gt; exceptions, so these two blocks are not interchangable.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; I prefer<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; public void testMethod() throws<br/>\n&gt; SomeExceptionThatMethodCallThrows<br/>\n&gt; &gt; &gt; {<br/>\n&gt; &gt; &gt; \ttry<br/>\n&gt; &gt; &gt; \t{<br/>\n&gt; &gt; &gt; \t\treturnValue = methodCall(args);<br/>\n&gt; &gt; &gt; \t\tassertTrue(some condition);<br/>\n&gt; &gt; &gt; \t}<br/>\n&gt; &gt; &gt; \tfinally<br/>\n&gt; &gt; &gt; \t{<br/>\n&gt; &gt; &gt; \t\t//any code to clean up the mess<br/>\n&gt; &gt; &gt; \t}<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; or (even better)<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; public void testMethod()<br/>\n&gt; &gt; &gt; {<br/>\n&gt; &gt; &gt; \ttry<br/>\n&gt; &gt; &gt; \t{<br/>\n&gt; &gt; &gt; \t\treturnValue = methodCall(args);<br/>\n&gt; &gt; &gt; \t\tassertTrue(some condition);<br/>\n&gt; &gt; &gt; \t}<br/>\n&gt; &gt; &gt; \tcatch(SomeExceptionThatMethodCallThrows setmct)<br/>\n&gt; &gt; &gt; \t{<br/>\n&gt; &gt; &gt; \t\tfail(setmct);<br/>\n&gt; &gt; &gt; \t}<br/>\n&gt; &gt; &gt; \tfinally<br/>\n&gt; &gt; &gt; \t{<br/>\n&gt; &gt; &gt; \t\t//any code to clean up the mess<br/>\n&gt; &gt; &gt; \t}<br/>\n&gt; &gt; &gt; }<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; &gt; In general, test methods should be very lean and focus<br/>\n&gt; &gt; &gt; specifically<br/>\n&gt; &gt; &gt; &gt; on the condition being tested; let the framework handle the<br/>\n&gt; rest.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; so long as the code is easy to read, and encourages good<br/>\n&gt; practices<br/>\n&gt; &gt; &gt; down the line. I discourage &quot;throws Exception&quot;s anywhere I see<br/>\n&gt; &gt; &gt; them.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Anyway, that&#39;s how I do it. Others take different approaches,<br/>\n&gt; and<br/>\n&gt; &gt; &gt; have<br/>\n&gt; &gt; &gt; reasons for it.<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; Dave<br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; &gt; __________________________________________________<br/>\n&gt; &gt; Do You Yahoo!?<br/>\n&gt; &gt; Make international calls for as low as $.04/minute with <br/>\n&gt; &gt; Yahoo! Messenger<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://phonecard.yahoo.com/\">http://phonecard.yahoo.com/</a><br/>\n&gt; &gt; <br/>\n&gt; &gt; ------------------------ Yahoo! Groups Sponsor <br/>\n&gt; &gt; ---------------------~--&gt;<br/>\n&gt; &gt; Small business owners...<br/>\n&gt; &gt; Tell us what you think! <br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://promo2.yahoo.com/sbin/Yahoo!\">http://promo2.yahoo.com/sbin/Yahoo!</a>_BusinessNewsletter/survey.cgi<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://us.click.yahoo.com/vO1FAB/txzCAA/ySSFAA/NhFolB/TM\">http://us.click.yahoo.com/vO1FAB/txzCAA/ySSFAA/NhFolB/TM</a><br/>\n&gt; &gt; --------------------------------------------------------------<br/>\n&gt; &gt; -------~-&gt;<br/>\n&gt; &gt; <br/>\n&gt; &gt; To unsubscribe from this group, send an email to:<br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt; &gt;  <br/>\n&gt; &gt; <br/>\n&gt; &gt; Your use of Yahoo! Groups is subject to <br/>\n&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> <br/>\n&gt; &gt; <br/>\n&gt; &gt; <br/>\n&gt; <br/>\n<br/>\n<br/>\n </span></blockquote>__________________________________________________<br/>\nDo You Yahoo!?<br/>\nMake international calls for as low as $.04/minute with Yahoo! Messenger<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://phonecard.yahoo.com/\">http://phonecard.yahoo.com/</a></div>", 
    "prevInTime": 2114, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "996130695", 
    "canDelete": false, 
    "nextInTopic": 2119, 
    "prevInTopic": 2113, 
    "headers": {
        "inReplyToHeader": "PEFGMDc3NzZEQjVEMUQyMTFCQzA3MDBBMEM5RTkyMzdGNUMwMTc2QG9iamVjbWVudG9yLmNvbT4=", 
        "messageIdInHeader": "PDIwMDEwNzI2MDY1ODE1Ljc3ODk3LnFtYWlsQHdlYjE0OTA3Lm1haWwueWFob28uY29tPg=="
    }
}