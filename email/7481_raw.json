{
    "numMessagesInTopic": 7, 
    "nextInTime": 7482, 
    "senderId": "HRswqdTrzQmVNYHIqnaDopkJcBR30G-2G_z1waEFsKNSl6FxqJe1wFGijp2C0L4sIxPUKUrh_Rc", 
    "systemMessage": false, 
    "subject": "Re: [junit] Factory adaptor approach", 
    "from": "john.link@...", 
    "authorName": "john.link@gmx.net", 
    "msgSnippet": "... I would only go down this road if no other option seems to be feasible. I ve never had to mock out a singleton for testing during the last two years. I ", 
    "msgId": 7481, 
    "rawEmail": "Return-Path: &lt;john.link@...&gt;\r\nX-Sender: john.link@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 3 Apr 2003 07:53:42 -0000\r\nReceived: (qmail 66374 invoked from network); 3 Apr 2003 07:53:42 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m10.grp.scd.yahoo.com with QMQP; 3 Apr 2003 07:53:42 -0000\r\nReceived: from unknown (HELO mx0.gmx.net) (213.165.64.100)\n  by mta1.grp.scd.yahoo.com with SMTP; 3 Apr 2003 07:53:41 -0000\r\nReceived: (qmail 17323 invoked by uid 0); 3 Apr 2003 07:53:40 -0000\r\nDate: Thu, 3 Apr 2003 09:53:40 +0200 (MEST)\r\nTo: junit@yahoogroups.com\r\nMIME-Version: 1.0\r\nReferences: &lt;20030402173445.14015.qmail@...&gt;\r\nSubject: Re: [junit] Factory adaptor approach\r\nX-Priority: 3 (Normal)\r\nX-Authenticated-Sender: #0001337215@...\r\nX-Authenticated-IP: [193.150.166.43]\r\nMessage-ID: &lt;6985.1049356420@...&gt;\r\nX-Mailer: WWW-Mail 1.6 (Global Message Exchange)\r\nX-Flags: 0001\r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 8bit\r\nFrom: john.link@...\r\nX-Yahoo-Group-Post: member; u=34183400\r\nX-Yahoo-Profile: jlinkyh\r\n\r\n&gt; &gt; My concern is twofold:\n&gt; &gt; a) You bring testing logic into your production code. It&#39;s reasonable\n&gt; &gt; to change your design to make it more testable but weaving testing\n&gt; &gt; *logic* into production code feels strange to me.\n&gt; \n&gt; A good point.  What do you think about the comment at the end, whereby\n&gt; the factory would have only three static methods:\n&gt; \n&gt; public Factory getInstance();\n&gt; protected void setOverrideFactory(Factory testFactory);\n&gt; protected void clearOverrideFactory();\n&gt; \n&gt; This should limit the test specific code to the getInstance method,\n\nI would only go down this road if no other option seems to be feasible. I&#39;ve\nnever had to mock out a singleton for testing during the last two years. I\nmade it a rule to always hand in the factory to the object which needs it.\n\n&gt; &gt; b) Having more than just one or two of those static factories raises\n&gt; &gt; chances to forget about initializing all override values in setUp and\n&gt; &gt; clearing them again in tearDown.\n&gt; \n&gt; I agree, a &quot;code smell&quot; is too many factories.  Two or three is a good\n&gt; threshold number, I think.\n\nIMO the problem is not in the factories but in the *static* factories, i.e.\nsingletons. If you really need a singleton try to live with a single one\n(PNI) which then might be the access point to several &quot;global&quot; objects. And make\nvery very sure that your global objects are read-only.\n\nJohannes\n\n-- \n+++ GMX - Mail, Messaging & more  http://www.gmx.net +++\nBitte lï¿½cheln! Fotogalerie online mit GMX ohne eigene Homepage!\n\n\n", 
    "profile": "jlinkyh", 
    "topicId": 7358, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 34183400, 
    "prevInTime": 7480, 
    "contentTrasformed": false, 
    "postDate": "1049356420", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 7450, 
    "headers": {
        "messageIdInHeader": "PDY5ODUuMTA0OTM1NjQyMEB3d3c0OS5nbXgubmV0Pg==", 
        "referencesHeader": "PDIwMDMwNDAyMTczNDQ1LjE0MDE1LnFtYWlsQHdlYjgwNDA1Lm1haWwueWFob28uY29tPg=="
    }
}