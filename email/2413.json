{
    "numMessagesInTopic": 2, 
    "nextInTime": 2414, 
    "senderId": "057lcAcBfaJIdwatLmA0Ho100Gw4K2yaRCi2abABKaFVRVsGOKbVeeKl-oWGmKuh-jUNS4L6Xtx7ZPavRxMj3Iv-IUAB", 
    "systemMessage": false, 
    "subject": "Re: [junit] Unit testing/Third-party libraries", 
    "from": "Eric Vought &lt;evought@...&gt;", 
    "authorName": "Eric Vought", 
    "msgSnippet": "For my part: I will only write an actual testcase for a library routine when I have already discovered and reported a specific defect. In that case I will", 
    "msgId": 2413, 
    "topicId": 2403, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "messageBody": "<div id=\"ygrps-yiv-1045620235\">For my part:<br/>\n<br/>\nI will only write an actual testcase for a library<br/>\nroutine when I have already discovered and reported a<br/>\nspecific defect. In that case I will write a quick<br/>\ntestcase that will allow me to verify a fix if one is<br/>\never delivered. Although I presumably would have a<br/>\ntestcase for my own code which fails due to the third<br/>\nparty defect, I will typically add a clearly marked<br/>\nworkaround to my own code and therefore can&#39;t count on<br/>\nhaving it fail in the future. So, in the case you just<br/>\ndescribed, I would typically add a branch in my code<br/>\nto make sure nextElement() fails appropriately (and<br/>\ntherefore passes the test), then add a specific test<br/>\ncase for the vendor&#39;s nextElement(), adding a vendor<br/>\ndefect number to its comment block.<br/>\n<br/>\nWith libraries that I am not comfortable with, new<br/>\nfeatures, features that may change from platform to<br/>\nplatform, or in situations where I am not certain that<br/>\nI now the rules, I will usually litter my code and my<br/>\ntestcases with extra assertions verifying my code&#39;s<br/>\nview of the world. These assertions are typically not<br/>\nthe point of the testcase, but the validity of the<br/>\ntest depends on them being true. I will often mark<br/>\nthem with a short comment &quot;// precondition&quot; to make<br/>\nthis clear to someone maintaining the tests later.<br/>\n<br/>\nSo, I am not writing separate testcases to &quot;test<br/>\nsomeone else&#39;s code&quot; per se, but I want to be able to<br/>\nquickly isolate failures in that 3rd party code from<br/>\nfailures in my code or failures in my understanding of<br/>\nhow the thrid party code is supposed to work. Adding<br/>\nassertions is cheap and I usually learn a lot when the<br/>\n&quot;impossible&quot; happens, just like you did when the<br/>\nvendor&#39;s &quot;Enumeration&quot; didn&#39;t work the way it should<br/>\nhave.<br/>\n<br/>\nWhen debugging, I always follow the old rule &quot;strcopy<br/>\nisn&#39;t broken...&quot;, but when laying out the testcases, I<br/>\ncan be fairly paranoid with my assertions- this allows<br/>\nme to be less paranoid when debugging.<br/>\n<br/>\n<br/>\n--- &quot;J. B. Rainsberger&quot; &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:jbrains762@...\">jbrains762@...</a>&gt;<br/>\nwrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt;Presumably if I tested the assumptions correctly in<br/>\n&gt; both cases, then I<br/>\n&gt; &gt;wouldn&#39;t have to test my code in both of its<br/>\n&gt; configurations (since<br/>\n&gt; &gt;from its point of view it&#39;s not really doing<br/>\n&gt; anything different in the<br/>\n&gt; &gt;two different cases).<br/>\n&gt; [...]<br/>\n&gt; <br/>\n&gt; You have to assume that third-party software works<br/>\n&gt; when you integrate with <br/>\n&gt; it. You have to assume that Java works. You have to<br/>\n&gt; assume that anyone you <br/>\n&gt; didn&#39;t write yourself works, otherwise you&#39;re<br/>\n&gt; testing someone else&#39;s code, <br/>\n&gt; and that is testing you shouldn&#39;t have to do.<br/>\n&gt; <br/>\n&gt; But their stuff has bugs. I posted an example of a<br/>\n&gt; bug in IBM&#39;s EJB <br/>\n&gt; implementation on Wiki. They have an Enumeration<br/>\n&gt; that isn&#39;t really an <br/>\n&gt; Enumeration. I only found this out during unit<br/>\n&gt; tests. It happens.<br/>\n&gt; <br/>\n&gt; So what can you do?<br/>\n&gt; <br/>\n&gt; Fortunately, XP has a solution: quick releases and<br/>\n&gt; acceptance tests force <br/>\n&gt; you to integrate early and often so that you can<br/>\n&gt; expose these bugs in <br/>\n&gt; third-party software earlier. The good news is that,<br/>\n&gt; through unit testing, <br/>\n&gt; you can find these third-party bugs more easily. I<br/>\n&gt; would not be the least <br/>\n&gt; bit surprised if I were the first person ever to<br/>\n&gt; find this bug in IBM&#39;s EJB <br/>\n&gt; implementation. After all, who would bother calling<br/>\n&gt; &quot;nextElement()&quot; when <br/>\n&gt; &quot;hasMoreElements()&quot; returns false? My acceptance<br/>\n&gt; test did, because I wanted <br/>\n&gt; to avoid subtle bugs, so I looked under every rock.<br/>\n&gt; <br/>\n&gt; But at least I found the bug early in my integration<br/>\n&gt; with the library, <br/>\n&gt; reported it, and perhaps they&#39;ll fix it. What<br/>\n&gt; acceptance testing did was <br/>\n&gt; make the bug show up now, rather than six months<br/>\n&gt; from now at an Australian <br/>\n&gt; customer&#39;s site. That would be a hefty travel bill.<br/>\n&gt; <br/>\n&gt; So for unit testing, you have to assume that<br/>\n&gt; libraries work, otherwise you <br/>\n&gt; can&#39;t truly unit test. But make sure you have the<br/>\n&gt; appropriate <br/>\n&gt; integration/acceptance tests; otherwise, you&#39;ll not<br/>\n&gt; find bugs in those <br/>\n&gt; libraries soon enough.<br/>\n&gt; <br/>\n&gt; JBR.<br/>\n&gt; <br/>\n&gt;<br/>\n </span></blockquote>_________________________________________________________________<br/>\n<blockquote><span title=\"ireply\"> &gt; Get your FREE download of MSN Explorer at<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://explorer.msn.com/intl.asp\">http://explorer.msn.com/intl.asp</a><br/>\n&gt; <br/>\n&gt; <br/>\n&gt; ------------------------ Yahoo! Groups Sponsor<br/>\n&gt; <br/>\n&gt; To unsubscribe from this group, send an email to:<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit-unsubscribe@yahoogroups.com\">junit-unsubscribe@yahoogroups.com</a><br/>\n&gt;  <br/>\n&gt; <br/>\n&gt; Your use of Yahoo! Groups is subject to<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://docs.yahoo.com/info/terms/\">http://docs.yahoo.com/info/terms/</a> <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n&gt; <br/>\n<br/>\n </span></blockquote>__________________________________________________<br/>\nDo You Yahoo!?<br/>\nMake international calls for as low as $.04/minute with Yahoo! Messenger<br/>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://phonecard.yahoo.com/\">http://phonecard.yahoo.com/</a></div>", 
    "prevInTime": 2412, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "998340764", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 2403, 
    "headers": {
        "inReplyToHeader": "PEYzNm5xRUJRZFdmRk1WcEhnTEgwMDAwMzg3ZUBob3RtYWlsLmNvbT4=", 
        "messageIdInHeader": "PDIwMDEwODIwMjA1MjQ0LjU0OTU2LnFtYWlsQHdlYjE0NzA0Lm1haWwueWFob28uY29tPg=="
    }
}