{
    "numMessagesInTopic": 8, 
    "nextInTime": 17002, 
    "senderId": "mnvxLbiNlvZRTzdXw1HO45qQ1MRfwvM-UfYDrtRP5KX7mRBM6uo-NG9ccxXfOw0ENqqLfS4xZz-XuHBXi-_1TUJOvk3s0mFVr6nMpqxIPlqnigqx", 
    "systemMessage": false, 
    "subject": "Mocking libraries and moving parts (was: Re: [junit] unit tes t       case for login())", 
    "from": "&quot;mrutherfurd&quot; &lt;michael.rutherford@...&gt;", 
    "authorName": "mrutherfurd", 
    "msgSnippet": "... ways to in ... problerm is ... interfaces to ... below I needed ... produce mock ... each other ... effort just to ... than the ... What ... if ... you ...", 
    "msgId": 17001, 
    "profile": "mrutherfurd", 
    "topicId": 16987, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 229542016, 
    "messageBody": "<div id=\"ygrps-yiv-224224945\">--- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>, &quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt; wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt;<br/>\n&gt; Rutherford, Michael wrote:<br/>\n&gt; &gt; <br/>\n&gt; &gt; Yes I&#39;m aware that the various mocking frameworks all provide <br/>\n </span></blockquote>ways to in<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; erffect provide stub implementations of a given interface. The <br/>\n </span></blockquote>problerm is<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; having to provide the interelationships between the various <br/>\n </span></blockquote>interfaces to<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; allow the mock to function adequately. In the simple example <br/>\n </span></blockquote>below I needed<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; to provide a mock IDfSession with enough extra code for it to <br/>\n </span></blockquote>produce mock<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; IDfGroup and IDfUser objects that could then be resolved against <br/>\n </span></blockquote>each other<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; in several variations by the business logic. It was a major <br/>\n </span></blockquote>effort just to<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; get the mocks set up. IIRC the test code was significantly larger <br/>\n </span></blockquote>than the<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; original class, let alone just the method I was testing.<br/>\n&gt; <br/>\n&gt; What would have to be true for you to have avoided this extra work? <br/>\n </span></blockquote>What <br/>\n<blockquote><span title=\"ireply\"> &gt; example were you trying to check? I don&#39;t know Documentum well, but <br/>\n </span></blockquote>if <br/>\n<blockquote><span title=\"ireply\"> &gt; your business logic operates on User and Group objects, shouldn&#39;t <br/>\n </span></blockquote>you <br/>\n<blockquote><span title=\"ireply\"> &gt; just invoke your business logic passing in User and Group objects? <br/>\n </span></blockquote>This <br/>\n<blockquote><span title=\"ireply\"> &gt; would remove the need to simulate the Session interface.<br/>\n&gt; <br/>\n&gt; I would need to know more to be sure, but I suspect there are <br/>\n&gt; simplifications we can apply by looking at the tests a little <br/>\n&gt; differently. If you could share a test (or the essence of it) with <br/>\n </span></blockquote>us, <br/>\n<blockquote><span title=\"ireply\"> &gt; we might be able to help.<br/>\n&gt; <br/>\n&gt; &gt; The fact that calls to Documentum super class methods are <br/>\n </span></blockquote>intermingled with<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; business logic to a high degree and seperating them would <br/>\n </span></blockquote>complicate the<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; class inordinately making it less maintainable is also annoying.<br/>\n&gt; <br/>\n&gt; I&#39;ll take your word for it, but intermixing business logic with <br/>\n&gt; integration logic has, in my experience, never been simpler (easier <br/>\n </span></blockquote>to <br/>\n<blockquote><span title=\"ireply\"> &gt; maintain) than separating them from each other.<br/>\n&gt; <br/>\n&gt; &gt; Having said that I still haven&#39;t given up, I&#39;m just less <br/>\n </span></blockquote>confident than I<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; was. I also reread the holy books regularly <br/>\n </span></blockquote>(&quot;Refactoring&quot;, &quot;Working<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; Effectively With Legacy Code&quot;, &quot;JUnit Recipes&quot;, &quot;Design Patterns&quot; <br/>\n </span></blockquote>and<br/>\n<blockquote><span title=\"ireply\"> &gt; &gt; &quot;Refactoring to Patterns&quot;) trying to get ideas :-)<br/>\n&gt; <br/>\n&gt; More eyes usually help....<br/>\n&gt; <br/>\n&gt; Take care.<br/>\n<br/>\n </span></blockquote>Here&#39;s the user/group example I was referring to... Any suggestions <br/>\nwould be greatly appreciated.<br/>\n<br/>\n/**<br/>\n * This class allows default group to be used as an additional <br/>\nscoping type. <br/>\n * <br/>\n * Add the new qualifier to the the app.xml file to enable the use of <br/>\nthis file.<br/>\n * <br/>\n * In use the qualifier will return the default group the user <br/>\nbelongs to which can therefore <br/>\n * be compared to the scoping value.<br/>\n * <br/>\n * eg.<br/>\n * \t&gt;scope group=&quot;lpc&quot;&lt;<br/>\n * <br/>\n * @author Michael Rutherfurd<br/>\n */<br/>\npublic class DefaultGroupQualifier implements IQualifier {<br/>\n<br/>\n\t/**<br/>\n\t * Returns the name of the group to be used for scoping.<br/>\n\t * @return scope name<br/>\n\t */<br/>\n\tpublic String getScopeName() {<br/>\n\t\treturn &quot;group&quot;;<br/>\n\t}<br/>\n<br/>\n\tpublic String[] getContextNames() {<br/>\n\t\treturn null;<br/>\n\t}<br/>\n<br/>\n\tpublic String getScopeValue(QualifierContext context) {<br/>\n\t\treturn getDefaultGroup();<br/>\n\t}<br/>\n<br/>\n\tpublic String getParentScopeValue(String scopeValue) {<br/>\n\t\treturn null;<br/>\n\t}<br/>\n<br/>\n\tpublic String[] getAliasScopeValues(String scopeValue) {<br/>\n\t\treturn null;<br/>\n\t}<br/>\n\t<br/>\n\tprivate String getDefaultGroup() {<br/>\n\t\t<br/>\n\t\ttry {<br/>\n\t\t\tIDfSessionManager sessionManager = <br/>\nSessionManagerHttpBinding.getSessionManager();<br/>\n\t\t\t<br/>\n\t\t\tif (sessionManager == null) {<br/>\n\t\t\t\tDfLogger.debug(this, &quot;No session <br/>\nmanager available&quot;, null, null);<br/>\n\t\t\t\treturn &quot;&quot;;<br/>\n\t\t\t}<br/>\n\t\t\t<br/>\n\t\t\tString currentDocbase = <br/>\nSessionManagerHttpBinding.getCurrentDocbase();<br/>\n\t\t\t<br/>\n\t\t\tif (currentDocbase == null) {<br/>\n\t\t\t\tDfLogger.debug(this, &quot;No docbase <br/>\navailable&quot;, null, null);<br/>\n\t\t\t\treturn &quot;&quot;;<br/>\n\t\t\t}<br/>\n\t\t\t\t\t\t<br/>\n\t\t\tDfLogger.debug(this, &quot;PrincipalName: &quot; + <br/>\nsessionManager.getPrincipalName(), null, null);<br/>\n\t\t\t<br/>\n\t\t\ttry {<br/>\n\t\t\t\tIDfSession session = <br/>\nsessionManager.getSession(currentDocbase);<br/>\n\t\t\t\t<br/>\n\t\t\t\tif (session == null) {<br/>\n\t\t\t\t\tDfLogger.debug(this, &quot;No <br/>\nsession available&quot;, null, null);<br/>\n\t\t\t\t\treturn &quot;&quot;;<br/>\n\t\t\t\t}<br/>\n\t\t\t<br/>\n\t\t\t\ttry {<br/>\n\t\t\t\t\tIDfUser user = session.getUser<br/>\n(null);<br/>\n\t\t\t\t\t<br/>\n\t\t\t\t\tDfLogger.debug(this, &quot;User: &quot; <br/>\n+ user.getUserName() + &quot;(&quot; + user.getUserOSDomain() + &quot;&#92;&#92;&quot; + <br/>\nuser.getUserOSName() + &quot;), Default group: &quot; + user.getUserGroupName<br/>\n(), null, null);<br/>\n\t\t\t\t\t<br/>\n\t\t\t\t\treturn user.getUserGroupName<br/>\n();<br/>\n\t<br/>\n\t\t\t\t} finally {<br/>\n\t\t\t\t\tsessionManager.release<br/>\n(session);<br/>\n\t\t\t\t}<br/>\n\t\t\t<br/>\n\t\t\t} catch (DfIdentityException e) {<br/>\n\t            DfLogger.debug(this, &quot;Failed to get session due <br/>\nto identity exception&quot;, null, null);<br/>\n\t\t\t\treturn &quot;&quot;;<br/>\n\t\t\t}<br/>\n\t\t\t<br/>\n\t\t} catch (DfException e) {<br/>\n            DfLogger.error(this, &quot;Failed to get group&quot;, null, e);<br/>\n\t\t}<br/>\n\t\t<br/>\n\t\treturn &quot;&quot;;<br/>\n\t}\t<br/>\n}</div>", 
    "prevInTime": 17000, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1150957756", 
    "canDelete": false, 
    "nextInTopic": 17002, 
    "prevInTopic": 17000, 
    "headers": {
        "inReplyToHeader": "PDQ0OTlDMUQyLjcwOTAzMDhAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PGU3ZGRicytkY3FuQGVHcm91cHMuY29tPg=="
    }
}