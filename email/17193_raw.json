{
    "numMessagesInTopic": 6, 
    "nextInTime": 17194, 
    "senderId": "F9GhMlyaBldd5tMaeAPvld4T2BsVfIObTVVk3fplbp9IfODo84GYWm7P3_pzr80X0KkCGQHRSZf7cz6SMVDFtqJEtGldWSLuqBOsb38NZq7M0eex", 
    "systemMessage": false, 
    "subject": "Re: [junit] Test Run Directory", 
    "from": "&quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;", 
    "authorName": "Joakim Ohlrogge", 
    "msgSnippet": "You can set the working directory for JUnit using this property (just googled, haven t tried it) maven.junit.dir Yes The directory to invoke the VM in.", 
    "msgId": 17193, 
    "rawEmail": "Return-Path: &lt;joakim.ohlrogge@...&gt;\r\nX-Sender: joakim.ohlrogge@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 87445 invoked from network); 25 Jul 2006 08:44:42 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m28.grp.scd.yahoo.com with QMQP; 25 Jul 2006 08:44:42 -0000\r\nReceived: from unknown (HELO nf-out-0910.google.com) (64.233.182.185)\n  by mta7.grp.scd.yahoo.com with SMTP; 25 Jul 2006 08:44:41 -0000\r\nReceived: by nf-out-0910.google.com with SMTP id n29so148538nfc\n        for &lt;junit@yahoogroups.com&gt;; Tue, 25 Jul 2006 01:41:39 -0700 (PDT)\r\nReceived: by 10.78.158.11 with SMTP id g11mr2168697hue;\n        Tue, 25 Jul 2006 01:41:39 -0700 (PDT)\r\nReceived: by 10.78.170.13 with HTTP; Tue, 25 Jul 2006 01:41:38 -0700 (PDT)\r\nMessage-ID: &lt;b9ee5e410607250141u533e0380u7d3a7aa216df858@...&gt;\r\nDate: Tue, 25 Jul 2006 10:41:38 +0200\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;20060724210130.79594.qmail@...&gt;\r\nMIME-Version: 1.0\r\nReferences: &lt;3FB08D6A21B3EC4D8749EF6D9E626278483F7F@...&gt;\n\t &lt;20060724210130.79594.qmail@...&gt;\r\nX-Google-Sender-Auth: 0373a92824b6ffbd\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nX-eGroups-From: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nFrom: &quot;Joakim Ohlrogge&quot; &lt;joakim.ohlrogge@...&gt;\r\nReply-To: joakim.ohlrogge@...\r\nSubject: Re: [junit] Test Run Directory\r\nX-Yahoo-Group-Post: member; u=261856052; y=awBqYRKb8VOYO5Cf8692QZhxeV9n7e1wLdfqykdgj_hXmLyW\r\nX-Yahoo-Profile: j0hlrogge\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\n\r\nYou can set the working directory for JUnit using this property (just\ngoogled, haven&#39;t tried it)\n\nmaven.junit.dir Yes The directory to invoke the VM in. (ignored if fork is\ndisabled). The default value is ${basedir}.\nI agree with previous posters that you should try to move away from having\nyour tests write to disk.\nWhat is the reason for those diskwrites? I tend to use this pattern when\nwriting to files from my classes to make them easier to test and to remove\nthe concern of worriying about how to obtain a stream from all classes but\nthe factories.\n\n\npublic interface StreamFactory {\n    public OutputStream (string name);\n}\n\npublic class SomeClassThatNeedToWriteToStreams {\n    private final StreamFactory streamFactory;\n\n    public SomeClassThatNeedToWriteToStreams (StreamFactory streamFactory) {\n         this.streamFactory = streamFactory;\n    }\n\n    public SomeClassThatNeedToWriteToStreams () {\n         this(new FileSystemStreamFactory())\n   }\n}\n\nI usually don&#39;t have the default constructor since I like to inject this\nkind of resources (i think it is inline with what Andreas suggested) but I\nput it there to show that you can...\nWith this pattern you can mock the streamfactory to return\nByteArrayOutputStreams from your tests. By doing that you can assert on the\ncontents of the stream after a test is run, guarantee a clean state without\nhaving to clean your filesystem in your tests, run your tests faster. Also\nif you inject the streams you can easially add bufferedStreams etc without\nchanging the class under test (there should only be one reason for a class\nto change, SRP).\n\nIf you write only text to the files then use Writer and StringWriter in the\nsame way.\n\nI hope that you or someone else find this infomration useful.\nGood luck!\n/Joakim Ohlrogge\n\n\n\n\nOn 7/24/06, Ole Ersoy &lt;ole_ersoy@...&gt; wrote:\n&gt;\n&gt;   Thanks Andreas - I&#39;m a little bit of a purist when it\n&gt; comes to keeping the code as clean and simple as\n&gt; possible, so I try not to put code in components that\n&gt; is only there for the sake of testing.\n&gt;\n&gt; In the end, unless there&#39;s some Maven magic here, I&#39;ll\n&gt; probably just let maven create and clean the\n&gt; directories in the root project directory, since\n&gt; there&#39;s no conflict between the directories created\n&gt; and the project directories.\n&gt;\n&gt; In the long run it would be really great to be able to\n&gt; trick the test into running in src/test/output though.\n&gt; I would think there would be a System parameter or\n&gt; something to enable this...\n&gt;\n&gt; Thanks again,\n&gt; - Ole\n&gt;\n&gt; --- Andreas Guther &lt;Andreas.Guther@...&lt;Andreas.Guther%40markettools.com&gt;\n&gt; &gt;\n&gt;\n&gt; wrote:\n&gt;\n&gt; &gt; Ole,\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; I am not sure if you can do that in Maven. But I\n&gt; &gt; think it might be\n&gt; &gt; worth thinking about passing in the base folder to\n&gt; &gt; your class under test\n&gt; &gt; (Dependency Injection Pattern) rather than having\n&gt; &gt; the class computing\n&gt; &gt; it. In situations like that I sometime use in my\n&gt; &gt; class under test a\n&gt; &gt; setter method for a base folder that I only use in a\n&gt; &gt; test environment.\n&gt; &gt; The class under test checks if the folder is already\n&gt; &gt; set, if not, it\n&gt; &gt; does the standard behavior in computing the current\n&gt; &gt; folder, etc. You\n&gt; &gt; could have a check for null and since the setter\n&gt; &gt; method is not used in\n&gt; &gt; production, the variable would be null in\n&gt; &gt; production.\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Andreas\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Andreas Guther\n&gt; &gt;\n&gt; &gt; www.markettools.com\n&gt; &gt;\n&gt; &gt; Ph. (415) 957-2092\n&gt; &gt;\n&gt; &gt; ________________________________\n&gt; &gt;\n&gt; &gt; From: junit@yahoogroups.com &lt;junit%40yahoogroups.com&gt;\n&gt; &gt; [mailto:junit@yahoogroups.com &lt;junit%40yahoogroups.com&gt;] On Behalf Of\n&gt; &gt; David Saff\n&gt; &gt; Sent: Monday, July 24, 2006 4:24 AM\n&gt; &gt; To: junit@yahoogroups.com &lt;junit%40yahoogroups.com&gt;\n&gt; &gt; Subject: Re: [junit] Test Run Directory\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Ole,\n&gt; &gt;\n&gt; &gt; Is there a maven forum that you could ask this in?\n&gt; &gt; You may luck out and\n&gt; &gt; find a maven guru here, but...\n&gt; &gt;\n&gt; &gt; Good luck,\n&gt; &gt;\n&gt; &gt; David Saff\n&gt; &gt;\n&gt; &gt; P.S. Would it make sense right now to take a note to\n&gt; &gt; at some time\n&gt; &gt; redesign your component so that the dependency on\n&gt; &gt; the current working\n&gt; &gt; directory is well-encapsulated?\n&gt; &gt;\n&gt; &gt; ole_ersoy wrote:\n&gt; &gt; &gt; Hi,\n&gt; &gt; &gt;\n&gt; &gt; &gt; Does anyone know whether I can specify which\n&gt; &gt; directory\n&gt; &gt; &gt; a junit test will run in.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Let me elaborate a little.\n&gt; &gt; &gt;\n&gt; &gt; &gt; I&#39;m using Maven to run the tests, but in this case\n&gt; &gt; I want the\n&gt; &gt; &gt; test to think that it is running in a directory\n&gt; &gt; &quot;src/test/output&quot;\n&gt; &gt; &gt; relative to the directory that the tests are\n&gt; &gt; launced from.\n&gt; &gt; &gt;\n&gt; &gt; &gt; In other words I want the JUnit test to think it\n&gt; &gt; is being run from\n&gt; &gt; &gt;\n&gt; &gt; &gt; $basedir/src/test/output, when I&#39;m really running\n&gt; &gt; it from $basedir.\n&gt; &gt; &gt;\n&gt; &gt; &gt; The component I&#39;m testing creates directories, so\n&gt; &gt; my end goal is to\n&gt; &gt; &gt; have that component create the directories\n&gt; &gt; relative to\n&gt; &gt; &gt;\n&gt; &gt; &gt; $basedir/src/test/output\n&gt; &gt; &gt;\n&gt; &gt; &gt; Thanks,\n&gt; &gt; &gt; - Ole\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; [Non-text portions of this message have been\n&gt; &gt; removed]\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt; __________________________________________________\n&gt; Do You Yahoo!?\n&gt; Tired of spam? Yahoo! Mail has the best spam protection around\n&gt; http://mail.yahoo.com\n&gt;\n&gt;  \n&gt;\n\n\n[Non-text portions of this message have been removed]\n\n\n", 
    "profile": "j0hlrogge", 
    "topicId": 17169, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 261856052, 
    "prevInTime": 17192, 
    "contentTrasformed": false, 
    "postDate": "1153816898", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 17190, 
    "headers": {
        "inReplyToHeader": "PDIwMDYwNzI0MjEwMTMwLjc5NTk0LnFtYWlsQHdlYjYwNzE0Lm1haWwueWFob28uY29tPg==", 
        "messageIdInHeader": "PGI5ZWU1ZTQxMDYwNzI1MDE0MXU1MzNlMDM4MHU3ZDNhN2FhMjE2ZGY4NThAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDNGQjA4RDZBMjFCM0VDNEQ4NzQ5RUY2RDlFNjI2Mjc4NDgzRjdGQFdEQ0NQTUFJTDAxLm1hcmtldHRvb2xzLmNvbT4JIDwyMDA2MDcyNDIxMDEzMC43OTU5NC5xbWFpbEB3ZWI2MDcxNC5tYWlsLnlhaG9vLmNvbT4="
    }
}