{
    "numMessagesInTopic": 14, 
    "nextInTime": 22888, 
    "senderId": "THMijq1v445cndz9y3xgYi6QFcdpITcZgKbpTz6TJJ8l96h7g8VPYDhW8o7LReCKfjHJc47Q-rX9hNbcHvxFoPsd", 
    "systemMessage": false, 
    "subject": "Re: [junit] More example JUnit code", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "... @BeforeClass only works on static values, and should be matched with an @AfterClass.  It is very rare to see @BeforeClass used for set-up of lightweight", 
    "msgId": 22887, 
    "profile": "dsaff", 
    "topicId": 22880, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "messageBody": "<div id=\"ygrps-yiv-1486764182\">2010/8/22 Cédric Beust ♔ &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cedric@...\">cedric@...</a>&gt;:<br/>\n<blockquote><span title=\"ireply\"> &gt; Simon,<br/>\n&gt;<br/>\n&gt; Actually, I was wrong: using @BeforeClass will break your tests. Since JUnit<br/>\n&gt; reinstantiates a brand new class before each test method, only the first<br/>\n&gt; method will get the correct values for these fields. Subsequent methods will<br/>\n&gt; see null.<br/>\n<br/>\n </span></blockquote>@BeforeClass only works on static values, and should be matched with<br/>\nan @AfterClass.  It is very rare to see @BeforeClass used for set-up<br/>\nof lightweight data values.<br/>\n<br/>\n<blockquote><span title=\"ireply\"> &gt; Anyway, these values are constants, so they should be static final. Which<br/>\n&gt; solves the problem and also gets rid of @Before and @After.<br/>\n&gt;<br/>\n&gt; About the fields: what bothers me with this approach is that you&#39;re exposing<br/>\n&gt; a lot of fields to all your test methods and they only use a very small<br/>\n&gt; subset of these. In effect, fields are like global variables and they make<br/>\n&gt; it harder for someone coming to improve your class to understand exactly<br/>\n&gt; what fields are okay to modify and which tests need to be updated as well. I<br/>\n&gt; like to keep the data needed by each test method as local as possible to<br/>\n&gt; avoid this kind of problem.<br/>\n&gt;<br/>\n&gt; Parameterized tests help a lot with this kind of locality, and they turn out<br/>\n&gt; to be a great match for this particular problem.<br/>\n&gt;<br/>\n&gt; With all this in mind, here is my version (TestNG syntax, porting to JUnit<br/>\n&gt; is left as an exercise to the reader):<br/>\n&gt;<br/>\n&gt; public class FractionTest {<br/>\n&gt;<br/>\n&gt;  // A few useful constants<br/>\n&gt;  private static final Fraction F_1_1 = new Fraction(1, 1);<br/>\n&gt;  private static final Fraction F_1_2 = new Fraction(1, 2);<br/>\n&gt;  private static final Fraction F_1_3 = new Fraction(1, 3);<br/>\n&gt;  private static final Fraction F_2_1 = new Fraction(2, 1);<br/>\n&gt;<br/>\n&gt;  /**<br/>\n&gt;   * The data set used to verify reduction, the last parameter of each<br/>\n&gt;   * row is the expected value.<br/>\n&gt;   */<br/>\n&gt;  @DataProvider<br/>\n&gt;  public Object[][] reduceData() {<br/>\n&gt;    return new Object[][] {<br/>\n&gt;      new Object[] { F_1_1, F_1_1 },<br/>\n&gt;      new Object[] { new Fraction(2, 2), F_1_1 },<br/>\n&gt;      new Object[] { new Fraction(4, 2), F_2_1 },<br/>\n&gt;      // ...<br/>\n&gt;    };<br/>\n&gt;  }<br/>\n&gt;<br/>\n&gt;  @Test(dataProvider = &quot;reduceData&quot;)<br/>\n&gt;  public void verifyReduce(Fraction input, Fraction expected) {<br/>\n&gt;    Assert.assertEquals(input.reduce(), expected);<br/>\n&gt;  }<br/>\n&gt;<br/>\n&gt;  /**<br/>\n&gt;   * The data set used to verify multiplication, the last parameter of each<br/>\n&gt;   * row is the expected value after rediction<br/>\n&gt;   */<br/>\n&gt;  @DataProvider<br/>\n&gt;  public Object[][] multiplicationData() {<br/>\n&gt;    return new Object[][] {<br/>\n&gt;      new Object[] { F_1_1, F_1_1, F_1_1 },<br/>\n&gt;      new Object[] { new Fraction(2, 2), new Fraction(3, 2), new Fraction(3,<br/>\n&gt; 2) },<br/>\n&gt;      // ...<br/>\n&gt;    };<br/>\n&gt;  }<br/>\n&gt;<br/>\n&gt;  @Test(dataProvider = &quot;multiplicationData&quot;)<br/>\n&gt;  public void verifyReduce(Fraction f1, Fraction f2, Fraction expected) {<br/>\n&gt;    // Assuming that multiply() will call reduce() before returning its<br/>\n&gt; result<br/>\n&gt;    Assert.Equals(f1.multiply(f2), expected);<br/>\n&gt;    Assert.Equals(f2.multiply(f1), expected);<br/>\n&gt;  }<br/>\n&gt; }<br/>\n<br/>\n </span></blockquote>I&#39;d replace your 49 lines of code with these 17, without loss of<br/>\nextensibility or coverage:<br/>\n<br/>\npublic class FractionTest {<br/>\n private Fraction f(int num, int denom) {<br/>\n   return new Fraction(num, denom);<br/>\n }<br/>\n<br/>\n @Test public void reduce() {<br/>\n   assertEquals(f(1, 1), f(1, 1).reduce());<br/>\n   assertEquals(f(1, 1), f(2, 2).reduce());<br/>\n   assertEquals(f(2, 1), f(4, 2).reduce());<br/>\n }<br/>\n<br/>\n @Test public void multiply() {<br/>\n   // Assuming that multiply() will call reduce() before returning its result<br/>\n   assertEquals(f(1, 1), f(1, 1).multiply(f(1, 1)));<br/>\n   assertEquals(f(3, 2), f(2, 2).multiply(f(3, 2)));<br/>\n }<br/>\n}<br/>\n<br/>\n   David Saff<br/>\n<br/>\n<blockquote><span title=\"qreply\"> &gt;<br/>\n&gt; You can probably see how parameterized tests improve the locality of your<br/>\n&gt; tests and how adding values to extend the coverage is trivial.<br/>\n&gt;<br/>\n&gt; Also note that this is a great example of how misleading code coverage can<br/>\n&gt; be: you would get 100% test coverage if you only returned 1 data set in each<br/>\n&gt; data provider, but your tests would be very poor. Adding values to your data<br/>\n&gt; provider will do nothing for your code coverage but it will considerably<br/>\n&gt; improve the quality of your tests.<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt; Cédric<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; On Sun, Aug 22, 2010 at 6:11 PM, Simon Chappell &lt;<br/>\n&gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:simonpeterchappell@...\">simonpeterchappell@...</a>&gt; wrote:<br/>\n&gt;<br/>\n&gt;&gt; Cedric,<br/>\n&gt;&gt;<br/>\n&gt;&gt; Good points.<br/>\n&gt;&gt;<br/>\n&gt;&gt; 1. I&#39;m not used to the @BeforeClass. I will make that change, as it is a<br/>\n&gt;&gt; better fit.<br/>\n&gt;&gt; 2. The assigning of nulls is just to emphasize cleaning up after yourself.<br/>\n&gt;&gt; I<br/>\n&gt;&gt; agree that it&#39;s technically unnecessary.<br/>\n&gt;&gt; 3. Let me think about the parameterized thing. I think for eight values,<br/>\n&gt;&gt; with their descriptive names, it brings more value leaving them as they<br/>\n&gt;&gt; are,<br/>\n&gt;&gt; although I may change where they are defined.<br/>\n&gt;&gt;<br/>\n&gt;&gt; Thank you for you considered points. Hopefully this will help us all<br/>\n&gt;&gt; sharpen<br/>\n&gt;&gt; our JUnit writing.<br/>\n&gt;&gt;<br/>\n&gt;&gt; Simon<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; 2010/8/22 Cédric Beust ♔ &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:cedric@...\">cedric@...</a>&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Hi Simon,<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; A few quick questions/remarks:<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; - Why do you initialize the fractions in @Before and not @BeforeClass,<br/>\n&gt;&gt; &gt; since you don&#39;t seem to ever modify them?<br/>\n&gt;&gt; &gt; - Why assigning them to null in @After?<br/>\n&gt;&gt; &gt; - Given the nature of your tests, I would probably use parameterized<br/>\n&gt;&gt; &gt; tests to supply only the data that each test needs instead of making<br/>\n&gt;&gt; these<br/>\n&gt;&gt; &gt; eight fields available to all the test methods all the time.<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; --<br/>\n&gt;&gt; &gt; Cédric<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; On Sun, Aug 22, 2010 at 3:47 PM, Simon Chappell &lt;<br/>\n&gt;&gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:simonpeterchappell@...\">simonpeterchappell@...</a> &lt;simonpeterchappell%40gmail.com&gt;&gt; wrote:<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; &gt; Following up on my previous offering of example JUnit code, I have<br/>\n&gt;&gt; pushed<br/>\n&gt;&gt; &gt; a<br/>\n&gt;&gt; &gt; &gt; project called Fraction to GitHub. This implements classic mathematical<br/>\n&gt;&gt; &gt; &gt; fractions and was written in a test first manner and has documented<br/>\n&gt;&gt; unit<br/>\n&gt;&gt; &gt; &gt; tests to help those learning JUnit see one style (my style!) of test<br/>\n&gt;&gt; &gt; &gt; implementation.<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; The code may be found at:<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://github.com/simonpeter/Fraction\">http://github.com/simonpeter/Fraction</a><br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; I hope that you find it useful.<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; Simon<br/>\n&gt;&gt; &gt; &gt; (one of the JUnit mailing list moderators)<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; --<br/>\n&gt;&gt; &gt; &gt; simonpeter.org | simonpeter.com | newlife-upc.org<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; ------------------------------------<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; --<br/>\n&gt;&gt; &gt; Cédric<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; --<br/>\n&gt;&gt; simonpeter.org | simonpeter.com | newlife-upc.org<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; [Non-text portions of this message have been removed]<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt; ------------------------------------<br/>\n&gt;&gt;<br/>\n&gt;&gt; Yahoo! Groups Links<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt; Cédric<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 22886, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1282571516", 
    "canDelete": false, 
    "nextInTopic": 22888, 
    "prevInTopic": 22885, 
    "headers": {
        "inReplyToHeader": "PEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4=", 
        "messageIdInHeader": "PEFBTkxrVGluNlZ1cDRfZzUtZ0hla1Jhek0weHZoUjJFYjVUWE1ZSE0weTNFWkBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PEFBTkxrVGlrdjRnUHhHZy1oQ3crc3ZlZFRlWWViVCtrOXdSTlhaRUZkd0ZURUBtYWlsLmdtYWlsLmNvbT4JPEFBTkxrVGltSEJSRk1zNmFnQStqSFVOU1hDcFI1cnhONVRmdnZydVF6MndUYkBtYWlsLmdtYWlsLmNvbT4JPEFBTkxrVGltdjZhaDhkcnhLdGF4RGtGclpGSkV0YS1lS0hTcWdGa21QZm9YU0BtYWlsLmdtYWlsLmNvbT4JPEFBTkxrVGk9d3dmOFRmaS15MVVhcWF3NGpKaEVSS29fSktkTEJjWmZPd0FFc0BtYWlsLmdtYWlsLmNvbT4="
    }
}