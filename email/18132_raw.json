{
    "numMessagesInTopic": 4, 
    "nextInTime": 18133, 
    "senderId": "zeOsKbx-4RSl5ItqIc0xOMx8kruSBDdG1MTrerUWkFl22GomyuZFHIaToImAMl81m-AmVnsmqFHGhSOLzJjUJzQhu6axRgIurLLg", 
    "systemMessage": false, 
    "subject": "Re: [junit] Testing Static block, members, class with JUnit", 
    "from": "Robert Wenner &lt;robert.wenner@...&gt;", 
    "authorName": "Robert Wenner", 
    "msgSnippet": "... I would refactor the code to get rid of the static initializer for exactly the problems you noticed. You could use lazy initialization. Make the static", 
    "msgId": 18132, 
    "rawEmail": "Return-Path: &lt;robert.wenner@...&gt;\r\nX-Sender: robert.wenner@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 41373 invoked from network); 12 Oct 2006 23:38:47 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m34.grp.scd.yahoo.com with QMQP; 12 Oct 2006 23:38:47 -0000\r\nReceived: from unknown (HELO mail.gmx.net) (213.165.64.20)\n  by mta5.grp.scd.yahoo.com with SMTP; 12 Oct 2006 23:38:46 -0000\r\nReceived: (qmail invoked by alias); 12 Oct 2006 23:36:22 -0000\r\nReceived: from cpe-72-179-19-12.austin.res.rr.com (EHLO tiamat.robsnetz.de) [72.179.19.12]\n  by mail.gmx.net (mp017) with SMTP; 13 Oct 2006 01:36:22 +0200\r\nX-Authenticated: #1286805\r\nTo: junit@yahoogroups.com\r\nDate: Thu, 12 Oct 2006 18:36:15 -0500\r\nUser-Agent: KMail/1.9.1\r\nReferences: &lt;egm1v4+oos7@...&gt;\r\nIn-Reply-To: &lt;egm1v4+oos7@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n  charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nMessage-Id: &lt;200610121836.16013.robert.wenner@...&gt;\r\nX-Y-GMX-Trusted: 0\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Robert Wenner &lt;robert.wenner@...&gt;\r\nSubject: Re: [junit] Testing Static block, members, class with JUnit\r\nX-Yahoo-Group-Post: member; u=115089258; y=fJrzJlBPxETd5jJ72n4G-OqkRPZ022R4qKNJJxbQGFalT7IjGhk4\r\nX-Yahoo-Profile: robertwenner\r\n\r\nOn Thursday 12 October 2006 13:36, mcdonald6692 wrote:\n&gt; This brings up the general question, &quot;How do you\n&gt; test static blocks, classes and data-members?&quot; \n\nI would refactor the code to get rid of the static initializer for exactly \nthe problems you noticed.\n\nYou could use lazy initialization. Make the static block a method. In the \nlookup method, check whether the static member is null. If it is, call \nthe former static block (now method) to initialize the static members. \nThen proceed as usual.\n\n&gt; public class StateAbbrev {\n&gt;   // static list of all the abbreviations.\n&gt;   private static List accronyms = new ArrayList();\n&gt;\n&gt;   private String text = &quot;&quot;;\n&gt;\n&gt;   static {\n&gt;     DataSource ds = DataSource.getInstance();\n&gt;     List strings = ds.getAccronyms();\n&gt;     for (Iterator i = strings.iterator(); i.hasNext(); )\n&gt;       accronyms.add(new StateAbbrev((String)i.next()) );\n&gt;   }\n&gt;\n&gt;   public static StateAbbrev lookup(String letters)\n&gt;   {\n&gt;     for (Iterator i = accronyms.iterator(); i.hasNext(); )\n&gt;     {\n&gt;       StateAbbrev abbrev (StateAbbrev) i.next();\n&gt;       String accronym = abbrev.getText();\n&gt;       if (accronym.equals(letters))\n&gt;         return abbrev;\n&gt;     }\n&gt;     return null;\n&gt;   }\n\nbecomes\n\npublic class StateAbbrev {\n  // static list of all the abbreviations.\n  private static List accronyms = null;\n  private String text = &quot;&quot;;\n\n  private static void initialize() {\n     acronyms = new ArrayList();\n     DataSource ds = DataSource.getInstance();\n     List strings = ds.getAccronyms();\n     for (Iterator i = strings.iterator(); i.hasNext(); )\n       accronyms.add(new StateAbbrev((String)i.next()) );\n   }\n\n   public static StateAbbrev lookup(String letters)\n   {\n     if (acronyms == null)\n     { \n        initialize();\n     }\n     for (Iterator i = accronyms.iterator(); i.hasNext(); )\n     {\n       StateAbbrev abbrev (StateAbbrev) i.next();\n       String accronym = abbrev.getText();\n       if (accronym.equals(letters))\n         return abbrev;\n     }\n     return null;\n  }\n}\n\nIf you like, you can also make acronyms more accessible than private (eg \nprotected and have the test in the same package) and then set the static \nmembers to null if you need (eg in tearDown).\n\nRobert\n\n", 
    "profile": "robertwenner", 
    "topicId": 18131, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 115089258, 
    "prevInTime": 18131, 
    "contentTrasformed": false, 
    "postDate": "1160696175", 
    "canDelete": false, 
    "nextInTopic": 18134, 
    "prevInTopic": 18131, 
    "headers": {
        "inReplyToHeader": "PGVnbTF2NCtvb3M3QGVHcm91cHMuY29tPg==", 
        "messageIdInHeader": "PDIwMDYxMDEyMTgzNi4xNjAxMy5yb2JlcnQud2VubmVyQGdteC5kZT4=", 
        "referencesHeader": "PGVnbTF2NCtvb3M3QGVHcm91cHMuY29tPg=="
    }
}