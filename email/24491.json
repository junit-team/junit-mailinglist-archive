{
    "numMessagesInTopic": 9, 
    "nextInTime": 24492, 
    "senderId": "D3joh7XsCc8J0kJk2Fd4AGuNdP1ixRbpdRyCCse_HsVUX8YaWOViCTq7j3csWLrMuy4CMm7C4g43b7HXcBn4UTFzSiUyi3cp", 
    "systemMessage": false, 
    "subject": "Re: [junit] Asserts using Comparable.compareTo() instead of equals() (for BigDecimal and others)", 
    "from": "Kevin Cooney &lt;kcooney@...&gt;", 
    "authorName": "Kevin Cooney", 
    "msgSnippet": "When this came up last time, we had a long discussion, and finally decided that developers should use Hamcrest: https://github.com/junit-team/junit/issues/95 I", 
    "msgId": 24491, 
    "profile": "kevincooney2000", 
    "topicId": 24490, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 475263748, 
    "messageBody": "<div id=\"ygrps-yiv-1939352553\"><p dir=\"ltr\">When this came up last time, we had a long discussion, and finally decided that developers should use Hamcrest: <a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/junit-team/junit/issues/95\">https://github.com/junit-team/junit/issues/95</a></p>\n\n<p dir=\"ltr\">I am not personally opposed to finding a simple way to solve this in JUnit; just wanted to point people to the previous threads.<br>\n</p>\n<blockquote><span title=\"qreply\"> <div class=\"ygrps-yiv-1939352553gmail_quote\">On Mar 12, 2014 6:14 PM,  &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:SwingGuy1024@...\">SwingGuy1024@...</a>&gt; wrote:<br><blockquote class=\"ygrps-yiv-1939352553gmail_quote\" style=\"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;\">\n\n\n\n<u></u>\n\n\n\n\n\n\n\n\n\n \n<div style=\"\">\n<span> </span>\n\n\n<div>\n  <div>\n\n\n    <div>\n      \n      \n      <p>Comrades,<div><br></div><div>  Comparing two BigDecimals for the same value shouldn&#39;t be done with the equals() method, since two instances that have the same value but a different scale won&#39;t be &quot;equal.&quot; But there aren&#39;t any methods in Assert.class to do this. This means I need to write this:</div>\n<div><br></div><div>Assert.assertTrue(expected.compareTo(actual) == 0);</div><div><br></div><div>when I would rather write this:</div><div><br></div><div>Assert.assertCompare(expected, actual)</div><div><br></div><div>The second one has the added advantage that it can throw a ComparisonFailure, so I can see the two values in the test results.</div>\n<div><br></div><div>I would like to suggest the following four methods be added to Assert.class:</div><div><br></div><div>&lt;T extends Comparable&lt;T&gt; <span style=\"word-spacing:normal;\">void</span><span style=\"word-spacing:normal;\"> </span><span style=\"word-spacing:normal;\">assertCompare(T, T);</span></div>\n<div>&lt;T extends Comparable&lt;T&gt; <span style=\"word-spacing:normal;\">void</span><span style=\"word-spacing:normal;\"> </span><span style=\"word-spacing:normal;\">assertCompare(String, T, T)</span></div><div>&lt;T&gt; void assertCompare(T, T, Comparator&lt;T&gt;)<br>\n</div><div>&lt;T&gt; void assertCompare(String, T, T, Comparator&lt;T&gt;)</div><div><br></div><div>I have some code that implements these methods. I have this working in a production environment. I use it on BigDecimal values, but it works with any values that implement Comparable, or anything for which you can write a Comparator. </div>\n<div><br></div><div>Here is my proposed code:</div><div><br></div><div><div><div>    /**</div><div>     * Compare two Comparable objects using Comparable.compareTo() instead </div><div>     * of equals(). This is most useful for classes for which Comparable is </div>\n<div>     * inconsistent with equals(), such as BigDecimal.</div><div>     *</div><div>     * @param expected</div><div>     *            expected value</div><div>     * @param actual</div><div>     *            actual value</div>\n<div>     * @param &lt;T&gt;</div><div>     *            Any object that implements Comparable</div><div>     * @see java.lang.Comparable</div><div>     */</div><div>    public static &lt;T extends Comparable&lt;T&gt;&gt; void assertCompare(final T expected, final T actual) {</div>\n<div>        assertCompare(null, expected, actual);</div><div>    }</div><div><br></div><div>    /**</div><div>     * Compare two Comparable objects using Comparable.compareTo() instead </div><div>     * of equals(). This is primarily for classes for which Comparable is </div>\n<div>     * inconsistent with equals(), such as BigDecimal.</div><div>     *</div><div>     * @param message</div><div>     *            the identifying message for the {@link AssertionError} (&lt;code&gt;null&lt;/code&gt;</div>\n<div>     *            okay)</div><div>     * @param expected</div><div>     *            expected value</div><div>     * @param actual</div><div>     *            actual value</div><div>     * @param &lt;T&gt;</div><div>\n     *            Any object that implements Comparable</div><div>     * @see java.lang.Comparable</div><div>     */</div><div>    public static &lt;T extends Comparable&lt;T&gt;&gt; void assertCompare(final String message, final T expected, final T actual) {</div>\n<div>        if (expected == null &amp;&amp; actual == null) {</div><div>            // okay</div><div>        } else if (expected != null &amp;&amp; actual != null &amp;&amp; expected.compareTo(actual) == 0) {</div><div>\n            // We tested both for null here, because the compareTo method might</div><div>            // not handle a null parameter cleanly. (BigDecimal, for example,</div><div>            // throws a NullPointerException.) For these cases, it&#39;s</div>\n<div>            // preferable to throw a ComparisonFailure exception.</div><div>        } else {</div><div>            failCompare(message, expected, actual);</div><div>        }</div><div>    }</div><div><br></div><div>\n    private static void failCompare(final String message, final Object expected, final Object actual) {</div><div>        String cleanMessage = message == null ? &quot;&quot; : message;</div><div>        String expectedString = expected == null? null : expected.toString();</div>\n<div>        String actualString = actual == null? null : actual.toString();</div><div>        throw new ComparisonFailure(cleanMessage, expectedString, actualString);</div><div>    }</div><div><br></div><div>    /**</div>\n<div>     * Compare two objects using Comparator.compare() instead of equals(). </div><div>     * This is primarily for classes with a natural order that is </div><div>     * inconsistent with equals(), such as BigDecimal.</div>\n<div>     *</div><div>     * @param message</div><div>     *            the identifying message for the {@link AssertionError} (&lt;code&gt;null&lt;/code&gt;</div><div>     *            okay)</div><div>     * @param expected</div>\n<div>     *            expected value</div><div>     * @param actual</div><div>     *            actual value</div><div>     * @param comparator</div><div>     *            The comparator used to compare the values</div><div>\n     * @param &lt;T&gt;</div><div>     *            The type of the object</div><div>     * @see java.util.Comparator</div><div>     */</div><div>    public static &lt;T&gt; void assertCompare(final T expected, final T actual, final Comparator&lt;T&gt; comparator) {</div>\n<div>        assertCompare(null, expected, actual, comparator);</div><div>    }</div><div><br></div><div>    /**</div><div>     * Compare two objects using Comparator.compare() instead of equals(). </div><div>     * This is primarily for classes with a natural order that is </div>\n<div>     * inconsistent with equals(), such as BigDecimal.</div><div>     *</div><div>     * @param message</div><div>     *            the identifying message for the {@link AssertionError} (&lt;code&gt;null&lt;/code&gt;</div>\n<div>     *            okay)</div><div>     * @param expected</div><div>     *            expected value</div><div>     * @param actual</div><div>     *            actual value</div><div>     * @param comparator</div><div>\n     *            The comparator used to compare the values</div><div>     * @param &lt;T&gt;</div><div>     *            The type of the object</div><div>     * @see java.lang.Comparator</div><div>     */</div><div>    public static &lt;T&gt; void assertCompare(final String message, final T expected, final T actual, final Comparator&lt;T&gt; comparator) {</div>\n<div>        if (comparator == null) {</div><div>            throw new IllegalArgumentException(&quot;Null Comparator in test&quot;);</div><div>        }</div><div>        if (expected == null &amp;&amp; actual == null) {</div>\n<div>            // okay</div><div>        } else if (expected != null &amp;&amp; actual != null &amp;&amp; comparator.compare(actual, expected) == 0) {</div><div>            // We tested both for null here, because the compare() method might</div>\n<div>            // not handle a null parameter cleanly. For these cases, it&#39;s</div><div>            // preferable to throw a ComparisonFailure exception.</div><div>        } else {</div><div>            failCompare(message, expected, actual);</div>\n<div>        }</div><div>    }</div><div><br></div></div></div>\n\n    </div>\n     \n\n    \n    <div style=\"color:#fff;min-height:0;\"></div>\n\n\n</div>\n\n\n\n  \n\n\n\n\n\n\n</div></div></blockquote></div>\n </span></blockquote></div>", 
    "prevInTime": 24490, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1394677438", 
    "canDelete": false, 
    "nextInTopic": 24492, 
    "prevInTopic": 24490, 
    "headers": {
        "inReplyToHeader": "PGxmcXRpcStkcGg1aGJAWWFob29Hcm91cHMuY29tPg==", 
        "messageIdInHeader": "PENBQTNFK2VVT2JhN1d6cVZPQTBHeG8wa1NpRExUR3lzdlR6aWpPRGswK0hOd0FmRng2QUBtYWlsLmdtYWlsLmNvbT4=", 
        "referencesHeader": "PGxmcXRpcStkcGg1aGJAWWFob29Hcm91cHMuY29tPg=="
    }
}