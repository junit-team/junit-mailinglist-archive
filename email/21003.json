{
    "numMessagesInTopic": 2, 
    "nextInTime": 21004, 
    "senderId": "YGnSwgrC6KanV-W6SSOv-g-lCkrQSfeYjzynTYViigsArAt9nLoYcAOel0jDZmKmlE0onBsghuZ4RLpiKoQ-wDtlGPo", 
    "systemMessage": false, 
    "subject": "Re: [junit] Parameterized test - Reading in parameters from a file", 
    "from": "&quot;David Saff&quot; &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Rebeccah, I d like to help, but it would go a lot faster if you could pare down the code to the minimum needed to show the problem.  Thanks! David On Fri, Oct", 
    "msgId": 21003, 
    "profile": "dsaff", 
    "topicId": 20978, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "messageBody": "<div id=\"ygrps-yiv-768032432\">Rebeccah,<br/>\n<br/>\nI&#39;d like to help, but it would go a lot faster if you could pare down<br/>\nthe code to the minimum needed to show the problem.  Thanks!<br/>\n<br/>\n   David<br/>\n<br/>\nOn Fri, Oct 17, 2008 at 6:35 PM, Prastein, Rebeccah H<br/>\n&lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:rebeccah.h.prastein@...\">rebeccah.h.prastein@...</a>&gt; wrote:<br/>\n<blockquote><span title=\"qreply\"> &gt; I&#39;m creating parameterized junit4 tests that are to use actual patient<br/>\n&gt; data to validate test results for the new system against results<br/>\n&gt; obtained using a different system. I have several basic scenarios, each<br/>\n&gt; getting its own test class. There is a helper class that contains<br/>\n&gt; methods, given a value that identifies which scenario it is, to read in<br/>\n&gt; an external csv file containing the parameters for that scenario (test<br/>\n&gt; class), and construct a List of Arrays of parameters for the different<br/>\n&gt; cases in that scenario. The parameters themselves include input data to<br/>\n&gt; the system under test, as well as the expected output data.<br/>\n&gt;<br/>\n&gt; I am able to set up a parameterized test class where I explicitly define<br/>\n&gt; the parameters and make them into an Array of Arrays, which is then<br/>\n&gt; converted to a List of Arrays, and used for the testing. But if I<br/>\n&gt; obtain parameter Collection by calling the appropriate method in the<br/>\n&gt; helper class, I get a &quot;No runnable methods&quot; error.<br/>\n&gt;<br/>\n&gt; I think I&#39;ve narrowed the problem down to one of not knowing the size of<br/>\n&gt; the Collection at compile time. If I initialize a new Array of Arrays<br/>\n&gt; using literal dimensions, populate it with my List of Arrays, and then<br/>\n&gt; convert that Array of Arrays back to a List of Arrays again, it seems to<br/>\n&gt; work. But if I initialize that intermediate Array of Arrays with<br/>\n&gt; variables (even static final variables) for dimensions, it doesn&#39;t.<br/>\n&gt;<br/>\n&gt; The only way I can see around this is to decide up front a maximum<br/>\n&gt; number of cases and maximum number of parameters that can be input, and<br/>\n&gt; hard code it, buried inside the code. The downside is that junit tries<br/>\n&gt; to run all of them, and all of the extra, unused space in the array,<br/>\n&gt; translates to cases of &quot;no runnable methods.&quot; Does anyone see any<br/>\n&gt; other alternative?<br/>\n&gt;<br/>\n&gt; Here are relevant snippets of my code:<br/>\n&gt;<br/>\n&gt; @RunWith(Parameterized.class)<br/>\n&gt; public class CalculatorResultPageTest<br/>\n&gt; {<br/>\n&gt; private Map setupDataMap = new HashMap();<br/>\n&gt; private HTMLUnitPrep.NVP responseCode;<br/>\n&gt; private HTMLUnitPrep.NVP revisedDSRisk;<br/>\n&gt; private WebClient webClient;<br/>\n&gt; private HtmlPage page ;<br/>\n&gt; private static final int customerNumOfCases =<br/>\n&gt; (HTMLUnitPrep.getcustomerPatientsSetupData(<br/>\n&gt; HTMLUnitPrep.SuiteType.CUSTOMER_PATIENTS)).size();<br/>\n&gt; private static final int customerNumOfParameters =<br/>\n&gt; (HTMLUnitPrep.getcustomerPatientsSetupData(<br/>\n&gt;<br/>\n&gt; HTMLUnitPrep.SuiteType.CUSTOMER_PATIENTS)).get(0).length;<br/>\n&gt;<br/>\n&gt; @Parameters<br/>\n&gt; public static Collection data()<br/>\n&gt; {<br/>\n&gt; //return hardCodedData();<br/>\n&gt; //return dataFromHTMLUnitPrep();<br/>\n&gt; //return hybridData1();<br/>\n&gt; //return hybridData2();<br/>\n&gt; //return hybridData3();<br/>\n&gt; //return hybridData4();<br/>\n&gt; //return hybridData5();<br/>\n&gt; //return hybridData6();<br/>\n&gt; return hybridData7();<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; public static Collection hardCodedData()<br/>\n&gt; {<br/>\n&gt; HTMLUnitPrep.NVP[][] customerPatientsSetupData = new<br/>\n&gt; HTMLUnitPrep.NVP[][]<br/>\n&gt; {<br/>\n&gt; {<br/>\n&gt; new HTMLUnitPrep.NVP(HTMLUnitPrep.ExpectedCalculatorOutput.<br/>\n&gt; RESPONSE_CODE.toString(), &quot;&quot;),<br/>\n&gt; new HTMLUnitPrep.NVP(HTMLUnitPrep.ExpectedCalculatorOutput.<br/>\n&gt; REVISED_DS_RISK.toString(), &quot;5000&quot;)<br/>\n&gt; },<br/>\n&gt; {<br/>\n&gt; new HTMLUnitPrep.NVP(HTMLUnitPrep.ExpectedCalculatorOutput.<br/>\n&gt; RESPONSE_CODE.toString(), &quot;200&quot;),<br/>\n&gt; new HTMLUnitPrep.NVP(HTMLUnitPrep.ExpectedCalculatorOutput.<br/>\n&gt; REVISED_DS_RISK.toString(), &quot;10&quot;)<br/>\n&gt; }<br/>\n&gt; };<br/>\n&gt; return Arrays.asList(customerPatientsSetupData);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; //This really stupid, but for some reason using<br/>\n&gt; dataFromHTMLUnitPrep() instead<br/>\n&gt; //of hardCodedData() causes &quot;no runnable methods&quot; error.<br/>\n&gt; //Oh, well, doesn&#39;t solve the problem anyway.<br/>\n&gt; public static Collection hybridData1()<br/>\n&gt; {<br/>\n&gt; List&lt;HTMLUnitPrep.NVP[]&gt; customerPatientsSetupData1 =<br/>\n&gt; HTMLUnitPrep.getcustomerPatientsSetupData(<br/>\n&gt; HTMLUnitPrep.SuiteType.CUSTOMER_PATIENTS);<br/>\n&gt; int numOfCases = customerPatientsSetupData1.size();<br/>\n&gt; int numOfParameters =<br/>\n&gt; ((HTMLUnitPrep.NVP[])(customerPatientsSetupData1.get(0))).length;<br/>\n&gt;<br/>\n&gt; HTMLUnitPrep.NVP[][] customerPatientsSetupData =<br/>\n&gt; new HTMLUnitPrep.NVP[numOfCases][numOfParameters];<br/>\n&gt; //for (int i=0; i &lt; numOfCases; i++)<br/>\n&gt; for (int i=0; i &lt; customerNumOfCases; i++)<br/>\n&gt; {<br/>\n&gt; //for (int j=0; j &lt; numOfParameters; j++)<br/>\n&gt; for (int j=0; j &lt; customerNumOfParameters; j++)<br/>\n&gt; {<br/>\n&gt; customerPatientsSetupData[i][j] =<br/>\n&gt;<br/>\n&gt; (HTMLUnitPrep.NVP)(customerPatientsSetupData1.get(i))[j];<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; return Arrays.asList(customerPatientsSetupData);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; ...<br/>\n&gt;<br/>\n&gt; //This one works, but I get No runnable methods for the empty spaces<br/>\n&gt; in the<br/>\n&gt; //array following the actual (single) case.<br/>\n&gt; public static Collection hybridData7()<br/>\n&gt; {<br/>\n&gt; List&lt;HTMLUnitPrep.NVP[]&gt; customerPatientsSetupData1 =<br/>\n&gt; HTMLUnitPrep.getcustomerPatientsSetupData(<br/>\n&gt; HTMLUnitPrep.SuiteType.CUSTOMER_PATIENTS);<br/>\n&gt;<br/>\n&gt; HTMLUnitPrep.NVP[][] customerPatientsSetupData =<br/>\n&gt; new HTMLUnitPrep.NVP[2][2];<br/>\n&gt; //for (int i=0; i &lt; numOfCases; i++)<br/>\n&gt; for (int i=0; i &lt; customerNumOfCases && i &lt; 2; i++)<br/>\n&gt; {<br/>\n&gt; //for (int j=0; j &lt; numOfParameters; j++)<br/>\n&gt; for (int j=0; j &lt; customerNumOfParameters && j &lt; 2; j++)<br/>\n&gt; {<br/>\n&gt; customerPatientsSetupData[i][j] =<br/>\n&gt;<br/>\n&gt; (HTMLUnitPrep.NVP)(customerPatientsSetupData1.get(i))[j];<br/>\n&gt; }<br/>\n&gt; }<br/>\n&gt; return Arrays.asList(customerPatientsSetupData);<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; //Doesn&#39;t work. No runnable methods.<br/>\n&gt; public static Collection dataFromHTMLUnitPrep()<br/>\n&gt; {<br/>\n&gt; List&lt;HTMLUnitPrep.NVP[]&gt; customerPatientsSetupData =<br/>\n&gt; HTMLUnitPrep.getcustomerPatientsSetupData(<br/>\n&gt; HTMLUnitPrep.SuiteType.CUSTOMER_PATIENTS);<br/>\n&gt; return customerPatientsSetupData;<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; public CalculatorResultPageTest(HTMLUnitPrep.NVP responseCode,<br/>\n&gt; HTMLUnitPrep.NVP revisedDSRisk)<br/>\n&gt; {<br/>\n&gt; this.responseCode = responseCode;<br/>\n&gt; this.revisedDSRisk = revisedDSRisk;<br/>\n&gt; setupDataMap.put(responseCode.getName(),<br/>\n&gt; responseCode.getValue());<br/>\n&gt; setupDataMap.put(revisedDSRisk.getName(),<br/>\n&gt; revisedDSRisk.getValue());<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; @Before<br/>\n&gt; public void callCalculator()<br/>\n&gt; throws Exception<br/>\n&gt; {<br/>\n&gt; ...<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; @Test<br/>\n&gt; public void displayCalculatorResultPage()<br/>\n&gt; {<br/>\n&gt; System.out.println(&quot;page.getWebResponse as a string: &quot; +<br/>\n&gt; page.getWebResponse().getContentAsString());<br/>\n&gt;<br/>\n&gt; //The following tests work when I use HTMLUnit&#39;s WebClient to<br/>\n&gt; open the<br/>\n&gt; //connection, or when I create the HtmlPage from using data<br/>\n&gt; obtained<br/>\n&gt; //from a java.net.HttpURLConnection AND parse the HTML in it.<br/>\n&gt; If I leave<br/>\n&gt; //out the HTML parsing, they all fail:<br/>\n&gt;<br/>\n&gt; /*Write the code that verifies whether the form is successfully<br/>\n&gt; displayed. */<br/>\n&gt; WebAssert.assertTitleEquals(page, &quot;Test page Title&quot;);<br/>\n&gt; WebAssert.assertTextPresent(page, &quot;Test Body Text&quot;);<br/>\n&gt; WebAssert.assertTextNotPresent(page, &quot;errors entering the<br/>\n&gt; patient data:&quot;);<br/>\n&gt; final HtmlForm form = page.getFormByName(&quot;calculateForm&quot;);<br/>\n&gt; final HtmlSubmitInput submitButton = (HtmlSubmitInput)<br/>\n&gt; form.getInputByValue(&quot;Calculate Revised Risks&quot;);<br/>\n&gt; assertNotNull(&quot;Submit button not found on web claculator form<br/>\n&gt; page&quot;, submitButton);<br/>\n&gt;<br/>\n&gt; //assertTrue(false);<br/>\n&gt;<br/>\n&gt; /*Write the code that fills in the form*/<br/>\n&gt; /*Write the code that submits the form*/<br/>\n&gt; /*Write the code that checks the results page.*/<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt; }<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------------<br/>\n&gt; The contents of this message, together with any attachments, are<br/>\n&gt; intended only for the use of the person(s) to which they are<br/>\n&gt; addressed and may contain confidential and/or privileged<br/>\n&gt; information. Further, any medical information herein is<br/>\n&gt; confidential and protected by law. It is unlawful for unauthorized<br/>\n&gt; persons to use, review, copy, disclose, or disseminate confidential<br/>\n&gt; medical information. If you are not the intended recipient,<br/>\n&gt; immediately advise the sender and delete this message and any<br/>\n&gt; attachments. Any distribution, or copying of this message, or any<br/>\n&gt; attachment, is prohibited.<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21002, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1224680805", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 20978, 
    "headers": {
        "inReplyToHeader": "PDhFREFBNEY0OUY2MUJENDFBREI4MzU1MEMxQ0RBRTEwMDM4RjZERjlAUURDV1MwMjc3LnVzLnFkeC5jb20+", 
        "messageIdInHeader": "PDRmN2RhNmI5MDgxMDIyMDYwNnBhZmE0MjI3aGJmZTU1ZDQ2YzBmZDUwNGZAbWFpbC5nbWFpbC5jb20+", 
        "referencesHeader": "PDhFREFBNEY0OUY2MUJENDFBREI4MzU1MEMxQ0RBRTEwMDM4RjZERjlAUURDV1MwMjc3LnVzLnFkeC5jb20+"
    }
}