{
    "numMessagesInTopic": 4, 
    "nextInTime": 15706, 
    "senderId": "Be-gI-99xC-NsuNKNLXq3Gii5H1TN9g3Mo991170gAhRd4bjy9qJkxez6qWYD-rseFQZ6QJaEHW0sDEDfUPzdceveMsWybx-Li6UTY7uF7e3teEwfA", 
    "systemMessage": false, 
    "subject": "Re: [junit] Class.getClassLoader().getResourceAsStream() fails in GUI test runners?", 
    "from": "jason r tibbetts &lt;tibbettj@...&gt;", 
    "authorName": "jason r tibbetts", 
    "msgSnippet": "... It s not a Foo; it s the TestCase subclass itself.", 
    "msgId": 15705, 
    "profile": "tibbettj_at_verdi_sra_com", 
    "topicId": 15698, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 224061497, 
    "messageBody": "<div id=\"ygrps-yiv-205361098\">J. B. Rainsberger wrote:<br/>\n<blockquote><span title=\"ireply\"> &gt; jason r tibbetts wrote:<br/>\n&gt; <br/>\n&gt;&gt;I&#39;m trying to test a class that loads a properties file in a special<br/>\n&gt;&gt;way. Because this class can be used in servlets (where<br/>\n&gt;&gt;this.getClass().getResourceAsStream() doesn&#39;t work, because of<br/>\n&gt;&gt;classloader issues) as well as in ordinary contexts, it takes a Class<br/>\n&gt;&gt;argument in its constructor. This Class&#39;s class loader is used to get<br/>\n&gt;&gt;the resource, as in<br/>\n&gt;&gt;<br/>\n&gt;&gt;   public Foo(Class cls, String propFilePath) {<br/>\n&gt;&gt;     ClassLoader loader = cls.getClassLoader();<br/>\n&gt;&gt;     InputStream in = loader.getResourceAsStream(propFilePath);<br/>\n&gt;&gt;   }<br/>\n&gt;&gt;<br/>\n&gt;&gt;It&#39;s usually sufficient for the caller to simply pass in<br/>\n&gt;&gt;this.getClass(). It&#39;s sufficient enough for the TestCase that tests it,<br/>\n&gt;&gt;anyway, /except/ when the test is run in the GUI TestRunner, or in code<br/>\n&gt;&gt;coverage tools like jcoverage and EMMA. In all three cases, the tests<br/>\n&gt;&gt;fail because the loader.getResourceAsStream() call returns null. The<br/>\n&gt;&gt;TestCase&#39;s setUp() constructs the Foo by passing in the TestCase&#39;s own<br/>\n&gt;&gt;class, as in:<br/>\n&gt;&gt;<br/>\n&gt;&gt;   foo = new Foo(this.getClass(), &quot;some/path&quot;);<br/>\n&gt;&gt;<br/>\n&gt;&gt;Other tests that load properties (in the usual way, via<br/>\n&gt;&gt;this.getClass.getResourceAsStream()) work just fine in all scenarios.<br/>\n&gt;&gt;<br/>\n&gt;&gt;I&#39;ve read the JUnit FAQ, mailing list archives, J.B.&#39;s book, the<br/>\n&gt;&gt;jcoverage and EMMA docs, etc., all to no avail. I know that the JUnit<br/>\n&gt;&gt;GUI test runners do use a custom classloader, but the custom<br/>\n&gt;&gt;functionality in that classloader don&#39;t appear to be relevant here. Nor<br/>\n&gt;&gt;do I want to add Foo&#39;s package to the excluded.properties, because<br/>\n&gt;&gt;that&#39;s a package that I&#39;m actively testing.<br/>\n&gt; <br/>\n&gt; <br/>\n&gt; What type is &#39;this&#39;? Foo? Try this:<br/>\n&gt; <br/>\n&gt; foo = new Foo(Foo.class, &quot;some/path&quot;)<br/>\n&gt; <br/>\n&gt; Once you do this 3 times, refactor to a named constructor:<br/>\n&gt; <br/>\n&gt; foo = Foo.forPath(&quot;some/path&quot;);<br/>\n&gt; <br/>\n&gt; static Foo forPath(String path) {<br/>\n&gt;      return new Foo(Foo.class, path);<br/>\n&gt; }<br/>\n<br/>\n </span></blockquote>It&#39;s not a Foo; it&#39;s the TestCase subclass itself.</div>", 
    "prevInTime": 15704, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1134749014", 
    "canDelete": false, 
    "nextInTopic": 15706, 
    "prevInTopic": 15703, 
    "headers": {
        "inReplyToHeader": "PDQzQTIzRUFFLjkwNDAxMDJAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PDQzQTJFNTU2LjcwNDA4MDdAdmVyZGkuaWlzZC5zcmEuY29tPg==", 
        "referencesHeader": "PDQzQTE4NzZBLjEwNTA2MDNAdmVyZGkuaWlzZC5zcmEuY29tPiA8NDNBMjNFQUUuOTA0MDEwMkByb2dlcnMuY29tPg=="
    }
}