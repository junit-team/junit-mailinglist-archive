{
    "numMessagesInTopic": 8, 
    "nextInTime": 3015, 
    "senderId": "h_j8ZlV0_LsXDr0NrVQ5nM5g9z4RMx3SGvDtWViAECDZiRi-BjkPZKfWiY3qXaml06IU5vWKp_pjkr3_BoI0U8Lg_Vu13rbPRQds8yelWlj6G2k", 
    "systemMessage": false, 
    "subject": "Problems with WL transactions and JUnit", 
    "from": "Laurent Duperval &lt;lduperval@...&gt;", 
    "authorName": "Laurent Duperval", 
    "msgSnippet": "Hi, I m hoping to be able to provide all the information needed to make this question a useful one. We re running a bunch of unit tests for EJBs in our test", 
    "msgId": 3014, 
    "rawEmail": "Return-Path: &lt;lduperval@...&gt;\r\nX-Sender: lduperval@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (EGP: mail-8_0_0_1); 19 Oct 2001 18:14:53 -0000\r\nReceived: (qmail 32551 invoked from network); 19 Oct 2001 18:14:53 -0000\r\nReceived: from unknown (10.1.10.27)\n  by 10.1.1.223 with QMQP; 19 Oct 2001 18:14:53 -0000\r\nReceived: from unknown (HELO lancelot.microcelli5.com) (207.96.224.28)\n  by mta2 with SMTP; 19 Oct 2001 18:14:53 -0000\r\nReceived: from lenard.microcelli5.com (dns2i.microcelli5.com [10.0.1.51])\n\tby lancelot.microcelli5.com (SMTP_Gateway) with ESMTP id D39A24B951\n\tfor &lt;junit@yahoogroups.com&gt;; Fri, 19 Oct 2001 14:14:52 -0400 (EDT)\r\nReceived: from fendi.ad.microcelli5.com (fendi.ad.microcelli5.com [10.0.10.5])\n\tby lenard.microcelli5.com (SMTP_Gateway) with SMTP id 81DFE4688A\n\tfor &lt;junit@yahoogroups.com&gt;; Fri, 19 Oct 2001 14:14:52 -0400 (EDT)\r\nReceived: FROM dci5exch.ad.microcelli5.com BY fendi.ad.microcelli5.com ; Fri Oct 19 14:24:59 2001 -0400\r\nReceived: from kiskeya.microcelli5.com (10.0.11.16 [10.0.11.16]) by dci5exch.ad.microcelli5.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)\n\tid 4FZP24N8; Fri, 19 Oct 2001 14:14:50 -0400\r\nDate: Fri, 19 Oct 2001 14:10:32 -0400 (EDT)\r\nSubject: Problems with WL transactions and JUnit\r\nTo: JUnit Mailing list &lt;junit@yahoogroups.com&gt;\r\nMIME-Version: 1.0\r\nContent-Type: TEXT/plain; charset=us-ascii\r\nMessage-Id: &lt;20011019181452.81DFE4688A@...&gt;\r\nFrom: Laurent Duperval &lt;lduperval@...&gt;\r\nX-Yahoo-Profile: lduperval\r\n\r\nHi,\n\nI&#39;m hoping to be able to provide all the information needed to make this\nquestion a useful one. We&#39;re running a bunch of unit tests for EJBs in our\ntest suites. I&#39;ve come upon a problem that seems to do with transactions in\nWebLogic 5.x and I was wondering if anyone else has seen this.\n\nWe have subclassed TestCase into a TransactionTestCase for which the setUp()\ncreates a new javax.transaction.UserTransaction. When the test is finished,\nthe tearDown() rolls back the transaction. It works on almost all our test\ncases. \n\nOf the 200+ test cases we have, two of them have a weird behaviour. Our\nentity EJBs are all container-managed and pretty much all of them have\nfinder methods described in the descriptor. What we have found with the two\nill-behaved tests is that modifying some beans within the UnitTest does not\naffect the finder method. For example:\n\nFoo foo = home.create();\nfoo.setDefault(true);\nFoo foo2 = home.findDefault();\n// foo2 has the same data as foo\nfoo.setDefault(false);\n// The following should throw an exception but doesn&#39;t\nfoo2 = home.findDefault();\n\nNow, if print the content of foo2, I can see that the value of isDefault()\nis set to false. So the finder should never have found it, yet it does. We\nhave found that if we remove the transactional environment from our unit\ntest (i.e. extend TestCase instead of TransactionTestCase), then it works.\n\nWhy do we make our tests as transactions? To prevent pollution of the\ndatabase after failed tests or if developers forget to remove the data that\nthey added during the test.\n\nHas anyone else had experience in this reagard? Has anyone encountered this\ntype of behavior? How did you fix it?\n\nThanks,\n\nL\n\n-- \nLaurent Duperval &lt;mailto:lduperval@...&gt;\n\nWhy are there D batteries, C batteries, AAA batteries, AA batteries, but\nno B or single A batteries??\n\n\n\n", 
    "profile": "lduperval", 
    "topicId": 3014, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 0, 
    "prevInTime": 3013, 
    "contentTrasformed": false, 
    "postDate": "1003515032", 
    "canDelete": false, 
    "nextInTopic": 3015, 
    "prevInTopic": 0, 
    "headers": {
        "messageIdInHeader": "PDIwMDExMDE5MTgxNDUyLjgxREZFNDY4OEFAbGVuYXJkLm1pY3JvY2VsbGk1LmNvbT4="
    }
}