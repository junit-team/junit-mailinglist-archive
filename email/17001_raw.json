{
    "numMessagesInTopic": 8, 
    "nextInTime": 17002, 
    "senderId": "k84jmN2cjRfIw1XfLC_OwyAxVTmrVIBGgA92b-9RGlBXQ0Q4JdzM405_iEOK1R_ZWa3EdajoxYJJfPsFrXyUv4d26A8pGdL6xOPR2BKPTfi9SgLT", 
    "systemMessage": false, 
    "subject": "Mocking libraries and moving parts (was: Re: [junit] unit tes t       case for login())", 
    "from": "&quot;mrutherfurd&quot; &lt;michael.rutherford@...&gt;", 
    "authorName": "mrutherfurd", 
    "msgSnippet": "... ways to in ... problerm is ... interfaces to ... below I needed ... produce mock ... each other ... effort just to ... than the ... What ... if ... you ...", 
    "msgId": 17001, 
    "rawEmail": "Return-Path: &lt;michael.rutherford@...&gt;\r\nX-Sender: michael.rutherford@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 77526 invoked from network); 22 Jun 2006 06:29:28 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m38.grp.scd.yahoo.com with QMQP; 22 Jun 2006 06:29:28 -0000\r\nReceived: from unknown (HELO n26.bullet.scd.yahoo.com) (66.94.237.55)\n  by mta4.grp.scd.yahoo.com with SMTP; 22 Jun 2006 06:29:28 -0000\r\nReceived: from [66.218.66.59] by n26.bullet.scd.yahoo.com with NNFMP; 22 Jun 2006 06:29:18 -0000\r\nReceived: from [66.218.66.72] by t8.bullet.scd.yahoo.com with NNFMP; 22 Jun 2006 06:29:18 -0000\r\nDate: Thu, 22 Jun 2006 06:29:16 -0000\r\nTo: junit@yahoogroups.com\r\nMessage-ID: &lt;e7ddbs+dcqn@...&gt;\r\nIn-Reply-To: &lt;4499C1D2.7090308@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;mrutherfurd&quot; &lt;michael.rutherford@...&gt;\r\nSubject: Mocking libraries and moving parts (was: Re: [junit] unit tes t       case for login())\r\nX-Yahoo-Group-Post: member; u=229542016; y=j1jYBHGGQKZwIAToRGyXFPCJ8-O_P2MPVYJi8G_yASf3F9H0nRY\r\nX-Yahoo-Profile: mrutherfurd\r\n\r\n--- In junit@yahoogroups.com, &quot;J. B. Rainsberger&quot; &lt;jbrains@...&gt; wrote:\n&gt;\n&gt; =\r\nRutherford, Michael wrote:\n&gt; &gt; \n&gt; &gt; Yes I&#39;m aware that the various mocking =\r\nframeworks all provide \nways to in\n&gt; &gt; erffect provide stub implementations=\r\n of a given interface. The \nproblerm is\n&gt; &gt; having to provide the interelat=\r\nionships between the various \ninterfaces to\n&gt; &gt; allow the mock to function =\r\nadequately. In the simple example \nbelow I needed\n&gt; &gt; to provide a mock IDf=\r\nSession with enough extra code for it to \nproduce mock\n&gt; &gt; IDfGroup and IDf=\r\nUser objects that could then be resolved against \neach other\n&gt; &gt; in several=\r\n variations by the business logic. It was a major \neffort just to\n&gt; &gt; get t=\r\nhe mocks set up. IIRC the test code was significantly larger \nthan the\n&gt; &gt; =\r\noriginal class, let alone just the method I was testing.\n&gt; \n&gt; What would ha=\r\nve to be true for you to have avoided this extra work? \nWhat \n&gt; example wer=\r\ne you trying to check? I don&#39;t know Documentum well, but \nif \n&gt; your busine=\r\nss logic operates on User and Group objects, shouldn&#39;t \nyou \n&gt; just invoke =\r\nyour business logic passing in User and Group objects? \nThis \n&gt; would remov=\r\ne the need to simulate the Session interface.\n&gt; \n&gt; I would need to know mor=\r\ne to be sure, but I suspect there are \n&gt; simplifications we can apply by lo=\r\noking at the tests a little \n&gt; differently. If you could share a test (or t=\r\nhe essence of it) with \nus, \n&gt; we might be able to help.\n&gt; \n&gt; &gt; The fact th=\r\nat calls to Documentum super class methods are \nintermingled with\n&gt; &gt; busin=\r\ness logic to a high degree and seperating them would \ncomplicate the\n&gt; &gt; cl=\r\nass inordinately making it less maintainable is also annoying.\n&gt; \n&gt; I&#39;ll ta=\r\nke your word for it, but intermixing business logic with \n&gt; integration log=\r\nic has, in my experience, never been simpler (easier \nto \n&gt; maintain) than =\r\nseparating them from each other.\n&gt; \n&gt; &gt; Having said that I still haven&#39;t gi=\r\nven up, I&#39;m just less \nconfident than I\n&gt; &gt; was. I also reread the holy boo=\r\nks regularly \n(&quot;Refactoring&quot;, &quot;Working\n&gt; &gt; Effectively With Legacy Code&quot;, &quot;=\r\nJUnit Recipes&quot;, &quot;Design Patterns&quot; \nand\n&gt; &gt; &quot;Refactoring to Patterns&quot;) tryin=\r\ng to get ideas :-)\n&gt; \n&gt; More eyes usually help....\n&gt; \n&gt; Take care.\n\nHere&#39;s =\r\nthe user/group example I was referring to... Any suggestions \nwould be grea=\r\ntly appreciated.\n\n/**\n * This class allows default group to be used as an a=\r\ndditional \nscoping type. \n * \n * Add the new qualifier to the the app.xml f=\r\nile to enable the use of \nthis file.\n * \n * In use the qualifier will retur=\r\nn the default group the user \nbelongs to which can therefore \n * be compare=\r\nd to the scoping value.\n * \n * eg.\n * \t&gt;scope group=3D&quot;lpc&quot;&lt;\n * \n * @=\r\nauthor Michael Rutherfurd\n */\npublic class DefaultGroupQualifier implements=\r\n IQualifier {\n\n\t/**\n\t * Returns the name of the group to be used for scopin=\r\ng.\n\t * @return scope name\n\t */\n\tpublic String getScopeName() {\n\t\treturn &quot;gr=\r\noup&quot;;\n\t}\n\n\tpublic String[] getContextNames() {\n\t\treturn null;\n\t}\n\n\tpublic S=\r\ntring getScopeValue(QualifierContext context) {\n\t\treturn getDefaultGroup();=\r\n\n\t}\n\n\tpublic String getParentScopeValue(String scopeValue) {\n\t\treturn null;=\r\n\n\t}\n\n\tpublic String[] getAliasScopeValues(String scopeValue) {\n\t\treturn nul=\r\nl;\n\t}\n\t\n\tprivate String getDefaultGroup() {\n\t\t\n\t\ttry {\n\t\t\tIDfSessionManager=\r\n sessionManager =3D \nSessionManagerHttpBinding.getSessionManager();\n\t\t\t\n\t\t\t=\r\nif (sessionManager =3D=3D null) {\n\t\t\t\tDfLogger.debug(this, &quot;No session \nman=\r\nager available&quot;, null, null);\n\t\t\t\treturn &quot;&quot;;\n\t\t\t}\n\t\t\t\n\t\t\tString currentDocb=\r\nase =3D \nSessionManagerHttpBinding.getCurrentDocbase();\n\t\t\t\n\t\t\tif (currentD=\r\nocbase =3D=3D null) {\n\t\t\t\tDfLogger.debug(this, &quot;No docbase \navailable&quot;, nul=\r\nl, null);\n\t\t\t\treturn &quot;&quot;;\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tDfLogger.debug(this, &quot;PrincipalName=\r\n: &quot; + \nsessionManager.getPrincipalName(), null, null);\n\t\t\t\n\t\t\ttry {\n\t\t\t\tIDf=\r\nSession session =3D \nsessionManager.getSession(currentDocbase);\n\t\t\t\t\n\t\t\t\tif=\r\n (session =3D=3D null) {\n\t\t\t\t\tDfLogger.debug(this, &quot;No \nsession available&quot;,=\r\n null, null);\n\t\t\t\t\treturn &quot;&quot;;\n\t\t\t\t}\n\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tIDfUser user =3D ses=\r\nsion.getUser\n(null);\n\t\t\t\t\t\n\t\t\t\t\tDfLogger.debug(this, &quot;User: &quot; \n+ user.getUs=\r\nerName() + &quot;(&quot; + user.getUserOSDomain() + &quot;&#92;&#92;&quot; + \nuser.getUserOSName() + &quot;)=\r\n, Default group: &quot; + user.getUserGroupName\n(), null, null);\n\t\t\t\t\t\n\t\t\t\t\tretu=\r\nrn user.getUserGroupName\n();\n\t\n\t\t\t\t} finally {\n\t\t\t\t\tsessionManager.release\n=\r\n(session);\n\t\t\t\t}\n\t\t\t\n\t\t\t} catch (DfIdentityException e) {\n\t            DfLo=\r\ngger.debug(this, &quot;Failed to get session due \nto identity exception&quot;, null, =\r\nnull);\n\t\t\t\treturn &quot;&quot;;\n\t\t\t}\n\t\t\t\n\t\t} catch (DfException e) {\n            DfLo=\r\ngger.error(this, &quot;Failed to get group&quot;, null, e);\n\t\t}\n\t\t\n\t\treturn &quot;&quot;;\n\t}\t\n}=\r\n\n\n\n\n\n\n", 
    "profile": "mrutherfurd", 
    "topicId": 16987, 
    "spamInfo": {
        "reason": "6", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 229542016, 
    "prevInTime": 17000, 
    "contentTrasformed": false, 
    "postDate": "1150957756", 
    "canDelete": false, 
    "nextInTopic": 17002, 
    "prevInTopic": 17000, 
    "headers": {
        "inReplyToHeader": "PDQ0OTlDMUQyLjcwOTAzMDhAcm9nZXJzLmNvbT4=", 
        "messageIdInHeader": "PGU3ZGRicytkY3FuQGVHcm91cHMuY29tPg=="
    }
}