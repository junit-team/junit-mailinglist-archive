{
    "numMessagesInTopic": 6, 
    "nextInTime": 19776, 
    "senderId": "sfrtutQg893Z5_blQSUmgomxLe6bQp1Deo91_X3gelOtkEKh3g3gRghDCvZfrKpGgJgt1AHQYIuFWPUvtPTwxfk3", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Junit 4 and Ant", 
    "from": "&quot;David Saff&quot; &lt;saff@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "Colin, Is it easy for a human scanning the class names to figure out which are test classes? In case you d like to submit a feature request, you ll need to do", 
    "msgId": 19775, 
    "profile": "dsaff", 
    "topicId": 19756, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 139771899, 
    "messageBody": "<div id=\"ygrps-yiv-796123099\">Colin,<br/>\n<br/>\nIs it easy for a human scanning the class names to figure out which<br/>\nare test classes?<br/>\n<br/>\nIn case you&#39;d like to submit a feature request, you&#39;ll need to do it<br/>\non the ant side: it&#39;s ant&#39;s junit task, not junit&#39;s ant task.  :-)<br/>\n<br/>\n   David<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On 8/20/07, Colin Goudie &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:colin.goudie@...\">colin.goudie@...</a>&gt; wrote:<br/>\n&gt; Jan,<br/>\n&gt;<br/>\n&gt; That is exactly what we do however, not all classes in the test package are<br/>\n&gt; tests. There are Mocks, utility classes etc.. As well as Test classes that<br/>\n&gt; are annotated with Test-NG. However, junit&#39;s ant task isn&#39;t smart enough to<br/>\n&gt; distinguish the difference. I find that pretty horrible! What is the use of<br/>\n&gt; a @Test annotation if it isn&#39;t used?? pretty crazy. Thanks for the help<br/>\n&gt; though.<br/>\n&gt;<br/>\n&gt; On 8/21/07, j_cumps &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:j_cumps@...\">j_cumps@...</a>&gt; wrote:<br/>\n&gt; &gt;<br/>\n&gt; &gt;   Gommo,<br/>\n&gt; &gt;<br/>\n&gt; &gt; &gt; Is there any way out of the box to make Junit just run the tests<br/>\n&gt; &gt; that use<br/>\n&gt; &gt; &gt; org.junit.Test annoations ??<br/>\n&gt; &gt;<br/>\n&gt; &gt; What we (and several open source projects) typically do when using<br/>\n&gt; &gt; JUnit and Ant is:<br/>\n&gt; &gt; place your source files in a folder called src<br/>\n&gt; &gt; place your test classes in a folder called tst<br/>\n&gt; &gt;<br/>\n&gt; &gt; When running the junit ant task, let it look in the location of your<br/>\n&gt; &gt; test classes for tests it has to run.<br/>\n&gt; &gt;<br/>\n&gt; &gt; Example:<br/>\n&gt; &gt;<br/>\n&gt; &gt; sources:<br/>\n&gt; &gt; src/com/myproject/Foo.java<br/>\n&gt; &gt; src/com/myproject/Bar.java<br/>\n&gt; &gt;<br/>\n&gt; &gt; test sources:<br/>\n&gt; &gt; tst/com/myproject/FooTest.java<br/>\n&gt; &gt; tst/com/myproject/BarTest.java<br/>\n&gt; &gt;<br/>\n&gt; &gt; compile sources to destination build/bin, and tests to destination<br/>\n&gt; &gt; build/tst<br/>\n&gt; &gt;<br/>\n&gt; &gt; in build.xml:<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;property name=&quot;build.dir&quot; value=&quot;build&quot;/&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;!-- Testing Classpath --&gt;<br/>\n&gt; &gt; &lt;path id=&quot;junit.classpath&quot;&gt;<br/>\n&gt; &gt; &lt;pathelement location=&quot;${junit.jar}&quot;/&gt;<br/>\n&gt; &gt; &lt;pathelement location=&quot;${build.dir}/src&quot;/&gt;<br/>\n&gt; &gt; &lt;pathelement location=&quot;${build.dir}/tst&quot;/&gt;<br/>\n&gt; &gt; &lt;/path&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; compilation part:<br/>\n&gt; &gt; ...<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;target name=&quot;build&quot; depends....&quot;&gt;<br/>\n&gt; &gt; &lt;mkdir dir=&quot;${build.dir}/src&quot;/&gt;<br/>\n&gt; &gt; &lt;javac srcdir=&quot;src&quot;<br/>\n&gt; &gt; destdir=&quot;${build.dir}/src&quot;&gt;<br/>\n&gt; &gt; &lt;/javac&gt;<br/>\n&gt; &gt; &lt;mkdir dir=&quot;${build.dir}/tst&quot;/&gt;<br/>\n&gt; &gt; &lt;javac srcdir=&quot;tst&quot;<br/>\n&gt; &gt; destdir=&quot;${build.dir}/tst&quot; classpathref=&quot;junit.classpath&quot;<br/>\n&gt; &gt; debug=&quot;true&quot;&gt;<br/>\n&gt; &gt; &lt;/javac&gt;<br/>\n&gt; &gt; &lt;/target&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; ...<br/>\n&gt; &gt;<br/>\n&gt; &gt; test part will only pick up your test classes in the tst subdir, and<br/>\n&gt; &gt; their class name has to contain Test in it.<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;target name=&quot;test&quot;&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;junit ...&gt;<br/>\n&gt; &gt; &lt;formatter type=&quot;brief&quot; usefile=&quot;false&quot;/&gt;<br/>\n&gt; &gt; &lt;classpath refid=&quot;junit.classpath&quot;/&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;batchtest ...&gt;<br/>\n&gt; &gt; &lt;fileset dir=&quot;tst&quot;&gt;<br/>\n&gt; &gt; &lt;include name=&quot;**/*Test*.java&quot;/&gt;<br/>\n&gt; &gt; &lt;/fileset&gt;<br/>\n&gt; &gt; &lt;/batchtest&gt;<br/>\n&gt; &gt; &lt;/junit&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; &lt;/target&gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt; Regards, Jan<br/>\n&gt; &gt;<br/>\n&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;junit%40yahoogroups.com&gt;, &quot;David Saff&quot;<br/>\n&gt; &gt; &lt;saff@...&gt; wrote:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Gommo,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; I am not an expert user of the junit ant task--I hope that someone<br/>\n&gt; &gt; &gt; else on this list is, and can provide more insight. You might want<br/>\n&gt; &gt; to<br/>\n&gt; &gt; &gt; look at the Johannes&#39; Links ClasspathSuite runner:<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; <a rel=\"nofollow\" target=\"_blank\" href=\"http://johanneslink.net/cpsuite.html\">http://johanneslink.net/cpsuite.html</a><br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; Using this, you&#39;d point ant at a single suite class, which would<br/>\n&gt; &gt; &gt; itself indicate the directory in which to search for tests. I&#39;ve<br/>\n&gt; &gt; &gt; found cpsuite remarkably fast for small-to-medium projects, but<br/>\n&gt; &gt; can&#39;t<br/>\n&gt; &gt; &gt; say how it scales to large or very large projects. Thanks,<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; David Saff<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt; &gt; On 8/19/07, gommo &lt;colin.goudie@...&gt; wrote:<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; I&#39;ve been using TestNG for more unit and integration tests.<br/>\n&gt; &gt; However, I&#39;ve<br/>\n&gt; &gt; &gt; &gt; found that JUnit 4 and its eclipse plugin works faster and nicer.<br/>\n&gt; &gt; So I&#39;ve<br/>\n&gt; &gt; &gt; &gt; decided change all my unit tests to JUnit.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; I have a runUnitTests ant target that is used to run (previously)<br/>\n&gt; &gt; the<br/>\n&gt; &gt; &gt; &gt; test-ng tests that are marked as &quot;UnitTests&quot;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; As a start, I have changed this ant target to run all tests in my<br/>\n&gt; &gt; tests<br/>\n&gt; &gt; &gt; &gt; target directory (i.e. using **/*.class)<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; What I thought would happen was that JUnit would look at these<br/>\n&gt; &gt; classes, find<br/>\n&gt; &gt; &gt; &gt; the ones that are marked with the JUnit 4 @Test annotation and<br/>\n&gt; &gt; run them.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; What I&#39;m finding however is that it is attempting to run EVERY<br/>\n&gt; &gt; class in that<br/>\n&gt; &gt; &gt; &gt; folder as a test and they are either Test-NG tests or just other<br/>\n&gt; &gt; utility<br/>\n&gt; &gt; &gt; &gt; classes. As a result, JUnit is throwing errors<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; e.g.<br/>\n&gt; &gt; &gt; &gt; Running au.tributech.tuxedo.beans.entity.PermissionTest$1<br/>\n&gt; &gt; &gt; &gt; [junit] Tests run: 2, Failures: 0, Errors: 2, Time elapsed:<br/>\n&gt; &gt; 0.017 sec<br/>\n&gt; &gt; &gt; &gt; [junit] Test<br/>\n&gt; &gt; au.tributech.tuxedo.beans.entity.PermissionTest$1 FAILED<br/>\n&gt; &gt; &gt; &gt; [junit] Running<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; au.tributech.tuxedo.beans.entity.PermissionTest$PermissionDescendant<br/>\n&gt; &gt; &gt; &gt; [junit] Tests run: 2, Failures: 0, Errors: 2, Time elapsed:<br/>\n&gt; &gt; 0.018 sec<br/>\n&gt; &gt; &gt; &gt; [junit] Test<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; au.tributech.tuxedo.beans.entity.PermissionTest$PermissionDescendant<br/>\n&gt; &gt; FAILED<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Is there any way out of the box to make Junit just run the tests<br/>\n&gt; &gt; that use<br/>\n&gt; &gt; &gt; &gt; org.junit.Test annoations ??<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; What I have got working (but its slow) is to write a custom ANT<br/>\n&gt; &gt; selector.<br/>\n&gt; &gt; &gt; &gt; &lt;batchtest fork=&quot;yes&quot; todir=&quot;${test.report.dir}&quot;&gt;<br/>\n&gt; &gt; &gt; &gt; &lt;fileset dir=&quot;${test.fixtures.dir}&quot; includes=&quot;**/*.class&quot;&gt;<br/>\n&gt; &gt; &gt; &gt; &lt;custom classname=&quot;au.tributech.ant.JUnit4Selector&quot;<br/>\n&gt; &gt; &gt; &gt; classpathref=&quot;project.test.run.classpath&quot;/&gt;<br/>\n&gt; &gt; &gt; &gt; &lt;/fileset&gt;<br/>\n&gt; &gt; &gt; &gt; &lt;/batchtest&gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; The JUnit4Selector class I wrote simply reads in each file<br/>\n&gt; &gt; processed and<br/>\n&gt; &gt; &gt; &gt; uses ASM-3.0 to look for JUnit4 annotations (@Test, @RunsWith<br/>\n&gt; &gt; etc..). If<br/>\n&gt; &gt; &gt; &gt; they exist it processes that file otherwise skips it.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; This works but it is pretty slow and I can see it being painfully<br/>\n&gt; &gt; slow when<br/>\n&gt; &gt; &gt; &gt; there are hundreds of unit tests.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Surely I&#39;m missing something here and JUnit&#39;s ANT task is smarter<br/>\n&gt; &gt; than what<br/>\n&gt; &gt; &gt; &gt; it is appearing. I don&#39;t want to have to specify EVERY unit test<br/>\n&gt; &gt; when I add<br/>\n&gt; &gt; &gt; &gt; them. That is just a maintenance nightmare.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Thanks for any pointers<br/>\n&gt; &gt; &gt; &gt; --<br/>\n&gt; &gt; &gt; &gt; View this message in context: <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.nabble.com/Junit-4-and-\">http://www.nabble.com/Junit-4-and-</a><br/>\n&gt; &gt; Ant-tf4289986.html#a12212626<br/>\n&gt; &gt; &gt; &gt; Sent from the JUnit - User mailing list archive at Nabble.com.<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt; Yahoo! Groups Links<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt; &gt;<br/>\n&gt; &gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt; &gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; --<br/>\n&gt; Colin Goudie (B.CompSci,B.Eng Comp)<br/>\n&gt; Tributech<br/>\n&gt; MB: 0412 014 851<br/>\n&gt; www.tributech.com.au<br/>\n&gt; PO Box 380 Cardiff NSW 2285 Australia<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 19774, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1187696608", 
    "canDelete": false, 
    "nextInTopic": 19802, 
    "prevInTopic": 19767, 
    "headers": {
        "inReplyToHeader": "PDQxMTQ0MzJkMDcwODIwMTQ1NW03ZDUxOTRjZXZjNDA4NTQ2ZjY5MDI0ZTU4QG1haWwuZ21haWwuY29tPg==", 
        "messageIdInHeader": "PDRmN2RhNmI5MDcwODIxMDQ0M20yMTMwYWQ2OXE3NDg1NjdhNDY4Y2QxYjVhQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDRmN2RhNmI5MDcwODIwMDQxMmdhMmIwNjZlazVjNjYzMjQ1NWMxZThhNmRAbWFpbC5nbWFpbC5jb20+CSA8ZmFjaW9hK3NwNzJAZUdyb3Vwcy5jb20+CSA8NDExNDQzMmQwNzA4MjAxNDU1bTdkNTE5NGNldmM0MDg1NDZmNjkwMjRlNThAbWFpbC5nbWFpbC5jb20+"
    }
}