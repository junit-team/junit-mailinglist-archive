{
    "numMessagesInTopic": 4, 
    "nextInTime": 17337, 
    "senderId": "9uNP-NHuFMvxJSuaC4veXwQG0Y5bDT4pZcvs78_cJFe5Qqv58vEwXlwQU4piD7amjJ4nC_fyR-BjQhdDUQXIihspAKvy0uXgwBq4blc9U7M", 
    "systemMessage": false, 
    "subject": "Re: [junit] newbee: junit 4.1 tests fail", 
    "from": "&quot;Lasse Koskela&quot; &lt;lasse.koskela@...&gt;", 
    "authorName": "Lasse Koskela", 
    "msgSnippet": "Hi Kent, The problem is due to JUnitCoreTest.java using ; as a path separator. Replacing that line with String classPath= ", 
    "msgId": 17336, 
    "rawEmail": "Return-Path: &lt;lasse.koskela@...&gt;\r\nX-Sender: lasse.koskela@...\r\nX-Apparently-To: junit@yahoogroups.com\r\nReceived: (qmail 55508 invoked from network); 7 Aug 2006 22:14:20 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m26.grp.scd.yahoo.com with QMQP; 7 Aug 2006 22:14:20 -0000\r\nReceived: from unknown (HELO py-out-1112.google.com) (64.233.166.182)\n  by mta9.grp.scd.yahoo.com with SMTP; 7 Aug 2006 22:14:20 -0000\r\nReceived: by py-out-1112.google.com with SMTP id f25so224772pyf\n        for &lt;junit@yahoogroups.com&gt;; Mon, 07 Aug 2006 15:14:16 -0700 (PDT)\r\nReceived: by 10.65.139.9 with SMTP id r9mr9157030qbn;\n        Mon, 07 Aug 2006 15:14:16 -0700 (PDT)\r\nReceived: by 10.64.112.3 with HTTP; Mon, 7 Aug 2006 15:14:15 -0700 (PDT)\r\nMessage-ID: &lt;3975e2d10608071514v694a8a91sa2d72a57d542b95b@...&gt;\r\nDate: Tue, 8 Aug 2006 01:14:15 +0300\r\nTo: junit@yahoogroups.com\r\nIn-Reply-To: &lt;019601c6a765$3c7369d0$6401a8c0@T42&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nReferences: &lt;m2k66hss8z.fsf@...&gt; &lt;019601c6a765$3c7369d0$6401a8c0@T42&gt;\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: &quot;Lasse Koskela&quot; &lt;lasse.koskela@...&gt;\r\nSubject: Re: [junit] newbee: junit 4.1 tests fail\r\nX-Yahoo-Group-Post: member; u=190530936; y=m0Ar0GQNgVM9RbqFuv5XvAVfSYTnqy06O3bYzRkmb0-Y3RKPaGHP\r\nX-Yahoo-Profile: lassekoskela\r\n\r\nHi Kent,\n\nThe problem is due to JUnitCoreTest.java using &quot;;&quot; as a path\nseparator. Replacing that line with\n\n\t\tString classPath=\ngetClass().getClassLoader().getResource(&quot;.&quot;).getFile() +\nSystem.getProperty(&quot;path.separator&quot;) +\nSystem.getProperty(&quot;java.class.path&quot;);\n\nshould do the trick. And when it does, you might want to extract a\nmethod there... ;-)\n\nAlso, simply reading the InputStream you get from\nProcess#getInputStream() might not be sufficient for all\ncases--sometimes, doing that causes the thread to hang forever. The\n&quot;correct&quot; way to do it would be to read both\n&quot;Process#getInputStream()&quot; and &quot;Process#getErrorStream()&quot; in separate\nthreads, having the calling thread &quot;join()&quot; those two, and only then\ninvoking &quot;Process#waitFor()&quot;.\n\nI.e. something like this:\n\n\n\tprivate void consumeOutput(Process process) throws InterruptedException {\n\t\tInputStream stdout = process.getInputStream();\n\t\tInputStream stderr = process.getErrorStream();\n\t\tThread stdoutConsumer = new StreamConsumer(stdout);\n\t\tThread stderrConsumer = new StreamConsumer(stderr);\n\t\tstdoutConsumer.start();\n\t\tstderrConsumer.start();\n\t\tstdoutConsumer.join();\n\t\tstderrConsumer.join();\n\t}\n\t\n\tprivate class StreamConsumer extends Thread {\n\t\tprivate InputStream stream;\n\n\t\tpublic StreamConsumer(InputStream stream){\n\t\t\tthis.stream= stream;\n\t\t}\n\n\t\t@Override\n\t\tpublic void run() {\n\t\t\ttry {\n\t\t\t\tint r = -1;\n\t\t\t\twhile((r = stream.read()) != -1){\n\t\t\t\t\tSystem.out.write(r);\n\t\t\t\t}\n\t\t\t} catch (IOException e) {\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t}\t\t\n\t}\n\n\nHope this helps,\n Lasse\n\n\nOn 7/14/06, Kent Beck &lt;kentb@...&gt; wrote:\n&gt; Patrick,\n&gt;\n&gt;  There is already a defect on SourceForge for this. It works on Windows, but\n&gt;  not on Linux or OS X. If I start a VM on those OSes and the child VM invokes\n&gt;  System.exit(n), then the parent VM doesn&#39;t necessarily get n back when it\n&gt;  calls waitFor() on the Process.\n&gt;\n&gt;  Does anyone know how to portably communicate a termination code?\n&gt;\n&gt;  Regards,\n&gt;\n&gt;  Kent Beck\n&gt;  Three Rivers Institute\n&gt;\n&gt;  _____\n&gt;\n&gt;  From: junit@yahoogroups.com [mailto:junit@yahoogroups.com] On Behalf Of\n&gt;  Patrick Gundlach\n&gt;  Sent: Thursday, July 13, 2006 3:40 AM\n&gt;  To: junit@yahoogroups.com\n&gt;  Subject: [junit] newbee: junit 4.1 tests fail\n&gt;\n&gt;\n&gt;  Hi,\n&gt;\n&gt;  I am a complete newbee to junit (and my java is rusted, as well): I\n&gt;  downloaded junit 4.1 and ran the test, but they fail (see below). Do I\n&gt;  have to be worried? What am I doing wrong? I Tried on Mac OS X and Linux.\n&gt;\n&gt;  Patrick\n&gt;  --------------------------------------------------\n&gt;\n&gt;  java version &quot;1.5.0_06&quot;\n&gt;  Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-112)\n&gt;  Java HotSpot(TM) Client VM (build 1.5.0_06-64, mixed mode, sharing)\n&gt;\n&gt;  --------------------------------------------------\n&gt;  CLASSPATH is:\n&gt;  :/Users/pg/java/junit4.1/junit-4.1.jar\n&gt;\n&gt;  --------------------------------------------------\n&gt;\n&gt;  ~/java/junit4.1$ java org.junit.runner.JUnitCore org.junit.tests.AllTests\n&gt;  JUnit version 4.1\n&gt;  ...............................................I............................\n&gt;  ............................................................................\n&gt;  ............................................................................\n&gt;  ....I.............................E.\n&gt;  Time: 7,177\n&gt;  There was 1 failure:\n&gt;  1) failureCausesExitCodeOf1(org.junit.tests.JUnitCoreTest)\n&gt;  java.lang.AssertionError: expected:&lt;1&gt; but was:&lt;0&gt;\n&gt;  at org.junit.Assert.fail(Assert.java:69)\n&gt;  at org.junit.Assert.failNotEquals(Assert.java:314)\n&gt;  at org.junit.Assert.assertEquals(Assert.java:94)\n&gt;  at org.junit.Assert.assertEquals(Assert.java:104)\n&gt;  at org.junit.tests.JUnitCoreTest.runClass(JUnitCoreTest.java:41)\n&gt;  at\n&gt;  org.junit.tests.JUnitCoreTest.failureCausesExitCodeOf1(JUnitCoreTest.java:22\n&gt;  )\n&gt;  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n&gt;  at\n&gt;  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39\n&gt;  )\n&gt;  at\n&gt;  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl\n&gt;  .java:25)\n&gt;  at java.lang.reflect.Method.invoke(Method.java:585)\n&gt;  at\n&gt;  org.junit.internal.runners.TestMethodRunner.executeMethodBody(TestMethodRunn\n&gt;  er.java:99)\n&gt;  at\n&gt;  org.junit.internal.runners.TestMethodRunner.runUnprotected(TestMethodRunner.\n&gt;  java:81)\n&gt;  at\n&gt;  org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterR\n&gt;  unner.java:34)\n&gt;  at\n&gt;  org.junit.internal.runners.TestMethodRunner.runMethod(TestMethodRunner.java:\n&gt;  75)\n&gt;  at org.junit.internal.runners.TestMethodRunner.run(TestMethodRunner.java:45)\n&gt;  at\n&gt;  org.junit.internal.runners.TestClassMethodsRunner.invokeTestMethod(TestClass\n&gt;  MethodsRunner.java:71)\n&gt;  at\n&gt;  org.junit.internal.runners.TestClassMethodsRunner.run(TestClassMethodsRunner\n&gt;  .java:35)\n&gt;  at\n&gt;  org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.\n&gt;  java:42)\n&gt;  at\n&gt;  org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterR\n&gt;  unner.java:34)\n&gt;  at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)\n&gt;  at org.junit.internal.runners.CompositeRunner.run(CompositeRunner.java:29)\n&gt;  at\n&gt;  org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.\n&gt;  java:42)\n&gt;  at\n&gt;  org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterR\n&gt;  unner.java:34)\n&gt;  at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)\n&gt;  at org.junit.internal.runners.CompositeRunner.run(CompositeRunner.java:29)\n&gt;  at org.junit.runner.JUnitCore.run(JUnitCore.java:121)\n&gt;  at org.junit.runner.JUnitCore.run(JUnitCore.java:100)\n&gt;  at org.junit.runner.JUnitCore.run(JUnitCore.java:91)\n&gt;  at org.junit.runner.JUnitCore.runMain(JUnitCore.java:75)\n&gt;  at org.junit.runner.JUnitCore.main(JUnitCore.java:42)\n&gt;\n&gt;  FAILURES!!!\n&gt;  Tests run: 261, Failures: 1\n&gt;\n&gt;\n&gt;  [Non-text portions of this message have been removed]\n&gt;\n&gt;\n&gt;\n&gt;                   \n\n\n\n-- \nLasse Koskela\nJavaRanch Publisher Contact\nlasse@...\n\n", 
    "profile": "lassekoskela", 
    "topicId": 17131, 
    "spamInfo": {
        "reason": "0", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 190530936, 
    "prevInTime": 17335, 
    "contentTrasformed": false, 
    "postDate": "1154988855", 
    "canDelete": false, 
    "nextInTopic": 0, 
    "prevInTopic": 17135, 
    "headers": {
        "inReplyToHeader": "PDAxOTYwMWM2YTc2NSQzYzczNjlkMCQ2NDAxYThjMEBUNDI+", 
        "messageIdInHeader": "PDM5NzVlMmQxMDYwODA3MTUxNHY2OTRhOGE5MXNhMmQ3MmE1N2Q1NDJiOTViQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PG0yazY2aHNzOHouZnNmQGxldmFuYS5kZT4gPDAxOTYwMWM2YTc2NSQzYzczNjlkMCQ2NDAxYThjMEBUNDI+"
    }
}