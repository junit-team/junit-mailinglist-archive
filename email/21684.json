{
    "numMessagesInTopic": 14, 
    "nextInTime": 21685, 
    "senderId": "dEccCQiw4Yk0qvRVFCviTgkUMlvfQmdmvTGQ2smyLNxCFbbBoiLB3XZFHeZSslzVuBSgSsJ0MxiKDQtdDHtpTJpk", 
    "systemMessage": false, 
    "subject": "Re: [junit] Re: Change generic signature of assert that", 
    "from": "David Saff &lt;david@...&gt;", 
    "authorName": "David Saff", 
    "msgSnippet": "For the record, I use assertThat in JUnit a lot every day, and don t run into these corner cases all that often.  This probably means that I ve learned to keep", 
    "msgId": 21684, 
    "profile": "dsaff", 
    "topicId": 21666, 
    "spamInfo": {
        "reason": "12", 
        "isSpam": false
    }, 
    "replyTo": "LIST", 
    "userId": 341876227, 
    "messageBody": "<div id=\"ygrps-yiv-485756188\">For the record,<br/>\n<br/>\nI use assertThat in JUnit a lot every day, and don&#39;t run into these<br/>\ncorner cases all that often.  This probably means that I&#39;ve learned to<br/>\nkeep away from problem areas, but also means that it&#39;s fairly possible<br/>\nto keep away from problem areas.<br/>\n<br/>\nDidn&#39;t want to leave the thread on the impression that everyone agrees<br/>\nthat assertThat is totally broken in JUnit.<br/>\n<br/>\n   David Saff<br/>\n<br/>\n<blockquote><span title=\"qreply\"> On Tue, May 26, 2009 at 10:47 AM, Pigneri, Rocco &lt;<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:rpigneri@...\">rpigneri@...</a>&gt; wrote:<br/>\n&gt; Yme,<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; NUnit has a nice implementation of these sort of matchers that works<br/>\n&gt; pretty seamlessly-which might imply that .NET handles these typing<br/>\n&gt; issues better than Java.  I can&#39;t remember running into any situations<br/>\n&gt; like what you are describing.  I have run into a few scenarios like<br/>\n&gt; yours involving lists, but, if I remember correctly, those errors had<br/>\n&gt; more to do with an interesting design choice that Microsoft had made<br/>\n&gt; rather than with anything to do in NUnit itself.  I&#39;m not familiar<br/>\n&gt; enough with the NUnit source code so I am not sure if any .NET magic was<br/>\n&gt; required to build NUnit or if it was a rather straightforward<br/>\n&gt; implementation.<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; Rocco<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; From: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> [mailto:<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a>] On Behalf Of<br/>\n&gt; yme0987654321<br/>\n&gt; Sent: Friday, May 22, 2009 3:36 PM<br/>\n&gt; To: <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a><br/>\n&gt; Subject: [junit] Re: Change generic signature of assert that<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; I&#39;m curious if you know of a language that does do such things well. It<br/>\n&gt; seems like the popular ones are moving away from compiler-level type<br/>\n&gt; safety all together.<br/>\n&gt;<br/>\n&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:junit%40yahoogroups.com&gt; , David<br/>\n&gt; Saff &lt;david@...&gt; wrote:<br/>\n&gt;&gt;<br/>\n&gt;&gt; That much is true. I think that in the end, we&#39;ll probably be forced<br/>\n&gt;&gt; back to the untyped version. It was a good dream, but Java just<br/>\n&gt;&gt; really isn&#39;t functional enough to pretend to do functional things with<br/>\n&gt;&gt; it.<br/>\n&gt;&gt;<br/>\n&gt;&gt; David Saff<br/>\n&gt;&gt;<br/>\n&gt;&gt; On Fri, May 22, 2009 at 2:48 PM, yme0987654321 &lt;yme0987654321@...&gt;<br/>\n&gt; wrote:<br/>\n&gt;&gt; &gt; I&#39;m also curious the motivation for using generics on the<br/>\n&gt; assertThat. It seems the only thing it gains is that the parameter to<br/>\n&gt; the matcher is the right type for the comparison, but the actual<br/>\n&gt; underlying matches method does not look at the generic, so if it wasn&#39;t<br/>\n&gt; the right type and generics were not used, the assert would just fail?<br/>\n&gt; I&#39;m I reading that right?<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:junit%40yahoogroups.com&gt; ,<br/>\n&gt; &quot;yme0987654321&quot; &lt;yme0987654321@&gt; wrote:<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;&gt; hasEntry is part of the Hamcrest library. Here is the signature:<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;&gt; public static &lt;K, V&gt; org.hamcrest.Matcher&lt;java.util.Map&lt;K, V&gt;&gt;<br/>\n&gt; hasEntry(K key, V value)<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;&gt; I&#39;m curious if you know of a reason that<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;&gt; public static &lt;T&gt; void assertThat(T actual, Matcher&lt;? extends T&gt;<br/>\n&gt; matcher)<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;&gt; is wrong. Does it break something that you know of?<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;&gt; --- In <a rel=\"nofollow\" target=\"_blank\" href=\"mailto:junit@yahoogroups.com\">junit@yahoogroups.com</a> &lt;mailto:junit%40yahoogroups.com&gt; ,<br/>\n&gt; David Saff &lt;david@&gt; wrote:<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; On Fri, May 22, 2009 at 1:18 PM, yme0987654321 &lt;yme0987654321@&gt;<br/>\n&gt; wrote:<br/>\n&gt;&gt; &gt;&gt; &gt; &gt; Consider the following case:<br/>\n&gt;&gt; &gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; &gt; Map&lt;String, Class&lt;? extends Serializable&gt;&gt; result = null;<br/>\n&gt;&gt; &gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; &gt; assertThat(result, hasEntry(&quot;Key&quot;, java.util.Date.class));<br/>\n&gt;&gt; &gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; &gt; This will not compile, but if the method signature of<br/>\n&gt; assertThat was changed to:<br/>\n&gt;&gt; &gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; &gt; public static &lt;T&gt; void assertThat(T actual, Matcher&lt;? extends<br/>\n&gt; T&gt; matcher)<br/>\n&gt;&gt; &gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; &gt; It would compile.<br/>\n&gt;&gt; &gt;&gt; &gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; &gt; I would seem that it would be an appropriate change for such<br/>\n&gt; cases (unless there is something I don&#39;t understand about the deep<br/>\n&gt; implications of Generics).<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; Sigh.<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; Unfortunately, it was all too easy for the hamcrest team, a<br/>\n&gt; couple<br/>\n&gt;&gt; &gt;&gt; &gt; months ago, to come up with a list of 6 or 7 assertThat<br/>\n&gt; statements<br/>\n&gt;&gt; &gt;&gt; &gt; that all looked like they should obviously compile or not<br/>\n&gt; compile, but<br/>\n&gt;&gt; &gt;&gt; &gt; no Java typing that would make them all work.  It does get deep,<br/>\n&gt; and<br/>\n&gt;&gt; &gt;&gt; &gt; in some cases, compiler-dependent, if I remember correctly.<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; However, we did find that in some cases, the signature of the<br/>\n&gt;&gt; &gt;&gt; &gt; _Matcher_ could be improved.  What&#39;s the signature of hasEntry?<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; This is also pushing me to keep on my &quot;Dotmesh&quot; project, which<br/>\n&gt; would allow this:<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; assertThat(result.entrySet()).contains(entry(&quot;Key&quot;, Date.class));<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; [if the &quot;entry&quot; factory convenience method were written]<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt; Thanks,<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt; &gt;    David Saff<br/>\n&gt;&gt; &gt;&gt; &gt;<br/>\n&gt;&gt; &gt;&gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; ------------------------------------<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt; Yahoo! Groups Links<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt; &gt;<br/>\n&gt;&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; [Non-text portions of this message have been removed]<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; ------------------------------------<br/>\n&gt;<br/>\n&gt; Yahoo! Groups Links<br/>\n&gt;<br/>\n&gt;<br/>\n&gt;<br/>\n&gt; </span></blockquote></div>", 
    "prevInTime": 21683, 
    "specialLinks": [], 
    "contentTrasformed": false, 
    "postDate": "1243359054", 
    "canDelete": false, 
    "nextInTopic": 21698, 
    "prevInTopic": 21682, 
    "headers": {
        "inReplyToHeader": "PEQwNEI2MkE1NkM2NUVBNEI4NjAwMzYxMDhCRDBBNjZDMDMxQkNGNzdAYm9zdG9uLWV4LmxhdmFzdG9ybS5sb2NhbC5jb20+", 
        "messageIdInHeader": "PDRmN2RhNmI5MDkwNTI2MTAzMHMzY2I5ZmMwYnA4ZjY2MGU1OGJkZmJlNDRmQG1haWwuZ21haWwuY29tPg==", 
        "referencesHeader": "PDRmN2RhNmI5MDkwNTIyMTE1OHAyMDk3ZDc4YW41NjkwOTQwNGY5MTdmMmU0QG1haWwuZ21haWwuY29tPgkgPGd2NnVxZCtudjlwQGVHcm91cHMuY29tPgkgPEQwNEI2MkE1NkM2NUVBNEI4NjAwMzYxMDhCRDBBNjZDMDMxQkNGNzdAYm9zdG9uLWV4LmxhdmFzdG9ybS5sb2NhbC5jb20+"
    }
}